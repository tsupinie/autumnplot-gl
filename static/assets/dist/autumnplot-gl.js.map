{"version":3,"file":"autumnplot-gl.js","mappings":"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AAkB,IAPtBqa,KAv3FA7d,IAAc,GADV3J,EAAMiM,QAKC,GAAPjM,IACFA,GAAO,GAKTkL,EAAS,GAAO,GAAM,SACtBA,EAAU,EAAM,GAAM,GAAM,WAE5BA,EAAQ,GAAY,WAsCtB,WACE,GAAItD,EAAe,OAEjB,IAD+B,mBAApBA,EAAe,SAAiBA,EAAe,OAAI,CAACA,EAAe,SACvEA,EAAe,OAAErJ,QACtBoO,EAAY/E,EAAe,OAAE6I,SAGjCF,EAAqBhE,EACvB,CAy0FEsb,GAGI1a,EAAkB,IAuBlBvF,EAAkB,WACpBA,EAAkB,UAAE,cACpBkgB,WAAW,WACTA,WAAW,WACTlgB,EAAkB,UAAE,GACtB,EAAG,GACH+f,GACF,EAAG,IAGHA,IAEF3b,KACF,CA+BA,GAlkBmBpE,EAAqB,aAAI0G,EAAoB,eAAgB,GAyGpD,CAC1B,gBACA,uBACA,yBACA,uBACA,yBACA,iBACA,iBACA,sBACA,sBACA,cACA,aACA,SACA,aACA,eACA,WACA,UACA,WACA,YACA,YACA,YACA,YACA,eACA,gBACA,iBACA,aACA,gBACA,gBACA,UACA,oBACA,aACA,yBACA,kBACA,mBACA,uBACA,sBACA,mBACA,YACA,cACA,YACA,cACA,YACA,kBACA,oBACA,aACA,cACA,eACA,aACA,WACA,QACA,QACA,gBACA,iBACA,mBACA,0BACA,oBACA,iBACA,qBACA,cACA,iBACA,iBACA,SACA,SACA,SACA,eACA,qBACA,mBACA,gBACA,gBACA,kBACA,sBACA,qBACA,2BACA,yBACA,kBACA,wBACA,qBACA,6BACA,6BACA,0BACA,6BACA,iCACA,yCACA,4BACA,oCACA,oBACA,iCACA,yCACA,gCACA,wCACA,6BACA,qCACA,0BACA,mCACA,wBACA,eACA,wCACA,sBACA,iCACA,yCACA,wCACA,qBACA,gCACA,wCACA,6BACA,uBACA,+BACA,oCACA,uBACA,UACA,+BACA,uBACA,uBACA,eACA,eACA,4BACA,gBACA,iBACA,yBACA,yBACA,uBACA,iBACA,sBACA,wBACA,uBACA,aACA,cACA,gBACA,sBACA,kCACA,cACA,kBACA,mBACA,yBACA,uBACA,aACA,mBACA,YACA,oBACA,eACA,sBACA,yBACA,oBACA,sCACA,uCACA,kCACA,gCACA,qBACA,gCACA,iCACA,iCACA,4BACA,0BACA,6CACA,uBACA,iCACA,+BACA,eACA,6BACA,qBACA,eACA,cACA,WACA,sBACA,qBACA,WACA,WACA,aACA,sBACA,2BACA,cACA,mBACA,4BACA,8BACA,uBACA,4BACA,4BACA,2BACA,2BACA,sCACA,yCACA,yBACA,oBACA,iCACA,gBACA,qBACA,kBACA,kBACA,kBACA,mBACA,cACA,8BACA,sBACA,mBACA,kBACA,6BACA,kBACA,gBACA,eACA,SACA,SACA,wBACA,oBAEoB7F,QA9sEtB,SAA8ByH,GACH,oBAAdE,YAA8BzH,OAAOC,yBAAyBwH,WAAYF,IACnFvH,OAAOE,eAAeuH,WAAYF,EAAK,CACrCH,cAAc,EACd,GAAAjH,GAGE,IAAIqH,EAAM,KAAKD,mJAIX6X,EAAgB7X,EACf6X,EAAc3e,WAAW,OAC5B2e,EAAgB,IAAM7X,GAExBC,GAAO,8CAA8C4X,MACjD/X,EAA4BE,KAC9BC,GAAO,4FAETE,GAASF,EAEX,IAKJG,EAAwBJ,EAC1B,GAqrEwB,CACtB,MACA,cACA,YACA,eACA,YACA,eACA,mBACA,sBACA,MACA,MACA,WACA,QACA,aACA,cACA,mBACA,mBACA,6BACA,YACA,eACA,aACA,cACA,cACA,aACA,aACA,MACA,qBACA,kBACA,gCACA,6BACA,cACA,MACA,YACA,UACA,SACA,WACA,qBACA,UACA,gBACA,eACA,UACA,YACA,gBACA,mBACA,sBACA,WACA,WACA,OACA,UACA,cACA,oBACA,eACA,oBACA,eACA,kBACA,eACA,gBACA,gBACA,mBACA,gBACA,gBACA,mBACA,WACA,qBACA,wBACA,4BACA,0BACA,eACA,aACA,sBACA,aACA,yBACA,gBACA,kBACA,gBACA,oBACA,4BACA,6BACA,6BACA,sBACA,UACA,8BACA,OACA,WACA,iBACA,0BACA,gBACA,kBACA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","sources":["webpack://apgl/webpack/universalModuleDefinition","webpack://apgl/./node_modules/ieee754/index.js","webpack://apgl/./src/glsl/billboard_fragment.glsl","webpack://apgl/./src/glsl/contourfill_vertex.glsl","webpack://apgl/./node_modules/kd-tree-javascript/kdTree-min.js","webpack://apgl/./node_modules/pbf/index.js","webpack://apgl/./src/glsl/colormap.glsl","webpack://apgl/./src/glsl/paintball_fragment.glsl","webpack://apgl/./src/glsl/contourfill_fragment.glsl","webpack://apgl/./src/cpp/marchingsquares.js","webpack://apgl/./src/glsl/billboard_vertex.glsl","webpack://apgl/./src/glsl/paintball_vertex.glsl","webpack://apgl/./src/glsl/polyline_vertex.glsl","webpack://apgl/./src/glsl/text_vertex.glsl","webpack://apgl/./src/glsl/polyline_fragment.glsl","webpack://apgl/./src/glsl/text_fragment.glsl","webpack://apgl/webpack/bootstrap","webpack://apgl/webpack/runtime/compat get default export","webpack://apgl/webpack/runtime/define property getters","webpack://apgl/webpack/runtime/get javascript chunk filename","webpack://apgl/webpack/runtime/global","webpack://apgl/webpack/runtime/hasOwnProperty shorthand","webpack://apgl/webpack/runtime/make namespace object","webpack://apgl/webpack/runtime/publicPath","webpack://apgl/webpack/runtime/jsonp chunk loading","webpack://apgl/./node_modules/comlink/dist/esm/comlink.mjs","webpack://apgl/./src/utils.ts","webpack://apgl/./src/AutumnTypes.ts","webpack://apgl/./src/PlotComponent.ts","webpack://apgl/./src/Map.ts","webpack://apgl/./node_modules/autumn-wgl/lib/utils.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLBuffer.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLTexture.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLProgram.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLFramebuffer.js","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/messages.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/primordials.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/arrayIterator.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/is.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/brand.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/converter.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/spec.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/Float16Array.mjs","webpack://apgl/./src/Color.ts","webpack://apgl/./src/Colormap.ts","webpack://apgl/./src/ShaderManager.ts","webpack://apgl/./src/PolylineCollection.ts","webpack://apgl/./src/TextCollection.ts","webpack://apgl/./node_modules/potpack/index.js","webpack://apgl/./src/Grid.ts","webpack://apgl/./src/Contour.ts","webpack://apgl/./src/ContourCreator.ts","webpack://apgl/./src/RawField.ts","webpack://apgl/./src/Fill.ts","webpack://apgl/./src/BillboardCollection.ts","webpack://apgl/./src/Barbs.ts","webpack://apgl/./src/Paintball.ts","webpack://apgl/./src/Hodographs.ts","webpack://apgl/./src/StationPlot.ts","webpack://apgl/./src/PlotLayer.ts","webpack://apgl/./src/ColorBar.ts","webpack://apgl/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apgl\"] = factory();\n\telse\n\t\troot[\"apgl\"] = factory();\n})(this, () => {\nreturn ","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","module.exports = \"#version 300 es\\n\\nin highp vec2 v_tex_coord;\\n\\n#ifdef COLORMAP\\nin highp float v_mag;\\n#else\\nuniform lowp vec4 u_bb_color;\\n#endif\\n\\nuniform sampler2D u_sampler;\\n\\nout highp vec4 fragColor;\\n\\nvoid main() {\\n    lowp vec4 tex_color = texture(u_sampler, v_tex_coord);\\n\\n    lowp vec4 color;\\n#ifdef COLORMAP\\n    color = apply_colormap(v_mag);\\n#else\\n    color = u_bb_color;\\n#endif\\n\\n    color.a *= tex_color.a;\\n    fragColor = color; // mix(vec4(1.0, 0.0, 0.0, 0.5), color, tex_color.a);\\n}\"","module.exports = \"#version 300 es\\n\\nuniform int u_offset;\\n\\nin vec2 a_pos;\\nin vec2 a_tex_coord;\\n\\nout highp vec2 v_tex_coord;\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    gl_Position = projectTile(a_pos.xy + globe_offset);\\n    v_tex_coord = a_tex_coord;\\n}\"","/**\n * k-d Tree JavaScript - V 1.01\n *\n * https://github.com/ubilabs/kd-tree-javascript\n *\n * @author Mircea Pricop <pricop@ubilabs.net>, 2012\n * @author Martin Kleppe <kleppe@ubilabs.net>, 2012\n * @author Ubilabs http://ubilabs.net, 2012\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\n */!function(t,n){\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(\"object\"==typeof exports?exports:t)}(this,function(t){function n(t,n,o){this.obj=t,this.left=null,this.right=null,this.parent=o,this.dimension=n}function o(t){this.content=[],this.scoreFunction=t}o.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var n=this.content.length,o=0;o<n;o++)if(this.content[o]==t){var i=this.content.pop();return void(o!=n-1&&(this.content[o]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(o):this.sinkDown(o)))}throw new Error(\"Node not found.\")},size:function(){return this.content.length},bubbleUp:function(t){for(var n=this.content[t];t>0;){var o=Math.floor((t+1)/2)-1,i=this.content[o];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[o]=n,this.content[t]=i,t=o}},sinkDown:function(t){for(var n=this.content.length,o=this.content[t],i=this.scoreFunction(o);;){var e=2*(t+1),r=e-1,l=null;if(r<n){var u=this.content[r],h=this.scoreFunction(u);h<i&&(l=r)}if(e<n){var s=this.content[e];this.scoreFunction(s)<(null==l?i:h)&&(l=e)}if(null==l)break;this.content[t]=this.content[l],this.content[l]=o,t=l}}},t.kdTree=function(t,i,e){function r(t,o,i){var l,u,h=o%e.length;return 0===t.length?null:1===t.length?new n(t[0],h,i):(t.sort(function(t,n){return t[e[h]]-n[e[h]]}),l=Math.floor(t.length/2),u=new n(t[l],h,i),u.left=r(t.slice(0,l),o+1,u),u.right=r(t.slice(l+1),o+1,u),u)}var l=this;Array.isArray(t)?this.root=r(t,0,null):function(t){function n(t){t.left&&(t.left.parent=t,n(t.left)),t.right&&(t.right.parent=t,n(t.right))}l.root=t,n(l.root)}(t),this.toJSON=function(t){t||(t=this.root);var o=new n(t.obj,t.dimension,null);return t.left&&(o.left=l.toJSON(t.left)),t.right&&(o.right=l.toJSON(t.right)),o},this.insert=function(t){function o(n,i){if(null===n)return i;var r=e[n.dimension];return t[r]<n.obj[r]?o(n.left,n):o(n.right,n)}var i,r,l=o(this.root,null);null!==l?(i=new n(t,(l.dimension+1)%e.length,l),r=e[l.dimension],t[r]<l.obj[r]?l.left=i:l.right=i):this.root=new n(t,0,null)},this.remove=function(t){function n(o){if(null===o)return null;if(o.obj===t)return o;var i=e[o.dimension];return t[i]<o.obj[i]?n(o.left,o):n(o.right,o)}function o(t){function n(t,o){var i,r,l,u,h;return null===t?null:(i=e[o],t.dimension===o?null!==t.left?n(t.left,o):t:(r=t.obj[i],l=n(t.left,o),u=n(t.right,o),h=t,null!==l&&l.obj[i]<r&&(h=l),null!==u&&u.obj[i]<h.obj[i]&&(h=u),h))}var i,r,u;if(null===t.left&&null===t.right)return null===t.parent?void(l.root=null):(u=e[t.parent.dimension],void(t.obj[u]<t.parent.obj[u]?t.parent.left=null:t.parent.right=null));null!==t.right?(r=(i=n(t.right,t.dimension)).obj,o(i),t.obj=r):(r=(i=n(t.left,t.dimension)).obj,o(i),t.right=t.left,t.left=null,t.obj=r)}var i;null!==(i=n(l.root))&&o(i)},this.nearest=function(t,n,r){function u(o){function r(t,o){f.push([t,o]),f.size()>n&&f.pop()}var l,h,s,c,a=e[o.dimension],g=i(t,o.obj),p={};for(c=0;c<e.length;c+=1)c===o.dimension?p[e[c]]=t[e[c]]:p[e[c]]=o.obj[e[c]];h=i(p,o.obj),null!==o.right||null!==o.left?(u(l=null===o.right?o.left:null===o.left?o.right:t[a]<o.obj[a]?o.left:o.right),(f.size()<n||g<f.peek()[1])&&r(o,g),(f.size()<n||Math.abs(h)<f.peek()[1])&&null!==(s=l===o.left?o.right:o.left)&&u(s)):(f.size()<n||g<f.peek()[1])&&r(o,g)}var h,s,f;if(f=new o(function(t){return-t[1]}),r)for(h=0;h<n;h+=1)f.push([null,r]);for(l.root&&u(l.root),s=[],h=0;h<Math.min(n,f.content.length);h+=1)f.content[h][0]&&s.push([f.content[h][0].obj,f.content[h][1]]);return s},this.balanceFactor=function(){function t(n){return null===n?0:Math.max(t(n.left),t(n.right))+1}function n(t){return null===t?0:n(t.left)+n(t.right)+1}return t(l.root)/(Math.log(n(l.root))/Math.log(2))}},t.BinaryHeap=o});\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\n// Threshold chosen based on both benchmarking and knowledge about browser string\n// data structures (which currently switch structure types at 12 bytes or more)\nvar TEXT_DECODER_MIN_LENGTH = 12;\nvar utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf8');\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos;\n        var pos = this.pos;\n        this.pos = end;\n\n        if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {\n            // longer strings are fast with the built-in browser TextDecoder API\n            return readUtf8TextDecoder(this.buf, pos, end);\n        }\n        // short strings are fast with our custom implementation\n        return readUtf8(this.buf, pos, end);\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction readUtf8TextDecoder(buf, pos, end) {\n    return utf8TextDecoder.decode(buf.subarray(pos, end));\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","module.exports = \"\\nuniform sampler2D u_cmap_sampler;\\nuniform sampler2D u_cmap_nonlin_sampler;\\nuniform highp float u_cmap_min;\\nuniform highp float u_cmap_max;\\nuniform highp vec4 u_underflow_color;\\nuniform highp vec4 u_overflow_color;\\nuniform int u_n_index;\\n\\nlowp vec4 apply_colormap(highp float value) {\\n    lowp float normed_val = (value - u_cmap_min) / (u_cmap_max - u_cmap_min);\\n    \\n    lowp vec4 color;\\n    if (normed_val < 0.0) {\\n        color = u_underflow_color;\\n    }\\n    else if (normed_val > 1.0) {\\n        color = u_overflow_color;\\n    }\\n    else {\\n        lowp float index_buffer = 1. / (2. * float(u_n_index));\\n        normed_val = index_buffer + normed_val * (1. - 2. * index_buffer); // Chop off the half pixels on either end of the texture\\n        highp float nonlin_val = texture(u_cmap_nonlin_sampler, vec2(normed_val, 0.5)).r;\\n        color = texture(u_cmap_sampler, vec2(nonlin_val, 0.5));\\n    }\\n\\n    return color;\\n}\"","module.exports = \"#version 300 es\\n\\n#define MAX_N_COLORS 24\\n\\nin highp vec2 v_tex_coord;\\n\\nuniform sampler2D u_fill_sampler;\\nuniform lowp vec4 u_colors[MAX_N_COLORS];\\nuniform int u_num_colors;\\nuniform highp float u_opacity;\\n\\nout highp vec4 fragColor;\\n\\nvoid main() {\\n    highp float fill_val = texture(u_fill_sampler, v_tex_coord).r;\\n    \\n    if (fill_val < 0.5) {\\n        discard;\\n    }\\n\\n    lowp vec4 color = vec4(0., 0., 0., 0.);\\n\\n    for (int nclr = 0; nclr < MAX_N_COLORS ; nclr++) {\\n        if (nclr >= u_num_colors || fill_val < 0.99) { break; }\\n\\n        lowp float mem_active = mod(fill_val, 2.);\\n        color = mix(color, u_colors[nclr], mem_active);\\n        fill_val = floor(fill_val / 2.);\\n    }\\n\\n    color.a = color.a * u_opacity;\\n    fragColor = color;\\n}\"","module.exports = \"#version 300 es\\n\\nin highp vec2 v_tex_coord;\\n\\nuniform sampler2D u_fill_sampler;\\n\\n#ifdef MASK\\nuniform sampler2D u_mask_sampler;\\n#endif\\n\\nuniform highp float u_opacity;\\n#ifdef MASK\\nuniform int u_mask_val;\\n#endif\\n\\nout highp vec4 fragColor;\\n\\nvoid main() {\\n    highp float fill_val = texture(u_fill_sampler, v_tex_coord).r;\\n\\n    int draw_mask = 1;\\n\\n#ifdef MASK\\n    highp float mask_val = texture(u_mask_sampler, v_tex_coord).r;\\n    draw_mask = int(mask_val * 255.0) == u_mask_val ? 1 : 0;\\n#endif\\n\\n    if (isnan(fill_val) || draw_mask == 0) {\\n        discard;\\n    }\\n\\n    lowp vec4 color = apply_colormap(fill_val);\\n    color.a = color.a * u_opacity;\\n    fragColor = color;\\n}\"","\nvar Module = (() => {\n  var _scriptName = typeof document != 'undefined' ? document.currentScript?.src : undefined;\n  \n  return (\nfunction(moduleArg = {}) {\n  var moduleRtn;\n\n// include: shell.js\n// The Module object: Our interface to the outside world. We import\n// and export values on it. There are various ways Module can be used:\n// 1. Not defined. We create it here\n// 2. A function parameter, function(moduleArg) => Promise<Module>\n// 3. pre-run appended it, var Module = {}; ..generated code..\n// 4. External script tag defines var Module.\n// We need to check if Module already exists (e.g. case 3 above).\n// Substitution will be replaced with actual code on later stage of the build,\n// this way Closure Compiler will not mangle it (e.g. case 4. above).\n// Note that if you want to run closure, and also to use Module\n// after the generated code, you will need to define   var Module = {};\n// before the code. Then that object will be used in the code, and you\n// can continue to use Module afterwards as well.\nvar Module = moduleArg;\n\n// Set up the promise that indicates the Module is initialized\nvar readyPromiseResolve, readyPromiseReject;\nvar readyPromise = new Promise((resolve, reject) => {\n  readyPromiseResolve = resolve;\n  readyPromiseReject = reject;\n});\n[\"getExceptionMessage\",\"incrementExceptionRefcount\",\"decrementExceptionRefcount\",\"_memory\",\"___indirect_function_table\",\"onRuntimeInitialized\"].forEach((prop) => {\n  if (!Object.getOwnPropertyDescriptor(readyPromise, prop)) {\n    Object.defineProperty(readyPromise, prop, {\n      get: () => abort('You are getting ' + prop + ' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),\n      set: () => abort('You are setting ' + prop + ' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),\n    });\n  }\n});\n\n// Determine the runtime environment we are in. You can customize this by\n// setting the ENVIRONMENT setting at compile time (see settings.js).\n\nvar ENVIRONMENT_IS_WEB = true;\nvar ENVIRONMENT_IS_WORKER = false;\nvar ENVIRONMENT_IS_NODE = false;\nvar ENVIRONMENT_IS_SHELL = false;\n\nif (Module['ENVIRONMENT']) {\n  throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');\n}\n\n// --pre-jses are emitted after the Module integration code, so that they can\n// refer to Module (if they choose; they can also define Module)\n\n\n// Sometimes an existing Module object exists with properties\n// meant to overwrite the default module functionality. Here\n// we collect those properties and reapply _after_ we configure\n// the current environment's defaults to avoid having to be so\n// defensive during initialization.\nvar moduleOverrides = Object.assign({}, Module);\n\nvar arguments_ = [];\nvar thisProgram = './this.program';\nvar quit_ = (status, toThrow) => {\n  throw toThrow;\n};\n\n// `/` should be present at the end if `scriptDirectory` is not empty\nvar scriptDirectory = '';\nfunction locateFile(path) {\n  if (Module['locateFile']) {\n    return Module['locateFile'](path, scriptDirectory);\n  }\n  return scriptDirectory + path;\n}\n\n// Hooks that are implemented differently in different runtime environments.\nvar readAsync, readBinary;\n\nif (ENVIRONMENT_IS_SHELL) {\n\n  if ((typeof process == 'object' && typeof require === 'function') || typeof window == 'object' || typeof importScripts == 'function') throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n} else\n\n// Note that this includes Node.js workers when relevant (pthreads is enabled).\n// Node.js workers are detected as a combination of ENVIRONMENT_IS_WORKER and\n// ENVIRONMENT_IS_NODE.\nif (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n  if (ENVIRONMENT_IS_WORKER) { // Check worker, not web, since window could be polyfilled\n    scriptDirectory = self.location.href;\n  } else if (typeof document != 'undefined' && document.currentScript) { // web\n    scriptDirectory = document.currentScript.src;\n  }\n  // When MODULARIZE, this JS may be executed later, after document.currentScript\n  // is gone, so we saved it, and we use it here instead of any other info.\n  if (_scriptName) {\n    scriptDirectory = _scriptName;\n  }\n  // blob urls look like blob:http://site.com/etc/etc and we cannot infer anything from them.\n  // otherwise, slice off the final part of the url to find the script directory.\n  // if scriptDirectory does not contain a slash, lastIndexOf will return -1,\n  // and scriptDirectory will correctly be replaced with an empty string.\n  // If scriptDirectory contains a query (starting with ?) or a fragment (starting with #),\n  // they are removed because they could contain a slash.\n  if (scriptDirectory.startsWith('blob:')) {\n    scriptDirectory = '';\n  } else {\n    scriptDirectory = scriptDirectory.substr(0, scriptDirectory.replace(/[?#].*/, '').lastIndexOf('/')+1);\n  }\n\n  if (!(typeof window == 'object' || typeof importScripts == 'function')) throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  {\n// include: web_or_worker_shell_read.js\nreadAsync = (url) => {\n    assert(!isFileURI(url), \"readAsync does not work with file:// URLs\");\n    return fetch(url, { credentials: 'same-origin' })\n      .then((response) => {\n        if (response.ok) {\n          return response.arrayBuffer();\n        }\n        return Promise.reject(new Error(response.status + ' : ' + response.url));\n      })\n  };\n// end include: web_or_worker_shell_read.js\n  }\n} else\n{\n  throw new Error('environment detection error');\n}\n\nvar out = Module['print'] || console.log.bind(console);\nvar err = Module['printErr'] || console.error.bind(console);\n\n// Merge back in the overrides\nObject.assign(Module, moduleOverrides);\n// Free the object hierarchy contained in the overrides, this lets the GC\n// reclaim data used.\nmoduleOverrides = null;\ncheckIncomingModuleAPI();\n\n// Emit code to handle expected values on the Module object. This applies Module.x\n// to the proper local x. This has two benefits: first, we only emit it if it is\n// expected to arrive, and second, by using a local everywhere else that can be\n// minified.\n\nif (Module['arguments']) arguments_ = Module['arguments'];legacyModuleProp('arguments', 'arguments_');\n\nif (Module['thisProgram']) thisProgram = Module['thisProgram'];legacyModuleProp('thisProgram', 'thisProgram');\n\nif (Module['quit']) quit_ = Module['quit'];legacyModuleProp('quit', 'quit_');\n\n// perform assertions in shell.js after we set up out() and err(), as otherwise if an assertion fails it cannot print the message\n// Assertions on removed incoming Module JS APIs.\nassert(typeof Module['memoryInitializerPrefixURL'] == 'undefined', 'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['pthreadMainPrefixURL'] == 'undefined', 'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['cdInitializerPrefixURL'] == 'undefined', 'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['filePackagePrefixURL'] == 'undefined', 'Module.filePackagePrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['read'] == 'undefined', 'Module.read option was removed');\nassert(typeof Module['readAsync'] == 'undefined', 'Module.readAsync option was removed (modify readAsync in JS)');\nassert(typeof Module['readBinary'] == 'undefined', 'Module.readBinary option was removed (modify readBinary in JS)');\nassert(typeof Module['setWindowTitle'] == 'undefined', 'Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)');\nassert(typeof Module['TOTAL_MEMORY'] == 'undefined', 'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY');\nlegacyModuleProp('asm', 'wasmExports');\nlegacyModuleProp('readAsync', 'readAsync');\nlegacyModuleProp('readBinary', 'readBinary');\nlegacyModuleProp('setWindowTitle', 'setWindowTitle');\nvar IDBFS = 'IDBFS is no longer included by default; build with -lidbfs.js';\nvar PROXYFS = 'PROXYFS is no longer included by default; build with -lproxyfs.js';\nvar WORKERFS = 'WORKERFS is no longer included by default; build with -lworkerfs.js';\nvar FETCHFS = 'FETCHFS is no longer included by default; build with -lfetchfs.js';\nvar ICASEFS = 'ICASEFS is no longer included by default; build with -licasefs.js';\nvar JSFILEFS = 'JSFILEFS is no longer included by default; build with -ljsfilefs.js';\nvar OPFS = 'OPFS is no longer included by default; build with -lopfs.js';\n\nvar NODEFS = 'NODEFS is no longer included by default; build with -lnodefs.js';\n\nassert(!ENVIRONMENT_IS_WORKER, 'worker environment detected but not enabled at build time.  Add `worker` to `-sENVIRONMENT` to enable.');\n\nassert(!ENVIRONMENT_IS_NODE, 'node environment detected but not enabled at build time.  Add `node` to `-sENVIRONMENT` to enable.');\n\nassert(!ENVIRONMENT_IS_SHELL, 'shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.');\n\n// end include: shell.js\n\n// include: preamble.js\n// === Preamble library stuff ===\n\n// Documentation for the public APIs defined in this file must be updated in:\n//    site/source/docs/api_reference/preamble.js.rst\n// A prebuilt local version of the documentation is available at:\n//    site/build/text/docs/api_reference/preamble.js.txt\n// You can also build docs locally as HTML or other formats in site/\n// An online HTML version (which may be of a different version of Emscripten)\n//    is up at http://kripken.github.io/emscripten-site/docs/api_reference/preamble.js.html\n\nvar wasmBinary; \nif (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];legacyModuleProp('wasmBinary', 'wasmBinary');\n\nif (typeof WebAssembly != 'object') {\n  err('no native wasm support detected');\n}\n\n// Wasm globals\n\nvar wasmMemory;\n\n//========================================\n// Runtime essentials\n//========================================\n\n// whether we are quitting the application. no code should run after this.\n// set in exit() and abort()\nvar ABORT = false;\n\n// set by exit() and abort().  Passed to 'onExit' handler.\n// NOTE: This is also used as the process return code code in shell environments\n// but only when noExitRuntime is false.\nvar EXITSTATUS;\n\n// In STRICT mode, we only define assert() when ASSERTIONS is set.  i.e. we\n// don't define it at all in release modes.  This matches the behaviour of\n// MINIMAL_RUNTIME.\n// TODO(sbc): Make this the default even without STRICT enabled.\n/** @type {function(*, string=)} */\nfunction assert(condition, text) {\n  if (!condition) {\n    abort('Assertion failed' + (text ? ': ' + text : ''));\n  }\n}\n\n// We used to include malloc/free by default in the past. Show a helpful error in\n// builds with assertions.\n\n// Memory management\n\nvar HEAP,\n/** @type {!Int8Array} */\n  HEAP8,\n/** @type {!Uint8Array} */\n  HEAPU8,\n/** @type {!Int16Array} */\n  HEAP16,\n/** @type {!Uint16Array} */\n  HEAPU16,\n/** @type {!Int32Array} */\n  HEAP32,\n/** @type {!Uint32Array} */\n  HEAPU32,\n/** @type {!Float32Array} */\n  HEAPF32,\n/** @type {!Float64Array} */\n  HEAPF64;\n\n// include: runtime_shared.js\nfunction updateMemoryViews() {\n  var b = wasmMemory.buffer;\n  Module['HEAP8'] = HEAP8 = new Int8Array(b);\n  Module['HEAP16'] = HEAP16 = new Int16Array(b);\n  Module['HEAPU8'] = HEAPU8 = new Uint8Array(b);\n  Module['HEAPU16'] = HEAPU16 = new Uint16Array(b);\n  Module['HEAP32'] = HEAP32 = new Int32Array(b);\n  Module['HEAPU32'] = HEAPU32 = new Uint32Array(b);\n  Module['HEAPF32'] = HEAPF32 = new Float32Array(b);\n  Module['HEAPF64'] = HEAPF64 = new Float64Array(b);\n}\n// end include: runtime_shared.js\nassert(!Module['STACK_SIZE'], 'STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time')\n\nassert(typeof Int32Array != 'undefined' && typeof Float64Array !== 'undefined' && Int32Array.prototype.subarray != undefined && Int32Array.prototype.set != undefined,\n       'JS engine does not provide full typed array support');\n\n// If memory is defined in wasm, the user can't provide it, or set INITIAL_MEMORY\nassert(!Module['wasmMemory'], 'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally');\nassert(!Module['INITIAL_MEMORY'], 'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically');\n\n// include: runtime_stack_check.js\n// Initializes the stack cookie. Called at the startup of main and at the startup of each thread in pthreads mode.\nfunction writeStackCookie() {\n  var max = _emscripten_stack_get_end();\n  assert((max & 3) == 0);\n  // If the stack ends at address zero we write our cookies 4 bytes into the\n  // stack.  This prevents interference with SAFE_HEAP and ASAN which also\n  // monitor writes to address zero.\n  if (max == 0) {\n    max += 4;\n  }\n  // The stack grow downwards towards _emscripten_stack_get_end.\n  // We write cookies to the final two words in the stack and detect if they are\n  // ever overwritten.\n  HEAPU32[((max)>>2)] = 0x02135467;\n  HEAPU32[(((max)+(4))>>2)] = 0x89BACDFE;\n  // Also test the global address 0 for integrity.\n  HEAPU32[((0)>>2)] = 1668509029;\n}\n\nfunction checkStackCookie() {\n  if (ABORT) return;\n  var max = _emscripten_stack_get_end();\n  // See writeStackCookie().\n  if (max == 0) {\n    max += 4;\n  }\n  var cookie1 = HEAPU32[((max)>>2)];\n  var cookie2 = HEAPU32[(((max)+(4))>>2)];\n  if (cookie1 != 0x02135467 || cookie2 != 0x89BACDFE) {\n    abort(`Stack overflow! Stack cookie has been overwritten at ${ptrToString(max)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ptrToString(cookie2)} ${ptrToString(cookie1)}`);\n  }\n  // Also test the global address 0 for integrity.\n  if (HEAPU32[((0)>>2)] != 0x63736d65 /* 'emsc' */) {\n    abort('Runtime error: The application has corrupted its heap memory area (address zero)!');\n  }\n}\n// end include: runtime_stack_check.js\n// include: runtime_assertions.js\n// Endianness check\n(function() {\n  var h16 = new Int16Array(1);\n  var h8 = new Int8Array(h16.buffer);\n  h16[0] = 0x6373;\n  if (h8[0] !== 0x73 || h8[1] !== 0x63) throw 'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)';\n})();\n\n// end include: runtime_assertions.js\nvar __ATPRERUN__  = []; // functions called before the runtime is initialized\nvar __ATINIT__    = []; // functions called during startup\nvar __ATEXIT__    = []; // functions called during shutdown\nvar __ATPOSTRUN__ = []; // functions called after the main() is called\n\nvar runtimeInitialized = false;\n\nfunction preRun() {\n  if (Module['preRun']) {\n    if (typeof Module['preRun'] == 'function') Module['preRun'] = [Module['preRun']];\n    while (Module['preRun'].length) {\n      addOnPreRun(Module['preRun'].shift());\n    }\n  }\n  callRuntimeCallbacks(__ATPRERUN__);\n}\n\nfunction initRuntime() {\n  assert(!runtimeInitialized);\n  runtimeInitialized = true;\n\n  checkStackCookie();\n\n  \n  callRuntimeCallbacks(__ATINIT__);\n}\n\nfunction postRun() {\n  checkStackCookie();\n\n  if (Module['postRun']) {\n    if (typeof Module['postRun'] == 'function') Module['postRun'] = [Module['postRun']];\n    while (Module['postRun'].length) {\n      addOnPostRun(Module['postRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPOSTRUN__);\n}\n\nfunction addOnPreRun(cb) {\n  __ATPRERUN__.unshift(cb);\n}\n\nfunction addOnInit(cb) {\n  __ATINIT__.unshift(cb);\n}\n\nfunction addOnExit(cb) {\n}\n\nfunction addOnPostRun(cb) {\n  __ATPOSTRUN__.unshift(cb);\n}\n\n// include: runtime_math.js\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/fround\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc\n\nassert(Math.imul, 'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.fround, 'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.clz32, 'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.trunc, 'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\n// end include: runtime_math.js\n// A counter of dependencies for calling run(). If we need to\n// do asynchronous work before running, increment this and\n// decrement it. Incrementing must happen in a place like\n// Module.preRun (used by emcc to add file preloading).\n// Note that you can add dependencies in preRun, even though\n// it happens right before run - run will be postponed until\n// the dependencies are met.\nvar runDependencies = 0;\nvar runDependencyWatcher = null;\nvar dependenciesFulfilled = null; // overridden to take different actions when all run dependencies are fulfilled\nvar runDependencyTracking = {};\n\nfunction getUniqueRunDependency(id) {\n  var orig = id;\n  while (1) {\n    if (!runDependencyTracking[id]) return id;\n    id = orig + Math.random();\n  }\n}\n\nfunction addRunDependency(id) {\n  runDependencies++;\n\n  Module['monitorRunDependencies']?.(runDependencies);\n\n  if (id) {\n    assert(!runDependencyTracking[id]);\n    runDependencyTracking[id] = 1;\n    if (runDependencyWatcher === null && typeof setInterval != 'undefined') {\n      // Check for missing dependencies every few seconds\n      runDependencyWatcher = setInterval(() => {\n        if (ABORT) {\n          clearInterval(runDependencyWatcher);\n          runDependencyWatcher = null;\n          return;\n        }\n        var shown = false;\n        for (var dep in runDependencyTracking) {\n          if (!shown) {\n            shown = true;\n            err('still waiting on run dependencies:');\n          }\n          err(`dependency: ${dep}`);\n        }\n        if (shown) {\n          err('(end of list)');\n        }\n      }, 10000);\n    }\n  } else {\n    err('warning: run dependency added without ID');\n  }\n}\n\nfunction removeRunDependency(id) {\n  runDependencies--;\n\n  Module['monitorRunDependencies']?.(runDependencies);\n\n  if (id) {\n    assert(runDependencyTracking[id]);\n    delete runDependencyTracking[id];\n  } else {\n    err('warning: run dependency removed without ID');\n  }\n  if (runDependencies == 0) {\n    if (runDependencyWatcher !== null) {\n      clearInterval(runDependencyWatcher);\n      runDependencyWatcher = null;\n    }\n    if (dependenciesFulfilled) {\n      var callback = dependenciesFulfilled;\n      dependenciesFulfilled = null;\n      callback(); // can add another dependenciesFulfilled\n    }\n  }\n}\n\n/** @param {string|number=} what */\nfunction abort(what) {\n  Module['onAbort']?.(what);\n\n  what = 'Aborted(' + what + ')';\n  // TODO(sbc): Should we remove printing and leave it up to whoever\n  // catches the exception?\n  err(what);\n\n  ABORT = true;\n  EXITSTATUS = 1;\n\n  // Use a wasm runtime error, because a JS error might be seen as a foreign\n  // exception, which means we'd run destructors on it. We need the error to\n  // simply make the program stop.\n  // FIXME This approach does not work in Wasm EH because it currently does not assume\n  // all RuntimeErrors are from traps; it decides whether a RuntimeError is from\n  // a trap or not based on a hidden field within the object. So at the moment\n  // we don't have a way of throwing a wasm trap from JS. TODO Make a JS API that\n  // allows this in the wasm spec.\n\n  // Suppress closure compiler warning here. Closure compiler's builtin extern\n  // definition for WebAssembly.RuntimeError claims it takes no arguments even\n  // though it can.\n  // TODO(https://github.com/google/closure-compiler/pull/3913): Remove if/when upstream closure gets fixed.\n  /** @suppress {checkTypes} */\n  var e = new WebAssembly.RuntimeError(what);\n\n  readyPromiseReject(e);\n  // Throw the error whether or not MODULARIZE is set because abort is used\n  // in code paths apart from instantiation where an exception is expected\n  // to be thrown when abort is called.\n  throw e;\n}\n\n// include: memoryprofiler.js\n// end include: memoryprofiler.js\n// show errors on likely calls to FS when it was not included\nvar FS = {\n  error() {\n    abort('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM');\n  },\n  init() { FS.error() },\n  createDataFile() { FS.error() },\n  createPreloadedFile() { FS.error() },\n  createLazyFile() { FS.error() },\n  open() { FS.error() },\n  mkdev() { FS.error() },\n  registerDevice() { FS.error() },\n  analyzePath() { FS.error() },\n\n  ErrnoError() { FS.error() },\n};\nModule['FS_createDataFile'] = FS.createDataFile;\nModule['FS_createPreloadedFile'] = FS.createPreloadedFile;\n\n// include: URIUtils.js\n// Prefix of data URIs emitted by SINGLE_FILE and related options.\nvar dataURIPrefix = 'data:application/octet-stream;base64,';\n\n/**\n * Indicates whether filename is a base64 data URI.\n * @noinline\n */\nvar isDataURI = (filename) => filename.startsWith(dataURIPrefix);\n\n/**\n * Indicates whether filename is delivered via file protocol (as opposed to http/https)\n * @noinline\n */\nvar isFileURI = (filename) => filename.startsWith('file://');\n// end include: URIUtils.js\nfunction createExportWrapper(name, nargs) {\n  return (...args) => {\n    assert(runtimeInitialized, `native function \\`${name}\\` called before runtime initialization`);\n    var f = wasmExports[name];\n    assert(f, `exported native function \\`${name}\\` not found`);\n    // Only assert for too many arguments. Too few can be valid since the missing arguments will be zero filled.\n    assert(args.length <= nargs, `native function \\`${name}\\` called with ${args.length} args but expects ${nargs}`);\n    return f(...args);\n  };\n}\n\n// include: runtime_exceptions.js\n// Base Emscripten EH error class\nclass EmscriptenEH extends Error {}\n\nclass EmscriptenSjLj extends EmscriptenEH {}\n\nclass CppException extends EmscriptenEH {\n  constructor(excPtr) {\n    super(excPtr);\n    this.excPtr = excPtr;\n    const excInfo = getExceptionMessage(excPtr);\n    this.name = excInfo[0];\n    this.message = excInfo[1];\n  }\n}\n// end include: runtime_exceptions.js\nfunction findWasmBinary() {\n    var f = 'marchingsquares.wasm';\n    if (!isDataURI(f)) {\n      return locateFile(f);\n    }\n    return f;\n}\n\nvar wasmBinaryFile;\n\nfunction getBinarySync(file) {\n  if (file == wasmBinaryFile && wasmBinary) {\n    return new Uint8Array(wasmBinary);\n  }\n  if (readBinary) {\n    return readBinary(file);\n  }\n  throw 'both async and sync fetching of the wasm failed';\n}\n\nfunction getBinaryPromise(binaryFile) {\n  // If we don't have the binary yet, load it asynchronously using readAsync.\n  if (!wasmBinary\n      ) {\n    // Fetch the binary using readAsync\n    return readAsync(binaryFile).then(\n      (response) => new Uint8Array(/** @type{!ArrayBuffer} */(response)),\n      // Fall back to getBinarySync if readAsync fails\n      () => getBinarySync(binaryFile)\n    );\n  }\n\n  // Otherwise, getBinarySync should be able to get it synchronously\n  return Promise.resolve().then(() => getBinarySync(binaryFile));\n}\n\nfunction instantiateArrayBuffer(binaryFile, imports, receiver) {\n  return getBinaryPromise(binaryFile).then((binary) => {\n    return WebAssembly.instantiate(binary, imports);\n  }).then(receiver, (reason) => {\n    err(`failed to asynchronously prepare wasm: ${reason}`);\n\n    // Warn on some common problems.\n    if (isFileURI(wasmBinaryFile)) {\n      err(`warning: Loading from a file URI (${wasmBinaryFile}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`);\n    }\n    abort(reason);\n  });\n}\n\nfunction instantiateAsync(binary, binaryFile, imports, callback) {\n  if (!binary &&\n      typeof WebAssembly.instantiateStreaming == 'function' &&\n      !isDataURI(binaryFile) &&\n      typeof fetch == 'function') {\n    return fetch(binaryFile, { credentials: 'same-origin' }).then((response) => {\n      // Suppress closure warning here since the upstream definition for\n      // instantiateStreaming only allows Promise<Repsponse> rather than\n      // an actual Response.\n      // TODO(https://github.com/google/closure-compiler/pull/3913): Remove if/when upstream closure is fixed.\n      /** @suppress {checkTypes} */\n      var result = WebAssembly.instantiateStreaming(response, imports);\n\n      return result.then(\n        callback,\n        function(reason) {\n          // We expect the most common failure cause to be a bad MIME type for the binary,\n          // in which case falling back to ArrayBuffer instantiation should work.\n          err(`wasm streaming compile failed: ${reason}`);\n          err('falling back to ArrayBuffer instantiation');\n          return instantiateArrayBuffer(binaryFile, imports, callback);\n        });\n    });\n  }\n  return instantiateArrayBuffer(binaryFile, imports, callback);\n}\n\nfunction getWasmImports() {\n  // prepare imports\n  return {\n    'env': wasmImports,\n    'wasi_snapshot_preview1': wasmImports,\n  }\n}\n\n// Create the wasm instance.\n// Receives the wasm imports, returns the exports.\nfunction createWasm() {\n  var info = getWasmImports();\n  // Load the wasm module and create an instance of using native support in the JS engine.\n  // handle a generated wasm instance, receiving its exports and\n  // performing other necessary setup\n  /** @param {WebAssembly.Module=} module*/\n  function receiveInstance(instance, module) {\n    wasmExports = instance.exports;\n\n    \n\n    wasmMemory = wasmExports['memory'];\n    \n    assert(wasmMemory, 'memory not found in wasm exports');\n    updateMemoryViews();\n\n    wasmTable = wasmExports['__indirect_function_table'];\n    \n    assert(wasmTable, 'table not found in wasm exports');\n\n    addOnInit(wasmExports['__wasm_call_ctors']);\n\n    removeRunDependency('wasm-instantiate');\n    return wasmExports;\n  }\n  // wait for the pthread pool (if any)\n  addRunDependency('wasm-instantiate');\n\n  // Prefer streaming instantiation if available.\n  // Async compilation can be confusing when an error on the page overwrites Module\n  // (for example, if the order of elements is wrong, and the one defining Module is\n  // later), so we save Module and check it later.\n  var trueModule = Module;\n  function receiveInstantiationResult(result) {\n    // 'result' is a ResultObject object which has both the module and instance.\n    // receiveInstance() will swap in the exports (to Module.asm) so they can be called\n    assert(Module === trueModule, 'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?');\n    trueModule = null;\n    // TODO: Due to Closure regression https://github.com/google/closure-compiler/issues/3193, the above line no longer optimizes out down to the following line.\n    // When the regression is fixed, can restore the above PTHREADS-enabled path.\n    receiveInstance(result['instance']);\n  }\n\n  // User shell pages can write their own Module.instantiateWasm = function(imports, successCallback) callback\n  // to manually instantiate the Wasm module themselves. This allows pages to\n  // run the instantiation parallel to any other async startup actions they are\n  // performing.\n  // Also pthreads and wasm workers initialize the wasm instance through this\n  // path.\n  if (Module['instantiateWasm']) {\n    try {\n      return Module['instantiateWasm'](info, receiveInstance);\n    } catch(e) {\n      err(`Module.instantiateWasm callback failed with error: ${e}`);\n        // If instantiation fails, reject the module ready promise.\n        readyPromiseReject(e);\n    }\n  }\n\n  if (!wasmBinaryFile) wasmBinaryFile = findWasmBinary();\n\n  // If instantiation fails, reject the module ready promise.\n  instantiateAsync(wasmBinary, wasmBinaryFile, info, receiveInstantiationResult).catch(readyPromiseReject);\n  return {}; // no exports yet; we'll fill them in later\n}\n\n// Globals used by JS i64 conversions (see makeSetValue)\nvar tempDouble;\nvar tempI64;\n\n// include: runtime_debug.js\nfunction legacyModuleProp(prop, newName, incoming=true) {\n  if (!Object.getOwnPropertyDescriptor(Module, prop)) {\n    Object.defineProperty(Module, prop, {\n      configurable: true,\n      get() {\n        let extra = incoming ? ' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)' : '';\n        abort(`\\`Module.${prop}\\` has been replaced by \\`${newName}\\`` + extra);\n\n      }\n    });\n  }\n}\n\nfunction ignoredModuleProp(prop) {\n  if (Object.getOwnPropertyDescriptor(Module, prop)) {\n    abort(`\\`Module.${prop}\\` was supplied but \\`${prop}\\` not included in INCOMING_MODULE_JS_API`);\n  }\n}\n\n// forcing the filesystem exports a few things by default\nfunction isExportedByForceFilesystem(name) {\n  return name === 'FS_createPath' ||\n         name === 'FS_createDataFile' ||\n         name === 'FS_createPreloadedFile' ||\n         name === 'FS_unlink' ||\n         name === 'addRunDependency' ||\n         // The old FS has some functionality that WasmFS lacks.\n         name === 'FS_createLazyFile' ||\n         name === 'FS_createDevice' ||\n         name === 'removeRunDependency';\n}\n\nfunction missingGlobal(sym, msg) {\n  if (typeof globalThis != 'undefined') {\n    Object.defineProperty(globalThis, sym, {\n      configurable: true,\n      get() {\n        warnOnce(`\\`${sym}\\` is not longer defined by emscripten. ${msg}`);\n        return undefined;\n      }\n    });\n  }\n}\n\nmissingGlobal('buffer', 'Please use HEAP8.buffer or wasmMemory.buffer');\nmissingGlobal('asm', 'Please use wasmExports instead');\n\nfunction missingLibrarySymbol(sym) {\n  if (typeof globalThis != 'undefined' && !Object.getOwnPropertyDescriptor(globalThis, sym)) {\n    Object.defineProperty(globalThis, sym, {\n      configurable: true,\n      get() {\n        // Can't `abort()` here because it would break code that does runtime\n        // checks.  e.g. `if (typeof SDL === 'undefined')`.\n        var msg = `\\`${sym}\\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`;\n        // DEFAULT_LIBRARY_FUNCS_TO_INCLUDE requires the name as it appears in\n        // library.js, which means $name for a JS name with no prefix, or name\n        // for a JS name like _name.\n        var librarySymbol = sym;\n        if (!librarySymbol.startsWith('_')) {\n          librarySymbol = '$' + sym;\n        }\n        msg += ` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${librarySymbol}')`;\n        if (isExportedByForceFilesystem(sym)) {\n          msg += '. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you';\n        }\n        warnOnce(msg);\n        return undefined;\n      }\n    });\n  }\n  // Any symbol that is not included from the JS library is also (by definition)\n  // not exported on the Module object.\n  unexportedRuntimeSymbol(sym);\n}\n\nfunction unexportedRuntimeSymbol(sym) {\n  if (!Object.getOwnPropertyDescriptor(Module, sym)) {\n    Object.defineProperty(Module, sym, {\n      configurable: true,\n      get() {\n        var msg = `'${sym}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;\n        if (isExportedByForceFilesystem(sym)) {\n          msg += '. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you';\n        }\n        abort(msg);\n      }\n    });\n  }\n}\n\n// Used by XXXXX_DEBUG settings to output debug messages.\nfunction dbg(...args) {\n  // TODO(sbc): Make this configurable somehow.  Its not always convenient for\n  // logging to show up as warnings.\n  console.warn(...args);\n}\n// end include: runtime_debug.js\n// === Body ===\n// end include: preamble.js\n\n\n  /** @constructor */\n  function ExitStatus(status) {\n      this.name = 'ExitStatus';\n      this.message = `Program terminated with exit(${status})`;\n      this.status = status;\n    }\n\n  var callRuntimeCallbacks = (callbacks) => {\n      while (callbacks.length > 0) {\n        // Pass the module as the first argument.\n        callbacks.shift()(Module);\n      }\n    };\n\n  \n    /**\n     * @param {number} ptr\n     * @param {string} type\n     */\n  function getValue(ptr, type = 'i8') {\n    if (type.endsWith('*')) type = '*';\n    switch (type) {\n      case 'i1': return HEAP8[ptr];\n      case 'i8': return HEAP8[ptr];\n      case 'i16': return HEAP16[((ptr)>>1)];\n      case 'i32': return HEAP32[((ptr)>>2)];\n      case 'i64': abort('to do getValue(i64) use WASM_BIGINT');\n      case 'float': return HEAPF32[((ptr)>>2)];\n      case 'double': return HEAPF64[((ptr)>>3)];\n      case '*': return HEAPU32[((ptr)>>2)];\n      default: abort(`invalid type for getValue: ${type}`);\n    }\n  }\n\n  var noExitRuntime = Module['noExitRuntime'] || true;\n\n  var ptrToString = (ptr) => {\n      assert(typeof ptr === 'number');\n      // With CAN_ADDRESS_2GB or MEMORY64, pointers are already unsigned.\n      ptr >>>= 0;\n      return '0x' + ptr.toString(16).padStart(8, '0');\n    };\n\n  \n    /**\n     * @param {number} ptr\n     * @param {number} value\n     * @param {string} type\n     */\n  function setValue(ptr, value, type = 'i8') {\n    if (type.endsWith('*')) type = '*';\n    switch (type) {\n      case 'i1': HEAP8[ptr] = value; break;\n      case 'i8': HEAP8[ptr] = value; break;\n      case 'i16': HEAP16[((ptr)>>1)] = value; break;\n      case 'i32': HEAP32[((ptr)>>2)] = value; break;\n      case 'i64': abort('to do setValue(i64) use WASM_BIGINT');\n      case 'float': HEAPF32[((ptr)>>2)] = value; break;\n      case 'double': HEAPF64[((ptr)>>3)] = value; break;\n      case '*': HEAPU32[((ptr)>>2)] = value; break;\n      default: abort(`invalid type for setValue: ${type}`);\n    }\n  }\n\n  var stackRestore = (val) => __emscripten_stack_restore(val);\n\n  var stackSave = () => _emscripten_stack_get_current();\n\n  var warnOnce = (text) => {\n      warnOnce.shown ||= {};\n      if (!warnOnce.shown[text]) {\n        warnOnce.shown[text] = 1;\n        err(text);\n      }\n    };\n\n  var UTF8Decoder = typeof TextDecoder != 'undefined' ? new TextDecoder() : undefined;\n  \n    /**\n     * Given a pointer 'idx' to a null-terminated UTF8-encoded string in the given\n     * array that contains uint8 values, returns a copy of that string as a\n     * Javascript String object.\n     * heapOrArray is either a regular array, or a JavaScript typed array view.\n     * @param {number} idx\n     * @param {number=} maxBytesToRead\n     * @return {string}\n     */\n  var UTF8ArrayToString = (heapOrArray, idx, maxBytesToRead) => {\n      var endIdx = idx + maxBytesToRead;\n      var endPtr = idx;\n      // TextDecoder needs to know the byte length in advance, it doesn't stop on\n      // null terminator by itself.  Also, use the length info to avoid running tiny\n      // strings through TextDecoder, since .subarray() allocates garbage.\n      // (As a tiny code save trick, compare endPtr against endIdx using a negation,\n      // so that undefined means Infinity)\n      while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n  \n      if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n        return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n      }\n      var str = '';\n      // If building with TextDecoder, we have already computed the string length\n      // above, so test loop end condition against that\n      while (idx < endPtr) {\n        // For UTF8 byte structure, see:\n        // http://en.wikipedia.org/wiki/UTF-8#Description\n        // https://www.ietf.org/rfc/rfc2279.txt\n        // https://tools.ietf.org/html/rfc3629\n        var u0 = heapOrArray[idx++];\n        if (!(u0 & 0x80)) { str += String.fromCharCode(u0); continue; }\n        var u1 = heapOrArray[idx++] & 63;\n        if ((u0 & 0xE0) == 0xC0) { str += String.fromCharCode(((u0 & 31) << 6) | u1); continue; }\n        var u2 = heapOrArray[idx++] & 63;\n        if ((u0 & 0xF0) == 0xE0) {\n          u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n        } else {\n          if ((u0 & 0xF8) != 0xF0) warnOnce('Invalid UTF-8 leading byte ' + ptrToString(u0) + ' encountered when deserializing a UTF-8 string in wasm memory to a JS string!');\n          u0 = ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heapOrArray[idx++] & 63);\n        }\n  \n        if (u0 < 0x10000) {\n          str += String.fromCharCode(u0);\n        } else {\n          var ch = u0 - 0x10000;\n          str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n        }\n      }\n      return str;\n    };\n  \n    /**\n     * Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the\n     * emscripten HEAP, returns a copy of that string as a Javascript String object.\n     *\n     * @param {number} ptr\n     * @param {number=} maxBytesToRead - An optional length that specifies the\n     *   maximum number of bytes to read. You can omit this parameter to scan the\n     *   string until the first 0 byte. If maxBytesToRead is passed, and the string\n     *   at [ptr, ptr+maxBytesToReadr[ contains a null byte in the middle, then the\n     *   string will cut short at that byte index (i.e. maxBytesToRead will not\n     *   produce a string of exact length [ptr, ptr+maxBytesToRead[) N.B. mixing\n     *   frequent uses of UTF8ToString() with and without maxBytesToRead may throw\n     *   JS JIT optimizations off, so it is worth to consider consistently using one\n     * @return {string}\n     */\n  var UTF8ToString = (ptr, maxBytesToRead) => {\n      assert(typeof ptr == 'number', `UTF8ToString expects a number (got ${typeof ptr})`);\n      return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n    };\n  var ___assert_fail = (condition, filename, line, func) => {\n      abort(`Assertion failed: ${UTF8ToString(condition)}, at: ` + [filename ? UTF8ToString(filename) : 'unknown filename', line, func ? UTF8ToString(func) : 'unknown function']);\n    };\n\n  var exceptionCaught =  [];\n  \n  \n  var uncaughtExceptionCount = 0;\n  var ___cxa_begin_catch = (ptr) => {\n      var info = new ExceptionInfo(ptr);\n      if (!info.get_caught()) {\n        info.set_caught(true);\n        uncaughtExceptionCount--;\n      }\n      info.set_rethrown(false);\n      exceptionCaught.push(info);\n      ___cxa_increment_exception_refcount(info.excPtr);\n      return info.get_exception_ptr();\n    };\n\n  var exceptionLast = 0;\n  \n  class ExceptionInfo {\n      // excPtr - Thrown object pointer to wrap. Metadata pointer is calculated from it.\n      constructor(excPtr) {\n        this.excPtr = excPtr;\n        this.ptr = excPtr - 24;\n      }\n  \n      set_type(type) {\n        HEAPU32[(((this.ptr)+(4))>>2)] = type;\n      }\n  \n      get_type() {\n        return HEAPU32[(((this.ptr)+(4))>>2)];\n      }\n  \n      set_destructor(destructor) {\n        HEAPU32[(((this.ptr)+(8))>>2)] = destructor;\n      }\n  \n      get_destructor() {\n        return HEAPU32[(((this.ptr)+(8))>>2)];\n      }\n  \n      set_caught(caught) {\n        caught = caught ? 1 : 0;\n        HEAP8[(this.ptr)+(12)] = caught;\n      }\n  \n      get_caught() {\n        return HEAP8[(this.ptr)+(12)] != 0;\n      }\n  \n      set_rethrown(rethrown) {\n        rethrown = rethrown ? 1 : 0;\n        HEAP8[(this.ptr)+(13)] = rethrown;\n      }\n  \n      get_rethrown() {\n        return HEAP8[(this.ptr)+(13)] != 0;\n      }\n  \n      // Initialize native structure fields. Should be called once after allocated.\n      init(type, destructor) {\n        this.set_adjusted_ptr(0);\n        this.set_type(type);\n        this.set_destructor(destructor);\n      }\n  \n      set_adjusted_ptr(adjustedPtr) {\n        HEAPU32[(((this.ptr)+(16))>>2)] = adjustedPtr;\n      }\n  \n      get_adjusted_ptr() {\n        return HEAPU32[(((this.ptr)+(16))>>2)];\n      }\n  \n      // Get pointer which is expected to be received by catch clause in C++ code. It may be adjusted\n      // when the pointer is casted to some of the exception object base classes (e.g. when virtual\n      // inheritance is used). When a pointer is thrown this method should return the thrown pointer\n      // itself.\n      get_exception_ptr() {\n        // Work around a fastcomp bug, this code is still included for some reason in a build without\n        // exceptions support.\n        var isPointer = ___cxa_is_pointer_type(this.get_type());\n        if (isPointer) {\n          return HEAPU32[((this.excPtr)>>2)];\n        }\n        var adjusted = this.get_adjusted_ptr();\n        if (adjusted !== 0) return adjusted;\n        return this.excPtr;\n      }\n    }\n  \n  var ___resumeException = (ptr) => {\n      if (!exceptionLast) {\n        exceptionLast = new CppException(ptr);\n      }\n      throw exceptionLast;\n    };\n  \n  \n  var setTempRet0 = (val) => __emscripten_tempret_set(val);\n  var findMatchingCatch = (args) => {\n      var thrown =\n        exceptionLast?.excPtr;\n      if (!thrown) {\n        // just pass through the null ptr\n        setTempRet0(0);\n        return 0;\n      }\n      var info = new ExceptionInfo(thrown);\n      info.set_adjusted_ptr(thrown);\n      var thrownType = info.get_type();\n      if (!thrownType) {\n        // just pass through the thrown ptr\n        setTempRet0(0);\n        return thrown;\n      }\n  \n      // can_catch receives a **, add indirection\n      // The different catch blocks are denoted by different types.\n      // Due to inheritance, those types may not precisely match the\n      // type of the thrown object. Find one which matches, and\n      // return the type of the catch block which should be called.\n      for (var caughtType of args) {\n        if (caughtType === 0 || caughtType === thrownType) {\n          // Catch all clause matched or exactly the same type is caught\n          break;\n        }\n        var adjusted_ptr_addr = info.ptr + 16;\n        if (___cxa_can_catch(caughtType, thrownType, adjusted_ptr_addr)) {\n          setTempRet0(caughtType);\n          return thrown;\n        }\n      }\n      setTempRet0(thrownType);\n      return thrown;\n    };\n  var ___cxa_find_matching_catch_2 = () => findMatchingCatch([]);\n\n  var ___cxa_find_matching_catch_3 = (arg0) => findMatchingCatch([arg0]);\n\n  \n  \n  var ___cxa_throw = (ptr, type, destructor) => {\n      var info = new ExceptionInfo(ptr);\n      // Initialize ExceptionInfo content after it was allocated in __cxa_allocate_exception.\n      info.init(type, destructor);\n      exceptionLast = new CppException(ptr);\n      uncaughtExceptionCount++;\n      throw exceptionLast;\n    };\n\n\n  var __abort_js = () => {\n      abort('native code called abort()');\n    };\n\n  var __embind_register_bigint = (primitiveType, name, size, minRange, maxRange) => {};\n\n  var embind_init_charCodes = () => {\n      var codes = new Array(256);\n      for (var i = 0; i < 256; ++i) {\n          codes[i] = String.fromCharCode(i);\n      }\n      embind_charCodes = codes;\n    };\n  var embind_charCodes;\n  var readLatin1String = (ptr) => {\n      var ret = \"\";\n      var c = ptr;\n      while (HEAPU8[c]) {\n          ret += embind_charCodes[HEAPU8[c++]];\n      }\n      return ret;\n    };\n  \n  var awaitingDependencies = {\n  };\n  \n  var registeredTypes = {\n  };\n  \n  var typeDependencies = {\n  };\n  \n  var BindingError;\n  var throwBindingError = (message) => { throw new BindingError(message); };\n  \n  \n  \n  \n  var InternalError;\n  var throwInternalError = (message) => { throw new InternalError(message); };\n  var whenDependentTypesAreResolved = (myTypes, dependentTypes, getTypeConverters) => {\n      myTypes.forEach(function(type) {\n          typeDependencies[type] = dependentTypes;\n      });\n  \n      function onComplete(typeConverters) {\n          var myTypeConverters = getTypeConverters(typeConverters);\n          if (myTypeConverters.length !== myTypes.length) {\n              throwInternalError('Mismatched type converter count');\n          }\n          for (var i = 0; i < myTypes.length; ++i) {\n              registerType(myTypes[i], myTypeConverters[i]);\n          }\n      }\n  \n      var typeConverters = new Array(dependentTypes.length);\n      var unregisteredTypes = [];\n      var registered = 0;\n      dependentTypes.forEach((dt, i) => {\n        if (registeredTypes.hasOwnProperty(dt)) {\n          typeConverters[i] = registeredTypes[dt];\n        } else {\n          unregisteredTypes.push(dt);\n          if (!awaitingDependencies.hasOwnProperty(dt)) {\n            awaitingDependencies[dt] = [];\n          }\n          awaitingDependencies[dt].push(() => {\n            typeConverters[i] = registeredTypes[dt];\n            ++registered;\n            if (registered === unregisteredTypes.length) {\n              onComplete(typeConverters);\n            }\n          });\n        }\n      });\n      if (0 === unregisteredTypes.length) {\n        onComplete(typeConverters);\n      }\n    };\n  /** @param {Object=} options */\n  function sharedRegisterType(rawType, registeredInstance, options = {}) {\n      var name = registeredInstance.name;\n      if (!rawType) {\n        throwBindingError(`type \"${name}\" must have a positive integer typeid pointer`);\n      }\n      if (registeredTypes.hasOwnProperty(rawType)) {\n        if (options.ignoreDuplicateRegistrations) {\n          return;\n        } else {\n          throwBindingError(`Cannot register type '${name}' twice`);\n        }\n      }\n  \n      registeredTypes[rawType] = registeredInstance;\n      delete typeDependencies[rawType];\n  \n      if (awaitingDependencies.hasOwnProperty(rawType)) {\n        var callbacks = awaitingDependencies[rawType];\n        delete awaitingDependencies[rawType];\n        callbacks.forEach((cb) => cb());\n      }\n    }\n  /** @param {Object=} options */\n  function registerType(rawType, registeredInstance, options = {}) {\n      if (!('argPackAdvance' in registeredInstance)) {\n        throw new TypeError('registerType registeredInstance requires argPackAdvance');\n      }\n      return sharedRegisterType(rawType, registeredInstance, options);\n    }\n  \n  var GenericWireTypeSize = 8;\n  /** @suppress {globalThis} */\n  var __embind_register_bool = (rawType, name, trueValue, falseValue) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n          name,\n          'fromWireType': function(wt) {\n              // ambiguous emscripten ABI: sometimes return values are\n              // true or false, and sometimes integers (0 or 1)\n              return !!wt;\n          },\n          'toWireType': function(destructors, o) {\n              return o ? trueValue : falseValue;\n          },\n          'argPackAdvance': GenericWireTypeSize,\n          'readValueFromPointer': function(pointer) {\n              return this['fromWireType'](HEAPU8[pointer]);\n          },\n          destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  \n  var emval_freelist = [];\n  \n  var emval_handles = [];\n  var __emval_decref = (handle) => {\n      if (handle > 9 && 0 === --emval_handles[handle + 1]) {\n        assert(emval_handles[handle] !== undefined, `Decref for unallocated handle.`);\n        emval_handles[handle] = undefined;\n        emval_freelist.push(handle);\n      }\n    };\n  \n  \n  \n  \n  \n  var count_emval_handles = () => {\n      return emval_handles.length / 2 - 5 - emval_freelist.length;\n    };\n  \n  var init_emval = () => {\n      // reserve 0 and some special values. These never get de-allocated.\n      emval_handles.push(\n        0, 1,\n        undefined, 1,\n        null, 1,\n        true, 1,\n        false, 1,\n      );\n      assert(emval_handles.length === 5 * 2);\n      Module['count_emval_handles'] = count_emval_handles;\n    };\n  var Emval = {\n  toValue:(handle) => {\n        if (!handle) {\n            throwBindingError('Cannot use deleted val. handle = ' + handle);\n        }\n        // handle 2 is supposed to be `undefined`.\n        assert(handle === 2 || emval_handles[handle] !== undefined && handle % 2 === 0, `invalid handle: ${handle}`);\n        return emval_handles[handle];\n      },\n  toHandle:(value) => {\n        switch (value) {\n          case undefined: return 2;\n          case null: return 4;\n          case true: return 6;\n          case false: return 8;\n          default:{\n            const handle = emval_freelist.pop() || emval_handles.length;\n            emval_handles[handle] = value;\n            emval_handles[handle + 1] = 1;\n            return handle;\n          }\n        }\n      },\n  };\n  \n  /** @suppress {globalThis} */\n  function readPointer(pointer) {\n      return this['fromWireType'](HEAPU32[((pointer)>>2)]);\n    }\n  \n  var EmValType = {\n      name: 'emscripten::val',\n      'fromWireType': (handle) => {\n        var rv = Emval.toValue(handle);\n        __emval_decref(handle);\n        return rv;\n      },\n      'toWireType': (destructors, value) => Emval.toHandle(value),\n      'argPackAdvance': GenericWireTypeSize,\n      'readValueFromPointer': readPointer,\n      destructorFunction: null, // This type does not need a destructor\n  \n      // TODO: do we need a deleteObject here?  write a test where\n      // emval is passed into JS via an interface\n    };\n  var __embind_register_emval = (rawType) => registerType(rawType, EmValType);\n\n  var embindRepr = (v) => {\n      if (v === null) {\n          return 'null';\n      }\n      var t = typeof v;\n      if (t === 'object' || t === 'array' || t === 'function') {\n          return v.toString();\n      } else {\n          return '' + v;\n      }\n    };\n  \n  var floatReadValueFromPointer = (name, width) => {\n      switch (width) {\n          case 4: return function(pointer) {\n              return this['fromWireType'](HEAPF32[((pointer)>>2)]);\n          };\n          case 8: return function(pointer) {\n              return this['fromWireType'](HEAPF64[((pointer)>>3)]);\n          };\n          default:\n              throw new TypeError(`invalid float width (${width}): ${name}`);\n      }\n    };\n  \n  \n  var __embind_register_float = (rawType, name, size) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': (value) => value,\n        'toWireType': (destructors, value) => {\n          if (typeof value != \"number\" && typeof value != \"boolean\") {\n            throw new TypeError(`Cannot convert ${embindRepr(value)} to ${this.name}`);\n          }\n          // The VM will perform JS to Wasm value conversion, according to the spec:\n          // https://www.w3.org/TR/wasm-js-api-1/#towebassemblyvalue\n          return value;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': floatReadValueFromPointer(name, size),\n        destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  var createNamedFunction = (name, body) => Object.defineProperty(body, 'name', {\n      value: name\n    });\n  \n  var runDestructors = (destructors) => {\n      while (destructors.length) {\n        var ptr = destructors.pop();\n        var del = destructors.pop();\n        del(ptr);\n      }\n    };\n  \n  \n  function usesDestructorStack(argTypes) {\n      // Skip return value at index 0 - it's not deleted here.\n      for (var i = 1; i < argTypes.length; ++i) {\n        // The type does not define a destructor function - must use dynamic stack\n        if (argTypes[i] !== null && argTypes[i].destructorFunction === undefined) {\n          return true;\n        }\n      }\n      return false;\n    }\n  \n  function newFunc(constructor, argumentList) {\n      if (!(constructor instanceof Function)) {\n        throw new TypeError(`new_ called with constructor type ${typeof(constructor)} which is not a function`);\n      }\n      /*\n       * Previously, the following line was just:\n       *   function dummy() {};\n       * Unfortunately, Chrome was preserving 'dummy' as the object's name, even\n       * though at creation, the 'dummy' has the correct constructor name.  Thus,\n       * objects created with IMVU.new would show up in the debugger as 'dummy',\n       * which isn't very helpful.  Using IMVU.createNamedFunction addresses the\n       * issue.  Doubly-unfortunately, there's no way to write a test for this\n       * behavior.  -NRD 2013.02.22\n       */\n      var dummy = createNamedFunction(constructor.name || 'unknownFunctionName', function(){});\n      dummy.prototype = constructor.prototype;\n      var obj = new dummy;\n  \n      var r = constructor.apply(obj, argumentList);\n      return (r instanceof Object) ? r : obj;\n    }\n  \n  function createJsInvoker(argTypes, isClassMethodFunc, returns, isAsync) {\n      var needsDestructorStack = usesDestructorStack(argTypes);\n      var argCount = argTypes.length;\n      var argsList = \"\";\n      var argsListWired = \"\";\n      for (var i = 0; i < argCount - 2; ++i) {\n        argsList += (i!==0?\", \":\"\")+\"arg\"+i;\n        argsListWired += (i!==0?\", \":\"\")+\"arg\"+i+\"Wired\";\n      }\n  \n      var invokerFnBody = `\n        return function (${argsList}) {\n        if (arguments.length !== ${argCount - 2}) {\n          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${argCount - 2}');\n        }`;\n  \n      if (needsDestructorStack) {\n        invokerFnBody += \"var destructors = [];\\n\";\n      }\n  \n      var dtorStack = needsDestructorStack ? \"destructors\" : \"null\";\n      var args1 = [\"humanName\", \"throwBindingError\", \"invoker\", \"fn\", \"runDestructors\", \"retType\", \"classParam\"];\n  \n      if (isClassMethodFunc) {\n        invokerFnBody += \"var thisWired = classParam['toWireType'](\"+dtorStack+\", this);\\n\";\n      }\n  \n      for (var i = 0; i < argCount - 2; ++i) {\n        invokerFnBody += \"var arg\"+i+\"Wired = argType\"+i+\"['toWireType'](\"+dtorStack+\", arg\"+i+\");\\n\";\n        args1.push(\"argType\"+i);\n      }\n  \n      if (isClassMethodFunc) {\n        argsListWired = \"thisWired\" + (argsListWired.length > 0 ? \", \" : \"\") + argsListWired;\n      }\n  \n      invokerFnBody +=\n          (returns || isAsync ? \"var rv = \":\"\") + \"invoker(fn\"+(argsListWired.length>0?\", \":\"\")+argsListWired+\");\\n\";\n  \n      var returnVal = returns ? \"rv\" : \"\";\n  \n      if (needsDestructorStack) {\n        invokerFnBody += \"runDestructors(destructors);\\n\";\n      } else {\n        for (var i = isClassMethodFunc?1:2; i < argTypes.length; ++i) { // Skip return value at index 0 - it's not deleted here. Also skip class type if not a method.\n          var paramName = (i === 1 ? \"thisWired\" : (\"arg\"+(i - 2)+\"Wired\"));\n          if (argTypes[i].destructorFunction !== null) {\n            invokerFnBody += `${paramName}_dtor(${paramName});\\n`;\n            args1.push(`${paramName}_dtor`);\n          }\n        }\n      }\n  \n      if (returns) {\n        invokerFnBody += \"var ret = retType['fromWireType'](rv);\\n\" +\n                         \"return ret;\\n\";\n      } else {\n      }\n  \n      invokerFnBody += \"}\\n\";\n  \n      invokerFnBody = `if (arguments.length !== ${args1.length}){ throw new Error(humanName + \"Expected ${args1.length} closure arguments \" + arguments.length + \" given.\"); }\\n${invokerFnBody}`;\n      return [args1, invokerFnBody];\n    }\n  function craftInvokerFunction(humanName, argTypes, classType, cppInvokerFunc, cppTargetFunc, /** boolean= */ isAsync) {\n      // humanName: a human-readable string name for the function to be generated.\n      // argTypes: An array that contains the embind type objects for all types in the function signature.\n      //    argTypes[0] is the type object for the function return value.\n      //    argTypes[1] is the type object for function this object/class type, or null if not crafting an invoker for a class method.\n      //    argTypes[2...] are the actual function parameters.\n      // classType: The embind type object for the class to be bound, or null if this is not a method of a class.\n      // cppInvokerFunc: JS Function object to the C++-side function that interops into C++ code.\n      // cppTargetFunc: Function pointer (an integer to FUNCTION_TABLE) to the target C++ function the cppInvokerFunc will end up calling.\n      // isAsync: Optional. If true, returns an async function. Async bindings are only supported with JSPI.\n      var argCount = argTypes.length;\n  \n      if (argCount < 2) {\n        throwBindingError(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n      }\n  \n      assert(!isAsync, 'Async bindings are only supported with JSPI.');\n  \n      var isClassMethodFunc = (argTypes[1] !== null && classType !== null);\n  \n      // Free functions with signature \"void function()\" do not need an invoker that marshalls between wire types.\n  // TODO: This omits argument count check - enable only at -O3 or similar.\n  //    if (ENABLE_UNSAFE_OPTS && argCount == 2 && argTypes[0].name == \"void\" && !isClassMethodFunc) {\n  //       return FUNCTION_TABLE[fn];\n  //    }\n  \n      // Determine if we need to use a dynamic stack to store the destructors for the function parameters.\n      // TODO: Remove this completely once all function invokers are being dynamically generated.\n      var needsDestructorStack = usesDestructorStack(argTypes);\n  \n      var returns = (argTypes[0].name !== \"void\");\n  \n    // Builld the arguments that will be passed into the closure around the invoker\n    // function.\n    var closureArgs = [humanName, throwBindingError, cppInvokerFunc, cppTargetFunc, runDestructors, argTypes[0], argTypes[1]];\n    for (var i = 0; i < argCount - 2; ++i) {\n      closureArgs.push(argTypes[i+2]);\n    }\n    if (!needsDestructorStack) {\n      for (var i = isClassMethodFunc?1:2; i < argTypes.length; ++i) { // Skip return value at index 0 - it's not deleted here. Also skip class type if not a method.\n        if (argTypes[i].destructorFunction !== null) {\n          closureArgs.push(argTypes[i].destructorFunction);\n        }\n      }\n    }\n  \n    let [args, invokerFnBody] = createJsInvoker(argTypes, isClassMethodFunc, returns, isAsync);\n    args.push(invokerFnBody);\n    var invokerFn = newFunc(Function, args)(...closureArgs);\n      return createNamedFunction(humanName, invokerFn);\n    }\n  \n  var ensureOverloadTable = (proto, methodName, humanName) => {\n      if (undefined === proto[methodName].overloadTable) {\n        var prevFunc = proto[methodName];\n        // Inject an overload resolver function that routes to the appropriate overload based on the number of arguments.\n        proto[methodName] = function(...args) {\n          // TODO This check can be removed in -O3 level \"unsafe\" optimizations.\n          if (!proto[methodName].overloadTable.hasOwnProperty(args.length)) {\n            throwBindingError(`Function '${humanName}' called with an invalid number of arguments (${args.length}) - expects one of (${proto[methodName].overloadTable})!`);\n          }\n          return proto[methodName].overloadTable[args.length].apply(this, args);\n        };\n        // Move the previous function into the overload table.\n        proto[methodName].overloadTable = [];\n        proto[methodName].overloadTable[prevFunc.argCount] = prevFunc;\n      }\n    };\n  \n  /** @param {number=} numArguments */\n  var exposePublicSymbol = (name, value, numArguments) => {\n      if (Module.hasOwnProperty(name)) {\n        if (undefined === numArguments || (undefined !== Module[name].overloadTable && undefined !== Module[name].overloadTable[numArguments])) {\n          throwBindingError(`Cannot register public name '${name}' twice`);\n        }\n  \n        // We are exposing a function with the same name as an existing function. Create an overload table and a function selector\n        // that routes between the two.\n        ensureOverloadTable(Module, name, name);\n        if (Module.hasOwnProperty(numArguments)) {\n          throwBindingError(`Cannot register multiple overloads of a function with the same number of arguments (${numArguments})!`);\n        }\n        // Add the new function into the overload table.\n        Module[name].overloadTable[numArguments] = value;\n      }\n      else {\n        Module[name] = value;\n        if (undefined !== numArguments) {\n          Module[name].numArguments = numArguments;\n        }\n      }\n    };\n  \n  var heap32VectorToArray = (count, firstElement) => {\n      var array = [];\n      for (var i = 0; i < count; i++) {\n        // TODO(https://github.com/emscripten-core/emscripten/issues/17310):\n        // Find a way to hoist the `>> 2` or `>> 3` out of this loop.\n        array.push(HEAPU32[(((firstElement)+(i * 4))>>2)]);\n      }\n      return array;\n    };\n  \n  \n  /** @param {number=} numArguments */\n  var replacePublicSymbol = (name, value, numArguments) => {\n      if (!Module.hasOwnProperty(name)) {\n        throwInternalError('Replacing nonexistent public symbol');\n      }\n      // If there's an overload table for this symbol, replace the symbol in the overload table instead.\n      if (undefined !== Module[name].overloadTable && undefined !== numArguments) {\n        Module[name].overloadTable[numArguments] = value;\n      }\n      else {\n        Module[name] = value;\n        Module[name].argCount = numArguments;\n      }\n    };\n  \n  \n  \n  var dynCallLegacy = (sig, ptr, args) => {\n      sig = sig.replace(/p/g, 'i')\n      assert(('dynCall_' + sig) in Module, `bad function pointer type - dynCall function not found for sig '${sig}'`);\n      if (args?.length) {\n        // j (64-bit integer) must be passed in as two numbers [low 32, high 32].\n        assert(args.length === sig.substring(1).replace(/j/g, '--').length);\n      } else {\n        assert(sig.length == 1);\n      }\n      var f = Module['dynCall_' + sig];\n      return f(ptr, ...args);\n    };\n  \n  var wasmTableMirror = [];\n  \n  /** @type {WebAssembly.Table} */\n  var wasmTable;\n  var getWasmTableEntry = (funcPtr) => {\n      var func = wasmTableMirror[funcPtr];\n      if (!func) {\n        if (funcPtr >= wasmTableMirror.length) wasmTableMirror.length = funcPtr + 1;\n        wasmTableMirror[funcPtr] = func = wasmTable.get(funcPtr);\n      }\n      assert(wasmTable.get(funcPtr) == func, 'JavaScript-side Wasm function table mirror is out of date!');\n      return func;\n    };\n  \n  var dynCall = (sig, ptr, args = []) => {\n      // Without WASM_BIGINT support we cannot directly call function with i64 as\n      // part of their signature, so we rely on the dynCall functions generated by\n      // wasm-emscripten-finalize\n      if (sig.includes('j')) {\n        return dynCallLegacy(sig, ptr, args);\n      }\n      assert(getWasmTableEntry(ptr), `missing table entry in dynCall: ${ptr}`);\n      var rtn = getWasmTableEntry(ptr)(...args);\n      return rtn;\n    };\n  var getDynCaller = (sig, ptr) => {\n      assert(sig.includes('j') || sig.includes('p'), 'getDynCaller should only be called with i64 sigs')\n      return (...args) => dynCall(sig, ptr, args);\n    };\n  \n  \n  var embind__requireFunction = (signature, rawFunction) => {\n      signature = readLatin1String(signature);\n  \n      function makeDynCaller() {\n        if (signature.includes('j')) {\n          return getDynCaller(signature, rawFunction);\n        }\n        return getWasmTableEntry(rawFunction);\n      }\n  \n      var fp = makeDynCaller();\n      if (typeof fp != \"function\") {\n          throwBindingError(`unknown function pointer with signature ${signature}: ${rawFunction}`);\n      }\n      return fp;\n    };\n  \n  \n  \n  var extendError = (baseErrorType, errorName) => {\n      var errorClass = createNamedFunction(errorName, function(message) {\n        this.name = errorName;\n        this.message = message;\n  \n        var stack = (new Error(message)).stack;\n        if (stack !== undefined) {\n          this.stack = this.toString() + '\\n' +\n              stack.replace(/^Error(:[^\\n]*)?\\n/, '');\n        }\n      });\n      errorClass.prototype = Object.create(baseErrorType.prototype);\n      errorClass.prototype.constructor = errorClass;\n      errorClass.prototype.toString = function() {\n        if (this.message === undefined) {\n          return this.name;\n        } else {\n          return `${this.name}: ${this.message}`;\n        }\n      };\n  \n      return errorClass;\n    };\n  var UnboundTypeError;\n  \n  \n  \n  var getTypeName = (type) => {\n      var ptr = ___getTypeName(type);\n      var rv = readLatin1String(ptr);\n      _free(ptr);\n      return rv;\n    };\n  var throwUnboundTypeError = (message, types) => {\n      var unboundTypes = [];\n      var seen = {};\n      function visit(type) {\n        if (seen[type]) {\n          return;\n        }\n        if (registeredTypes[type]) {\n          return;\n        }\n        if (typeDependencies[type]) {\n          typeDependencies[type].forEach(visit);\n          return;\n        }\n        unboundTypes.push(type);\n        seen[type] = true;\n      }\n      types.forEach(visit);\n  \n      throw new UnboundTypeError(`${message}: ` + unboundTypes.map(getTypeName).join([', ']));\n    };\n  \n  \n  var getFunctionName = (signature) => {\n      signature = signature.trim();\n      const argsIndex = signature.indexOf(\"(\");\n      if (argsIndex !== -1) {\n        assert(signature[signature.length - 1] == \")\", \"Parentheses for argument names should match.\");\n        return signature.substr(0, argsIndex);\n      } else {\n        return signature;\n      }\n    };\n  var __embind_register_function = (name, argCount, rawArgTypesAddr, signature, rawInvoker, fn, isAsync) => {\n      var argTypes = heap32VectorToArray(argCount, rawArgTypesAddr);\n      name = readLatin1String(name);\n      name = getFunctionName(name);\n  \n      rawInvoker = embind__requireFunction(signature, rawInvoker);\n  \n      exposePublicSymbol(name, function() {\n        throwUnboundTypeError(`Cannot call ${name} due to unbound types`, argTypes);\n      }, argCount - 1);\n  \n      whenDependentTypesAreResolved([], argTypes, (argTypes) => {\n        var invokerArgsArray = [argTypes[0] /* return value */, null /* no class 'this'*/].concat(argTypes.slice(1) /* actual params */);\n        replacePublicSymbol(name, craftInvokerFunction(name, invokerArgsArray, null /* no class 'this'*/, rawInvoker, fn, isAsync), argCount - 1);\n        return [];\n      });\n    };\n\n  \n  var integerReadValueFromPointer = (name, width, signed) => {\n      // integers are quite common, so generate very specialized functions\n      switch (width) {\n          case 1: return signed ?\n              (pointer) => HEAP8[pointer] :\n              (pointer) => HEAPU8[pointer];\n          case 2: return signed ?\n              (pointer) => HEAP16[((pointer)>>1)] :\n              (pointer) => HEAPU16[((pointer)>>1)]\n          case 4: return signed ?\n              (pointer) => HEAP32[((pointer)>>2)] :\n              (pointer) => HEAPU32[((pointer)>>2)]\n          default:\n              throw new TypeError(`invalid integer width (${width}): ${name}`);\n      }\n    };\n  \n  \n  /** @suppress {globalThis} */\n  var __embind_register_integer = (primitiveType, name, size, minRange, maxRange) => {\n      name = readLatin1String(name);\n      // LLVM doesn't have signed and unsigned 32-bit types, so u32 literals come\n      // out as 'i32 -1'. Always treat those as max u32.\n      if (maxRange === -1) {\n        maxRange = 4294967295;\n      }\n  \n      var fromWireType = (value) => value;\n  \n      if (minRange === 0) {\n        var bitshift = 32 - 8*size;\n        fromWireType = (value) => (value << bitshift) >>> bitshift;\n      }\n  \n      var isUnsignedType = (name.includes('unsigned'));\n      var checkAssertions = (value, toTypeName) => {\n        if (typeof value != \"number\" && typeof value != \"boolean\") {\n          throw new TypeError(`Cannot convert \"${embindRepr(value)}\" to ${toTypeName}`);\n        }\n        if (value < minRange || value > maxRange) {\n          throw new TypeError(`Passing a number \"${embindRepr(value)}\" from JS side to C/C++ side to an argument of type \"${name}\", which is outside the valid range [${minRange}, ${maxRange}]!`);\n        }\n      }\n      var toWireType;\n      if (isUnsignedType) {\n        toWireType = function(destructors, value) {\n          checkAssertions(value, this.name);\n          return value >>> 0;\n        }\n      } else {\n        toWireType = function(destructors, value) {\n          checkAssertions(value, this.name);\n          // The VM will perform JS to Wasm value conversion, according to the spec:\n          // https://www.w3.org/TR/wasm-js-api-1/#towebassemblyvalue\n          return value;\n        }\n      }\n      registerType(primitiveType, {\n        name,\n        'fromWireType': fromWireType,\n        'toWireType': toWireType,\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': integerReadValueFromPointer(name, size, minRange !== 0),\n        destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  \n  var __embind_register_memory_view = (rawType, dataTypeIndex, name) => {\n      var typeMapping = [\n        Int8Array,\n        Uint8Array,\n        Int16Array,\n        Uint16Array,\n        Int32Array,\n        Uint32Array,\n        Float32Array,\n        Float64Array,\n      ];\n  \n      var TA = typeMapping[dataTypeIndex];\n  \n      function decodeMemoryView(handle) {\n        var size = HEAPU32[((handle)>>2)];\n        var data = HEAPU32[(((handle)+(4))>>2)];\n        return new TA(HEAP8.buffer, data, size);\n      }\n  \n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': decodeMemoryView,\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': decodeMemoryView,\n      }, {\n        ignoreDuplicateRegistrations: true,\n      });\n    };\n\n  \n  \n  \n  \n  var stringToUTF8Array = (str, heap, outIdx, maxBytesToWrite) => {\n      assert(typeof str === 'string', `stringToUTF8Array expects a string (got ${typeof str})`);\n      // Parameter maxBytesToWrite is not optional. Negative values, 0, null,\n      // undefined and false each don't write out any bytes.\n      if (!(maxBytesToWrite > 0))\n        return 0;\n  \n      var startIdx = outIdx;\n      var endIdx = outIdx + maxBytesToWrite - 1; // -1 for string null terminator.\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code\n        // unit, not a Unicode code point of the character! So decode\n        // UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description\n        // and https://www.ietf.org/rfc/rfc2279.txt\n        // and https://tools.ietf.org/html/rfc3629\n        var u = str.charCodeAt(i); // possibly a lead surrogate\n        if (u >= 0xD800 && u <= 0xDFFF) {\n          var u1 = str.charCodeAt(++i);\n          u = 0x10000 + ((u & 0x3FF) << 10) | (u1 & 0x3FF);\n        }\n        if (u <= 0x7F) {\n          if (outIdx >= endIdx) break;\n          heap[outIdx++] = u;\n        } else if (u <= 0x7FF) {\n          if (outIdx + 1 >= endIdx) break;\n          heap[outIdx++] = 0xC0 | (u >> 6);\n          heap[outIdx++] = 0x80 | (u & 63);\n        } else if (u <= 0xFFFF) {\n          if (outIdx + 2 >= endIdx) break;\n          heap[outIdx++] = 0xE0 | (u >> 12);\n          heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n          heap[outIdx++] = 0x80 | (u & 63);\n        } else {\n          if (outIdx + 3 >= endIdx) break;\n          if (u > 0x10FFFF) warnOnce('Invalid Unicode code point ' + ptrToString(u) + ' encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).');\n          heap[outIdx++] = 0xF0 | (u >> 18);\n          heap[outIdx++] = 0x80 | ((u >> 12) & 63);\n          heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n          heap[outIdx++] = 0x80 | (u & 63);\n        }\n      }\n      // Null-terminate the pointer to the buffer.\n      heap[outIdx] = 0;\n      return outIdx - startIdx;\n    };\n  var stringToUTF8 = (str, outPtr, maxBytesToWrite) => {\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      return stringToUTF8Array(str, HEAPU8, outPtr, maxBytesToWrite);\n    };\n  \n  var lengthBytesUTF8 = (str) => {\n      var len = 0;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code\n        // unit, not a Unicode code point of the character! So decode\n        // UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var c = str.charCodeAt(i); // possibly a lead surrogate\n        if (c <= 0x7F) {\n          len++;\n        } else if (c <= 0x7FF) {\n          len += 2;\n        } else if (c >= 0xD800 && c <= 0xDFFF) {\n          len += 4; ++i;\n        } else {\n          len += 3;\n        }\n      }\n      return len;\n    };\n  \n  \n  \n  var __embind_register_std_string = (rawType, name) => {\n      name = readLatin1String(name);\n      var stdStringIsUTF8\n      //process only std::string bindings with UTF8 support, in contrast to e.g. std::basic_string<unsigned char>\n      = (name === \"std::string\");\n  \n      registerType(rawType, {\n        name,\n        // For some method names we use string keys here since they are part of\n        // the public/external API and/or used by the runtime-generated code.\n        'fromWireType'(value) {\n          var length = HEAPU32[((value)>>2)];\n          var payload = value + 4;\n  \n          var str;\n          if (stdStringIsUTF8) {\n            var decodeStartPtr = payload;\n            // Looping here to support possible embedded '0' bytes\n            for (var i = 0; i <= length; ++i) {\n              var currentBytePtr = payload + i;\n              if (i == length || HEAPU8[currentBytePtr] == 0) {\n                var maxRead = currentBytePtr - decodeStartPtr;\n                var stringSegment = UTF8ToString(decodeStartPtr, maxRead);\n                if (str === undefined) {\n                  str = stringSegment;\n                } else {\n                  str += String.fromCharCode(0);\n                  str += stringSegment;\n                }\n                decodeStartPtr = currentBytePtr + 1;\n              }\n            }\n          } else {\n            var a = new Array(length);\n            for (var i = 0; i < length; ++i) {\n              a[i] = String.fromCharCode(HEAPU8[payload + i]);\n            }\n            str = a.join('');\n          }\n  \n          _free(value);\n  \n          return str;\n        },\n        'toWireType'(destructors, value) {\n          if (value instanceof ArrayBuffer) {\n            value = new Uint8Array(value);\n          }\n  \n          var length;\n          var valueIsOfTypeString = (typeof value == 'string');\n  \n          if (!(valueIsOfTypeString || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Int8Array)) {\n            throwBindingError('Cannot pass non-string to std::string');\n          }\n          if (stdStringIsUTF8 && valueIsOfTypeString) {\n            length = lengthBytesUTF8(value);\n          } else {\n            length = value.length;\n          }\n  \n          // assumes POINTER_SIZE alignment\n          var base = _malloc(4 + length + 1);\n          var ptr = base + 4;\n          HEAPU32[((base)>>2)] = length;\n          if (stdStringIsUTF8 && valueIsOfTypeString) {\n            stringToUTF8(value, ptr, length + 1);\n          } else {\n            if (valueIsOfTypeString) {\n              for (var i = 0; i < length; ++i) {\n                var charCode = value.charCodeAt(i);\n                if (charCode > 255) {\n                  _free(ptr);\n                  throwBindingError('String has UTF-16 code units that do not fit in 8 bits');\n                }\n                HEAPU8[ptr + i] = charCode;\n              }\n            } else {\n              for (var i = 0; i < length; ++i) {\n                HEAPU8[ptr + i] = value[i];\n              }\n            }\n          }\n  \n          if (destructors !== null) {\n            destructors.push(_free, base);\n          }\n          return base;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': readPointer,\n        destructorFunction(ptr) {\n          _free(ptr);\n        },\n      });\n    };\n\n  \n  \n  \n  var UTF16Decoder = typeof TextDecoder != 'undefined' ? new TextDecoder('utf-16le') : undefined;;\n  var UTF16ToString = (ptr, maxBytesToRead) => {\n      assert(ptr % 2 == 0, 'Pointer passed to UTF16ToString must be aligned to two bytes!');\n      var endPtr = ptr;\n      // TextDecoder needs to know the byte length in advance, it doesn't stop on\n      // null terminator by itself.\n      // Also, use the length info to avoid running tiny strings through\n      // TextDecoder, since .subarray() allocates garbage.\n      var idx = endPtr >> 1;\n      var maxIdx = idx + maxBytesToRead / 2;\n      // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n      // will always evaluate to true. This saves on code size.\n      while (!(idx >= maxIdx) && HEAPU16[idx]) ++idx;\n      endPtr = idx << 1;\n  \n      if (endPtr - ptr > 32 && UTF16Decoder)\n        return UTF16Decoder.decode(HEAPU8.subarray(ptr, endPtr));\n  \n      // Fallback: decode without UTF16Decoder\n      var str = '';\n  \n      // If maxBytesToRead is not passed explicitly, it will be undefined, and the\n      // for-loop's condition will always evaluate to true. The loop is then\n      // terminated on the first null char.\n      for (var i = 0; !(i >= maxBytesToRead / 2); ++i) {\n        var codeUnit = HEAP16[(((ptr)+(i*2))>>1)];\n        if (codeUnit == 0) break;\n        // fromCharCode constructs a character from a UTF-16 code unit, so we can\n        // pass the UTF16 string right through.\n        str += String.fromCharCode(codeUnit);\n      }\n  \n      return str;\n    };\n  \n  var stringToUTF16 = (str, outPtr, maxBytesToWrite) => {\n      assert(outPtr % 2 == 0, 'Pointer passed to stringToUTF16 must be aligned to two bytes!');\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n      maxBytesToWrite ??= 0x7FFFFFFF;\n      if (maxBytesToWrite < 2) return 0;\n      maxBytesToWrite -= 2; // Null terminator.\n      var startPtr = outPtr;\n      var numCharsToWrite = (maxBytesToWrite < str.length*2) ? (maxBytesToWrite / 2) : str.length;\n      for (var i = 0; i < numCharsToWrite; ++i) {\n        // charCodeAt returns a UTF-16 encoded code unit, so it can be directly written to the HEAP.\n        var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n        HEAP16[((outPtr)>>1)] = codeUnit;\n        outPtr += 2;\n      }\n      // Null-terminate the pointer to the HEAP.\n      HEAP16[((outPtr)>>1)] = 0;\n      return outPtr - startPtr;\n    };\n  \n  var lengthBytesUTF16 = (str) => {\n      return str.length*2;\n    };\n  \n  var UTF32ToString = (ptr, maxBytesToRead) => {\n      assert(ptr % 4 == 0, 'Pointer passed to UTF32ToString must be aligned to four bytes!');\n      var i = 0;\n  \n      var str = '';\n      // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n      // will always evaluate to true. This saves on code size.\n      while (!(i >= maxBytesToRead / 4)) {\n        var utf32 = HEAP32[(((ptr)+(i*4))>>2)];\n        if (utf32 == 0) break;\n        ++i;\n        // Gotcha: fromCharCode constructs a character from a UTF-16 encoded code (pair), not from a Unicode code point! So encode the code point to UTF-16 for constructing.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        if (utf32 >= 0x10000) {\n          var ch = utf32 - 0x10000;\n          str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n        } else {\n          str += String.fromCharCode(utf32);\n        }\n      }\n      return str;\n    };\n  \n  var stringToUTF32 = (str, outPtr, maxBytesToWrite) => {\n      assert(outPtr % 4 == 0, 'Pointer passed to stringToUTF32 must be aligned to four bytes!');\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n      maxBytesToWrite ??= 0x7FFFFFFF;\n      if (maxBytesToWrite < 4) return 0;\n      var startPtr = outPtr;\n      var endPtr = startPtr + maxBytesToWrite - 4;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n        if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) {\n          var trailSurrogate = str.charCodeAt(++i);\n          codeUnit = 0x10000 + ((codeUnit & 0x3FF) << 10) | (trailSurrogate & 0x3FF);\n        }\n        HEAP32[((outPtr)>>2)] = codeUnit;\n        outPtr += 4;\n        if (outPtr + 4 > endPtr) break;\n      }\n      // Null-terminate the pointer to the HEAP.\n      HEAP32[((outPtr)>>2)] = 0;\n      return outPtr - startPtr;\n    };\n  \n  var lengthBytesUTF32 = (str) => {\n      var len = 0;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var codeUnit = str.charCodeAt(i);\n        if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) ++i; // possibly a lead surrogate, so skip over the tail surrogate.\n        len += 4;\n      }\n  \n      return len;\n    };\n  var __embind_register_std_wstring = (rawType, charSize, name) => {\n      name = readLatin1String(name);\n      var decodeString, encodeString, readCharAt, lengthBytesUTF;\n      if (charSize === 2) {\n        decodeString = UTF16ToString;\n        encodeString = stringToUTF16;\n        lengthBytesUTF = lengthBytesUTF16;\n        readCharAt = (pointer) => HEAPU16[((pointer)>>1)];\n      } else if (charSize === 4) {\n        decodeString = UTF32ToString;\n        encodeString = stringToUTF32;\n        lengthBytesUTF = lengthBytesUTF32;\n        readCharAt = (pointer) => HEAPU32[((pointer)>>2)];\n      }\n      registerType(rawType, {\n        name,\n        'fromWireType': (value) => {\n          // Code mostly taken from _embind_register_std_string fromWireType\n          var length = HEAPU32[((value)>>2)];\n          var str;\n  \n          var decodeStartPtr = value + 4;\n          // Looping here to support possible embedded '0' bytes\n          for (var i = 0; i <= length; ++i) {\n            var currentBytePtr = value + 4 + i * charSize;\n            if (i == length || readCharAt(currentBytePtr) == 0) {\n              var maxReadBytes = currentBytePtr - decodeStartPtr;\n              var stringSegment = decodeString(decodeStartPtr, maxReadBytes);\n              if (str === undefined) {\n                str = stringSegment;\n              } else {\n                str += String.fromCharCode(0);\n                str += stringSegment;\n              }\n              decodeStartPtr = currentBytePtr + charSize;\n            }\n          }\n  \n          _free(value);\n  \n          return str;\n        },\n        'toWireType': (destructors, value) => {\n          if (!(typeof value == 'string')) {\n            throwBindingError(`Cannot pass non-string to C++ string type ${name}`);\n          }\n  \n          // assumes POINTER_SIZE alignment\n          var length = lengthBytesUTF(value);\n          var ptr = _malloc(4 + length + charSize);\n          HEAPU32[((ptr)>>2)] = length / charSize;\n  \n          encodeString(value, ptr + 4, length + charSize);\n  \n          if (destructors !== null) {\n            destructors.push(_free, ptr);\n          }\n          return ptr;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': readPointer,\n        destructorFunction(ptr) {\n          _free(ptr);\n        }\n      });\n    };\n\n  \n  var __embind_register_void = (rawType, name) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        isVoid: true, // void return values can be optimized out sometimes\n        name,\n        'argPackAdvance': 0,\n        'fromWireType': () => undefined,\n        // TODO: assert if anything else is given?\n        'toWireType': (destructors, o) => undefined,\n      });\n    };\n\n  var nowIsMonotonic = 1;\n  var __emscripten_get_now_is_monotonic = () => nowIsMonotonic;\n\n  var __emscripten_memcpy_js = (dest, src, num) => HEAPU8.copyWithin(dest, src, src + num);\n\n  \n  \n  \n  var requireRegisteredType = (rawType, humanName) => {\n      var impl = registeredTypes[rawType];\n      if (undefined === impl) {\n        throwBindingError(`${humanName} has unknown type ${getTypeName(rawType)}`);\n      }\n      return impl;\n    };\n  \n  var emval_returnValue = (returnType, destructorsRef, handle) => {\n      var destructors = [];\n      var result = returnType['toWireType'](destructors, handle);\n      if (destructors.length) {\n        // void, primitives and any other types w/o destructors don't need to allocate a handle\n        HEAPU32[((destructorsRef)>>2)] = Emval.toHandle(destructors);\n      }\n      return result;\n    };\n  var __emval_as = (handle, returnType, destructorsRef) => {\n      handle = Emval.toValue(handle);\n      returnType = requireRegisteredType(returnType, 'emval::as');\n      return emval_returnValue(returnType, destructorsRef, handle);\n    };\n\n  var emval_methodCallers = [];\n  \n  var __emval_call = (caller, handle, destructorsRef, args) => {\n      caller = emval_methodCallers[caller];\n      handle = Emval.toValue(handle);\n      return caller(null, handle, destructorsRef, args);\n    };\n\n  var emval_symbols = {\n  };\n  \n  var getStringOrSymbol = (address) => {\n      var symbol = emval_symbols[address];\n      if (symbol === undefined) {\n        return readLatin1String(address);\n      }\n      return symbol;\n    };\n  \n  \n  var __emval_call_method = (caller, objHandle, methodName, destructorsRef, args) => {\n      caller = emval_methodCallers[caller];\n      objHandle = Emval.toValue(objHandle);\n      methodName = getStringOrSymbol(methodName);\n      return caller(objHandle, objHandle[methodName], destructorsRef, args);\n    };\n\n\n  var emval_addMethodCaller = (caller) => {\n      var id = emval_methodCallers.length;\n      emval_methodCallers.push(caller);\n      return id;\n    };\n  \n  var emval_lookupTypes = (argCount, argTypes) => {\n      var a = new Array(argCount);\n      for (var i = 0; i < argCount; ++i) {\n        a[i] = requireRegisteredType(HEAPU32[(((argTypes)+(i * 4))>>2)],\n                                     \"parameter \" + i);\n      }\n      return a;\n    };\n  \n  \n  var reflectConstruct = Reflect.construct;\n  \n  \n  var __emval_get_method_caller = (argCount, argTypes, kind) => {\n      var types = emval_lookupTypes(argCount, argTypes);\n      var retType = types.shift();\n      argCount--; // remove the shifted off return type\n  \n      var functionBody =\n        `return function (obj, func, destructorsRef, args) {\\n`;\n  \n      var offset = 0;\n      var argsList = []; // 'obj?, arg0, arg1, arg2, ... , argN'\n      if (kind === /* FUNCTION */ 0) {\n        argsList.push(\"obj\");\n      }\n      var params = [\"retType\"];\n      var args = [retType];\n      for (var i = 0; i < argCount; ++i) {\n        argsList.push(\"arg\" + i);\n        params.push(\"argType\" + i);\n        args.push(types[i]);\n        functionBody +=\n          `  var arg${i} = argType${i}.readValueFromPointer(args${offset ? \"+\" + offset : \"\"});\\n`;\n        offset += types[i]['argPackAdvance'];\n      }\n      var invoker = kind === /* CONSTRUCTOR */ 1 ? 'new func' : 'func.call';\n      functionBody +=\n        `  var rv = ${invoker}(${argsList.join(\", \")});\\n`;\n      if (!retType.isVoid) {\n        params.push(\"emval_returnValue\");\n        args.push(emval_returnValue);\n        functionBody +=\n          \"  return emval_returnValue(retType, destructorsRef, rv);\\n\";\n      }\n      functionBody +=\n        \"};\\n\";\n  \n      params.push(functionBody);\n      var invokerFunction = newFunc(Function, params)(...args);\n      var functionName = `methodCaller<(${types.map(t => t.name).join(', ')}) => ${retType.name}>`;\n      return emval_addMethodCaller(createNamedFunction(functionName, invokerFunction));\n    };\n\n  \n  var __emval_get_module_property = (name) => {\n      name = getStringOrSymbol(name);\n      return Emval.toHandle(Module[name]);\n    };\n\n  var __emval_get_property = (handle, key) => {\n      handle = Emval.toValue(handle);\n      key = Emval.toValue(key);\n      return Emval.toHandle(handle[key]);\n    };\n\n  var __emval_incref = (handle) => {\n      if (handle > 9) {\n        emval_handles[handle + 1] += 1;\n      }\n    };\n\n  var __emval_new_array = () => Emval.toHandle([]);\n\n  \n  var __emval_new_cstring = (v) => Emval.toHandle(getStringOrSymbol(v));\n\n  var __emval_new_object = () => Emval.toHandle({});\n\n  \n  \n  var __emval_run_destructors = (handle) => {\n      var destructors = Emval.toValue(handle);\n      runDestructors(destructors);\n      __emval_decref(handle);\n    };\n\n  var __emval_set_property = (handle, key, value) => {\n      handle = Emval.toValue(handle);\n      key = Emval.toValue(key);\n      value = Emval.toValue(value);\n      handle[key] = value;\n    };\n\n  \n  var __emval_take_value = (type, arg) => {\n      type = requireRegisteredType(type, '_emval_take_value');\n      var v = type['readValueFromPointer'](arg);\n      return Emval.toHandle(v);\n    };\n\n  var _emscripten_date_now = () => Date.now();\n\n  var _emscripten_get_now;\n      // Modern environment where performance.now() is supported:\n      // N.B. a shorter form \"_emscripten_get_now = performance.now;\" is\n      // unfortunately not allowed even in current browsers (e.g. FF Nightly 75).\n      _emscripten_get_now = () => performance.now();\n  ;\n\n  var getHeapMax = () =>\n      // Stay one Wasm page short of 4GB: while e.g. Chrome is able to allocate\n      // full 4GB Wasm memories, the size will wrap back to 0 bytes in Wasm side\n      // for any code that deals with heap sizes, which would require special\n      // casing all heap size related code to treat 0 specially.\n      2147483648;\n  \n  var growMemory = (size) => {\n      var b = wasmMemory.buffer;\n      var pages = (size - b.byteLength + 65535) / 65536;\n      try {\n        // round size grow request up to wasm page size (fixed 64KB per spec)\n        wasmMemory.grow(pages); // .grow() takes a delta compared to the previous size\n        updateMemoryViews();\n        return 1 /*success*/;\n      } catch(e) {\n        err(`growMemory: Attempted to grow heap from ${b.byteLength} bytes to ${size} bytes, but got error: ${e}`);\n      }\n      // implicit 0 return to save code size (caller will cast \"undefined\" into 0\n      // anyhow)\n    };\n  var _emscripten_resize_heap = (requestedSize) => {\n      var oldSize = HEAPU8.length;\n      // With CAN_ADDRESS_2GB or MEMORY64, pointers are already unsigned.\n      requestedSize >>>= 0;\n      // With multithreaded builds, races can happen (another thread might increase the size\n      // in between), so return a failure, and let the caller retry.\n      assert(requestedSize > oldSize);\n  \n      // Memory resize rules:\n      // 1.  Always increase heap size to at least the requested size, rounded up\n      //     to next page multiple.\n      // 2a. If MEMORY_GROWTH_LINEAR_STEP == -1, excessively resize the heap\n      //     geometrically: increase the heap size according to\n      //     MEMORY_GROWTH_GEOMETRIC_STEP factor (default +20%), At most\n      //     overreserve by MEMORY_GROWTH_GEOMETRIC_CAP bytes (default 96MB).\n      // 2b. If MEMORY_GROWTH_LINEAR_STEP != -1, excessively resize the heap\n      //     linearly: increase the heap size by at least\n      //     MEMORY_GROWTH_LINEAR_STEP bytes.\n      // 3.  Max size for the heap is capped at 2048MB-WASM_PAGE_SIZE, or by\n      //     MAXIMUM_MEMORY, or by ASAN limit, depending on which is smallest\n      // 4.  If we were unable to allocate as much memory, it may be due to\n      //     over-eager decision to excessively reserve due to (3) above.\n      //     Hence if an allocation fails, cut down on the amount of excess\n      //     growth, in an attempt to succeed to perform a smaller allocation.\n  \n      // A limit is set for how much we can grow. We should not exceed that\n      // (the wasm binary specifies it, so if we tried, we'd fail anyhow).\n      var maxHeapSize = getHeapMax();\n      if (requestedSize > maxHeapSize) {\n        err(`Cannot enlarge memory, requested ${requestedSize} bytes, but the limit is ${maxHeapSize} bytes!`);\n        return false;\n      }\n  \n      var alignUp = (x, multiple) => x + (multiple - x % multiple) % multiple;\n  \n      // Loop through potential heap size increases. If we attempt a too eager\n      // reservation that fails, cut down on the attempted size and reserve a\n      // smaller bump instead. (max 3 times, chosen somewhat arbitrarily)\n      for (var cutDown = 1; cutDown <= 4; cutDown *= 2) {\n        var overGrownHeapSize = oldSize * (1 + 0.2 / cutDown); // ensure geometric growth\n        // but limit overreserving (default to capping at +96MB overgrowth at most)\n        overGrownHeapSize = Math.min(overGrownHeapSize, requestedSize + 100663296 );\n  \n        var newSize = Math.min(maxHeapSize, alignUp(Math.max(requestedSize, overGrownHeapSize), 65536));\n  \n        var replacement = growMemory(newSize);\n        if (replacement) {\n  \n          return true;\n        }\n      }\n      err(`Failed to grow the heap from ${oldSize} bytes to ${newSize} bytes, not enough memory!`);\n      return false;\n    };\n\n  var SYSCALLS = {\n  varargs:undefined,\n  getStr(ptr) {\n        var ret = UTF8ToString(ptr);\n        return ret;\n      },\n  };\n  var _fd_close = (fd) => {\n      abort('fd_close called without SYSCALLS_REQUIRE_FILESYSTEM');\n    };\n\n  var convertI32PairToI53Checked = (lo, hi) => {\n      assert(lo == (lo >>> 0) || lo == (lo|0)); // lo should either be a i32 or a u32\n      assert(hi === (hi|0));                    // hi should be a i32\n      return ((hi + 0x200000) >>> 0 < 0x400001 - !!lo) ? (lo >>> 0) + hi * 4294967296 : NaN;\n    };\n  function _fd_seek(fd,offset_low, offset_high,whence,newOffset) {\n    var offset = convertI32PairToI53Checked(offset_low, offset_high);\n  \n    \n      return 70;\n    ;\n  }\n\n  var printCharBuffers = [null,[],[]];\n  \n  var printChar = (stream, curr) => {\n      var buffer = printCharBuffers[stream];\n      assert(buffer);\n      if (curr === 0 || curr === 10) {\n        (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n        buffer.length = 0;\n      } else {\n        buffer.push(curr);\n      }\n    };\n  \n  var flush_NO_FILESYSTEM = () => {\n      // flush anything remaining in the buffers during shutdown\n      _fflush(0);\n      if (printCharBuffers[1].length) printChar(1, 10);\n      if (printCharBuffers[2].length) printChar(2, 10);\n    };\n  \n  \n  var _fd_write = (fd, iov, iovcnt, pnum) => {\n      // hack to support printf in SYSCALLS_REQUIRE_FILESYSTEM=0\n      var num = 0;\n      for (var i = 0; i < iovcnt; i++) {\n        var ptr = HEAPU32[((iov)>>2)];\n        var len = HEAPU32[(((iov)+(4))>>2)];\n        iov += 8;\n        for (var j = 0; j < len; j++) {\n          printChar(fd, HEAPU8[ptr+j]);\n        }\n        num += len;\n      }\n      HEAPU32[((pnum)>>2)] = num;\n      return 0;\n    };\n\n\n  var incrementExceptionRefcount = (ptr) => ___cxa_increment_exception_refcount(ptr);\n  Module['incrementExceptionRefcount'] = incrementExceptionRefcount;\n\n  var decrementExceptionRefcount = (ptr) => ___cxa_decrement_exception_refcount(ptr);\n  Module['decrementExceptionRefcount'] = decrementExceptionRefcount;\n\n  \n  \n  \n  \n  var stackAlloc = (sz) => __emscripten_stack_alloc(sz);\n  \n  var getExceptionMessageCommon = (ptr) => {\n      var sp = stackSave();\n      var type_addr_addr = stackAlloc(4);\n      var message_addr_addr = stackAlloc(4);\n      ___get_exception_message(ptr, type_addr_addr, message_addr_addr);\n      var type_addr = HEAPU32[((type_addr_addr)>>2)];\n      var message_addr = HEAPU32[((message_addr_addr)>>2)];\n      var type = UTF8ToString(type_addr);\n      _free(type_addr);\n      var message;\n      if (message_addr) {\n        message = UTF8ToString(message_addr);\n        _free(message_addr);\n      }\n      stackRestore(sp);\n      return [type, message];\n    };\n  var getExceptionMessage = (ptr) => getExceptionMessageCommon(ptr);\n  Module['getExceptionMessage'] = getExceptionMessage;\nembind_init_charCodes();\nBindingError = Module['BindingError'] = class BindingError extends Error { constructor(message) { super(message); this.name = 'BindingError'; }};\nInternalError = Module['InternalError'] = class InternalError extends Error { constructor(message) { super(message); this.name = 'InternalError'; }};\ninit_emval();;\nUnboundTypeError = Module['UnboundTypeError'] = extendError(Error, 'UnboundTypeError');;\nfunction checkIncomingModuleAPI() {\n  ignoredModuleProp('fetchSettings');\n}\nvar wasmImports = {\n  /** @export */\n  __assert_fail: ___assert_fail,\n  /** @export */\n  __cxa_begin_catch: ___cxa_begin_catch,\n  /** @export */\n  __cxa_find_matching_catch_2: ___cxa_find_matching_catch_2,\n  /** @export */\n  __cxa_find_matching_catch_3: ___cxa_find_matching_catch_3,\n  /** @export */\n  __cxa_throw: ___cxa_throw,\n  /** @export */\n  __resumeException: ___resumeException,\n  /** @export */\n  _abort_js: __abort_js,\n  /** @export */\n  _embind_register_bigint: __embind_register_bigint,\n  /** @export */\n  _embind_register_bool: __embind_register_bool,\n  /** @export */\n  _embind_register_emval: __embind_register_emval,\n  /** @export */\n  _embind_register_float: __embind_register_float,\n  /** @export */\n  _embind_register_function: __embind_register_function,\n  /** @export */\n  _embind_register_integer: __embind_register_integer,\n  /** @export */\n  _embind_register_memory_view: __embind_register_memory_view,\n  /** @export */\n  _embind_register_std_string: __embind_register_std_string,\n  /** @export */\n  _embind_register_std_wstring: __embind_register_std_wstring,\n  /** @export */\n  _embind_register_void: __embind_register_void,\n  /** @export */\n  _emscripten_get_now_is_monotonic: __emscripten_get_now_is_monotonic,\n  /** @export */\n  _emscripten_memcpy_js: __emscripten_memcpy_js,\n  /** @export */\n  _emval_as: __emval_as,\n  /** @export */\n  _emval_call: __emval_call,\n  /** @export */\n  _emval_call_method: __emval_call_method,\n  /** @export */\n  _emval_decref: __emval_decref,\n  /** @export */\n  _emval_get_method_caller: __emval_get_method_caller,\n  /** @export */\n  _emval_get_module_property: __emval_get_module_property,\n  /** @export */\n  _emval_get_property: __emval_get_property,\n  /** @export */\n  _emval_incref: __emval_incref,\n  /** @export */\n  _emval_new_array: __emval_new_array,\n  /** @export */\n  _emval_new_cstring: __emval_new_cstring,\n  /** @export */\n  _emval_new_object: __emval_new_object,\n  /** @export */\n  _emval_run_destructors: __emval_run_destructors,\n  /** @export */\n  _emval_set_property: __emval_set_property,\n  /** @export */\n  _emval_take_value: __emval_take_value,\n  /** @export */\n  emscripten_date_now: _emscripten_date_now,\n  /** @export */\n  emscripten_get_now: _emscripten_get_now,\n  /** @export */\n  emscripten_resize_heap: _emscripten_resize_heap,\n  /** @export */\n  fd_close: _fd_close,\n  /** @export */\n  fd_seek: _fd_seek,\n  /** @export */\n  fd_write: _fd_write,\n  /** @export */\n  invoke_ii,\n  /** @export */\n  invoke_iii,\n  /** @export */\n  invoke_iiii,\n  /** @export */\n  invoke_j,\n  /** @export */\n  invoke_v,\n  /** @export */\n  invoke_vi,\n  /** @export */\n  invoke_vii,\n  /** @export */\n  invoke_viii,\n  /** @export */\n  invoke_viiii\n};\nvar wasmExports = createWasm();\nvar ___wasm_call_ctors = createExportWrapper('__wasm_call_ctors', 0);\nvar ___getTypeName = createExportWrapper('__getTypeName', 1);\nvar _fflush = createExportWrapper('fflush', 1);\nvar _malloc = createExportWrapper('malloc', 1);\nvar _strerror = createExportWrapper('strerror', 1);\nvar _free = createExportWrapper('free', 1);\nvar _setThrew = createExportWrapper('setThrew', 2);\nvar __emscripten_tempret_set = createExportWrapper('_emscripten_tempret_set', 1);\nvar _emscripten_stack_init = () => (_emscripten_stack_init = wasmExports['emscripten_stack_init'])();\nvar _emscripten_stack_get_free = () => (_emscripten_stack_get_free = wasmExports['emscripten_stack_get_free'])();\nvar _emscripten_stack_get_base = () => (_emscripten_stack_get_base = wasmExports['emscripten_stack_get_base'])();\nvar _emscripten_stack_get_end = () => (_emscripten_stack_get_end = wasmExports['emscripten_stack_get_end'])();\nvar __emscripten_stack_restore = (a0) => (__emscripten_stack_restore = wasmExports['_emscripten_stack_restore'])(a0);\nvar __emscripten_stack_alloc = (a0) => (__emscripten_stack_alloc = wasmExports['_emscripten_stack_alloc'])(a0);\nvar _emscripten_stack_get_current = () => (_emscripten_stack_get_current = wasmExports['emscripten_stack_get_current'])();\nvar ___cxa_free_exception = createExportWrapper('__cxa_free_exception', 1);\nvar ___cxa_increment_exception_refcount = createExportWrapper('__cxa_increment_exception_refcount', 1);\nvar ___cxa_decrement_exception_refcount = createExportWrapper('__cxa_decrement_exception_refcount', 1);\nvar ___get_exception_message = createExportWrapper('__get_exception_message', 3);\nvar ___cxa_can_catch = createExportWrapper('__cxa_can_catch', 3);\nvar ___cxa_is_pointer_type = createExportWrapper('__cxa_is_pointer_type', 1);\nvar dynCall_j = Module['dynCall_j'] = createExportWrapper('dynCall_j', 1);\nvar dynCall_jiji = Module['dynCall_jiji'] = createExportWrapper('dynCall_jiji', 5);\n\nfunction invoke_iii(index,a1,a2) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1,a2);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_ii(index,a1) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_v(index) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)();\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_vi(index,a1) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_viii(index,a1,a2,a3) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2,a3);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_iiii(index,a1,a2,a3) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1,a2,a3);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_viiii(index,a1,a2,a3,a4) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2,a3,a4);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_vii(index,a1,a2) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_j(index) {\n  var sp = stackSave();\n  try {\n    return dynCall_j(index);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\n\n// include: postamble.js\n// === Auto-generated postamble setup entry stuff ===\n\nvar missingLibrarySymbols = [\n  'writeI53ToI64',\n  'writeI53ToI64Clamped',\n  'writeI53ToI64Signaling',\n  'writeI53ToU64Clamped',\n  'writeI53ToU64Signaling',\n  'readI53FromI64',\n  'readI53FromU64',\n  'convertI32PairToI53',\n  'convertU32PairToI53',\n  'getTempRet0',\n  'zeroMemory',\n  'exitJS',\n  'isLeapYear',\n  'ydayFromDate',\n  'arraySum',\n  'addDays',\n  'strError',\n  'inetPton4',\n  'inetNtop4',\n  'inetPton6',\n  'inetNtop6',\n  'readSockaddr',\n  'writeSockaddr',\n  'initRandomFill',\n  'randomFill',\n  'emscriptenLog',\n  'readEmAsmArgs',\n  'jstoi_q',\n  'getExecutableName',\n  'listenOnce',\n  'autoResumeAudioContext',\n  'handleException',\n  'keepRuntimeAlive',\n  'runtimeKeepalivePush',\n  'runtimeKeepalivePop',\n  'callUserCallback',\n  'maybeExit',\n  'asmjsMangle',\n  'asyncLoad',\n  'alignMemory',\n  'mmapAlloc',\n  'HandleAllocator',\n  'getNativeTypeSize',\n  'STACK_SIZE',\n  'STACK_ALIGN',\n  'POINTER_SIZE',\n  'ASSERTIONS',\n  'getCFunc',\n  'ccall',\n  'cwrap',\n  'uleb128Encode',\n  'sigToWasmTypes',\n  'generateFuncType',\n  'convertJsFunctionToWasm',\n  'getEmptyTableSlot',\n  'updateTableMap',\n  'getFunctionAddress',\n  'addFunction',\n  'removeFunction',\n  'reallyNegative',\n  'unSign',\n  'strLen',\n  'reSign',\n  'formatString',\n  'intArrayFromString',\n  'intArrayToString',\n  'AsciiToString',\n  'stringToAscii',\n  'stringToNewUTF8',\n  'stringToUTF8OnStack',\n  'writeArrayToMemory',\n  'registerKeyEventCallback',\n  'maybeCStringToJsString',\n  'findEventTarget',\n  'getBoundingClientRect',\n  'fillMouseEventData',\n  'registerMouseEventCallback',\n  'registerWheelEventCallback',\n  'registerUiEventCallback',\n  'registerFocusEventCallback',\n  'fillDeviceOrientationEventData',\n  'registerDeviceOrientationEventCallback',\n  'fillDeviceMotionEventData',\n  'registerDeviceMotionEventCallback',\n  'screenOrientation',\n  'fillOrientationChangeEventData',\n  'registerOrientationChangeEventCallback',\n  'fillFullscreenChangeEventData',\n  'registerFullscreenChangeEventCallback',\n  'JSEvents_requestFullscreen',\n  'JSEvents_resizeCanvasForFullscreen',\n  'registerRestoreOldStyle',\n  'hideEverythingExceptGivenElement',\n  'restoreHiddenElements',\n  'setLetterbox',\n  'softFullscreenResizeWebGLRenderTarget',\n  'doRequestFullscreen',\n  'fillPointerlockChangeEventData',\n  'registerPointerlockChangeEventCallback',\n  'registerPointerlockErrorEventCallback',\n  'requestPointerLock',\n  'fillVisibilityChangeEventData',\n  'registerVisibilityChangeEventCallback',\n  'registerTouchEventCallback',\n  'fillGamepadEventData',\n  'registerGamepadEventCallback',\n  'registerBeforeUnloadEventCallback',\n  'fillBatteryEventData',\n  'battery',\n  'registerBatteryEventCallback',\n  'setCanvasElementSize',\n  'getCanvasElementSize',\n  'jsStackTrace',\n  'getCallstack',\n  'convertPCtoSourceLocation',\n  'getEnvStrings',\n  'checkWasiClock',\n  'wasiRightsToMuslOFlags',\n  'wasiOFlagsToMuslOFlags',\n  'createDyncallWrapper',\n  'safeSetTimeout',\n  'setImmediateWrapped',\n  'clearImmediateWrapped',\n  'polyfillSetImmediate',\n  'getPromise',\n  'makePromise',\n  'idsToPromises',\n  'makePromiseCallback',\n  'Browser_asyncPrepareDataCounter',\n  'setMainLoop',\n  'getSocketFromFD',\n  'getSocketAddress',\n  'FS_createPreloadedFile',\n  'FS_modeStringToFlags',\n  'FS_getMode',\n  'FS_stdin_getChar',\n  'FS_unlink',\n  'FS_createDataFile',\n  'FS_mkdirTree',\n  '_setNetworkCallback',\n  'heapObjectForWebGLType',\n  'toTypedArrayIndex',\n  'webgl_enable_ANGLE_instanced_arrays',\n  'webgl_enable_OES_vertex_array_object',\n  'webgl_enable_WEBGL_draw_buffers',\n  'webgl_enable_WEBGL_multi_draw',\n  'emscriptenWebGLGet',\n  'computeUnpackAlignedImageSize',\n  'colorChannelsInGlTextureFormat',\n  'emscriptenWebGLGetTexPixelData',\n  'emscriptenWebGLGetUniform',\n  'webglGetUniformLocation',\n  'webglPrepareUniformLocationsBeforeFirstUse',\n  'webglGetLeftBracePos',\n  'emscriptenWebGLGetVertexAttrib',\n  '__glGetActiveAttribOrUniform',\n  'writeGLArray',\n  'registerWebGlEventCallback',\n  'runAndAbortIfError',\n  'ALLOC_NORMAL',\n  'ALLOC_STACK',\n  'allocate',\n  'writeStringToMemory',\n  'writeAsciiToMemory',\n  'setErrNo',\n  'demangle',\n  'stackTrace',\n  'getFunctionArgsName',\n  'createJsInvokerSignature',\n  'init_embind',\n  'getBasestPointer',\n  'registerInheritedInstance',\n  'unregisterInheritedInstance',\n  'getInheritedInstance',\n  'getInheritedInstanceCount',\n  'getLiveInheritedInstances',\n  'enumReadValueFromPointer',\n  'genericPointerToWireType',\n  'constNoSmartPtrRawPointerToWireType',\n  'nonConstNoSmartPtrRawPointerToWireType',\n  'init_RegisteredPointer',\n  'RegisteredPointer',\n  'RegisteredPointer_fromWireType',\n  'runDestructor',\n  'releaseClassHandle',\n  'detachFinalizer',\n  'attachFinalizer',\n  'makeClassHandle',\n  'init_ClassHandle',\n  'ClassHandle',\n  'throwInstanceAlreadyDeleted',\n  'flushPendingDeletes',\n  'setDelayFunction',\n  'RegisteredClass',\n  'shallowCopyInternalPointer',\n  'downcastPointer',\n  'upcastPointer',\n  'validateThis',\n  'char_0',\n  'char_9',\n  'makeLegalFunctionName',\n  'emval_get_global',\n];\nmissingLibrarySymbols.forEach(missingLibrarySymbol)\n\nvar unexportedSymbols = [\n  'run',\n  'addOnPreRun',\n  'addOnInit',\n  'addOnPreMain',\n  'addOnExit',\n  'addOnPostRun',\n  'addRunDependency',\n  'removeRunDependency',\n  'out',\n  'err',\n  'callMain',\n  'abort',\n  'wasmMemory',\n  'wasmExports',\n  'writeStackCookie',\n  'checkStackCookie',\n  'convertI32PairToI53Checked',\n  'stackSave',\n  'stackRestore',\n  'stackAlloc',\n  'setTempRet0',\n  'ptrToString',\n  'getHeapMax',\n  'growMemory',\n  'ENV',\n  'MONTH_DAYS_REGULAR',\n  'MONTH_DAYS_LEAP',\n  'MONTH_DAYS_REGULAR_CUMULATIVE',\n  'MONTH_DAYS_LEAP_CUMULATIVE',\n  'ERRNO_CODES',\n  'DNS',\n  'Protocols',\n  'Sockets',\n  'timers',\n  'warnOnce',\n  'readEmAsmArgsArray',\n  'jstoi_s',\n  'dynCallLegacy',\n  'getDynCaller',\n  'dynCall',\n  'wasmTable',\n  'noExitRuntime',\n  'freeTableIndexes',\n  'functionsInTableMap',\n  'setValue',\n  'getValue',\n  'PATH',\n  'PATH_FS',\n  'UTF8Decoder',\n  'UTF8ArrayToString',\n  'UTF8ToString',\n  'stringToUTF8Array',\n  'stringToUTF8',\n  'lengthBytesUTF8',\n  'UTF16Decoder',\n  'UTF16ToString',\n  'stringToUTF16',\n  'lengthBytesUTF16',\n  'UTF32ToString',\n  'stringToUTF32',\n  'lengthBytesUTF32',\n  'JSEvents',\n  'specialHTMLTargets',\n  'findCanvasEventTarget',\n  'currentFullscreenStrategy',\n  'restoreOldWindowedStyle',\n  'UNWIND_CACHE',\n  'ExitStatus',\n  'flush_NO_FILESYSTEM',\n  'promiseMap',\n  'uncaughtExceptionCount',\n  'exceptionLast',\n  'exceptionCaught',\n  'ExceptionInfo',\n  'findMatchingCatch',\n  'getExceptionMessageCommon',\n  'incrementExceptionRefcount',\n  'decrementExceptionRefcount',\n  'getExceptionMessage',\n  'Browser',\n  'getPreloadedImageData__data',\n  'wget',\n  'SYSCALLS',\n  'preloadPlugins',\n  'FS_stdin_getChar_buffer',\n  'FS_createPath',\n  'FS_createDevice',\n  'FS_readFile',\n  'FS',\n  'FS_createLazyFile',\n  'MEMFS',\n  'TTY',\n  'PIPEFS',\n  'SOCKFS',\n  'tempFixedLengthArray',\n  'miniTempWebGLFloatBuffers',\n  'miniTempWebGLIntBuffers',\n  'GL',\n  'AL',\n  'GLUT',\n  'EGL',\n  'GLEW',\n  'IDBStore',\n  'SDL',\n  'SDL_gfx',\n  'allocateUTF8',\n  'allocateUTF8OnStack',\n  'print',\n  'printErr',\n  'InternalError',\n  'BindingError',\n  'throwInternalError',\n  'throwBindingError',\n  'registeredTypes',\n  'awaitingDependencies',\n  'typeDependencies',\n  'tupleRegistrations',\n  'structRegistrations',\n  'sharedRegisterType',\n  'whenDependentTypesAreResolved',\n  'embind_charCodes',\n  'embind_init_charCodes',\n  'readLatin1String',\n  'getTypeName',\n  'getFunctionName',\n  'heap32VectorToArray',\n  'requireRegisteredType',\n  'usesDestructorStack',\n  'createJsInvoker',\n  'UnboundTypeError',\n  'PureVirtualError',\n  'GenericWireTypeSize',\n  'EmValType',\n  'throwUnboundTypeError',\n  'ensureOverloadTable',\n  'exposePublicSymbol',\n  'replacePublicSymbol',\n  'extendError',\n  'createNamedFunction',\n  'embindRepr',\n  'registeredInstances',\n  'registeredPointers',\n  'registerType',\n  'integerReadValueFromPointer',\n  'floatReadValueFromPointer',\n  'readPointer',\n  'runDestructors',\n  'newFunc',\n  'craftInvokerFunction',\n  'embind__requireFunction',\n  'finalizationRegistry',\n  'detachFinalizer_deps',\n  'deletionQueue',\n  'delayFunction',\n  'emval_freelist',\n  'emval_handles',\n  'emval_symbols',\n  'init_emval',\n  'count_emval_handles',\n  'getStringOrSymbol',\n  'Emval',\n  'emval_returnValue',\n  'emval_lookupTypes',\n  'emval_methodCallers',\n  'emval_addMethodCaller',\n  'reflectConstruct',\n];\nunexportedSymbols.forEach(unexportedRuntimeSymbol);\n\n\n\nvar calledRun;\n\ndependenciesFulfilled = function runCaller() {\n  // If run has never been called, and we should call run (INVOKE_RUN is true, and Module.noInitialRun is not false)\n  if (!calledRun) run();\n  if (!calledRun) dependenciesFulfilled = runCaller; // try this again later, after new deps are fulfilled\n};\n\nfunction stackCheckInit() {\n  // This is normally called automatically during __wasm_call_ctors but need to\n  // get these values before even running any of the ctors so we call it redundantly\n  // here.\n  _emscripten_stack_init();\n  // TODO(sbc): Move writeStackCookie to native to to avoid this.\n  writeStackCookie();\n}\n\nfunction run() {\n\n  if (runDependencies > 0) {\n    return;\n  }\n\n    stackCheckInit();\n\n  preRun();\n\n  // a preRun added a dependency, run will be called later\n  if (runDependencies > 0) {\n    return;\n  }\n\n  function doRun() {\n    // run may have just been called through dependencies being fulfilled just in this very frame,\n    // or while the async setStatus time below was happening\n    if (calledRun) return;\n    calledRun = true;\n    Module['calledRun'] = true;\n\n    if (ABORT) return;\n\n    initRuntime();\n\n    readyPromiseResolve(Module);\n    Module['onRuntimeInitialized']?.();\n\n    assert(!Module['_main'], 'compiled without a main, but one is present. if you added it from JS, use Module[\"onRuntimeInitialized\"]');\n\n    postRun();\n  }\n\n  if (Module['setStatus']) {\n    Module['setStatus']('Running...');\n    setTimeout(function() {\n      setTimeout(function() {\n        Module['setStatus']('');\n      }, 1);\n      doRun();\n    }, 1);\n  } else\n  {\n    doRun();\n  }\n  checkStackCookie();\n}\n\nfunction checkUnflushedContent() {\n  // Compiler settings do not allow exiting the runtime, so flushing\n  // the streams is not possible. but in ASSERTIONS mode we check\n  // if there was something to flush, and if so tell the user they\n  // should request that the runtime be exitable.\n  // Normally we would not even include flush() at all, but in ASSERTIONS\n  // builds we do so just for this check, and here we see if there is any\n  // content to flush, that is, we check if there would have been\n  // something a non-ASSERTIONS build would have not seen.\n  // How we flush the streams depends on whether we are in SYSCALLS_REQUIRE_FILESYSTEM=0\n  // mode (which has its own special function for this; otherwise, all\n  // the code is inside libc)\n  var oldOut = out;\n  var oldErr = err;\n  var has = false;\n  out = err = (x) => {\n    has = true;\n  }\n  try { // it doesn't matter if it fails\n    flush_NO_FILESYSTEM();\n  } catch(e) {}\n  out = oldOut;\n  err = oldErr;\n  if (has) {\n    warnOnce('stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the Emscripten FAQ), or make sure to emit a newline when you printf etc.');\n    warnOnce('(this may also be due to not including full filesystem support - try building with -sFORCE_FILESYSTEM)');\n  }\n}\n\nif (Module['preInit']) {\n  if (typeof Module['preInit'] == 'function') Module['preInit'] = [Module['preInit']];\n  while (Module['preInit'].length > 0) {\n    Module['preInit'].pop()();\n  }\n}\n\nrun();\n\n// end include: postamble.js\n\n// include: postamble_modularize.js\n// In MODULARIZE mode we wrap the generated code in a factory function\n// and return either the Module itself, or a promise of the module.\n//\n// We assign to the `moduleRtn` global here and configure closure to see\n// this as and extern so it won't get minified.\n\nmoduleRtn = readyPromise;\n\n// Assertion for attempting to access module properties on the incoming\n// moduleArg.  In the past we used this object as the prototype of the module\n// and assigned properties to it, but now we return a distinct object.  This\n// keeps the instance private until it is ready (i.e the promise has been\n// resolved).\nfor (const prop of Object.keys(Module)) {\n  if (!(prop in moduleArg)) {\n    Object.defineProperty(moduleArg, prop, {\n      configurable: true,\n      get() {\n        abort(`Access to module property ('${prop}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)\n      }\n    });\n  }\n}\n// end include: postamble_modularize.js\n\n\n\n  return moduleRtn;\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = Module;\nelse if (typeof define === 'function' && define['amd'])\n  define([], () => Module);\n","module.exports = \"#version 300 es\\n\\nuniform int u_offset;\\n\\nin vec2 a_pos;    // Has grid point position\\nin vec2 a_tex_coord; // zoom info is on the x coordinate\\nin lowp float a_geom; // Has corner info\\nuniform lowp float u_bb_size;\\nuniform lowp float u_map_aspect;\\nuniform lowp float u_zoom;\\nuniform lowp float u_bb_width;  // Normalized by texture width\\nuniform lowp float u_bb_height; // Normalized by texture height\\nuniform highp float u_bb_mag_bin_size;\\nuniform highp float u_bb_mag_wrap;\\nuniform int u_rotate_with_map;\\n\\nuniform sampler2D u_u_sampler;\\nuniform sampler2D u_v_sampler;\\nuniform sampler2D u_rot_sampler;\\n\\nout highp vec2 v_tex_coord;\\n#ifdef COLORMAP\\nout highp float v_mag;\\n#endif\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nmat4 rotationZMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( c,  s,  0., 0.,\\n                -s,  c,  0., 0.,\\n                 0., 0., 1., 0.,\\n                 0., 0., 0., 1.);\\n}\\n\\nmat4 rotationXMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( 1.,  0., 0., 0.,\\n                 0.,  c,  s,  0.,\\n                 0., -s,  c,  0.,\\n                 0.,  0., 0., 1.);\\n}\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    mat4 map_stretch_matrix = scalingMatrix(1.0, 1. / u_map_aspect, 1.0);\\n\\n    vec4 pivot_pos = projectTile(a_pos.xy + globe_offset);\\n    float globe_rotation = 0.0;\\n\\n    if (u_rotate_with_map == 1) {\\n        vec4 pivot_pos_ihat = projectTile(a_pos.xy + globe_offset + vec2(1e-5, 0.));\\n        // Surely there's a more linear-algebra-y way to do this than converting all the rotations to an angle.\\n        vec2 pivot_east = normalize((inverse(map_stretch_matrix) * (pivot_pos_ihat - pivot_pos)).xy);\\n        globe_rotation = atan(pivot_east.x, pivot_east.y) - 3.141592654 / 2.0;\\n    }\\n\\n    highp float min_zoom = floor(a_tex_coord.x);\\n    lowp float corner = a_geom;\\n\\n    vec2 data_texcoord = a_tex_coord;\\n    data_texcoord.x = fract(data_texcoord.x);\\n\\n    highp float u = texture(u_u_sampler, data_texcoord).r;\\n    highp float v = texture(u_v_sampler, data_texcoord).r;\\n    highp float rot = texture(u_rot_sampler, data_texcoord).r;\\n\\n    lowp float bb_aspect = u_bb_width / u_bb_height;\\n    lowp float ang = (abs(u) < 1e-6 && abs(v) < 1e-6) ? 0. : atan(v, u) - 3.141592654 / 2.0;\\n    highp float mag = length(vec2(u, v));\\n#ifdef COLORMAP\\n    v_mag = mag;\\n#endif\\n    mag = floor(mag / u_bb_mag_bin_size + 0.5) * u_bb_mag_bin_size;\\n\\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\\n    vec2 texcoord = vec2(0.0, 0.0);\\n    \\n    if (u_zoom >= min_zoom) {\\n        // Subtracting a small number off of u_bb_mag_wrap fixes (I think) a precision issue on some GPUs\\n        vec2 tex_loc = vec2(mod(mag, u_bb_mag_wrap - 1e-5) / u_bb_mag_bin_size * u_bb_width, floor(mag / (u_bb_mag_wrap - 1e-5)) * u_bb_height);\\n\\n        if (corner < 0.5) {\\n            offset = vec4(-u_bb_size, u_bb_size, 0., 0.);\\n            texcoord = tex_loc;\\n        }\\n        else if (corner < 1.5) {\\n            offset = vec4(u_bb_size, u_bb_size, 0., 0.);\\n            texcoord = tex_loc + vec2(u_bb_width, 0.0);\\n        }\\n        else if (corner < 2.5) {\\n            offset = vec4(-u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\\n            texcoord = tex_loc + vec2(0.0, u_bb_height);\\n        }\\n        else if (corner < 3.5) {\\n            offset = vec4(u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\\n            texcoord = tex_loc + vec2(u_bb_width, u_bb_height);\\n        }\\n\\n        mat4 barb_rotation = rotationZMatrix(ang - globe_rotation - rot);\\n        offset = map_stretch_matrix * barb_rotation * offset;\\n    }\\n\\n    gl_Position = pivot_pos + offset;\\n    v_tex_coord = texcoord;\\n}\"","module.exports = \"#version 300 es\\n\\nuniform int u_offset;\\n\\nin vec2 a_pos;\\nin vec2 a_tex_coord;\\n\\nout highp vec2 v_tex_coord;\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    gl_Position = projectTile(a_pos.xy + globe_offset);\\n    v_tex_coord = a_tex_coord;\\n}\"","module.exports = \"#version 300 es\\n\\nuniform int u_offset;\\n\\nin vec3 a_pos;\\nin vec2 a_extrusion;\\nin float a_data;\\n\\n#ifdef ZOOM\\nin float a_min_zoom;\\n#endif\\n\\n#ifdef OFFSET\\nin vec2 a_offset;\\n#endif\\n\\nuniform lowp float u_line_width;\\nuniform lowp float u_map_width;\\nuniform lowp float u_map_height;\\n//uniform highp float u_map_bearing;\\n\\n#ifdef ZOOM\\nuniform lowp float u_zoom;\\n#endif\\n\\n#ifdef OFFSET\\nuniform int u_offset_rotates_with_map;\\nuniform lowp float u_offset_scale;\\n#endif\\n\\n#ifdef DATA\\nout highp float v_data;\\n#endif\\n\\nout highp float v_dist;\\nout lowp float v_cross;\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nmat4 rotationZMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( c,  s,  0., 0.,\\n                -s,  c,  0., 0.,\\n                 0., 0., 1., 0.,\\n                 0., 0., 0., 1.);\\n}\\n\\nmat4 rotationXMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( 1.,  0., 0., 0.,\\n                 0.,  c,  s,  0.,\\n                 0., -s,  c,  0.,\\n                 0.,  0., 0., 1.);\\n}\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    v_dist = abs(a_pos.z);\\n    v_cross = sign(a_pos.z);\\n    vec4 center_pos = projectTile(a_pos.xy + globe_offset);\\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\\n\\n#ifdef ZOOM\\n    if (u_zoom >= a_min_zoom) {\\n#endif\\n\\n        vec2 offset_ext = u_line_width * 2. * a_extrusion;\\n\\n        mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\\n        \\n        vec4 center_pos_ihat = projectTile(a_pos.xy + globe_offset + vec2(1e-5, 0.));\\n        // Surely there's a more linear-algebra-y way to do this than converting all the rotations to an angle.\\n        vec2 center_east = normalize((inverse(map_stretch_matrix) * (center_pos_ihat - center_pos)).xy);\\n        float globe_rotation = atan(center_east.x, center_east.y) - 3.141592654 / 2.0;\\n        mat4 rotation_matrix = rotationZMatrix(-globe_rotation);\\n\\n        offset = map_stretch_matrix * rotation_matrix * vec4(offset_ext, 0., 0.);\\n\\n#ifdef OFFSET\\n        mat4 offset_matrix = scalingMatrix(1., u_map_width / u_map_height, 1.);\\n        if (u_offset_rotates_with_map == 1) {\\n            offset_matrix = offset_matrix * rotation_matrix;\\n        }\\n        else {\\n            offset = map_stretch_matrix * vec4(offset_ext, 0., 0.);\\n        }\\n\\n        vec2 offset_offset = u_offset_scale * a_offset;\\n        offset += offset_matrix * vec4(offset_offset, 0., 0.);\\n#endif\\n\\n#ifdef ZOOM\\n    }\\n#endif\\n\\n    gl_Position = center_pos + offset;\\n\\n#ifdef DATA\\n    v_data = a_data;\\n#endif\\n}\"","module.exports = \"#version 300 es\\n\\nuniform int u_offset;\\nuniform highp float u_map_width;\\nuniform highp float u_map_height;\\nuniform highp float u_map_zoom;\\nuniform highp float u_font_size;\\n\\nin vec3 a_pos;\\nin vec2 a_offset;\\nin vec2 a_tex_coord;\\n\\nout highp vec2 v_tex_coord;\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nvoid main() {\\n    float min_zoom = a_pos.z;\\n\\n    vec2 offset = a_offset;\\n    if (u_map_zoom < min_zoom)\\n        offset = vec2(0., 0.);\\n\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\\n\\n    gl_Position = projectTile(a_pos.xy + globe_offset) + u_font_size / 12. * 1.5 * map_stretch_matrix * vec4(offset, 0., 0.);\\n    v_tex_coord = a_tex_coord;\\n}\"","module.exports = \"#version 300 es\\n\\nuniform sampler2D u_dash_sampler;\\n\\n#ifndef DATA\\nuniform lowp vec4 u_color;\\n#endif\\n\\nuniform lowp float u_line_width;\\nuniform lowp float u_zoom;\\nuniform int u_dash_pattern_length;\\n\\n#ifdef DATA\\nin highp float v_data;\\n#endif\\n\\nin highp float v_dist;\\nin lowp float v_cross;\\n\\nout highp vec4 fragColor;\\n\\nvoid main() {\\n    lowp float dash_x = fract(v_dist * 2e2 * pow(2., floor(u_zoom)) / float(u_dash_pattern_length));\\n    lowp float dash = texture(u_dash_sampler, vec2(dash_x, 0.5)).r;\\n\\n    lowp vec4 color;\\n#ifdef DATA\\n    color = apply_colormap(v_data);\\n#else\\n    color = u_color;\\n#endif\\n\\n    lowp float feather = clamp((1. - abs(v_cross)) * u_line_width, 0., 1.);\\n    color.a *= (dash >= 1. ? 1. : 0.) * feather;\\n\\n    fragColor = color;\\n}\"","module.exports = \"#version 300 es\\n\\nin highp vec2 v_tex_coord;\\nuniform sampler2D u_sdf_sampler;\\nuniform int u_is_halo;\\n\\nuniform lowp vec4 u_text_color;\\nuniform lowp vec4 u_halo_color;\\n\\n#define SDF_FILL 0.75\\n#define SDF_HALO 0.45\\n\\nout highp vec4 fragColor;\\n\\nvoid main() {\\n    highp float sdf_val = texture(u_sdf_sampler, v_tex_coord).r;\\n\\n    lowp float step_width = 0.08;\\n    lowp float alpha = smoothstep(SDF_FILL - step_width, SDF_FILL + step_width, sdf_val);\\n\\n    lowp vec4 color = u_is_halo == 1 ? u_halo_color : u_text_color;\\n\\n    if (u_is_halo == 1) {\\n        alpha = min(smoothstep(SDF_HALO - step_width, SDF_HALO + step_width, sdf_val), 1.0 - alpha);\\n    }\\n\\n    color.a *= alpha;\\n    fragColor = color;\\n}\"","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".autumnplot-gl.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","/**\r\n * Copyright 2019 Google Inc. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst proxyMarker = Symbol(\"Comlink.proxy\");\r\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\r\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\r\nconst throwMarker = Symbol(\"Comlink.thrown\");\r\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\r\n/**\r\n * Internal transfer handle to handle objects marked to proxy.\r\n */\r\nconst proxyTransferHandler = {\r\n    canHandle: (val) => isObject(val) && val[proxyMarker],\r\n    serialize(obj) {\r\n        const { port1, port2 } = new MessageChannel();\r\n        expose(obj, port1);\r\n        return [port2, [port2]];\r\n    },\r\n    deserialize(port) {\r\n        port.start();\r\n        return wrap(port);\r\n    },\r\n};\r\n/**\r\n * Internal transfer handler to handle thrown exceptions.\r\n */\r\nconst throwTransferHandler = {\r\n    canHandle: (value) => isObject(value) && throwMarker in value,\r\n    serialize({ value }) {\r\n        let serialized;\r\n        if (value instanceof Error) {\r\n            serialized = {\r\n                isError: true,\r\n                value: {\r\n                    message: value.message,\r\n                    name: value.name,\r\n                    stack: value.stack,\r\n                },\r\n            };\r\n        }\r\n        else {\r\n            serialized = { isError: false, value };\r\n        }\r\n        return [serialized, []];\r\n    },\r\n    deserialize(serialized) {\r\n        if (serialized.isError) {\r\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\r\n        }\r\n        throw serialized.value;\r\n    },\r\n};\r\n/**\r\n * Allows customizing the serialization of certain values.\r\n */\r\nconst transferHandlers = new Map([\r\n    [\"proxy\", proxyTransferHandler],\r\n    [\"throw\", throwTransferHandler],\r\n]);\r\nfunction expose(obj, ep = self) {\r\n    ep.addEventListener(\"message\", function callback(ev) {\r\n        if (!ev || !ev.data) {\r\n            return;\r\n        }\r\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\r\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\r\n        let returnValue;\r\n        try {\r\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\r\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\r\n            switch (type) {\r\n                case \"GET\" /* GET */:\r\n                    {\r\n                        returnValue = rawValue;\r\n                    }\r\n                    break;\r\n                case \"SET\" /* SET */:\r\n                    {\r\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\r\n                        returnValue = true;\r\n                    }\r\n                    break;\r\n                case \"APPLY\" /* APPLY */:\r\n                    {\r\n                        returnValue = rawValue.apply(parent, argumentList);\r\n                    }\r\n                    break;\r\n                case \"CONSTRUCT\" /* CONSTRUCT */:\r\n                    {\r\n                        const value = new rawValue(...argumentList);\r\n                        returnValue = proxy(value);\r\n                    }\r\n                    break;\r\n                case \"ENDPOINT\" /* ENDPOINT */:\r\n                    {\r\n                        const { port1, port2 } = new MessageChannel();\r\n                        expose(obj, port2);\r\n                        returnValue = transfer(port1, [port1]);\r\n                    }\r\n                    break;\r\n                case \"RELEASE\" /* RELEASE */:\r\n                    {\r\n                        returnValue = undefined;\r\n                    }\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        catch (value) {\r\n            returnValue = { value, [throwMarker]: 0 };\r\n        }\r\n        Promise.resolve(returnValue)\r\n            .catch((value) => {\r\n            return { value, [throwMarker]: 0 };\r\n        })\r\n            .then((returnValue) => {\r\n            const [wireValue, transferables] = toWireValue(returnValue);\r\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\r\n            if (type === \"RELEASE\" /* RELEASE */) {\r\n                // detach and deactive after sending release response above.\r\n                ep.removeEventListener(\"message\", callback);\r\n                closeEndPoint(ep);\r\n            }\r\n        });\r\n    });\r\n    if (ep.start) {\r\n        ep.start();\r\n    }\r\n}\r\nfunction isMessagePort(endpoint) {\r\n    return endpoint.constructor.name === \"MessagePort\";\r\n}\r\nfunction closeEndPoint(endpoint) {\r\n    if (isMessagePort(endpoint))\r\n        endpoint.close();\r\n}\r\nfunction wrap(ep, target) {\r\n    return createProxy(ep, [], target);\r\n}\r\nfunction throwIfProxyReleased(isReleased) {\r\n    if (isReleased) {\r\n        throw new Error(\"Proxy has been released and is not useable\");\r\n    }\r\n}\r\nfunction createProxy(ep, path = [], target = function () { }) {\r\n    let isProxyReleased = false;\r\n    const proxy = new Proxy(target, {\r\n        get(_target, prop) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            if (prop === releaseProxy) {\r\n                return () => {\r\n                    return requestResponseMessage(ep, {\r\n                        type: \"RELEASE\" /* RELEASE */,\r\n                        path: path.map((p) => p.toString()),\r\n                    }).then(() => {\r\n                        closeEndPoint(ep);\r\n                        isProxyReleased = true;\r\n                    });\r\n                };\r\n            }\r\n            if (prop === \"then\") {\r\n                if (path.length === 0) {\r\n                    return { then: () => proxy };\r\n                }\r\n                const r = requestResponseMessage(ep, {\r\n                    type: \"GET\" /* GET */,\r\n                    path: path.map((p) => p.toString()),\r\n                }).then(fromWireValue);\r\n                return r.then.bind(r);\r\n            }\r\n            return createProxy(ep, [...path, prop]);\r\n        },\r\n        set(_target, prop, rawValue) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\r\n            // boolean. To show good will, we return true asynchronously \\_()_/\r\n            const [value, transferables] = toWireValue(rawValue);\r\n            return requestResponseMessage(ep, {\r\n                type: \"SET\" /* SET */,\r\n                path: [...path, prop].map((p) => p.toString()),\r\n                value,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        apply(_target, _thisArg, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const last = path[path.length - 1];\r\n            if (last === createEndpoint) {\r\n                return requestResponseMessage(ep, {\r\n                    type: \"ENDPOINT\" /* ENDPOINT */,\r\n                }).then(fromWireValue);\r\n            }\r\n            // We just pretend that `bind()` didnt happen.\r\n            if (last === \"bind\") {\r\n                return createProxy(ep, path.slice(0, -1));\r\n            }\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"APPLY\" /* APPLY */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        construct(_target, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"CONSTRUCT\" /* CONSTRUCT */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n    });\r\n    return proxy;\r\n}\r\nfunction myFlat(arr) {\r\n    return Array.prototype.concat.apply([], arr);\r\n}\r\nfunction processArguments(argumentList) {\r\n    const processed = argumentList.map(toWireValue);\r\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\r\n}\r\nconst transferCache = new WeakMap();\r\nfunction transfer(obj, transfers) {\r\n    transferCache.set(obj, transfers);\r\n    return obj;\r\n}\r\nfunction proxy(obj) {\r\n    return Object.assign(obj, { [proxyMarker]: true });\r\n}\r\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\r\n    return {\r\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\r\n        addEventListener: context.addEventListener.bind(context),\r\n        removeEventListener: context.removeEventListener.bind(context),\r\n    };\r\n}\r\nfunction toWireValue(value) {\r\n    for (const [name, handler] of transferHandlers) {\r\n        if (handler.canHandle(value)) {\r\n            const [serializedValue, transferables] = handler.serialize(value);\r\n            return [\r\n                {\r\n                    type: \"HANDLER\" /* HANDLER */,\r\n                    name,\r\n                    value: serializedValue,\r\n                },\r\n                transferables,\r\n            ];\r\n        }\r\n    }\r\n    return [\r\n        {\r\n            type: \"RAW\" /* RAW */,\r\n            value,\r\n        },\r\n        transferCache.get(value) || [],\r\n    ];\r\n}\r\nfunction fromWireValue(value) {\r\n    switch (value.type) {\r\n        case \"HANDLER\" /* HANDLER */:\r\n            return transferHandlers.get(value.name).deserialize(value.value);\r\n        case \"RAW\" /* RAW */:\r\n            return value.value;\r\n    }\r\n}\r\nfunction requestResponseMessage(ep, msg, transfers) {\r\n    return new Promise((resolve) => {\r\n        const id = generateUUID();\r\n        ep.addEventListener(\"message\", function l(ev) {\r\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\r\n                return;\r\n            }\r\n            ep.removeEventListener(\"message\", l);\r\n            resolve(ev.data);\r\n        });\r\n        if (ep.start) {\r\n            ep.start();\r\n        }\r\n        ep.postMessage(Object.assign({ id }, msg), transfers);\r\n    });\r\n}\r\nfunction generateUUID() {\r\n    return new Array(4)\r\n        .fill(0)\r\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\r\n        .join(\"-\");\r\n}\n\nexport { createEndpoint, expose, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","import { TypedArray } from \"./AutumnTypes\";\n\nfunction getMinZoom(jlat: number, ilon: number, thin_fac_base: number) {\n    const zoom_base = 1;\n\n    let zoom = zoom_base;\n    let thin_fac = thin_fac_base;\n\n    while (((jlat % thin_fac) != 0) || ((ilon % thin_fac) != 0)) {\n        zoom += 1;\n        thin_fac /= 2;\n    }\n\n    return zoom;\n}\n\nfunction* zip(...args: any[]) {\n\tconst iterators = args.map(x => x[Symbol.iterator]());\n\twhile (true) {\n\t\tconst current = iterators.map(x => x.next());\n\t\tif (current.some(x => x.done)) {\n\t\t\tbreak;\n\t\t}\n\t\tyield current.map(x => x.value);\n\t}\n}\n\nfunction getOS() {\n    const userAgent = window.navigator.userAgent,\n        platform = window.navigator.platform,\n        macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],\n        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],\n        iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n    let os = null;\n\n    if (macosPlatforms.indexOf(platform) !== -1 && navigator.maxTouchPoints <= 1) {\n        os = 'Mac OS';\n    } \n    else if (iosPlatforms.indexOf(platform) !== -1 || (macosPlatforms.indexOf(platform) !== -1 && navigator.maxTouchPoints > 1)) { \n        os = 'iOS';\n    } \n    else if (windowsPlatforms.indexOf(platform) !== -1) {\n        os = 'Windows';\n    } \n    else if (/Android/.test(userAgent)) {\n        os = 'Android';\n    } \n    else if (/Linux/.test(platform)) {\n        os = 'Linux';\n    }\n\n    return os;\n}\n\nclass Cache<A extends unknown[], R> {\n    private cached_values: Record<string, R>;\n    private readonly compute_value: (...args: A) => R;\n    private readonly make_key: (...args: A) => string;\n\n    constructor(compute_value: (...args: A) => R, make_key?: (...args: A) => string) {\n        this.cached_values = {};\n        this.compute_value = compute_value;\n        this.make_key = make_key === undefined ? (...args: A) => JSON.stringify(args) : make_key;\n    }\n\n    public getValue(...args: A) {\n        const key = this.make_key(...args);\n\n        if (!(key in this.cached_values)) {\n            this.cached_values[key] = this.compute_value(...args);\n        }\n\n        return this.cached_values[key];\n    }\n}\n\n\nfunction normalizeOptions<Type extends Record<string, any>>(opts: Type | undefined, defaults: Required<Type>) {\n    const ret = {...defaults} as Required<Type>;\n\n    if (opts !== undefined) {\n        Object.entries(opts).forEach(([k, v]: [keyof Type, any]) => {\n            ret[k] = v;\n        });\n    }\n\n    return ret;\n}\n\nfunction getArrayConstructor<ArrayType extends TypedArray>(ary: ArrayType) : new(...args: any[]) => ArrayType {\n    return ary.constructor as new(...args: any[]) => ArrayType;\n}\n\nfunction mergeShaderCode(snippet: string, main: string) {\n    const ES3_SHADER_MAGIC = '#version 300 es\\n';\n    const is_es3_shader = main.startsWith(ES3_SHADER_MAGIC);\n\n    if (is_es3_shader) {\n        return ES3_SHADER_MAGIC + snippet + \"\\n\" + main.slice(ES3_SHADER_MAGIC.length);\n    }\n    \n    return snippet + \"\\n\" + main;\n}\n\nexport {zip, getMinZoom, getOS, Cache, normalizeOptions, getArrayConstructor, mergeShaderCode};\n","\nimport { Float16Array } from \"@petamoriken/float16\";\n\n/** A wind profile with a storm-motion for plotting storm-relative hodographs */\ninterface StormRelativeWindProfile {\n    /** The grid index in the j direction (ignored for unstructured grids) */\n    jlat: number;\n\n    /** The grid index in the i direction */\n    ilon: number;\n\n    /** u component of storm motion in kts */\n    smu: number;\n\n    /** v component of storm motion in kts */\n    smv: number;\n\n    /** Ground-relative u winds in kts (will be converted to storm-relative during plotting) */\n    u: Float32Array;\n\n    /** Ground-relative v winds in kts (will be converted to storm-relative during plotting) */\n    v: Float32Array;\n\n    /** Height of each data point in km */\n    z: Float32Array\n}\n\n/** A wind profile without a storm motion for plotting ground-relative hodographs */\ninterface GroundRelativeWindProfile {\n    /** The grid index in the j direction (ignored for unstructured grids) */\n    jlat: number;\n\n    /** The grid index in the i direction */\n    ilon: number;\n\n    /** Ground-relative u winds in kts */\n    u: Float32Array;\n\n    /** Ground-relative v winds in kts */\n    v: Float32Array;\n\n    /** Height of each data point in km */\n    z: Float32Array\n}\n\n/** Different types of wind profiles for {@link Hodographs} components */\ntype WindProfile = StormRelativeWindProfile | GroundRelativeWindProfile;\n\nfunction isStormRelativeWindProfile(obj: any) : obj is StormRelativeWindProfile {\n    return 'smu' in obj && 'smv' in obj;\n}\n\ninterface BillboardSpec {\n    BB_WIDTH: number;\n    BB_HEIGHT: number;\n    BB_TEX_WIDTH: number;\n    BB_TEX_HEIGHT: number;\n    BB_MAG_BIN_SIZE: number;\n    BB_MAG_WRAP: number;\n    BB_MAG_MAX: number;\n}\n\ntype LineData = {\n    vertices: [number, number][];\n    offsets?: [number, number][];\n    data?: number[];\n    zoom?: number;\n}\n\ntype Polyline = {\n    extrusion: Float32Array;\n    vertices: Float32Array;\n    offsets?: Float32Array;\n    data?: Float32Array;\n    zoom?: Float32Array;\n};\n\n/** WebGL rendering contexts (either WebGL1 or WebGL2) */\ntype WebGLAnyRenderingContext = WebGLRenderingContext | WebGL2RenderingContext;\n\nfunction isWebGL2Ctx(gl: WebGLAnyRenderingContext) : gl is WebGL2RenderingContext {\n    return gl.getParameter(gl.VERSION).includes('WebGL 2.0');\n}\n\n/** Javascript typed arrays for use in raw fields */\ntype TypedArray = Float16Array | Float32Array | Uint8Array;\ntype TypedArrayStr = 'float16' | 'float32' | 'uint8'\n\n/** \n * The result of contouring a field\n *\n * Each property is a different contour level giving an array of contours, and each contour is an array of [longitude, latitude].\n */\ntype ContourData = Record<number, [number, number][][]>;\n\ntype mat4 = number[] | Float32Array | Float64Array;\ntype RenderShaderData = {vertexShaderPrelude: string, define: string, variantName: string};\n\ntype MapLibreRendererDataProjection = {\n    clippingPlane: [number, number, number, number];\n    fallbackMatrix: mat4;\n    mainMatrix: mat4;\n    projectionTransition: number;\n    tileMercatorCoords: [number, number, number, number];\n};\ntype MapLibreRendererDataShader = RenderShaderData;\n\ntype MapLibreRendererData = {\n    defaultProjectionData: MapLibreRendererDataProjection;\n    farZ: number\n    fov: number\n    modelViewProjectionMatrix: mat4;\n    nearZ: number\n    projectionMatrix: mat4;\n    shaderData: MapLibreRendererDataShader;\n};\n\ntype RenderMethodArg = mat4 | MapLibreRendererData;\n\nfunction isMapLibreRenderArg(obj: any) : obj is MapLibreRendererData {\n    return 'modelViewProjectionMatrix' in obj && 'defaultProjectionData' in obj && 'mainMatrix' in obj.defaultProjectionData;\n}\n\ntype RendererDataProjection = {\n    clippingPlane: number[];\n    fallbackMatrix: number[];\n    mainMatrix: number[];\n    projectionTransition: number;\n    tileMercatorCoords: number[];\n};\ntype RendererDataShader = RenderShaderData;\n\ntype RendererDataMapLibre = {\n    type: 'maplibre';\n    defaultProjectionData: RendererDataProjection;\n    farZ: number\n    fov: number\n    modelViewProjectionMatrix: number[];\n    nearZ: number\n    projectionMatrix: number[];\n    shaderData: RendererDataShader;\n};\n\ntype RendererDataAutumn = {\n    type: 'autumn';\n    mainMatrix: number[];\n    shaderData: null;\n}\n\ntype RendererData = RendererDataMapLibre | RendererDataAutumn;\n\nfunction getRendererData(arg: RenderMethodArg) : RendererData{\n    if (isMapLibreRenderArg(arg)) {\n        return {\n            type: 'maplibre',\n            defaultProjectionData: {\n                clippingPlane: [...arg.defaultProjectionData.clippingPlane],\n                fallbackMatrix: [...arg.defaultProjectionData.fallbackMatrix],\n                mainMatrix: [...arg.defaultProjectionData.mainMatrix],\n                projectionTransition: arg.defaultProjectionData.projectionTransition,\n                tileMercatorCoords: [...arg.defaultProjectionData.tileMercatorCoords]\n            },\n            farZ: arg.farZ,\n            fov: arg.fov,\n            modelViewProjectionMatrix: [...arg.modelViewProjectionMatrix],\n            nearZ: arg.nearZ,\n            projectionMatrix: [...arg.projectionMatrix],\n            shaderData: arg.shaderData\n        };\n    }\n\n    return {type: 'autumn', mainMatrix: [...arg], shaderData: null};\n}\n\nexport {isWebGL2Ctx, getRendererData, isStormRelativeWindProfile};\nexport type {WindProfile, StormRelativeWindProfile, GroundRelativeWindProfile, BillboardSpec, Polyline, LineData, WebGLAnyRenderingContext, \n             TypedArray, TypedArrayStr, ContourData, RenderMethodArg, RendererData, RenderShaderData};","\nimport * as Comlink from 'comlink';\n\nimport { getOS } from \"./utils\";\nimport { PlotLayerWorker } from './PlotLayer.worker';\nimport { MapLikeType } from './Map';\nimport { RenderMethodArg, TypedArrayStr, WebGLAnyRenderingContext, isWebGL2Ctx } from './AutumnTypes';\n\nconst worker = new Worker(new URL('./PlotLayer.worker', import.meta.url));\nconst layer_worker = Comlink.wrap<PlotLayerWorker>(worker);\n\n/** Base class for all plot components */\nabstract class PlotComponent<MapType extends MapLikeType> {\n    public abstract onAdd(map: MapType, gl: WebGLAnyRenderingContext) : Promise<void>;\n    public abstract render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg) : void;\n}\n\nfunction getGLFormatTypeAlignment(gl: WebGLAnyRenderingContext, array_dtype: TypedArrayStr) {\n    let format, type, row_alignment;\n    const is_webgl2 = isWebGL2Ctx(gl);\n\n    if (array_dtype == 'float16') {\n        const ext = gl.getExtension('OES_texture_half_float');\n        const ext_lin = gl.getExtension('OES_texture_half_float_linear');\n\n        if (is_webgl2) {\n            format = gl.R16F;\n            type = gl.HALF_FLOAT;\n        }\n        else {\n            if (ext === null || ext_lin === null)\n                throw \"Float16 data are not supported on this hardware. Try Float32 data instead.\";\n\n            format = gl.LUMINANCE;\n            type = ext.HALF_FLOAT_OES;\n        }\n\n        row_alignment = 2;\n    }\n    else if (array_dtype == 'float32') {\n        const ext = gl.getExtension('OES_texture_float');\n        const ext_lin = gl.getExtension('OES_texture_float_linear');\n\n\t\t// As of 11/3/2023, Safari/WebKit on iOS reports as supporting float textures,\n\t\t// but really doesn't. It just silently fails. In WebGL 1, Safari/Webkit returns\n\t\t// null for ext_lin here, but in WebGL2, both ext vars are null because they were \n\t\t// merged into the standard. This means that to properly fail for iOS devices using\n\t\t// WebGL2, we have to hard code an OS check... this OS check also works when uers\n\t\t// request desktop-mode websites.\n\t\tif ((!is_webgl2 && ext === null) || (!is_webgl2 && ext_lin === null) || (getOS() === 'iOS')) {\t\n            throw \"Float32 data are not supported on this hardware. Try Float16 data instead.\";\n        }\n\n        format = is_webgl2 ? gl.R32F : gl.LUMINANCE;\n        type = gl.FLOAT;\n        row_alignment = 4;\n    }\n    else {\n        format = is_webgl2 ? gl.R8 : gl.LUMINANCE;\n        type = gl.UNSIGNED_BYTE;\n\n        row_alignment = 1;\n    }\n\n    return {format: format, type: type, row_alignment: row_alignment};\n}\n\nexport { PlotComponent, layer_worker, getGLFormatTypeAlignment };\n","\n\n// Stub in required method and property types for the mapping library. God help me if these start to diverge between Mapbox and MapLibre.\ntype StyleSpecification = {\n    glyphs?: string;\n}\n\n/** Type with the required methods for mapping libraries */\ntype MapLikeType = {\n    triggerRepaint: () => void;\n    getCanvas: () => HTMLCanvasElement;\n    getStyle: () => StyleSpecification;\n\n    getZoom: () => number;\n    getMaxZoom: () => number;\n    getBearing: () => number;\n    getPitch: () => number;\n};\n\ninterface LambertConformalConicParameters {\n    lon_0: number,\n    lat_0: number,\n    lat_std: [number, number] | number;\n    a: number;\n    b: number;\n}\n\nfunction lambertConformalConic(params: LambertConformalConicParameters) {\n    // Formulas from https://pubs.usgs.gov/pp/1395/report.pdf\n\n    const compute_t = (lat: number) => {\n        const sin_lat = Math.sin(lat);\n        return Math.tan(Math.PI / 4 - lat / 2) * Math.pow((1 + eccen * sin_lat) / (1 - eccen * sin_lat), eccen / 2);\n    };\n    const compute_m = (lat: number) => {\n        const sin_lat = Math.sin(lat);\n        return Math.cos(lat) / Math.sqrt(1 - eccen * eccen * sin_lat * sin_lat);\n    }\n\n    // WGS 84 spheroid\n    const semimajor = params.a;\n    const semiminor = params.b;\n    const eccen = Math.sqrt(1 - (semiminor * semiminor) / (semimajor * semimajor));\n    const radians = Math.PI / 180;\n\n    let {lon_0, lat_0, lat_std} = params;\n    lat_std = Array.isArray(lat_std) && lat_std[0] == lat_std[1] ? lat_std[0] : lat_std;\n\n    lon_0 *= radians;\n    lat_0 *= radians;\n\n    let F: number, n: number;\n    const t_0 = compute_t(lat_0);\n\n    if (Array.isArray(lat_std)) {\n        let [lat_1, lat_2] = lat_std;\n        lat_1 *= radians;\n        lat_2 *= radians;\n\n        const t_1 = compute_t(lat_1);\n        const t_2 = compute_t(lat_2);\n        const m_1 = compute_m(lat_1);\n        const m_2 = compute_m(lat_2);\n\n        n = Math.log(m_1 / m_2) / Math.log(t_1 / t_2);\n        F = m_1 / (n * Math.pow(t_1, n));\n    }\n    else {\n        let lat_1 = lat_std;\n        lat_1 *= radians;\n\n        const t_1 = compute_t(lat_1);\n        const m_1 = compute_m(lat_1);\n        n = Math.sin(lat_1);\n        F = m_1 / (n * Math.pow(t_1, n));\n    }\n\n    const rho_0 = semimajor * F * Math.pow(t_0, n);\n\n    const compute_lcc = (lon: number, lat: number) : [number, number] => {\n        lon *= radians;\n        lat *= radians;\n\n        const t = compute_t(lat);\n        const rho = semimajor * F * Math.pow(t, n);\n        const theta = n * (lon - lon_0);\n        const x = rho * Math.sin(theta);\n        const y = rho_0 - rho * Math.cos(theta);\n\n        return [x, y];\n    }\n\n    const eccen2 = eccen * eccen;\n    const eccen4 = eccen2 * eccen2;\n    const eccen6 = eccen4 * eccen2;\n    const eccen8 = eccen6 * eccen2;\n\n/*\n    const A = eccen2 / 2 + 5 * eccen4 / 24 + eccen6 / 12 + 13 * eccen8 / 360;\n    const B = 7 * eccen4 / 48 + 29 * eccen6 / 240 + 811 * eccen8 / 11520;\n    const C = 7 * eccen6 / 120 + 81 * eccen8 / 1120;\n    const D = 4279 * eccen8 / 161280;\n    const Ap = A - C;\n    const Bp = 2 * B - 4 * D;\n    const Cp = 4 * C;\n    const Dp = 8 * D;\n*/\n\n    const Ap = eccen2 / 2 + 5 * eccen4 / 24 + 3 * eccen6 / 120 - 73 * eccen8 / 2016;\n    const Bp = 7 * eccen4 / 24 + 29 * eccen6 / 120 + 233 * eccen8 / 6720;\n    const Cp = 7 * eccen6 / 30 + 81 * eccen8 / 280;\n    const Dp = 4729 * eccen8 / 20160;\n\n    const compute_lcc_inverse = (x: number, y: number) : [number, number] => {\n        const theta = Math.atan2(x, rho_0 - y); // These arguments are backwards from what I'd expect ...\n        const lon = theta / n + lon_0;\n        const rho = Math.hypot(x, rho_0 - y) * Math.sign(n);\n        const t = Math.pow(rho / (semimajor * F), 1 / n);\n\n        const chi = Math.PI / 2 - 2 * Math.atan(t);\n        const sin_2chi = Math.sin(2 * chi);\n        const cos_2chi = Math.cos(2 * chi);\n\n        const lat = chi + sin_2chi * (Ap + cos_2chi * (Bp + cos_2chi * (Cp + Dp * cos_2chi)));\n\n        return [lon / radians, lat / radians];\n    }\n\n    return (a: number, b: number, opts?: {inverse: boolean}) : [number, number] => {\n        opts = opts === undefined ? {inverse: false} : opts;\n        return opts.inverse ? compute_lcc_inverse(a, b) : compute_lcc(a, b);\n    }\n}\n\ninterface RotateSphereParams {\n    np_lon: number,\n    np_lat: number,\n    lon_shift: number,\n}\n\nfunction rotateSphere(params: RotateSphereParams) {\n    const radians = Math.PI / 180;\n    const np_lat = params.np_lat * radians;\n    const np_lon = params.np_lon * radians;\n    const lon_shift = params.lon_shift * radians;\n\n    const sin_np_lat = Math.sin(np_lat);\n    const cos_np_lat = Math.cos(np_lat);\n\n    const compute_rotation = (lon: number, lat: number) : [number, number] => {\n        lon *= radians;\n        lat *= radians;\n\n        const sin_lat = Math.sin(lat);\n        const cos_lat = Math.cos(lat);\n        const sin_lon_diff = Math.sin(lon - lon_shift);\n        const cos_lon_diff = Math.cos(lon - lon_shift);\n\n        const lat_p = Math.asin(sin_np_lat * sin_lat - cos_np_lat * cos_lat * cos_lon_diff);\n        let lon_p = np_lon + Math.atan2((cos_lat * sin_lon_diff), (sin_np_lat * cos_lat * cos_lon_diff + cos_np_lat * sin_lat));\n\n        if (lon_p > Math.PI) lon_p -= 2 * Math.PI;\n\n        return [lon_p / radians, lat_p / radians];\n    }\n\n    const compute_rotation_inverse = (lon_p: number, lat_p: number) : [number, number] => {\n        lon_p *= radians;\n        lat_p *= radians;\n\n        const sin_lat_p = Math.sin(lat_p);\n        const cos_lat_p = Math.cos(lat_p);\n        const sin_lon_p_diff = Math.sin(lon_p - np_lon);\n        const cos_lon_p_diff = Math.cos(lon_p - np_lon);\n\n        const lat = Math.asin(sin_np_lat * sin_lat_p + cos_np_lat * cos_lat_p * cos_lon_p_diff);\n        let lon = lon_shift + Math.atan2((cos_lat_p * sin_lon_p_diff), (sin_np_lat * cos_lat_p * cos_lon_p_diff - cos_np_lat * sin_lat_p));\n\n        if (lon_p > Math.PI) lon_p -= 2 * Math.PI;\n\n        return [lon / radians, lat / radians];\n    }\n\n    return (a: number, b: number, opts?: {inverse: boolean}) => {\n        opts = opts === undefined ? {inverse: false} : opts;\n        return opts.inverse ? compute_rotation_inverse(a, b) : compute_rotation(a, b);\n    }\n}\n\ninterface VerticalPerspectiveParams {\n    lat_0: number,\n    lon_0: number,\n    alt: number,\n    a: number,\n    b: number,\n}\n\nfunction verticalPerspective(params: VerticalPerspectiveParams) {\n    // WGS 84 spheroid\n    const semimajor = params.a;\n    const semiminor = params.b;\n    const eccen = Math.sqrt(1 - (semiminor * semiminor) / (semimajor * semimajor));\n    const radians = Math.PI / 180;\n\n    let {lat_0, lon_0, alt} = params;\n    const alt_0 = 0;\n    const alt_00 = 0;\n    const eccen2 = eccen * eccen;\n\n    lat_0 *= radians;\n    lon_0 *= radians;\n\n    const sin_lat_0 = Math.sin(lat_0);\n    const cos_lat_0 = Math.cos(lat_0);\n\n    const N1 = semimajor / Math.sqrt(1 - (eccen * sin_lat_0) ** 2);\n    let lat_g = lat_0, P = 0;\n\n    for (let i = 0; i < 2; i++) {\n        P = Math.cos(lat_0) / Math.cos(lat_g) * (alt + N1 + alt_00) / semimajor;\n        lat_g = lat_0 - Math.asin(N1 * eccen * eccen * sin_lat_0 * cos_lat_0 / (P * semimajor));\n    }\n\n    const compute_perspective = (lon: number, lat: number) : [number, number] => {\n        lon *= radians;\n        lat *= radians;\n\n        const sin_lat = Math.sin(lat);\n        const cos_lat = Math.cos(lat);\n\n        const N = semimajor / Math.sqrt(1 - (eccen * sin_lat) ** 2);\n        const C = (N + alt_0) / semimajor * cos_lat;\n        const S = ((N * (1 - eccen * eccen) + alt_0) / semimajor) * sin_lat;\n        const K = alt / (P * Math.cos(lat_0 - lat_g) - S * sin_lat_0 - C * cos_lat_0 * Math.cos(lon - lon_0));\n        const x = K * C * Math.sin(lon - lon_0);\n        const y = K * (P * Math.sin(lat_0 - lat_g) + S * cos_lat_0 - C * sin_lat_0 * Math.cos(lon - lon_0));\n\n        return [x, y];\n    }\n\n    const B = P * Math.cos(lat_0 - lat_g);\n    const D = P * Math.sin(lat_0 - lat_g);\n    const L = 1 - eccen2 * cos_lat_0 * cos_lat_0;\n    const G = 1 - eccen2 * sin_lat_0 * sin_lat_0;\n    const J = 2 * eccen2 * sin_lat_0 * cos_lat_0;\n    const E = 1; // If alt_0 = 0, set E = 1\n    const t = P * P * (1 - (eccen * Math.cos(lat_g)) ** 2) - E * (1 - eccen2);\n\n    const compute_perspective_inverse = (x: number, y: number) : [number, number] => {\n        const u = -2 * B * L * alt - 2 * D * G * y + B * J * y + D * J * alt;\n        const v = L * alt * alt + G * y * y - alt * J * y + (1 - eccen2) * x * x;\n        const K_prime = (-u + Math.sqrt(u * u - 4 * t * v)) / (2 * t);\n        const X = semimajor * ((B - alt / K_prime) * cos_lat_0 - (y / K_prime - D) * sin_lat_0);\n        const Y = semimajor * x / K_prime;\n        const S = (y / K_prime - D) * cos_lat_0 + (B - alt / K_prime) * sin_lat_0;\n        const lon = lon_0 + Math.atan2(Y, X);\n        const lat = Math.atan2(S, Math.sqrt((1 - eccen2) * (1 - eccen2 - S * S)));\n\n        return [lon / radians, lat / radians];\n    }\n\n    return (a: number, b: number, opts?: {inverse: boolean}) => {\n        opts = opts === undefined ? {inverse: false} : opts;\n        return opts.inverse ? compute_perspective_inverse(a, b) : compute_perspective(a, b);\n    }\n}\n\nfunction mercatorXfromLng(lng: number) {\n    return (180 + lng) / 360;\n}\n\nfunction lngFromMercatorX(x: number) {\n    return 360 * x - 180;\n}\n\nfunction mercatorYfromLat(lat: number) {\n    const sin_lat = Math.sin(lat * Math.PI / 180);\n    const y = (180 - (90 / Math.PI * Math.log((1 + sin_lat) / (1 - sin_lat)))) / 360;\n    return Math.min(1.5, Math.max(-0.5, y));\n}\n\nfunction latFromMercatorY(y: number) {\n    return Math.atan(Math.sinh((180 - y * 360) * Math.PI / 180)) * 180 / Math.PI;\n}\n\n/**\n * A `LngLat` object represents a given longitude and latitude coordinate, measured in degrees.\n * These coordinates are based on the [WGS84 (EPSG:4326) standard](https://en.wikipedia.org/wiki/World_Geodetic_System#WGS84).\n *\n * MapLibre GL uses longitude, latitude coordinate order (as opposed to latitude, longitude) to match the\n * [GeoJSON specification](https://tools.ietf.org/html/rfc7946).\n *\n * @param {number} lng Longitude, measured in degrees.\n * @param {number} lat Latitude, measured in degrees.\n * @example\n * var ll = new LngLat(-123.9749, 40.7736);\n * ll.lng; // = -123.9749\n */\n class LngLat {\n    public lng: number;\n    public lat: number;\n\n    constructor(lng: number, lat: number) {\n        if (isNaN(lng) || isNaN(lat)) {\n            throw new Error(`Invalid LngLat object: (${lng}, ${lat})`);\n        }\n        this.lng = +lng;\n        this.lat = +lat;\n        if (this.lat > 90 || this.lat < -90) {\n            throw new Error('Invalid LngLat latitude value: must be between -90 and 90');\n        }\n    }\n\n    public toMercatorCoord() {\n        return {x: mercatorXfromLng(this.lng), y: mercatorYfromLat(this.lat)};\n    }\n\n    public static fromMercatorCoord(x: number, y: number) {\n        return new LngLat(lngFromMercatorX(x), latFromMercatorY(y));\n    }\n}\n\nexport {LngLat, lambertConformalConic, rotateSphere, verticalPerspective};\nexport type {MapLikeType};","function isWebGL2Ctx(gl) {\n    return gl.getParameter(gl.VERSION).includes('WebGL 2.0');\n}\nexport { isWebGL2Ctx };\n","/**\n * @module wgl/WebGLBuffer\n * Module containing a helper class for WebGL data buffers\n */\nconst getGLDtype = (gl, ary) => {\n    const DTYPES = {\n        'Float32Array': gl.FLOAT,\n        'Uint8Array': gl.UNSIGNED_BYTE,\n        'Uint16Array': gl.UNSIGNED_SHORT,\n        'Uint32Array': gl.UNSIGNED_INT,\n    };\n    return DTYPES[ary.constructor.name];\n};\nimport { isWebGL2Ctx } from \"./utils\";\nclass WGLBufferBase {\n    constructor(gl, verts, n_coords_per_vert, draw_mode, bind_target) {\n        this.gl = gl;\n        this.n_coords_per_vert = n_coords_per_vert;\n        this.dtype = getGLDtype(gl, verts);\n        this.n_verts = verts.length / n_coords_per_vert;\n        this.draw_mode = draw_mode;\n        const buffer = gl.createBuffer();\n        if (buffer === null) {\n            throw \"Could not create WebGL buffer\";\n        }\n        this.buffer = buffer;\n        gl.bindBuffer(bind_target, this.buffer);\n        gl.bufferData(bind_target, verts, gl.STATIC_DRAW);\n    }\n}\n/** A class representing a WebGL data buffer */\nclass WGLBuffer extends WGLBufferBase {\n    /**\n     * Create a WebGL buffer and put some data in it\n     * @param gl                 - The WebGL rendering context\n     * @param verts              - The vertex data to use for this buffer\n     * @param n_coords_per_vert  - The number of coordinates for each vertex in the data buffer\n     * @param draw_mode          - The draw mode to use for this buffer. Should be one of gl.TRIANGLE_STRIP, etc.\n     */\n    constructor(gl, verts, n_coords_per_vert, draw_mode, opts) {\n        super(gl, verts, n_coords_per_vert, draw_mode, gl.ARRAY_BUFFER);\n        opts = opts === undefined ? {} : opts;\n        this.is_per_instance = opts.per_instance === undefined ? false : opts.per_instance;\n        // Cache which version of the function to use, avoiding running gl.getParameter in the render loop\n        if (isWebGL2Ctx(this.gl)) {\n            this.vadFunc = this.gl.vertexAttribDivisor.bind(this.gl);\n        }\n        else {\n            const ext = this.gl.getExtension(\"ANGLE_instanced_arrays\");\n            this.vadFunc = ext.vertexAttribDivisorANGLE.bind(ext);\n        }\n    }\n    /**\n     * Bind this buffer to a location in a shader program\n     * @internal\n     * @param prog_attr_location - The location of the variable in the shader program (returned from gl.getAttribLocation())\n     */\n    bindToProgram(prog_attr_location) {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);\n        this.gl.enableVertexAttribArray(prog_attr_location);\n        this.gl.vertexAttribPointer(prog_attr_location, this.n_coords_per_vert, this.dtype, false, 0, 0);\n        const instance_skip = this.is_per_instance ? 1 : 0;\n        this.vadFunc(prog_attr_location, instance_skip);\n    }\n}\n/** A class representing a WebGL data buffer for array indices */\nclass WGLIndexBuffer extends WGLBufferBase {\n    /**\n     *\n     * @param gl         - The WebGL rendering context\n     * @param indices    - The index data\n     * @param draw_mode  - The draw mode to use for this buffer. Should be one of gl.TRIANGLE_STRIP, etc.\n     */\n    constructor(gl, indices, draw_mode) {\n        super(gl, indices, 1, draw_mode, gl.ELEMENT_ARRAY_BUFFER);\n    }\n    /**\n     * Bind this buffer to the ELEMENT_ARRAY_BUFFER target\n     * @internal\n     */\n    bind() {\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n    }\n}\nexport { WGLBuffer, WGLIndexBuffer };\n","/**\n * @module wgl/WebGLTexture\n * A module containing a helper class for WebGL textures\n */\nimport { isWebGL2Ctx } from \"./utils\";\nfunction isRawImageTextureSpec(obj) {\n    return 'width' in obj && 'height' in obj;\n}\nfunction getWebGL2Format(gl, internal_format, data_type) {\n    switch (data_type) {\n        case (gl.UNSIGNED_BYTE):\n            switch (internal_format) {\n                case (gl.RGBA8): return gl.RGBA;\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGBA4): return gl.RGBA;\n                case (gl.SRGB8_ALPHA8): return gl.RGBA;\n                case (gl.RGBA8UI): return gl.RGBA_INTEGER;\n                case (gl.RGB8): return gl.RGB;\n                case (gl.RGB565): return gl.RGB;\n                case (gl.SRGB8): return gl.RGB;\n                case (gl.RGB8UI): return gl.RGB_INTEGER;\n                case (gl.RG8): return gl.RG;\n                case (gl.RG8UI): return gl.RG_INTEGER;\n                case (gl.R8): return gl.RED;\n                case (gl.R8UI): return gl.RED_INTEGER;\n                case (gl.RGBA): return gl.RGBA;\n                case (gl.RGB): return gl.RGB;\n                case (gl.LUMINANCE_ALPHA): return gl.LUMINANCE_ALPHA;\n                case (gl.LUMINANCE): return gl.LUMINANCE;\n                case (gl.ALPHA): return gl.ALPHA;\n            }\n            break;\n        case (gl.BYTE):\n            switch (internal_format) {\n                case (gl.RGBA8_SNORM): return gl.RGBA;\n                case (gl.RGBA8I): return gl.RGBA_INTEGER;\n                case (gl.RGB8_SNORM): return gl.RGB;\n                case (gl.RGB8I): return gl.RGB_INTEGER;\n                case (gl.RG8_SNORM): return gl.RG;\n                case (gl.RG8I): return gl.RG_INTEGER;\n                case (gl.R8_SNORM): return gl.RED;\n                case (gl.R8I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_4_4_4_4):\n            switch (internal_format) {\n                case (gl.RGBA4): return gl.RGBA;\n                case (gl.RGBA): return gl.RGBA;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_5_5_5_1):\n            switch (internal_format) {\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGBA): return gl.RGBA;\n            }\n            break;\n        case (gl.UNSIGNED_INT_2_10_10_10_REV):\n            switch (internal_format) {\n                case (gl.RGB10_A2): return gl.RGBA;\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGB10_A2UI): return gl.RGBA_INTEGER;\n            }\n            break;\n        case (gl.HALF_FLOAT):\n            switch (internal_format) {\n                case (gl.RGBA16F): return gl.RGBA;\n                case (gl.RGB16F): return gl.RGB;\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n                case (gl.RGB9_E5): return gl.RGB;\n                case (gl.RG16F): return gl.RG;\n                case (gl.R16F): return gl.RED;\n            }\n            break;\n        case (gl.FLOAT):\n            switch (internal_format) {\n                case (gl.RGBA32F): return gl.RGBA;\n                case (gl.RGBA16F): return gl.RGBA;\n                case (gl.RGB32F): return gl.RGB;\n                case (gl.RGB16F): return gl.RGB;\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n                case (gl.RGB9_E5): return gl.RGB;\n                case (gl.RG32F): return gl.RG;\n                case (gl.RG16F): return gl.RG;\n                case (gl.R32F): return gl.RED;\n                case (gl.R16F): return gl.RED;\n                case (gl.DEPTH_COMPONENT32F): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT):\n            switch (internal_format) {\n                case (gl.RGBA16UI): return gl.RGBA_INTEGER;\n                case (gl.RGB16UI): return gl.RGB_INTEGER;\n                case (gl.RG16UI): return gl.RG_INTEGER;\n                case (gl.R16UI): return gl.RED_INTEGER;\n                case (gl.DEPTH_COMPONENT16): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.SHORT):\n            switch (internal_format) {\n                case (gl.RGBA16I): return gl.RGBA_INTEGER;\n                case (gl.RGB16I): return gl.RGB_INTEGER;\n                case (gl.RG16I): return gl.RG_INTEGER;\n                case (gl.R16I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_INT):\n            switch (internal_format) {\n                case (gl.RGBA32UI): return gl.RGBA_INTEGER;\n                case (gl.RGB32UI): return gl.RGB_INTEGER;\n                case (gl.RG32UI): return gl.RG_INTEGER;\n                case (gl.R32UI): return gl.RED_INTEGER;\n                case (gl.DEPTH_COMPONENT24): return gl.DEPTH_COMPONENT;\n                case (gl.DEPTH_COMPONENT16): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.INT):\n            switch (internal_format) {\n                case (gl.RGBA32I): return gl.RGBA_INTEGER;\n                case (gl.RGB32I): return gl.RGB_INTEGER;\n                case (gl.RG32I): return gl.RG_INTEGER;\n                case (gl.R32I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_5_6_5):\n            switch (internal_format) {\n                case (gl.RGB565): return gl.RGB;\n                case (gl.RGB): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_10F_11F_11F_REV):\n            switch (internal_format) {\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_5_9_9_9_REV):\n            switch (internal_format) {\n                case (gl.RGB9_E5): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_24_8):\n            switch (internal_format) {\n                case (gl.DEPTH24_STENCIL8): return gl.DEPTH_STENCIL;\n            }\n            break;\n        case (gl.FLOAT_32_UNSIGNED_INT_24_8_REV):\n            switch (internal_format) {\n                case (gl.DEPTH32F_STENCIL8): return gl.DEPTH_STENCIL;\n            }\n            break;\n        default:\n            throw `Unknown format in getWebGL2InternalFormat`;\n    }\n    throw `Invalid combination of internal format and data type`;\n}\n/** Class representing a WebGL texture */\nclass WGLTexture {\n    /**\n     *\n     * @param gl               - The WebGL rendering context\n     * @param image            - The specification for the image\n     * @param image.format     - The format for the image (e.g., which color channels are present?). Should be one of gl.RGBA, gl.RGB, etc.\n     * @param image.type       - The data type for the image. Should be one of gl.FLOAT, gl.UNSIGNED_BYTE, etc.\n     * @param image.width      - The width of the texture\n     * @param image.height     - The height of the texture\n     * @param image.mag_filter - The magnification filter to use for the texture. Should be one of gl.LINEAR, gl.NEAREST, etc.\n     * @param image.image      - The image to use for the texture. Can be null to allocate space without filling it.\n     */\n    constructor(gl, image) {\n        this.gl = gl;\n        const texture = gl.createTexture();\n        if (texture === null) {\n            throw \"Could not create WebGL texture\";\n        }\n        this.texture = texture;\n        this.tex_num = null;\n        this.setImageData(image);\n        const mag_filter = image['mag_filter'] === undefined ? gl.LINEAR : image['mag_filter'];\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, mag_filter);\n    }\n    /**\n     * Set image data in this texture\n     * @param image        - The specification for the image\n     * @param image.format - The format for the image (e.g., which color channels are present?). Should be one of gl.RGBA, gl.RGB, etc.\n     * @param image.type   - The data type for the image. Should be one of gl.FLOAT, gl.UNSIGNED_BYTE, etc.\n     * @param image.width  - The width of the texture\n     * @param image.height - The height of the texture\n     * @param image.image  - The image to use for the texture. Can be null to allocate space without filling it.\n     */\n    setImageData(image) {\n        const gl = this.gl;\n        this.spec = image;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        const format = isWebGL2Ctx(gl) ? getWebGL2Format(gl, image['format'], image['type']) : image['format'];\n        const row_alignment = image['row_alignment'] === undefined ? 4 : image['row_alignment'];\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, row_alignment);\n        if (isRawImageTextureSpec(image)) {\n            gl.texImage2D(gl.TEXTURE_2D, 0, image['format'], image['width'], image['height'], 0, format, image['type'], image['image']);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, 0, image['format'], format, image['type'], image['image']);\n        }\n    }\n    /**\n     * Bind this texture to a location in a shader program\n     * @internal\n     * @param prog_uni_location - The location of the sampler uniform value (returned from gl.getUniform()) in the shader program.\n     * @param gl_tex_num        - The texture number to bind this texture to.\n     */\n    bindToProgram(prog_uni_location, gl_tex_num) {\n        this.activate(gl_tex_num);\n        this.gl.uniform1i(prog_uni_location, gl_tex_num);\n    }\n    /**\n     * Bind this texture to a given texture number\n     * @param gl_tex_num - The texture number to bind this texture to.\n     */\n    activate(gl_tex_num) {\n        this.tex_num = gl_tex_num;\n        this.gl.activeTexture(this.gl.TEXTURE0 + this.tex_num);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);\n    }\n    /**\n     * Unbind this texture from the texture number it was most recently bound to.\n     */\n    deactivate() {\n        if (this.tex_num === null) {\n            return;\n        }\n        this.gl.activeTexture(this.gl.TEXTURE0 + this.tex_num);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n        this.tex_num = null;\n    }\n    /**\n     * Delete this texture.\n     */\n    delete() {\n        this.gl.deleteTexture(this.texture);\n        this.tex_num = null;\n    }\n}\nexport { WGLTexture };\n","import { isWebGL2Ctx } from \"./utils\";\n/**\n * @module wgl/WebGLProgram\n * Module containing a helper class for WebGL programs\n */\nfunction preprocessShader(shader_src, opts) {\n    opts = opts === undefined ? {} : opts;\n    const defines = opts.define === undefined ? [] : [...opts.define];\n    const current_defines = [];\n    const define_truth = {};\n    const processed_shader_src = shader_src.split(\"\\n\").map(line => {\n        const match_define = line.match(/#define\\s+([\\w\\d_]+)/i);\n        if (match_define !== null) {\n            defines.push(match_define[1]);\n        }\n        const match_ifdef = line.match(/#ifdef\\s+([\\w\\d_]+)/i);\n        if (match_ifdef !== null) {\n            current_defines.push(match_ifdef[1]);\n            define_truth[match_ifdef[1]] = true;\n            return \"\";\n        }\n        const match_ifndef = line.match(/#ifndef\\s+([\\w\\d_]+)/i);\n        if (match_ifndef !== null) {\n            current_defines.push(match_ifndef[1]);\n            define_truth[match_ifndef[1]] = false;\n            return \"\";\n        }\n        const match_else = line.match(/#else/i);\n        if (match_else !== null) {\n            const def = current_defines[current_defines.length - 1];\n            define_truth[def] = !define_truth[def];\n            return \"\";\n        }\n        const match_endif = line.match(/#endif/i);\n        if (match_endif !== null) {\n            const def = current_defines.pop();\n            define_truth[def] = undefined;\n            return \"\";\n        }\n        const keep_line = current_defines.map(def => defines.includes(def) == define_truth[def]).reduce((a, b) => a && b, true);\n        return keep_line ? line : \"\";\n    }).join(\"\\n\");\n    if (current_defines.length > 0) {\n        throw `Unterminated #ifdef/#ifndef block in shader`;\n    }\n    return processed_shader_src;\n}\n/**\n * Compile and link a shader program\n * @param gl                - The WebGL rendering context\n * @param vertex_shader_src - The source code for the vertex shader\n * @param frag_shader_src   - The source code for the fragment shader\n * @returns                   A compiled and linked WebGL program\n */\nconst compileAndLinkShaders = (gl, vertex_shader_src, frag_shader_src) => {\n    // create a vertex shader\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    if (vertexShader === null) {\n        throw \"Could not create vertex shader\";\n    }\n    gl.shaderSource(vertexShader, vertex_shader_src);\n    gl.compileShader(vertexShader);\n    const vertexCompiled = gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS);\n    if (!vertexCompiled) {\n        const compilationLog = gl.getShaderInfoLog(vertexShader);\n        console.log('Vertex shader compiler log: ' + compilationLog);\n    }\n    // create a fragment shader\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    if (fragmentShader === null) {\n        throw \"Could not create fragment shader\";\n    }\n    gl.shaderSource(fragmentShader, frag_shader_src);\n    gl.compileShader(fragmentShader);\n    const fragmentCompiled = gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS);\n    if (!fragmentCompiled) {\n        const compilationLog = gl.getShaderInfoLog(fragmentShader);\n        console.log('Fragment shader compiler log: ' + compilationLog);\n    }\n    // link the two shaders into a WebGL program\n    const program = gl.createProgram();\n    if (program === null) {\n        throw \"Could not create shader program\";\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    const linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        const linkLog = gl.getProgramInfoLog(program);\n        console.log('Linker log: ' + linkLog);\n    }\n    return program;\n};\n/** Class representing a WebGL shader program */\nclass WGLProgram {\n    /**\n     * Create and compile a shader program from source\n     * @param gl                  - The WebGL rendering context\n     * @param vertex_shader_src   - The vertex shader source code\n     * @param fragment_shader_src - The fragment shader source code\n     * @param opts.define         - Preprocessor macros to define (like -D when running gcc)\n     */\n    constructor(gl, vertex_shader_src, fragment_shader_src, opts) {\n        vertex_shader_src = preprocessShader(vertex_shader_src, opts);\n        fragment_shader_src = preprocessShader(fragment_shader_src, opts);\n        this.gl = gl;\n        this.prog = compileAndLinkShaders(gl, vertex_shader_src, fragment_shader_src);\n        this.attributes = {};\n        this.uniforms = {};\n        this.n_verts = null;\n        this.draw_mode = null;\n        this.index_buffer = null;\n        this.sampler_names = [];\n        this.instance_count = 0;\n        const remove_comments = (line) => {\n            const comment_idx = line.indexOf('//');\n            if (comment_idx >= 0) {\n                line = line.slice(0, comment_idx);\n            }\n            return line;\n        };\n        vertex_shader_src = vertex_shader_src.split('\\n').map(remove_comments).join('\\n');\n        fragment_shader_src = fragment_shader_src.split('\\n').map(remove_comments).join('\\n');\n        // safety check the vertex shader source\n        const is_webgl2 = isWebGL2Ctx(this.gl);\n        if (!is_webgl2 &&\n            (vertex_shader_src.includes('#version 300 es') || fragment_shader_src.includes('#version 300 es'))) {\n            throw `WebGL2 context required for shader source containing '#version 300 es'`;\n        }\n        // in WebGL2 shaders (gl 300 es), attribute just become the keyword 'in'\n        let vtx_shader_match = is_webgl2 ?\n            /\\b(?:in|attribute)+([\\w ]+?) +([\\w_]+);[\\s]*/mg : /attribute +([\\w ]+?) +([\\w_]+);[\\s]*/mg;\n        for (const match of vertex_shader_src.matchAll(vtx_shader_match)) {\n            const [full_match, type, a_name] = match;\n            this.attributes[a_name] = { 'type': type, 'location': gl.getAttribLocation(this.prog, a_name) };\n        }\n        for (const match of vertex_shader_src.matchAll(/uniform +([\\w ]+?) +([\\w_]+)(?:[\\s]*\\[.*\\])?;[\\s]*/mg)) {\n            const [full_match, type, u_name] = match;\n            const type_parts = type.split(' ');\n            const uniform_loc = gl.getUniformLocation(this.prog, u_name);\n            if (uniform_loc === null) {\n                throw `Could not get vertex shader uniform location for '${u_name}'`;\n            }\n            this.uniforms[u_name] = { 'type': type_parts[type_parts.length - 1], 'location': uniform_loc };\n        }\n        for (const match of fragment_shader_src.matchAll(/uniform +([\\w ]+?) +([\\w_]+)(?:[\\s]*\\[.*\\])?;[\\s]*/mg)) {\n            const [full_match, type, u_name] = match;\n            const type_parts = type.split(' ');\n            const uniform_loc = gl.getUniformLocation(this.prog, u_name);\n            if (uniform_loc === null) {\n                throw `Could not get fragment shader uniform location for '${u_name}'`;\n            }\n            this.uniforms[u_name] = { 'type': type_parts[type_parts.length - 1], 'location': uniform_loc };\n        }\n        Object.entries(this.uniforms).forEach(([u_name, uniform]) => {\n            if (uniform.type.toLowerCase() == 'sampler2d') {\n                this.sampler_names.push(u_name);\n            }\n        });\n        // Cache which version of the functions to use, avoiding running gl.getParameter in the render loop\n        if (isWebGL2Ctx(this.gl)) {\n            this.daiFunc = this.gl.drawArraysInstanced.bind(this.gl);\n            this.deiFunc = this.gl.drawElementsInstanced.bind(this.gl);\n        }\n        else {\n            const ext = this.gl.getExtension(\"ANGLE_instanced_arrays\");\n            this.daiFunc = ext.drawArraysInstancedANGLE.bind(ext);\n            this.deiFunc = ext.drawElementsInstancedANGLE.bind(ext);\n        }\n    }\n    /**\n     * Enable this program for rendering and optionally bind attribute, uniform, and texture values. This function should be called before calling\n     * {@link WGLProgram.bindAttributes}, {@link WGLProgram.setUniforms}, or {@link WGLProgram.bindTextures} on a given rendering pass.\n     * @param attribute_buffers - An object with the keys being the attribute variable names and the values being the buffers to associate with each variable\n     * @param uniform_values    - An object with the keys being the uniform variable names and the values being the uniform values\n     * @param textures          - An object with the keys being the sampler names in the source code and the values being the textures to associate with each sampler\n     * @param index_buffer      - A WGLIndexBuffer specifying which indices to draw in which order\n     */\n    use(attribute_buffers, uniform_values, textures, index_buffer) {\n        this.gl.useProgram(this.prog);\n        if (index_buffer !== undefined) {\n            index_buffer.bind();\n            this.index_buffer = index_buffer;\n        }\n        else {\n            this.index_buffer = null;\n        }\n        this.draw_mode = null;\n        this.n_verts = null;\n        this.instance_count = 0;\n        if (attribute_buffers !== undefined) {\n            this.bindAttributes(attribute_buffers);\n        }\n        if (uniform_values !== undefined) {\n            this.setUniforms(uniform_values);\n        }\n        if (textures !== undefined) {\n            this.bindTextures(textures);\n        }\n    }\n    /**\n     * Bind attribute buffers to variables in this shader program. When rendring, call {@link WGLProgram.use} before calling this function.\n     * @param attribute_buffers - An object with the keys being the attribute variable names and the values being the buffers to associate with each variable\n     */\n    bindAttributes(attribute_buffers) {\n        Object.entries(attribute_buffers).forEach(([a_name, buffer]) => {\n            if (this.attributes[a_name] === undefined) {\n                console.warn(`Skipping attribute buffer provided for '${a_name}' because the attribute was not found in the program.`);\n                return;\n            }\n            this.draw_mode = this.draw_mode === null ? buffer.draw_mode : this.draw_mode;\n            if (buffer.is_per_instance) {\n                if (this.instance_count == 0) {\n                    this.instance_count = buffer.n_verts;\n                }\n                else if (this.instance_count != buffer.n_verts) {\n                    throw `Unexpected number of instances for attribute buffer ${a_name} (expected ${this.instance_count}, got ${buffer.n_verts})`;\n                }\n            }\n            else {\n                this.n_verts = this.n_verts === null ? buffer.n_verts : this.n_verts;\n                if (this.n_verts != buffer.n_verts) {\n                    throw `Unexpected number of vertices for attribute buffer ${a_name} (expected ${this.n_verts}, got ${buffer.n_verts}).`;\n                }\n                if (this.draw_mode != buffer.draw_mode) {\n                    throw `Unexpected draw mode for attribute buffer ${a_name} (expected ${this.draw_mode}, got ${buffer.draw_mode}).`;\n                }\n            }\n            const { type, location } = this.attributes[a_name];\n            buffer.bindToProgram(location);\n        });\n    }\n    /**\n     * Set uniform values in this shader program. When rendering, call {@link WGLProgram.use} before calling this function.\n     * @param uniform_values - An object with the keys being the uniform variable names and the values being the uniform values\n     */\n    setUniforms(uniform_values) {\n        Object.entries(uniform_values).forEach(([u_name, value]) => {\n            if (this.uniforms[u_name] === undefined) {\n                console.warn(`Skipping uniform value provided for '${u_name}' because the uniform was not found in the program.`);\n                return;\n            }\n            const { type, location } = this.uniforms[u_name];\n            if (type === 'int' && typeof value == 'number') {\n                this.gl.uniform1i(location, value);\n            }\n            else if (type === 'float' && typeof value == 'number') {\n                this.gl.uniform1f(location, value);\n            }\n            else if (type === 'float' && value instanceof Array) {\n                this.gl.uniform1fv(location, value);\n            }\n            else if (type === 'vec2' && value instanceof Array) {\n                this.gl.uniform2fv(location, value);\n            }\n            else if (type === 'vec3' && value instanceof Array) {\n                this.gl.uniform3fv(location, value);\n            }\n            else if (type === 'vec4' && value instanceof Array) {\n                this.gl.uniform4fv(location, value);\n            }\n            else if (type === 'mat4' && value instanceof Array) {\n                this.gl.uniformMatrix4fv(location, false, value);\n            }\n            else {\n                throw `Could not figure out uniform function for type '${type}' and value '${String(value)}'`;\n            }\n        });\n    }\n    /**\n     * Bind textures to samplers in this shader program. When rendring, call {@link WGLProgram.use} before calling this function.\n     * @param textures - An object with the keys being the sampler names in the source code and the values being the textures to associate with each sampler\n     */\n    bindTextures(textures) {\n        Object.entries(textures).forEach(([sampler_name, texture]) => {\n            if (this.uniforms[sampler_name] === undefined) {\n                console.warn(`Skipping texture provided for sampler '${sampler_name}' because the sampler was not found in the program.`);\n                return;\n            }\n            const gl_tex_num = this.sampler_names.indexOf(sampler_name);\n            const { type, location } = this.uniforms[sampler_name];\n            texture.bindToProgram(location, gl_tex_num);\n        });\n    }\n    /**\n     * Run this shader program.\n     */\n    draw() {\n        if (this.draw_mode === null || this.n_verts === null) {\n            throw \"Cannot draw without binding attribute buffers\";\n        }\n        if (this.index_buffer === null) {\n            if (this.instance_count == 0) {\n                this.gl.drawArrays(this.draw_mode, 0, this.n_verts);\n            }\n            else {\n                this.daiFunc(this.draw_mode, 0, this.n_verts, this.instance_count);\n            }\n        }\n        else {\n            if (this.instance_count == 0) {\n                this.gl.drawElements(this.draw_mode, this.index_buffer.n_verts, this.index_buffer.dtype, 0);\n            }\n            else {\n                this.deiFunc(this.draw_mode, this.index_buffer.n_verts, this.index_buffer.dtype, 0, this.instance_count);\n            }\n        }\n    }\n}\nexport { WGLProgram };\n","/**\n * @module wgl/WebGLFramebuffer\n * Module containing helper classes for WebGL Framebuffers\n */\n/**\n * Base class for WebGL framebuffers\n */\nclass WGLFramebufferBase {\n    constructor(gl, framebuffer) {\n        this.gl = gl;\n        this.framebuffer = framebuffer;\n    }\n    /**\n     * Clear the framebuffer to a particular color\n     * @param color - The color to use when clearing the framebuffer as a float RGBA tuple\n     */\n    clear(color) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.clearColor(...color);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    /**\n     * Render to a portion of this framebuffer\n     * @param x      - The x coordinate of the starting point for the viewport\n     * @param y      - The y coordinate of the starting point for the viewport\n     * @param width  - The width of the viewport\n     * @param height - The height of the viewport\n     */\n    renderTo(x, y, width, height) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.viewport(x, y, width, height);\n    }\n    /**\n     * Copy the contents of this framebuffer to another texture\n     * @param texture - The destination texture for the copy\n     * @param x       - The x coordinate of the start of the source rectangle\n     * @param y       - The y coordinate of the start of the source rectangle\n     * @param width   - The width of the source rectangle\n     * @param height  - The height of the source rectangle\n     */\n    copyToTexture(texture, x, y, width, height) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        texture.activate(0);\n        gl.copyTexImage2D(gl.TEXTURE_2D, 0, texture.spec.format, x, y, width, height, 0);\n    }\n}\n/**\n * Class representing the screen buffer\n * @extends WGLFramebufferBase\n */\nclass WGLScreenbuffer extends WGLFramebufferBase {\n    /**\n     * Create the screen buffer. Use the {@link WGLFramebuffer.screen} static variable of {@link WGLFramebuffer} instead of creating your own screenbuffer.\n     */\n    constructor() {\n        super(null, null);\n    }\n    /**\n     * Register the WebGL rendering context for later use\n     * @param gl - The WebGL rendering context\n     */\n    registerGLContext(gl) {\n        this.gl = gl;\n    }\n}\nconst SCREEN = new WGLScreenbuffer();\n/**\n * Class representing a WebGL framebuffer\n * @extends WGLFramebufferBase\n */\nclass WGLFramebuffer extends WGLFramebufferBase {\n    /**\n     * Create a framebuffer associated with a texture\n     * @param gl      - The WebGL rendering context\n     * @param texture - The texture object to associate with this framebuffer\n     */\n    constructor(gl, texture) {\n        const framebuffer = gl.createFramebuffer();\n        if (framebuffer === null) {\n            throw \"Could not create WebGL Framebuffer\";\n        }\n        super(gl, framebuffer);\n        this.texture = texture;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture['texture'], 0);\n    }\n    /**\n     * Get a screen buffer object for interacting with the screen\n     * @static\n     * @param gl - The WebGL rendering context to use\n     */\n    static screen(gl) {\n        SCREEN.registerGLContext(gl);\n        return SCREEN;\n    }\n}\n/**\n * Perform several rendering passes, flip-flopping between two framebuffers\n * @param n_passes  - The number of rendering passes to do\n * @param source_fb - The framebuffer containing the initial data for the rendering\n * @param aux_fb    - The auxilary rendering framebuffers (should be 2 of them)\n * @param do_render - A method that does the actual rendering pass\n */\nconst flipFlopBuffers = (n_passes, source_fb, aux_fb, do_render) => {\n    // fb1 is the source and fb2 is the target for each pass\n    let fb1 = source_fb, fb2 = aux_fb[0];\n    for (let ipass = 0; ipass < n_passes; ipass++) {\n        // Clear and unbind destination texture\n        fb2.clear([0., 0., 0., 1.]);\n        fb2.texture.deactivate();\n        // Do whatever rendering task we want to do\n        do_render(fb1, fb2, ipass);\n        if (ipass > 0) {\n            // Flip the framebuffers so the destination on this pass becomes the source on the next pass and vice-versa\n            aux_fb.reverse();\n        }\n        [fb1, fb2] = aux_fb;\n    }\n    // The most recent target is fb2, but the two framebuffers got flipped at the end of the loop, so the data we want are in fb1.\n    return fb1;\n};\nexport { WGLFramebuffer, flipFlopBuffers };\n","export const THIS_IS_NOT_AN_OBJECT = \"This is not an object\";\nexport const THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT = \"This is not a Float16Array object\";\nexport const THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY =\n  \"This constructor is not a subclass of Float16Array\";\nexport const THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT =\n  \"The constructor property value is not an object\";\nexport const SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT =\n  \"Species constructor didn't return TypedArray object\";\nexport const DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH =\n  \"Derived constructor created TypedArray object which was too small length\";\nexport const ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER =\n  \"Attempting to access detached ArrayBuffer\";\nexport const CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT =\n  \"Cannot convert undefined or null to object\";\nexport const CANNOT_MIX_BIGINT_AND_OTHER_TYPES =\n  \"Cannot mix BigInt and other types, use explicit conversions\";\nexport const ITERATOR_PROPERTY_IS_NOT_CALLABLE = \"@@iterator property is not callable\";\nexport const REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE =\n  \"Reduce of empty array with no initial value\";\nexport const THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED =\n  \"The comparison function must be either a function or undefined\";\nexport const OFFSET_IS_OUT_OF_BOUNDS = \"Offset is out of bounds\";\n","/* eslint-disable no-restricted-globals, no-restricted-syntax */\n/* global SharedArrayBuffer */\n\nimport { CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT } from \"./messages.mjs\";\n\n/** @type {<T extends (...args: any) => any>(target: T) => (thisArg: ThisType<T>, ...args: any[]) => any} */\nfunction uncurryThis(target) {\n  return (thisArg, ...args) => {\n    return ReflectApply(target, thisArg, args);\n  };\n}\n\n/** @type {(target: any, key: string | symbol) => (thisArg: any, ...args: any[]) => any} */\nfunction uncurryThisGetter(target, key) {\n  return uncurryThis(\n    ReflectGetOwnPropertyDescriptor(\n      target,\n      key\n    ).get\n  );\n}\n\n// Reflect\nexport const {\n  apply: ReflectApply,\n  construct: ReflectConstruct,\n  defineProperty: ReflectDefineProperty,\n  get: ReflectGet,\n  getOwnPropertyDescriptor: ReflectGetOwnPropertyDescriptor,\n  getPrototypeOf: ReflectGetPrototypeOf,\n  has: ReflectHas,\n  ownKeys: ReflectOwnKeys,\n  set: ReflectSet,\n  setPrototypeOf: ReflectSetPrototypeOf,\n} = Reflect;\n\n// Proxy\nexport const NativeProxy = Proxy;\n\n// Number\nexport const {\n  EPSILON,\n  MAX_SAFE_INTEGER,\n  isFinite: NumberIsFinite,\n  isNaN: NumberIsNaN,\n} = Number;\n\n// Symbol\nexport const {\n  iterator: SymbolIterator,\n  species: SymbolSpecies,\n  toStringTag: SymbolToStringTag,\n  for: SymbolFor,\n} = Symbol;\n\n// Object\nexport const NativeObject = Object;\nexport const {\n  create: ObjectCreate,\n  defineProperty: ObjectDefineProperty,\n  freeze: ObjectFreeze,\n  is: ObjectIs,\n} = NativeObject;\nconst ObjectPrototype = NativeObject.prototype;\n/** @type {(object: object, key: PropertyKey) => Function | undefined} */\nexport const ObjectPrototype__lookupGetter__ = /** @type {any} */ (ObjectPrototype).__lookupGetter__\n  ? uncurryThis(/** @type {any} */ (ObjectPrototype).__lookupGetter__)\n  : (object, key) => {\n    if (object == null) {\n      throw NativeTypeError(\n        CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n      );\n    }\n\n    let target = NativeObject(object);\n    do {\n      const descriptor = ReflectGetOwnPropertyDescriptor(target, key);\n      if (descriptor !== undefined) {\n        if (ObjectHasOwn(descriptor, \"get\")) {\n          return descriptor.get;\n        }\n\n        return;\n      }\n    } while ((target = ReflectGetPrototypeOf(target)) !== null);\n  };\n/** @type {(object: object, key: PropertyKey) => boolean} */\nexport const ObjectHasOwn = /** @type {any} */ (NativeObject).hasOwn ||\n  uncurryThis(ObjectPrototype.hasOwnProperty);\n\n// Array\nconst NativeArray = Array;\nexport const ArrayIsArray = NativeArray.isArray;\nconst ArrayPrototype = NativeArray.prototype;\n/** @type {(array: ArrayLike<unknown>, separator?: string) => string} */\nexport const ArrayPrototypeJoin = uncurryThis(ArrayPrototype.join);\n/** @type {<T>(array: T[], ...items: T[]) => number} */\nexport const ArrayPrototypePush = uncurryThis(ArrayPrototype.push);\n/** @type {(array: ArrayLike<unknown>, ...opts: any[]) => string} */\nexport const ArrayPrototypeToLocaleString = uncurryThis(\n  ArrayPrototype.toLocaleString\n);\nexport const NativeArrayPrototypeSymbolIterator = ArrayPrototype[SymbolIterator];\n/** @type {<T>(array: T[]) => IterableIterator<T>} */\nexport const ArrayPrototypeSymbolIterator = uncurryThis(NativeArrayPrototypeSymbolIterator);\n\n// Math\nexport const {\n  abs: MathAbs,\n  trunc: MathTrunc,\n} = Math;\n\n// ArrayBuffer\nexport const NativeArrayBuffer = ArrayBuffer;\nexport const ArrayBufferIsView = NativeArrayBuffer.isView;\nconst ArrayBufferPrototype = NativeArrayBuffer.prototype;\n/** @type {(buffer: ArrayBuffer, begin?: number, end?: number) => number} */\nexport const ArrayBufferPrototypeSlice = uncurryThis(ArrayBufferPrototype.slice);\n/** @type {(buffer: ArrayBuffer) => ArrayBuffer} */\nexport const ArrayBufferPrototypeGetByteLength = uncurryThisGetter(ArrayBufferPrototype, \"byteLength\");\n\n// SharedArrayBuffer\nexport const NativeSharedArrayBuffer = typeof SharedArrayBuffer !== \"undefined\" ? SharedArrayBuffer : null;\n/** @type {(buffer: SharedArrayBuffer) => SharedArrayBuffer} */\nexport const SharedArrayBufferPrototypeGetByteLength = NativeSharedArrayBuffer\n  && uncurryThisGetter(NativeSharedArrayBuffer.prototype, \"byteLength\");\n\n// TypedArray\n/** @typedef {Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float32Array|Float64Array|BigUint64Array|BigInt64Array} TypedArray */\n/** @type {any} */\nexport const TypedArray = ReflectGetPrototypeOf(Uint8Array);\nconst TypedArrayFrom = TypedArray.from;\nexport const TypedArrayPrototype = TypedArray.prototype;\nexport const NativeTypedArrayPrototypeSymbolIterator = TypedArrayPrototype[SymbolIterator];\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\nexport const TypedArrayPrototypeKeys = uncurryThis(TypedArrayPrototype.keys);\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\nexport const TypedArrayPrototypeValues = uncurryThis(\n  TypedArrayPrototype.values\n);\n/** @type {(typedArray: TypedArray) => IterableIterator<[number, number]>} */\nexport const TypedArrayPrototypeEntries = uncurryThis(\n  TypedArrayPrototype.entries\n);\n/** @type {(typedArray: TypedArray, array: ArrayLike<number>, offset?: number) => void} */\nexport const TypedArrayPrototypeSet = uncurryThis(TypedArrayPrototype.set);\n/** @type {<T extends TypedArray>(typedArray: T) => T} */\nexport const TypedArrayPrototypeReverse = uncurryThis(\n  TypedArrayPrototype.reverse\n);\n/** @type {<T extends TypedArray>(typedArray: T, value: number, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeFill = uncurryThis(TypedArrayPrototype.fill);\n/** @type {<T extends TypedArray>(typedArray: T, target: number, start: number, end?: number) => T} */\nexport const TypedArrayPrototypeCopyWithin = uncurryThis(\n  TypedArrayPrototype.copyWithin\n);\n/** @type {<T extends TypedArray>(typedArray: T, compareFn?: (a: number, b: number) => number) => T} */\nexport const TypedArrayPrototypeSort = uncurryThis(TypedArrayPrototype.sort);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeSlice = uncurryThis(TypedArrayPrototype.slice);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeSubarray = uncurryThis(\n  TypedArrayPrototype.subarray\n);\n/** @type {((typedArray: TypedArray) => ArrayBuffer)} */\nexport const TypedArrayPrototypeGetBuffer = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"buffer\"\n);\n/** @type {((typedArray: TypedArray) => number)} */\nexport const TypedArrayPrototypeGetByteOffset = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"byteOffset\"\n);\n/** @type {((typedArray: TypedArray) => number)} */\nexport const TypedArrayPrototypeGetLength = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"length\"\n);\n/** @type {(target: unknown) => string} */\nexport const TypedArrayPrototypeGetSymbolToStringTag = uncurryThisGetter(\n  TypedArrayPrototype,\n  SymbolToStringTag\n);\n\n// Uint8Array\nexport const NativeUint8Array = Uint8Array;\n\n// Uint16Array\nexport const NativeUint16Array = Uint16Array;\n/** @type {Uint16ArrayConstructor[\"from\"]} */\nexport const Uint16ArrayFrom = (...args) => {\n  return ReflectApply(TypedArrayFrom, NativeUint16Array, args);\n};\n\n// Uint32Array\nexport const NativeUint32Array = Uint32Array;\n\n// Float32Array\nexport const NativeFloat32Array = Float32Array;\n\n// ArrayIterator\n/** @type {any} */\nexport const ArrayIteratorPrototype = ReflectGetPrototypeOf([][SymbolIterator]());\n/** @type {<T>(arrayIterator: IterableIterator<T>) => IteratorResult<T>} */\nexport const ArrayIteratorPrototypeNext = uncurryThis(ArrayIteratorPrototype.next);\n\n// Generator\n/** @type {<T = unknown, TReturn = any, TNext = unknown>(generator: Generator<T, TReturn, TNext>, value?: TNext) => T} */\nexport const GeneratorPrototypeNext = uncurryThis((function* () {})().next);\n\n// Iterator\nexport const IteratorPrototype = ReflectGetPrototypeOf(ArrayIteratorPrototype);\n\n// DataView\nconst DataViewPrototype = DataView.prototype;\n/** @type {(dataView: DataView, byteOffset: number, littleEndian?: boolean) => number} */\nexport const DataViewPrototypeGetUint16 = uncurryThis(\n  DataViewPrototype.getUint16\n);\n/** @type {(dataView: DataView, byteOffset: number, value: number, littleEndian?: boolean) => void} */\nexport const DataViewPrototypeSetUint16 = uncurryThis(\n  DataViewPrototype.setUint16\n);\n\n// Error\nexport const NativeTypeError = TypeError;\nexport const NativeRangeError = RangeError;\n\n// WeakSet\n/**\n * Do not construct with arguments to avoid calling the \"add\" method\n * @type {{new <T extends {}>(): WeakSet<T>}}\n */\nexport const NativeWeakSet = WeakSet;\nconst WeakSetPrototype = NativeWeakSet.prototype;\n/** @type {<T extends {}>(set: WeakSet<T>, value: T) => Set<T>} */\nexport const WeakSetPrototypeAdd = uncurryThis(WeakSetPrototype.add);\n/** @type {<T extends {}>(set: WeakSet<T>, value: T) => boolean} */\nexport const WeakSetPrototypeHas = uncurryThis(WeakSetPrototype.has);\n\n// WeakMap\n/**\n * Do not construct with arguments to avoid calling the \"set\" method\n * @type {{new <K extends {}, V>(): WeakMap<K, V>}}\n */\nexport const NativeWeakMap = WeakMap;\nconst WeakMapPrototype = NativeWeakMap.prototype;\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => V} */\nexport const WeakMapPrototypeGet = uncurryThis(WeakMapPrototype.get);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => boolean} */\nexport const WeakMapPrototypeHas = uncurryThis(WeakMapPrototype.has);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K, value: V) => WeakMap} */\nexport const WeakMapPrototypeSet = uncurryThis(WeakMapPrototype.set);\n","import {\n  ArrayIteratorPrototype,\n  ArrayIteratorPrototypeNext,\n  ArrayPrototypeSymbolIterator,\n  GeneratorPrototypeNext,\n  IteratorPrototype,\n  NativeArrayPrototypeSymbolIterator,\n  NativeWeakMap,\n  ObjectCreate,\n  ObjectDefineProperty,\n  ReflectGetOwnPropertyDescriptor,\n  ReflectOwnKeys,\n  SymbolIterator,\n  WeakMapPrototypeGet,\n  WeakMapPrototypeSet,\n} from \"./primordials.mjs\";\n\n/** @type {WeakMap<{}, IterableIterator<any>>} */\nconst arrayIterators = new NativeWeakMap();\n\nconst SafeIteratorPrototype = ObjectCreate(null, {\n  next: {\n    value: function next() {\n      const arrayIterator = WeakMapPrototypeGet(arrayIterators, this);\n      return ArrayIteratorPrototypeNext(arrayIterator);\n    },\n  },\n\n  [SymbolIterator]: {\n    value: function values() {\n      return this;\n    },\n  },\n});\n\n/**\n * Wrap the Array around the SafeIterator If Array.prototype [@@iterator] has been modified\n * @type {<T>(array: T[]) => Iterable<T>}\n */\nexport function safeIfNeeded(array) {\n  if (\n    array[SymbolIterator] === NativeArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  ) {\n    return array;\n  }\n\n  const safe = ObjectCreate(SafeIteratorPrototype);\n  WeakMapPrototypeSet(arrayIterators, safe, ArrayPrototypeSymbolIterator(array));\n  return safe;\n}\n\n/** @type {WeakMap<{}, Generator<any>>} */\nconst generators = new NativeWeakMap();\n\n/** @see https://tc39.es/ecma262/#sec-%arrayiteratorprototype%-object */\nconst DummyArrayIteratorPrototype = ObjectCreate(IteratorPrototype, {\n  next: {\n    value: function next() {\n      const generator = WeakMapPrototypeGet(generators, this);\n      return GeneratorPrototypeNext(generator);\n    },\n    writable: true,\n    configurable: true,\n  },\n});\n\nfor (const key of ReflectOwnKeys(ArrayIteratorPrototype)) {\n  // next method has already defined\n  if (key === \"next\") {\n    continue;\n  }\n\n  // Copy ArrayIteratorPrototype descriptors to DummyArrayIteratorPrototype\n  ObjectDefineProperty(DummyArrayIteratorPrototype, key, ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype, key));\n}\n\n/**\n * Wrap the Generator around the dummy ArrayIterator\n * @type {<T>(generator: Generator<T>) => IterableIterator<T>}\n */\nexport function wrap(generator) {\n  const dummy = ObjectCreate(DummyArrayIteratorPrototype);\n  WeakMapPrototypeSet(generators, dummy, generator);\n  return dummy;\n}\n","import {\n  ArrayBufferPrototypeGetByteLength,\n  ArrayIsArray,\n  ArrayIteratorPrototype,\n  ArrayIteratorPrototypeNext,\n  MathTrunc,\n  NativeArrayPrototypeSymbolIterator,\n  NativeSharedArrayBuffer,\n  NativeTypedArrayPrototypeSymbolIterator,\n  NumberIsFinite,\n  SharedArrayBufferPrototypeGetByteLength,\n  SymbolIterator,\n  TypedArrayPrototypeGetSymbolToStringTag,\n} from \"./primordials.mjs\";\n\n/**\n * @param {unknown} value\n * @returns {value is {}}\n */\nexport function isObject(value) {\n  return (\n    (value !== null && typeof value === \"object\") ||\n    typeof value === \"function\"\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is {}}\n */\nexport function isObjectLike(value) {\n  return value !== null && typeof value === \"object\";\n}\n\n// Inspired by util.types implementation of Node.js\n/** @typedef {Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float32Array|Float64Array|BigUint64Array|BigInt64Array} TypedArray */\n\n/**\n * @param {unknown} value\n * @returns {value is TypedArray}\n */\nexport function isNativeTypedArray(value) {\n  return TypedArrayPrototypeGetSymbolToStringTag(value) !== undefined;\n}\n\n/**\n * @param {unknown} value\n * @returns {value is BigInt64Array|BigUint64Array}\n */\nexport function isNativeBigIntTypedArray(value) {\n  const typedArrayName = TypedArrayPrototypeGetSymbolToStringTag(value);\n  return (\n    typedArrayName === \"BigInt64Array\" ||\n    typedArrayName === \"BigUint64Array\"\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is ArrayBuffer}\n */\nfunction isArrayBuffer(value) {\n  try {\n    ArrayBufferPrototypeGetByteLength(/** @type {any} */ (value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @param {unknown} value\n * @returns {value is SharedArrayBuffer}\n */\nexport function isSharedArrayBuffer(value) {\n  if (NativeSharedArrayBuffer === null) {\n    return false;\n  }\n\n  try {\n    SharedArrayBufferPrototypeGetByteLength(/** @type {any} */ (value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @param {unknown} value\n * @returns {value is ArrayBuffer|SharedArrayBuffer}\n */\nexport function isAnyArrayBuffer(value) {\n  return isArrayBuffer(value) || isSharedArrayBuffer(value);\n}\n\n/**\n * @param {unknown} value\n * @returns {value is unknown[]}\n */\nexport function isOrdinaryArray(value) {\n  if (!ArrayIsArray(value)) {\n    return false;\n  }\n\n  // Verify that there are no changes in ArrayIterator\n  return (\n    value[SymbolIterator] === NativeArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is TypedArray}\n */\nexport function isOrdinaryNativeTypedArray(value) {\n  if (!isNativeTypedArray(value)) {\n    return false;\n  }\n\n  // Verify that there are no changes in ArrayIterator\n  return (\n    value[SymbolIterator] === NativeTypedArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is string}\n */\nexport function isCanonicalIntegerIndexString(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  const number = +value;\n  if (value !== number + \"\") {\n    return false;\n  }\n\n  if (!NumberIsFinite(number)) {\n    return false;\n  }\n\n  return number === MathTrunc(number);\n}\n","import { isObject, isObjectLike } from \"./is.mjs\";\nimport { THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT } from \"./messages.mjs\";\nimport { NativeTypeError, ReflectGetPrototypeOf, ReflectHas, SymbolFor } from \"./primordials.mjs\";\n\nexport const brand = SymbolFor(\"__Float16Array__\");\n\n/**\n * @param {unknown} target\n * @throws {TypeError}\n * @returns {boolean}\n */\nexport function hasFloat16ArrayBrand(target) {\n  if (!isObjectLike(target)) {\n    return false;\n  }\n\n  const prototype = ReflectGetPrototypeOf(target);\n  if (!isObjectLike(prototype)) {\n    return false;\n  }\n\n  const constructor = prototype.constructor;\n  if (constructor === undefined) {\n    return false;\n  }\n  if (!isObject(constructor)) {\n    throw NativeTypeError(THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT);\n  }\n\n  return ReflectHas(constructor, brand);\n}\n","import {\n  EPSILON,\n  MathAbs,\n  NativeArrayBuffer,\n  NativeFloat32Array,\n  NativeUint16Array,\n  NativeUint32Array,\n  NativeUint8Array,\n  NumberIsFinite,\n  NumberIsNaN,\n} from \"./primordials.mjs\";\n\nconst INVERSE_OF_EPSILON = 1 / EPSILON;\n\n/**\n * rounds to the nearest value;\n * if the number falls midway, it is rounded to the nearest value with an even least significant digit\n * @param {number} num\n * @returns {number}\n */\nfunction roundTiesToEven(num) {\n  return (num + INVERSE_OF_EPSILON) - INVERSE_OF_EPSILON;\n}\n\nconst FLOAT16_MIN_VALUE = 6.103515625e-05;\nconst FLOAT16_MAX_VALUE = 65504;\nconst FLOAT16_EPSILON = 0.0009765625;\n\nconst FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE = FLOAT16_EPSILON * FLOAT16_MIN_VALUE;\nconst FLOAT16_EPSILON_DEVIDED_BY_EPSILON = FLOAT16_EPSILON * INVERSE_OF_EPSILON;\n\n/**\n * round a number to a half float number\n * @param {unknown} num - double float\n * @returns {number} half float number bits\n */\nexport function roundToFloat16(num) {\n  const number = +num;\n\n  // NaN, Infinity, -Infinity, 0, -0\n  if (!NumberIsFinite(number) || number === 0) {\n    return number;\n  }\n\n  // finite except 0, -0\n  const sign = number > 0 ? 1 : -1;\n  const absolute = MathAbs(number);\n\n  // small number\n  if (absolute < FLOAT16_MIN_VALUE) {\n    return sign * roundTiesToEven(absolute / FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE) * FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE;\n  }\n\n  const temp = (1 + FLOAT16_EPSILON_DEVIDED_BY_EPSILON) * absolute;\n  const result = temp - (temp - absolute);\n\n  // large number\n  if (result > FLOAT16_MAX_VALUE || NumberIsNaN(result)) {\n    return sign * Infinity;\n  }\n\n  return sign * result;\n}\n\n// base algorithm: http://fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst buffer = new NativeArrayBuffer(4);\nconst floatView = new NativeFloat32Array(buffer);\nconst uint32View = new NativeUint32Array(buffer);\n\nconst baseTable = new NativeUint16Array(512);\nconst shiftTable = new NativeUint8Array(512);\n\nfor (let i = 0; i < 256; ++i) {\n  const e = i - 127;\n\n  // very small number (0, -0)\n  if (e < -27) {\n    baseTable[i]         = 0x0000;\n    baseTable[i | 0x100] = 0x8000;\n    shiftTable[i]         = 24;\n    shiftTable[i | 0x100] = 24;\n\n  // small number (denorm)\n  } else if (e < -14) {\n    baseTable[i]         =  0x0400 >> (-e - 14);\n    baseTable[i | 0x100] = (0x0400 >> (-e - 14)) | 0x8000;\n    shiftTable[i]         = -e - 1;\n    shiftTable[i | 0x100] = -e - 1;\n\n  // normal number\n  } else if (e <= 15) {\n    baseTable[i]         =  (e + 15) << 10;\n    baseTable[i | 0x100] = ((e + 15) << 10) | 0x8000;\n    shiftTable[i]         = 13;\n    shiftTable[i | 0x100] = 13;\n\n  // large number (Infinity, -Infinity)\n  } else if (e < 128) {\n    baseTable[i]         = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i]         = 24;\n    shiftTable[i | 0x100] = 24;\n\n  // stay (NaN, Infinity, -Infinity)\n  } else {\n    baseTable[i]         = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i]         = 13;\n    shiftTable[i | 0x100] = 13;\n  }\n}\n\n/**\n * round a number to a half float number bits\n * @param {unknown} num - double float\n * @returns {number} half float number bits\n */\nexport function roundToFloat16Bits(num) {\n  floatView[0] = roundToFloat16(num);\n  const f = uint32View[0];\n  const e = (f >> 23) & 0x1ff;\n  return baseTable[e] + ((f & 0x007fffff) >> shiftTable[e]);\n}\n\nconst mantissaTable = new NativeUint32Array(2048);\nfor (let i = 1; i < 1024; ++i) {\n  let m = i << 13; // zero pad mantissa bits\n  let e = 0; // zero exponent\n\n  // normalized\n  while ((m & 0x00800000) === 0) {\n    m <<= 1;\n    e -= 0x00800000; // decrement exponent\n  }\n\n  m &= ~0x00800000; // clear leading 1 bit\n  e += 0x38800000; // adjust bias\n\n  mantissaTable[i] = m | e;\n}\nfor (let i = 1024; i < 2048; ++i) {\n  mantissaTable[i] = 0x38000000 + ((i - 1024) << 13);\n}\n\nconst exponentTable = new NativeUint32Array(64);\nfor (let i = 1; i < 31; ++i) {\n  exponentTable[i] = i << 23;\n}\nexponentTable[31] = 0x47800000;\nexponentTable[32] = 0x80000000;\nfor (let i = 33; i < 63; ++i) {\n  exponentTable[i] = 0x80000000 + ((i - 32) << 23);\n}\nexponentTable[63] = 0xc7800000;\n\nconst offsetTable = new NativeUint16Array(64);\nfor (let i = 1; i < 64; ++i) {\n  if (i !== 32) {\n    offsetTable[i] = 1024;\n  }\n}\n\n/**\n * convert a half float number bits to a number\n * @param {number} float16bits - half float number bits\n * @returns {number} double float\n */\nexport function convertToNumber(float16bits) {\n  const i = float16bits >> 10;\n  uint32View[0] = mantissaTable[offsetTable[i] + (float16bits & 0x3ff)] + exponentTable[i];\n  return floatView[0];\n}\n","import { isObject, isSharedArrayBuffer } from \"./is.mjs\";\nimport {\n  THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT,\n  THIS_IS_NOT_AN_OBJECT,\n} from \"./messages.mjs\";\nimport {\n  ArrayBufferPrototypeSlice,\n  MAX_SAFE_INTEGER,\n  MathTrunc,\n  NativeTypeError,\n  NumberIsNaN,\n  ObjectIs,\n  SymbolSpecies,\n} from \"./primordials.mjs\";\n\n/**\n * @see https://tc39.es/ecma262/#sec-tointegerorinfinity\n * @param {unknown} target\n * @returns {number}\n */\nexport function ToIntegerOrInfinity(target) {\n  const number = +target;\n\n  if (NumberIsNaN(number) || number === 0) {\n    return 0;\n  }\n\n  return MathTrunc(number);\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-tolength\n * @param {unknown} target\n * @returns {number}\n */\nexport function ToLength(target) {\n  const length = ToIntegerOrInfinity(target);\n  if (length < 0) {\n    return 0;\n  }\n\n  return length < MAX_SAFE_INTEGER\n    ? length\n    : MAX_SAFE_INTEGER;\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-speciesconstructor\n * @param {object} target\n * @param {{ new(...args: any[]): any; }} defaultConstructor\n * @returns {{ new(...args: any[]): any; }}\n */\nexport function SpeciesConstructor(target, defaultConstructor) {\n  if (!isObject(target)) {\n    throw NativeTypeError(THIS_IS_NOT_AN_OBJECT);\n  }\n\n  const constructor = target.constructor;\n  if (constructor === undefined) {\n    return defaultConstructor;\n  }\n  if (!isObject(constructor)) {\n    throw NativeTypeError(THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT);\n  }\n\n  const species = constructor[SymbolSpecies];\n  if (species == null) {\n    return defaultConstructor;\n  }\n\n  return species;\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-isdetachedbuffer\n * @param {ArrayBufferLike} buffer\n * @returns {boolean}\n */\nexport function IsDetachedBuffer(buffer) {\n  if (isSharedArrayBuffer(buffer)) {\n    return false;\n  }\n\n  try {\n    ArrayBufferPrototypeSlice(buffer, 0, 0);\n    return false;\n  } catch (e) {/* empty */}\n\n  return true;\n}\n\n/**\n * bigint comparisons are not supported\n * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\n * @param {number} x\n * @param {number} y\n * @returns {-1 | 0 | 1}\n */\nexport function defaultCompare(x, y) {\n  const isXNaN = NumberIsNaN(x);\n  const isYNaN = NumberIsNaN(y);\n\n  if (isXNaN && isYNaN) {\n    return 0;\n  }\n\n  if (isXNaN) {\n    return 1;\n  }\n\n  if (isYNaN) {\n    return -1;\n  }\n\n  if (x < y) {\n    return -1;\n  }\n\n  if (x > y) {\n    return 1;\n  }\n\n  if (x === 0 && y === 0) {\n    const isXPlusZero = ObjectIs(x, 0);\n    const isYPlusZero = ObjectIs(y, 0);\n\n    if (!isXPlusZero && isYPlusZero) {\n      return -1;\n    }\n\n    if (isXPlusZero && !isYPlusZero) {\n      return 1;\n    }\n  }\n\n  return 0;\n}\n","import { safeIfNeeded, wrap } from \"./_util/arrayIterator.mjs\";\nimport { brand, hasFloat16ArrayBrand } from \"./_util/brand.mjs\";\nimport { convertToNumber, roundToFloat16Bits } from \"./_util/converter.mjs\";\nimport {\n  isAnyArrayBuffer,\n  isCanonicalIntegerIndexString,\n  isNativeBigIntTypedArray,\n  isNativeTypedArray,\n  isObject,\n  isOrdinaryArray,\n  isOrdinaryNativeTypedArray,\n} from \"./_util/is.mjs\";\nimport {\n  ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER,\n  CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT,\n  CANNOT_MIX_BIGINT_AND_OTHER_TYPES,\n  DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH,\n  ITERATOR_PROPERTY_IS_NOT_CALLABLE,\n  OFFSET_IS_OUT_OF_BOUNDS,\n  REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE,\n  SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT,\n  THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED,\n  THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY,\n  THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT,\n} from \"./_util/messages.mjs\";\nimport {\n  ArrayBufferIsView,\n  ArrayPrototypeJoin,\n  ArrayPrototypePush,\n  ArrayPrototypeToLocaleString,\n  NativeArrayBuffer,\n  NativeObject,\n  NativeProxy,\n  NativeRangeError,\n  NativeTypeError,\n  NativeUint16Array,\n  NativeWeakMap,\n  NativeWeakSet,\n  NumberIsNaN,\n  ObjectDefineProperty,\n  ObjectFreeze,\n  ObjectHasOwn,\n  ObjectPrototype__lookupGetter__,\n  ReflectApply,\n  ReflectConstruct,\n  ReflectDefineProperty,\n  ReflectGet,\n  ReflectGetOwnPropertyDescriptor,\n  ReflectHas,\n  ReflectOwnKeys,\n  ReflectSet,\n  ReflectSetPrototypeOf,\n  SymbolIterator,\n  SymbolToStringTag,\n  TypedArray,\n  TypedArrayPrototype,\n  TypedArrayPrototypeCopyWithin,\n  TypedArrayPrototypeEntries,\n  TypedArrayPrototypeFill,\n  TypedArrayPrototypeGetBuffer,\n  TypedArrayPrototypeGetByteOffset,\n  TypedArrayPrototypeGetLength,\n  TypedArrayPrototypeKeys,\n  TypedArrayPrototypeReverse,\n  TypedArrayPrototypeSet,\n  TypedArrayPrototypeSlice,\n  TypedArrayPrototypeSort,\n  TypedArrayPrototypeSubarray,\n  TypedArrayPrototypeValues,\n  Uint16ArrayFrom,\n  WeakMapPrototypeGet,\n  WeakMapPrototypeHas,\n  WeakMapPrototypeSet,\n  WeakSetPrototypeAdd,\n  WeakSetPrototypeHas,\n} from \"./_util/primordials.mjs\";\nimport {\n  IsDetachedBuffer,\n  SpeciesConstructor,\n  ToIntegerOrInfinity,\n  ToLength,\n  defaultCompare,\n} from \"./_util/spec.mjs\";\n\nconst BYTES_PER_ELEMENT = 2;\n\n/** @typedef {Uint16Array & { __float16bits: never }} Float16BitsArray */\n\n/** @type {WeakMap<Float16Array, Float16BitsArray>} */\nconst float16bitsArrays = new NativeWeakMap();\n\n/**\n * @param {unknown} target\n * @returns {target is Float16Array}\n */\nexport function isFloat16Array(target) {\n  return WeakMapPrototypeHas(float16bitsArrays, target) ||\n    (!ArrayBufferIsView(target) && hasFloat16ArrayBrand(target));\n}\n\n/**\n * @param {unknown} target\n * @throws {TypeError}\n * @returns {asserts target is Float16Array}\n */\nfunction assertFloat16Array(target) {\n  if (!isFloat16Array(target)) {\n    throw NativeTypeError(THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT);\n  }\n}\n\n/**\n * @param {unknown} target\n * @param {number=} count\n * @throws {TypeError}\n * @returns {asserts target is Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float16Array|Float32Array|Float64Array}\n */\nfunction assertSpeciesTypedArray(target, count) {\n  const isTargetFloat16Array = isFloat16Array(target);\n  const isTargetTypedArray = isNativeTypedArray(target);\n\n  if (!isTargetFloat16Array && !isTargetTypedArray) {\n    throw NativeTypeError(SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT);\n  }\n\n  if (typeof count === \"number\") {\n    let length;\n    if (isTargetFloat16Array) {\n      const float16bitsArray = getFloat16BitsArray(target);\n      length = TypedArrayPrototypeGetLength(float16bitsArray);\n    } else {\n      length = TypedArrayPrototypeGetLength(target);\n    }\n\n    if (length < count) {\n      throw NativeTypeError(\n        DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH\n      );\n    }\n  }\n\n  if (isNativeBigIntTypedArray(target)) {\n    throw NativeTypeError(CANNOT_MIX_BIGINT_AND_OTHER_TYPES);\n  }\n}\n\n/**\n * @param {Float16Array} float16\n * @throws {TypeError}\n * @returns {Float16BitsArray}\n */\nfunction getFloat16BitsArray(float16) {\n  const float16bitsArray = WeakMapPrototypeGet(float16bitsArrays, float16);\n  if (float16bitsArray !== undefined) {\n    const buffer = TypedArrayPrototypeGetBuffer(float16bitsArray);\n\n    if (IsDetachedBuffer(buffer)) {\n      throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n    }\n\n    return float16bitsArray;\n  }\n\n  // from another Float16Array instance (a different version?)\n  const buffer = /** @type {any} */ (float16).buffer;\n\n  if (IsDetachedBuffer(buffer)) {\n    throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n  }\n\n  const cloned = ReflectConstruct(Float16Array, [\n    buffer,\n    /** @type {any} */ (float16).byteOffset,\n    /** @type {any} */ (float16).length,\n  ], float16.constructor);\n  return WeakMapPrototypeGet(float16bitsArrays, cloned);\n}\n\n/**\n * @param {Float16BitsArray} float16bitsArray\n * @returns {number[]}\n */\nfunction copyToArray(float16bitsArray) {\n  const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n  const array = [];\n  for (let i = 0; i < length; ++i) {\n    array[i] = convertToNumber(float16bitsArray[i]);\n  }\n\n  return array;\n}\n\n/** @type {WeakSet<Function>} */\nconst TypedArrayPrototypeGetters = new NativeWeakSet();\nfor (const key of ReflectOwnKeys(TypedArrayPrototype)) {\n  // @@toStringTag getter property is defined in Float16Array.prototype\n  if (key === SymbolToStringTag) {\n    continue;\n  }\n\n  const descriptor = ReflectGetOwnPropertyDescriptor(TypedArrayPrototype, key);\n  if (ObjectHasOwn(descriptor, \"get\") && typeof descriptor.get === \"function\") {\n    WeakSetPrototypeAdd(TypedArrayPrototypeGetters, descriptor.get);\n  }\n}\n\nconst handler = ObjectFreeze(/** @type {ProxyHandler<Float16BitsArray>} */ ({\n  get(target, key, receiver) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      return convertToNumber(ReflectGet(target, key));\n    }\n\n    // %TypedArray%.prototype getter properties cannot called by Proxy receiver\n    if (WeakSetPrototypeHas(TypedArrayPrototypeGetters, ObjectPrototype__lookupGetter__(target, key))) {\n      return ReflectGet(target, key);\n    }\n\n    return ReflectGet(target, key, receiver);\n  },\n\n  set(target, key, value, receiver) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      return ReflectSet(target, key, roundToFloat16Bits(value));\n    }\n\n    return ReflectSet(target, key, value, receiver);\n  },\n\n  getOwnPropertyDescriptor(target, key) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      const descriptor = ReflectGetOwnPropertyDescriptor(target, key);\n      descriptor.value = convertToNumber(descriptor.value);\n      return descriptor;\n    }\n\n    return ReflectGetOwnPropertyDescriptor(target, key);\n  },\n\n  defineProperty(target, key, descriptor) {\n    if (\n      isCanonicalIntegerIndexString(key) &&\n      ObjectHasOwn(target, key) &&\n      ObjectHasOwn(descriptor, \"value\")\n    ) {\n      descriptor.value = roundToFloat16Bits(descriptor.value);\n      return ReflectDefineProperty(target, key, descriptor);\n    }\n\n    return ReflectDefineProperty(target, key, descriptor);\n  },\n}));\n\nexport class Float16Array {\n  /** @see https://tc39.es/ecma262/#sec-typedarray */\n  constructor(input, _byteOffset, _length) {\n    /** @type {Float16BitsArray} */\n    let float16bitsArray;\n\n    if (isFloat16Array(input)) {\n      float16bitsArray = ReflectConstruct(NativeUint16Array, [getFloat16BitsArray(input)], new.target);\n    } else if (isObject(input) && !isAnyArrayBuffer(input)) { // object without ArrayBuffer, SharedArrayBuffer\n      /** @type {ArrayLike<unknown>} */\n      let list;\n      /** @type {number} */\n      let length;\n\n      if (isNativeTypedArray(input)) { // TypedArray\n        list = input;\n        length = TypedArrayPrototypeGetLength(input);\n\n        const buffer = TypedArrayPrototypeGetBuffer(input);\n\n        if (IsDetachedBuffer(buffer)) {\n          throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n        }\n\n        if (isNativeBigIntTypedArray(input)) {\n          throw NativeTypeError(CANNOT_MIX_BIGINT_AND_OTHER_TYPES);\n        }\n\n        const data = new NativeArrayBuffer(\n          length * BYTES_PER_ELEMENT\n        );\n        float16bitsArray = ReflectConstruct(NativeUint16Array, [data], new.target);\n      } else {\n        const iterator = input[SymbolIterator];\n        if (iterator != null && typeof iterator !== \"function\") {\n          throw NativeTypeError(ITERATOR_PROPERTY_IS_NOT_CALLABLE);\n        }\n\n        if (iterator != null) { // Iterable (Array)\n          // for optimization\n          if (isOrdinaryArray(input)) {\n            list = input;\n            length = input.length;\n          } else {\n            // eslint-disable-next-line no-restricted-syntax\n            list = [... /** @type {Iterable<unknown>} */ (input)];\n            length = list.length;\n          }\n        } else { // ArrayLike\n          list = /** @type {ArrayLike<unknown>} */ (input);\n          length = ToLength(list.length);\n        }\n        float16bitsArray = ReflectConstruct(NativeUint16Array, [length], new.target);\n      }\n\n      // set values\n      for (let i = 0; i < length; ++i) {\n        float16bitsArray[i] = roundToFloat16Bits(list[i]);\n      }\n    } else { // primitive, ArrayBuffer, SharedArrayBuffer\n      float16bitsArray = ReflectConstruct(NativeUint16Array, arguments, new.target);\n    }\n\n    /** @type {Float16Array} */\n    const proxy = /** @type {any} */ (new NativeProxy(float16bitsArray, handler));\n\n    // proxy private storage\n    WeakMapPrototypeSet(float16bitsArrays, proxy, float16bitsArray);\n\n    return proxy;\n  }\n\n  /**\n   * limitation: `Object.getOwnPropertyNames(Float16Array)` or `Reflect.ownKeys(Float16Array)` include this key\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.from\n   */\n  static from(src, ...opts) {\n    const Constructor = this;\n\n    if (!ReflectHas(Constructor, brand)) {\n      throw NativeTypeError(\n        THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY\n      );\n    }\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      if (isFloat16Array(src) && opts.length === 0) {\n        const float16bitsArray = getFloat16BitsArray(src);\n        const uint16 = new NativeUint16Array(\n          TypedArrayPrototypeGetBuffer(float16bitsArray),\n          TypedArrayPrototypeGetByteOffset(float16bitsArray),\n          TypedArrayPrototypeGetLength(float16bitsArray)\n        );\n        return new Float16Array(\n          TypedArrayPrototypeGetBuffer(TypedArrayPrototypeSlice(uint16))\n        );\n      }\n\n      if (opts.length === 0) {\n        return new Float16Array(\n          TypedArrayPrototypeGetBuffer(\n            Uint16ArrayFrom(src, roundToFloat16Bits)\n          )\n        );\n      }\n\n      const mapFunc = opts[0];\n      const thisArg = opts[1];\n\n      return new Float16Array(\n        TypedArrayPrototypeGetBuffer(\n          Uint16ArrayFrom(src, function (val, ...args) {\n            return roundToFloat16Bits(\n              ReflectApply(mapFunc, this, [val, ...safeIfNeeded(args)])\n            );\n          }, thisArg)\n        )\n      );\n    }\n\n    /** @type {ArrayLike<unknown>} */\n    let list;\n    /** @type {number} */\n    let length;\n\n    const iterator = src[SymbolIterator];\n    if (iterator != null && typeof iterator !== \"function\") {\n      throw NativeTypeError(ITERATOR_PROPERTY_IS_NOT_CALLABLE);\n    }\n\n    if (iterator != null) { // Iterable (TypedArray, Array)\n      // for optimization\n      if (isOrdinaryArray(src)) {\n        list = src;\n        length = src.length;\n      } else if (isOrdinaryNativeTypedArray(src)) {\n        list = src;\n        length = TypedArrayPrototypeGetLength(src);\n      } else {\n        // eslint-disable-next-line no-restricted-syntax\n        list = [...src];\n        length = list.length;\n      }\n    } else { // ArrayLike\n      if (src == null) {\n        throw NativeTypeError(\n          CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n        );\n      }\n      list = NativeObject(src);\n      length = ToLength(list.length);\n    }\n\n    const array = new Constructor(length);\n\n    if (opts.length === 0) {\n      for (let i = 0; i < length; ++i) {\n        array[i] = /** @type {number} */ (list[i]);\n      }\n    } else {\n      const mapFunc = opts[0];\n      const thisArg = opts[1];\n      for (let i = 0; i < length; ++i) {\n        array[i] = ReflectApply(mapFunc, thisArg, [list[i], i]);\n      }\n    }\n\n    return array;\n  }\n\n  /**\n   * limitation: `Object.getOwnPropertyNames(Float16Array)` or `Reflect.ownKeys(Float16Array)` include this key\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.of\n   */\n  static of(...items) {\n    const Constructor = this;\n\n    if (!ReflectHas(Constructor, brand)) {\n      throw NativeTypeError(\n        THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY\n      );\n    }\n\n    const length = items.length;\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const proxy = new Float16Array(length);\n      const float16bitsArray = getFloat16BitsArray(proxy);\n\n      for (let i = 0; i < length; ++i) {\n        float16bitsArray[i] = roundToFloat16Bits(items[i]);\n      }\n\n      return proxy;\n    }\n\n    const array = new Constructor(length);\n\n    for (let i = 0; i < length; ++i) {\n      array[i] = items[i];\n    }\n\n    return array;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys */\n  keys() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return TypedArrayPrototypeKeys(float16bitsArray);\n  }\n\n  /**\n   * limitation: returns a object whose prototype is not `%ArrayIteratorPrototype%`\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.values\n   */\n  values() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return wrap((function* () {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const val of TypedArrayPrototypeValues(float16bitsArray)) {\n        yield convertToNumber(val);\n      }\n    })());\n  }\n\n  /**\n   * limitation: returns a object whose prototype is not `%ArrayIteratorPrototype%`\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries\n   */\n  entries() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return wrap((function* () {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const [i, val] of TypedArrayPrototypeEntries(float16bitsArray)) {\n        yield /** @type {[number, number]} */ ([i, convertToNumber(val)]);\n      }\n    })());\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.at */\n  at(index) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeIndex = ToIntegerOrInfinity(index);\n    const k = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n\n    if (k < 0 || k >= length) {\n      return;\n    }\n\n    return convertToNumber(float16bitsArray[k]);\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with */\n  with(index, value) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeIndex = ToIntegerOrInfinity(index);\n    const k = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n\n    const number = +value;\n\n    if (k < 0 || k >= length) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n    const array = getFloat16BitsArray(cloned);\n\n    array[k] = roundToFloat16Bits(number);\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.map */\n  map(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const proxy = new Float16Array(length);\n      const array = getFloat16BitsArray(proxy);\n\n      for (let i = 0; i < length; ++i) {\n        const val = convertToNumber(float16bitsArray[i]);\n        array[i] = roundToFloat16Bits(\n          ReflectApply(callback, thisArg, [val, i, this])\n        );\n      }\n\n      return proxy;\n    }\n\n    const array = new Constructor(length);\n    assertSpeciesTypedArray(array, length);\n\n    for (let i = 0; i < length; ++i) {\n      const val = convertToNumber(float16bitsArray[i]);\n      array[i] = ReflectApply(callback, thisArg, [val, i, this]);\n    }\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter */\n  filter(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    const kept = [];\n    for (let i = 0; i < length; ++i) {\n      const val = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [val, i, this])) {\n        ArrayPrototypePush(kept, val);\n      }\n    }\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n    const array = new Constructor(kept);\n    assertSpeciesTypedArray(array);\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce */\n  reduce(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    if (length === 0 && opts.length === 0) {\n      throw NativeTypeError(REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE);\n    }\n\n    let accumulator, start;\n    if (opts.length === 0) {\n      accumulator = convertToNumber(float16bitsArray[0]);\n      start = 1;\n    } else {\n      accumulator = opts[0];\n      start = 0;\n    }\n\n    for (let i = start; i < length; ++i) {\n      accumulator = callback(\n        accumulator,\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this\n      );\n    }\n\n    return accumulator;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright */\n  reduceRight(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    if (length === 0 && opts.length === 0) {\n      throw NativeTypeError(REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE);\n    }\n\n    let accumulator, start;\n    if (opts.length === 0) {\n      accumulator = convertToNumber(float16bitsArray[length - 1]);\n      start = length - 2;\n    } else {\n      accumulator = opts[0];\n      start = length - 1;\n    }\n\n    for (let i = start; i >= 0; --i) {\n      accumulator = callback(\n        accumulator,\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this\n      );\n    }\n\n    return accumulator;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach */\n  forEach(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      ReflectApply(callback, thisArg, [\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this,\n      ]);\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.find */\n  find(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return value;\n      }\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex */\n  findIndex(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/proposal-array-find-from-last/index.html#sec-%typedarray%.prototype.findlast */\n  findLast(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = length - 1; i >= 0; --i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return value;\n      }\n    }\n  }\n\n  /** @see https://tc39.es/proposal-array-find-from-last/index.html#sec-%typedarray%.prototype.findlastindex */\n  findLastIndex(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = length - 1; i >= 0; --i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.every */\n  every(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      if (\n        !ReflectApply(callback, thisArg, [\n          convertToNumber(float16bitsArray[i]),\n          i,\n          this,\n        ])\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.some */\n  some(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      if (\n        ReflectApply(callback, thisArg, [\n          convertToNumber(float16bitsArray[i]),\n          i,\n          this,\n        ])\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.set */\n  set(input, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const targetOffset = ToIntegerOrInfinity(opts[0]);\n    if (targetOffset < 0) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    if (input == null) {\n      throw NativeTypeError(\n        CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n      );\n    }\n\n    if (isNativeBigIntTypedArray(input)) {\n      throw NativeTypeError(\n        CANNOT_MIX_BIGINT_AND_OTHER_TYPES\n      );\n    }\n\n    // for optimization\n    if (isFloat16Array(input)) {\n      // peel off Proxy\n      return TypedArrayPrototypeSet(\n        getFloat16BitsArray(this),\n        getFloat16BitsArray(input),\n        targetOffset\n      );\n    }\n\n    if (isNativeTypedArray(input)) {\n      const buffer = TypedArrayPrototypeGetBuffer(input);\n      if (IsDetachedBuffer(buffer)) {\n        throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n      }\n    }\n\n    const targetLength = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    const src = NativeObject(input);\n    const srcLength = ToLength(src.length);\n\n    if (targetOffset === Infinity || srcLength + targetOffset > targetLength) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    for (let i = 0; i < srcLength; ++i) {\n      float16bitsArray[i + targetOffset] = roundToFloat16Bits(src[i]);\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse */\n  reverse() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeReverse(float16bitsArray);\n\n    return this;\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed */\n  toReversed() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n\n    const clonedFloat16bitsArray = getFloat16BitsArray(cloned);\n    TypedArrayPrototypeReverse(clonedFloat16bitsArray);\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill */\n  fill(value, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeFill(\n      float16bitsArray,\n      roundToFloat16Bits(value),\n      ...safeIfNeeded(opts)\n    );\n\n    return this;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin */\n  copyWithin(target, start, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeCopyWithin(float16bitsArray, target, start, ...safeIfNeeded(opts));\n\n    return this;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort */\n  sort(compareFn) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const sortCompare = compareFn !== undefined ? compareFn : defaultCompare;\n    TypedArrayPrototypeSort(float16bitsArray, (x, y) => {\n      return sortCompare(convertToNumber(x), convertToNumber(y));\n    });\n\n    return this;\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toSorted */\n  toSorted(compareFn) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    if (compareFn !== undefined && typeof compareFn !== \"function\") {\n      throw new NativeTypeError(THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED);\n    }\n    const sortCompare = compareFn !== undefined ? compareFn : defaultCompare;\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n\n    const clonedFloat16bitsArray = getFloat16BitsArray(cloned);\n    TypedArrayPrototypeSort(clonedFloat16bitsArray, (x, y) => {\n      return sortCompare(convertToNumber(x), convertToNumber(y));\n    });\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice */\n  slice(start, end) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const uint16 = new NativeUint16Array(\n        TypedArrayPrototypeGetBuffer(float16bitsArray),\n        TypedArrayPrototypeGetByteOffset(float16bitsArray),\n        TypedArrayPrototypeGetLength(float16bitsArray)\n      );\n      return new Float16Array(\n        TypedArrayPrototypeGetBuffer(\n          TypedArrayPrototypeSlice(uint16, start, end)\n        )\n      );\n    }\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeStart = ToIntegerOrInfinity(start);\n    const relativeEnd = end === undefined ? length : ToIntegerOrInfinity(end);\n\n    let k;\n    if (relativeStart === -Infinity) {\n      k = 0;\n    } else if (relativeStart < 0) {\n      k = length + relativeStart > 0 ? length + relativeStart : 0;\n    } else {\n      k = length < relativeStart ? length : relativeStart;\n    }\n\n    let final;\n    if (relativeEnd === -Infinity) {\n      final = 0;\n    } else if (relativeEnd < 0) {\n      final = length + relativeEnd > 0 ? length + relativeEnd : 0;\n    } else {\n      final = length < relativeEnd ? length : relativeEnd;\n    }\n\n    const count = final - k > 0 ? final - k : 0;\n    const array = new Constructor(count);\n    assertSpeciesTypedArray(array, count);\n\n    if (count === 0) {\n      return array;\n    }\n\n    const buffer = TypedArrayPrototypeGetBuffer(float16bitsArray);\n    if (IsDetachedBuffer(buffer)) {\n      throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n    }\n\n    let n = 0;\n    while (k < final) {\n      array[n] = convertToNumber(float16bitsArray[k]);\n      ++k;\n      ++n;\n    }\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray */\n  subarray(begin, end) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const uint16Subarray = TypedArrayPrototypeSubarray(uint16, begin, end);\n\n    const array = new Constructor(\n      TypedArrayPrototypeGetBuffer(uint16Subarray),\n      TypedArrayPrototypeGetByteOffset(uint16Subarray),\n      TypedArrayPrototypeGetLength(uint16Subarray)\n    );\n    assertSpeciesTypedArray(array);\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof */\n  indexOf(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = ToIntegerOrInfinity(opts[0]);\n    if (from === Infinity) {\n      return -1;\n    }\n\n    if (from < 0) {\n      from += length;\n      if (from < 0) {\n        from = 0;\n      }\n    }\n\n    for (let i = from; i < length; ++i) {\n      if (\n        ObjectHasOwn(float16bitsArray, i) &&\n        convertToNumber(float16bitsArray[i]) === element\n      ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof */\n  lastIndexOf(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = opts.length >= 1 ? ToIntegerOrInfinity(opts[0]) : length - 1;\n    if (from === -Infinity) {\n      return -1;\n    }\n\n    if (from >= 0) {\n      from = from < length - 1 ? from : length - 1;\n    } else {\n      from += length;\n    }\n\n    for (let i = from; i >= 0; --i) {\n      if (\n        ObjectHasOwn(float16bitsArray, i) &&\n        convertToNumber(float16bitsArray[i]) === element\n      ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes */\n  includes(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = ToIntegerOrInfinity(opts[0]);\n    if (from === Infinity) {\n      return false;\n    }\n\n    if (from < 0) {\n      from += length;\n      if (from < 0) {\n        from = 0;\n      }\n    }\n\n    const isNaN = NumberIsNaN(element);\n    for (let i = from; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n\n      if (isNaN && NumberIsNaN(value)) {\n        return true;\n      }\n\n      if (value === element) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.join */\n  join(separator) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const array = copyToArray(float16bitsArray);\n\n    return ArrayPrototypeJoin(array, separator);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring */\n  toLocaleString(...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const array = copyToArray(float16bitsArray);\n\n    return ArrayPrototypeToLocaleString(array, ...safeIfNeeded(opts));\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-get-%typedarray%.prototype-@@tostringtag */\n  get [SymbolToStringTag]() {\n    if (isFloat16Array(this)) {\n      return /** @type {any} */ (\"Float16Array\");\n    }\n  }\n}\n\n/** @see https://tc39.es/ecma262/#sec-typedarray.bytes_per_element */\nObjectDefineProperty(Float16Array, \"BYTES_PER_ELEMENT\", {\n  value: BYTES_PER_ELEMENT,\n});\n\n// limitation: It is peaked by `Object.getOwnPropertySymbols(Float16Array)` and `Reflect.ownKeys(Float16Array)`\nObjectDefineProperty(Float16Array, brand, {});\n\n/** @see https://tc39.es/ecma262/#sec-properties-of-the-typedarray-constructors */\nReflectSetPrototypeOf(Float16Array, TypedArray);\n\nconst Float16ArrayPrototype = Float16Array.prototype;\n\n/** @see https://tc39.es/ecma262/#sec-typedarray.prototype.bytes_per_element */\nObjectDefineProperty(Float16ArrayPrototype, \"BYTES_PER_ELEMENT\", {\n  value: BYTES_PER_ELEMENT,\n});\n\n/** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator */\nObjectDefineProperty(Float16ArrayPrototype, SymbolIterator, {\n  value: Float16ArrayPrototype.values,\n  writable: true,\n  configurable: true,\n});\n\nReflectSetPrototypeOf(Float16ArrayPrototype, TypedArrayPrototype);\n","\nconst hex2rgba = (hexstr: string, out_type?: string) : [number, number, number, number] => {\n    out_type = out_type === undefined ? 'float' : out_type;\n\n    const match = hexstr.match(/#([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?/i);\n    if (match === null) {\n        throw `Got '${hexstr}' in hex2rgba, which does not look like a hex color`;\n    }\n\n    let rgba = match.slice(1).filter(c => c !== undefined).map(c => parseInt(c, 16));\n\n    if (out_type == 'float') {\n        rgba = rgba.map(c => c / 255);\n    }\n\n    return rgba[3] === undefined ? [rgba[0], rgba[1], rgba[2], 1] : [rgba[0], rgba[1], rgba[2], rgba[3]];\n}\n\nconst rgba2hex = (rgba: [number, number, number, number], in_type?: string) : string => {\n    in_type = in_type === undefined ? 'float' : in_type;\n\n    let rgba_ = rgba as number[];\n    if (in_type == 'float') {\n        rgba_ = rgba_.map(c => Math.round(c * 255));\n    }\n\n    return '#' + rgba_.map(c => c.toString(16).padStart(2, '0').toUpperCase()).join('');\n}\n\nconst rgb2hsv = (rgb: [number, number, number]) : [number, number, number] => {\n    const [r, g, b] = rgb;\n\n    const Cmax = Math.max(r, g, b);\n    const Cmin = Math.min(r, g, b);\n    const Delta = Cmax - Cmin;\n    \n    let H: number;\n    if (Delta == 0) {\n        H = 0;\n    }\n    else if (Cmax == r) {\n        H = 60 * ((g - b) / Delta) % 6;\n    }\n    else if (Cmax == g) {\n        H = 60 * ((b - r) / Delta + 2);\n    }\n    else if (Cmax == b) {\n        H = 60 * ((r - g) / Delta + 4);\n    }\n    else {\n        throw \"You've messed something up in rgb2hsv()\";\n    }\n\n    let S = Cmax == 0 ? 0 : Delta / Cmax;\n    let V = Cmax;\n\n    return [H, S, V];\n}\n\nconst hsv2rgb = (hsv: [number, number, number]) : [number, number, number] => {\n    const [H, S, V] = hsv;\n\n    const C = V * S;\n    const X = C * (1 - Math.abs(H / 60 % 2 - 1));\n    const m = V - C;\n\n    let r_prime, g_prime, b_prime;\n    if (0 <= H && H < 60) {\n        r_prime = C; g_prime = X, b_prime = 0;\n    }\n    else if (60 <= H && H < 120) {\n        r_prime = X; g_prime = C, b_prime = 0;\n    }\n    else if (120 <= H && H < 180) {\n        r_prime = 0; g_prime = C, b_prime = X;\n    }\n    else if (180 <= H && H < 240) {\n        r_prime = 0; g_prime = X, b_prime = C;\n    }\n    else if (240 <= H && H < 300) {\n        r_prime = X; g_prime = 0, b_prime = C;\n    }\n    else if (300 <= H && H < 360) {\n        r_prime = C; g_prime = 0, b_prime = X;\n    }\n    else {\n        throw \"H is out of bounds in hsv2rgb\";\n    }\n\n    return [r_prime + m, g_prime + m, b_prime + m];\n}\n\n/** A class for handling colors and translations between different color spaces */\nclass Color {\n    private rgba: [number, number, number, number];\n\n    /**\n     * Create a new color object\n     * @param rgba - An RGBA tuple of floats between 0 and 1\n     */\n    constructor(rgba: [number, number, number, number]) {\n        this.rgba = rgba;\n    }\n\n    /**\n     * The red component of the color as a float value between 0 and 1\n     */\n    get r() {\n        return this.rgba[0];\n    }\n\n    /**\n     * The green component of the color as a float value between 0 and 1\n     */\n    get g() {\n        return this.rgba[1];\n    }\n\n    /**\n     * The blue component of the color as a float value between 0 and 1\n     */\n    get b() {\n        return this.rgba[2];\n    }\n\n    /**\n     * The alpha component (opacity) of the color as a float value between 0 and 1\n     */\n    get a() {\n        return this.rgba[3];\n    }\n\n    /**\n     * @param opacity - The new alpha component (opacity)\n     * @returns A new color with the alpha component set to opacity.\n     */\n    withOpacity(opacity: number) {\n        return new Color([this.r, this.g, this.b, opacity]);\n    }\n\n    /**\n     * @returns The color as an RGB hex string (e.g., '#dedbef')\n     */\n    toRGBHex() {\n        return this.toRGBAHex().slice(0, -2);\n    }\n\n    /**\n     * @returns The color as an RGBA hex string (e.g., '#dedbefff')\n     */\n    toRGBAHex() {\n        return rgba2hex(this.rgba);\n    }\n\n    /**\n     * @returns The color as an RGBA float tuple\n     */\n    toRGBATuple() {\n        return this.rgba;\n    }\n\n    /**\n     * @returns The color as a tuple of HSV values\n     */\n    toHSVTuple() {\n        return rgb2hsv([this.r, this.g, this.b]);\n    }\n\n    /**\n     * @param hex - An RGB or RGBA hex string to parse\n     * @returns a new Color object\n     */\n    static fromHex(hex: string) {\n        return new Color(hex2rgba(hex));\n    }\n\n    /**\n     * @param hsv - A tuple of HSV values\n     * @returns a new Color object\n     */\n    static fromHSVTuple(hsv: [number, number, number]) {\n        const rgb = hsv2rgb(hsv);\n        return new Color([rgb[0], rgb[1], rgb[2], 1]);\n    }\n\n    static normalizeColor(color: Color | string) {\n        return color instanceof Color ? color : Color.fromHex(color);\n    }\n}\n\nexport {Color};","\nimport spd500_colormap_data from \"./json/pw500speed_colormap.json\";\nimport spd850_colormap_data from \"./json/pw850speed_colormap.json\";\nimport cape_colormap_data from \"./json/pwcape_colormap.json\";\nimport t2m_colormap_data from \"./json/pwt2m_colormap.json\";\nimport td2m_colormap_data from \"./json/pwtd2m_colormap.json\";\nimport nws_storm_clear_refl_colormap_data from \"./json/nws_storm_clear_refl_colormap.json\";\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { WGLProgram, WGLTexture } from \"autumn-wgl\";\nimport { WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { getGLFormatTypeAlignment } from \"./PlotComponent\";\nimport { Color } from \"./Color\";\nimport { mergeShaderCode } from \"./utils\";\n\nconst colormap_shader_src = require('./glsl/colormap.glsl');\n\n/** Options for {@link ColorMap}s */\ninterface ColorMapOptions {\n    /** The color to use for areas where the value is above the highest value in the color map */\n    overflow_color?: Color | string;\n\n    /** The color to use for areas where the value is below the lowest value in the color map */\n    underflow_color?: Color | string;\n}\n\n/** A mapping from values to colors */\nclass ColorMap {\n    public readonly levels: number[];\n    public readonly colors: Color[];\n    public readonly overflow_color: Color | null;\n    public readonly underflow_color: Color | null;\n\n    /**\n     * Create a color map\n     * @param levels - The list of levels. The number of levels should always be one more than the number of colors.\n     * @param colors - A list of colors\n     * @param opts   - Options for the color map\n     */\n    constructor(levels: number[], colors: Color[] | string[], opts?: ColorMapOptions) {\n        if (levels.length != colors.length + 1) {\n            throw `Mismatch between number of levels (${levels.length}) and number of colors (${colors.length}; expected ${levels.length - 1})`;\n        }\n\n        this.levels = levels;\n        this.colors = colors.map(c => Color.normalizeColor(c));\n\n        opts = opts === undefined ? {} : opts;\n        this.overflow_color = opts.overflow_color === undefined ? null : Color.normalizeColor(opts.overflow_color);\n        this.underflow_color = opts.underflow_color === undefined ? null : Color.normalizeColor(opts.underflow_color);\n    }\n\n    /**\n     * @returns an array of hex color strings\n     */\n    public getColors() : string[] {\n        return this.colors.map(s => s.toRGBHex());\n    }\n\n    /**\n     * @returns an array of opacities, one for each color in the color map\n     */\n    public getOpacities() : number[] {\n        return this.colors.map(s => s.a);\n    }\n\n    /**\n     * Make a new color map with different opacities. The opacities are set by func.\n     * @param func - A function which takes the two levels associated with a color (an upper and lower bound) and returns an opacity in the range from 0 to 1.\n     * @returns A new color map\n     */\n    public withOpacity(func: (level_lower: number, level_upper: number) => number) {\n        const new_colors: Color[] = [];\n        const new_levels: number[] = [];\n        const opts: ColorMapOptions = {};\n\n        for (let ic = 0 ; ic < this.colors.length ; ic++) {\n            const color = this.colors[ic];\n            const level_lower = this.levels[ic];\n            const level_upper = this.levels[ic + 1];\n\n            const new_opacity = func(level_lower, level_upper)\n            const new_color = color.withOpacity(new_opacity);\n            if (new_opacity > 0) {\n                if (new_levels[new_levels.length - 1] != level_lower)\n                    new_levels.push(level_lower)\n                new_levels.push(level_upper);\n                new_colors.push(new_color);\n            }\n        }\n\n        if (this.underflow_color !== null) {\n            const underflow_opacity = func(this.levels[0], this.levels[0]);\n            if (underflow_opacity > 0) {\n                opts.underflow_color = this.underflow_color.withOpacity(underflow_opacity);\n            }\n        }\n\n        if (this.overflow_color !== null) {\n            const overflow_opacity = func(this.levels[this.levels.length - 1], this.levels[this.levels.length - 1]);\n            if (overflow_opacity > 0) {\n                opts.overflow_color = this.overflow_color.withOpacity(overflow_opacity);\n            }\n        }\n        \n        return new ColorMap(new_levels, new_colors, opts);\n    }\n\n    /**\n     * Create a diverging color map using two input colors\n     * @param color1    - The color corresponding to the lowest value in the color map\n     * @param color2    - The color corresponding to the highest value in the color map\n     * @param level_min - The lowest value in the color map\n     * @param level_max - The highest value in the color map\n     * @param n_colors  - The number of colors to use\n     * @returns a Colormap object\n     */\n    public static diverging(color1: string, color2: string, level_min: number, level_max: number, n_colors: number) {\n        const stops: Color[] = [];\n        const levels: number[] = [];\n\n        const level_step = (level_max - level_min) / (n_colors - 1);\n        const crossover = (level_max + level_min) / 2;\n        const crossover_hsv: [number, number, number] = [0, 0, 0.9];\n\n        const color1_hsv = Color.fromHex(color1).toHSVTuple();\n        const color2_hsv = Color.fromHex(color2).toHSVTuple();\n        const interp_fac_power = 1.5;\n\n        for (let istop = 0; istop < n_colors; istop++) {\n            const level = level_min + istop * level_step;\n            let h, s, v;\n            let interp_fac;\n            if (level < crossover) {\n                interp_fac = Math.pow((crossover - level) / (crossover - level_min), interp_fac_power);\n\n                [h, s, v] = [\n                    color1_hsv[0], \n                    crossover_hsv[1] + (color1_hsv[1] - crossover_hsv[1]) * interp_fac,\n                    crossover_hsv[2] + (color1_hsv[2] - crossover_hsv[2]) * interp_fac]\n            }\n            else {\n                interp_fac = Math.pow((level - crossover) / (level_max - crossover), interp_fac_power);\n                \n                [h, s, v] = [\n                    color2_hsv[0], \n                    crossover_hsv[1] + (color2_hsv[1] - crossover_hsv[1]) * interp_fac,\n                    crossover_hsv[2] + (color2_hsv[2] - crossover_hsv[2]) * interp_fac]\n            }\n\n            stops.push(Color.fromHSVTuple([h, s, v]).withOpacity(Math.min(2 * interp_fac, 1)));\n        }\n\n        for (let ilev = 0; ilev <= n_colors; ilev++) {\n            const level_step = (level_max - level_min) / n_colors;\n            levels.push(level_min + ilev * level_step);\n        }\n\n        return new ColorMap(levels, stops);\n    }\n}\n\nfunction buildColormap(cm_data: {levels: number[], colors: string[]}, overflow: 'under' | 'over' | 'both' | 'neither') {\n    const n_colors = cm_data.colors.length;\n    const opts: ColorMapOptions = {};\n\n    if (overflow == 'over' || overflow == 'both') {\n        opts.overflow_color = cm_data.colors[n_colors - 1];\n    }\n    if (overflow == 'under' || overflow == 'both') {\n        opts.underflow_color = cm_data.colors[0];\n    }\n\n    return new ColorMap(cm_data.levels, cm_data.colors, opts);\n}\n\n// Some built-in colormaps\nconst pw_speed500mb = buildColormap(spd500_colormap_data, 'over').withOpacity((levl, levu) => Math.min((levu - 20) / 10, 1.));\nconst pw_speed850mb = buildColormap(spd850_colormap_data, 'over').withOpacity((levl, levu) => Math.min((levu - 20) / 10, 1.));\nconst pw_cape = buildColormap(cape_colormap_data, 'over').withOpacity((levl, levu) => Math.min(levu / 1000., 1.));\nconst pw_t2m = buildColormap(t2m_colormap_data, 'both');\nconst pw_td2m = buildColormap(td2m_colormap_data, 'both');\nconst nws_storm_clear_refl = buildColormap(nws_storm_clear_refl_colormap_data, 'over');\n\n/**\n * Create a diverging red/blue colormap, where red corresponds to the lowest value and blue corresponds to the highest value\n * @param level_min - The lowest value in the color map\n * @param level_max - The highest value in the color map\n * @param n_colors  - The number of colors\n * @returns a Colormap object\n */\nconst redblue = (level_min: number, level_max: number, n_colors: number) => {\n    return ColorMap.diverging('#ff0000', '#0000ff', level_min, level_max, n_colors);\n}\n\n/**\n * Create a diverging blue/red colormap, where blue corresponds to the lowest value and red corresponds to the highest value\n * @param level_min - The lowest value in the color map\n * @param level_max - The highest value in the color map\n * @param n_colors  - The number of colors\n * @returns a Colormap object\n */\nconst bluered = (level_min: number, level_max: number, n_colors: number) => {\n    return ColorMap.diverging('#0000ff', '#ff0000', level_min, level_max, n_colors);\n}\n\n\ninterface ColorMapGLElems {\n    cmap_texture: WGLTexture;\n    cmap_nonlin_texture: WGLTexture;\n}\n\nconst N_INDEX_MAP = 101;\n\nclass ColorMapGPUInterface {\n    public readonly colormap: ColorMap;\n    public gl_elems: ColorMapGLElems | null;\n\n    constructor(colormap: ColorMap) {\n        this.colormap = colormap;\n        this.gl_elems = null;\n    }\n\n    public static applyShader(shader_src: string) {        \n        return mergeShaderCode(colormap_shader_src, shader_src);\n    }\n\n    public setupShaderVariables(gl: WebGLAnyRenderingContext, mag_filter: number) {\n        const index_map = makeIndexMap(this.colormap);\n        const cmap_image = makeTextureImage(this.colormap);\n\n        const {format: format_nonlin, type: type_nonlin, row_alignment: row_alignment_nonlin} = getGLFormatTypeAlignment(gl, 'float16');\n\n        const cmap_image_spec = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'image': cmap_image, 'mag_filter': mag_filter};\n        const cmap_texture = new WGLTexture(gl, cmap_image_spec);\n\n        const cmap_nonlin_image = {'format': format_nonlin, 'type': type_nonlin, \n            'width': index_map.length, 'height': 1,\n            'image': new Uint16Array(index_map.buffer), \n            'mag_filter': gl.LINEAR, 'row_alignment': row_alignment_nonlin,\n        };\n\n        const cmap_nonlin_texture = new WGLTexture(gl, cmap_nonlin_image);\n        this.gl_elems = {cmap_texture: cmap_texture, cmap_nonlin_texture: cmap_nonlin_texture};\n    }\n\n    public bindShaderVariables(program: WGLProgram) {\n        if (this.gl_elems === null) return;\n\n        const cmap = this.colormap;\n        const underflow_color = cmap.underflow_color === null ? [0, 0, 0, 0] : cmap.underflow_color.toRGBATuple();\n        const overflow_color = cmap.overflow_color === null ? [0, 0, 0, 0] : cmap.overflow_color.toRGBATuple();\n\n        program.setUniforms({'u_cmap_min': cmap.levels[0], 'u_cmap_max': cmap.levels[cmap.levels.length - 1],\n                             'u_n_index': N_INDEX_MAP, 'u_underflow_color': underflow_color, 'u_overflow_color': overflow_color});\n        program.bindTextures({'u_cmap_sampler': this.gl_elems.cmap_texture, 'u_cmap_nonlin_sampler': this.gl_elems.cmap_nonlin_texture});\n    }\n}\n\n/**\n * Make a canvas image corresponding to a color map\n * @param colormap - The color map to use\n * @returns A canvas element containing each color of the color map\n */\nfunction makeTextureImage(colormap: ColorMap) {\n    const cmap_image = document.createElement('canvas');\n    cmap_image.width = colormap.colors.length;\n    cmap_image.height = 1;\n\n    let ctx = cmap_image.getContext('2d');\n\n    colormap.colors.forEach((stop, istop) => {\n        if (ctx === null) {\n            throw \"Could not get rendering context for colormap image canvas\";\n        }\n\n        ctx.fillStyle = stop.toRGBAHex();\n        ctx.fillRect(istop, 0, 1, 1);\n    });\n\n    return cmap_image;\n}\n\nfunction makeIndexMap(colormap: ColorMap) {\n    // Build a texture to account for nonlinear colormaps (basically inverts the relationship between\n    //  the normalized index and the normalized level)\n    const n_nonlin = N_INDEX_MAP;\n    const map_norm = [];\n    for (let i = 0; i < n_nonlin; i++) {\n        map_norm.push(i / (n_nonlin - 1));\n    }\n\n    const levels = colormap.levels;\n    const n_lev = levels.length - 1;\n\n    const input_norm = levels.map((lev, ilev) => ilev / n_lev);\n    const cmap_norm = levels.map(lev => (lev - levels[0]) / (levels[n_lev] - levels[0]));\n    const inv_cmap_norm = map_norm.map(lev => {\n        let jlev;\n        for (jlev = 0; !(cmap_norm[jlev] <= lev && lev <= cmap_norm[jlev + 1]); jlev++) {}\n\n        const alpha = (lev - cmap_norm[jlev]) / (cmap_norm[jlev + 1] - cmap_norm[jlev]);\n        return input_norm[jlev] * (1 - alpha) + input_norm[jlev + 1] * alpha;\n    });\n\n    return new Float16Array(inv_cmap_norm);\n}\n\nexport {ColorMap, ColorMapGPUInterface, bluered, redblue, pw_speed500mb, pw_speed850mb, pw_cape, pw_t2m, pw_td2m, nws_storm_clear_refl}\nexport type {ColorMapOptions};","import { WGLProgram } from \"autumn-wgl\";\nimport { RenderShaderData, RendererData, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { mergeShaderCode } from \"./utils\";\n\nclass ShaderProgramManager {\n    public readonly vertex_shader_src: string;\n    public readonly fragment_shader_src: string;\n    public readonly shader_defines: string[];\n    private readonly program_map:  Map<string, WGLProgram>;\n\n    constructor(vertex_shader_src: string, fragment_shader_src: string, shader_defines: string[]) {\n        this.vertex_shader_src = vertex_shader_src;\n        this.fragment_shader_src = fragment_shader_src;\n        this.shader_defines = shader_defines;\n\n        this.program_map = new Map();\n    }\n\n    public getShaderProgram(gl: WebGLAnyRenderingContext, shader_data: RenderShaderData | null) {\n        const shader_key = shader_data === null ? 'default' : shader_data.variantName;\n\n        const cached_program = this.program_map.get(shader_key);\n        if (cached_program !== undefined) {\n            return cached_program;\n        }\n\n        let vertex_src = this.vertex_shader_src;\n        if (shader_data !== null) {\n            vertex_src = mergeShaderCode(shader_data.vertexShaderPrelude + '\\n' + shader_data.define, vertex_src);\n        }\n        else {\n            const prelude = `\n            uniform mat4 u_projection_matrix;\n\n            vec4 projectTile(vec2 p) {\n                vec4 result = u_projection_matrix * vec4(p, 0.0, 1.0);\n                return result;\n            }`;\n\n            vertex_src = mergeShaderCode(prelude, vertex_src);\n        }\n\n        const program = new WGLProgram(gl, vertex_src, this.fragment_shader_src, {define: this.shader_defines});\n        this.program_map.set(shader_key, program);\n\n        return program;\n    }\n\n    public getShaderUniforms(render_data: RendererData) : Record<string, number | number[]> {\n        if (render_data.type == 'maplibre') {\n            if (render_data.shaderData.define.includes('GLOBE')) {\n                return {\n                    'u_projection_matrix': render_data.defaultProjectionData.mainMatrix,\n                    'u_projection_fallback_matrix': render_data.defaultProjectionData.fallbackMatrix,\n                    'u_projection_tile_mercator_coords': render_data.defaultProjectionData.tileMercatorCoords,\n                    'u_projection_clipping_plane': render_data.defaultProjectionData.clippingPlane,\n                    'u_projection_transition': render_data.defaultProjectionData.projectionTransition\n                };\n            }\n            else {\n                return {\n                    'u_projection_matrix': render_data.defaultProjectionData.mainMatrix,\n                };\n            }\n        }\n        else {\n            return {\n                'u_projection_matrix': render_data.mainMatrix,\n            }\n        }\n    }\n}\n\nexport {ShaderProgramManager};","\nimport { WGLBuffer, WGLTexture } from \"autumn-wgl\";\nimport { Polyline, LineData, WebGLAnyRenderingContext, isWebGL2Ctx, RenderMethodArg, getRendererData } from \"./AutumnTypes\";\nimport { ColorMap, ColorMapGPUInterface } from \"./Colormap\";\nimport { Color } from \"./Color\";\nimport { layer_worker } from \"./PlotComponent\";\nimport { ShaderProgramManager } from \"./ShaderManager\";\n\nconst polyline_vertex_src = require('./glsl/polyline_vertex.glsl');\nconst polyline_fragment_src = require('./glsl/polyline_fragment.glsl');\n\n/**\n * A style to use to draw lines. The possible options are '-' for a solid line, '--' for a dashed line, ':' for a\n *  dotted line, '-.' for a dash-dot line, or you could pass a list of numbers (e.g., [1, 1, 1, 0, 1, 0]) to\n *  specify a custom dash scheme.\n */\ntype LineStyle = \"-\" | \"--\" | \":\" | \"-.\" | number[];\n\nconst dash_arrays: Record<Exclude<LineStyle, number[]>, number[]> = {\n    \"-\": [1],\n    \"--\": [1, 1, 1, 1, 0, 0],\n    \":\": [1, 0],\n    \"-.\": [1, 1, 1, 0, 1, 0],\n}\n\nfunction isLineStyle(obj: any) : obj is LineStyle {\n    return obj in dash_arrays || Array.isArray(obj) && obj.length > 0 && obj.map(e => typeof e === 'number').reduce((a, b) => a && b, true);\n}\n\ninterface PolylineCollectionOpts {\n    offset_scale?: number;\n    offset_rotates_with_map?: boolean;\n    color?: string;\n    cmap?: ColorMap;\n    line_width?: number;\n    line_style?: LineStyle | number[];\n}\n\nfunction makeDashTexture(gl: WebGLAnyRenderingContext, line_style: LineStyle) {\n\n    const dash_array = Array.isArray(line_style) ? line_style : dash_arrays[line_style];\n\n    const is_webgl2 = isWebGL2Ctx(gl);\n    const format = is_webgl2 ? gl.R8 : gl.LUMINANCE;\n    const type = gl.UNSIGNED_BYTE;\n    const row_alignment = 1;\n\n    const fill_image = {'format': format, 'type': type,\n        'width': dash_array.length, 'height': 1, 'image': new Uint8Array(dash_array.map(d => d > 0 ? 255 : 0)),\n        'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n    };\n\n    return [dash_array.length, new WGLTexture(gl, fill_image)] as [number, WGLTexture];\n}\n\nclass PolylineCollection {\n    public readonly width: number;\n    public readonly scale: number | null;\n\n    private readonly shader_manager: ShaderProgramManager;\n\n    private readonly vertices: WGLBuffer;\n    private readonly extrusion: WGLBuffer;\n\n    private readonly offset: WGLBuffer | null;\n    private readonly min_zoom: WGLBuffer | null;\n    private readonly line_data: WGLBuffer | null;\n    private readonly color: Color;\n    private readonly cmap_gpu: ColorMapGPUInterface | null;\n    private readonly offset_rotates_with_map: boolean;\n    private readonly dash_texture: WGLTexture;\n    private readonly n_dash: number;\n\n    private constructor(gl: WebGLAnyRenderingContext, polyline: Polyline, opts?: PolylineCollectionOpts) {\n        opts = opts === undefined ? {} : opts;\n        const color_hex = opts.color === undefined ? '#000000' : opts.color;\n        this.color = Color.fromHex(color_hex);\n\n        const line_width = opts.line_width === undefined ? 1 : opts.line_width;\n        const line_style = opts.line_style === undefined ? '-' : opts.line_style;\n        this.offset_rotates_with_map = opts.offset_rotates_with_map === undefined ? true : opts.offset_rotates_with_map;\n\n        this.width = line_width;\n\n        const shader_defines = [];\n\n        this.vertices = new WGLBuffer(gl, polyline['vertices'], 3, gl.TRIANGLE_STRIP);\n        this.extrusion = new WGLBuffer(gl, polyline['extrusion'], 2, gl.TRIANGLE_STRIP);\n\n        if (polyline.offsets !== undefined) {\n            this.offset = new WGLBuffer(gl, polyline.offsets, 2, gl.TRIANGLE_STRIP);\n            this.scale = opts.offset_scale === undefined ? 1 : opts.offset_scale;\n            shader_defines.push('OFFSET');\n        }\n        else {\n            this.offset = null;\n            this.scale = null;\n        }\n\n        if (polyline.zoom !== undefined) {\n            this.min_zoom = new WGLBuffer(gl, polyline.zoom, 1, gl.TRIANGLE_STRIP);\n            shader_defines.push('ZOOM');\n        }\n        else {\n            this.min_zoom = null;\n        }\n\n        let fragment_src = polyline_fragment_src;\n        if (polyline.data !== undefined) {\n            shader_defines.push('DATA');\n\n            this.line_data = new WGLBuffer(gl, polyline.data, 1, gl.TRIANGLE_STRIP);\n\n            const cmap = opts.cmap === undefined ? new ColorMap([0, 1], [color_hex], {overflow_color: color_hex, underflow_color: color_hex}) : opts.cmap;\n            this.cmap_gpu = new ColorMapGPUInterface(cmap);\n            this.cmap_gpu.setupShaderVariables(gl, gl.NEAREST);\n\n            fragment_src = ColorMapGPUInterface.applyShader(fragment_src);\n        }\n        else {\n            this.line_data = null;\n            this.cmap_gpu = null;\n        }\n\n        [this.n_dash, this.dash_texture] = makeDashTexture(gl, line_style);\n        this.shader_manager = new ShaderProgramManager(polyline_vertex_src, fragment_src, shader_defines);\n    }\n\n    static async make(gl: WebGLAnyRenderingContext, lines: LineData[], opts?: PolylineCollectionOpts) {\n        const polylines = await layer_worker.makePolyLines(lines);\n        return new PolylineCollection(gl, polylines, opts);\n    }\n\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg, [map_width, map_height]: [number, number], map_zoom: number, map_bearing: number, map_pitch: number) {\n        const render_data = getRendererData(arg);\n        const program = this.shader_manager.getShaderProgram(gl, render_data.shaderData);\n\n        const attributes: Record<string, WGLBuffer> = {'a_pos': this.vertices, 'a_extrusion': this.extrusion};\n        const uniforms: Record<string, number | number[]> = {\n            'u_line_width': this.width, 'u_map_width': map_width, 'u_map_height': map_height, 'u_offset': 0, 'u_zoom': map_zoom,\n            'u_dash_pattern_length': this.n_dash, ...this.shader_manager.getShaderUniforms(render_data)\n        };\n        const textures: Record<string, WGLTexture> = {'u_dash_sampler': this.dash_texture};\n\n        if (this.offset !== null && this.scale !== null) {\n            attributes['a_offset'] = this.offset;\n            uniforms['u_offset_scale'] = this.scale * (map_height / map_width);\n            uniforms['u_offset_rotates_with_map'] = this.offset_rotates_with_map ? 1 : 0;\n        }\n\n        if (this.min_zoom !== null) {\n            attributes['a_min_zoom'] = this.min_zoom;\n        }\n\n        if (this.line_data !== null) {\n            attributes['a_data'] = this.line_data;\n        }\n        else {\n            uniforms['u_color'] = this.color.toRGBATuple();\n        }\n\n        program.use(attributes, uniforms, textures);\n\n        if (this.cmap_gpu !== null) {\n            this.cmap_gpu.bindShaderVariables(program);\n        }\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        program.draw();\n\n        if (render_data.type != 'maplibre' || !render_data.shaderData.define.includes('GLOBE')) {\n            program.setUniforms({'u_offset': -2});\n            program.draw();\n\n            program.setUniforms({'u_offset': -1});\n            program.draw();\n\n            program.setUniforms({'u_offset': 1});\n            program.draw();\n        }\n    }\n}\n\nexport {PolylineCollection, isLineStyle};\nexport type {PolylineCollectionOpts, LineStyle};","import { getRendererData, isWebGL2Ctx, RenderMethodArg, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { LngLat } from \"./Map\";\nimport { ShaderProgramManager } from \"./ShaderManager\";\nimport { Cache, normalizeOptions } from \"./utils\";\n\nimport { WGLBuffer, WGLTexture } from \"autumn-wgl\";\n\nimport Protobuf from 'pbf';\nimport potpack, {PotpackBox} from \"potpack\";\n\nconst text_vertex_shader_src = require('./glsl/text_vertex.glsl');\nconst text_fragment_shader_src = require('./glsl/text_fragment.glsl');\n\nconst PADDING = 3\n\ninterface PBFGlyph {\n    id: number;\n    data: Uint8Array;\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    advance: number;\n}\n\ninterface Glyph {\n    id: number;\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    atlas_i: number;\n    atlas_j: number;\n    advance: number;\n}\n\nfunction parseFontPBF(data: Uint8Array) {\n    const readGlyph = (tag: number, glyph: any, pbf?: Protobuf) => {\n        if (pbf === undefined)\n            return;\n\n        switch (tag) {\n            case 1:\n                glyph.id = pbf.readVarint();\n                break;\n            case 2:\n                glyph.data = pbf.readBytes();\n                break;\n            case 3:\n                glyph.width = pbf.readVarint() + 2 * PADDING;\n                break;\n            case 4:\n                glyph.height = pbf.readVarint() + 2 * PADDING;\n                break;\n            case 5:\n                glyph.left = pbf.readSVarint();\n                break;\n            case 6:\n                glyph.top = pbf.readSVarint();\n                break;\n            case 7:\n                glyph.advance = pbf.readVarint();\n                break;\n        }\n    }\n\n    const readFontStack = (tag: number, glyphs?: PBFGlyph[], pbf?: Protobuf) => {\n        if (glyphs === undefined || pbf === undefined)\n            return;\n        \n        if (tag == 3) {\n            const glyph = pbf.readMessage(readGlyph, {} as PBFGlyph);\n            glyphs.push(glyph);\n        }\n    }\n\n    const readFontStacks = (tag: number, glyphs?: PBFGlyph[], pbf?: Protobuf) => {\n        if (pbf === undefined) \n            return;\n\n        if (tag == 1) {\n            pbf.readMessage(readFontStack, glyphs);\n        }\n    }\n\n    return new Protobuf(data).readFields(readFontStacks, []);\n}\n\ninterface FontAtlas {\n    atlas: Uint8Array;\n    atlas_width: number;\n    atlas_height: number;\n    baseline: number;\n    top: number;\n    glyph_info: Record<number, Glyph>;\n}\n\nfunction createAtlas(pbf_glyphs: PBFGlyph[]): FontAtlas {\n    const pbf_glyphs_filtered = pbf_glyphs.filter(glyph => glyph.data !== undefined);\n\n    const glyph_bins: {glyph: PBFGlyph, bin: PotpackBox}[] = [];\n\n    const bins = pbf_glyphs_filtered.map(glyph => {\n        const bin = {x: 0, y: 0, w: glyph.width, h: glyph.height} as PotpackBox;\n        glyph_bins.push({glyph: glyph, bin: bin});\n\n        return bin;\n    });\n\n    const {w: img_width, h: img_height} = potpack(bins);\n\n    const atlas_data = new Uint8Array(img_width * img_height);\n    const glyphs: Record<number, Glyph> = {}\n    let max_glyph_height = 0;\n\n    glyph_bins.forEach(glyph_bin => {\n        const {bin, glyph} = glyph_bin;\n\n        if (bin.x === undefined || bin.y === undefined)\n            throw `Potpack couldn't pack this pot, I guess?`;\n\n        glyphs[glyph.id] = {\n            id: glyph.id, width: glyph.width, height: glyph.height, left: glyph.left, top: glyph.top,\n            atlas_i: bin.x, atlas_j: bin.y, advance: glyph.advance\n        };\n\n        max_glyph_height = Math.max(max_glyph_height, glyph.height);\n\n        for (let i = 0; i < glyph.width; i++) {\n            for (let j = 0; j < glyph.height; j++) {\n                const glyph_idx = i + glyph.width * j;\n                const atlas_idx = (i + bin.x) + img_width * (j + bin.y);\n                atlas_data[atlas_idx] = glyph.data[glyph_idx];\n            }\n        }\n    });\n\n    const glyph_M = glyphs['M'.charCodeAt(0)];\n    const baseline = glyph_M === undefined ? max_glyph_height : glyph_M.height - glyph_M.top;\n    const top = glyph_M === undefined ? 0 : -glyph_M.top;\n\n    return {atlas: atlas_data, atlas_width: img_width, atlas_height: img_height, baseline: baseline, top: top, glyph_info: glyphs};\n}\n\nconst FONT_ATLAS_CACHE = new Cache(async (urls: string[]) => {\n    const promises = urls.map(async url => {\n        const resp = await fetch(url);\n        \n        if (resp.status != 200) {\n            throw `Error ${resp.status} retrieving font pbf from '${url}'`;\n        }\n\n        const blob = await resp.blob();\n        const data_buffer = await blob.arrayBuffer();\n    \n        // Parse the PBF and get the glyph data\n        return parseFontPBF(new Uint8Array(data_buffer));\n    });\n\n    const glyphs = (await Promise.all(promises)).flat();\n\n    // Create an atlas for the glyphs\n    return createAtlas(glyphs);\n});\n\ninterface TextSpec {\n    lat: number;\n    lon: number;\n    text: string;\n    min_zoom?: number;\n}\n\ntype HorizontalAlign = 'left' | 'center' | 'right';\ntype VerticalAlign = 'baseline' | 'middle' | 'top';\n\ninterface TextCollectionOptions {\n    horizontal_align?: HorizontalAlign;\n    vertical_align?: VerticalAlign;\n    font_size?: number;\n    text_color?: Color;\n    halo_color?: Color;\n    halo?: boolean;\n    offset_x?: number;\n    offset_y?: number;\n}\n\nconst text_collection_opt_defaults: Required<TextCollectionOptions> = {\n    horizontal_align: 'left',\n    vertical_align: 'baseline',\n    font_size: 12,\n    text_color: new Color([0, 0, 0, 1]),\n    halo_color: new Color([0, 0, 0, 1]),\n    halo: false,\n    offset_x: 0,\n    offset_y: 0\n}\n\nclass TextCollection {\n    readonly shader_manager: ShaderProgramManager;\n    readonly anchors: WGLBuffer;\n    readonly offsets: WGLBuffer;\n    readonly texcoords: WGLBuffer;\n    readonly texture: WGLTexture;\n\n    readonly opts: Required<TextCollectionOptions>;\n\n    private constructor(gl: WebGLAnyRenderingContext, text_locs: TextSpec[], font_atlas: FontAtlas, opts?: TextCollectionOptions) {\n        this.opts = normalizeOptions(opts, text_collection_opt_defaults);\n        \n        const is_webgl2 = isWebGL2Ctx(gl);\n        const format = is_webgl2 ? gl.R8 : gl.LUMINANCE;\n        const type = gl.UNSIGNED_BYTE;\n        const row_alignment = 1;\n\n        const empty_atlas = font_atlas.atlas_width == 0 || font_atlas.atlas_height == 0 || font_atlas.atlas.length == 0;\n        const atlas_width = empty_atlas ? 1 : font_atlas.atlas_width;\n        const atlas_height = empty_atlas ? 1 : font_atlas.atlas_height\n        const atlas_data = empty_atlas ? new Uint8Array([0, 0, 0, 0]) : font_atlas.atlas;\n\n        const image = {\n            'format': format, 'type': type, 'width': atlas_width, 'height': atlas_height, \n            'image': atlas_data, 'row_alignment': row_alignment, 'mag_filter': gl.LINEAR\n        };\n\n        this.texture = new WGLTexture(gl, image);\n\n        const n_verts = text_locs.map(tl => tl.text.length).reduce((a, b) => a + b, 0) * 6;\n\n        const anchor_data = new Float32Array(n_verts * 3);\n        const offset_data = new Float32Array(n_verts * 2);\n        const tc_data = new Float32Array(n_verts * 2);\n\n        let i_anch = 0, i_off = 0, i_tc = 0;\n\n        text_locs.forEach(loc => {\n            const {lat, lon, text} = loc;\n            const min_zoom = loc.min_zoom === undefined ? 0 : loc.min_zoom;\n            const {x: anchor_x, y: anchor_y} = new LngLat(lon, lat).toMercatorCoord();\n            \n            let x_offset = this.opts.offset_x;\n            let y_offset = this.opts.offset_y;\n            const init_i_off = i_off;\n\n            for (let i = 0; i < text.length; i++) {\n                const glyph_code = text.charCodeAt(i);\n                const glyph_info = font_atlas.glyph_info[glyph_code];\n\n                if (glyph_info === undefined) {\n                    x_offset += 7;\n                    continue;\n                }\n\n                x_offset += glyph_info.left;\n\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                \n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = y_offset + font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = y_offset + font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = y_offset + font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = y_offset + font_atlas.baseline + glyph_info.top;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = y_offset + font_atlas.baseline + glyph_info.top;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = y_offset + font_atlas.baseline + glyph_info.top;\n                \n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n\n                x_offset += glyph_info.advance - glyph_info.left;\n            }\n\n            if (this.opts.horizontal_align == 'center') {\n                for (let i = init_i_off; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (x_offset - this.opts.offset_x) / 2;\n                }\n            }\n            else if (this.opts.horizontal_align == 'right') {\n                for (let i = init_i_off; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (x_offset - this.opts.offset_x);\n                }\n            }\n\n            if (this.opts.vertical_align == 'top') {\n                for (let i = init_i_off + 1; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (font_atlas.baseline - font_atlas.top);\n                }\n            }\n            else if (this.opts.vertical_align == 'middle') {\n                for (let i = init_i_off + 1; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (font_atlas.baseline - font_atlas.top) / 2;\n                }\n            }\n        });\n\n        this.shader_manager = new ShaderProgramManager(text_vertex_shader_src, text_fragment_shader_src, []);\n\n        this.anchors = new WGLBuffer(gl, anchor_data, 3, gl.TRIANGLE_STRIP);\n        this.offsets = new WGLBuffer(gl, offset_data, 2, gl.TRIANGLE_STRIP);\n        this.texcoords = new WGLBuffer(gl, tc_data, 2, gl.TRIANGLE_STRIP);\n    }\n\n    static async make(gl: WebGLAnyRenderingContext, text_locs: TextSpec[], fontstack_url_template: string, opts?: TextCollectionOptions) {\n        const FONT_GROUP_SIZE = 256;\n        const characters = text_locs.map(tl => [...tl.text]).flat().map(c => c.charCodeAt(0)).filter((c, i, ary) => ary.indexOf(c) == i);\n        const char_code_min = Math.min(...characters);\n        const char_code_max = Math.max(...characters);\n\n        const stack_start = Math.floor(char_code_min / FONT_GROUP_SIZE) * FONT_GROUP_SIZE;\n        const stack_end = Math.floor(char_code_max / FONT_GROUP_SIZE) * FONT_GROUP_SIZE;\n\n        const fontstack_urls = [];\n        for (let istack = stack_start; istack <= stack_end; istack += FONT_GROUP_SIZE) {\n            fontstack_urls.push(fontstack_url_template.replace('{range}', `${istack}-${istack + FONT_GROUP_SIZE - 1}`));\n        }\n\n        const atlas = await FONT_ATLAS_CACHE.getValue(fontstack_urls);\n        if (atlas.atlas_height == 0 || atlas.atlas_width == 0 || atlas.atlas.length == 0) console.warn(`No font data from '${fontstack_url_template}'`);\n\n        return new TextCollection(gl, text_locs, atlas, opts);\n    }\n\n    render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg, [map_width, map_height]: [number, number], map_zoom: number) {\n        const render_data = getRendererData(arg);\n        const program = this.shader_manager.getShaderProgram(gl, render_data.shaderData);\n\n        const uniforms: Record<string, any> = {\n            'u_map_width': map_width, 'u_map_height': map_height, 'u_map_zoom': map_zoom, 'u_font_size': this.opts.font_size,\n            'u_text_color': this.opts.text_color.toRGBATuple(), 'u_halo_color': this.opts.halo_color.toRGBATuple(), 'u_offset': 0,\n            ...this.shader_manager.getShaderUniforms(render_data)\n        }\n\n        uniforms['u_is_halo'] = this.opts.halo ? 1 : 0;\n\n        program.use(\n            {'a_pos': this.anchors, 'a_offset': this.offsets, 'a_tex_coord': this.texcoords},\n            uniforms,\n            {'u_sdf_sampler': this.texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        program.draw();\n\n        if (this.opts.halo) {\n            program.setUniforms({'u_is_halo': 0});\n            program.draw();\n        }\n\n        if (render_data.type != 'maplibre' || !render_data.shaderData.define.includes('GLOBE')) {\n            program.setUniforms({'u_offset': -2, 'u_is_halo': this.opts.halo ? 1 : 0});\n            program.draw();\n    \n            if (this.opts.halo) {\n                program.setUniforms({'u_is_halo': 0});\n                program.draw();\n            }\n    \n            program.setUniforms({'u_offset': -1, 'u_is_halo': this.opts.halo ? 1 : 0});\n            program.draw();\n    \n            if (this.opts.halo) {\n                program.setUniforms({'u_is_halo': 0});\n                program.draw();\n            }\n    \n            program.setUniforms({'u_offset': 1, 'u_is_halo': this.opts.halo ? 1 : 0});\n            program.draw();\n    \n            if (this.opts.halo) {\n                program.setUniforms({'u_is_halo': 0});\n                program.draw();\n            }\n        }\n    }\n}\n\nexport {TextCollection};\nexport type {TextSpec, TextCollectionOptions, HorizontalAlign, VerticalAlign};","\nexport default function potpack(boxes) {\n\n    // calculate total box area and maximum box width\n    let area = 0;\n    let maxWidth = 0;\n\n    for (const box of boxes) {\n        area += box.w * box.h;\n        maxWidth = Math.max(maxWidth, box.w);\n    }\n\n    // sort the boxes for insertion by height, descending\n    boxes.sort((a, b) => b.h - a.h);\n\n    // aim for a squarish resulting container,\n    // slightly adjusted for sub-100% space utilization\n    const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);\n\n    // start with a single empty space, unbounded at the bottom\n    const spaces = [{x: 0, y: 0, w: startWidth, h: Infinity}];\n\n    let width = 0;\n    let height = 0;\n\n    for (const box of boxes) {\n        // look through spaces backwards so that we check smaller spaces first\n        for (let i = spaces.length - 1; i >= 0; i--) {\n            const space = spaces[i];\n\n            // look for empty spaces that can accommodate the current box\n            if (box.w > space.w || box.h > space.h) continue;\n\n            // found the space; add the box to its top-left corner\n            // |-------|-------|\n            // |  box  |       |\n            // |_______|       |\n            // |         space |\n            // |_______________|\n            box.x = space.x;\n            box.y = space.y;\n\n            height = Math.max(height, box.y + box.h);\n            width = Math.max(width, box.x + box.w);\n\n            if (box.w === space.w && box.h === space.h) {\n                // space matches the box exactly; remove it\n                const last = spaces.pop();\n                if (i < spaces.length) spaces[i] = last;\n\n            } else if (box.h === space.h) {\n                // space matches the box height; update it accordingly\n                // |-------|---------------|\n                // |  box  | updated space |\n                // |_______|_______________|\n                space.x += box.w;\n                space.w -= box.w;\n\n            } else if (box.w === space.w) {\n                // space matches the box width; update it accordingly\n                // |---------------|\n                // |      box      |\n                // |_______________|\n                // | updated space |\n                // |_______________|\n                space.y += box.h;\n                space.h -= box.h;\n\n            } else {\n                // otherwise the box splits the space into two spaces\n                // |-------|-----------|\n                // |  box  | new space |\n                // |_______|___________|\n                // | updated space     |\n                // |___________________|\n                spaces.push({\n                    x: space.x + box.w,\n                    y: space.y,\n                    w: space.w - box.w,\n                    h: box.h\n                });\n                space.y += box.h;\n                space.h -= box.h;\n            }\n            break;\n        }\n    }\n\n    return {\n        w: width, // container width\n        h: height, // container height\n        fill: (area / (width * height)) || 0 // space utilization\n    };\n}\n","import { Float16Array } from \"@petamoriken/float16\";\nimport { WGLBuffer, WGLTexture, WGLTextureSpec } from \"autumn-wgl\";\nimport { TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { LngLat, lambertConformalConic, rotateSphere, verticalPerspective } from \"./Map\";\nimport { getGLFormatTypeAlignment, layer_worker } from \"./PlotComponent\";\nimport { Cache, getArrayConstructor, getMinZoom } from \"./utils\";\nimport { kdTree } from \"kd-tree-javascript\";\n\ninterface EarthCoords {\n    lons: Float32Array;\n    lats: Float32Array;\n}\n\ninterface GridCoords {\n    x: Float32Array;\n    y: Float32Array;\n}\n\nconst WGS84_SEMIMAJOR = 6378137.0;\nconst WGS84_SEMIMINOR = 6356752.314245;\n\nfunction argMin<T>(ary: T[] | TypedArray) {\n    if (ary.length === 0) {\n        return -1;\n    }\n\n    let min = ary[0];\n    let minIndex = 0;\n\n    for (let i = 1; i < ary.length; i++) {\n        if (ary[i] < min) {\n            minIndex = i;\n            min = ary[i];\n        }\n    }\n\n    return minIndex;\n}\n\nasync function makeWGLDomainBuffers(gl: WebGLAnyRenderingContext, grid: StructuredGrid, simplify_ni: number, simplify_nj: number) {\n    const texcoord_margin_r = 1 / (2 * grid.ni);\n    const texcoord_margin_s = 1 / (2 * grid.nj);\n\n    const {lats: field_lats, lons: field_lons} = grid.getEarthCoords(simplify_ni, simplify_nj);\n    const domain_coords = await layer_worker.makeDomainVerticesAndTexCoords(field_lats, field_lons, simplify_ni, simplify_nj, texcoord_margin_r, texcoord_margin_s);\n\n    const vertices = new WGLBuffer(gl, domain_coords['vertices'], 2, gl.TRIANGLE_STRIP);\n    const texcoords = new WGLBuffer(gl, domain_coords['tex_coords'], 2, gl.TRIANGLE_STRIP);\n\n    return {'vertices': vertices, 'texcoords': texcoords};\n}\n\nasync function makeWGLBillboardBuffers(gl: WebGLAnyRenderingContext, grid: Grid, thin_fac: number, map_max_zoom: number) {\n    const {lats: field_lats, lons: field_lons} = grid.getEarthCoords();\n    const min_zoom = grid.getMinVisibleZoom(thin_fac);\n    const bb_elements = await layer_worker.makeBBElements(field_lats, field_lons, min_zoom, grid.ni, grid.nj, map_max_zoom);\n\n    const vertices = new WGLBuffer(gl, bb_elements['pts'], 2, gl.POINTS, {per_instance: true});\n    const texcoords = new WGLBuffer(gl, bb_elements['tex_coords'], 2, gl.POINTS, {per_instance: true});\n\n    return {'vertices': vertices, 'texcoords': texcoords};\n}\n\nfunction makeVectorRotationTexture(gl: WebGLAnyRenderingContext, grid: Grid, data_are_earth_relative: boolean) {\n    const coords = grid.getEarthCoords();\n\n    const rot_vals = new Float16Array(grid.ni * grid.nj).fill(parseFloat('nan'));\n\n    if (data_are_earth_relative) {\n        rot_vals.fill(0);\n    }\n    else {\n        if (!grid.is_conformal) {\n            // If the grid is non-conformal, we need a fully general change of basis from grid coordinates to earth coordinates. This is not supported for now, so warn about it.\n            console.warn('Vector rotations for non-conformal projections are not supported. The output may look incorrect.')\n        }\n\n        for (let icd = 0; icd < coords.lats.length; icd++) {\n            const lon = coords.lons[icd];\n            const lat = coords.lats[icd];\n    \n            rot_vals[icd] = grid.getVectorRotationAtPoint(lon, lat);\n        }\n    }\n\n    const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, 'float16');\n\n    const rot_img: WGLTextureSpec = {\n        format: format, type: type, row_alignment: row_alignment, image: new Uint16Array(rot_vals.buffer),\n        width: grid.ni, height: grid.nj, mag_filter: gl.LINEAR\n    };\n\n    const rot_tex = new WGLTexture(gl, rot_img);\n    return {'rotation': rot_tex};\n}\n\ntype GridType = 'latlon' | 'latlonrot' | 'lcc' | 'unstructured'; // | 'geostationary';\n\n/** The base class for grid types */\nabstract class Grid {\n    public readonly type: GridType;\n    public readonly ni: number;\n    public readonly nj: number;\n    public readonly is_conformal: boolean;\n\n    private readonly billboard_buffer_cache: Cache<[WebGLAnyRenderingContext, number, number], Promise<{'vertices': WGLBuffer, 'texcoords': WGLBuffer}>>;\n    private readonly vector_rotation_cache: Cache<[WebGLAnyRenderingContext, boolean], {'rotation': WGLTexture}>\n\n    constructor(type: GridType, is_conformal: boolean, ni: number, nj: number) {\n        this.type = type;\n        this.is_conformal = is_conformal;\n        this.ni = ni;\n        this.nj = nj;\n\n        this.billboard_buffer_cache = new Cache((gl: WebGLAnyRenderingContext, thin_fac: number, max_zoom: number) => {\n            return makeWGLBillboardBuffers(gl, this, thin_fac, max_zoom);\n        });\n\n        this.vector_rotation_cache = new Cache((gl: WebGLAnyRenderingContext, data_are_earth_relative: boolean) => {\n            return makeVectorRotationTexture(gl, this, data_are_earth_relative);\n        })\n    }\n\n    public abstract getEarthCoords(): EarthCoords;\n    public abstract getGridCoords(): GridCoords;\n    public abstract transform(x: number, y: number, opts?: {inverse?: boolean}): [number, number];\n    public abstract sampleNearestGridPoint(lon: number, lat: number, ary: TypedArray): {sample: number, sample_lon: number, sample_lat: number};\n    public abstract getThinnedGrid(thin_fac: number, map_max_zoom: number): Grid;\n    public abstract thinDataArray<ArrayType extends TypedArray>(original_grid: Grid, ary: ArrayType): ArrayType;\n    public abstract getMinVisibleZoom(thin_fac: number): Uint8Array;\n\n    public async getWGLBillboardBuffers(gl: WebGLAnyRenderingContext, thin_fac: number, max_zoom: number) {\n        return await this.billboard_buffer_cache.getValue(gl, thin_fac, max_zoom);\n    }\n\n    public abstract copy(): Grid;\n\n    public getVectorRotationAtPoint(lon: number, lat: number) {    \n        const [x, y] = this.transform(lon, lat);\n        const [x_pertlon, y_pertlon] = this.transform(lon + 0.01, lat);\n        return Math.atan2(y_pertlon - y, x_pertlon - x);\n    }\n\n    public getVectorRotationTexture(gl: WebGLAnyRenderingContext, data_are_earth_relative: boolean) {\n        return this.vector_rotation_cache.getValue(gl, data_are_earth_relative);\n    }\n}\n\n/** A structured grid (in this case meaning a cartesian grid with i and j coordinates) */\nabstract class StructuredGrid extends Grid {\n    private readonly buffer_cache: Cache<[WebGLAnyRenderingContext], Promise<{'vertices': WGLBuffer, 'texcoords': WGLBuffer}>>;\n    protected readonly thin_x: number;\n    protected readonly thin_y: number;\n\n    constructor(type: GridType, is_conformal: boolean, ni: number, nj: number, thin_x?: number, thin_y?: number) {\n        super(type, is_conformal, ni, nj);\n\n        this.thin_x = thin_x === undefined ? 1 : thin_x;\n        this.thin_y = thin_y === undefined ? 1 : thin_y;\n\n        this.buffer_cache = new Cache((gl: WebGLAnyRenderingContext) => {\n            const new_ni = Math.max(Math.floor(this.ni / 20), 20);\n            const new_nj = Math.max(Math.floor(this.nj / 20), 20);\n            return makeWGLDomainBuffers(gl, this, new_ni, new_nj);\n        });\n    }\n\n    public abstract getEarthCoords(ni?: number, nj?: number): EarthCoords;\n\n    /** @internal */\n    protected xyThinFromMaxZoom(thin_fac: number, map_max_zoom: number) {\n        const n_density_tiers = Math.log2(thin_fac);\n        const n_inaccessible_tiers = Math.max(n_density_tiers + 1 - map_max_zoom, 0);\n        const xy_thin = Math.pow(2, n_inaccessible_tiers);\n\n        return [xy_thin, xy_thin] as [number, number];\n    }\n\n    /** @internal */\n    public getMinVisibleZoom(thin_fac: number) {\n        const min_zoom = new Uint8Array(this.ni * this.nj);\n        const zoom_thin_fac = thin_fac / Math.max(this.thin_x, this.thin_y);\n        for (let ilat = 0; ilat < this.nj * this.thin_y; ilat++) {\n            for (let ilon = 0; ilon < this.ni * this.thin_x; ilon++) {\n                const idx = ilat * this.ni + ilon;\n                min_zoom[idx] = getMinZoom(ilat, ilon, zoom_thin_fac);\n            }\n        }\n\n        return min_zoom;\n    }\n\n    /** @internal */\n    public thinDataArray<ArrayType extends TypedArray>(original_grid: StructuredGrid, ary: ArrayType) {\n        const arrayType = getArrayConstructor(ary);\n        const new_data = new arrayType(this.ni * this.nj);\n\n        for (let i = 0; i < this.ni; i++) {\n            for (let j = 0 ; j < this.nj; j++) {\n                const idx_old = i * this.thin_x + original_grid.ni * j * this.thin_y;\n                const idx = i + this.ni * j;\n\n                new_data[idx] = ary[idx_old];\n            }\n        }\n\n        return new_data;\n    }\n\n    public abstract copy(opts?: {ni?: number, nj?: number}): Grid;\n\n    public async getWGLBuffers(gl: WebGLAnyRenderingContext) {\n        return await this.buffer_cache.getValue(gl);\n    }\n\n    public sampleNearestGridPoint(lon: number, lat: number, ary: TypedArray): {sample: number, sample_lon: number, sample_lat: number} {\n        const [x, y] = this.transform(lon, lat);\n        const {x: xs, y: ys} = this.getGridCoords();\n\n        const ll_x = xs[0];\n        const ur_x = xs[xs.length - 1];\n        const dx = xs[1] - xs[0];\n        const ll_y = ys[0];\n        const ur_y = ys[ys.length - 1];\n        const dy = ys[1] - ys[0];\n\n        if (x < ll_x - 0.5 * dx || x > ur_x + 0.5 * dx || y < ll_y - 0.5 * dy || y > ur_y + 0.5 * dy) {\n            return {sample: NaN, sample_lon: NaN, sample_lat: NaN};\n        }\n\n        const i_min = argMin(xs.map(xv => Math.abs(xv - x)));\n        const j_min = argMin(ys.map(yv => Math.abs(yv - y)));\n        const idx = i_min + j_min * this.ni;\n\n        const [lon_min, lat_min] = this.transform(xs[i_min], ys[j_min], {inverse: true});\n\n        return {sample: ary[idx], sample_lon: lon_min, sample_lat: lat_min};\n    }\n}\n\n/** A plate carree (a.k.a. lat/lon) grid with uniform grid spacing */\nclass PlateCarreeGrid extends StructuredGrid {\n    public readonly ll_lon: number;\n    public readonly ll_lat: number;\n    public readonly ur_lon: number;\n    public readonly ur_lat: number;\n\n    private readonly ll_cache: Cache<[number, number], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a plate carree grid\n     * @param ni     - The number of grid points in the i (longitude) direction\n     * @param nj     - The number of grid points in the j (latitude) direction\n     * @param ll_lon - The longitude of the lower left corner of the grid\n     * @param ll_lat - The latitude of the lower left corner of the grid\n     * @param ur_lon - The longitude of the upper right corner of the grid\n     * @param ur_lat - The latitude of the upper right corner of the grid\n     */\n    constructor(ni: number, nj: number, ll_lon: number, ll_lat: number, ur_lon: number, ur_lat: number, thin_x?: number, thin_y?: number) {\n        super('latlon', true, ni, nj, thin_x, thin_y);\n\n        this.ll_lon = ll_lon;\n        this.ll_lat = ll_lat;\n        this.ur_lon = ur_lon;\n        this.ur_lat = ur_lat;\n\n        const dlon = (this.ur_lon - this.ll_lon) / (this.ni - 1);\n        const dlat = (this.ur_lat - this.ll_lat) / (this.nj - 1);\n\n        this.ll_cache = new Cache((ni: number, nj: number) => {\n            const lons = new Float32Array(ni * nj);\n            const lats = new Float32Array(ni * nj);\n\n            const dlon_req = (this.ni - 1) / (ni - 1) * dlon;\n            const dlat_req = (this.nj - 1) / (nj - 1) * dlat;\n\n            for (let i = 0; i < ni; i++) {\n                for (let j = 0; j < nj; j++) {\n                    const idx = i + j * ni;\n\n                    lons[idx] = this.ll_lon + i * dlon_req;\n                    lats[idx] = this.ll_lat + j * dlat_req;\n                }\n            }\n\n            return {'lons': lons, 'lats': lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_lon + i * dlon;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_lat + j * dlat;\n            }\n\n            return {x: x, y: y};\n        })\n    }\n\n    /** @internal */\n    public copy(opts?: {ni?: number, nj?: number, ll_lon?: number, ll_lat?: number, ur_lon?: number, ur_lat?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_lon = opts.ll_lon !== undefined ? opts.ll_lon : this.ll_lon;\n        const ll_lat = opts.ll_lat !== undefined ? opts.ll_lat : this.ll_lat;\n        const ur_lon = opts.ur_lon !== undefined ? opts.ur_lon : this.ur_lon;\n        const ur_lat = opts.ur_lat !== undefined ? opts.ur_lat : this.ur_lat;\n\n        return new PlateCarreeGrid(ni, nj, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n\n    /**\n     * @internal\n     * Get a list of longitudes and latitudes on the grid (internal method)\n     */\n    public getEarthCoords(ni?: number, nj?: number) {\n        ni = ni === undefined ? this.ni : ni;\n        nj = nj === undefined ? this.nj : nj;\n\n        return this.ll_cache.getValue(ni, nj);\n    }\n\n    /** @internal */\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    /** @internal */\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        return [x, y] as [number, number];\n    }\n\n    /** @internal */\n    public getThinnedGrid(thin_fac: number, map_max_zoom: number) {\n        const [thin_x, thin_y] = this.xyThinFromMaxZoom(thin_fac, map_max_zoom);\n\n        const dlon = (this.ur_lon - this.ll_lon) / this.ni;\n        const dlat = (this.ur_lat - this.ll_lat) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_lon = this.ll_lon;\n        const ll_lat = this.ll_lat;\n        const ur_lon = this.ur_lon - ni_remove * dlon;\n        const ur_lat = this.ur_lat - nj_remove * dlat;\n\n        return new PlateCarreeGrid(ni, nj, ll_lon, ll_lat, ur_lon, ur_lat, this.thin_x * thin_x, this.thin_y * thin_y);\n    }\n}\n\n/** A rotated lat-lon (plate carree) grid with uniform grid spacing */\nclass PlateCarreeRotatedGrid extends StructuredGrid {\n    public readonly np_lon: number;\n    public readonly np_lat: number;\n    public readonly lon_shift: number;\n    public readonly ll_lon: number;\n    public readonly ll_lat: number;\n    public readonly ur_lon: number;\n    public readonly ur_lat: number;\n\n    private readonly llrot: (a: number, b: number, opts?: {inverse: boolean}) => [number, number];\n    private readonly ll_cache: Cache<[number, number], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a Lambert conformal conic grid\n     * @param ni        - The number of grid points in the i (longitude) direction\n     * @param nj        - The number of grid points in the j (latitude) direction\n     * @param np_lon    - The longitude of the north pole for the rotated grid\n     * @param np_lat    - The latitude of the north pole for the rotated grid\n     * @param lon_shift - The angle around the rotated north pole to shift the central meridian\n     * @param ll_lon    - The longitude of the lower left corner of the grid (on the rotated earth)\n     * @param ll_lat    - The latitude of the lower left corner of the grid (on the rotated earth)\n     * @param ur_lon    - The longitude of the upper right corner of the grid (on the rotated earth)\n     * @param ur_lat    - The latitude of the upper right corner of the grid (on the rotated earth)\n     */\n    constructor(ni: number, nj: number, np_lon: number, np_lat: number, lon_shift: number, ll_lon: number, ll_lat: number, ur_lon: number, ur_lat: number, thin_x?: number, thin_y?: number) {\n        super('latlonrot', true, ni, nj, thin_x, thin_y);\n\n        this.np_lon = np_lon;\n        this.np_lat = np_lat;\n        this.lon_shift = lon_shift;\n        this.ll_lon = ll_lon;\n        this.ll_lat = ll_lat;\n        this.ur_lon = ur_lon;\n        this.ur_lat = ur_lat;\n        this.llrot = rotateSphere({np_lon: np_lon, np_lat: np_lat, lon_shift: lon_shift});\n\n        const dlon = (this.ur_lon - this.ll_lon) / (this.ni - 1);\n        const dlat = (this.ur_lat - this.ll_lat) / (this.nj - 1);\n\n        this.ll_cache = new Cache((ni: number, nj: number) => {\n            const lons = new Float32Array(ni * nj);\n            const lats = new Float32Array(ni * nj);\n\n            const dlon_req = (this.ni - 1) / (ni - 1) * dlon;\n            const dlat_req = (this.nj - 1) / (nj - 1) * dlat;\n\n            for (let i = 0; i < ni; i++) {\n                const lon_p = this.ll_lon + i * dlon_req;\n                for (let j = 0; j < nj; j++) {\n                    const lat_p = this.ll_lat + j * dlat_req;\n\n                    const [lon, lat] = this.llrot(lon_p, lat_p);\n                    const idx = i + j * ni;\n                    lons[idx] = lon;\n                    lats[idx] = lat;\n                }\n            }\n\n            return {lons: lons, lats: lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_lon + i * dlon;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_lat + j * dlat;\n            }\n\n            return {x: x, y: y};\n        })\n    }\n\n    /** @internal */\n    public copy(opts?: {ni?: number, nj?: number, ll_lon?: number, ll_lat?: number, ur_lon?: number, ur_lat?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_lon = opts.ll_lon !== undefined ? opts.ll_lon : this.ll_lon;\n        const ll_lat = opts.ll_lat !== undefined ? opts.ll_lat : this.ll_lat;\n        const ur_lon = opts.ur_lon !== undefined ? opts.ur_lon : this.ur_lon;\n        const ur_lat = opts.ur_lat !== undefined ? opts.ur_lat : this.ur_lat;\n\n        return new PlateCarreeRotatedGrid(ni, nj, this.np_lon, this.np_lat, this.lon_shift, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n\n    /**\n     * @internal\n     * Get a list of longitudes and latitudes on the grid\n     */\n    public getEarthCoords(ni?: number, nj?: number) {\n        ni = ni === undefined ? this.ni : ni;\n        nj = nj === undefined ? this.nj : nj;\n\n        return this.ll_cache.getValue(ni, nj);\n    }\n\n    /** @internal */\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    /** @internal */\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        opts = opts === undefined ? {}: opts;\n        const inverse = 'inverse' in opts ? opts.inverse : false;\n\n        return this.llrot(x, y, {inverse: !inverse});\n    }\n\n    /** @internal */\n    public getThinnedGrid(thin_fac: number, map_max_zoom: number) {\n        const [thin_x, thin_y] = this.xyThinFromMaxZoom(thin_fac, map_max_zoom);\n\n        const dlon = (this.ur_lon - this.ll_lon) / this.ni;\n        const dlat = (this.ur_lat - this.ll_lat) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_lon = this.ll_lon;\n        const ll_lat = this.ll_lat;\n        const ur_lon = this.ur_lon - ni_remove * dlon;\n        const ur_lat = this.ur_lat - nj_remove * dlat;\n\n        return new PlateCarreeRotatedGrid(ni, nj, this.np_lon, this.np_lat, this.lon_shift, ll_lon, ll_lat, ur_lon, ur_lat, this.thin_x * thin_x, this.thin_y * thin_y);\n    }\n}\n\n/** A Lambert conformal conic grid with uniform grid spacing */\nclass LambertGrid extends StructuredGrid {\n    public readonly lon_0: number;\n    public readonly lat_0: number;\n    public readonly lat_std: [number, number];\n    public readonly ll_x: number;\n    public readonly ll_y: number;\n    public readonly ur_x: number;\n    public readonly ur_y: number;\n    public readonly a: number;\n    public readonly b: number;\n\n    private readonly lcc: (a: number, b: number, opts?: {inverse: boolean}) => [number, number];\n    private readonly ll_cache: Cache<[number, number], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a Lambert conformal conic grid from the lower-left and upper-right corner x/y values.\n     * @param ni      - The number of grid points in the i (longitude) direction\n     * @param nj      - The number of grid points in the j (latitude) direction\n     * @param lon_0   - The standard longitude for the projection; this is also the center longitude for the projection\n     * @param lat_0   - The center latitude for the projection\n     * @param lat_std - The standard latitudes for the projection\n     * @param ll_x    - The x coordinate in projection space of the lower-left corner of the grid\n     * @param ll_y    - The y coordinate in projection space of the lower-left corner of the grid\n     * @param ur_x    - The x coordinate in projection space of the upper-right corner of the grid\n     * @param ur_y    - The y coordinate in projection space of the upper-right corner of the grid\n     * @param a       - The semimajor axis of the assumed shape of Earth in meters\n     * @param b       - The semiminor axis of the assumed shape of Earth in meters\n     */\n    constructor(ni: number, nj: number, lon_0: number, lat_0: number, lat_std: [number, number], \n                ll_x: number, ll_y: number, ur_x: number, ur_y: number, a?: number, b?: number, thin_x?: number, thin_y?: number) {\n        super('lcc', true, ni, nj, thin_x, thin_y);\n\n        this.lon_0 = lon_0;\n        this.lat_0 = lat_0;\n        this.lat_std = lat_std;\n        this.ll_x = ll_x;\n        this.ll_y = ll_y;\n        this.ur_x = ur_x;\n        this.ur_y = ur_y;\n        this.a = a === undefined ? WGS84_SEMIMAJOR : a;\n        this.b = b === undefined ? WGS84_SEMIMINOR : b;\n        this.lcc = lambertConformalConic({lon_0: lon_0, lat_0: lat_0, lat_std: lat_std, a: this.a, b: this.b});\n\n        const dx = (this.ur_x - this.ll_x) / this.ni;\n        const dy = (this.ur_y - this.ll_y) / this.nj;\n\n        this.ll_cache = new Cache((ni: number, nj: number) => {\n            const lons = new Float32Array(ni * nj);\n            const lats = new Float32Array(ni * nj);\n\n            const dx_req = (this.ni - 1) / (ni - 1) * dx;\n            const dy_req = (this.nj - 1) / (nj - 1) * dy;\n\n            for (let i = 0; i < ni; i++) {\n                const x = this.ll_x + i * dx_req;\n                for (let j = 0; j < nj; j++) {\n                    const y = this.ll_y + j * dy_req;\n\n                    const [lon, lat] = this.lcc(x, y, {inverse: true});\n                    const idx = i + j * ni;\n                    lons[idx] = lon;\n                    lats[idx] = lat;\n                }\n            }\n\n            return {lons: lons, lats: lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_x + i * dx;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_y + j * dy;\n            }\n\n            return {x: x, y: y};\n        });\n    }\n\n    /**\n     * Create a Lambert conformal conic grid from the lower-left grid point coordinate and a dx and dy.\n     * @param ni      - The number of grid points in the i (longitude) direction\n     * @param nj      - The number of grid points in the j (latitude) direction\n     * @param lon_0   - The standard longitude for the projection; this is also the center longitude for the projection\n     * @param lat_0   - The center latitude for the projection\n     * @param lat_std - The standard latitudes for the projection\n     * @param ll_lon  - The longitude of the lower-left corner of the grid\n     * @param ll_lat  - The latitude of the lower-left corner of the grid\n     * @param dx      - The grid dx in meters\n     * @param dy      - The grid dy in meters\n     * @param a       - The semimajor axis of the assumed shape of Earth in meters\n     * @param b       - The semiminor axis of the assumed shape of Earth in meters\n     * @returns \n     */\n    public static fromLLCornerLonLat(ni: number, nj: number, lon_0: number, lat_0: number, lat_std: [number, number], \n                                     ll_lon: number, ll_lat: number, dx: number, dy: number, a?: number, b?: number) {\n\n        a = a === undefined ? WGS84_SEMIMAJOR : a;\n        b = b === undefined ? WGS84_SEMIMINOR : b;\n\n        const lcc = lambertConformalConic({lon_0: lon_0, lat_0: lat_0, lat_std: lat_std, a: a, b: b});\n        const [ll_x, ll_y] = lcc(ll_lon, ll_lat);\n\n        return new LambertGrid(ni, nj, lon_0, lat_0, lat_std, ll_x, ll_y, ll_x + ni * dx, ll_y + nj * dy, a, b);\n    }\n\n    /** @internal */\n    public copy(opts?: {ni?: number, nj?: number, ll_x?: number, ll_y?: number, ur_x?: number, ur_y?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_x = opts.ll_x !== undefined ? opts.ll_x : this.ll_x;\n        const ll_y = opts.ll_y !== undefined ? opts.ll_y : this.ll_y;\n        const ur_x = opts.ur_x !== undefined ? opts.ur_x : this.ur_x;\n        const ur_y = opts.ur_y !== undefined ? opts.ur_y : this.ur_y;\n\n        return new LambertGrid(ni, nj, this.lon_0, this.lat_0, this.lat_std, ll_x, ll_y, ur_x, ur_y, this.a, this.b);\n    }\n\n    /**\n     * @internal\n     * Get a list of longitudes and latitudes on the grid\n     */\n    public getEarthCoords(ni?: number, nj?: number) {\n        ni = ni === undefined ? this.ni : ni;\n        nj = nj === undefined ? this.nj : nj;\n\n        return this.ll_cache.getValue(ni, nj);\n    }\n\n    /** @internal */\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    /** @internal */\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        opts = opts === undefined ? {}: opts;\n        const inverse = opts.inverse === undefined ? false : opts.inverse;\n\n        return this.lcc(x, y, {inverse: inverse});\n    }\n\n    /** @internal */\n    public getThinnedGrid(thin_fac: number, map_max_zoom: number) {\n        const [thin_x, thin_y] = this.xyThinFromMaxZoom(thin_fac, map_max_zoom);\n\n        const dx = (this.ur_x - this.ll_x) / this.ni;\n        const dy = (this.ur_y - this.ll_y) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_x = this.ll_x;\n        const ll_y = this.ll_y;\n        const ur_x = this.ur_x - ni_remove * dx;\n        const ur_y = this.ur_y - nj_remove * dy;\n\n        return new LambertGrid(ni, nj, this.lon_0, this.lat_0, this.lat_std, ll_x, ll_y, ur_x, ur_y, this.a, this.b, this.thin_x * thin_x, this.thin_y * thin_y);\n    }\n}\n\n/** An unstructured grid defined by a list of latitudes and longitudes */\nclass UnstructuredGrid extends Grid {\n    public readonly coords: {lon: number, lat: number}[];\n    private readonly zoom_cache: Cache<[number], Uint8Array>\n    private readonly zoom_arg: Uint8Array | null;\n\n    /**\n     * Create an unstructured grid\n     * @param coords - The lat/lon coordinates of the grid points\n     */\n    constructor(coords: {lon: number, lat: number}[], zoom?: Uint8Array) {\n        const MAX_DIM = 4096;\n\n        super('unstructured', true, Math.min(coords.length, MAX_DIM), Math.floor(coords.length / MAX_DIM) + 1);\n        this.coords = coords;\n        this.zoom_arg = zoom === undefined ? null : zoom;\n\n        this.zoom_cache = new Cache((thin_fac: number) => {\n            interface kdNode {\n                x: number;\n                y: number;\n                min_zoom: number;\n            }\n    \n            const MAP_MAX_ZOOM = 24;\n            const offset = Math.log2(thin_fac);\n            const kd_nodes = this.coords.map(c => ({...new LngLat(c.lon, c.lat).toMercatorCoord(), min_zoom: MAP_MAX_ZOOM} as kdNode));\n            const tree = new kdTree([...kd_nodes], (a, b) => Math.max(Math.abs(a.x - b.x), Math.abs(a.y - b.y)), ['x', 'y']);\n    \n            const recursiveThin = (x: number, y: number, depth: number) => {\n                const size = Math.pow(0.5, depth + 1);\n                const nodes = tree.nearest({x: x, y: y, min_zoom: 0}, 2, size);\n\n                if (nodes.length > 0) {\n                    const [node, dist] = nodes.sort((a, b) => a[1] - b[1])[0];\n                    if (node.min_zoom == MAP_MAX_ZOOM) {\n                        node.min_zoom = Math.max(depth - offset, 0);\n                    }\n                }\n\n                if (nodes.length > 1 && depth < MAP_MAX_ZOOM + offset) {\n                    recursiveThin(x - size / 2, y - size / 2, depth + 1);\n                    recursiveThin(x + size / 2, y - size / 2, depth + 1);\n                    recursiveThin(x - size / 2, y + size / 2, depth + 1);\n                    recursiveThin(x + size / 2, y + size / 2, depth + 1);\n                }\n            }\n\n            recursiveThin(0.5, 0.5, 0);\n\n            return new Uint8Array(kd_nodes.map(n => n.min_zoom));\n        });\n    }\n\n    /** @internal */\n    public copy() {\n        return new UnstructuredGrid(this.coords);\n    }\n\n    /** @internal */\n    public getEarthCoords() {\n        return {lons: new Float32Array(this.coords.map(c => c.lon)), lats: new Float32Array(this.coords.map(c => c.lat))};\n    }\n\n    /** @internal */\n    public getGridCoords() {\n        const {lons, lats} = this.getEarthCoords();\n        return {x: lons, y: lats} as GridCoords;\n    }\n\n    /** @internal */\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        return [x, y] as [number, number];\n    }\n\n    /** @internal */\n    public getMinVisibleZoom(thin_fac: number) {\n        if (this.zoom_arg !== null) \n            return this.zoom_arg;\n        return this.zoom_cache.getValue(thin_fac);\n    }\n\n    /** @internal */\n    public getThinnedGrid(thin_fac: number, map_max_zoom: number) {\n        const min_zoom = this.getMinVisibleZoom(thin_fac);\n        return new UnstructuredGrid(this.coords.filter((ll, ill) => min_zoom[ill] <= map_max_zoom), min_zoom.filter(ll => ll <= map_max_zoom))\n    }\n\n    /** @internal */\n    public thinDataArray<ArrayType extends TypedArray>(original_grid: UnstructuredGrid, ary: ArrayType) {\n        let i_new = 0;\n        \n        const arrayType = getArrayConstructor(ary);\n        const new_data = new arrayType(this.ni * this.nj);\n\n        for (let i = 0; i < original_grid.coords.length; i++) {\n            if (this.coords[i_new].lat == original_grid.coords[i].lat && this.coords[i_new].lon == original_grid.coords[i].lon) {\n                new_data[i_new++] = ary[i];\n\n                if (i_new >= this.coords.length) break;\n            }\n        }\n\n        return new_data;\n    }\n\n    public sampleNearestGridPoint(lon: number, lat: number, ary: TypedArray): {sample: number, sample_lon: number, sample_lat: number} {\n        // TAS: This is gonna be slow. Need to think about using the kdTree here.\n        const idx = argMin(this.coords.map(c => (c.lon - lon) * (c.lon - lon) + (c.lat - lat) * (c.lat - lat)));\n        return {sample: ary[idx], sample_lon: this.coords[idx].lon, sample_lat: this.coords[idx].lat};\n    }\n}\n\n// class GeostationaryImage extends Grid {\n//     public readonly satellite_lon: number;\n//     public readonly satellite_lat: number;\n\n//     private readonly vpp: (a: number, b: number, opts?: {inverse: boolean}) => [number, number];\n\n//     constructor(ni: number, nj: number, satellite_lon: number, satellite_lat: number) {\n//         super('geostationary', false, ni, nj);\n\n//         this.satellite_lon = satellite_lon;\n//         this.satellite_lat = satellite_lat;\n//         this.vpp = verticalPerspective({lon_0: satellite_lon, lat_0: satellite_lat, alt: 35786000.});\n//     }\n\n//     public getEarthCoords(): EarthCoords {}\n//     public getGridCoords(): GridCoords {}\n\n//     public transform(x: number, y: number, opts?: {inverse?: boolean}): [number, number] {\n//         opts = opts === undefined ? {}: opts;\n//         const inverse = opts.inverse === undefined ? false : opts.inverse;\n\n//         return this.vpp(x, y, {inverse: inverse});\n//     }\n\n//     public sampleNearestGridPoint(lon: number, lat: number, ary: TypedArray): {sample: number, sample_lon: number, sample_lat: number} {\n//         const [x, y] = this.transform(lon, lat);\n//         const {x: xs, y: ys} = this.getGridCoords();\n\n//         const ll_x = xs[0];\n//         const ur_x = xs[xs.length - 1];\n//         const dx = xs[1] - xs[0];\n//         const ll_y = ys[0];\n//         const ur_y = ys[ys.length - 1];\n//         const dy = ys[1] - ys[0];\n\n//         if (x < ll_x - 0.5 * dx || x > ur_x + 0.5 * dx || y < ll_y - 0.5 * dy || y > ur_y + 0.5 * dy) {\n//             return {sample: NaN, sample_lon: NaN, sample_lat: NaN};\n//         }\n\n//         const i_min = argMin(xs.map(xv => Math.abs(xv - x)));\n//         const j_min = argMin(ys.map(yv => Math.abs(yv - y)));\n//         const idx = i_min + j_min * this.ni;\n\n//         const [lon_min, lat_min] = this.transform(xs[i_min], ys[j_min], {inverse: true});\n\n//         return {sample: ary[idx], sample_lon: lon_min, sample_lat: lat_min};\n//     }\n\n//     public getThinnedGrid(thin_fac: number, map_max_zoom: number): Grid {}\n//     public thinDataArray<ArrayType extends TypedArray>(original_grid: Grid, ary: ArrayType): ArrayType {}\n//     public getMinVisibleZoom(thin_fac: number): Uint8Array {}\n\n//     public copy() {\n//         return new GeostationaryImage(this.ni, this.nj, this.satellite_lon, this.satellite_lat);\n//     }\n// }\n\nexport {Grid, StructuredGrid, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid, UnstructuredGrid};\nexport type {GridType};","\nimport { LineData, RenderMethodArg, TypedArray, WebGLAnyRenderingContext } from './AutumnTypes';\nimport { LngLat, MapLikeType } from './Map';\nimport { PlotComponent } from './PlotComponent';\nimport { RawScalarField } from './RawField';\nimport { LineStyle, PolylineCollection, PolylineCollectionOpts, isLineStyle } from './PolylineCollection';\nimport { TextCollection, TextCollectionOptions, TextSpec } from './TextCollection';\nimport { Color } from './Color';\n\nimport { normalizeOptions } from './utils';\nimport { ColorMap } from './Colormap';\nimport { StructuredGrid, UnstructuredGrid } from './Grid';\n\n/** Options for {@link Contour} components */\ninterface ContourOptions {\n    /** \n     * The color of the contours as a hex color string \n     * @default '#000000'\n     */\n    color?: string;\n\n    /**\n     * A color map to use to color the contours. Specifying a colormap overrides the color option.\n     * @default null\n     */\n    cmap?: ColorMap | null;\n\n    /** \n     * The contour interval for drawing contours at regular intervals\n     * @default 1\n     */\n    interval?: number;\n\n    /**\n     * A list of arbitrary levels to contour. This overrides the `interval` option.\n     * @default null\n     */\n    levels?: number[] | null;\n\n    /**\n     * The width of the line in pixels. This could be either a number or a function that takes a contour level as a number and returns a line width. This\n     *  can be used to vary the width of the contours by value.\n     * @example level => level >= 100 ? 3 : 1.5\n     * @default 2\n     */\n    line_width?: number | ((level: number) => number);\n\n    /**\n     * The style to use for the line. This can be either a LineStyle or a function that takes a contour level as a number and returns a LineStyle. This \n     *  can be used to vary the contours by value.\n     * @example level => level < 0 ? '--' : '-'\n     * @default '-'\n     */\n    line_style?: LineStyle | ((level: number) => LineStyle);\n\n\n    /**\n     * \n     */\n    quad_as_tri?: boolean;\n}\n\nconst contour_opt_defaults: Required<ContourOptions> = {\n    color: '#000000',\n    cmap: null,\n    interval: 1,\n    levels: null,\n    line_width: 2,\n    line_style: '-',\n    quad_as_tri: false\n}\n\ninterface ContourGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n}\n\n/** \n * A field of contoured data.\n * @example\n * // Create a contoured height field, with black contours every 30 m (assuming the height field is in \n * // meters).\n * const contours = new Contour(height_field, {color: '#000000', interval: 30});\n */\nclass Contour<ArrayType extends TypedArray, GridType extends StructuredGrid, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType, GridType>;\n    public readonly opts: Required<ContourOptions>;\n\n    private gl_elems: ContourGLElems<MapType> | null;\n    private contours: PolylineCollection[] | null;\n\n    /**\n     * Create a contoured field\n     * @param field - The field to contour\n     * @param opts  - Options for creating the contours\n     */\n    constructor(field: RawScalarField<ArrayType, GridType>, opts: ContourOptions) {\n        super();\n\n        this.field = field;\n        this.opts = normalizeOptions(opts, contour_opt_defaults);\n\n        this.gl_elems = null;\n        this.contours = null;\n    }\n\n    /**\n     * Update the data displayed as contours\n     * @param field - The new field to contour\n     */\n    public async updateField(field: RawScalarField<ArrayType, GridType>) {\n        this.field = field;\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n\n        const contour_data = await this.getContours();\n\n        type LineDataStyleWidth = {data: LineData[], line_width: number, line_style: LineStyle};\n        const line_data: LineDataStyleWidth[] = [];\n\n        // Make contour data and sort them by line width and line style\n        Object.entries(contour_data).forEach(([cv, cd]) => {\n            const cv_ = parseFloat(cv);\n            const contour_style = isLineStyle(this.opts.line_style) ? this.opts.line_style : this.opts.line_style(cv_);\n            const contour_width = typeof this.opts.line_width === 'number' ? this.opts.line_width : this.opts.line_width(cv_);\n\n            const polyline_data = cd.map(c => {\n                const ld: LineData = {vertices: c};\n                if (this.opts.cmap !== null){\n                    ld.data = c.map(() => cv_)\n                }\n                return ld;\n            });\n\n            const line_data_filtered = line_data.filter(ld => ld.line_style == contour_style && ld.line_width == contour_width);\n            let contour_line_data: LineDataStyleWidth;\n            if (line_data_filtered.length == 0) {\n                contour_line_data = {data: [], line_width: contour_width, line_style: contour_style};\n                line_data.push(contour_line_data);\n            }\n            else {\n                contour_line_data = line_data_filtered[0];\n            }\n\n            contour_line_data.data = contour_line_data.data.concat(polyline_data);\n        });\n\n        // Make one PolylineCollection for each combination of line width and line style\n        const promises = line_data.map(async ld => {\n            const plc_opts: PolylineCollectionOpts = {line_width: ld.line_width, line_style: ld.line_style};\n            if (this.opts.cmap !== null) {\n                plc_opts.cmap = this.opts.cmap;\n            }\n            else {\n                plc_opts.color = this.opts.color;\n            }\n\n            return await PolylineCollection.make(gl, ld.data, plc_opts);\n        });\n\n        Promise.all(promises).then(values => {\n            if (this.gl_elems === null) return;\n\n            this.contours = values;\n            this.gl_elems.map.triggerRepaint();\n        });\n    }\n\n    public async getContours() {\n        const levels = this.opts.levels === null ? undefined : this.opts.levels;\n        return await this.field.getContours({interval: this.opts.interval, levels: levels, quad_as_tri: this.opts.quad_as_tri});\n    }\n\n    /**\n     * @internal\n     * Add the contours to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n\n        this.gl_elems = {\n            gl: gl, map: map\n        };\n\n        await this.updateField(this.field);\n    }\n\n    /**\n     * @internal\n     * Render the contours\n     */\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg) {\n        if (this.gl_elems === null || this.contours === null) return;\n        const gl_elems = this.gl_elems;\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        this.contours.forEach(cnt => cnt.render(gl, arg, [map_width, map_height], zoom, bearing, pitch));\n    }\n}\n\ninterface ContourLabelGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n}\n\n/** Options for {@link ContourLabels} */\ninterface ContourLabelOptions {\n    /**\n     * Number of decimal places to use in the contour labels\n     * @default 0\n     */\n    n_decimal_places?: number;\n\n    /**\n     * Font face to use for the contour labels\n     * @default 'Trebuchet MS'\n     */\n    font_face?: string;\n\n    /**\n     * Font size in points to use for the contour labels\n     * @default 12\n     */\n    font_size?: number;\n\n    /**\n     * URL template to use in retrieving the font data for the labels. The default is to use the template from the map style.\n     */\n    font_url_template?: string;\n\n    /**\n     * Text color for the contour labels\n     * @default '#000000'\n     */\n    text_color?: string;\n\n    /**\n     * Halo (outline) color for the contour labels\n     * @default '#000000'\n     */\n    halo_color?: string;\n\n    /**\n     * Whether to draw the halo (outline) on the contour labels\n     * @default false\n     */\n    halo?: boolean;\n\n    /**\n     * Label density. 2 makes the labels twice as dense, 0.5 makes them half as dense.\n     * @default 1\n     */\n    density?: number;\n}\n\nconst contour_label_opt_defaults: Required<ContourLabelOptions> = {\n    n_decimal_places: 0,\n    font_face: 'Trebuchet MS',\n    font_size: 12,\n    font_url_template: '',\n    text_color: '#000000',\n    halo_color: '#000000',\n    halo: false,\n    density: 1\n}\n\n/** \n * Label the contours on a plot \n * @example \n * // Contour some data\n * const contours = new Contour(height_field, {color: '#000000', interval: 30});\n * // Label the contours\n * const labels = new ContourLabels(contours, {text_color: '#ffffff', halo: true});\n */\nclass ContourLabels<ArrayType extends TypedArray, GridType extends StructuredGrid, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private readonly contours: Contour<ArrayType, GridType, MapType>;\n    private gl_elems: ContourLabelGLElems<MapType> | null;\n    private text_collection: TextCollection | null;\n    private readonly opts: Required<ContourLabelOptions>;\n\n    constructor(contours: Contour<ArrayType, GridType, MapType>, opts?: ContourLabelOptions) {\n        super();\n\n        this.opts = normalizeOptions(opts, contour_label_opt_defaults);\n\n        this.contours = contours;\n        this.text_collection = null;\n        this.gl_elems = null;\n    }\n\n    /**\n     * Update contour labels when the field for the associated Contour object has been changed.\n     */\n    public async updateField() {\n        if (this.gl_elems === null) return;\n\n        const map = this.gl_elems.map;\n        const gl = this.gl_elems.gl;\n\n        const map_style = map.getStyle();\n\n        const font_url_template = this.opts.font_url_template == '' ? map_style.glyphs : this.opts.font_url_template;\n        if (font_url_template === undefined)\n            throw \"The map style doesn't have any glyph information. Please pass the font_url_template option to ContourLabels\";\n\n        const font_url = font_url_template.replace('{fontstack}', this.opts.font_face);\n\n        interface ContourLabelPlacement {\n            coord: {lon: number, lat: number};\n            text: string;\n        }\n        const label_pos: ContourLabelPlacement[] = [];\n\n        const contour_data = await this.contours.getContours();\n        const contour_levels = Object.keys(contour_data).map(parseFloat);\n        contour_levels.sort((a, b) => a - b);\n\n        const map_max_zoom = map.getMaxZoom();\n        const contour_label_spacing = 0.006 / this.opts.density * Math.pow(2, 7 - map_max_zoom);\n\n        Object.entries(contour_data).forEach(([level, contours]) => {\n            const icntr = (parseFloat(level) - contour_levels[0]);\n            const level_str = level.toString();\n\n            contours.forEach(contour => {\n                const c_map = contour.map(v => {\n                    const v_ll = new LngLat(...v).toMercatorCoord();\n                    return [v_ll.x, v_ll.y] as [number, number];\n                });\n        \n                const dist: number[] = [];\n                c_map.forEach((v, i) => {\n                    if (i == 0) {\n                        dist.push(0);\n                    }\n                    else {\n                        const v_last = c_map[i - 1];\n                        const this_dist = Math.hypot(v_last[0] - v[0], v_last[1] - v[1]);\n                        dist.push(dist[i - 1] + this_dist);\n                    }\n                });\n\n                let n_labels_placed = 0;\n                for (let idist = 1; idist < dist.length; idist++) {\n                    const target_dist = contour_label_spacing * (n_labels_placed + (icntr / 2) % 1);\n                    // This works fine when contour_label_spacing > the spacing between points along a contour, but when you allow the map to zoom in\n                    //  (and therefore contour_label_spacing gets small), dist[idist] outruns target_dist, so it doesn't put any more labels after the first.\n                    if (dist[idist - 1] <= target_dist && target_dist < dist[idist]) {\n                        const pt1 = contour[idist - 1];\n                        const pt2 = contour[idist];\n\n                        const alpha = (target_dist - dist[idist - 1]) / (dist[idist] - dist[idist - 1]);\n                        const pt_lon = (1 - alpha) * pt1[0] + alpha * pt2[0];\n                        const pt_lat = (1 - alpha) * pt1[1] + alpha * pt2[1];\n\n                        label_pos.push({coord: {lon: pt_lon, lat: pt_lat}, text: level_str});\n                        n_labels_placed++;\n                    }\n                }\n            });\n        });\n\n        const label_grid = new UnstructuredGrid(label_pos.map(lp => lp.coord));\n        const min_zoom = label_grid.getMinVisibleZoom(4);\n        const text_specs: TextSpec[] = label_pos.map((lp, ilp) => ({...lp.coord, min_zoom: min_zoom[ilp], text: lp.text}));\n\n        const tc_opts: TextCollectionOptions = {\n            horizontal_align: 'center', vertical_align: 'middle', font_size: this.opts.font_size,\n            halo: this.opts.halo, \n            text_color: Color.fromHex(this.opts.text_color), halo_color: Color.fromHex(this.opts.halo_color),\n        };\n\n        this.text_collection = await TextCollection.make(gl, text_specs, font_url, tc_opts);\n        map.triggerRepaint();\n    }\n\n    /** \n     * @internal \n     * Add the contour labels to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.gl_elems = {\n            gl: gl, map: map,\n        }\n\n        this.updateField();\n    }\n\n    /** \n     * @internal \n     * Render the contour labels\n     */\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg) {\n        if (this.gl_elems === null || this.text_collection === null) return;\n        const gl_elems = this.gl_elems;\n\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const map_zoom = gl_elems.map.getZoom();\n\n        this.text_collection.render(gl, arg, [map_width, map_height], map_zoom);\n    }\n}\n\nexport default Contour;\nexport {ContourLabels};\nexport type {ContourOptions, ContourLabelOptions};","\nimport Module from './cpp/marchingsquares';\nimport { MarchingSquaresModule } from './cpp/marchingsquares';\nimport './cpp/marchingsquares.wasm';\nimport { Grid } from \"./Grid\";\nimport { ContourData, TypedArray } from \"./AutumnTypes\";\n\nlet msm_promise: Promise<MarchingSquaresModule> | null = null;\n\ninterface InitMSModuleOpts {\n    document_script?: string;\n}\n\nfunction initMSModule(opts: InitMSModuleOpts) {\n    if (msm_promise === null) {\n        msm_promise = Module({'locateFile': (fname: string, dir: string) => (opts.document_script === undefined ? dir : opts.document_script) + fname});\n    }\n\n    return msm_promise;\n}\n\n/** Options for contouring data via {@link RawScalarField.getContours | RawScalarField.getContours()} */\ninterface FieldContourOpts {\n    /**\n     * The interval at which to create contours. The field will be contoured at this interval from its minimum to its maximum.\n     */\n    interval?: number;\n\n    /**\n     * Contour the field at these specific levels.\n     */\n    levels?: number[];\n\n    /**\n     * Add triangles in the contouring, which takes longer and generates more detailed (not necessarily smoother or better) contours\n     */\n    quad_as_tri?: boolean;\n}\n\nasync function contourCreator<ArrayType extends TypedArray>(data: ArrayType, grid: Grid, opts: FieldContourOpts) {\n    if (opts.interval === undefined && opts.levels === undefined) {\n        throw \"Must supply either an interval or levels to contourCreator()\"\n    }\n\n    const interval = opts.interval === undefined ? 0 : opts.interval;\n    const quad_as_tri = opts.quad_as_tri === undefined ? false : opts.quad_as_tri;\n\n    const msm = await initMSModule({});\n\n    const grid_coords = grid.getGridCoords();\n\n    const getContourLevels = data instanceof Float32Array ? msm.getContourLevelsFloat32 : msm.getContourLevelsFloat16;\n    const makeContours = data instanceof Float32Array ? msm.makeContoursFloat32 : msm.makeContoursFloat16;\n\n    const levels = opts.levels === undefined ? getContourLevels(data, grid.ni, grid.nj, interval) : opts.levels;\n    const contours = makeContours(data, grid_coords.x, grid_coords.y, levels, (x: number, y: number) => grid.transform(x, y, {inverse: true}), quad_as_tri);\n\n    return contours as ContourData;\n}\n\nexport {contourCreator, initMSModule};\nexport type {FieldContourOpts};","\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { ContourData, TypedArray, TypedArrayStr, WebGLAnyRenderingContext, WindProfile, isStormRelativeWindProfile } from \"./AutumnTypes\";\nimport { contourCreator, FieldContourOpts } from \"./ContourCreator\";\nimport { Grid } from \"./Grid\";\nimport { Cache, getArrayConstructor, zip } from \"./utils\";\nimport { WGLTextureSpec } from \"autumn-wgl\";\nimport { getGLFormatTypeAlignment } from \"./PlotComponent\";\n\ntype TextureDataType<ArrayType> = ArrayType extends Float32Array ? Float32Array : (ArrayType extends Uint8Array ? Uint8Array : Uint16Array);\n\nfunction getArrayDType(ary: TypedArray) : TypedArrayStr {\n    if (ary instanceof Float32Array) {\n        return 'float32';\n    }\n    else if (ary instanceof Uint8Array) {\n        return 'uint8';\n    }\n    return 'float16';\n}\n\n/** A class representing a raw 2D field of gridded data, such as height or u wind. */\nclass RawScalarField<ArrayType extends TypedArray, GridType extends Grid> {\n    public readonly grid: GridType;\n    public readonly data: ArrayType;\n\n    private readonly contour_cache: Cache<[FieldContourOpts], Promise<ContourData>>;\n\n    /**\n     * Create a data field. \n     * @param grid - The grid on which the data are defined\n     * @param data - The data, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid.\n     */\n    constructor(grid: GridType, data: ArrayType) {\n        this.grid = grid;\n        this.data = data;\n\n        if (grid.ni * grid.nj != data.length) {\n            throw `Data size (${data.length}) doesn't match the grid dimensions (${grid.ni} x ${grid.nj}; expected ${grid.ni * grid.nj} points)`;\n        }\n\n        this.contour_cache = new Cache(async (opts: FieldContourOpts) => {\n            return await contourCreator(this.data, this.grid, opts);\n        });\n    }\n\n    /** @internal */\n    private getTextureData() : TextureDataType<ArrayType> {\n        // Need to give float16 data as uint16s to make WebGL happy: https://github.com/petamoriken/float16/issues/105\n        const raw_data = this.data;\n        const raw_data_type = getArrayDType(raw_data);\n        const data: any = (raw_data_type == 'float32' || raw_data_type == 'uint8') ? raw_data : new Uint16Array(raw_data.buffer);\n        return data as TextureDataType<ArrayType>;\n    }\n\n    public getWGLTextureSpec(gl: WebGLAnyRenderingContext, image_mag_filter: number) : WGLTextureSpec {\n        const tex_data = this.getTextureData();\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, getArrayDType(this.data));\n    \n        return {'format': format, 'type': type,\n            'width': this.grid.ni, 'height': this.grid.nj, 'image': tex_data,\n            'mag_filter': image_mag_filter, 'row_alignment': row_alignment,\n        };\n    }\n\n    /**\n     * Get contour data as an object with each contour level being a separate property. \n     * @param opts - Options for doing the contouring\n     * @returns contour data as an object\n     */\n    public async getContours(opts: FieldContourOpts) {\n        return await this.contour_cache.getValue(opts);\n    }\n\n    /**\n     * Create a new field by aggregating a number of fields using a specific function\n     * @param func - A function that will be applied each element of the field. It should take the same number of arguments as fields you have and return a single number.\n     * @param args - The RawScalarFields to aggregate\n     * @returns a new gridded field\n     * @example\n     * // Compute wind speed from u and v\n     * wind_speed_field = RawScalarField.aggreateFields(Math.hypot, u_field, v_field);\n     */\n    public static aggregateFields<ArrayType extends TypedArray, GridType extends Grid>(func: (...args: number[]) => number, ...args: RawScalarField<ArrayType, GridType>[]) {\n        function* mapGenerator<T, U>(gen: Generator<T>, func: (arg: T) => U) {\n            for (const elem of gen) {\n                yield func(elem);\n            }\n        }\n\n        const arrayType = getArrayConstructor(args[0].data);\n        const zipped_args = zip(...args.map(a => a.data));\n        const agg_data = new arrayType(mapGenerator(zipped_args, (a: number[]): number => func(...a)));\n\n        return new RawScalarField(args[0].grid, agg_data);\n    }\n\n    public sampleField(lon: number, lat: number) {\n        return this.grid.sampleNearestGridPoint(lon, lat, this.data).sample;\n    }\n}\n\n/** The basis vectors for vector fields (i.e, whether vectors a relative to Earth or the grid) */\ntype VectorRelativeTo = 'earth' | 'grid';\n\n/** Options for {@link RawVectorField}s */\ninterface RawVectorFieldOptions {\n    /**\n     * Whether the vectors are relative to the grid ('grid') or Earth ('earth')\n     * @default 'grid'\n     */\n    relative_to?: VectorRelativeTo;\n}\n\n/** A class representing a 2D gridded field of vectors */\nclass RawVectorField<ArrayType extends TypedArray, GridType extends Grid> {\n    public readonly u: RawScalarField<ArrayType, GridType>;\n    public readonly v: RawScalarField<ArrayType, GridType>;\n    public readonly relative_to: VectorRelativeTo;\n\n    /**\n     * Create a vector field.\n     * @param grid - The grid on which the vector components are defined\n     * @param u    - The u (east/west) component of the vectors, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid\n     * @param v    - The v (north/south) component of the vectors, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid\n     * @param opts - Options for creating the vector field.\n     */\n    constructor(grid: GridType, u: ArrayType, v: ArrayType, opts?: RawVectorFieldOptions) {\n        opts = opts === undefined ? {}: opts;\n\n        this.u = new RawScalarField(grid, u);\n        this.v = new RawScalarField(grid, v);\n        this.relative_to = opts.relative_to === undefined ? 'grid' : opts.relative_to;\n    }\n\n    /** @internal */\n    private getTextureData() {\n        // Need to give float16 data as uint16s to make WebGL happy: https://github.com/petamoriken/float16/issues/105\n        const raw_u = this.u.data;\n        const raw_v = this.v.data;\n\n        const u_raw_data_type = getArrayDType(raw_u);\n        const v_raw_data_type = getArrayDType(raw_u);\n\n        const u: any = (u_raw_data_type == 'float32' || u_raw_data_type == 'uint8') ? raw_u : new Uint16Array(raw_u.buffer);\n        const v: any = (v_raw_data_type == 'float32' || v_raw_data_type == 'uint8') ? raw_v : new Uint16Array(raw_v.buffer);\n\n        return {u: u as TextureDataType<ArrayType>, v: v as TextureDataType<ArrayType>};\n    }\n\n    public getWGLTextureSpecs(gl: WebGLAnyRenderingContext, mag_filter: number) : {u: WGLTextureSpec, v: WGLTextureSpec} {\n        const {u: u_thin, v: v_thin} = this.getTextureData();\n\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, getArrayDType(this.u.data));\n\n        const u_image = {'format': format, 'type': type,\n            'width': this.grid.ni, 'height': this.grid.nj, 'image': u_thin,\n            'mag_filter': mag_filter, 'row_alignment': row_alignment,\n        };\n\n        const v_image = {'format': format, 'type': type,\n            'width': this.grid.ni, 'height': this.grid.nj, 'image': v_thin,\n            'mag_filter': mag_filter, 'row_alignment': row_alignment,\n        };\n\n        return {u: u_image, v: v_image};\n    }\n\n    /** @internal */\n    public getThinnedField(thin_fac: number, map_max_zoom: number) {\n        const new_grid = this.grid.getThinnedGrid(thin_fac, map_max_zoom);\n\n        const thin_u = new_grid.thinDataArray(this.grid, this.u.data);\n        const thin_v = new_grid.thinDataArray(this.grid, this.v.data);\n\n        return new RawVectorField(new_grid, thin_u, thin_v, {relative_to: this.relative_to});\n    }\n\n    /** @internal */\n    public get grid() {\n        return this.u.grid\n    }\n\n    public sampleField(lon: number, lat: number) : [number, number] {\n        const u_sample = this.grid.sampleNearestGridPoint(lon, lat, this.u.data);\n        const v_sample = this.grid.sampleNearestGridPoint(lon, lat, this.v.data);\n\n        const rot = this.relative_to == 'earth' ? 0 : this.grid.getVectorRotationAtPoint(u_sample.sample_lon, u_sample.sample_lat);\n        const mag = Math.hypot(u_sample.sample, v_sample.sample);\n        let brg = (Math.PI / 2 - Math.atan2(-v_sample.sample, -u_sample.sample) + rot) * 180 / Math.PI;\n\n        if (brg > 360) brg -= 360;\n        if (brg < 0) brg += 360;\n\n        return [brg, mag];\n    }\n}\n\n/** A class grid of wind profiles */\nclass RawProfileField<GridType extends Grid> {\n    public readonly profiles: WindProfile[];\n    public readonly grid: GridType;\n\n    /**\n     * Create a grid of wind profiles\n     * @param grid     - The grid on which the profiles are defined\n     * @param profiles - The wind profiles themselves, which should be given as a 1D array in row-major order, with the first profile being at the lower-left corner of the grid\n     */\n    constructor(grid: GridType, profiles: WindProfile[]) {\n        this.profiles = profiles;\n        this.grid = grid;\n    }\n\n    /** \n     * @internal\n     * Get the gridded storm motion vector field\n     */\n    public getStormMotionGrid() {\n        const profiles = this.profiles\n        const u = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n        const v = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n\n        profiles.forEach(prof => {\n            const idx = prof.ilon + this.grid.ni * prof.jlat;\n            if (isStormRelativeWindProfile(prof)) {\n                u[idx] = prof.smu;\n                v[idx] = prof.smv;\n            }\n            else {\n                u[idx] = 0;\n                v[idx] = 0;\n            }\n        });\n\n        return new RawVectorField(this.grid, u, v, {relative_to: 'grid'});\n    }\n\n    /** @internal */\n    public getProfileCoords() {\n        const {lats, lons} = this.grid.getEarthCoords();\n        const prof_lats = new Float32Array(this.profiles.length);\n        const prof_lons = new Float32Array(this.profiles.length);\n\n        this.profiles.forEach((prof, iprof) => {\n            const idx = prof.ilon + prof.jlat * this.grid.ni;\n            prof_lats[iprof] = lats[idx];\n            prof_lons[iprof] = lons[idx];\n        });\n\n        return {lats: prof_lats, lons: prof_lons};\n    }\n}\n\n/** \n * Type for an observation data point\n * @example\n * const obs : ObsRawData<'t' | 'td'> = {'t': 71, 'td': 66};\n */\ntype ObsRawData<ObsFieldName extends string> = Record<ObsFieldName, string | number | [number, number] | null>;\n\n/** Raw observation data, given as a list of objects */\nclass RawObsField<GridType extends Grid, ObsFieldName extends string> {\n    public readonly grid: GridType;\n    public readonly data: ObsRawData<ObsFieldName>[];\n\n    /**\n     * Create a field of observations\n     * @param grid - The grid on which the obs are defined (can be either a structured or unstructured grid)\n     * @param data - The observation data. Conceptually, obs are given as a list of individual observations.\n     */\n    constructor(grid: GridType, data: ObsRawData<ObsFieldName>[]) {\n        this.grid = grid;\n        this.data = data;\n    }\n\n    /** \n     * @internal\n     * Get observation element as a list of scalar numbers \n     */\n    getScalar(key: ObsFieldName) {\n        const field_data = this.data.map(d => d[key]);\n        if (!field_data.map(d => typeof d == 'number' || d === null).reduce((a, b) => a && b, true))\n            throw `It doesn't look like ${key} contains scalar numerical data`;\n\n        return field_data as (number | null)[];\n    }\n\n    /** \n     * @internal\n     * Get observed element as a list of strings (internal method)\n     */\n    getStrings(key: ObsFieldName) {\n        const field_data = this.data.map(d => d[key]);\n        if (!field_data.map(d => typeof d == 'string' || d === null).reduce((a, b) => a && b, true))\n            throw `It doesn't look like ${key} contains string data`;\n\n        return field_data as (string | null)[];\n    }\n\n    /** \n     * @internal\n     * Get observed element as a list of vectors (internal method) \n     */\n    getVector(key: ObsFieldName) {\n        const field_data = this.data.map(d => d[key]);\n        if (!field_data.map(d => Array.isArray(d)).reduce((a, b) => a && b, true))\n            throw `It doesn't look like ${key} contains vector data`;\n\n        const vector_field_data = field_data as [number | null, number | null][];\n\n        const vec2comp = (wspd: number, wdir: number) => {\n            const u = -wspd * Math.sin(wdir * Math.PI / 180);\n            const v = -wspd * Math.cos(wdir * Math.PI / 180);\n            return [u, v];\n        }\n\n        const u_data = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n        const v_data = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n\n        vector_field_data.forEach(([wspd, wdir], idat) => {\n            if (wspd === null || wdir === null) {\n                return;\n            }\n\n            const [u, v] = vec2comp(wspd, wdir);\n            u_data[idat] = u;\n            v_data[idat] = v;\n        });\n\n        return new RawVectorField(this.grid, u_data, v_data, {relative_to: 'earth'});\n    }\n}\n\nexport {RawScalarField, RawVectorField, RawProfileField, RawObsField};\nexport type {RawVectorFieldOptions, VectorRelativeTo, TextureDataType, ObsRawData};","\nimport { PlotComponent } from './PlotComponent';\nimport { ColorMap, ColorMapGPUInterface} from './Colormap';\nimport { WGLBuffer, WGLTexture } from 'autumn-wgl';\nimport { RawScalarField } from './RawField';\nimport { MapLikeType } from './Map';\nimport { RenderMethodArg, TypedArray, WebGLAnyRenderingContext, getRendererData } from './AutumnTypes';\nimport { normalizeOptions } from './utils';\nimport { StructuredGrid } from './Grid';\nimport { ShaderProgramManager } from './ShaderManager';\n\nconst contourfill_vertex_shader_src = require('./glsl/contourfill_vertex.glsl');\nconst contourfill_fragment_shader_src = require('./glsl/contourfill_fragment.glsl');\n\n/** Options for {@link ContourFill} components */\ninterface ContourFillOptions {\n    /** The color maps to use when creating the fills */\n    cmap: ColorMap | ColorMap[];\n\n    /** \n     * A mask specifying where to use each color map. This should be on the same grid as the RawScalarField passed. \n     * A 1 in the mask means to use the first colormap, a 2 means to use the second colormap, etc.\n     */\n    cmap_mask?: Uint8Array | null;\n\n    /** \n     * The opacity for the filled contours \n     * @default 1\n     */\n    opacity?: number;\n}\n\nconst default_cmap = new ColorMap([0, 1], ['#000000'], {overflow_color: '#000000', underflow_color: '#000000'})\n\nconst contour_fill_opt_defaults: Required<ContourFillOptions> = {\n    cmap: [default_cmap],\n    cmap_mask: null,\n    opacity: 1,\n}\n\n/** Options for {@link Raster} components */\ninterface RasterOptions {\n    /** The color map to use when creating the raster plot */\n    cmap: ColorMap | ColorMap[];\n\n    /** \n     * A mask specifying where to use each color map. This should be on the same grid as the RawScalarField passed. \n     * A 1 in the mask means to use the first colormap, a 2 means to use the second colormap, etc.\n     */\n    cmap_mask?: Uint8Array | null;\n\n    /** \n     * The opacity for the raster plot\n     * @default 1\n     */\n    opacity?: number;\n}\n\nconst raster_opt_defaults: Required<RasterOptions> = {\n    cmap: [default_cmap],\n    cmap_mask: null,\n    opacity: 1,\n}\n\ninterface PlotComponentFillGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n    shader_manager: ShaderProgramManager;\n    vertices: WGLBuffer;\n\n    texcoords: WGLBuffer;\n}\n\nclass PlotComponentFill<ArrayType extends TypedArray, GridType extends StructuredGrid, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType, GridType>;\n    public readonly opts: Required<ContourFillOptions>;\n\n    private readonly cmap_gpu: ColorMapGPUInterface[];\n\n    private gl_elems: PlotComponentFillGLElems<MapType> | null;\n    private fill_texture: WGLTexture | null;\n    private mask_texture: WGLTexture | null;\n    protected image_mag_filter: number | null;\n    protected cmap_mag_filter: number | null;\n\n    constructor(field: RawScalarField<ArrayType, GridType>, opts: ContourFillOptions) {\n        super();\n\n        this.field = field;\n        this.opts = normalizeOptions(opts, contour_fill_opt_defaults);\n        this.opts.cmap = Array.isArray(this.opts.cmap) ? this.opts.cmap : [this.opts.cmap];\n\n        this.cmap_gpu = this.opts.cmap.map(cm => new ColorMapGPUInterface(cm));\n\n        this.gl_elems = null;\n        this.fill_texture = null;\n        this.mask_texture = null;\n        this.image_mag_filter = null;\n        this.cmap_mag_filter = null;\n    }\n\n    public async updateField(field: RawScalarField<ArrayType, GridType>, mask?: Uint8Array) {\n        this.field = field;\n\n        if (this.image_mag_filter === null || this.cmap_mag_filter === null) {\n            throw `Implement magnification filters in a subclass`;\n        }\n\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n        const map = this.gl_elems.map;\n    \n        const fill_image = this.field.getWGLTextureSpec(gl, this.image_mag_filter);\n\n        if (this.fill_texture === null) {\n            this.fill_texture = new WGLTexture(gl, fill_image);\n        }\n        else {\n            this.fill_texture.setImageData(fill_image);\n        }\n\n        if (mask !== undefined) {\n            if (this.opts.cmap_mask === null) {\n                console.warn(\"A mask was passed to updateField on a Fill component that didn't have a mask. The updated mask will be ignored.\");\n                return;\n            }\n\n            const mask_field = new RawScalarField(this.field.grid, mask);\n            const mask_image = mask_field.getWGLTextureSpec(gl, gl.NEAREST);\n            \n            if (this.mask_texture === null) {\n                this.mask_texture = new WGLTexture(gl, mask_image);\n            }\n            else {\n                this.mask_texture.setImageData(mask_image);\n            }\n        }\n\n        map.triggerRepaint();\n    }\n\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        // Basic procedure for the filled contours inspired by https://blog.mbq.me/webgl-weather-globe/\n\n        const {vertices: vertices, texcoords: texcoords} = await this.field.grid.getWGLBuffers(gl);\n\n        this.cmap_gpu.forEach(cmg => {\n            if (this.image_mag_filter === null || this.cmap_mag_filter === null) {\n                throw `Implement magnification filters in a subclass`;\n            }\n\n            cmg.setupShaderVariables(gl, this.cmap_mag_filter);\n        });\n\n        const shader_defines = [];\n\n        if (this.opts.cmap_mask !== null) {\n            shader_defines.push('MASK');\n        }\n\n        const shader_manger = new ShaderProgramManager(contourfill_vertex_shader_src, ColorMapGPUInterface.applyShader(contourfill_fragment_shader_src), shader_defines);\n\n        this.gl_elems = {\n            gl: gl, shader_manager: shader_manger, map: map, vertices: vertices, texcoords: texcoords,\n        };\n\n        this.updateField(this.field, this.opts.cmap_mask === null ? undefined : this.opts.cmap_mask);\n    }\n\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg) {\n        if (this.gl_elems === null || this.fill_texture === null) return;\n        const gl_elems = this.gl_elems;\n\n        const render_data = getRendererData(arg);\n        const program = this.gl_elems.shader_manager.getShaderProgram(gl, render_data.shaderData);\n\n        program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_opacity': this.opts.opacity, ...this.gl_elems.shader_manager.getShaderUniforms(render_data)},\n            {'u_fill_sampler': this.fill_texture}\n        );\n\n        this.cmap_gpu.forEach((cmg, icmg) => {\n            program.setUniforms({'u_offset': 0});\n\n            if (this.opts.cmap_mask !== null && this.mask_texture !== null) {\n                program.setUniforms({'u_mask_val': icmg + 1});\n                program.bindTextures({'u_mask_sampler': this.mask_texture});\n            }\n\n            cmg.bindShaderVariables(program);\n\n            gl.enable(gl.BLEND);\n            gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    \n            program.draw();\n    \n            if (render_data.type != 'maplibre' || !render_data.shaderData.define.includes('GLOBE')) {\n                program.setUniforms({'u_offset': -2});\n                program.draw();\n    \n                program.setUniforms({'u_offset': -1});\n                program.draw();\n    \n                program.setUniforms({'u_offset': 1});\n                program.draw();\n            }\n        });\n    }\n}\n\n/** \n * A raster (i.e. pixel) plot \n * @example\n * // Create a raster plot with the provided color map\n * const raster = new Raster(wind_speed_field, {cmap: color_map});\n */\nclass Raster<ArrayType extends TypedArray, GridType extends StructuredGrid, MapType extends MapLikeType> extends PlotComponentFill<ArrayType, GridType, MapType> {\n\n    /**\n     * Create a raster plot\n     * @param field - The field to create the raster plot from\n     * @param opts  - Options for creating the raster plot\n     */\n    constructor(field: RawScalarField<ArrayType, GridType>, opts: RasterOptions) {\n        super(field, opts);\n    }\n\n    /**\n     * Update the data displayed as a raster plot\n     * @param field - The new field to display as a raster plot\n     */\n    public async updateField(field: RawScalarField<ArrayType, GridType>, mask?: Uint8Array) {\n        await super.updateField(field, mask);\n    }\n\n    /**\n     * @internal\n     * Add the raster plot to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.image_mag_filter = gl.NEAREST;\n        this.cmap_mag_filter = gl.LINEAR;\n        await super.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render the raster plot\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        super.render(gl, matrix);\n    }\n}\n\n/** \n * A filled contoured field \n * @example\n * // Create a field of filled contours with the provided color map\n * const fill = new ContourFill(wind_speed_field, {cmap: color_map});\n */\nclass ContourFill<ArrayType extends TypedArray, GridType extends StructuredGrid, MapType extends MapLikeType> extends PlotComponentFill<ArrayType, GridType, MapType> {\n\n    /**\n     * Create a filled contoured field\n     * @param field - The field to create filled contours from\n     * @param opts  - Options for creating the filled contours\n     */\n    constructor(field: RawScalarField<ArrayType, GridType>, opts: ContourFillOptions) {\n        super(field, opts);\n    }\n\n    /**\n     * Update the data displayed as filled contours\n     * @param field - The new field to display as filled contours\n     */\n    public async updateField(field: RawScalarField<ArrayType, GridType>, mask?: Uint8Array) {\n        await super.updateField(field, mask);\n    }\n\n    /**\n     * @internal\n     * Add the filled contours to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.image_mag_filter = gl.LINEAR;\n        this.cmap_mag_filter = gl.NEAREST;\n        await super.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render the filled contours\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        super.render(gl, matrix);\n    }\n}\n\nexport {ContourFill, Raster};\nexport type {ContourFillOptions, RasterOptions};","\nimport { BillboardSpec, RenderMethodArg, TypedArray, WebGLAnyRenderingContext, getRendererData } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { ColorMap, ColorMapGPUInterface } from \"./Colormap\";\nimport { Grid } from \"./Grid\";\nimport { RawVectorField } from \"./RawField\";\nimport { WGLBuffer, WGLTexture, WGLTextureSpec } from \"autumn-wgl\";\nimport { ShaderProgramManager } from \"./ShaderManager\";\n\nconst billboard_vertex_shader_src = require('./glsl/billboard_vertex.glsl');\nconst billboard_fragment_shader_src = require('./glsl/billboard_fragment.glsl');\n\ninterface BillboardCollectionOpts {\n    color?: Color;\n    cmap?: ColorMap;\n    rotate_with_map?: boolean;\n}\n\ninterface BillboardCollectionGLElems {\n    gl: WebGLAnyRenderingContext;\n    shader_manager: ShaderProgramManager;\n    geom_vertices: WGLBuffer;\n    vertices: WGLBuffer;\n    texcoords: WGLBuffer;\n    texture: WGLTexture;\n    proj_rot_texture: WGLTexture;\n    cmap_gpu: ColorMapGPUInterface | null;\n}\n\nclass BillboardCollection<ArrayType extends TypedArray, GridType extends Grid> {\n    private field: RawVectorField<ArrayType, GridType>;\n    public readonly spec: BillboardSpec;\n    public readonly color: Color;\n    public readonly cmap: ColorMap | null;\n    public readonly rotate_with_map: boolean;\n    public readonly size_multiplier: number;\n    public readonly thin_fac: number;\n    public readonly max_zoom: number;\n    public readonly billboard_image: WGLTextureSpec;\n\n    private gl_elems: BillboardCollectionGLElems | null;\n    private wind_textures: {u: WGLTexture, v: WGLTexture} | null;\n\n    constructor(field: RawVectorField<ArrayType, GridType>, thin_fac: number, max_zoom: number, \n                billboard_image: WGLTextureSpec, billboard_spec: BillboardSpec, billboard_size_mult: number, opts?: BillboardCollectionOpts) {\n\n        opts = opts === undefined ? {} : opts;\n        this.color = opts.color === undefined ? new Color([0, 0, 0, 1]) : opts.color;\n        this.cmap = opts.cmap === undefined ? null : opts.cmap;\n        this.rotate_with_map = opts.rotate_with_map === undefined ? true : opts.rotate_with_map;\n\n        this.field = field;\n        this.spec = billboard_spec;\n        this.size_multiplier = billboard_size_mult;\n        this.thin_fac = thin_fac;\n        this.max_zoom = max_zoom;\n        this.billboard_image = billboard_image;\n        this.gl_elems = null;\n        this.wind_textures = null;\n    }\n\n    public updateField(field: RawVectorField<ArrayType, GridType>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n        const data = this.field.getThinnedField(this.thin_fac, this.max_zoom);\n\n        const {u: u_image, v: v_image} = data.getWGLTextureSpecs(gl, gl.NEAREST);\n\n        if (this.wind_textures === null) {\n            this.wind_textures = {u: new WGLTexture(gl, u_image), v: new WGLTexture(gl, v_image)};\n        }\n        else {\n            this.wind_textures.u.setImageData(u_image);\n            this.wind_textures.v.setImageData(v_image);\n        }\n    }\n\n    public async setup(gl: WebGLAnyRenderingContext) {\n        const thinned_grid = this.field.grid.getThinnedGrid(this.thin_fac, this.max_zoom);\n\n        const geom_verts = new Float32Array([0., 1., 2., 3.]);\n        const geom_buffer = new WGLBuffer(gl, geom_verts, 1, gl.TRIANGLE_STRIP);\n\n        const {vertices, texcoords} = await thinned_grid.getWGLBillboardBuffers(gl, this.thin_fac, this.max_zoom);\n        const {rotation: proj_rotation_tex} = thinned_grid.getVectorRotationTexture(gl, this.field.relative_to == 'earth');\n\n        const texture = new WGLTexture(gl, this.billboard_image);\n\n        const shader_defines: string[] = [];\n        let fragment_src = billboard_fragment_shader_src;\n        let cmap_gpu = null;\n        if (this.cmap !== null) {\n            fragment_src = ColorMapGPUInterface.applyShader(fragment_src);\n\n            cmap_gpu = new ColorMapGPUInterface(this.cmap);\n            cmap_gpu.setupShaderVariables(gl, gl.NEAREST);\n\n            shader_defines.push('COLORMAP');\n        }\n\n        const shader_manager = new ShaderProgramManager(billboard_vertex_shader_src, fragment_src, shader_defines);\n\n        this.gl_elems = {gl: gl, shader_manager: shader_manager, geom_vertices: geom_buffer, vertices: vertices, texcoords: texcoords, texture: texture, \n                         proj_rot_texture: proj_rotation_tex, cmap_gpu: cmap_gpu};\n    }\n\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg, [map_width, map_height]: [number, number], map_zoom: number, map_bearing: number, map_pitch: number) {\n        if (this.gl_elems === null || this.wind_textures === null) return;\n\n        const render_data = getRendererData(arg);\n        const program = this.gl_elems.shader_manager.getShaderProgram(gl, render_data.shaderData);\n\n        const gl_elems = this.gl_elems;\n\n        const bb_size = this.spec.BB_HEIGHT * (map_height / map_width) * this.size_multiplier;\n        const bb_width = this.spec.BB_WIDTH / this.spec.BB_TEX_WIDTH;\n        const bb_height = this.spec.BB_HEIGHT / this.spec.BB_TEX_HEIGHT;\n\n        program.use(\n            {'a_geom': gl_elems.geom_vertices, 'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_bb_size': bb_size, 'u_bb_width': bb_width, 'u_bb_height': bb_height,\n             'u_bb_mag_bin_size': this.spec.BB_MAG_BIN_SIZE, 'u_bb_mag_wrap': this.spec.BB_MAG_WRAP, 'u_offset': 0,\n             'u_map_aspect': map_height / map_width, 'u_zoom': map_zoom, 'u_rotate_with_map': this.rotate_with_map ? 1 : 0,\n              ...this.gl_elems.shader_manager.getShaderUniforms(render_data)},\n            {'u_sampler': gl_elems.texture, 'u_u_sampler': this.wind_textures.u, 'u_v_sampler': this.wind_textures.v, 'u_rot_sampler': gl_elems.proj_rot_texture}\n        );\n\n        if (gl_elems.cmap_gpu !== null) {\n            gl_elems.cmap_gpu.bindShaderVariables(program);\n        }\n        else {\n            program.setUniforms({'u_bb_color': this.color.toRGBATuple()});\n        }\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        program.draw();\n\n        if (render_data.type != 'maplibre' || !render_data.shaderData.define.includes('GLOBE')) {\n            program.setUniforms({'u_offset': -2});\n            program.draw();\n\n            program.setUniforms({'u_offset': -1});\n            program.draw();\n\n            program.setUniforms({'u_offset': 1});\n            program.draw();\n        }\n    }\n}\n\nexport {BillboardCollection};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport { BillboardCollection } from './BillboardCollection';\nimport { normalizeOptions } from './utils';\nimport { RawVectorField } from \"./RawField\";\nimport { MapLikeType } from \"./Map\";\nimport { BillboardSpec, RenderMethodArg, TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { ColorMap } from \"./Colormap\";\nimport { Grid } from \"./Grid\";\n\nconst BASE_BARB_DIMS: BillboardSpec = {\n    BB_WIDTH: 85,\n    BB_HEIGHT: 256,\n    BB_TEX_WIDTH: 1024,\n    BB_TEX_HEIGHT: 1024,\n    BB_MAG_MAX: 235,\n    BB_MAG_WRAP: 60,\n    BB_MAG_BIN_SIZE: 5,\n}\n\nconst LINE_WIDTH_MULTIPLIER = 4;\n\nfunction createBarbTexture(dimensions: BillboardSpec, line_width: number) : HTMLCanvasElement {\n    let canvas = document.createElement('canvas');\n\n    canvas.width = dimensions.BB_TEX_WIDTH;\n    canvas.height = dimensions.BB_TEX_HEIGHT;\n    \n    function drawWindBarb(ctx: CanvasRenderingContext2D, tipx: number, tipy: number, mag: number) : void {\n        const elem_full_size = dimensions.BB_WIDTH / 2 - 4;\n        const elem_spacing = elem_full_size / 2;\n        \n        if (mag < 2.5) {\n            ctx.beginPath();\n            ctx.arc(tipx, tipy, elem_full_size / 2, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        else {\n            let elem_pos = 0;\n            let mag_countdown = mag;\n\n            let staff_length = 0;\n            const n_flags = Math.floor((mag_countdown + 2.5) / 50)\n            staff_length += n_flags * elem_full_size / 2 + elem_spacing \n                                   + (n_flags - 1) * elem_spacing / 2;\n            mag_countdown -= n_flags * 50;\n            const n_full_barbs = Math.floor((mag_countdown + 2.5) / 10)\n            staff_length += n_full_barbs * elem_spacing;\n            mag_countdown -= n_full_barbs * 10;\n            const n_half_barbs = Math.floor((mag_countdown + 2.5) / 5);\n            staff_length += n_half_barbs * elem_spacing;\n            \n            if (mag < 7.5) {\n                staff_length += elem_spacing;\n            }\n            \n            staff_length = Math.max(120, staff_length);\n            \n            // staff\n            ctx.beginPath();\n            ctx.moveTo(tipx, tipy);\n            ctx.lineTo(tipx, tipy + staff_length);\n\n            mag_countdown = mag;\n\n            elem_pos = tipy + staff_length;\n            let last_was_flag = false;\n            let first_elem = true;\n        \n            while (mag_countdown > 47.5) {\n                if (last_was_flag) elem_pos += elem_spacing / 2;\n                // flag\n                if (!first_elem) {\n                    ctx.moveTo(tipx, elem_pos);\n                }\n                ctx.lineTo(tipx - elem_full_size, elem_pos);\n                ctx.lineTo(tipx, elem_pos - elem_full_size / 2)\n\n                elem_pos -= elem_full_size / 2 + elem_spacing;\n                mag_countdown -= 50;\n                last_was_flag = true;\n                first_elem = false;\n            }\n        \n            while (mag_countdown > 7.5) {\n                // full barb\n                if (!first_elem) {\n                    ctx.moveTo(tipx, elem_pos);\n                }\n                ctx.lineTo(tipx - elem_full_size, elem_pos + elem_full_size / 2);\n            \n                elem_pos -= elem_spacing;\n                mag_countdown -= 10;\n                first_elem = false;\n            }\n            \n            if (mag < 7.5) {\n                elem_pos -= elem_spacing;\n            }\n        \n            while (mag_countdown > 2.5) {\n                // half barb\n                ctx.moveTo(tipx, elem_pos);\n                ctx.lineTo(tipx - elem_full_size / 2, elem_pos + elem_full_size / 4);\n                mag_countdown -= 5;\n            }\n\n            ctx.stroke();\n        }\n    }\n    \n    let ctx = canvas.getContext('2d');\n    if (ctx === null) {\n        throw \"Could not get rendering context for the wind barb canvas\";\n    }\n\n    ctx.lineWidth = line_width;\n    ctx.miterLimit = 4;\n    \n    for (let ibarb = 0; ibarb <= dimensions.BB_MAG_MAX; ibarb += dimensions.BB_MAG_BIN_SIZE) {\n        const x_pos = (ibarb % dimensions.BB_MAG_WRAP) / dimensions.BB_MAG_BIN_SIZE * dimensions.BB_WIDTH + dimensions.BB_WIDTH / 2;\n        const y_pos = Math.floor(ibarb / dimensions.BB_MAG_WRAP) * dimensions.BB_HEIGHT + dimensions.BB_WIDTH / 2;\n        drawWindBarb(ctx, x_pos, y_pos, ibarb);\n    }\n\n    return canvas;\n}\n\n/** Options for {@link Barbs} components */\ninterface BarbsOptions {\n    /** \n     * The color to use for the barbs as a hex color string;.\n     * @default '#000000'\n     */\n    color?: string;\n\n    /**\n     * A color map to use to color the barbs by magnitude. Specifying cmap overrides the color argument.\n     */\n    cmap?: ColorMap | null;\n\n    /**\n     * The width of the lines to use for the barbs\n     * @default 2\n     */\n    line_width?: number;\n\n    /**\n     * A multiplier for the barb size\n     * @default 1\n     */\n    barb_size_multiplier?: number;\n\n    /** \n     * How much to thin the barbs at zoom level 1 on the map. This effectively means to plot every `n`th barb in the i and j directions, where `n` = \n     * `thin_fac`. `thin_fac` should be a power of 2. \n     * @default 1\n     */\n    thin_fac?: number;\n}\n\nconst barb_opt_defaults: Required<BarbsOptions> = {\n    color: '#000000',\n    cmap: null,\n    line_width: 2,\n    barb_size_multiplier: 1, \n    thin_fac: 1\n}\n\ninterface BarbsGLElems<ArrayType extends TypedArray, GridType extends Grid, MapType extends MapLikeType> {\n    map: MapType;\n    barb_billboards: BillboardCollection<ArrayType, GridType>;\n}\n\n/** \n * A class representing a field of wind barbs. The barbs are automatically thinned based on the zoom level on the map; the user only has to provide a\n * thinning factor at zoom level 1.\n * @example\n * // Create a barb field with black barbs and plotting every 16th wind barb in both i and j at zoom level 1\n * const vector_field = new RawVectorField(grid, u_data, v_data);\n * const barbs = new Barbs(vector_field, {color: '#000000', thin_fac: 16});\n */\nclass Barbs<ArrayType extends TypedArray, GridType extends Grid, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    /** The vector field */\n    private fields: RawVectorField<ArrayType, GridType>;\n    public readonly opts: Required<BarbsOptions>;\n    private readonly color: Color;\n\n    private gl_elems: BarbsGLElems<ArrayType, GridType, MapType> | null;\n    private barb_texture: HTMLCanvasElement;\n\n    /**\n     * Create a field of wind barbs\n     * @param fields - The vector field to plot as barbs\n     * @param opts   - Options for creating the wind barbs\n     */\n    constructor(fields: RawVectorField<ArrayType, GridType>, opts: BarbsOptions) {\n        super();\n\n        this.fields = fields;\n\n        this.opts = normalizeOptions(opts, barb_opt_defaults);\n        this.color = Color.fromHex(this.opts.color);\n        this.barb_texture = createBarbTexture(BASE_BARB_DIMS, this.opts.line_width / this.opts.barb_size_multiplier * LINE_WIDTH_MULTIPLIER);\n\n        this.gl_elems = null;\n    }\n\n    /**\n     * Update the field displayed as barbs\n     * @param fields - The new field to display as barbs\n     */\n    public async updateField(fields: RawVectorField<ArrayType, GridType>) {\n        this.fields = fields;\n        if (this.gl_elems === null) return;\n        this.gl_elems.barb_billboards.updateField(fields);\n        this.gl_elems.map.triggerRepaint();\n    }\n\n    /**\n     * @internal \n     * Add the barb field to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        gl.getExtension('OES_texture_float');\n        gl.getExtension('OES_texture_float_linear');\n        \n        const map_max_zoom = map.getMaxZoom();\n\n        const barb_image = {format: gl.RGBA, type: gl.UNSIGNED_BYTE, image: this.barb_texture, mag_filter: gl.NEAREST};\n\n        const cmap = this.opts.cmap === null ? undefined : this.opts.cmap;\n        const barb_billboards = new BillboardCollection(this.fields, this.opts.thin_fac, map_max_zoom, barb_image, \n            BASE_BARB_DIMS, 0.1 * this.opts.barb_size_multiplier, {color: this.color, cmap: cmap});\n        await barb_billboards.setup(gl);\n\n        this.gl_elems = {\n            map: map, barb_billboards: barb_billboards\n        }\n\n        this.updateField(this.fields);\n    }\n\n    /**\n     * @internal \n     * Render the barb field\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: RenderMethodArg) {\n        if (this.gl_elems === null) return;\n        const gl_elems = this.gl_elems\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        gl_elems.barb_billboards.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n    }\n}\n\nexport default Barbs;\nexport type {BarbsOptions};","\nimport { RenderMethodArg, TypedArray, WebGLAnyRenderingContext, getRendererData } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { StructuredGrid } from \"./Grid\";\nimport { MapLikeType } from \"./Map\";\nimport { PlotComponent } from \"./PlotComponent\";\nimport { RawScalarField } from \"./RawField\";\nimport { ShaderProgramManager } from \"./ShaderManager\";\nimport { normalizeOptions } from \"./utils\";\nimport { WGLBuffer, WGLTexture } from \"autumn-wgl\";\n\nconst paintball_vertex_shader_src = require('./glsl/paintball_vertex.glsl');\nconst paintball_fragment_shader_src = require('./glsl/paintball_fragment.glsl');\n\n/** Options for {@link Paintball} components */\ninterface PaintballOptions {\n    /**\n     * The list of colors (as hex strings) to use for each member in the paintball plot. The first color corresponds to member 1, the second to member 2, etc.\n     */\n    colors?: string[];\n\n    /**\n     * The opacity of the paintball plot\n     * @default 1\n     */\n    opacity?: number;\n}\n\nconst paintball_opt_defaults: Required<PaintballOptions> = {\n    colors: ['#000000'],\n    opacity: 1\n}\n\ninterface PaintballGLElems {\n    gl: WebGLAnyRenderingContext;\n    shader_manager: ShaderProgramManager;\n    vertices: WGLBuffer;\n    texcoords: WGLBuffer;\n}\n\n/** \n * A class representing a paintball plot, which is a plot of objects in every member of an ensemble. Objects are usually defined by a single threshold on\n * a field (such as simulated reflectivity greater than 40 dBZ), but could in theory be defined by any arbitrarily complicated method. In autumnplot-gl,\n * the data for the paintball plot is given as a single field with the objects from each member encoded as \"bits\" in the field. Because the field is made up\n * of single-precision floats, this works for up to 24 members. (Technically speaking, I don't need the quotes around \"bits\", as they're bits of the \n * significand of an IEEE 754 float.)\n */\nclass Paintball<ArrayType extends TypedArray, GridType extends StructuredGrid, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType, GridType>;\n    public readonly opts: Required<PaintballOptions>;\n    private readonly color_components: number[];\n\n    private gl_elems: PaintballGLElems | null;\n    private fill_texture: WGLTexture | null;\n\n    /**\n     * Create a paintball plot\n     * @param field - A scalar field containing the member objects encoded as \"bits.\" The numerical value of each grid point can be constructed like \n     *               `1.0 * M1 + 2.0 * M2 + 4.0 * M3 + 8.0 * M4 ...`, where `M1` is 1 if that grid point is in an object in member 1 and 0 otherwise,\n     *               `M2` is the same thing for member 2, and `M3` and `M4` and up to `Mn` are the same thing for the rest of the members.\n     * @param opts  - Options for creating the paintball plot\n     */\n    constructor(field: RawScalarField<ArrayType, GridType>, opts?: PaintballOptions) {\n        super();\n\n        this.field = field;\n\n        this.opts = normalizeOptions(opts, paintball_opt_defaults);\n        this.color_components = this.opts.colors.map(color => Color.fromHex(color).toRGBATuple()).flat();\n        \n        this.gl_elems = null;\n        this.fill_texture = null;\n    }\n\n    /**\n     * Update the field displayed as a paintball plot\n     * @param field - The new field to display as a paintball plot\n     */\n    public async updateField(field: RawScalarField<ArrayType, GridType>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n        const gl = this.gl_elems.gl;\n\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, 2);\n\n        const fill_image = this.field.getWGLTextureSpec(gl, gl.NEAREST);\n\n        if (this.fill_texture === null) {\n            this.fill_texture = new WGLTexture(gl, fill_image);\n        }\n        else {\n            this.fill_texture.setImageData(fill_image);\n        }\n    }\n\n    /**\n     * @internal\n     * Add the paintball plot to a map.\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        gl.getExtension('OES_texture_float');\n\n        const {vertices: verts_buf, texcoords: tex_coords_buf} = await this.field.grid.getWGLBuffers(gl);\n        const vertices = verts_buf;\n        const texcoords = tex_coords_buf;\n\n        const shader_manager = new ShaderProgramManager(paintball_vertex_shader_src, paintball_fragment_shader_src, []);\n\n        this.gl_elems = {\n            gl: gl, shader_manager: shader_manager, vertices: vertices, texcoords: texcoords,\n        };\n\n        this.updateField(this.field);\n    }\n\n    /**\n     * @internal\n     * Render the paintball plot\n     */\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg) {\n        if (this.gl_elems === null || this.fill_texture === null) return;\n        const gl_elems = this.gl_elems;\n\n        const render_data = getRendererData(arg);\n        const program = this.gl_elems.shader_manager.getShaderProgram(gl, render_data.shaderData);\n\n        // Render to framebuffer\n        program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_opacity': this.opts.opacity, 'u_colors': this.color_components, 'u_num_colors': this.opts.colors.length, 'u_offset': 0,\n             ...this.gl_elems.shader_manager.getShaderUniforms(render_data)},\n            {'u_fill_sampler': this.fill_texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        program.draw();\n\n        if (render_data.type != 'maplibre' || !render_data.shaderData.define.includes('GLOBE')) {\n            program.setUniforms({'u_offset': -2});\n            program.draw();\n    \n            program.setUniforms({'u_offset': -1});\n            program.draw();\n    \n            program.setUniforms({'u_offset': 1});\n            program.draw();\n        }\n    }\n}\n\nexport default Paintball;\nexport type {PaintballOptions};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport { PolylineCollection } from \"./PolylineCollection\";\nimport { BillboardCollection } from \"./BillboardCollection\";\nimport { normalizeOptions } from './utils';\nimport { MapLikeType } from \"./Map\";\nimport { RawProfileField } from \"./RawField\";\nimport { LineData, RenderMethodArg, TypedArray, WebGLAnyRenderingContext, WindProfile, isStormRelativeWindProfile } from \"./AutumnTypes\";\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { ColorMap } from \"./Colormap\";\nimport { Color } from \"./Color\";\nimport { Grid } from \"./Grid\";\n\nconst LINE_WIDTH_MULTIPLIER = 2.5;\n\nconst HODO_BG_DIMS = {\n    BB_WIDTH: 256,\n    BB_HEIGHT: 256,\n    BB_TEX_WIDTH: 256,\n    BB_TEX_HEIGHT: 256,\n    BB_MAG_MAX: 1000,\n    BB_MAG_WRAP: 1000,\n    BB_MAG_BIN_SIZE: 1000,\n}\n\nfunction _createHodoBackgroundTexture(line_width: number, arrow_head: boolean) {\n    let canvas = document.createElement('canvas');\n\n    canvas.width = HODO_BG_DIMS.BB_TEX_WIDTH;\n    canvas.height = HODO_BG_DIMS.BB_TEX_HEIGHT;\n\n    let ctx = canvas.getContext('2d');\n\n    if (ctx === null) {\n        throw \"Could not get rendering context for the hodograph background canvas\";\n    }\n\n    ctx.lineWidth = line_width;\n\n    for (let irng = HODO_BG_DIMS.BB_TEX_WIDTH / 4; irng <= HODO_BG_DIMS.BB_TEX_WIDTH / 2; irng += HODO_BG_DIMS.BB_TEX_WIDTH / 4) {\n        ctx.beginPath();\n        ctx.arc(HODO_BG_DIMS.BB_TEX_WIDTH / 2, HODO_BG_DIMS.BB_TEX_WIDTH / 2, irng - line_width / 2, 0, 2 * Math.PI);\n        ctx.stroke();\n    }\n\n    if (arrow_head) {\n        const ctr_x = HODO_BG_DIMS.BB_TEX_WIDTH / 2, ctr_y = HODO_BG_DIMS.BB_TEX_WIDTH / 2;\n        const arrow_size = 20\n        ctx.beginPath()\n        ctx.moveTo(ctr_x, ctr_y);\n        ctx.lineTo(ctr_x + arrow_size / 2, ctr_y + arrow_size);\n        ctx.lineTo(ctr_x - arrow_size / 2, ctr_y + arrow_size);\n        ctx.lineTo(ctr_x, ctr_y);\n        ctx.fill();\n    }\n    else {\n        ctx.beginPath();\n        ctx.arc(HODO_BG_DIMS.BB_TEX_WIDTH / 2, HODO_BG_DIMS.BB_TEX_WIDTH / 2, line_width, 0, 2 * Math.PI);\n        ctx.fill();\n    }\n\n    return canvas;\n};\n\nconst HODO_CMAP = new ColorMap([0, 1, 3, 6, 9], ['#ffffcc', '#a1dab4', '#41b6c4', '#225ea8']);\n\n/** Options for {@link Hodographs} components */\ninterface HodographOptions {\n    /** \n     * The color of the hodograph plot background as a hex string\n     * @default '#000000'\n     */\n    bgcolor?: string;\n\n    /** \n     * How much to thin the hodographs at zoom level 1 on the map. This effectively means to plot every `n`th hodograph in the i and j directions, where `n` = \n     * `thin_fac`. `thin_fac` should be a power of 2. \n     * @default 1\n     */\n    thin_fac?: number;\n\n    /**\n     * The width of the hodograph line in pixels\n     * @default 2.5\n     */\n    hodo_line_width?: number;\n\n    /**\n     * The width of the lines on the background in pixels\n     * @default 1.5\n     */\n    background_line_width?: number;\n\n    /**\n     * The colormap to use for the heights on the hodograph. Default is a yellow-blue colormap.\n     */\n    height_cmap?: ColorMap;\n\n    /**\n     * The wind speed (in kts) of the largest ring on the hodograph background\n     * @default 80\n     */\n    max_wind_speed_ring?: number;\n}\n\nconst hodograph_opt_defaults: Required<HodographOptions> = {\n    bgcolor: '#000000',\n    thin_fac: 1,\n    hodo_line_width: 2.5,\n    background_line_width: 1.5,\n    height_cmap: HODO_CMAP,\n    max_wind_speed_ring: 80\n}\n\ninterface HodographGLElems<ArrayType extends TypedArray, GridType extends Grid, MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n    bg_billboard: BillboardCollection<ArrayType, GridType>;\n}\n\n/** A class representing a field of hodograph plots */\nclass Hodographs<GridType extends Grid, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private profile_field: RawProfileField<GridType>;\n    public readonly opts: Required<HodographOptions>;\n\n    private gl_elems: HodographGLElems<Float16Array, GridType, MapType> | null;\n    private line_elems: {hodo_line: PolylineCollection, sm_line: PolylineCollection} | null;\n    private hodo_bg_texture: HTMLCanvasElement;\n    private readonly hodo_scale;\n    private readonly bg_size;\n\n    /**\n     * Create a field of hodographs\n     * @param profile_field - The grid of profiles to plot\n     * @param opts          - Various options to use when creating the hodographs \n     */\n    constructor(profile_field: RawProfileField<GridType>, opts?: HodographOptions) {\n        super();\n        \n        this.profile_field = profile_field;\n        this.opts = normalizeOptions(opts, hodograph_opt_defaults);\n\n        this.hodo_bg_texture = _createHodoBackgroundTexture(this.opts.background_line_width * LINE_WIDTH_MULTIPLIER, isStormRelativeWindProfile(profile_field.profiles[0]));\n        this.hodo_scale = (HODO_BG_DIMS.BB_TEX_WIDTH - this.opts.background_line_width / 2) / (HODO_BG_DIMS.BB_TEX_WIDTH * this.opts.max_wind_speed_ring);\n        this.bg_size = 140;\n\n        this.gl_elems = null;\n        this.line_elems = null;\n    }\n\n    /**\n     * Update the profiles displayed\n     * @param field - The new profiles to display as hodographs\n     */\n    public async updateField(field: RawProfileField<GridType>) {\n        this.profile_field = field;\n\n        if (this.gl_elems === null) return;\n        // XXX: This might leak VRAM\n        const gl = this.gl_elems.gl;\n\n        this.gl_elems.bg_billboard.updateField(field.getStormMotionGrid());\n\n        const profiles = this.profile_field.profiles;\n        const {lats, lons} = this.profile_field.getProfileCoords();\n        const min_visible_zoom = this.profile_field.grid.getMinVisibleZoom(this.opts.thin_fac);\n        \n        const hodo_polyline = profiles.map((prof, iprof) => {\n            return {\n                'offsets': [...prof['u']].map((u, ipt) => {\n                    if (isStormRelativeWindProfile(prof)) {\n                        return [u - prof['smu'], prof['v'][ipt] - prof['smv']]\n                    }\n                    return [u, prof['v'][ipt]];\n                }),\n                'vertices': [...prof['u']].map(u => [lons[iprof], lats[iprof]]),\n                'zoom': min_visible_zoom[iprof],\n                'data': [...prof['z']],\n            } as LineData;\n        });\n\n        const hodo_line = await PolylineCollection.make(gl, hodo_polyline, {line_width: this.opts.hodo_line_width, cmap: this.opts.height_cmap, \n                                                                            offset_scale: this.hodo_scale * this.bg_size, offset_rotates_with_map: false});\n\n        const sm_polyline = profiles.map((prof, iprof) => {\n            if (!isStormRelativeWindProfile(prof)) {\n                return {vertices: []} as LineData;\n            }\n\n            const sm_mag = Math.hypot(prof['smu'], prof['smv']);\n            const sm_ang = Math.PI / 2 - Math.atan2(-prof['smv'], -prof['smu']);\n            const buffer = 2\n\n            return {\n                'offsets': [[buffer * Math.sin(sm_ang), buffer * Math.cos(sm_ang)], \n                              [sm_mag * Math.sin(sm_ang), sm_mag * Math.cos(sm_ang)]],\n                'vertices': [[lons[iprof], lats[iprof]], [lons[iprof], lats[iprof]]],\n                'zoom': min_visible_zoom[iprof]\n            } as LineData;\n        });\n\n        const sm_line = await PolylineCollection.make(gl, sm_polyline, {line_width: this.opts.background_line_width, color: this.opts.bgcolor, \n                                                                        offset_scale: this.hodo_scale * this.bg_size, offset_rotates_with_map: false});\n\n        this.line_elems = {\n            hodo_line: hodo_line, sm_line: sm_line\n        }\n    }\n\n    /**\n     * @internal\n     * Add the hodographs to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        const bg_image = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'image': this.hodo_bg_texture, 'mag_filter': gl.NEAREST};\n        const max_zoom = map.getMaxZoom();\n\n        const bg_billboard = new BillboardCollection(this.profile_field.getStormMotionGrid(), this.opts.thin_fac, max_zoom, bg_image, HODO_BG_DIMS, this.bg_size * 0.004,\n                                                     {color: Color.fromHex(this.opts.bgcolor), rotate_with_map: false});\n        await bg_billboard.setup(gl);\n\n        this.gl_elems = {\n            gl: gl, map: map, bg_billboard: bg_billboard\n        };\n\n        this.updateField(this.profile_field);\n    }\n\n    /**\n     * @internal\n     * Render the hodographs\n     */\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg) {\n        if (this.gl_elems === null || this.line_elems === null) return;\n        const gl_elems = this.gl_elems;\n        const line_elems = this.line_elems;\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        line_elems.hodo_line.render(gl, arg, [map_width, map_height], zoom, bearing, pitch);\n        line_elems.sm_line.render(gl, arg, [map_width, map_height], zoom, bearing, bearing);\n        gl_elems.bg_billboard.render(gl, arg, [map_width, map_height], zoom, bearing, pitch);\n    }\n}\n\nexport default Hodographs;\nexport type {HodographOptions};","\nimport { RenderMethodArg, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { MapLikeType } from \"./Map\";\nimport { PlotComponent } from \"./PlotComponent\";\nimport { normalizeOptions } from \"./utils\";\nimport { Grid } from \"./Grid\";\nimport { RawObsField } from \"./RawField\";\nimport { HorizontalAlign, TextCollection, TextCollectionOptions, TextSpec, VerticalAlign } from \"./TextCollection\";\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { Color } from \"./Color\";\nimport Barbs from \"./Barbs\";\n\n/**\n * Positions around the station plot at which to draw the various elements\n * \n *  | Value   | Position     |\n *  | --------|--------------|\n *  | `'cl'`  | center-left  |\n *  | `'ll'`  | lower-left   |\n *  | `'lc'`  | lower-center |\n *  | `'lr'`  | lower-right  |\n *  | `'cr'`  | center-right |\n *  | `'ur'`  | upper-right  |\n *  | `'uc'`  | upper-center |\n *  | `'ul'`  | upper-left   |\n *  | `'c'`   | center       |\n */\ntype SPPosition = 'cl' | 'll' | 'lc' | 'lr' | 'cr' | 'ur' | 'uc' | 'ul' | 'c';\n\n/** Configuration for numerical values on station plots */\ninterface SPNumberConfig {\n    type: 'number';\n\n    /**\n     * The position on the station plot at which to place the number\n     */\n    pos: SPPosition;\n\n    /**\n     * The color to use to draw the number\n     * @default '#000000'\n     */\n    color?: string;\n\n    /**\n     * Whether to draw a halo (outline) around the number\n     * @default true;\n     */\n    halo?: boolean;\n\n    /**\n     * The color to use for the halo (outline)\n     * @default '#ffffff'\n     */\n    halo_color?: string;\n\n    /**\n     * A function that properly formats the number for display\n     * @example (val) => val === null ? '' : val.toFixed(0)\n     * @param val - The number to format\n     * @returns A string containing the formatted nubmer\n     */\n    formatter?: (val: number | null) => string;\n}\n\n/** Configuration for strings on station plots */\ninterface SPStringConfig {\n    type: 'string';\n\n    /**\n     * The position on the station plot at which to place the string\n     */\n    pos: SPPosition;\n\n    /**\n     * The color to use to draw the string\n     * @default '#000000'\n     */\n    color?: string;\n\n    /**\n     * Whether to draw a halo (outline) around the string\n     * @default true;\n     */\n    halo?: boolean;\n\n    /**\n     * The color to use for the halo (outline)\n     * @default '#ffffff'\n     */\n    halo_color?: string;\n}\n\n/** Configuration for wind barbs on station plots */\ninterface SPBarbConfig {\n    type: 'barb';\n\n    /**\n     * The color to use to draw the barb\n     * @default '#000000'\n     */\n    color?: string;\n\n    /**\n     * A multiplier for the barb size\n     * @default 1\n     */\n    barb_size_multipler?: number;\n}\n\n/**\n * Accepted symbol codes for sky cover and present weather symbols\n */\ntype SPSymbol = ('0/8' | '1/8' | '2/8' | '3/8' | '4/8' | '5/8' | '6/8' | '7/8' | '8/8' | \n               'clr' | 'few' | 'sct' | 'bkn' | 'ovc' | 'obsc' |\n               'va' | 'fu' | 'hz' | 'du' | 'bldu' | 'sa' | 'blsa' | 'vcblsa' | 'vcbldu' | 'blpy' | 'po' | 'vcpo' | 'vcds' | 'vcss' | \n               'br' | 'bcbr' | 'bc' | 'mifg' | 'vcts' | 'virga' | 'vcsh' | 'ts' | 'thdr' | 'vctshz' | 'tsfzfg' | 'tsbr' | 'tsdz' | 'vctsup' | '-tsup' | 'tsup' | '+tsup' | \n               'sq' | 'fc' | '+fc' | 'ds' | 'ss' | 'drsa' | 'drdu' | '+ds' | '+ss' | 'drsn' | '+drsn' | '-blsn' | 'blsn' | '+blsn' | 'vcblsn' | \n               'vcfg' | 'bcfg' | 'prfg' | 'fg' | 'fzfg' | \n               '-vctsdz' | '-dz' | '-dzbr' | 'vctsdz' | 'dz' | '+vctsdz' | '+dz' | '-fzdz' | '-fzdzsn' | 'fzdz' | '+fzdz' | 'fzdzsn' | '-dzra' | 'dzra' | '+dzra' | \n               '-ra' | '-rabr' | 'ra' | 'rabr' | 'rafg' | 'vcra' | '+ra' | \n               '-fzra' | '-fzrasn' | '-fzrabr' | '-fzrapl' | '-fzrasnpl' | 'tsfzrapl' | '-tsfzra' | 'fzra' | '+fzra' | 'fzrasn' | 'tsfzra' | \n               '-dzsn' | '-rasn' | '-snra' | '-sndz' | 'rasn' | '+rasn' | 'snra' | 'dzsn' | 'sndz' | '+dzsn' | '+sndz' | '-sn' | '-snbr' | 'sn' | '+sn' |  '-snsg' | 'sg' | '-sg' | 'ic' | \n               '-fzdzpl' | '-fzdzplsn' | 'fzdzpl' | '-fzraplsn' | 'fzrapl' | '+fzrapl' | '-rapl' | '-rasnpl' | '-raplsn' | '+rapl' | 'rapl' | '-snpl' | 'snpl' | \n               '-pl' | 'pl' | '-plsn' | '-plra' | 'plra' | '-pldz' | '+pl' | 'plsn' | 'plup' | '+plsn' | \n               '-sh' | '-shra' | 'sh' | 'shra' | '+sh' | '+shra' | '-shrasn' | '-shsnra' | '+shrabr' | 'shrasn' | '+shrasn' | 'shsnra' | '+shsnra' | '-shsn' | 'shsn' | '+shsn' | \n               '-gs' | '-shgs' | 'fzraplgs' | '-sngs' | 'gsplsn' | 'gspl' | 'plgssn' | 'gs' | 'shgs' | '+gs' | '+shgs' | '-gr' | '-shgr' | '-sngr' | 'gr' | 'shgr' | '+gr' | '+shgr' | \n               '-tsrasn' | 'tsrasn' | '-tssnra' | 'tssnra' | '-vctsra' | '-tsra' | 'tsra' | \n               '-tsdz' | 'vctsra' | 'tspl' | '-tssn' | '-tspl' | 'tssn' | '-vctssn' | 'vctssn' | 'tsplsn' | 'tssnpl' | \n               '-tssnpl' | '-tsragr' | 'tsrags' | 'tsragr' | 'tsgs' | 'tsgr' | \n               '+tsfzrapl' | '+vctsra' | '+tsra' | '+tsfzra' | '+tssn' | '+tspl' | '+tsplsn' | '+vctssn' | 'tssa' | 'tsds' | 'tsdu' | '+tsgs' | '+tsgr' | '+tsrags' | '+tsragr' | \n               'in' | '-up' | 'up' | '+up' | '-fzup' | 'fzup' | '+fzup');\n\nconst SYMBOLS: Record<SPSymbol, number> = {\n    // Sky cover symbols\n    '0/8': 59658, '1/8': 59659, '2/8': 59660, '3/8': 59661, '4/8': 59662, '5/8': 59663, '6/8': 59664, '7/8': 59665, '8/8': 59666,\n    'clr': 59658, 'few': 59660, 'sct': 59662, 'bkn': 59664, 'ovc': 59666, 'obsc': 59667,\n\n    // Present weather symbols\n    'va': 59810, 'fu': 59810, 'hz': 59811, 'du': 59812, 'bldu': 59814, 'sa': 59814, 'blsa': 59814, 'vcblsa': 59814, 'vcbldu': 59814, 'blpy': 59814,\n    'po': 59816, 'vcpo': 59816, 'vcds': 59817, 'vcss': 59817,\n    'br': 59818, 'bcbr': 59818, 'bc': 59819, 'mifg': 59820,\n    'vcts': 59821, 'virga': 59822, 'vcsh': 59824, 'ts': 59825, 'thdr': 59825, 'vctshz': 59825,\n    'tsfzfg': 59825, 'tsbr': 59825, 'tsdz': 59825, 'vctsup': 59825,\n    '-tsup': 59825, 'tsup': 59825, '+tsup': 59825,\n    'sq': 59826, 'fc': 59827, '+fc': 59827,\n    'ds': 59839,'ss': 59839, 'drsa': 59839, 'drdu': 59839, '+ds': 59842, '+ss': 59842,\n    'drsn': 59844, '+drsn': 59845, '-blsn': 59846, 'blsn': 59846, '+blsn': 59847, 'vcblsn': 59846,\n    'vcfg': 59848, 'bcfg': 59849, 'prfg': 59852, 'fg': 59853, 'fzfg': 59857,\n    '-vctsdz': 59859, '-dz': 59859, '-dzbr': 59859, 'vctsdz': 59861, 'dz': 59861, '+vctsdz': 59863, '+dz': 59863,\n    '-fzdz': 59864, '-fzdzsn': 59864, 'fzdz': 59865, '+fzdz': 59865, 'fzdzsn': 59865,\n    '-dzra': 59866, 'dzra': 59867, '+dzra': 59867, '-ra': 59869, '-rabr': 59869, 'ra': 59871, 'rabr': 59871, 'rafg': 59871, 'vcra': 59871, '+ra': 59873,\n    '-fzra': 59874, '-fzrasn': 59874, '-fzrabr': 59874, '-fzrapl': 59874, '-fzrasnpl': 59874, 'tsfzrapl': 59875, '-tsfzra': 59875,\n    'fzra': 59875, '+fzra': 59875, 'fzrasn': 59875, 'tsfzra': 59875,\n    '-dzsn': 59876, '-rasn': 59876, '-snra': 59876, '-sndz': 59876, 'rasn': 59877, '+rasn': 59877, 'snra': 59877, 'dzsn': 59877, 'sndz': 59877, '+dzsn': 59877, '+sndz': 59877,\n    '-sn': 59879, '-snbr': 59879, 'sn': 59881, '+sn': 59883, '-snsg': 59885, 'sg': 59885, '-sg': 59885, 'ic': 59886,\n    '-fzdzpl': 59887, '-fzdzplsn': 59887, 'fzdzpl': 59887, '-fzraplsn': 59887, 'fzrapl': 59887, '+fzrapl': 59887,\n    '-rapl': 59887, '-rasnpl': 59887, '-raplsn': 59887, '+rapl': 59887, 'rapl': 59887, '-snpl': 59887, 'snpl': 59887,\n    '-pl': 59887, 'pl': 59887, '-plsn': 59887, '-plra': 59887, 'plra': 59887, '-pldz': 59887, '+pl': 59887, 'plsn': 59887, 'plup': 59887, '+plsn': 59887,\n    '-sh': 59888, '-shra': 59888, 'sh': 59889, 'shra': 59889, '+sh': 59889, '+shra': 59889, '-shrasn': 59891, '-shsnra': 59891, '+shrabr': 59892,\n    'shrasn': 59892, '+shrasn': 59892, 'shsnra': 59892, '+shsnra': 59892, '-shsn': 59893, 'shsn': 59894, '+shsn': 59894,\n    '-gs': 59895, '-shgs': 59895, 'fzraplgs': 59896, '-sngs': 59896, 'gsplsn': 59896, 'gspl': 59896, 'plgssn': 59896, 'gs': 59896, 'shgs': 59896, '+gs': 59896, '+shgs': 59896,\n    '-gr': 59897, '-shgr': 59897, '-sngr': 59898, 'gr': 59898, 'shgr': 59898, '+gr': 59898, '+shgr': 59898,\n    '-tsrasn': 59907, 'tsrasn': 59907, '-tssnra': 59907, 'tssnra': 59907, '-vctsra': 59908, '-tsra': 59908, 'tsra': 59908, '-tsdz': 59908, 'vctsra': 59908,\n    'tspl': 59909, '-tssn': 59909, '-tspl': 59909, 'tssn': 59909, '-vctssn': 59909, 'vctssn': 59909, 'tsplsn': 59909, 'tssnpl': 59909, '-tssnpl': 59909, '-tsragr': 59910,\n    'tsrags': 59910, 'tsragr': 59910, 'tsgs': 59910, 'tsgr': 59910,\n    '+tsfzrapl': 59911, '+vctsra': 59912, '+tsra': 59912, '+tsfzra': 59912, '+tssn': 59913, '+tspl': 59913, '+tsplsn': 59913, '+vctssn': 59913,\n    'tssa': 59914, 'tsds': 59914, 'tsdu': 59914, '+tsgs': 59915, '+tsgr': 59915, '+tsrags': 59915, '+tsragr': 59915, 'in': 59750,\n    '-up': 59750, 'up': 59750, '+up': 59751, '-fzup': 59756, 'fzup': 59756, '+fzup': 59757,\n}\n\n/** Configuration for symbols on station plots */\ninterface SPSymbolConfig {\n    type: 'symbol';\n\n    /**\n     * The position on the station plot at which to place the symbol\n     */\n    pos: SPPosition;\n\n    /**\n     * The color to use to draw the symbol\n     * @default '#000000'\n     */\n    color?: string;\n\n        /**\n     * Whether to draw a halo (outline) around the string\n     * @default true;\n     */\n    halo?: boolean;\n\n    /**\n     * The color to use for the halo (outline)\n     * @default '#ffffff'\n     */\n    halo_color?: string;\n}\n\n/** Configuration for station plot sub-elements */\ntype SPConfig = SPNumberConfig | SPStringConfig | SPBarbConfig | SPSymbolConfig;\n\n/**\n * Configuration for station data plots\n * @example\n * spconfig : SPDataConfig<'id' | 'tmpf' | 'wind' | 'skyc'> = {\n *      // Add a string to the station plot (like the station ID)\n *      id:   {type: 'string', pos: 'lr'},\n * \n *      // Add a number to the station plot (like the temperature)\n *      tmpf: {type: 'number', pos: 'ul', color: '#cc0000', formatter: val => val === null ? '' : val.toFixed(0)},\n * \n *      // Add a barb to the station plot\n *      wind: {type: 'barb', pos: 'c'},\n * \n *      // Add a symbol to the station plot\n *      skyc: {type: 'symbol', pos: 'c'},\n * }\n */\ntype SPDataConfig<ObsFieldName extends string> = Record<ObsFieldName, SPConfig>;\n\n/** Options for {@link StationPlot} components */\ninterface StationPlotOptions<ObsFieldName extends string> {\n    config: SPDataConfig<ObsFieldName>, \n    /**\n     * Thin factor at zoom level 1 for the station plots. Should be a power of 2.\n     * @default 1\n     */\n    thin_fac?: number;\n\n    /**\n     * Font face to use for plotting text\n     * @default 'Trebuchet MS'\n     */\n    font_face?: string;\n    \n    /**\n     * Size of the font to use for the text\n     * @default 12\n     */\n    font_size?: number;\n\n    /**\n     * URL template to use in retrieving the font data for the text. The default is to use the template from the map style.\n     */\n    font_url_template?: string;\n}\n\nconst station_plot_opts_defaults: Required<StationPlotOptions<never>> = {\n    config: {},\n    thin_fac: 1,\n    font_face: 'Trebuchet MS',\n    font_size: 12,\n    font_url_template: '',\n};\n\ninterface StationPlotGLElems<GridType extends Grid, MapType extends MapLikeType> {\n    map: MapType;\n    gl: WebGLAnyRenderingContext;\n    barb_components: Barbs<Float16Array, GridType, MapType>[];\n}\n\nfunction positionToAlignmentAndOffset(pos: SPPosition, off_size?: number) {\n    off_size = off_size === undefined ? 10 : off_size;\n\n    let ha: HorizontalAlign, va: VerticalAlign;\n    let xoff: number, yoff: number;\n\n    if(pos == 'll' || pos == 'cl' || pos == 'ul')      { ha = 'right'; xoff = -off_size; }\n    else if (pos == 'lc' || pos == 'c' || pos == 'uc') { ha = 'center'; xoff = 0; }\n    else                                               { ha = 'left'; xoff = off_size;}\n\n    if (pos == 'll' || pos == 'lc' || pos == 'lr')     { va = 'top'; yoff = -off_size; }\n    else if (pos == 'cl' || pos == 'c' || pos == 'cr') { va = 'middle'; yoff = 0; }\n    else                                               { va = 'baseline'; yoff = off_size; }\n\n    return {horizontal_align: ha, vertical_align: va, offset_x: xoff, offset_y: yoff};\n}\n\n/** \n * Station model plots for observed data\n * @example\n * // Specify how to set up the station plot\n * const station_plot_locs = {\n *     tmpf: {type: 'number', pos: 'ul', color: '#cc0000', formatter: val => val === null ? '' : val.toFixed(0)},\n *     dwpf: {type: 'number', pos: 'll', color: '#00aa00', formatter: val => val === null ? '' : val.toFixed(0)}, \n *     wind: {type: 'barb', pos: 'c'},\n *     preswx: {type: 'symbol', pos: 'cl', color: '#ff00ff'},\n *     skyc: {type: 'symbol', pos: 'c'},\n * };\n * \n * // Create the station plot\n * const station_plot = new StationPlot(obs_field, {config: station_plot_locs, thin_fac: 8, font_size: 14});\n */\nclass StationPlot<GridType extends Grid, MapType extends MapLikeType, ObsFieldName extends string> extends PlotComponent<MapType> {\n    private field: RawObsField<GridType, ObsFieldName>;\n    public readonly opts: Required<StationPlotOptions<ObsFieldName>>;\n    private gl_elems: StationPlotGLElems<GridType, MapType> | null;\n    private text_components: TextCollection[] | null;\n\n    /**\n     * Create station plots\n     * @param field - A field containing the observed data\n     * @param opts  - Various options for the station plots\n     */\n    constructor(field: RawObsField<GridType, ObsFieldName>, opts: StationPlotOptions<ObsFieldName>) {\n        super();\n\n        this.field = field;\n        this.opts = normalizeOptions(opts, station_plot_opts_defaults as Required<StationPlotOptions<ObsFieldName>>); // Is there a way to do this without invoking `as`?\n        this.gl_elems = null;\n        this.text_components = null;\n    }\n\n    /**\n     * Update the data displayed as station plots\n     * @param field - The new field to display as station plots\n     */\n    public async updateField(field: RawObsField<GridType, ObsFieldName>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n\n        const map = this.gl_elems.map;\n        const gl = this.gl_elems.gl;\n        const barb_components = this.gl_elems.barb_components;\n\n        const map_style = map.getStyle();\n\n        const font_url_template = this.opts.font_url_template == '' ? map_style.glyphs : this.opts.font_url_template;\n        if (font_url_template === undefined)\n            throw \"The map style doesn't have any glyph information. Please pass the font_url_template option to StationPlot\";\n\n        const font_url = font_url_template.replace('{fontstack}', this.opts.font_face);\n\n        let ibarb = 0;\n\n        const sub_component_promises = Object.entries<SPConfig>(this.opts.config).map(async ([k_, config]) => {\n            const k = k_ as ObsFieldName;\n\n            if (config.type == 'number' || config.type == 'string') {\n                const pos = config.pos;\n                const color = config.color === undefined ? Color.fromHex('#000000') : Color.normalizeColor(config.color);\n                const halo_color = config.halo_color === undefined ? Color.fromHex('#ffffff') : Color.normalizeColor(config.halo_color);\n                const halo = config.halo === undefined ? true : config.halo;\n\n                const coords = this.field.grid.getEarthCoords();\n                const zoom = this.field.grid.getMinVisibleZoom(this.opts.thin_fac);\n\n                let text_specs: TextSpec[];\n                if (config.type == 'number') {\n                    const comp = this.field.getScalar(k);\n                    const formatter = config.formatter === undefined ? (val: number | null) => val === null ? 'null' : val.toString() : config.formatter;\n    \n                    text_specs = comp.map((v, i) => ({text: formatter(v), lat: coords.lats[i], lon: coords.lons[i], min_zoom: zoom[i]}));\n                }\n                else {\n                    const comp = this.field.getStrings(k);\n                    text_specs = comp.map((v, i) => ({text: v === null ? '' : v, lat: coords.lats[i], lon: coords.lons[i], min_zoom: zoom[i]}));\n                }\n\n                const tc_opts: TextCollectionOptions = {\n                    ...positionToAlignmentAndOffset(pos),\n                    font_size: this.opts.font_size, halo: halo, \n                    text_color: color, halo_color: halo_color,\n                };\n\n                return await TextCollection.make(gl, text_specs, font_url, tc_opts);\n            }\n            else if (config.type == 'barb') {\n                const comp = this.field.getVector(k);\n                const barb_comp = barb_components[ibarb++];\n                barb_comp.updateField(comp);\n            }\n            else if (config.type == 'symbol') {\n                const pos = config.pos;\n                const color = config.color === undefined ? Color.fromHex('#000000') : Color.normalizeColor(config.color);\n                const halo_color = config.halo_color === undefined ? Color.fromHex('#ffffff') : Color.normalizeColor(config.halo_color);\n                const halo = config.halo === undefined ? true : config.halo;\n\n                const comp = this.field.getStrings(k) as (SPSymbol | null)[];\n                const coords = this.field.grid.getEarthCoords();\n                const zoom = this.field.grid.getMinVisibleZoom(this.opts.thin_fac);\n\n                const wxsym_font_url = font_url_template.replace('{fontstack}', 'wx_symbols');\n                const text_specs: TextSpec[] = comp.map((v, i) => ({text: v === null ? '' : String.fromCharCode(SYMBOLS[v]), \n                                                                    lat: coords.lats[i], lon: coords.lons[i], min_zoom: zoom[i]}));\n                \n                const tc_opts: TextCollectionOptions = {\n                    ...positionToAlignmentAndOffset(pos),\n                    font_size: this.opts.font_size, halo: halo, \n                    text_color: color, halo_color: halo_color,\n                };\n\n                if (tc_opts.offset_x !== undefined) tc_opts.offset_x -= 3;\n\n                return await TextCollection.make(gl, text_specs, wxsym_font_url, tc_opts);\n            }\n            else {\n                throw `Unknown station plot configuration type ${(config as any).type}`;\n            }\n        });\n\n        this.text_components = (await Promise.all(sub_component_promises)).filter((c: TextCollection | undefined) : c is TextCollection => c !== undefined);\n        map.triggerRepaint();\n    }\n\n    /** @internal */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        const barb_promises = Object.entries<SPConfig>(this.opts.config).map(async ([k_, config]) => {\n            const k = k_ as ObsFieldName;\n            if (config.type == 'barb') {\n                const comp = this.field.getVector(k);\n\n                const color = config.color === undefined ? '#000000' : config.color;\n                const barb_size = config.barb_size_multipler === undefined ? 1 : config.barb_size_multipler;\n                const barb_comp = new Barbs<Float16Array, GridType, MapType>(comp, {thin_fac: this.opts.thin_fac, color: color, barb_size_multiplier: barb_size});\n                await barb_comp.onAdd(map, gl);\n                return barb_comp;\n            }\n        });\n\n        type BarbComponent = Barbs<Float16Array, GridType, MapType>;\n        const barb_components = (await Promise.all(barb_promises)).filter((c: BarbComponent | undefined) : c is BarbComponent => c !== undefined);\n\n        this.gl_elems = {\n            map: map, gl: gl, barb_components: barb_components\n        }\n\n        this.updateField(this.field);\n    }\n\n    /** @internal */\n    public render(gl: WebGLAnyRenderingContext, arg: RenderMethodArg) {\n        if (this.gl_elems === null || this.text_components === null) return;\n\n        const gl_elems = this.gl_elems;\n\n        const text_components = this.text_components;\n        const barb_components = this.gl_elems.barb_components;\n\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const map_zoom = gl_elems.map.getZoom();\n\n        let itext = 0, ibarb = 0;\n        Object.values<SPConfig>(this.opts.config).forEach(comp => {\n            if (comp.type == 'barb') {\n                barb_components[ibarb++].render(gl, arg);\n            }\n            else {\n                text_components[itext++].render(gl, arg, [map_width, map_height], map_zoom);\n            }\n        });\n    }\n}\n\nexport default StationPlot;\nexport type {StationPlotOptions, SPPosition, SPNumberConfig, SPStringConfig, SPBarbConfig, SPSymbolConfig, SPConfig, SPDataConfig, SPSymbol};","\nimport { RenderMethodArg, WebGLAnyRenderingContext } from './AutumnTypes';\nimport { MapLikeType } from './Map';\n\nimport { PlotComponent } from './PlotComponent';\n\nabstract class PlotLayerBase<MapType extends MapLikeType> {\n    public readonly type: 'custom';\n    public readonly id: string;\n    protected map: MapType | null;\n\n    constructor(id: string) {\n        this.type = 'custom';\n        this.id = id;\n        this.map = null;\n    }\n\n    public abstract onAdd(map: MapType, gl: WebGLAnyRenderingContext) : void;\n    public abstract render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) : void;\n\n    protected repaint() {\n        if (this.map !== null) {\n            this.map.triggerRepaint();\n        }\n    }\n}\n\n/** \n * A static map layer. The data are assumed to be static in time. If the data have a time component (e.g., a model forecast), a {@link MultiPlotLayer} \n * may be more appropriate.\n * @example\n * // Create map layers from provided fields\n * const height_layer = new PlotLayer('height-contours', height_contours);\n * const wind_speed_layer = new PlotLayer('wind-speed-fill', wind_speed_fill);\n * const barb_layer = new PlotLayer('barbs', wind_barbs);\n */\nclass PlotLayer<MapType extends MapLikeType> extends PlotLayerBase<MapType> {\n    private readonly field: PlotComponent<MapType>;\n\n    /**\n     * Create a map layer from a field\n     * @param id    - A unique id for this layer\n     * @param field - The field to plot in this layer\n     */\n    constructor(id: string, field: PlotComponent<MapType>) {\n        super(id);\n        this.field = field;\n    }\n\n    /**\n     * @internal\n     * Add this layer to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.map = map;\n        await this.field.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render this layer\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: RenderMethodArg) {\n        this.field.render(gl, matrix);\n    }\n}\n\n/**\n * A varying map layer. If the data don't have a varying component, such as over time, it might be easier to use a {@link PlotLayer} instead.\n * @example\n * // Create a varying map layer\n * height_layer = new MultiPlotLayer('height-contours');\n * \n * // Add some fields to it\n * height_layer.addField(height_contour_f00, '20230112_1200');\n * height_layer.addField(height_contour_f01, '20230112_1300');\n * height_layer.addField(height_contour_f02, '20230112_1400');\n * \n * // Set the date/time in the map layer\n * height_layer.setActiveKey('20230112_1200');\n */\nclass MultiPlotLayer<MapType extends MapLikeType> extends PlotLayerBase<MapType> {\n    private fields: Record<string, PlotComponent<MapType>>;\n    private field_key: string | null;\n\n    private gl: WebGLAnyRenderingContext | null;\n\n    /**\n     * Create a time-varying map layer\n     * @param id - A unique id for this layer\n     */\n    constructor(id: string) {\n        super(id);\n\n        this.fields = {};\n        this.field_key = null;\n        this.map = null;\n        this.gl = null;\n    }\n\n    /**\n     * @internal\n     * Add this layer to a map\n     */\n    public onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.map = map;\n        this.gl = gl;\n\n        Object.values(this.fields).forEach(field => {\n            field.onAdd(map, gl).then(res => {\n                this.repaint();\n            });\n        });\n\n        this.repaint();\n    }\n\n    /**\n     * @internal\n     * Render this layer\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: RenderMethodArg) {\n        if (this.map !== null && this.gl !== null && this.field_key !== null \n            && this.fields.hasOwnProperty(this.field_key) && this.fields[this.field_key] !== null) {\n            this.fields[this.field_key].render(gl, matrix);\n        }\n    }\n\n    /**\n     * Set the active key\n     * @param key - The new key. The field with that key is plotted immediately.\n     */\n    public setActiveKey(key: string) {\n        const old_field_key = this.field_key;\n        this.field_key = key;\n\n        this.repaint();\n    }\n\n    /**\n     * Get a list of all dates/times that have been added to the layer\n     * @returns An array of dates/times\n     */\n    public getKeys() {\n        return Object.keys(this.fields);\n    }\n\n    /**\n     * Add a field with a given key\n     * @param field - The field to add\n     * @param key   - The key to associate with the field\n     */\n    public addField(field: PlotComponent<MapType>, key: string) {\n        const old_field_key = this.field_key;\n\n        if (this.map !== null && this.gl !== null && field !== null) {\n            field.onAdd(this.map, this.gl).then(res => {\n                this.repaint();\n            });\n        }\n\n        this.fields[key] = field;\n        \n        if (this.field_key === null) {\n            this.field_key = key;\n        }\n    }\n}\n\nexport {PlotLayer, MultiPlotLayer};","\nimport { ColorMap } from \"./Colormap\";\nimport { Color } from \"./Color\";\n\n/** The orientation for color bars (horizontal or vertical) */\ntype ColorbarOrientation = 'horizontal' | 'vertical';\n\n/** Which side of a color bar the ticks are on */\ntype ColorbarTickDirection = 'top' | 'bottom' | 'left' | 'right';\n\n/** Options for {@link ColorBar}s */\ninterface ColorBarOptions {\n    /** The label to place along the color bar */\n    label?: string;\n\n    /** \n     * The size in pixels along the long axis of the colorbar \n     * @default 600\n     */\n    size_long?: number;\n\n    /**\n     * The size in pixels along the short axis of the colorbar\n     * @default size_long / 9\n     */\n    size_short?: number;\n\n    /** \n     * An array of numbers to use as the tick locations. \n     * @default Use all the levels in the color map provided to {@link makeColorBar}.\n     */\n    ticks?: number[];\n\n    /** \n     * The direction the ticks should face. Valid values are 'left' and 'right' if orientation is 'vertical' and 'top' and \n     * 'bottom' if orientation is 'horizontal'.\n     * @default 'left' if orientation is 'vertical' and 'bottom' if orientation is 'horizontal'\n     */\n    tick_direction?: ColorbarTickDirection;\n\n    /** \n     * The orientation for the color bar. Valid values are 'horizontal' and 'vertical'.\n     * @default 'vertical'\n     */\n    orientation?: ColorbarOrientation;\n\n    /** \n     * A font face to use for the label and tick values.\n     * @default 'sans-serif'\n     */\n    fontface?: string;\n\n    /**\n     * The font size (in points) to use for the tick labels\n     * @default 12\n     */\n    ticklabelsize?: number;\n\n    /**\n     * The color for the color bar outline and the text\n     * @default '#000000'\n     */\n    outline_and_text_color?: string;\n};\n\nconst createElement = (tagname: string, attributes?: Record<string, string | number>, parent?: SVGElement) => {\n    const elem = document.createElementNS('http://www.w3.org/2000/svg', tagname);\n\n    if (attributes !== undefined) {\n        Object.entries(attributes).forEach(([k, v]) => {\n            elem.setAttribute(k, v.toString());\n        });\n    }\n\n    if (parent !== undefined) {\n        parent.appendChild(elem);\n    }\n\n    return elem;\n};\n\n/**\n * Make an SVG containing a color bar. The color bar can either be oriented horizontal or vertical, and a label can be provided.\n * @param colormap - The color map to use\n * @param opts     - The options for creating the color bar\n * @returns An SVGElement containing the color bar image.\n * @example\n * // Create the color bar\n * const svg = makeColorBar(color_map, {label: 'Wind Speed (kts)', orientation: 'horizontal', \n *                                      fontface: 'Trebuchet MS'});\n * \n * // Add colorbar to the page\n * document.getElementById('colorbar-container').appendChild(svg);\n */\nfunction makeColorBar(colormap: ColorMap, opts: ColorBarOptions) {\n    const label = opts.label || \"\";\n    const ticks = opts.ticks || colormap.levels;\n    const orientation = opts.orientation || 'vertical';\n    const fontface = opts.fontface || 'sans-serif';\n    const tickfontsize = opts.ticklabelsize || 12;\n    const size_long = opts.size_long || 600;\n    const size_short = opts.size_short || size_long / 9;\n    const outline_and_text_color = opts.outline_and_text_color || '#000000';\n\n    const tick_dir = opts.tick_direction || (orientation == 'vertical' ? 'left' : 'bottom');\n\n    if (orientation == 'vertical' && (tick_dir == 'top' || tick_dir == 'bottom') ||\n        orientation == 'horizontal' && (tick_dir == 'left' || tick_dir == 'right')) {\n        throw `tick_direction of '${tick_dir} doesn't match an orientation of ${orientation}`;\n    }\n\n    const getNChar = (n: number) => {\n        return n.toString().length;\n    }\n\n    const chars_left = getNChar(ticks[0]);\n    const chars_right = getNChar(ticks[ticks.length - 1]);\n    const need_overflow = colormap.underflow_color !== null || colormap.overflow_color !== null;\n\n    const bar_long_size = size_long;\n    const bar_cross_size = size_short;\n    const bar_long_pad = Math.max(orientation == 'horizontal' ? Math.max(chars_left, chars_right) * 6 : 8, \n                                  need_overflow ? bar_cross_size / (2 * Math.sqrt(3)) : 0);\n    const bar_cross_pad = 3;\n    const bar_thickness = 10;\n\n    let height: number, width: number, bar_left: number, bar_top: number, bar_width: number, bar_height: number, bar_right: number, bar_bottom: number,\n        bar_middle: number, bar_low_arrow: number, bar_high_arrow: number;\n\n    if (orientation == 'vertical') {\n        height = bar_long_size;\n        width = bar_cross_size;\n\n        bar_left = tick_dir == 'left' ? bar_cross_size - bar_cross_pad - bar_thickness : bar_cross_pad;\n        bar_top = bar_long_pad;\n        bar_width = bar_thickness;\n        bar_height = bar_long_size - 2 * bar_long_pad;\n\n        bar_right = bar_left + bar_width;\n        bar_middle = bar_left + bar_width / 2;\n        bar_bottom = bar_top + bar_height;\n        bar_low_arrow = colormap.underflow_color === null ? bar_bottom : bar_bottom + bar_cross_size / (Math.sqrt(3) * 2);\n        bar_high_arrow = colormap.overflow_color === null ? bar_top : bar_top - bar_cross_size / (Math.sqrt(3) * 2);\n    }\n    else {\n        width = bar_long_size;\n        height = bar_cross_size - 6;\n\n        bar_left = bar_long_pad;\n        bar_top = tick_dir == 'bottom' ? bar_cross_pad : bar_cross_size - 6 - bar_cross_pad - bar_thickness;\n        bar_height = bar_thickness;\n        bar_width = bar_long_size - 2 * bar_long_pad;\n\n        bar_right = bar_left + bar_width;\n        bar_middle = bar_top + bar_height / 2;\n        bar_bottom = bar_top + bar_height;\n        bar_low_arrow = colormap.underflow_color === null ? bar_left : bar_left - bar_cross_size / (Math.sqrt(3) * 2);\n        bar_high_arrow = colormap.overflow_color === null ? bar_right : bar_right + bar_cross_size / (Math.sqrt(3) * 2);\n    }\n\n    const n_colors = colormap.colors.length;\n\n    const root = createElement('svg', {width: width, height: height});\n    const gbar = createElement('g', {}, root);\n\n    let gtickattrs;\n    if (orientation == 'vertical') {\n        gtickattrs = tick_dir == 'left' ? {'text-anchor': 'end', transform: `translate(${bar_left}, ${bar_top})`} : \n                                          {transform: `translate(${bar_left + bar_width}, ${bar_top})`}\n    }\n    else {\n        gtickattrs = tick_dir == 'bottom' ? {'text-anchor': 'middle', transform: `translate(${bar_left}, ${bar_top + bar_height})`} : \n                                            {'text-anchor': 'middle', transform: `translate(${bar_left}, ${bar_top})`}\n    }\n    const gticks = createElement('g', gtickattrs, root);\n\n    // Make the colored background\n    colormap.colors.forEach((color, icolor) => {\n        let attrs: Record<string, string | number> = {};\n\n        if (orientation == 'vertical') {\n            attrs = {\n                x: bar_left, y: bar_top + bar_height * (1 - (icolor + 1) / n_colors), width: bar_width, height: bar_height / n_colors};\n        }\n        else {\n            attrs = {x: bar_left + bar_width * icolor / n_colors, y: bar_top, width: bar_width / n_colors, height: bar_height};\n        }\n\n        createElement('rect', {...attrs, fill: color.toRGBHex(), opacity: color.a}, gbar);\n    });\n\n    // Make the overflow and underflow triangles\n    if (colormap.underflow_color !== null) {\n        let point_list: string;\n        if (orientation == 'vertical') {\n            point_list = `${bar_right} ${bar_bottom}, ${bar_middle} ${bar_low_arrow}, ${bar_left} ${bar_bottom}, ${bar_right} ${bar_bottom}`;\n        }\n        else {\n            point_list = `${bar_left} ${bar_bottom}, ${bar_low_arrow} ${bar_middle}, ${bar_left} ${bar_top}, ${bar_left} ${bar_bottom}`;\n        }\n\n        const underflow_attrs = {points: point_list, fill: colormap.underflow_color.toRGBHex(), opacity: colormap.underflow_color.a};\n        createElement('polygon', underflow_attrs, gbar);\n    }\n\n    if (colormap.overflow_color !== null) {\n        let point_list: string;\n        if (orientation == 'vertical') {\n            point_list = `${bar_left} ${bar_top}, ${bar_middle} ${bar_high_arrow}, ${bar_right} ${bar_top}, ${bar_left} ${bar_top}`;\n        }\n        else {\n            point_list = `${bar_right} ${bar_top}, ${bar_high_arrow} ${bar_middle}, ${bar_right} ${bar_bottom}, ${bar_right} ${bar_top}`;\n        }\n\n        const overflow_attrs = {points: point_list, fill: colormap.overflow_color.toRGBHex(), opacity: colormap.overflow_color.a};\n        createElement('polygon', overflow_attrs, gbar);\n    }\n\n    // Make the ticks marks and labels\n    const first_level = colormap.levels[0];\n    const last_level = colormap.levels[colormap.levels.length - 1];\n\n    ticks.filter(level => first_level <= level && level <= last_level).forEach(level => {\n        const diffs = colormap.levels.map(l => Math.abs(l - level));\n        let ilevel = diffs.indexOf(diffs.reduce((a, b) => Math.min(a, b)));\n        if (level <= colormap.levels[ilevel] && ilevel > 0)\n            ilevel -= 1;\n        ilevel += (level - colormap.levels[ilevel]) / (colormap.levels[ilevel + 1] - colormap.levels[ilevel]);\n        const tickattrs = orientation == 'vertical' ? {transform: `translate(0, ${bar_height * (1 - ilevel / n_colors)})`} : \n                                                      {transform: `translate(${bar_width * ilevel / n_colors}, 0)`};\n        const gtick = createElement('g', tickattrs, gticks);\n\n        let lineattrs;\n        if (orientation == 'vertical') {\n            lineattrs = tick_dir == 'left' ? {x2: -6} : {x2: 6};\n        }\n        else {\n            lineattrs = tick_dir == 'bottom' ? {y2 : 6} : {y2: -6};\n        }\n\n        createElement('line', {...lineattrs, stroke: outline_and_text_color, 'stroke-width': 1.5}, gtick);\n\n        let textattrs;\n        if (orientation == 'vertical') {\n            textattrs = tick_dir == 'left' ? {x: -9, dy: '0.32em'} : {x: 9, dy: '0.32em'};\n        }\n        else {\n            textattrs = tick_dir == 'bottom' ? {y: 9, dy: '0.8em'} : {y: -9, dy: '0em'};\n        }\n\n        const text = createElement('text', {...textattrs, fill: outline_and_text_color, style: `font-family: ${fontface}; font-size: ${tickfontsize}pt`}, gtick);\n        text.textContent = level.toString();\n    });\n\n    // Draw the outline\n    let point_list: string;\n    if (orientation == 'vertical') {\n        point_list = `${bar_left} ${bar_top}, ${bar_middle} ${bar_high_arrow}, ${bar_right} ${bar_top}, ${bar_right} ${bar_bottom}, ` +\n                     `${bar_middle} ${bar_low_arrow}, ${bar_left} ${bar_bottom}, ${bar_left} ${bar_top}`;\n    }\n    else {\n        point_list = `${bar_left} ${bar_top}, ${bar_right} ${bar_top}, ${bar_high_arrow} ${bar_middle}, ${bar_right} ${bar_bottom}, ` +\n                     `${bar_left} ${bar_bottom}, ${bar_low_arrow} ${bar_middle}, ${bar_left} ${bar_top}`;\n    }\n\n    const outline_attrs = {\n        points: point_list,\n        stroke: outline_and_text_color,\n        'stroke-width': 1.5,\n        fill: 'none'\n    };\n    createElement('polygon', outline_attrs, root);\n\n    // Draw the colorbar label\n    let labelattrs;\n    if (orientation == 'vertical') {\n        labelattrs = tick_dir == 'left' ? {transform: `translate(15, ${height / 2}) rotate(-90)`} : {transform: `translate(${width - 6}, ${height / 2}) rotate(-90)`};\n    }\n    else {\n        labelattrs = tick_dir == 'bottom' ? {transform: `translate(${width / 2}, ${height - 5})`} : {transform: `translate(${width / 2}, 15)`}\n    }\n    const label_elem = createElement('text', {...labelattrs, fill: outline_and_text_color, 'text-anchor': 'middle', style: `font-family: ${fontface};`}, root);\n    label_elem.textContent = label;\n\n    return root;\n}\n\n/** Options for {@link makePaintballKey | makePaintballKey()} */\ninterface PaintballKeyOptions {\n    /**\n     * The number of columns of entries in the key\n     * @default 1\n     */\n    n_cols?: number;\n\n    /** \n     * A font face to use for the label and tick values.\n     * @default 'sans-serif'\n     */\n    fontface?: string;\n}\n\n/**\n * Make an SVG containing a color key for a paintball plot. The key can be split over any number of columns.\n * @param colors - A list of colors \n * @param labels - The labels corresponding to each color\n * @param opts   - The options for creating the color key\n * @returns An SVGElement containing the color bar image.\n * @example\n * // Create the color key\n * const svg = makePaintballKey(colors, labels, {n_cols: 2, fontface: 'Trebuchet MS'});\n * \n * // Add the color key to the page\n * document.getElementById('pb-key-container').appendChild(svg);\n */\nfunction makePaintballKey(colors: (Color | string)[], labels: string[], opts?: PaintballKeyOptions) {\n    if (colors.length != labels.length) {\n        throw `Mismatch between the number of colors (${colors.length}) and the number of labels (${labels.length})`;\n    }\n\n    opts = opts === undefined ? {} : opts;\n    const n_cols = opts.n_cols === undefined ? 1: opts.n_cols;\n    const fontface = opts.fontface === undefined ? 'sans-serif' : opts.fontface;\n\n    let height: number, width: number;\n\n    const swatch_width = 20;\n    const swatch_height = 20;\n    const swatch_text_pad = 3;\n    const swatch_text_space = 100;\n    const swatch_width_pad = 5;\n    const swatch_height_pad = 5;\n\n    const n_rows = Math.ceil(colors.length / n_cols);\n\n    width = (swatch_width + swatch_text_pad + swatch_text_space) * n_cols + swatch_width_pad * (n_cols + 1);\n    height = swatch_height * n_rows + swatch_height_pad * (n_rows + 1);\n\n    const root = createElement('svg', {width: width, height: height});\n    const gbar = createElement('g', {}, root);\n\n    colors.forEach((color, icolor) => {\n        const label = labels[icolor];\n\n        const irow = icolor % n_rows;\n        const icol = Math.floor(icolor / n_rows);\n\n        let opacity = 1.;\n        if (typeof color != 'string') {\n            opacity = color.a;\n            color = color.toRGBHex();\n        }\n\n        const x = swatch_width_pad + icol * (swatch_width + swatch_text_pad + swatch_text_space + swatch_width_pad);\n        const y = swatch_height_pad + irow * (swatch_height + swatch_height_pad);\n\n        createElement('rect', {x: x, y: y, fill: color, opacity: opacity, width: swatch_width, height: swatch_height}, gbar);\n\n        let textattrs = {x: x + swatch_width + swatch_text_pad, y: y + swatch_height / 2, dy: '0.32em'};\n\n        const text = createElement('text', {...textattrs, fill: '#000000', style: `font-size: 0.8em; font-family: ${fontface};`}, gbar);\n        text.textContent = label;\n    })\n\n    return root;\n}\n\nexport {makeColorBar, makePaintballKey};\nexport type {ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport Contour, {ContourOptions, ContourLabels, ContourLabelOptions} from \"./Contour\";\nimport {ContourFill, Raster, ContourFillOptions, RasterOptions} from \"./Fill\";\nimport Barbs, {BarbsOptions} from \"./Barbs\";\nimport Paintball, {PaintballOptions} from \"./Paintball\";\nimport Hodographs, {HodographOptions} from './Hodographs';\nimport StationPlot, {StationPlotOptions, SPPosition, SPNumberConfig, SPStringConfig, SPBarbConfig, SPSymbolConfig, SPConfig, SPDataConfig, SPSymbol} from \"./StationPlot\";\n\nimport { PlotLayer, MultiPlotLayer } from './PlotLayer';\nimport { WindProfile, StormRelativeWindProfile, GroundRelativeWindProfile, WebGLAnyRenderingContext, TypedArray, ContourData } from \"./AutumnTypes\";\nimport { MapLikeType } from \"./Map\";\nimport { ColorMap, ColorMapOptions, bluered, redblue, pw_speed500mb, pw_speed850mb, pw_cape, pw_t2m, pw_td2m, nws_storm_clear_refl } from './Colormap';\nimport { Color } from \"./Color\";\nimport { makeColorBar, makePaintballKey, ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions } from \"./ColorBar\";\nimport { LineStyle } from \"./PolylineCollection\";\nimport { RawScalarField, RawVectorField, RawProfileField, VectorRelativeTo, RawVectorFieldOptions, RawObsField, ObsRawData} from \"./RawField\";\nimport { Grid, GridType, StructuredGrid, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid, UnstructuredGrid } from './Grid'\n\nimport { initMSModule, FieldContourOpts } from './ContourCreator';\n\n/** All built-in colormaps */\nconst colormaps = {\n    bluered: bluered,\n    redblue: redblue,\n    pw_speed500mb: pw_speed500mb,\n    pw_speed850mb: pw_speed850mb,\n    pw_cape: pw_cape,\n    pw_t2m: pw_t2m,\n    pw_td2m: pw_td2m,\n    nws_storm_clear_refl: nws_storm_clear_refl,\n}\n\n/** Options for initializing the autumnplot-gl library */\ninterface InitAutumnPlotOpts {\n    /** Base URL at which to find the WASM module (change with caution!) */\n    wasm_base_url?: string;\n}\n\n/**\n * Initialize the WebAssembly module in autumnplot-gl. It's not strictly necessary to call it first, but if you call it\n * first, you can prevent races when you contour a bunch of fields at once.\n */\nfunction initAutumnPlot(opts?: InitAutumnPlotOpts) {\n    opts = opts === undefined ? {} : opts;\n\n    initMSModule({document_script: opts.wasm_base_url});\n}\n\nexport {PlotComponent,\n        Barbs, BarbsOptions,\n        Contour, ContourOptions, ContourLabels, ContourLabelOptions,\n        ContourFill, Raster, ContourFillOptions, RasterOptions,\n        Paintball, PaintballOptions,\n        Hodographs, HodographOptions, WindProfile, StormRelativeWindProfile, GroundRelativeWindProfile,\n        StationPlot, StationPlotOptions, SPPosition, SPNumberConfig, SPStringConfig, SPBarbConfig, SPSymbolConfig, SPConfig, SPDataConfig, SPSymbol,\n        PlotLayer, MultiPlotLayer, \n        MapLikeType, LineStyle,\n        ColorMap, ColorMapOptions, colormaps, makeColorBar, makePaintballKey, Color, ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions,\n        RawScalarField, RawVectorField, RawProfileField, RawObsField, ObsRawData,\n        Grid, GridType, StructuredGrid, VectorRelativeTo, RawVectorFieldOptions, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid, UnstructuredGrid,\n        WebGLAnyRenderingContext, TypedArray, ContourData,\n        initAutumnPlot, InitAutumnPlotOpts, FieldContourOpts};\n"],"names":["root","factory","exports","module","define","amd","this","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","i","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","log","LN2","t","n","o","obj","left","right","parent","dimension","content","scoreFunction","prototype","push","bubbleUp","length","pop","sinkDown","peek","remove","Error","size","r","l","u","h","kdTree","Array","isArray","sort","slice","toJSON","insert","nearest","f","a","g","p","min","balanceFactor","max","BinaryHeap","Pbf","ieee754","buf","ArrayBuffer","isView","Uint8Array","pos","type","Varint","Fixed64","Bytes","Fixed32","SHIFT_LEFT_32","SHIFT_RIGHT_32","utf8TextDecoder","TextDecoder","readPackedEnd","pbf","readVarint","toNum","low","high","isSigned","makeRoomForExtraLength","startPos","len","extraLen","realloc","writePackedVarint","arr","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","val","readInt32","destroy","readFields","readField","result","end","tag","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readFloat","readDouble","b","readVarintRemainder","readVarint64","readSVarint","num","readBoolean","Boolean","readString","decode","subarray","readUtf8TextDecoder","str","b1","b2","b3","b0","bytesPerSequence","String","fromCharCode","readUtf8","readBytes","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","set","finish","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeString","lead","charCodeAt","writeUtf8","writeBytes","writeRawMessage","fn","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","_scriptName","Module","document","currentScript","src","undefined","moduleArg","moduleRtn","readyPromiseResolve","readyPromiseReject","readyPromise","Promise","resolve","reject","forEach","prop","Object","getOwnPropertyDescriptor","defineProperty","get","abort","readAsync","moduleOverrides","assign","scriptDirectory","startsWith","substr","replace","lastIndexOf","window","importScripts","url","assert","isFileURI","fetch","credentials","then","response","ok","arrayBuffer","status","wasmBinary","wasmMemory","out","console","bind","err","error","legacyModuleProp","WebAssembly","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAPF32","HEAPF64","ABORT","condition","text","updateMemoryViews","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","checkStackCookie","_emscripten_stack_get_end","cookie1","cookie2","ptrToString","h16","h8","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runtimeInitialized","addOnPreRun","cb","unshift","addOnPostRun","imul","fround","clz32","trunc","runDependencies","runDependencyWatcher","dependenciesFulfilled","runDependencyTracking","what","RuntimeError","FS","init","createDataFile","createPreloadedFile","createLazyFile","open","mkdev","registerDevice","analyzePath","ErrnoError","wasmBinaryFile","isDataURI","filename","createExportWrapper","name","nargs","args","wasmExports","EmscriptenEH","CppException","constructor","excPtr","super","excInfo","getExceptionMessage","message","getBinarySync","file","instantiateArrayBuffer","binaryFile","imports","receiver","getBinaryPromise","binary","instantiate","reason","newName","incoming","configurable","isExportedByForceFilesystem","missingGlobal","sym","msg","globalThis","warnOnce","unexportedRuntimeSymbol","callRuntimeCallbacks","callbacks","shift","ptr","toString","padStart","stackRestore","__emscripten_stack_restore","stackSave","_emscripten_stack_get_current","shown","UTF8Decoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","u0","u1","u2","ch","UTF8ToString","exceptionCaught","exceptionLast","ExceptionInfo","set_type","get_type","set_destructor","destructor","get_destructor","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","set_adjusted_ptr","adjustedPtr","get_adjusted_ptr","get_exception_ptr","___cxa_is_pointer_type","adjusted","embind_charCodes","BindingError","InternalError","setTempRet0","__emscripten_tempret_set","findMatchingCatch","thrown","info","thrownType","caughtType","adjusted_ptr_addr","___cxa_can_catch","readLatin1String","ret","awaitingDependencies","registeredTypes","typeDependencies","throwBindingError","throwInternalError","registerType","rawType","registeredInstance","options","TypeError","hasOwnProperty","ignoreDuplicateRegistrations","sharedRegisterType","emval_freelist","emval_handles","__emval_decref","handle","Emval","readPointer","pointer","EmValType","rv","destructors","destructorFunction","embindRepr","v","floatReadValueFromPointer","width","createNamedFunction","body","runDestructors","del","usesDestructorStack","argTypes","newFunc","argumentList","Function","dummy","apply","wasmTable","UnboundTypeError","_emscripten_get_now","ensureOverloadTable","proto","methodName","humanName","overloadTable","prevFunc","argCount","wasmTableMirror","getWasmTableEntry","funcPtr","func","embind__requireFunction","signature","rawFunction","sig","fp","includes","substring","dynCallLegacy","dynCall","getTypeName","___getTypeName","_free","integerReadValueFromPointer","signed","UTF16Decoder","UTF16ToString","maxIdx","codeUnit","stringToUTF16","outPtr","maxBytesToWrite","startPtr","numCharsToWrite","lengthBytesUTF16","UTF32ToString","utf32","stringToUTF32","lengthBytesUTF32","requireRegisteredType","impl","emval_returnValue","returnType","destructorsRef","emval_methodCallers","emval_symbols","getStringOrSymbol","address","symbol","Reflect","construct","performance","now","growMemory","pages","byteLength","grow","printCharBuffers","printChar","stream","curr","___cxa_increment_exception_refcount","___cxa_decrement_exception_refcount","baseErrorType","errorClass","stackAlloc","sz","__emscripten_stack_alloc","sp","type_addr_addr","message_addr_addr","___get_exception_message","type_addr","message_addr","getExceptionMessageCommon","codes","embind_init_charCodes","stack","create","calledRun","wasmImports","__assert_fail","line","__cxa_begin_catch","__cxa_find_matching_catch_2","__cxa_find_matching_catch_3","arg0","__cxa_throw","__resumeException","_abort_js","_embind_register_bigint","primitiveType","minRange","maxRange","_embind_register_bool","trueValue","falseValue","wt","_embind_register_emval","_embind_register_float","_embind_register_function","rawArgTypesAddr","rawInvoker","isAsync","count","firstElement","array","heap32VectorToArray","argsIndex","trim","indexOf","getFunctionName","numArguments","exposePublicSymbol","types","unboundTypes","seen","visit","map","join","throwUnboundTypeError","myTypes","dependentTypes","onComplete","typeConverters","myTypeConverters","invokerArgsArray","concat","replacePublicSymbol","classType","cppInvokerFunc","cppTargetFunc","isClassMethodFunc","needsDestructorStack","returns","closureArgs","invokerFnBody","argsList","argsListWired","dtorStack","args1","paramName","createJsInvoker","invokerFn","craftInvokerFunction","getTypeConverters","unregisteredTypes","registered","dt","whenDependentTypesAreResolved","_embind_register_integer","fromWireType","bitshift","isUnsignedType","checkAssertions","toTypeName","_embind_register_memory_view","dataTypeIndex","TA","decodeMemoryView","data","_embind_register_std_string","stdStringIsUTF8","payload","decodeStartPtr","currentBytePtr","stringSegment","valueIsOfTypeString","Uint8ClampedArray","lengthBytesUTF8","base","_malloc","heap","outIdx","startIdx","stringToUTF8Array","charCode","_embind_register_std_wstring","charSize","decodeString","encodeString","readCharAt","lengthBytesUTF","_embind_register_void","isVoid","_emscripten_get_now_is_monotonic","_emscripten_memcpy_js","dest","copyWithin","_emval_as","_emval_call","caller","_emval_call_method","objHandle","_emval_decref","_emval_get_method_caller","kind","emval_lookupTypes","retType","functionBody","params","id","invokerFunction","functionName","_emval_get_module_property","_emval_get_property","key","_emval_incref","_emval_new_array","_emval_new_cstring","_emval_new_object","_emval_run_destructors","_emval_set_property","_emval_take_value","arg","emscripten_date_now","Date","emscripten_get_now","emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","alignUp","x","multiple","cutDown","overGrownHeapSize","newSize","fd_close","fd","fd_seek","offset_low","offset_high","whence","newOffset","lo","hi","fd_write","iov","iovcnt","pnum","j","invoke_ii","index","a1","_setThrew","invoke_iii","a2","invoke_iiii","a3","invoke_j","dynCall_j","invoke_v","invoke_vi","invoke_vii","invoke_viii","invoke_viiii","a4","receiveInstance","instance","clearInterval","callback","removeRunDependency","setInterval","dep","path","trueModule","instantiateStreaming","catch","createWasm","_emscripten_stack_init","a0","run","doRun","postRun","preRun","setTimeout","librarySymbol","runCaller","keys","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","getter","__esModule","definition","enumerable","chunkId","Symbol","toStringTag","scriptUrl","location","tagName","toUpperCase","scripts","getElementsByTagName","test","baseURI","self","href","proxyMarker","createEndpoint","releaseProxy","throwMarker","isObject","transferHandlers","Map","canHandle","serialize","port1","port2","MessageChannel","expose","deserialize","port","start","wrap","serialized","isError","ep","addEventListener","ev","fromWireValue","returnValue","reduce","rawValue","proxy","transfers","transferCache","transfer","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","endpoint","isMessagePort","close","target","createProxy","throwIfProxyReleased","isReleased","isProxyReleased","Proxy","_target","requestResponseMessage","_thisArg","rawArgumentList","last","processArguments","processed","WeakMap","handler","serializedValue","fill","random","Number","MAX_SAFE_INTEGER","getMinZoom","jlat","ilon","thin_fac_base","zoom","thin_fac","zip","iterators","iterator","current","next","some","done","compute_value","make_key","cached_values","JSON","stringify","getValue","normalizeOptions","opts","defaults","entries","k","getArrayConstructor","ary","mergeShaderCode","snippet","main","ES3_SHADER_MAGIC","isStormRelativeWindProfile","isWebGL2Ctx","gl","getParameter","VERSION","getRendererData","defaultProjectionData","clippingPlane","fallbackMatrix","mainMatrix","projectionTransition","tileMercatorCoords","farZ","fov","modelViewProjectionMatrix","nearZ","projectionMatrix","shaderData","layer_worker","Worker","URL","getGLFormatTypeAlignment","array_dtype","format","row_alignment","userAgent","platform","macosPlatforms","os","is_webgl2","ext","getExtension","ext_lin","R16F","HALF_FLOAT","LUMINANCE","HALF_FLOAT_OES","navigator","maxTouchPoints","R32F","FLOAT","R8","UNSIGNED_BYTE","lambertConformalConic","F","compute_t","lat","sin_lat","sin","tan","PI","eccen","compute_m","cos","sqrt","semimajor","semiminor","radians","lon_0","lat_0","lat_std","t_0","lat_1","lat_2","t_1","t_2","m_1","m_2","rho_0","eccen2","eccen4","eccen6","eccen8","Ap","Bp","Cp","Dp","inverse","y","lon","atan2","rho","hypot","sign","chi","atan","sin_2chi","cos_2chi","theta","compute_lcc","lng","toMercatorCoord","fromMercatorCoord","LngLat","lngFromMercatorX","sinh","latFromMercatorY","WGLBufferBase","verts","n_coords_per_vert","draw_mode","bind_target","dtype","UNSIGNED_SHORT","UNSIGNED_INT","getGLDtype","n_verts","createBuffer","bindBuffer","bufferData","STATIC_DRAW","WGLBuffer","ARRAY_BUFFER","is_per_instance","per_instance","vadFunc","vertexAttribDivisor","vertexAttribDivisorANGLE","bindToProgram","prog_attr_location","enableVertexAttribArray","vertexAttribPointer","instance_skip","WGLTexture","image","texture","createTexture","tex_num","setImageData","mag_filter","LINEAR","texParameteri","TEXTURE_2D","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","spec","bindTexture","internal_format","data_type","RGBA","RGBA_INTEGER","RGB","RGB_INTEGER","RG","RG_INTEGER","RED","RED_INTEGER","LUMINANCE_ALPHA","ALPHA","DEPTH_COMPONENT","DEPTH_STENCIL","getWebGL2Format","pixelStorei","UNPACK_ALIGNMENT","texImage2D","prog_uni_location","gl_tex_num","activate","uniform1i","activeTexture","TEXTURE0","deactivate","deleteTexture","preprocessShader","shader_src","defines","current_defines","define_truth","processed_shader_src","split","match_define","match","match_ifdef","match_ifndef","def","WGLProgram","vertex_shader_src","fragment_shader_src","prog","frag_shader_src","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","compilationLog","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","linkLog","getProgramInfoLog","compileAndLinkShaders","attributes","uniforms","index_buffer","sampler_names","instance_count","remove_comments","comment_idx","vtx_shader_match","matchAll","full_match","a_name","getAttribLocation","u_name","type_parts","uniform_loc","getUniformLocation","uniform","toLowerCase","daiFunc","drawArraysInstanced","deiFunc","drawElementsInstanced","drawArraysInstancedANGLE","drawElementsInstancedANGLE","use","attribute_buffers","uniform_values","textures","useProgram","bindAttributes","setUniforms","bindTextures","warn","uniform1f","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix4fv","sampler_name","draw","drawArrays","drawElements","WGLFramebufferBase","framebuffer","clear","color","clearColor","bindFramebuffer","FRAMEBUFFER","COLOR_BUFFER_BIT","renderTo","height","viewport","copyToTexture","copyTexImage2D","registerGLContext","THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY","THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT","ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER","CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT","CANNOT_MIX_BIGINT_AND_OTHER_TYPES","ITERATOR_PROPERTY_IS_NOT_CALLABLE","REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE","OFFSET_IS_OUT_OF_BOUNDS","uncurryThis","thisArg","ReflectApply","uncurryThisGetter","ReflectGetOwnPropertyDescriptor","ReflectConstruct","ReflectDefineProperty","ReflectGet","getPrototypeOf","ReflectGetPrototypeOf","has","ReflectHas","ownKeys","ReflectOwnKeys","ReflectSet","setPrototypeOf","ReflectSetPrototypeOf","NativeProxy","EPSILON","isFinite","NumberIsFinite","NumberIsNaN","SymbolIterator","species","SymbolSpecies","SymbolToStringTag","for","SymbolFor","NativeObject","ObjectCreate","ObjectDefineProperty","freeze","ObjectFreeze","is","ObjectIs","ObjectPrototype","ObjectPrototype__lookupGetter__","__lookupGetter__","object","NativeTypeError","descriptor","ObjectHasOwn","hasOwn","NativeArray","ArrayIsArray","ArrayPrototype","ArrayPrototypeJoin","ArrayPrototypePush","ArrayPrototypeToLocaleString","toLocaleString","NativeArrayPrototypeSymbolIterator","ArrayPrototypeSymbolIterator","MathAbs","MathTrunc","NativeArrayBuffer","ArrayBufferIsView","ArrayBufferPrototype","ArrayBufferPrototypeSlice","ArrayBufferPrototypeGetByteLength","NativeSharedArrayBuffer","SharedArrayBuffer","SharedArrayBufferPrototypeGetByteLength","TypedArray","TypedArrayFrom","from","TypedArrayPrototype","NativeTypedArrayPrototypeSymbolIterator","TypedArrayPrototypeKeys","TypedArrayPrototypeValues","values","TypedArrayPrototypeEntries","TypedArrayPrototypeSet","TypedArrayPrototypeReverse","reverse","TypedArrayPrototypeFill","TypedArrayPrototypeCopyWithin","TypedArrayPrototypeSort","TypedArrayPrototypeSlice","TypedArrayPrototypeSubarray","TypedArrayPrototypeGetBuffer","TypedArrayPrototypeGetByteOffset","TypedArrayPrototypeGetLength","TypedArrayPrototypeGetSymbolToStringTag","NativeUint8Array","NativeUint16Array","Uint16ArrayFrom","NativeUint32Array","NativeFloat32Array","ArrayIteratorPrototype","ArrayIteratorPrototypeNext","GeneratorPrototypeNext","IteratorPrototype","DataViewPrototype","DataView","getUint16","setUint16","NativeRangeError","RangeError","NativeWeakSet","WeakSet","WeakSetPrototype","WeakSetPrototypeAdd","add","WeakSetPrototypeHas","NativeWeakMap","WeakMapPrototype","WeakMapPrototypeGet","WeakMapPrototypeHas","WeakMapPrototypeSet","arrayIterators","SafeIteratorPrototype","arrayIterator","safeIfNeeded","safe","generators","DummyArrayIteratorPrototype","generator","writable","isObjectLike","isNativeTypedArray","isNativeBigIntTypedArray","typedArrayName","isSharedArrayBuffer","isOrdinaryArray","isCanonicalIntegerIndexString","number","brand","INVERSE_OF_EPSILON","FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE","FLOAT16_EPSILON","FLOAT16_EPSILON_DEVIDED_BY_EPSILON","floatView","uint32View","baseTable","shiftTable","roundToFloat16Bits","absolute","roundTiesToEven","temp","roundToFloat16","mantissaTable","exponentTable","offsetTable","convertToNumber","float16bits","ToIntegerOrInfinity","ToLength","SpeciesConstructor","defaultConstructor","IsDetachedBuffer","defaultCompare","isXNaN","isYNaN","isXPlusZero","isYPlusZero","float16bitsArrays","isFloat16Array","hasFloat16ArrayBrand","assertFloat16Array","assertSpeciesTypedArray","isTargetFloat16Array","isTargetTypedArray","float16bitsArray","getFloat16BitsArray","float16","cloned","Float16Array","byteOffset","copyToArray","TypedArrayPrototypeGetters","input","_byteOffset","_length","isArrayBuffer","arguments","list","Constructor","uint16","mapFunc","of","items","at","relativeIndex","filter","kept","accumulator","reduceRight","find","findIndex","findLast","findLastIndex","every","targetOffset","targetLength","srcLength","toReversed","clonedFloat16bitsArray","compareFn","sortCompare","toSorted","relativeStart","relativeEnd","final","begin","uint16Subarray","element","separator","Float16ArrayPrototype","rgba","withOpacity","opacity","Color","toRGBHex","toRGBAHex","rgba_","in_type","round","toRGBATuple","toHSVTuple","rgb","H","Cmax","Delta","rgb2hsv","fromHex","hex","hexstr","out_type","parseInt","hex2rgba","fromHSVTuple","hsv","r_prime","g_prime","b_prime","S","V","C","X","hsv2rgb","normalizeColor","colormap_shader_src","levels","colors","overflow_color","underflow_color","getColors","getOpacities","new_colors","new_levels","ic","level_lower","level_upper","new_opacity","new_color","underflow_opacity","overflow_opacity","ColorMap","diverging","color1","color2","level_min","level_max","n_colors","stops","level_step","crossover","crossover_hsv","color1_hsv","color2_hsv","istop","level","interp_fac","ilev","buildColormap","cm_data","overflow","pw_speed500mb","levl","levu","pw_speed850mb","pw_cape","pw_t2m","pw_td2m","nws_storm_clear_refl","colormap","gl_elems","applyShader","setupShaderVariables","index_map","map_norm","n_lev","input_norm","lev","cmap_norm","inv_cmap_norm","jlev","alpha","makeIndexMap","cmap_image","createElement","ctx","getContext","stop","fillStyle","fillRect","makeTextureImage","format_nonlin","type_nonlin","row_alignment_nonlin","cmap_image_spec","cmap_texture","cmap_nonlin_image","cmap_nonlin_texture","bindShaderVariables","cmap","shader_defines","program_map","getShaderProgram","shader_data","shader_key","variantName","cached_program","vertex_src","vertexShaderPrelude","getShaderUniforms","render_data","polyline_vertex_src","polyline_fragment_src","dash_arrays","polyline","color_hex","line_width","line_style","offset_rotates_with_map","vertices","TRIANGLE_STRIP","extrusion","offsets","scale","offset_scale","min_zoom","fragment_src","line_data","cmap_gpu","ColorMapGPUInterface","NEAREST","dash_array","fill_image","makeDashTexture","n_dash","dash_texture","shader_manager","ShaderProgramManager","make","lines","makePolyLines","polylines","PolylineCollection","render","map_zoom","map_bearing","map_pitch","map_width","map_height","enable","BLEND","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","text_vertex_shader_src","text_fragment_shader_src","createAtlas","pbf_glyphs","pbf_glyphs_filtered","glyph","glyph_bins","boxes","area","maxWidth","box","w","spaces","ceil","space","potpack","bin","img_width","img_height","atlas_data","glyphs","max_glyph_height","glyph_bin","top","atlas_i","atlas_j","advance","glyph_idx","atlas_idx","glyph_M","baseline","atlas","atlas_width","atlas_height","glyph_info","FONT_ATLAS_CACHE","Cache","urls","promises","resp","blob","data_buffer","readGlyph","readFontStack","all","flat","text_collection_opt_defaults","horizontal_align","vertical_align","font_size","text_color","halo_color","halo","offset_x","offset_y","text_locs","font_atlas","empty_atlas","tl","anchor_data","offset_data","tc_data","i_anch","i_off","i_tc","loc","anchor_x","anchor_y","x_offset","y_offset","init_i_off","glyph_code","anchors","texcoords","fontstack_url_template","FONT_GROUP_SIZE","characters","char_code_min","char_code_max","stack_start","stack_end","fontstack_urls","istack","TextCollection","WGS84_SEMIMAJOR","WGS84_SEMIMINOR","argMin","minIndex","is_conformal","ni","nj","billboard_buffer_cache","max_zoom","grid","map_max_zoom","getEarthCoords","field_lats","field_lons","getMinVisibleZoom","makeBBElements","bb_elements","POINTS","makeWGLBillboardBuffers","vector_rotation_cache","data_are_earth_relative","coords","rot_vals","parseFloat","icd","lats","lons","getVectorRotationAtPoint","rot_img","makeVectorRotationTexture","getWGLBillboardBuffers","transform","x_pertlon","y_pertlon","getVectorRotationTexture","thin_x","thin_y","buffer_cache","new_ni","new_nj","simplify_ni","simplify_nj","texcoord_margin_r","texcoord_margin_s","makeDomainVerticesAndTexCoords","domain_coords","makeWGLDomainBuffers","xyThinFromMaxZoom","n_density_tiers","log2","n_inaccessible_tiers","xy_thin","zoom_thin_fac","ilat","thinDataArray","original_grid","new_data","idx_old","getWGLBuffers","sampleNearestGridPoint","getGridCoords","xs","ys","ll_x","ur_x","dx","ll_y","ur_y","dy","sample","sample_lon","sample_lat","i_min","xv","j_min","yv","lon_min","lat_min","Grid","ll_lon","ll_lat","ur_lon","ur_lat","dlon","dlat","ll_cache","dlon_req","dlat_req","gc_cache","copy","PlateCarreeGrid","getThinnedGrid","ni_remove","nj_remove","StructuredGrid","np_lon","np_lat","lon_shift","llrot","sin_np_lat","cos_np_lat","lon_p","lat_p","sin_lat_p","cos_lat_p","sin_lon_p_diff","cos_lon_p_diff","asin","compute_rotation_inverse","cos_lat","sin_lon_diff","cos_lon_diff","compute_rotation","rotateSphere","PlateCarreeRotatedGrid","lcc","dx_req","dy_req","fromLLCornerLonLat","LambertGrid","zoom_arg","zoom_cache","kd_nodes","tree","recursiveThin","depth","nodes","node","UnstructuredGrid","ll","ill","i_new","contour_opt_defaults","interval","quad_as_tri","field","contours","updateField","getContours","contour_data","contour_line_data","cv","cd","cv_","contour_style","contour_width","polyline_data","ld","line_data_filtered","plc_opts","triggerRepaint","onAdd","getZoom","getCanvas","bearing","getBearing","pitch","getPitch","cnt","PlotComponent","contour_label_opt_defaults","n_decimal_places","font_face","font_url_template","density","text_collection","map_style","getStyle","font_url","label_pos","contour_levels","getMaxZoom","contour_label_spacing","icntr","level_str","contour","c_map","v_ll","dist","v_last","this_dist","n_labels_placed","idist","target_dist","pt1","pt2","pt_lon","pt_lat","coord","label_grid","lp","text_specs","ilp","tc_opts","msm_promise","initMSModule","fname","dir","document_script","contourCreator","msm","grid_coords","getContourLevels","getContourLevelsFloat32","getContourLevelsFloat16","makeContours","makeContoursFloat32","makeContoursFloat16","getArrayDType","contour_cache","getTextureData","raw_data","raw_data_type","getWGLTextureSpec","image_mag_filter","tex_data","aggregateFields","agg_data","gen","elem","mapGenerator","RawScalarField","sampleField","relative_to","raw_u","raw_v","u_raw_data_type","v_raw_data_type","getWGLTextureSpecs","u_thin","v_thin","getThinnedField","new_grid","thin_u","thin_v","RawVectorField","u_sample","v_sample","rot","mag","brg","profiles","getStormMotionGrid","prof","smu","smv","getProfileCoords","prof_lats","prof_lons","iprof","getScalar","field_data","getStrings","getVector","vector_field_data","u_data","v_data","idat","wspd","wdir","vec2comp","contourfill_vertex_shader_src","contourfill_fragment_shader_src","contour_fill_opt_defaults","cmap_mask","cm","fill_texture","mask_texture","cmap_mag_filter","mask","mask_field","mask_image","cmg","shader_manger","icmg","matrix","PlotComponentFill","billboard_vertex_shader_src","billboard_fragment_shader_src","billboard_image","billboard_spec","billboard_size_mult","rotate_with_map","size_multiplier","wind_textures","u_image","v_image","setup","thinned_grid","geom_verts","geom_buffer","proj_rotation_tex","geom_vertices","proj_rot_texture","bb_size","BB_HEIGHT","bb_width","BB_WIDTH","BB_TEX_WIDTH","bb_height","BB_TEX_HEIGHT","BB_MAG_BIN_SIZE","BB_MAG_WRAP","BASE_BARB_DIMS","BB_MAG_MAX","barb_opt_defaults","barb_size_multiplier","fields","barb_texture","dimensions","canvas","drawWindBarb","tipx","tipy","elem_full_size","elem_spacing","beginPath","arc","stroke","elem_pos","mag_countdown","staff_length","n_flags","n_full_barbs","moveTo","lineTo","last_was_flag","first_elem","lineWidth","miterLimit","ibarb","createBarbTexture","barb_billboards","barb_image","BillboardCollection","paintball_vertex_shader_src","paintball_fragment_shader_src","paintball_opt_defaults","color_components","verts_buf","tex_coords_buf","HODO_BG_DIMS","hodograph_opt_defaults","bgcolor","hodo_line_width","background_line_width","height_cmap","max_wind_speed_ring","profile_field","hodo_bg_texture","arrow_head","irng","ctr_x","ctr_y","arrow_size","_createHodoBackgroundTexture","hodo_scale","bg_size","line_elems","bg_billboard","min_visible_zoom","hodo_polyline","ipt","hodo_line","sm_polyline","sm_mag","sm_ang","sm_line","bg_image","SYMBOLS","station_plot_opts_defaults","config","positionToAlignmentAndOffset","off_size","ha","va","xoff","yoff","text_components","barb_components","sub_component_promises","k_","comp","formatter","wxsym_font_url","barb_promises","barb_size","barb_size_multipler","barb_comp","itext","repaint","PlotLayer","PlotLayerBase","field_key","res","setActiveKey","getKeys","addField","tagname","createElementNS","setAttribute","appendChild","makeColorBar","label","ticks","orientation","fontface","tickfontsize","ticklabelsize","size_long","size_short","outline_and_text_color","tick_dir","tick_direction","bar_left","bar_top","bar_width","bar_height","bar_right","bar_bottom","bar_middle","bar_low_arrow","bar_high_arrow","getNChar","chars_left","chars_right","need_overflow","bar_long_size","bar_cross_size","bar_long_pad","gtickattrs","gbar","gticks","icolor","underflow_attrs","points","overflow_attrs","point_list","labelattrs","first_level","last_level","diffs","ilevel","tickattrs","gtick","x2","y2","style","textContent","makePaintballKey","labels","n_cols","n_rows","irow","icol","swatch_height","colormaps","bluered","redblue","initAutumnPlot","wasm_base_url"],"sourceRoot":""}