{"version":3,"file":"autumnplot-gl.js","mappings":"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A,aACA,eACA,gBACA,4BACA,gBACA,UACA,UACA,oBACA,aACA,yBACA,kBACA,mBACA,uBACA,sBACA,mBACA,YACA,cACA,YACA,cACA,YACA,oBACA,aACA,cACA,eACA,aACA,WACA,QACA,QACA,gBACA,iBACA,mBACA,0BACA,oBACA,iBACA,qBACA,cACA,iBACA,iBACA,SACA,SACA,SACA,eACA,qBACA,mBACA,gBACA,gBACA,kBACA,sBACA,qBACA,2BACA,yBACA,kBACA,wBACA,wBACA,qBACA,6BACA,6BACA,0BACA,6BACA,iCACA,yCACA,4BACA,oCACA,oBACA,iCACA,yCACA,gCACA,wCACA,6BACA,qCACA,0BACA,mCACA,wBACA,eACA,wCACA,sBACA,iCACA,yCACA,wCACA,qBACA,gCACA,wCACA,6BACA,uBACA,+BACA,oCACA,uBACA,UACA,+BACA,uBACA,uBACA,WACA,cACA,eACA,aACA,gBACA,iBACA,yBACA,yBACA,uBACA,iBACA,sBACA,wBACA,uBACA,aACA,cACA,gBACA,sBACA,cACA,kBACA,mBACA,yBACA,uBACA,aACA,mBACA,oBACA,YACA,eACA,sBACA,yBACA,8BACA,sCACA,uCACA,kCACA,gCACA,qBACA,gCACA,iCACA,iCACA,gBACA,4BACA,0BACA,6CACA,uBACA,iCACA,+BACA,eACA,6BACA,qBACA,cACA,iBACA,YACA,eACA,cACA,WACA,sBACA,qBACA,sBACA,4BACA,8BACA,2BACA,oBACA,mBACA,oBACA,oBACA,yBAEoBlF,SAn5FtB,SAA8BoH,GACF,oBAAfE,YAA+BpH,OAAOC,yBAAyBmH,WAAYF,IACpFlH,OAAOE,eAAekH,WAAYF,EAAK,CACrCH,cAAc,EACd5G,MAGE,IAAIgH,EAAM,KAAKD,mJAIXwc,EAAgBxc,EACfwc,EAAc3e,WAAW,OAC5B2e,EAAgB,IAAMxc,GAExBC,GAAO,8CAA8Cuc,MACjD1c,EAA4BE,KAC9BC,GAAO,4FAETE,GAASF,EAEX,IAKJG,EAAwBJ,EAC1B,IA03FA,IAoMIyc,GAQJ,SAASC,KA1lHT,IACMrsB,EA6lHJksB,KA5lHAliB,EAAoB,IAAN,GADVhK,EAAMsL,QAKC,GAAPtL,IACFA,GAAO,GAKTuK,EAAS,GAAO,GAAM,SACtBA,EAAU,EAAM,GAAM,GAAM,WAE5BA,EAAQ,GAAY,UAklHtB,CAEA,SAAS+hB,KAeP,SAASC,IAGHH,KACJA,IAAY,EACZxkB,EAAkB,WAAI,EAElB8C,IAzjHNV,GAAQ+B,GACRA,GAAqB,EAErBV,IAGA2E,EAAqBnE,GAujHnB3D,EAAoBN,GAChBA,EAA6B,sBAAGA,EAA6B,uBAEjEoC,GAAQpC,EAAc,MAAG,4GAvjH7B,WAGE,GAFAyD,IAEIzD,EAAgB,QAElB,IADgC,mBAArBA,EAAgB,UAAiBA,EAAgB,QAAI,CAACA,EAAgB,UAC1EA,EAAgB,QAAErJ,QAmBPiX,EAlBH5N,EAAgB,QAAEsI,QAmBnCpE,EAAc2f,QAAQjW,GADxB,IAAsBA,EAdpBxF,EAAqBlE,EACvB,CA8iHI0gB,IACF,CA9BIpgB,EAAkB,IAIpBigB,KApjHJ,WACE,GAAIzkB,EAAe,OAEjB,IAD+B,mBAApBA,EAAe,SAAiBA,EAAe,OAAI,CAACA,EAAe,SACvEA,EAAe,OAAErJ,QA8BPiX,EA7BH5N,EAAe,OAAEsI,QA8BjCtE,EAAa6f,QAAQjW,GADvB,IAAqBA,EA1BnBxF,EAAqBpE,EACvB,CA8iHE6gB,GAGIrgB,EAAkB,IAuBlBxE,EAAkB,WACpBA,EAAkB,UAAE,cACpB8kB,YAAW,WACTA,YAAW,WACT9kB,EAAkB,UAAE,GACtB,GAAG,GACH2kB,GACF,GAAG,IAGHA,IAEFlhB,KACF,CA+BA,GAnSwB,CACtB,MACA,cACA,YACA,eACA,YACA,eACA,mBACA,sBACA,kBACA,gBACA,oBACA,gBACA,kBACA,cACA,MACA,MACA,WACA,QACA,aACA,cACA,aACA,YACA,eACA,cACA,cACA,mBACA,mBACA,6BACA,cACA,aACA,aACA,MACA,qBACA,kBACA,gCACA,6BACA,cACA,iBACA,MACA,YACA,UACA,SACA,WACA,eACA,qBACA,gBACA,eACA,UACA,sBACA,kBACA,YACA,gBACA,mBACA,sBACA,WACA,WACA,OACA,UACA,cACA,oBACA,eACA,oBACA,eACA,kBACA,eACA,gBACA,gBACA,mBACA,gBACA,gBACA,mBACA,WACA,qBACA,4BACA,0BACA,aACA,sBACA,aACA,yBACA,gBACA,kBACA,gBACA,oBACA,4BACA,6BACA,6BACA,sBACA,UACA,OACA,WACA,iBACA,0BACA,KACA,QACA,MACA,SACA,SACA,uBACA,4BACA,0BACA,KACA,qCACA,KACA,OACA,MACA,OACA,WACA,MACA,UACA,eACA,sBACA,gBACA,eACA,qBACA,oBACA,kBACA,uBACA,mBACA,qBACA,sBACA,qBACA,gCACA,mBACA,wBACA,mBACA,cACA,kBACA,sBACA,wBACA,mBACA,mBACA,sBACA,cACA,wBACA,sBACA,qBACA,sBACA,cACA,sBACA,aACA,sBACA,mBACA,uBACA,4BACA,4BACA,qBACA,eACA,8BACA,4BACA,6BACA,cACA,iBACA,UACA,uBACA,0BACA,2BACA,sCACA,yCACA,yBACA,oBACA,iCACA,gBACA,qBACA,uBACA,uBACA,kBACA,kBACA,kBACA,mBACA,cACA,8BACA,gBACA,sBACA,gBACA,mBACA,kBACA,6BACA,kBACA,gBACA,eACA,SACA,SACA,wBACA,gBACA,gBACA,aACA,sBACA,QACA,sBACA,oBAEgB9C,QAAQwH,GAM1BzD,EAAwB,SAASqgB,IAE1BP,IAAWE,KACXF,KAAW9f,EAAwBqgB,EAC1C,EAyFI/kB,EAAgB,QAElB,IADgC,mBAArBA,EAAgB,UAAiBA,EAAgB,QAAI,CAACA,EAAgB,UAC1EA,EAAgB,QAAErJ,OAAS,GAChCqJ,EAAgB,QAAEpJ,KAAlBoJ,GAUF,OANF0kB,KAMSrkB,EAAU2kB,KAEnB,GAIElxB,EAAOD,QAAUmM,ICpjIfilB,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB/kB,IAAjBglB,EACH,OAAOA,EAAavxB,QAGrB,IAAIC,EAASmxB,EAAyBE,GAAY,CAGjDtxB,QAAS,CAAC,GAOX,OAHAwxB,EAAoBF,GAAUpU,KAAKjd,EAAOD,QAASC,EAAQA,EAAOD,QAASqxB,GAGpEpxB,EAAOD,OACf,CAGAqxB,EAAoBzwB,EAAI4wB,ECxBxBH,EAAoBnvB,EAAKjC,IACxB,IAAIsqB,EAAStqB,GAAUA,EAAOwxB,WAC7B,IAAOxxB,EAAiB,QACxB,IAAM,EAEP,OADAoxB,EAAoBnwB,EAAEqpB,EAAQ,CAAErmB,EAAGqmB,IAC5BA,CAAM,ECLd8G,EAAoBnwB,EAAI,CAAClB,EAAS0xB,KACjC,IAAI,IAAIC,KAAOD,EACXL,EAAoBlvB,EAAEuvB,EAAYC,KAASN,EAAoBlvB,EAAEnC,EAAS2xB,IAC5E3kB,OAAOE,eAAelN,EAAS2xB,EAAK,CAAE7G,YAAY,EAAM3d,IAAKukB,EAAWC,IAE1E,ECLDN,EAAoB9tB,EAAKquB,GAEZA,EAAU,oBCHvBP,EAAoBltB,EAAI,WACvB,GAA0B,iBAAfiQ,WAAyB,OAAOA,WAC3C,IACC,OAAOhU,MAAQ,IAAI8iB,SAAS,cAAb,EAGhB,CAFE,MAAOviB,GACR,GAAsB,iBAAXkN,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBwjB,EAAoBlvB,EAAI,CAACC,EAAK2K,IAAUC,OAAOrK,UAAU8W,eAAeyD,KAAK9a,EAAK2K,GCClFskB,EAAoBhuB,EAAKrD,IACH,oBAAX+pB,QAA0BA,OAAO8H,aAC1C7kB,OAAOE,eAAelN,EAAS+pB,OAAO8H,YAAa,CAAEpwB,MAAO,WAE7DuL,OAAOE,eAAelN,EAAS,aAAc,CAAEyB,OAAO,GAAO,QCL9D,IAAIqwB,EACAT,EAAoBltB,EAAE2J,gBAAegkB,EAAYT,EAAoBltB,EAAE4tB,SAAW,IACtF,IAAI3lB,EAAWilB,EAAoBltB,EAAEiI,SACrC,IAAK0lB,GAAa1lB,IACbA,EAASC,gBACZylB,EAAY1lB,EAASC,cAAcC,MAC/BwlB,GAAW,CACf,IAAIE,EAAU5lB,EAAS6lB,qBAAqB,UACzCD,EAAQlvB,SAAQgvB,EAAYE,EAAQA,EAAQlvB,OAAS,GAAGwJ,IAC5D,CAID,IAAKwlB,EAAW,MAAM,IAAI3uB,MAAM,yDAChC2uB,EAAYA,EAAUnkB,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,YAAa,KACpF0jB,EAAoBjtB,EAAI0tB,MCfxBT,EAAoB3oB,EAAI0D,SAAS8lB,SAAWC,KAAKJ,SAASK,ieCY1D,MAAMC,EAActI,OAAO,iBACrBuI,EAAiBvI,OAAO,oBACxBwI,EAAexI,OAAO,wBACtByI,EAAczI,OAAO,kBACrB0I,EAAY/qB,GAAwB,iBAARA,GAA4B,OAARA,GAAgC,mBAARA,EAgDxEgrB,EAAmB,IAAIC,IAAI,CAC7B,CAAC,QA7CwB,CACzBC,UAAYlrB,GAAQ+qB,EAAS/qB,IAAQA,EAAI2qB,GACzCQ,UAAUzwB,GACN,MAAM,MAAE0wB,EAAK,MAAEC,GAAU,IAAIC,eAE7B,OADAC,EAAO7wB,EAAK0wB,GACL,CAACC,EAAO,CAACA,GACpB,EACAG,YAAYC,IACRA,EAAKC,QACEC,EAAKF,MAqChB,CAAC,QA/BwB,CACzBP,UAAYnxB,GAAUgxB,EAAShxB,IAAU+wB,KAAe/wB,EACxDoxB,WAAU,MAAEpxB,IACR,IAAI6xB,EAcJ,OAZIA,EADA7xB,aAAiB0B,MACJ,CACTowB,SAAS,EACT9xB,MAAO,CACHmR,QAASnR,EAAMmR,QACfX,KAAMxQ,EAAMwQ,KACZ+D,MAAOvU,EAAMuU,QAKR,CAAEud,SAAS,EAAO9xB,SAE5B,CAAC6xB,EAAY,GACxB,EACAJ,YAAYI,GACR,GAAIA,EAAWC,QACX,MAAMvmB,OAAOM,OAAO,IAAInK,MAAMmwB,EAAW7xB,MAAMmR,SAAU0gB,EAAW7xB,OAExE,MAAM6xB,EAAW7xB,KACrB,MASJ,SAASwxB,EAAO7wB,EAAKoxB,EAAKrB,MACtBqB,EAAGC,iBAAiB,WAAW,SAASvD,EAASwD,GAC7C,IAAKA,IAAOA,EAAG7H,KACX,OAEJ,MAAM,GAAE/E,EAAE,KAAE9hB,EAAI,KAAE4M,GAAS5E,OAAOM,OAAO,CAAEsE,KAAM,IAAM8hB,EAAG7H,MACpD5I,GAAgByQ,EAAG7H,KAAK5I,cAAgB,IAAIxB,IAAIkS,GACtD,IAAIC,EACJ,IACI,MAAMrxB,EAASqP,EAAK/N,MAAM,GAAI,GAAGgwB,QAAO,CAACzxB,EAAK2K,IAAS3K,EAAI2K,IAAO3K,GAC5D0xB,EAAWliB,EAAKiiB,QAAO,CAACzxB,EAAK2K,IAAS3K,EAAI2K,IAAO3K,GACvD,OAAQ4C,GACJ,IAAK,MAEG4uB,EAAcE,EAElB,MACJ,IAAK,MAEGvxB,EAAOqP,EAAK/N,OAAO,GAAG,IAAM8vB,EAAcD,EAAG7H,KAAKpqB,OAClDmyB,GAAc,EAElB,MACJ,IAAK,QAEGA,EAAcE,EAAS3hB,MAAM5P,EAAQ0gB,GAEzC,MACJ,IAAK,YAGG2Q,EAyIxB,SAAexxB,GACX,OAAO4K,OAAOM,OAAOlL,EAAK,CAAE,CAACiwB,IAAc,GAC/C,CA3IsC0B,CADA,IAAID,KAAY7Q,IAGlC,MACJ,IAAK,WACD,CACI,MAAM,MAAE6P,EAAK,MAAEC,GAAU,IAAIC,eAC7BC,EAAO7wB,EAAK2wB,GACZa,EA8HxB,SAAkBxxB,EAAK4xB,GAEnB,OADAC,EAAcxpB,IAAIrI,EAAK4xB,GAChB5xB,CACX,CAjIsC8xB,CAASpB,EAAO,CAACA,GACnC,CACA,MACJ,IAAK,UAEGc,OAAcrnB,EAElB,MACJ,QACI,OAKZ,CAFA,MAAO9K,GACHmyB,EAAc,CAAEnyB,QAAO,CAAC+wB,GAAc,EAC1C,CACA7lB,QAAQC,QAAQgnB,GACXrgB,OAAO9R,IACD,CAAEA,QAAO,CAAC+wB,GAAc,MAE9Bpf,MAAMwgB,IACP,MAAOO,EAAWC,GAAiBC,EAAYT,GAC/CJ,EAAGc,YAAYtnB,OAAOM,OAAON,OAAOM,OAAO,CAAC,EAAG6mB,GAAY,CAAErN,OAAOsN,GACvD,YAATpvB,IAEAwuB,EAAGe,oBAAoB,UAAWrE,GAClCsE,EAAchB,GAClB,GAER,IACIA,EAAGJ,OACHI,EAAGJ,OAEX,CAIA,SAASoB,EAAcC,IAHvB,SAAuBA,GACnB,MAAqC,gBAA9BA,EAASliB,YAAYN,IAChC,EAEQyiB,CAAcD,IACdA,EAASE,OACjB,CACA,SAAStB,EAAKG,EAAIoB,GACd,OAAOC,EAAYrB,EAAI,GAAIoB,EAC/B,CACA,SAASE,EAAqBC,GAC1B,GAAIA,EACA,MAAM,IAAI5xB,MAAM,6CAExB,CACA,SAAS0xB,EAAYrB,EAAI5hB,EAAO,GAAIgjB,EAAS,WAAc,GACvD,IAAII,GAAkB,EACtB,MAAMjB,EAAQ,IAAIkB,MAAML,EAAQ,CAC5BznB,IAAI+nB,EAASnoB,GAET,GADA+nB,EAAqBE,GACjBjoB,IAASwlB,EACT,MAAO,IACI4C,EAAuB3B,EAAI,CAC9BxuB,KAAM,UACN4M,KAAMA,EAAK6P,KAAKrd,GAAMA,EAAEgS,eACzBhD,MAAK,KACJohB,EAAchB,GACdwB,GAAkB,CAAI,IAIlC,GAAa,SAATjoB,EAAiB,CACjB,GAAoB,IAAhB6E,EAAK9O,OACL,MAAO,CAAEsQ,KAAM,IAAM2gB,GAEzB,MAAM1wB,EAAI8xB,EAAuB3B,EAAI,CACjCxuB,KAAM,MACN4M,KAAMA,EAAK6P,KAAKrd,GAAMA,EAAEgS,eACzBhD,KAAKugB,GACR,OAAOtwB,EAAE+P,KAAKjF,KAAK9K,EACvB,CACA,OAAOwxB,EAAYrB,EAAI,IAAI5hB,EAAM7E,GACrC,EACAtC,IAAIyqB,EAASnoB,EAAM+mB,GACfgB,EAAqBE,GAGrB,MAAOvzB,EAAO2yB,GAAiBC,EAAYP,GAC3C,OAAOqB,EAAuB3B,EAAI,CAC9BxuB,KAAM,MACN4M,KAAM,IAAIA,EAAM7E,GAAM0U,KAAKrd,GAAMA,EAAEgS,aACnC3U,SACD2yB,GAAehhB,KAAKugB,EAC3B,EACAxhB,MAAM+iB,EAASE,EAAUC,GACrBP,EAAqBE,GACrB,MAAMM,EAAO1jB,EAAKA,EAAK9O,OAAS,GAChC,GAAIwyB,IAAShD,EACT,OAAO6C,EAAuB3B,EAAI,CAC9BxuB,KAAM,aACPoO,KAAKugB,GAGZ,GAAa,SAAT2B,EACA,OAAOT,EAAYrB,EAAI5hB,EAAK/N,MAAM,GAAI,IAE1C,MAAOof,EAAcmR,GAAiBmB,EAAiBF,GACvD,OAAOF,EAAuB3B,EAAI,CAC9BxuB,KAAM,QACN4M,KAAMA,EAAK6P,KAAKrd,GAAMA,EAAEgS,aACxB6M,gBACDmR,GAAehhB,KAAKugB,EAC3B,EACA6B,UAAUN,EAASG,GACfP,EAAqBE,GACrB,MAAO/R,EAAcmR,GAAiBmB,EAAiBF,GACvD,OAAOF,EAAuB3B,EAAI,CAC9BxuB,KAAM,YACN4M,KAAMA,EAAK6P,KAAKrd,GAAMA,EAAEgS,aACxB6M,gBACDmR,GAAehhB,KAAKugB,EAC3B,IAEJ,OAAOI,CACX,CAIA,SAASwB,EAAiBtS,GACtB,MAAMwS,EAAYxS,EAAaxB,IAAI4S,GACnC,MAAO,CAACoB,EAAUhU,KAAK6C,GAAMA,EAAE,MALnBhe,EAK+BmvB,EAAUhU,KAAK6C,GAAMA,EAAE,KAJ3D5gB,MAAMf,UAAU+d,OAAOvO,MAAM,GAAI7L,KAD5C,IAAgBA,CAMhB,CACA,MAAM2tB,EAAgB,IAAIyB,QAe1B,SAASrB,EAAY5yB,GACjB,IAAK,MAAOwQ,EAAM0jB,KAAYjD,EAC1B,GAAIiD,EAAQ/C,UAAUnxB,GAAQ,CAC1B,MAAOm0B,EAAiBxB,GAAiBuB,EAAQ9C,UAAUpxB,GAC3D,MAAO,CACH,CACIuD,KAAM,UACNiN,OACAxQ,MAAOm0B,GAEXxB,EAER,CAEJ,MAAO,CACH,CACIpvB,KAAM,MACNvD,SAEJwyB,EAAc9mB,IAAI1L,IAAU,GAEpC,CACA,SAASkyB,EAAclyB,GACnB,OAAQA,EAAMuD,MACV,IAAK,UACD,OAAO0tB,EAAiBvlB,IAAI1L,EAAMwQ,MAAMihB,YAAYzxB,EAAMA,OAC9D,IAAK,MACD,OAAOA,EAAMA,MAEzB,CACA,SAAS0zB,EAAuB3B,EAAIrf,EAAK6f,GACrC,OAAO,IAAIrnB,SAASC,IAChB,MAAMka,EAeH,IAAIpjB,MAAM,GACZmyB,KAAK,GACLpU,KAAI,IAAMngB,KAAKQ,MAAMR,KAAKw0B,SAAWC,OAAOC,kBAAkB5f,SAAS,MACvEsL,KAAK,KAjBN8R,EAAGC,iBAAiB,WAAW,SAASnwB,EAAEowB,GACjCA,EAAG7H,MAAS6H,EAAG7H,KAAK/E,IAAM4M,EAAG7H,KAAK/E,KAAOA,IAG9C0M,EAAGe,oBAAoB,UAAWjxB,GAClCsJ,EAAQ8mB,EAAG7H,MACf,IACI2H,EAAGJ,OACHI,EAAGJ,QAEPI,EAAGc,YAAYtnB,OAAOM,OAAO,CAAEwZ,MAAM3S,GAAM6f,EAAU,GAE7D,6uDClSMiC,EAAW,SAACC,EAAgBC,GAC9BA,OAAwB5pB,IAAb4pB,EAAyB,QAAUA,EAE9C,IAAMC,EAAQF,EAAOE,MAAM,uDAC3B,GAAc,OAAVA,EACA,KAAM,eAAQF,EAAM,uDAGxB,IAAIG,EAAOD,EAAMvyB,MAAM,GAAGyyB,QAAO,SAAA50B,GAAK,YAAM6K,IAAN7K,CAAA,IAAiB+f,KAAI,SAAA/f,GAAK,OAAA60B,SAAS70B,EAAG,GAAZ,IAMhE,MAJgB,SAAZy0B,IACAE,EAAOA,EAAK5U,KAAI,SAAA/f,GAAK,OAAAA,EAAI,GAAJ,UAGN6K,IAAZ8pB,EAAK,GAAmB,CAACA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAI,GAAK,CAACA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GACrG,EAaMG,EAAU,SAACN,EAAgBC,GACxB,QAAeF,EAASC,EAAQC,GAAS,GAAxC9yB,EAAC,KAAEc,EAAC,KAAEuE,EAAC,KACb,OADgB,KACT,CAACrF,EAAGc,EAAGuE,EAClB,EAEM+tB,EAAU,SAACC,EAA+BC,GACtC,QAAYD,EAAG,GACrB,OAlBa,SAACL,EAAwCM,GAGtD,IAAIC,EAAQP,EAKZ,MAJe,UAHfM,OAAsBpqB,IAAZoqB,EAAwB,QAAUA,KAIxCC,EAAQA,EAAMnV,KAAI,SAAA/f,GAAK,OAAAJ,KAAKu1B,MAAU,IAAJn1B,EAAX,KAGpB,IAAMk1B,EAAMnV,KAAI,SAAA/f,GAAK,OAAAA,EAAE0U,SAAS,IAAIC,SAAS,EAAG,KAAKygB,aAAhC,IAA+CpV,KAAK,GACpF,CASWqV,CAAS,CADR,KAAG,KAAG,KACY,GAAIJ,GAAS9yB,MAAM,GAAI,EACrD,EAEMmzB,EAAU,SAACN,GACP,IAMFO,EANE,IAAYP,EAAG,GAAdrzB,EAAC,KAAEc,EAAC,KAAEuE,EAAC,KAERwuB,EAAO51B,KAAKiD,IAAIlB,EAAGc,EAAGuE,GAEtByuB,EAAQD,EADD51B,KAAK+C,IAAIhB,EAAGc,EAAGuE,GAoB5B,OAhBa,GAATyuB,EACAF,EAAI,EAECC,GAAQ7zB,EACb4zB,GAAW9yB,EAAIuE,GAAKyuB,EAAhB,GAAyB,EAExBD,GAAQ/yB,EACb8yB,EAAI,KAAOvuB,EAAIrF,GAAK8zB,EAAQ,GAEvBD,GAAQxuB,IACbuuB,EAAI,KAAO5zB,EAAIc,GAAKgzB,EAAQ,IAMzB,CAACF,EAHQ,GAARC,EAAY,EAAIC,EAAQD,EACxBA,EAGZ,EAEME,EAAU,SAACC,GACP,IAMFC,EAASC,EAASC,EANhB,IAAYH,EAAG,GAAdJ,EAAC,KAAEQ,EAAC,KAAEC,EAAC,KAERC,EAAID,EAAID,EACRG,EAAID,GAAK,EAAIr2B,KAAKM,IAAIq1B,EAAI,GAAK,EAAI,IACnCr2B,EAAI82B,EAAIC,EAsBd,OAnBI,GAAKV,GAAKA,EAAI,IACdK,EAAUK,EAAGJ,EAAUK,EAAGJ,EAAU,GAE/B,IAAMP,GAAKA,EAAI,KACpBK,EAAUM,EAAGL,EAAUI,EAAGH,EAAU,GAE/B,KAAOP,GAAKA,EAAI,KACrBK,EAAU,EAAGC,EAAUI,EAAGH,EAAUI,GAE/B,KAAOX,GAAKA,EAAI,KACrBK,EAAU,EAAGC,EAAUK,EAAGJ,EAAUG,GAE/B,KAAOV,GAAKA,EAAI,KACrBK,EAAUM,EAAGL,EAAU,EAAGC,EAAUG,GAE/B,KAAOV,GAAKA,EAAI,MACrBK,EAAUK,EAAGJ,EAAU,EAAGC,EAAUI,GAGjC,CAACN,EAAU12B,EAAG22B,EAAU32B,EAAG42B,EAAU52B,EAChD,EAEA,SAASi3B,EAAWC,EAAcC,EAAcC,GAM5C,IALA,IAEIC,EAFc,EAGdC,EAAWF,EAENF,EAAOI,GAAa,GAAQH,EAAOG,GAAa,GACrDD,GAAQ,EACRC,GAAY,EAGhB,OAAOD,CACX,CAEA,SAAUE,cAAI,wGACPC,EAAYrgB,EAAK0J,KAAI,SAAAoM,GAAK,OAAAA,EAAE9D,OAAOsO,WAAT,qBAG/B,OADMC,EAAUF,EAAU3W,KAAI,SAAAoM,GAAK,OAAAA,EAAE0K,MAAF,KACvBC,MAAK,SAAA3K,GAAK,OAAAA,EAAE4K,IAAF,IACrB,MAED,GAAMH,EAAQ7W,KAAI,SAAAoM,GAAK,OAAAA,EAAEpsB,KAAF,mBAAvB,oCA+BF,iBAKI,WAAYi3B,EAAkCC,GAC1Cv4B,KAAKw4B,cAAgB,CAAC,EACtBx4B,KAAKs4B,cAAgBA,EACrBt4B,KAAKu4B,cAAwBpsB,IAAbosB,EAAyB,eAAC,sDAAe,OAAAE,KAAKC,UAAU/gB,EAAf,EAAuB4gB,CACpF,CAWJ,OATW,YAAAI,SAAP,eAAgB,sDACZ,IAAMpH,EAAMvxB,KAAKu4B,SAAQ,MAAbv4B,KAAI,OAAa2X,IAAI,IAMjC,OAJM4Z,KAAOvxB,KAAKw4B,gBACdx4B,KAAKw4B,cAAcjH,GAAOvxB,KAAKs4B,cAAa,MAAlBt4B,KAAI,OAAkB2X,IAAI,KAGjD3X,KAAKw4B,cAAcjH,EAC9B,EACJ,EApBA,GAuBA,SAASqH,EAAmDC,EAAwBC,GAChF,IAAMhjB,EAAM,KAAIgjB,GAQhB,YANa3sB,IAAT0sB,GACAjsB,OAAOmsB,QAAQF,GAAMnsB,SAAQ,SAAC,gBAAC4O,EAAC,KAAE4I,EAAC,KAC/BpO,EAAIwF,GAAK4I,CACb,IAGGpO,CACX,CC3IA,SAASkjB,EAAYC,GACjB,OAAOA,EAAGC,aAAaD,EAAGE,SAAS/Y,SAAS,YAChD,CCpCA,IACMgZ,EAAe,EADN,IAAIC,OAAO,IAAIC,IAAI,oBAGlC,aAGA,EAEA,SAASC,EAAyBN,EAA8BO,GAC5D,IAAIC,EAAQ70B,EAAM80B,EFyGZC,EACFC,EACAC,EAGAC,EE7GEC,EAAYf,EAAYC,GAE9B,GAAIO,EAAY,CACZ,IAAMQ,EAAMf,EAAGgB,aAAa,0BACtBC,EAAUjB,EAAGgB,aAAa,iCAEhC,IAAMF,GAAqB,OAARC,IAAmBD,GAAyB,OAAZG,EAC/C,KAAM,6EAGVT,EAASM,EAAYd,EAAGkB,KAAOlB,EAAGmB,UAClCx1B,EAAOm1B,EAAYd,EAAGoB,WAAaL,EAAIM,eACvCZ,EAAgB,CACpB,KACK,CAUP,GATYM,EAAMf,EAAGgB,aAAa,qBACtBC,EAAUjB,EAAGgB,aAAa,6BAQhCF,GAAqB,OAARC,IAAmBD,GAAyB,OAAZG,GAAkC,SFgF7EP,EAAYlsB,OAAO8sB,UAAUZ,UAC/BC,EAAWnsB,OAAO8sB,UAAUX,SAI5BE,EAAK,MAEiC,KALtCD,EAAiB,CAAC,YAAa,WAAY,SAAU,WAKtCxsB,QAAQusB,IAAoBW,UAAUC,gBAAkB,EACvEV,EAAK,UAEoC,IAN1B,CAAC,SAAU,OAAQ,QAMhBzsB,QAAQusB,KAA2D,IAAtCC,EAAexsB,QAAQusB,IAAoBW,UAAUC,eAAiB,EACrHV,EAAK,OAEwC,IAV1B,CAAC,QAAS,QAAS,UAAW,SAU3BzsB,QAAQusB,GAC9BE,EAAK,UAEA,UAAUW,KAAKd,GACpBG,EAAK,UAEA,QAAQW,KAAKb,KAClBE,EAAK,SAGFA,GEtGC,KAAM,6EAGVL,EAASM,EAAYd,EAAGyB,KAAOzB,EAAGmB,UAClCx1B,EAAOq0B,EAAG0B,MACVjB,EAAgB,CACpB,CAEA,MAAO,CAACD,OAAQA,EAAQ70B,KAAMA,EAAM80B,cAAeA,EACvD,CC5BA,SAASkB,EAAsBC,GAG3B,IAqBIC,EAAWh5B,EArBTi5B,EAAY,SAACC,GACf,IAAMC,EAAU/5B,KAAKg6B,IAAIF,GACzB,OAAO95B,KAAKi6B,IAAIj6B,KAAKk6B,GAAK,EAAIJ,EAAM,GAAK95B,KAAKC,KAAK,EAAIk6B,EAAQJ,IAAY,EAAII,EAAQJ,GAAUI,EAAQ,EAC7G,EACMC,EAAY,SAACN,GACf,IAAMC,EAAU/5B,KAAKg6B,IAAIF,GACzB,OAAO95B,KAAKq6B,IAAIP,GAAO95B,KAAKs6B,KAAK,EAAIH,EAAQA,EAAQJ,EAAUA,EACnE,EAGMQ,EAAY,QAEZJ,EAAQn6B,KAAKs6B,KAAK,qBAClBE,EAAUx6B,KAAKk6B,GAAK,IAErBO,EAAyBd,EAAM,MAAxBe,EAAkBf,EAAM,MAAjBgB,EAAWhB,EAAM,QACpCgB,EAAUv4B,MAAMC,QAAQs4B,IAAYA,EAAQ,IAAMA,EAAQ,GAAKA,EAAQ,GAAKA,EAE5EF,GAASD,EAIT,IAAMI,EAAMf,EAHZa,GAASF,GAKT,GAAIp4B,MAAMC,QAAQs4B,GAAU,CACpB,8RAAiBA,EAAO,GAAvBE,EAAK,KAAEC,EAAK,KAEjBA,GAASN,EAET,IAAMO,EAAMlB,EAHZgB,GAASL,GAIHQ,EAAMnB,EAAUiB,GAChBG,EAAMb,EAAUS,GAChBK,EAAMd,EAAUU,GAEtBl6B,EAAIZ,KAAKS,IAAIw6B,EAAMC,GAAOl7B,KAAKS,IAAIs6B,EAAMC,GACzCpB,EAAIqB,GAAOr6B,EAAIZ,KAAKC,IAAI86B,EAAKn6B,GACjC,MAEQi6B,EAAQF,EAGNI,EAAMlB,EAFZgB,GAASL,GAGHS,EAAMb,EAAUS,GACtBj6B,EAAIZ,KAAKg6B,IAAIa,GACbjB,EAAIqB,GAAOr6B,EAAIZ,KAAKC,IAAI86B,EAAKn6B,IAGjC,IAAMu6B,EAAQZ,EAAYX,EAAI55B,KAAKC,IAAI26B,EAAKh6B,GAetCw6B,EAASjB,EAAQA,EACjBkB,EAASD,EAASA,EAClBE,EAASD,EAASD,EAClBG,EAASD,EAASF,EAalBI,EAAKJ,EAAS,EAAI,EAAIC,EAAS,GAAK,EAAIC,EAAS,IAAM,GAAKC,EAAS,KACrEE,EAAK,EAAIJ,EAAS,GAAK,GAAKC,EAAS,IAAM,IAAMC,EAAS,KAC1DG,EAAK,EAAIJ,EAAS,GAAK,GAAKC,EAAS,IACrCI,EAAK,KAAOJ,EAAS,MAiB3B,OAAO,SAAC34B,EAAWwE,EAAWuwB,GAE1B,OADAA,OAAgB1sB,IAAT0sB,EAAqB,CAACiE,SAAS,GAASjE,GACnCiE,SAjBarP,EAiBiB3pB,EAjBNi5B,EAiBSz0B,EAfvC00B,EADQ97B,KAAK+7B,MAAMxP,EAAG4O,EAAQU,GAChBj7B,EAAI65B,EAClBuB,EAAMh8B,KAAKi8B,MAAM1P,EAAG4O,EAAQU,GAAK77B,KAAKk8B,KAAKt7B,GAC3CD,EAAIX,KAAKC,IAAI+7B,GAAOzB,EAAYX,GAAI,EAAIh5B,GAExCu7B,EAAMn8B,KAAKk6B,GAAK,EAAI,EAAIl6B,KAAKo8B,KAAKz7B,GAClC07B,EAAWr8B,KAAKg6B,IAAI,EAAImC,GACxBG,EAAWt8B,KAAKq6B,IAAI,EAAI8B,GAIvB,CAACL,EAAMtB,GAFF2B,EAAME,GAAYb,EAAKc,GAAYb,EAAKa,GAAYZ,EAAKC,EAAKW,MAE7C9B,IA9Cb,SAACsB,EAAahC,GAC9BgC,GAAOtB,EAGP,IAAM75B,EAAIk5B,EAFVC,GAAOU,GAGDwB,EAAMzB,EAAYX,EAAI55B,KAAKC,IAAIU,EAAGC,GAClC27B,EAAQ37B,GAAKk7B,EAAMrB,GAIzB,MAAO,CAHGuB,EAAMh8B,KAAKg6B,IAAIuC,GACfpB,EAAQa,EAAMh8B,KAAKq6B,IAAIkC,GAGrC,CAwCsDC,CAAY55B,EAAGwE,GAjBzC,IAACmlB,EAAWsP,EAE9BC,EACAE,EACAr7B,EAEAw7B,EACAE,EACAC,CAUV,CACJ,CAwFC,iBAIG,WAAYG,EAAa3C,GACrB,GAAIv5B,MAAMk8B,IAAQl8B,MAAMu5B,GACpB,MAAM,IAAIj4B,MAAM,kCAA2B46B,EAAG,aAAK3C,EAAG,MAI1D,GAFAh7B,KAAK29B,KAAOA,EACZ39B,KAAKg7B,KAAOA,EACRh7B,KAAKg7B,IAAM,IAAMh7B,KAAKg7B,KAAO,GAC7B,MAAM,IAAIj4B,MAAM,4DAExB,CASJ,OAPW,YAAA66B,gBAAP,WACI,MAAO,CAACnQ,GA/CUkQ,EA+CU39B,KAAK29B,KA9C7B,IAAMA,GAAO,KA8CsBZ,GAvCrB/B,EAuCyCh7B,KAAKg7B,IAtC9DC,EAAU/5B,KAAKg6B,IAAIF,EAAM95B,KAAKk6B,GAAK,KACnC2B,GAAK,IAAO,GAAK77B,KAAKk6B,GAAKl6B,KAAKS,KAAK,EAAIs5B,IAAY,EAAIA,KAAc,IACtE/5B,KAAK+C,IAAI,EAAG/C,KAAKiD,KAAK,EAAG44B,MAHpC,IAA0B/B,EAChBC,EACA8B,EAVgBY,CAgDtB,EAEc,EAAAE,kBAAd,SAAgCpQ,EAAWsP,GACvC,OAAO,IAAIe,EA/CnB,SAA0BrQ,GACtB,OAAO,IAAMA,EAAI,GACrB,CA6C0BsQ,CAAiBtQ,GArC3C,SAA0BsP,GACtB,OAA+D,IAAxD77B,KAAKo8B,KAAKp8B,KAAK88B,MAAM,IAAU,IAAJjB,GAAW77B,KAAKk6B,GAAK,MAAcl6B,KAAKk6B,EAC9E,CAmC+C6C,CAAiBlB,GAC5D,EACJ,EAtBC,GCzNM,MAEMmB,EACX,qDACWC,EACX,kDAKWC,EACX,4CACWC,EACX,6CACWC,EACX,8DACWC,EAAoC,sCACpCC,EACX,8CAGWC,EAA0B,0BCfvC,SAASC,EAAYlK,GACnB,MAAO,CAACmK,KAAYhnB,IACXinB,EAAapK,EAAQmK,EAAShnB,EAEzC,CAGA,SAASknB,EAAkBrK,EAAQjD,GACjC,OAAOmN,EACLI,EACEtK,EACAjD,GACAxkB,IAEN,CAGO,MACLgF,MAAO6sB,EACPxJ,UAAW2J,EACXjyB,eAAgBkyB,EAChBjyB,IAAKkyB,EACLpyB,yBAA0BiyB,EAC1BrY,eAAgByY,EAChBvY,IAAKwY,EACLC,QAASC,GACTh1B,IAAKi1B,GACLC,eAAgBC,IACdC,QAGSC,GAAc7K,OAGd,QACX8K,GAAO,iBACP/J,GACAgK,SAAUC,GACVp+B,MAAOq+B,IACLnK,QAIFsC,SAAU8H,GACVC,QAASC,GACTxO,YAAayO,GACbC,IAAKC,IACHzW,OAGS0W,GAAezzB,QAE1BsP,OAAQokB,GACRxzB,eAAgByzB,GAChBC,OAAQC,GACRC,GAAIC,IACFN,GACEO,GAAkBP,GAAa99B,UAExBs+B,GAAqD,GAAkBC,iBAChFpC,EAA+B,GAAkBoC,kBACjD,CAACC,EAAQxP,KACT,GAAc,MAAVwP,EACF,MAAMC,GACJ3C,GAIJ,IAAI7J,EAAS6L,GAAaU,GAC1B,EAAG,CACD,MAAME,EAAanC,EAAgCtK,EAAQjD,GAC3D,QAAmBplB,IAAf80B,EACF,OAAIC,GAAaD,EAAY,OACpBA,EAAWl0B,SAGpB,CAEJ,OAAsD,QAA5CynB,EAAS0K,EAAsB1K,IAAkB,EAGlD0M,GAAkC,GAAeC,QAC5DzC,EAAYkC,GAAgBvnB,gBAGxB+nB,GAAc99B,MACP+9B,GAAeD,GAAY79B,QAClC+9B,GAAiBF,GAAY7+B,UAEtBg/B,GAAqB7C,EAAY4C,GAAehgB,MAEhDkgB,GAAqB9C,EAAY4C,GAAe9+B,MAEhDi/B,GAA+B/C,EAC1C4C,GAAeI,gBAEJC,GAAqCL,GAAevB,IAEpD6B,GAA+BlD,EAAYiD,KAItDngC,IAAKqgC,GACLvxB,MAAOwxB,IACL5gC,KAGS6gC,GAAoBv9B,YACpBw9B,GAAoBD,GAAkBt9B,OAC7Cw9B,GAAuBF,GAAkBx/B,UAElC2/B,GAA4BxD,EAAYuD,GAAqBx+B,OAE7D0+B,GAAoCtD,EAAkBoD,GAAsB,cAG5EG,GAAuD,oBAAtBC,kBAAoCA,kBAAoB,KAEzFC,GAA0CF,IAClDvD,EAAkBuD,GAAwB7/B,UAAW,cAK7CggC,GAAarD,EAAsBx6B,YAC1C89B,GAAiBD,GAAWE,KACrBC,GAAsBH,GAAWhgC,UACjCogC,GAA0CD,GAAoB3C,IAE9D6C,GAA0BlE,EAAYgE,GAAoBvnB,MAE1D0nB,GAA4BnE,EACvCgE,GAAoBI,QAGTC,GAA6BrE,EACxCgE,GAAoB3J,SAGTiK,GAAyBtE,EAAYgE,GAAoBr4B,KAEzD44B,GAA6BvE,EACxCgE,GAAoBQ,SAGTC,GAA0BzE,EAAYgE,GAAoBjN,MAE1D2N,GAAgC1E,EAC3CgE,GAAoBtV,YAGTiW,GAA0B3E,EAAYgE,GAAoBl/B,MAE1D8/B,GAA2B5E,EAAYgE,GAAoBj/B,OAE3D8/B,GAA8B7E,EACzCgE,GAAoB35B,UAGTy6B,GAA+B3E,EAC1C6D,GACA,UAGWe,GAAmC5E,EAC9C6D,GACA,cAGWgB,GAA+B7E,EAC1C6D,GACA,UAGWiB,GAA0C9E,EACrD6D,GACAxC,IAIW0D,GAAmBl/B,WAGnBm/B,GAAoB10B,YAEpB20B,GAAkB,IAAInsB,IAC1BinB,EAAa4D,GAAgBqB,GAAmBlsB,GAI5CosB,GAAoB10B,YAGpB20B,GAAqB10B,aAIrB20B,GAAyB/E,EAAsB,GAAGa,OAElDmE,GAA6BxF,EAAYuF,GAAuB9L,MAIhEgM,GAAyBzF,EAAY,YAAgB,CAAhB,GAAoBvG,MAGzDiM,GAAoBlF,EAAsB+E,IAGjDI,GAAoBC,SAAS/hC,UAWtBy+B,IAT6BtC,EACxC2F,GAAkBE,WAGsB7F,EACxC2F,GAAkBG,WAIW/qB,WAClBgrB,GAAmBC,WAOnBC,GAAgBC,QACvBC,GAAmBF,GAAcpiC,UAE1BuiC,GAAsBpG,EAAYmG,GAAiBE,KAEnDC,GAAsBtG,EAAYmG,GAAiBle,KAOnDse,GAAgB3P,QACvB4P,GAAmBD,GAAc1iC,UAE1B4iC,GAAsBzG,EAAYwG,GAAiBn4B,KAEnDq4B,GAAsB1G,EAAYwG,GAAiBve,KAEnD0e,GAAsB3G,EAAYwG,GAAiB76B,KC3O1Di7B,GAAiB,IAAIL,GAErBM,GAAwBjF,GAAa,KAAM,CAC/CnI,KAAM,CACJ92B,MAAO,WACL,MAAMmkC,EAAgBL,GAAoBG,GAAgBtlC,MAC1D,OAAOkkC,GAA2BsB,EACpC,GAGF,CAACzF,IAAiB,CAChB1+B,MAAO,WACL,OAAOrB,IACT,KAQG,SAASylC,GAAahkB,GAC3B,GACEA,EAAMse,MAAoB4B,IAC1BsC,GAAuB9L,OAAS+L,GAEhC,OAAOziB,EAGT,MAAMikB,EAAOpF,GAAaiF,IAE1B,OADAF,GAAoBC,GAAgBI,EAAM9D,GAA6BngB,IAChEikB,CACT,CAGA,MAAMC,GAAa,IAAIV,GAGjBW,GAA8BtF,GAAa8D,GAAmB,CAClEjM,KAAM,CACJ92B,MAAO,WACL,MAAMwkC,EAAYV,GAAoBQ,GAAY3lC,MAClD,OAAOmkC,GAAuB0B,EAChC,EACAC,UAAU,EACVnyB,cAAc,KAIlB,IAAK,MAAM4d,KAAO8N,GAAe4E,IAEnB,SAAR1S,GAKJgP,GAAqBqF,GAA6BrU,EAAKuN,EAAgCmF,GAAwB1S,IAO1G,SAAS,GAAKsU,GACnB,MAAM9iB,EAAQud,GAAasF,IAE3B,OADAP,GAAoBM,GAAY5iB,EAAO8iB,GAChC9iB,CACT,CClEO,SAAS,GAAS1hB,GACvB,OACa,OAAVA,GAAmC,iBAAVA,GACT,mBAAVA,CAEX,CAMO,SAAS0kC,GAAa1kC,GAC3B,OAAiB,OAAVA,GAAmC,iBAAVA,CAClC,CASO,SAAS2kC,GAAmB3kC,GACjC,YAA0D8K,IAAnDw3B,GAAwCtiC,EACjD,CAMO,SAAS4kC,GAAyB5kC,GACvC,MAAM6kC,EAAiBvC,GAAwCtiC,GAC/D,MACqB,kBAAnB6kC,GACmB,mBAAnBA,CAEJ,CAmBO,SAASC,GAAoB9kC,GAClC,GAAgC,OAA5B+gC,GACF,OAAO,EAGT,IAEE,OADAE,GAA2D,IACpD,CAGT,CAFE,MAAO/hC,GACP,OAAO,CACT,CACF,CAcO,SAAS6lC,GAAgB/kC,GAC9B,QAAKggC,GAAahgC,IAMhBA,EAAM0+B,MAAoB4B,IAC1BsC,GAAuB9L,OAAS+L,EAEpC,CAsBO,SAASmC,GAA8BhlC,GAC5C,GAAqB,iBAAVA,EACT,OAAO,EAGT,MAAMilC,GAAUjlC,EAChB,OAAIA,IAAUilC,EAAS,MAIlBzG,GAAeyG,IAIbA,IAAWxE,GAAUwE,EAC9B,CC9IO,MAAMC,GAAQnG,GAAU,oBCQzBoG,GAAqB,EAAI7G,GAgBzB8G,GAAkDC,qBAClDC,GAHkB,YAGqCH,GAqC7D,MAAMtmC,GAAS,IAAI6hC,GAAkB,GAC/B6E,GAAY,IAAI5C,GAAmB9jC,IACnC2mC,GAAa,IAAI9C,GAAkB7jC,IAEnC4mC,GAAY,IAAIjD,GAAkB,KAClCkD,GAAa,IAAInD,GAAiB,KAExC,IAAK,IAAI/iC,EAAI,EAAGA,EAAI,MAAOA,EAAG,CAC5B,MAAMN,EAAIM,EAAI,IAGVN,GAAK,IACPumC,GAAUjmC,GAAa,EACvBimC,GAAc,IAAJjmC,GAAa,MACvBkmC,GAAWlmC,GAAa,GACxBkmC,GAAe,IAAJlmC,GAAa,IAGfN,GAAK,IACdumC,GAAUjmC,GAAc,OAAYN,EAAI,GACxCumC,GAAc,IAAJjmC,GAAc,OAAYN,EAAI,GAAO,MAC/CwmC,GAAWlmC,IAAcN,EAAI,EAC7BwmC,GAAe,IAAJlmC,IAAcN,EAAI,GAGpBA,GAAK,IACdumC,GAAUjmC,GAAeN,EAAI,IAAO,GACpCumC,GAAc,IAAJjmC,GAAeN,EAAI,IAAO,GAAM,MAC1CwmC,GAAWlmC,GAAa,GACxBkmC,GAAe,IAAJlmC,GAAa,IAGfN,EAAI,KACbumC,GAAUjmC,GAAa,MACvBimC,GAAc,IAAJjmC,GAAa,MACvBkmC,GAAWlmC,GAAa,GACxBkmC,GAAe,IAAJlmC,GAAa,KAIxBimC,GAAUjmC,GAAa,MACvBimC,GAAc,IAAJjmC,GAAa,MACvBkmC,GAAWlmC,GAAa,GACxBkmC,GAAe,IAAJlmC,GAAa,GAE5B,CAOO,SAASmmC,GAAmBt+B,GACjCk+B,GAAU,GAnFL,SAAwBl+B,GAC7B,MAAM49B,GAAU59B,EAGhB,IAAKm3B,GAAeyG,IAAsB,IAAXA,EAC7B,OAAOA,EAIT,MAAMlJ,EAAOkJ,EAAS,EAAI,GAAK,EACzBW,EAAWpF,GAAQyE,GAGzB,GAAIW,EAzBoB,eA0BtB,OAAO7J,EA9BX,SAAyB10B,GACvB,OAAQA,EAAM89B,GAAsBA,EACtC,CA4BkBU,CAAgBD,EAAWR,IAAmDA,GAG9F,MAAMU,GAAQ,EAAIR,IAAsCM,EAClDt/B,EAASw/B,GAAQA,EAAOF,GAG9B,OAAIt/B,EAhCoB,OAgCUm4B,GAAYn4B,GACrCy1B,GAAOn8B,KAGTm8B,EAAOz1B,CAChB,CAyDiBy/B,CAAe1+B,GAC9B,MAAM7E,EAAIgjC,GAAW,GACftmC,EAAKsD,GAAK,GAAM,IACtB,OAAOijC,GAAUvmC,KAAW,QAAJsD,IAAmBkjC,GAAWxmC,GACxD,CAEA,MAAM8mC,GAAgB,IAAItD,GAAkB,MAC5C,IAAK,IAAIljC,EAAI,EAAGA,EAAI,OAAQA,EAAG,CAC7B,IAAIL,EAAIK,GAAK,GACTN,EAAI,EAGR,KAA4B,IAAhB,QAAJC,IACNA,IAAM,EACND,GAAK,QAGPC,IAAK,QACLD,GAAK,UAEL8mC,GAAcxmC,GAAKL,EAAID,CACzB,CACA,IAAK,IAAIM,EAAI,KAAMA,EAAI,OAAQA,EAC7BwmC,GAAcxmC,GAAK,WAAeA,EAAI,MAAS,IAGjD,MAAMymC,GAAgB,IAAIvD,GAAkB,IAC5C,IAAK,IAAIljC,EAAI,EAAGA,EAAI,KAAMA,EACxBymC,GAAczmC,GAAKA,GAAK,GAE1BymC,GAAc,IAAM,WACpBA,GAAc,IAAM,WACpB,IAAK,IAAIzmC,EAAI,GAAIA,EAAI,KAAMA,EACzBymC,GAAczmC,GAAK,YAAeA,EAAI,IAAO,IAE/CymC,GAAc,IAAM,WAEpB,MAAMC,GAAc,IAAI1D,GAAkB,IAC1C,IAAK,IAAIhjC,EAAI,EAAGA,EAAI,KAAMA,EACd,KAANA,IACF0mC,GAAY1mC,GAAK,MASd,SAAS2mC,GAAgBC,GAC9B,MAAM5mC,EAAI4mC,GAAe,GAEzB,OADAZ,GAAW,GAAKQ,GAAcE,GAAY1mC,IAAoB,KAAd4mC,IAAwBH,GAAczmC,GAC/E+lC,GAAU,EACnB,CCxJO,SAASc,GAAoBlT,GAClC,MAAM8R,GAAU9R,EAEhB,OAAIsL,GAAYwG,IAAsB,IAAXA,EAClB,EAGFxE,GAAUwE,EACnB,CAOO,SAASqB,GAASnT,GACvB,MAAM9xB,EAASglC,GAAoBlT,GACnC,OAAI9xB,EAAS,EACJ,EAGFA,EAASkzB,GACZlzB,EACAkzB,EACN,CAQO,SAASgS,GAAmBpT,EAAQqT,GACzC,IAAK,GAASrT,GACZ,MAAMwM,GNtD2B,yBMyDnC,MAAM7uB,EAAcqiB,EAAOriB,YAC3B,QAAoBhG,IAAhBgG,EACF,OAAO01B,EAET,IAAK,GAAS11B,GACZ,MAAM6uB,GAAgB7C,GAGxB,MAAM6B,EAAU7tB,EAAY8tB,IAC5B,OAAe,MAAXD,EACK6H,EAGF7H,CACT,CAOO,SAAS8H,GAAiB5nC,GAC/B,GAAIimC,GAAoBjmC,GACtB,OAAO,EAGT,IAEE,OADAgiC,GAA0BhiC,EAAQ,EAAG,IAC9B,CACe,CAAtB,MAAOK,GAAe,CAExB,OAAO,CACT,CASO,SAASwnC,GAAeta,EAAGsP,GAChC,MAAMiL,EAASlI,GAAYrS,GACrBwa,EAASnI,GAAY/C,GAE3B,GAAIiL,GAAUC,EACZ,OAAO,EAGT,GAAID,EACF,OAAO,EAGT,GAAIC,EACF,OAAQ,EAGV,GAAIxa,EAAIsP,EACN,OAAQ,EAGV,GAAItP,EAAIsP,EACN,OAAO,EAGT,GAAU,IAANtP,GAAiB,IAANsP,EAAS,CACtB,MAAMmL,EAAcvH,GAASlT,EAAG,GAC1B0a,EAAcxH,GAAS5D,EAAG,GAEhC,IAAKmL,GAAeC,EAClB,OAAQ,EAGV,GAAID,IAAgBC,EAClB,OAAO,CAEX,CAEA,OAAO,CACT,CCpDA,MAKMC,GAAoB,IAAInD,GAMvB,SAASoD,GAAe7T,GAC7B,OAAO4Q,GAAoBgD,GAAmB5T,KAC1CwN,GAAkBxN,IHtFjB,SAA8BA,GACnC,IAAKuR,GAAavR,GAChB,OAAO,EAGT,MAAMjyB,EAAY28B,EAAsB1K,GACxC,IAAKuR,GAAaxjC,GAChB,OAAO,EAGT,MAAM4P,EAAc5P,EAAU4P,YAC9B,QAAoBhG,IAAhBgG,EACF,OAAO,EAET,IAAK,GAASA,GACZ,MAAM6uB,GAAgB7C,GAGxB,OAAOgB,EAAWhtB,EAAao0B,GACjC,CGmEmC+B,CAAqB9T,EACxD,CAOA,SAAS+T,GAAmB/T,GAC1B,IAAK6T,GAAe7T,GAClB,MAAMwM,GP1GuC,oCO4GjD,CAQA,SAASwH,GAAwBhU,EAAQla,GACvC,MAAMmuB,EAAuBJ,GAAe7T,GACtCkU,EAAqB1C,GAAmBxR,GAE9C,IAAKiU,IAAyBC,EAC5B,MAAM1H,GPnHR,uDOsHA,GAAqB,iBAAV1mB,EAAoB,CAC7B,IAAI5X,EACJ,GAAI+lC,EAAsB,CACxB,MAAME,EAAmBC,GAAoBpU,GAC7C9xB,EAASghC,GAA6BiF,EACxC,MACEjmC,EAASghC,GAA6BlP,GAGxC,GAAI9xB,EAAS4X,EACX,MAAM0mB,GP9HV,2EOkIA,CAEA,GAAIiF,GAAyBzR,GAC3B,MAAMwM,GAAgB1C,EAE1B,CAOA,SAASsK,GAAoBC,GAC3B,MAAMF,EAAmBxD,GAAoBiD,GAAmBS,GAChE,QAAyB18B,IAArBw8B,EAAgC,CAGlC,GAAIb,GAFWtE,GAA6BmF,IAG1C,MAAM3H,GAAgB5C,GAGxB,OAAOuK,CACT,CAGA,MAAMzoC,EAA4B,EAAUA,OAE5C,GAAI4nC,GAAiB5nC,GACnB,MAAM8gC,GAAgB5C,GAGxB,MAAM0K,EAAS/J,EAAiBgK,GAAc,CAC5C7oC,EACmB,EAAU8oC,WACV,EAAUtmC,QAC5BmmC,EAAQ12B,aACX,OAAOgzB,GAAoBiD,GAAmBU,EAChD,CAMA,SAASG,GAAYN,GACnB,MAAMjmC,EAASghC,GAA6BiF,GAEtClnB,EAAQ,GACd,IAAK,IAAI5gB,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B4gB,EAAM5gB,GAAK2mC,GAAgBmB,EAAiB9nC,IAG9C,OAAO4gB,CACT,CAGA,MAAMynB,GAA6B,IAAIvE,GACvC,IAAK,MAAMpT,KAAO8N,GAAeqD,IAAsB,CAErD,GAAInR,IAAQ2O,GACV,SAGF,MAAMe,EAAanC,EAAgC4D,GAAqBnR,GACpE2P,GAAaD,EAAY,QAAoC,mBAAnBA,EAAWl0B,KACvD+3B,GAAoBoE,GAA4BjI,EAAWl0B,IAE/D,CAEA,MAAMwoB,GAAUkL,GAA2D,CACzE1zB,IAAG,CAACynB,EAAQjD,EAAKze,IACXuzB,GAA8B9U,IAAQ2P,GAAa1M,EAAQjD,GACtDiW,GAAgBvI,EAAWzK,EAAQjD,IAIxCyT,GAAoBkE,GAA4BrI,GAAgCrM,EAAQjD,IACnF0N,EAAWzK,EAAQjD,GAGrB0N,EAAWzK,EAAQjD,EAAKze,GAGjCzI,IAAG,CAACmqB,EAAQjD,EAAKlwB,EAAOyR,IAClBuzB,GAA8B9U,IAAQ2P,GAAa1M,EAAQjD,GACtD+N,GAAW9K,EAAQjD,EAAKyV,GAAmB3lC,IAG7Ci+B,GAAW9K,EAAQjD,EAAKlwB,EAAOyR,GAGxCjG,yBAAyB2nB,EAAQjD,GAC/B,GAAI8U,GAA8B9U,IAAQ2P,GAAa1M,EAAQjD,GAAM,CACnE,MAAM0P,EAAanC,EAAgCtK,EAAQjD,GAE3D,OADA0P,EAAW5/B,MAAQmmC,GAAgBvG,EAAW5/B,OACvC4/B,CACT,CAEA,OAAOnC,EAAgCtK,EAAQjD,EACjD,EAEAzkB,eAAc,CAAC0nB,EAAQjD,EAAK0P,IAExBoF,GAA8B9U,IAC9B2P,GAAa1M,EAAQjD,IACrB2P,GAAaD,EAAY,UAEzBA,EAAW5/B,MAAQ2lC,GAAmB/F,EAAW5/B,OAC1C29B,EAAsBxK,EAAQjD,EAAK0P,IAGrCjC,EAAsBxK,EAAQjD,EAAK0P,KAIvC,MAAM8H,GAEX52B,YAAYg3B,EAAOC,EAAaC,GAE9B,IAAIV,EAEJ,GAAIN,GAAec,GACjBR,EAAmB5J,EAAiB8E,GAAmB,CAAC+E,GAAoBO,qBACvE,IAAI,GAASA,KJxMxB,SAAuB9nC,GACrB,IAEE,OADA8gC,GAAqD,IAC9C,CAGT,CAFE,MAAO5hC,GACP,OAAO,CACT,CACF,CAwBS+oC,CADwBjoC,EI0KmB8nC,IJzKnBhD,GAAoB9kC,II6N/CsnC,EAAmB5J,EAAiB8E,GAAmB7xB,0BApDD,CAEtD,IAAIu3B,EAEA7mC,EAEJ,GAAIsjC,GAAmBmD,GAAQ,CAM7B,GALAI,EAAOJ,EACPzmC,EAASghC,GAA6ByF,GAIlCrB,GAFWtE,GAA6B2F,IAG1C,MAAMnI,GAAgB5C,GAGxB,GAAI6H,GAAyBkD,GAC3B,MAAMnI,GAAgB1C,GAGxB,MAAM7S,EAAO,IAAIsW,GArMC,EAsMhBr/B,GAEFimC,EAAmB5J,EAAiB8E,GAAmB,CAACpY,cAC1D,KAAO,CACL,MAAMwM,EAAWkR,EAAMpJ,IACvB,GAAgB,MAAZ9H,GAAwC,mBAAbA,EAC7B,MAAM+I,GAAgBzC,GAGR,MAAZtG,EAEEmO,GAAgB+C,IAClBI,EAAOJ,EACPzmC,EAASymC,EAAMzmC,SAGf6mC,EAAO,IAAsC,GAC7C7mC,EAAS6mC,EAAK7mC,SAGhB6mC,EAAyC,EACzC7mC,EAASilC,GAAS4B,EAAK7mC,SAEzBimC,EAAmB5J,EAAiB8E,GAAmB,CAACnhC,cAC1D,CAGA,IAAK,IAAI7B,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B8nC,EAAiB9nC,GAAKmmC,GAAmBuC,EAAK1oC,GAElD,CJ7NG,IAA0BQ,EIkO7B,MAAMsyB,EAA2B,IAAK+L,GAAYiJ,EAAkBpT,IAKpE,OAFA8P,GAAoB+C,GAAmBzU,EAAOgV,GAEvChV,CACT,CAMA6V,YAAYt9B,KAAQ2sB,GAClB,MAAM4Q,EAAczpC,KAEpB,IAAKm/B,EAAWsK,EAAalD,IAC3B,MAAMvF,GACJ9C,GAKJ,GAAIuL,IAAgBV,GAAc,CAChC,GAAIV,GAAen8B,IAAwB,IAAhB2sB,EAAKn2B,OAAc,CAC5C,MAAMimC,EAAmBC,GAAoB18B,GACvCw9B,EAAS,IAAI7F,GACjBL,GAA6BmF,GAC7BlF,GAAiCkF,GACjCjF,GAA6BiF,IAE/B,OAAO,IAAII,GACTvF,GAA6BF,GAAyBoG,IAE1D,CAEA,GAAoB,IAAhB7Q,EAAKn2B,OACP,OAAO,IAAIqmC,GACTvF,GACEM,GAAgB53B,EAAK86B,MAK3B,MAAM2C,EAAU9Q,EAAK,GACf8F,EAAU9F,EAAK,GAErB,OAAO,IAAIkQ,GACTvF,GACEM,GAAgB53B,GAAK,SAAU5E,KAAQqQ,GACrC,OAAOqvB,GACLpI,EAAa+K,EAAS3pC,KAAM,CAACsH,KAAQm+B,GAAa9tB,KAEtD,GAAGgnB,IAGT,CAGA,IAAI4K,EAEA7mC,EAEJ,MAAMu1B,EAAW/rB,EAAI6zB,IACrB,GAAgB,MAAZ9H,GAAwC,mBAAbA,EAC7B,MAAM+I,GAAgBzC,GAGxB,GAAgB,MAAZtG,EAEEmO,GAAgBl6B,IAClBq9B,EAAOr9B,EACPxJ,EAASwJ,EAAIxJ,QJhRdsjC,GADoC3kC,EIkRC6K,IJ3QxC7K,EAAM0+B,MAAoB4C,IAC1BsB,GAAuB9L,OAAS+L,II2Q5BqF,EAAOr9B,EACPxJ,EAASghC,GAA6Bx3B,KAGtCq9B,EAAO,IAAIr9B,GACXxJ,EAAS6mC,EAAK7mC,YAEX,CACL,GAAW,MAAPwJ,EACF,MAAM80B,GACJ3C,GAGJkL,EAAOlJ,GAAan0B,GACpBxJ,EAASilC,GAAS4B,EAAK7mC,OACzB,CJlSG,IAAoCrB,EIoSvC,MAAMogB,EAAQ,IAAIgoB,EAAY/mC,GAE9B,GAAoB,IAAhBm2B,EAAKn2B,OACP,IAAK,IAAI7B,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B4gB,EAAM5gB,GAA4B0oC,EAAK1oC,OAEpC,CACL,MAAM8oC,EAAU9Q,EAAK,GACf8F,EAAU9F,EAAK,GACrB,IAAK,IAAIh4B,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B4gB,EAAM5gB,GAAK+9B,EAAa+K,EAAShL,EAAS,CAAC4K,EAAK1oC,GAAIA,GAExD,CAEA,OAAO4gB,CACT,CAMA+nB,aAAaI,GACX,MAAMH,EAAczpC,KAEpB,IAAKm/B,EAAWsK,EAAalD,IAC3B,MAAMvF,GACJ9C,GAIJ,MAAMx7B,EAASknC,EAAMlnC,OAGrB,GAAI+mC,IAAgBV,GAAc,CAChC,MAAMpV,EAAQ,IAAIoV,GAAarmC,GACzBimC,EAAmBC,GAAoBjV,GAE7C,IAAK,IAAI9yB,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B8nC,EAAiB9nC,GAAKmmC,GAAmB4C,EAAM/oC,IAGjD,OAAO8yB,CACT,CAEA,MAAMlS,EAAQ,IAAIgoB,EAAY/mC,GAE9B,IAAK,IAAI7B,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B4gB,EAAM5gB,GAAK+oC,EAAM/oC,GAGnB,OAAO4gB,CACT,CAGAtG,OACEotB,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAE7C,OAAO4iC,GAAwB+F,EACjC,CAMA7F,SACEyF,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAE7C,OAAO,GAAK,YAEV,IAAK,MAAMsH,KAAOu7B,GAA0B8F,SACpCnB,GAAgBlgC,EAEzB,CALW,GAMd,CAMAyxB,UACEwP,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAE7C,OAAO,GAAK,YAEV,IAAK,MAAOa,EAAGyG,KAAQy7B,GAA2B4F,QACV,CAAE9nC,EAAG2mC,GAAgBlgC,GAE9D,CALW,GAMd,CAGAuiC,GAAG/a,GACDyZ,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtCmB,EAAgBpC,GAAoB5Y,GACpCxT,EAAIwuB,GAAiB,EAAIA,EAAgBpnC,EAASonC,EAExD,KAAIxuB,EAAI,GAAKA,GAAK5Y,GAIlB,OAAO8kC,GAAgBmB,EAAiBrtB,GAC1C,CAGAyuB,KAAKjb,EAAOztB,GACVknC,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtCmB,EAAgBpC,GAAoB5Y,GACpCxT,EAAIwuB,GAAiB,EAAIA,EAAgBpnC,EAASonC,EAElDxD,GAAUjlC,EAEhB,GAAIia,EAAI,GAAKA,GAAK5Y,EAChB,MAAM+hC,GAAiBhG,GAIzB,MAAMiL,EAAS,IAAI7F,GACjBL,GAA6BmF,GAC7BlF,GAAiCkF,GACjCjF,GAA6BiF,IAEzBG,EAAS,IAAIC,GACjBvF,GACEF,GAAyBoG,KAO7B,OAJcd,GAAoBE,GAE5BxtB,GAAK0rB,GAAmBV,GAEvBwC,CACT,CAGAznB,IAAIyO,KAAa+I,GACf0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAEf4Q,EAAc7B,GAAmBe,EAAkBI,IAGzD,GAAIU,IAAgBV,GAAc,CAChC,MAAMpV,EAAQ,IAAIoV,GAAarmC,GACzB+e,EAAQmnB,GAAoBjV,GAElC,IAAK,IAAI9yB,EAAI,EAAGA,EAAI6B,IAAU7B,EAAG,CAC/B,MAAMyG,EAAMkgC,GAAgBmB,EAAiB9nC,IAC7C4gB,EAAM5gB,GAAKmmC,GACTpI,EAAa9O,EAAU6O,EAAS,CAACr3B,EAAKzG,EAAGb,OAE7C,CAEA,OAAO2zB,CACT,CAEA,MAAMlS,EAAQ,IAAIgoB,EAAY/mC,GAC9B8lC,GAAwB/mB,EAAO/e,GAE/B,IAAK,IAAI7B,EAAI,EAAGA,EAAI6B,IAAU7B,EAAG,CAC/B,MAAMyG,EAAMkgC,GAAgBmB,EAAiB9nC,IAC7C4gB,EAAM5gB,GAAK+9B,EAAa9O,EAAU6O,EAAS,CAACr3B,EAAKzG,EAAGb,MACtD,CAEA,OAA0B,CAC5B,CAGAk2B,OAAOpG,KAAa+I,GAClB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAEfmR,EAAO,GACb,IAAK,IAAInpC,EAAI,EAAGA,EAAI6B,IAAU7B,EAAG,CAC/B,MAAMyG,EAAMkgC,GAAgBmB,EAAiB9nC,IACzC+9B,EAAa9O,EAAU6O,EAAS,CAACr3B,EAAKzG,EAAGb,QAC3CwhC,GAAmBwI,EAAM1iC,EAE7B,CAEA,MACMma,EAAQ,IADMmmB,GAAmBe,EAAkBI,IAC3C,CAAgBiB,GAG9B,OAFAxB,GAAwB/mB,GAEE,CAC5B,CAGAgS,OAAO3D,KAAa+I,GAClB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GAC5C,GAAe,IAAXjmC,GAAgC,IAAhBm2B,EAAKn2B,OACvB,MAAMs+B,GAAgBxC,GAGxB,IAAIyL,EAAajX,EACG,IAAhB6F,EAAKn2B,QACPunC,EAAczC,GAAgBmB,EAAiB,IAC/C3V,EAAQ,IAERiX,EAAcpR,EAAK,GACnB7F,EAAQ,GAGV,IAAK,IAAInyB,EAAImyB,EAAOnyB,EAAI6B,IAAU7B,EAChCopC,EAAcna,EACZma,EACAzC,GAAgBmB,EAAiB9nC,IACjCA,EACAb,MAIJ,OAAOiqC,CACT,CAGAC,YAAYpa,KAAa+I,GACvB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GAC5C,GAAe,IAAXjmC,GAAgC,IAAhBm2B,EAAKn2B,OACvB,MAAMs+B,GAAgBxC,GAGxB,IAAIyL,EAAajX,EACG,IAAhB6F,EAAKn2B,QACPunC,EAAczC,GAAgBmB,EAAiBjmC,EAAS,IACxDswB,EAAQtwB,EAAS,IAEjBunC,EAAcpR,EAAK,GACnB7F,EAAQtwB,EAAS,GAGnB,IAAK,IAAI7B,EAAImyB,EAAOnyB,GAAK,IAAKA,EAC5BopC,EAAcna,EACZma,EACAzC,GAAgBmB,EAAiB9nC,IACjCA,EACAb,MAIJ,OAAOiqC,CACT,CAGAv9B,QAAQojB,KAAa+I,GACnB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAErB,IAAK,IAAIh4B,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B+9B,EAAa9O,EAAU6O,EAAS,CAC9B6I,GAAgBmB,EAAiB9nC,IACjCA,EACAb,MAGN,CAGAmqC,KAAKra,KAAa+I,GAChB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAErB,IAAK,IAAIh4B,EAAI,EAAGA,EAAI6B,IAAU7B,EAAG,CAC/B,MAAMQ,EAAQmmC,GAAgBmB,EAAiB9nC,IAC/C,GAAI+9B,EAAa9O,EAAU6O,EAAS,CAACt9B,EAAOR,EAAGb,OAC7C,OAAOqB,CAEX,CACF,CAGA+oC,UAAUta,KAAa+I,GACrB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAErB,IAAK,IAAIh4B,EAAI,EAAGA,EAAI6B,IAAU7B,EAAG,CAC/B,MAAMQ,EAAQmmC,GAAgBmB,EAAiB9nC,IAC/C,GAAI+9B,EAAa9O,EAAU6O,EAAS,CAACt9B,EAAOR,EAAGb,OAC7C,OAAOa,CAEX,CAEA,OAAQ,CACV,CAGAwpC,SAASva,KAAa+I,GACpB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAErB,IAAK,IAAIh4B,EAAI6B,EAAS,EAAG7B,GAAK,IAAKA,EAAG,CACpC,MAAMQ,EAAQmmC,GAAgBmB,EAAiB9nC,IAC/C,GAAI+9B,EAAa9O,EAAU6O,EAAS,CAACt9B,EAAOR,EAAGb,OAC7C,OAAOqB,CAEX,CACF,CAGAipC,cAAcxa,KAAa+I,GACzB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAErB,IAAK,IAAIh4B,EAAI6B,EAAS,EAAG7B,GAAK,IAAKA,EAAG,CACpC,MAAMQ,EAAQmmC,GAAgBmB,EAAiB9nC,IAC/C,GAAI+9B,EAAa9O,EAAU6O,EAAS,CAACt9B,EAAOR,EAAGb,OAC7C,OAAOa,CAEX,CAEA,OAAQ,CACV,CAGA0pC,MAAMza,KAAa+I,GACjB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAErB,IAAK,IAAIh4B,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B,IACG+9B,EAAa9O,EAAU6O,EAAS,CAC/B6I,GAAgBmB,EAAiB9nC,IACjCA,EACAb,OAGF,OAAO,EAIX,OAAO,CACT,CAGAo4B,KAAKtI,KAAa+I,GAChB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GACtChK,EAAU9F,EAAK,GAErB,IAAK,IAAIh4B,EAAI,EAAGA,EAAI6B,IAAU7B,EAC5B,GACE+9B,EAAa9O,EAAU6O,EAAS,CAC9B6I,GAAgBmB,EAAiB9nC,IACjCA,EACAb,OAGF,OAAO,EAIX,OAAO,CACT,CAGAqK,IAAI8+B,KAAUtQ,GACZ0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvCwqC,EAAe9C,GAAoB7O,EAAK,IAC9C,GAAI2R,EAAe,EACjB,MAAM/F,GAAiBhG,GAGzB,GAAa,MAAT0K,EACF,MAAMnI,GACJ3C,GAIJ,GAAI4H,GAAyBkD,GAC3B,MAAMnI,GACJ1C,GAKJ,GAAI+J,GAAec,GAEjB,OAAOnG,GACL4F,GAAoB5oC,MACpB4oC,GAAoBO,GACpBqB,GAIJ,GAAIxE,GAAmBmD,IAEjBrB,GADWtE,GAA6B2F,IAE1C,MAAMnI,GAAgB5C,GAI1B,MAAMqM,EAAe/G,GAA6BiF,GAE5Cz8B,EAAMm0B,GAAa8I,GACnBuB,EAAY/C,GAASz7B,EAAIxJ,QAE/B,GAAI8nC,IAAiBvpC,KAAYypC,EAAYF,EAAeC,EAC1D,MAAMhG,GAAiBhG,GAGzB,IAAK,IAAI59B,EAAI,EAAGA,EAAI6pC,IAAa7pC,EAC/B8nC,EAAiB9nC,EAAI2pC,GAAgBxD,GAAmB96B,EAAIrL,GAEhE,CAGAqiC,UACEqF,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAI7C,OAFAijC,GAA2B0F,GAEpB3oC,IACT,CAGA2qC,aACEpC,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAGvC0pC,EAAS,IAAI7F,GACjBL,GAA6BmF,GAC7BlF,GAAiCkF,GACjCjF,GAA6BiF,IAEzBG,EAAS,IAAIC,GACjBvF,GACEF,GAAyBoG,KAIvBkB,EAAyBhC,GAAoBE,GAGnD,OAFA7F,GAA2B2H,GAEpB9B,CACT,CAGArT,KAAKp0B,KAAUw3B,GACb0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAQ7C,OANAmjC,GACEwF,EACA3B,GAAmB3lC,MAChBokC,GAAa5M,IAGX74B,IACT,CAGAotB,WAAWoH,EAAQxB,KAAU6F,GAC3B0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAI7C,OAFAojC,GAA8BuF,EAAkBnU,EAAQxB,KAAUyS,GAAa5M,IAExE74B,IACT,CAGAwD,KAAKqnC,GACHtC,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC8qC,OAA4B3+B,IAAd0+B,EAA0BA,EAAY9C,GAK1D,OAJA1E,GAAwBsF,GAAkB,CAAClb,EAAGsP,IACrC+N,EAAYtD,GAAgB/Z,GAAI+Z,GAAgBzK,MAGlD/8B,IACT,CAGA+qC,SAASF,GACPtC,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAE7C,QAAkBmM,IAAd0+B,GAAgD,mBAAdA,EACpC,MAAM,IAAI7J,GP94Bd,kEOg5BE,MAAM8J,OAA4B3+B,IAAd0+B,EAA0BA,EAAY9C,GAGpD2B,EAAS,IAAI7F,GACjBL,GAA6BmF,GAC7BlF,GAAiCkF,GACjCjF,GAA6BiF,IAEzBG,EAAS,IAAIC,GACjBvF,GACEF,GAAyBoG,KAIvBkB,EAAyBhC,GAAoBE,GAKnD,OAJAzF,GAAwBuH,GAAwB,CAACnd,EAAGsP,IAC3C+N,EAAYtD,GAAgB/Z,GAAI+Z,GAAgBzK,MAGlD+L,CACT,CAGArlC,MAAMuvB,EAAOprB,GACX2gC,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvCypC,EAAc7B,GAAmBe,EAAkBI,IAGzD,GAAIU,IAAgBV,GAAc,CAChC,MAAMW,EAAS,IAAI7F,GACjBL,GAA6BmF,GAC7BlF,GAAiCkF,GACjCjF,GAA6BiF,IAE/B,OAAO,IAAII,GACTvF,GACEF,GAAyBoG,EAAQ1W,EAAOprB,IAG9C,CAEA,MAAMlF,EAASghC,GAA6BiF,GACtCqC,EAAgBtD,GAAoB1U,GACpCiY,OAAsB9+B,IAARvE,EAAoBlF,EAASglC,GAAoB9/B,GAErE,IAAI0T,EASA4vB,EAPF5vB,EADE0vB,KAAkB,IAChB,EACKA,EAAgB,EACrBtoC,EAASsoC,EAAgB,EAAItoC,EAASsoC,EAAgB,EAEtDtoC,EAASsoC,EAAgBtoC,EAASsoC,EAKtCE,EADED,KAAgB,IACV,EACCA,EAAc,EACfvoC,EAASuoC,EAAc,EAAIvoC,EAASuoC,EAAc,EAElDvoC,EAASuoC,EAAcvoC,EAASuoC,EAG1C,MAAM3wB,EAAQ4wB,EAAQ5vB,EAAI,EAAI4vB,EAAQ5vB,EAAI,EACpCmG,EAAQ,IAAIgoB,EAAYnvB,GAG9B,GAFAkuB,GAAwB/mB,EAAOnH,GAEjB,IAAVA,EACF,OAAOmH,EAIT,GAAIqmB,GADWtE,GAA6BmF,IAE1C,MAAM3H,GAAgB5C,GAGxB,IAAIt8B,EAAI,EACR,KAAOwZ,EAAI4vB,GACTzpB,EAAM3f,GAAK0lC,GAAgBmB,EAAiBrtB,MAC1CA,IACAxZ,EAGJ,OAA0B,CAC5B,CAGAiH,SAASoiC,EAAOvjC,GACd2gC,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvCypC,EAAc7B,GAAmBe,EAAkBI,IAEnDW,EAAS,IAAI7F,GACjBL,GAA6BmF,GAC7BlF,GAAiCkF,GACjCjF,GAA6BiF,IAEzByC,EAAiB7H,GAA4BmG,EAAQyB,EAAOvjC,GAE5D6Z,EAAQ,IAAIgoB,EAChBjG,GAA6B4H,GAC7B3H,GAAiC2H,GACjC1H,GAA6B0H,IAI/B,OAFA5C,GAAwB/mB,GAEE,CAC5B,CAGApU,QAAQg+B,KAAYxS,GAClB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GAE5C,IAAIlG,EAAOiF,GAAoB7O,EAAK,IACpC,GAAI4J,IAASxhC,IACX,OAAQ,EAGNwhC,EAAO,IACTA,GAAQ//B,EACJ+/B,EAAO,IACTA,EAAO,IAIX,IAAK,IAAI5hC,EAAI4hC,EAAM5hC,EAAI6B,IAAU7B,EAC/B,GACEqgC,GAAayH,EAAkB9nC,IAC/B2mC,GAAgBmB,EAAiB9nC,MAAQwqC,EAEzC,OAAOxqC,EAIX,OAAQ,CACV,CAGA2M,YAAY69B,KAAYxS,GACtB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GAE5C,IAAIlG,EAAO5J,EAAKn2B,QAAU,EAAIglC,GAAoB7O,EAAK,IAAMn2B,EAAS,EACtE,GAAI+/B,KAAS,IACX,OAAQ,EAGNA,GAAQ,EACVA,EAAOA,EAAO//B,EAAS,EAAI+/B,EAAO//B,EAAS,EAE3C+/B,GAAQ//B,EAGV,IAAK,IAAI7B,EAAI4hC,EAAM5hC,GAAK,IAAKA,EAC3B,GACEqgC,GAAayH,EAAkB9nC,IAC/B2mC,GAAgBmB,EAAiB9nC,MAAQwqC,EAEzC,OAAOxqC,EAIX,OAAQ,CACV,CAGAuf,SAASirB,KAAYxS,GACnB0P,GAAmBvoC,MACnB,MAAM2oC,EAAmBC,GAAoB5oC,MAEvC0C,EAASghC,GAA6BiF,GAE5C,IAAIlG,EAAOiF,GAAoB7O,EAAK,IACpC,GAAI4J,IAASxhC,IACX,OAAO,EAGLwhC,EAAO,IACTA,GAAQ//B,EACJ+/B,EAAO,IACTA,EAAO,IAIX,MAAMhhC,EAAQq+B,GAAYuL,GAC1B,IAAK,IAAIxqC,EAAI4hC,EAAM5hC,EAAI6B,IAAU7B,EAAG,CAClC,MAAMQ,EAAQmmC,GAAgBmB,EAAiB9nC,IAE/C,GAAIY,GAASq+B,GAAYz+B,GACvB,OAAO,EAGT,GAAIA,IAAUgqC,EACZ,OAAO,CAEX,CAEA,OAAO,CACT,CAGA/pB,KAAKgqB,GACH/C,GAAmBvoC,MACnB,MAEMyhB,EAAQwnB,GAFWL,GAAoB5oC,OAI7C,OAAOuhC,GAAmB9f,EAAO6pB,EACnC,CAGA5J,kBAAkB7I,GAChB0P,GAAmBvoC,MACnB,MAEMyhB,EAAQwnB,GAFWL,GAAoB5oC,OAI7C,OAAOyhC,GAA6BhgB,KAAUgkB,GAAa5M,GAC7D,CAGKqH,UACH,GAAImI,GAAeroC,MACjB,MAA0B,cAE9B,EAIFugC,GAAqBwI,GAAc,oBAAqB,CACtD1nC,MA9jCwB,IAkkC1Bk/B,GAAqBwI,GAAcxC,GAAO,CAAC,GAG3C/G,GAAsBuJ,GAAcxG,IAEpC,MAAMgJ,GAAwBxC,GAAaxmC,UAG3Cg+B,GAAqBgL,GAAuB,oBAAqB,CAC/DlqC,MA3kCwB,IA+kC1Bk/B,GAAqBgL,GAAuBxL,GAAgB,CAC1D1+B,MAAOkqC,GAAsBzI,OAC7BgD,UAAU,EACVnyB,cAAc,IAGhB6rB,GAAsB+L,GAAuB7I,IC5pC7C,MAAM8I,GACFr5B,YAAY8mB,EAAIwS,EAAOC,EAAmBC,EAAWC,GACjD5rC,KAAKi5B,GAAKA,EACVj5B,KAAK0rC,kBAAoBA,EACzB1rC,KAAK6rC,MAbM,EAAC5S,EAAI6S,KACL,CACX,aAAgB7S,EAAG0B,MACnB,WAAc1B,EAAG8S,cACjB,YAAe9S,EAAG+S,eAClB,YAAe/S,EAAGgT,cAERH,EAAI35B,YAAYN,OAMbq6B,CAAWjT,EAAIwS,GAC5BzrC,KAAKmsC,QAAUV,EAAM/oC,OAASgpC,EAC9B1rC,KAAK2rC,UAAYA,EACjB,MAAMzrC,EAAS+4B,EAAGmT,eAClB,GAAe,OAAXlsC,EACA,KAAM,gCAEVF,KAAKE,OAASA,EACd+4B,EAAGoT,WAAWT,EAAa5rC,KAAKE,QAChC+4B,EAAGqT,WAAWV,EAAaH,EAAOxS,EAAGsT,YACzC,EAGJ,MAAMC,WAAkBhB,GAQpBr5B,YAAY8mB,EAAIwS,EAAOC,EAAmBC,GACtCt5B,MAAM4mB,EAAIwS,EAAOC,EAAmBC,EAAW1S,EAAGwT,aACtD,CAMAC,cAAcC,GACV3sC,KAAKi5B,GAAGoT,WAAWrsC,KAAKi5B,GAAGwT,aAAczsC,KAAKE,QAC9CF,KAAKi5B,GAAG2T,wBAAwBD,GAChC3sC,KAAKi5B,GAAG4T,oBAAoBF,EAAoB3sC,KAAK0rC,kBAAmB1rC,KAAK6rC,OAAO,EAAO,EAAG,EAClG,EClDJ,SAAS,GAAY5S,GACjB,OAAOA,EAAGC,aAAaD,EAAGE,SAAS/Y,SAAS,YAChD,CCsJA,MAAM0sB,GAYF36B,YAAY8mB,EAAI8T,GACZ/sC,KAAKi5B,GAAKA,EACV,MAAM+T,EAAU/T,EAAGgU,gBACnB,GAAgB,OAAZD,EACA,KAAM,iCAEVhtC,KAAKgtC,QAAUA,EACfhtC,KAAKktC,QAAU,KACfltC,KAAKmtC,aAAaJ,GAClB,MAAMK,OAAqCjhC,IAAxB4gC,EAAkB,WAAkB9T,EAAGoU,OAASN,EAAkB,WACrF9T,EAAGqU,cAAcrU,EAAGsU,WAAYtU,EAAGuU,eAAgBvU,EAAGwU,eACtDxU,EAAGqU,cAAcrU,EAAGsU,WAAYtU,EAAGyU,eAAgBzU,EAAGwU,eACtDxU,EAAGqU,cAAcrU,EAAGsU,WAAYtU,EAAG0U,mBAAoB1U,EAAGoU,QAC1DpU,EAAGqU,cAAcrU,EAAGsU,WAAYtU,EAAG2U,mBAAoBR,EAC3D,CAUAD,aAAaJ,GACT,MAAM9T,EAAKj5B,KAAKi5B,GAChBA,EAAG4U,YAAY5U,EAAGsU,WAAYvtC,KAAKgtC,SACnC,MAAMvT,EAAS,GAAYR,GA1LnC,SAAyBA,EAAI6U,EAAiBC,GAC1C,OAAQA,GACJ,KAAM9U,EAAgB,cAClB,OAAQ6U,GACJ,KAAM7U,EAAQ,MACd,KAAMA,EAAU,QAChB,KAAMA,EAAQ,MACd,KAAMA,EAAe,aAAG,OAAOA,EAAG+U,KAClC,KAAM/U,EAAU,QAAG,OAAOA,EAAGgV,aAC7B,KAAMhV,EAAO,KACb,KAAMA,EAAS,OACf,KAAMA,EAAQ,MAAG,OAAOA,EAAGiV,IAC3B,KAAMjV,EAAS,OAAG,OAAOA,EAAGkV,YAC5B,KAAMlV,EAAM,IAAG,OAAOA,EAAGmV,GACzB,KAAMnV,EAAQ,MAAG,OAAOA,EAAGoV,WAC3B,KAAMpV,EAAK,GAAG,OAAOA,EAAGqV,IACxB,KAAMrV,EAAO,KAAG,OAAOA,EAAGsV,YAC1B,KAAMtV,EAAO,KAAG,OAAOA,EAAG+U,KAC1B,KAAM/U,EAAM,IAAG,OAAOA,EAAGiV,IACzB,KAAMjV,EAAkB,gBAAG,OAAOA,EAAGuV,gBACrC,KAAMvV,EAAY,UAAG,OAAOA,EAAGmB,UAC/B,KAAMnB,EAAQ,MAAG,OAAOA,EAAGwV,MAE/B,MACJ,KAAMxV,EAAO,KACT,OAAQ6U,GACJ,KAAM7U,EAAc,YAAG,OAAOA,EAAG+U,KACjC,KAAM/U,EAAS,OAAG,OAAOA,EAAGgV,aAC5B,KAAMhV,EAAa,WAAG,OAAOA,EAAGiV,IAChC,KAAMjV,EAAQ,MAAG,OAAOA,EAAGkV,YAC3B,KAAMlV,EAAY,UAAG,OAAOA,EAAGmV,GAC/B,KAAMnV,EAAO,KAAG,OAAOA,EAAGoV,WAC1B,KAAMpV,EAAW,SAAG,OAAOA,EAAGqV,IAC9B,KAAMrV,EAAM,IAAG,OAAOA,EAAGsV,YAE7B,MACJ,KAAMtV,EAAyB,uBAC3B,OAAQ6U,GACJ,KAAM7U,EAAQ,MACd,KAAMA,EAAO,KAAG,OAAOA,EAAG+U,KAE9B,MACJ,KAAM/U,EAAyB,uBAC3B,OAAQ6U,GACJ,KAAM7U,EAAU,QAChB,KAAMA,EAAO,KAAG,OAAOA,EAAG+U,KAE9B,MACJ,KAAM/U,EAA8B,4BAChC,OAAQ6U,GACJ,KAAM7U,EAAW,SACjB,KAAMA,EAAU,QAAG,OAAOA,EAAG+U,KAC7B,KAAM/U,EAAa,WAAG,OAAOA,EAAGgV,aAEpC,MACJ,KAAMhV,EAAa,WACf,OAAQ6U,GACJ,KAAM7U,EAAU,QAAG,OAAOA,EAAG+U,KAC7B,KAAM/U,EAAS,OACf,KAAMA,EAAiB,eACvB,KAAMA,EAAU,QAAG,OAAOA,EAAGiV,IAC7B,KAAMjV,EAAQ,MAAG,OAAOA,EAAGmV,GAC3B,KAAMnV,EAAO,KAAG,OAAOA,EAAGqV,IAE9B,MACJ,KAAMrV,EAAQ,MACV,OAAQ6U,GACJ,KAAM7U,EAAU,QAChB,KAAMA,EAAU,QAAG,OAAOA,EAAG+U,KAC7B,KAAM/U,EAAS,OACf,KAAMA,EAAS,OACf,KAAMA,EAAiB,eACvB,KAAMA,EAAU,QAAG,OAAOA,EAAGiV,IAC7B,KAAMjV,EAAQ,MACd,KAAMA,EAAQ,MAAG,OAAOA,EAAGmV,GAC3B,KAAMnV,EAAO,KACb,KAAMA,EAAO,KAAG,OAAOA,EAAGqV,IAC1B,KAAMrV,EAAqB,mBAAG,OAAOA,EAAGyV,gBAE5C,MACJ,KAAMzV,EAAiB,eACnB,OAAQ6U,GACJ,KAAM7U,EAAW,SAAG,OAAOA,EAAGgV,aAC9B,KAAMhV,EAAU,QAAG,OAAOA,EAAGkV,YAC7B,KAAMlV,EAAS,OAAG,OAAOA,EAAGoV,WAC5B,KAAMpV,EAAQ,MAAG,OAAOA,EAAGsV,YAC3B,KAAMtV,EAAoB,kBAAG,OAAOA,EAAGyV,gBAE3C,MACJ,KAAMzV,EAAQ,MACV,OAAQ6U,GACJ,KAAM7U,EAAU,QAAG,OAAOA,EAAGgV,aAC7B,KAAMhV,EAAS,OAAG,OAAOA,EAAGkV,YAC5B,KAAMlV,EAAQ,MAAG,OAAOA,EAAGoV,WAC3B,KAAMpV,EAAO,KAAG,OAAOA,EAAGsV,YAE9B,MACJ,KAAMtV,EAAe,aACjB,OAAQ6U,GACJ,KAAM7U,EAAW,SAAG,OAAOA,EAAGgV,aAC9B,KAAMhV,EAAU,QAAG,OAAOA,EAAGkV,YAC7B,KAAMlV,EAAS,OAAG,OAAOA,EAAGoV,WAC5B,KAAMpV,EAAQ,MAAG,OAAOA,EAAGsV,YAC3B,KAAMtV,EAAoB,kBAC1B,KAAMA,EAAoB,kBAAG,OAAOA,EAAGyV,gBAE3C,MACJ,KAAMzV,EAAM,IACR,OAAQ6U,GACJ,KAAM7U,EAAU,QAAG,OAAOA,EAAGgV,aAC7B,KAAMhV,EAAS,OAAG,OAAOA,EAAGkV,YAC5B,KAAMlV,EAAQ,MAAG,OAAOA,EAAGoV,WAC3B,KAAMpV,EAAO,KAAG,OAAOA,EAAGsV,YAE9B,MACJ,KAAMtV,EAAuB,qBACzB,OAAQ6U,GACJ,KAAM7U,EAAS,OACf,KAAMA,EAAM,IAAG,OAAOA,EAAGiV,IAE7B,MACJ,KAAMjV,EAA+B,6BACjC,GAAQ6U,IACE7U,EAAiB,eAAG,OAAOA,EAAGiV,IAExC,MACJ,KAAMjV,EAA2B,yBAC7B,GAAQ6U,IACE7U,EAAU,QAAG,OAAOA,EAAGiV,IAEjC,MACJ,KAAMjV,EAAoB,kBACtB,GAAQ6U,IACE7U,EAAmB,iBAAG,OAAOA,EAAG0V,cAE1C,MACJ,KAAM1V,EAAiC,+BACnC,GAAQ6U,IACE7U,EAAoB,kBAAG,OAAOA,EAAG0V,cAE3C,MACJ,QACI,KAAM,4CAEd,KAAM,sDACV,CAyCyCC,CAAgB3V,EAAI8T,EAAc,OAAGA,EAAY,MAAKA,EAAc,OAC/FrT,OAA2CvtB,IAA3B4gC,EAAqB,cAAkB,EAAIA,EAAqB,cACtF9T,EAAG4V,YAAY5V,EAAG6V,iBAAkBpV,QACbvtB,IAAnB4gC,EAAa,YAAuC5gC,IAApB4gC,EAAc,OAC9C9T,EAAG8V,WAAW9V,EAAGsU,WAAY,EAAGR,EAAc,OAAGA,EAAa,MAAGA,EAAc,OAAG,EAAGtT,EAAQsT,EAAY,KAAGA,EAAa,OAGzH9T,EAAG8V,WAAW9V,EAAGsU,WAAY,EAAGR,EAAc,OAAGtT,EAAQsT,EAAY,KAAGA,EAAa,MAE7F,CAOAL,cAAcsC,EAAmBC,GAC7BjvC,KAAKkvC,SAASD,GACdjvC,KAAKi5B,GAAGkW,UAAUH,EAAmBC,EACzC,CAKAC,SAASD,GACLjvC,KAAKktC,QAAU+B,EACfjvC,KAAKi5B,GAAGmW,cAAcpvC,KAAKi5B,GAAGoW,SAAWrvC,KAAKktC,SAC9CltC,KAAKi5B,GAAG4U,YAAY7tC,KAAKi5B,GAAGsU,WAAYvtC,KAAKgtC,QACjD,CAIAsC,aACyB,OAAjBtvC,KAAKktC,UAGTltC,KAAKi5B,GAAGmW,cAAcpvC,KAAKi5B,GAAGoW,SAAWrvC,KAAKktC,SAC9CltC,KAAKi5B,GAAG4U,YAAY7tC,KAAKi5B,GAAGsU,WAAY,MACxCvtC,KAAKktC,QAAU,KACnB,CAIAqC,SACIvvC,KAAKi5B,GAAGuW,cAAcxvC,KAAKgtC,SAC3BhtC,KAAKktC,QAAU,IACnB,ECxOJ,SAASuC,GAAiBC,EAAY7W,GAElC,MAAM8W,OAA0BxjC,KADhC0sB,OAAgB1sB,IAAT0sB,EAAqB,CAAC,EAAIA,GACZ/4B,OAAuB,GAAK,IAAI+4B,EAAK/4B,QACpD8vC,EAAkB,GAClBC,EAAe,CAAC,EAChBC,EAAuBJ,EAAWK,MAAM,MAAM1uB,KAAIyF,IACpD,MAAMkpB,EAAelpB,EAAKkP,MAAM,yBACX,OAAjBga,GACAL,EAAQntC,KAAKwtC,EAAa,IAE9B,MAAMC,EAAcnpB,EAAKkP,MAAM,wBAC/B,GAAoB,OAAhBia,EAGA,OAFAL,EAAgBptC,KAAKytC,EAAY,IACjCJ,EAAaI,EAAY,KAAM,EACxB,GAEX,MAAMC,EAAeppB,EAAKkP,MAAM,yBAChC,GAAqB,OAAjBka,EAGA,OAFAN,EAAgBptC,KAAK0tC,EAAa,IAClCL,EAAaK,EAAa,KAAM,EACzB,GAGX,GAAmB,OADAppB,EAAKkP,MAAM,UACL,CACrB,MAAMma,EAAMP,EAAgBA,EAAgBltC,OAAS,GAErD,OADAmtC,EAAaM,IAAQN,EAAaM,GAC3B,EACX,CAEA,GAAoB,OADArpB,EAAKkP,MAAM,WACL,CACtB,MAAMma,EAAMP,EAAgBjtC,MAE5B,OADAktC,EAAaM,QAAOhkC,EACb,EACX,CAEA,OADkByjC,EAAgBvuB,KAAI8uB,GAAOR,EAAQvvB,SAAS+vB,IAAQN,EAAaM,KAAM1c,QAAO,CAAC3vB,EAAGwE,IAAMxE,GAAKwE,IAAG,GAC/Fwe,EAAO,EAAE,IAC7BxF,KAAK,MACR,GAAIsuB,EAAgBltC,OAAS,EACzB,KAAM,8CAEV,OAAOotC,CACX,CAiDA,MAAMM,GAQFj+B,YAAY8mB,EAAIoX,EAAmBC,EAAqBzX,GACpDwX,EAAoBZ,GAAiBY,EAAmBxX,GACxDyX,EAAsBb,GAAiBa,EAAqBzX,GAC5D74B,KAAKi5B,GAAKA,EACVj5B,KAAKuwC,KArDiB,EAACtX,EAAIoX,EAAmBG,KAElD,MAAMC,EAAexX,EAAGyX,aAAazX,EAAG0X,eACxC,GAAqB,OAAjBF,EACA,KAAM,iCAKV,GAHAxX,EAAG2X,aAAaH,EAAcJ,GAC9BpX,EAAG4X,cAAcJ,IACMxX,EAAG6X,mBAAmBL,EAAcxX,EAAG8X,gBACzC,CACjB,MAAMC,EAAiB/X,EAAGgY,iBAAiBR,GAC3C3iC,QAAQnM,IAAI,+BAAiCqvC,EACjD,CAEA,MAAME,EAAiBjY,EAAGyX,aAAazX,EAAGkY,iBAC1C,GAAuB,OAAnBD,EACA,KAAM,mCAKV,GAHAjY,EAAG2X,aAAaM,EAAgBV,GAChCvX,EAAG4X,cAAcK,IACQjY,EAAG6X,mBAAmBI,EAAgBjY,EAAG8X,gBAC3C,CACnB,MAAMC,EAAiB/X,EAAGgY,iBAAiBC,GAC3CpjC,QAAQnM,IAAI,iCAAmCqvC,EACnD,CAEA,MAAMI,EAAUnY,EAAGoY,gBACnB,GAAgB,OAAZD,EACA,KAAM,kCAMV,GAJAnY,EAAGqY,aAAaF,EAASX,GACzBxX,EAAGqY,aAAaF,EAASF,GACzBjY,EAAGsY,YAAYH,IACAnY,EAAGuY,oBAAoBJ,EAASnY,EAAGwY,aACrC,CACT,MAAMC,EAAUzY,EAAG0Y,kBAAkBP,GACrCtjC,QAAQnM,IAAI,eAAiB+vC,EACjC,CACA,OAAON,CAAO,EAeEQ,CAAsB3Y,EAAIoX,EAAmBC,GACzDtwC,KAAK6xC,WAAa,CAAC,EACnB7xC,KAAK8xC,SAAW,CAAC,EACjB9xC,KAAKmsC,QAAU,KACfnsC,KAAK2rC,UAAY,KACjB3rC,KAAK+xC,aAAe,KACpB,MAAMC,EAAmBlrB,IACrB,MAAMmrB,EAAcnrB,EAAKzZ,QAAQ,MAIjC,OAHI4kC,GAAe,IACfnrB,EAAOA,EAAKrjB,MAAM,EAAGwuC,IAElBnrB,CAAI,EAEfupB,EAAoBA,EAAkBN,MAAM,MAAM1uB,IAAI2wB,GAAiB1wB,KAAK,MAC5EgvB,EAAsBA,EAAoBP,MAAM,MAAM1uB,IAAI2wB,GAAiB1wB,KAAK,MAEhF,MAAMyY,EAAY,GAAY/5B,KAAKi5B,IACnC,IAAKc,IACAsW,EAAkBjwB,SAAS,oBAAsBkwB,EAAoBlwB,SAAS,oBAC/E,KAAM,yEAGV,IAAI8xB,EAAmBnY,EACnB,kDAAoD,0CACxD,IAAK,MAAM/D,KAASqa,EAAkB8B,SAASD,GAAmB,CAC9D,MAAOE,EAAYxtC,EAAMytC,GAAUrc,EACnCh2B,KAAK6xC,WAAWQ,GAAU,CAAE,KAAQztC,EAAM,SAAYq0B,EAAGqZ,kBAAkBtyC,KAAKuwC,KAAM8B,GAC1F,CACA,IAAK,MAAMrc,KAASqa,EAAkB8B,SAAS,yDAA0D,CACrG,MAAOC,EAAYxtC,EAAM2tC,GAAUvc,EAC7Bwc,EAAa5tC,EAAKmrC,MAAM,KACxB0C,EAAcxZ,EAAGyZ,mBAAmB1yC,KAAKuwC,KAAMgC,GACrD,GAAoB,OAAhBE,EACA,KAAM,qDAAqDF,KAE/DvyC,KAAK8xC,SAASS,GAAU,CAAE,KAAQC,EAAWA,EAAW9vC,OAAS,GAAI,SAAY+vC,EACrF,CACA,IAAK,MAAMzc,KAASsa,EAAoB6B,SAAS,yDAA0D,CACvG,MAAOC,EAAYxtC,EAAM2tC,GAAUvc,EAC7Bwc,EAAa5tC,EAAKmrC,MAAM,KACxB0C,EAAcxZ,EAAGyZ,mBAAmB1yC,KAAKuwC,KAAMgC,GACrD,GAAoB,OAAhBE,EACA,KAAM,uDAAuDF,KAEjEvyC,KAAK8xC,SAASS,GAAU,CAAE,KAAQC,EAAWA,EAAW9vC,OAAS,GAAI,SAAY+vC,EACrF,CACJ,CASAE,IAAIC,EAAmBC,EAAgBC,EAAUf,GAC7C/xC,KAAKi5B,GAAG8Z,WAAW/yC,KAAKuwC,WACHpkC,IAAjB4lC,GACAA,EAAahkC,OACb/N,KAAK+xC,aAAeA,GAGpB/xC,KAAK+xC,aAAe,KAExB/xC,KAAK2rC,UAAY,KACjB3rC,KAAKmsC,QAAU,UACWhgC,IAAtBymC,GACA5yC,KAAKgzC,eAAeJ,QAEDzmC,IAAnB0mC,GACA7yC,KAAKizC,YAAYJ,QAEJ1mC,IAAb2mC,GACA9yC,KAAKkzC,aAAaJ,EAE1B,CAKAE,eAAeJ,GACXhmC,OAAOmsB,QAAQ6Z,GAAmBlmC,SAAQ,EAAE2lC,EAAQnyC,MAChD,QAAgCiM,IAA5BnM,KAAK6xC,WAAWQ,GAEhB,YADAvkC,QAAQsP,KAAK,2CAA2Ci1B,0DAK5D,GAFAryC,KAAKmsC,QAA2B,OAAjBnsC,KAAKmsC,QAAmBjsC,EAAOisC,QAAUnsC,KAAKmsC,QAC7DnsC,KAAK2rC,UAA+B,OAAnB3rC,KAAK2rC,UAAqBzrC,EAAOyrC,UAAY3rC,KAAK2rC,UAC/D3rC,KAAK2rC,WAAazrC,EAAOyrC,UACzB,KAAM,6CAA6C0G,eAAoBryC,KAAK2rC,kBAAkBzrC,EAAOyrC,cAEzG,GAAI3rC,KAAKmsC,SAAWjsC,EAAOisC,QACvB,KAAM,sDAAsDkG,eAAoBryC,KAAKmsC,gBAAgBjsC,EAAOisC,YAEhH,MAAM,KAAEvnC,EAAI,SAAE+sB,GAAa3xB,KAAK6xC,WAAWQ,GAC3CnyC,EAAOwsC,cAAc/a,EAAS,GAEtC,CAKAshB,YAAYJ,GACRjmC,OAAOmsB,QAAQ8Z,GAAgBnmC,SAAQ,EAAE6lC,EAAQlxC,MAC7C,QAA8B8K,IAA1BnM,KAAK8xC,SAASS,GAEd,YADAzkC,QAAQsP,KAAK,wCAAwCm1B,wDAGzD,MAAM,KAAE3tC,EAAI,SAAE+sB,GAAa3xB,KAAK8xC,SAASS,GACzC,GAAa,QAAT3tC,GAAkC,iBAATvD,EACzBrB,KAAKi5B,GAAGkW,UAAUxd,EAAUtwB,QAE3B,GAAa,UAATuD,GAAoC,iBAATvD,EAChCrB,KAAKi5B,GAAGka,UAAUxhB,EAAUtwB,QAE3B,GAAa,UAATuD,GAAoBvD,aAAiBiC,MAC1CtD,KAAKi5B,GAAGma,WAAWzhB,EAAUtwB,QAE5B,GAAa,SAATuD,GAAmBvD,aAAiBiC,MACzCtD,KAAKi5B,GAAGoa,WAAW1hB,EAAUtwB,QAE5B,GAAa,SAATuD,GAAmBvD,aAAiBiC,MACzCtD,KAAKi5B,GAAGqa,WAAW3hB,EAAUtwB,QAE5B,GAAa,SAATuD,GAAmBvD,aAAiBiC,MACzCtD,KAAKi5B,GAAGsa,WAAW5hB,EAAUtwB,OAE5B,MAAa,SAATuD,GAAmBvD,aAAiBiC,OAIzC,KAAM,mDAAmDsB,iBAAoB2E,OAAOlI,MAHpFrB,KAAKi5B,GAAGua,iBAAiB7hB,GAAU,EAAOtwB,EAI9C,IAER,CAKA6xC,aAAaJ,GACTlmC,OAAOmsB,QAAQ+Z,GAAUpmC,SAAQ,EAAE+mC,EAAczG,GAAUiC,KACvD,QAAoC9iC,IAAhCnM,KAAK8xC,SAAS2B,GAEd,YADA3lC,QAAQsP,KAAK,0CAA0Cq2B,wDAG3D,MAAM,KAAE7uC,EAAI,SAAE+sB,GAAa3xB,KAAK8xC,SAAS2B,GACzCzG,EAAQN,cAAc/a,EAAUsd,EAAW,GAEnD,CAIAyE,OACI,GAAuB,OAAnB1zC,KAAK2rC,WAAuC,OAAjB3rC,KAAKmsC,QAChC,KAAM,gDAEgB,OAAtBnsC,KAAK+xC,aACL/xC,KAAKi5B,GAAG0a,WAAW3zC,KAAK2rC,UAAW,EAAG3rC,KAAKmsC,SAG3CnsC,KAAKi5B,GAAG2a,aAAa5zC,KAAK2rC,UAAW3rC,KAAK+xC,aAAa5F,QAASnsC,KAAK+xC,aAAalG,MAAO,EAEjG,ECtQJ,MAAMgI,GACF1hC,YAAY8mB,EAAI6a,GACZ9zC,KAAKi5B,GAAKA,EACVj5B,KAAK8zC,YAAcA,CACvB,CAKAC,MAAMC,GACF,MAAM/a,EAAKj5B,KAAKi5B,GAChB,GAAW,OAAPA,EACA,KAAM,iEAEVA,EAAGgb,cAAcD,GACjB/a,EAAGib,gBAAgBjb,EAAGkb,YAAan0C,KAAK8zC,aACxC7a,EAAG8a,MAAM9a,EAAGmb,iBAChB,CAQAC,SAAS5mB,EAAGsP,EAAG3Y,EAAOkwB,GAClB,MAAMrb,EAAKj5B,KAAKi5B,GAChB,GAAW,OAAPA,EACA,KAAM,iEAEVA,EAAGib,gBAAgBjb,EAAGkb,YAAan0C,KAAK8zC,aACxC7a,EAAGsb,SAAS9mB,EAAGsP,EAAG3Y,EAAOkwB,EAC7B,CASAE,cAAcxH,EAASvf,EAAGsP,EAAG3Y,EAAOkwB,GAChC,MAAMrb,EAAKj5B,KAAKi5B,GAChB,GAAW,OAAPA,EACA,KAAM,iEAEVA,EAAGib,gBAAgBjb,EAAGkb,YAAan0C,KAAK8zC,aACxC9G,EAAQkC,SAAS,GACjBjW,EAAGwb,eAAexb,EAAGsU,WAAY,EAAGtU,EAAG+U,KAAMvgB,EAAGsP,EAAG3Y,EAAOkwB,EAAQ,EACtE,EAqBW,IAff,cAA8BT,GAI1B1hC,cACIE,MAAM,KAAM,KAChB,CAKAqiC,kBAAkBzb,GACdj5B,KAAKi5B,GAAKA,CACd,GAwCJ,8/XCpFA,cAYI,WAAY0b,EAAkBC,EAA4B/b,GACtD,GAAI8b,EAAOjyC,QAAUkyC,EAAOlyC,OAAS,EACjC,KAAM,6CAAsCiyC,EAAOjyC,OAAM,mCAA2BkyC,EAAOlyC,OAAM,sBAAciyC,EAAOjyC,OAAS,EAAC,KAGpI,IAAMmyC,EAAiB,SAACvzC,GAAsB,MA7B5B,iBADTU,EA8B6CV,IA7BvB,UAAWU,GAAO,YAAaA,EA6BHV,EAAI,CAAC,MAASA,EAAG,QAAW,GA9B/F,IAAiBU,CA8BqC,EAE9ChC,KAAK20C,OAASA,EACd30C,KAAK40C,OAASA,EAAOvzB,KAAI,SAAA/f,GAAK,OAAAuzC,EAAevzC,EAAf,IAE9Bu3B,OAAgB1sB,IAAT0sB,EAAqB,CAAC,EAAIA,EACjC74B,KAAK80C,oBAAyC3oC,IAAxB0sB,EAAKic,eAA+B,KAAOD,EAAehc,EAAKic,gBACrF90C,KAAK+0C,qBAA2C5oC,IAAzB0sB,EAAKkc,gBAAgC,KAAOF,EAAehc,EAAKkc,gBAC3F,CA6GJ,OAxGW,YAAAC,UAAP,WACI,OAAOh1C,KAAK40C,OAAOvzB,KAAI,SAAAtgB,GAAK,OAAAA,EAAS,KAAT,GAChC,EAKO,YAAAk0C,aAAP,WACI,OAAOj1C,KAAK40C,OAAOvzB,KAAI,SAAAtgB,GAAK,OAAAA,EAAW,OAAX,GAChC,EAOO,YAAAm0C,YAAP,SAAmBj1B,GAKf,IAJA,IAAMk1B,EAAsB,GACtBC,EAAuB,GACvBvc,EAAwB,CAAC,EAEtBwc,EAAK,EAAIA,EAAKr1C,KAAK40C,OAAOlyC,OAAS2yC,IAAM,CAC9C,IAAMrB,EAAQh0C,KAAK40C,OAAOS,GACpBC,EAAct1C,KAAK20C,OAAOU,GAC1BE,EAAcv1C,KAAK20C,OAAOU,EAAK,GAE/BG,EAAcv1B,EAAKq1B,EAAaC,GAChCE,EAAY,CAACzB,MAAOA,EAAMA,MAAO0B,QAASF,GAC5CA,EAAc,IACVJ,EAAWA,EAAW1yC,OAAS,IAAM4yC,GACrCF,EAAW5yC,KAAK8yC,GACpBF,EAAW5yC,KAAK+yC,GAChBJ,EAAW3yC,KAAKizC,GAExB,CAEA,GAA6B,OAAzBz1C,KAAK+0C,gBAA0B,CAC/B,IAAMY,EAAoB11B,EAAKjgB,KAAK20C,OAAO,GAAI30C,KAAK20C,OAAO,IACvDgB,EAAoB,IACpB9c,EAAKkc,gBAAkB,CAACf,MAAOh0C,KAAK+0C,gBAAgBf,MAAO0B,QAASC,GAE5E,CAEA,GAA4B,OAAxB31C,KAAK80C,eAAyB,CAC9B,IAAMc,EAAmB31B,EAAKjgB,KAAK20C,OAAO30C,KAAK20C,OAAOjyC,OAAS,GAAI1C,KAAK20C,OAAO30C,KAAK20C,OAAOjyC,OAAS,IAChGkzC,EAAmB,IACnB/c,EAAKic,eAAiB,CAACd,MAAOh0C,KAAK80C,eAAed,MAAO0B,QAASE,GAE1E,CAEA,OAAO,IAAIC,EAAST,EAAYD,EAAYtc,EAChD,EAWc,EAAAid,UAAd,SAAwBC,EAAgBC,EAAgBC,EAAmBC,EAAmBC,GAW1F,YAVMC,EAAiB,GACjBzB,EAAmB,GAEnB0B,GAAcH,EAAYD,IAAcE,EAAW,GACnDG,GAAaJ,EAAYD,GAAa,EACtCM,EAA0C,CAAC,EAAG,EAAG,IAEjDC,EAAa5f,EAAQR,EAAQ2f,IAC7BU,EAAa7f,EAAQR,EAAQ4f,IAE1BU,EAAQ,EAAGA,EAAQP,EAAUO,IAAS,CAC3C,IAAMC,EAAQV,EAAYS,EAAQL,EAC9BjzC,OAAC,EAAErC,OAAC,EAAEmjB,OAAC,EACP0yB,OAAU,EACVD,EAAQL,GACRM,GAAcN,EAAYK,IAAUL,EAAYL,GAE/C7yC,GAAD,KAAY,CACRozC,EAAW,GACXD,EAAc,IAAMC,EAAW,GAAKD,EAAc,IAAMK,EACxDL,EAAc,IAAMC,EAAW,GAAKD,EAAc,IAAMK,GAAW,IAHrE,GAAE71C,EAAC,KAAEmjB,EAAC,MAKHyyB,GAASL,IACdM,GAAcD,EAAQL,IAAcJ,EAAYI,GAE/ClzC,GAAD,KAAY,CACRqzC,EAAW,GACXF,EAAc,IAAME,EAAW,GAAKF,EAAc,IAAMK,EACxDL,EAAc,IAAME,EAAW,GAAKF,EAAc,IAAMK,GAAW,IAHrE,GAAE71C,EAAC,KAAEmjB,EAAC,MAKZ,IAAM8vB,EAAQ3d,EAAQW,EAAQ,CAAC5zB,EAAGrC,EAAGmjB,KACrCkyB,EAAM5zC,KAAK,CAAC,MAASwxC,EAAO,QAAW9yC,KAAK+C,IAAI,EAAI2yC,EAAY,IACpE,CAEA,IAAK,IAAIC,EAAO,EAAGA,GAAQV,EAAUU,IAAQ,CACzC,IAAM,GAAcX,EAAYD,GAAaE,EAC7CxB,EAAOnyC,KAAKyzC,EAAYY,EAAO,EACnC,CAEA,OAAO,IAAIhB,EAASlB,EAAQyB,EAChC,EACJ,EAtIA,GAwIA,SAASU,GAAcC,EAA+CC,GAClE,IAAMb,EAAWY,EAAQnC,OAAOlyC,OAC1Bm2B,EAAwB,CAAC,EAS/B,MAPgB,QAAZme,GAAkC,QAAZA,IACtBne,EAAKic,eAAiBiC,EAAQnC,OAAOuB,EAAW,IAEpC,SAAZa,GAAmC,QAAZA,IACvBne,EAAKkc,gBAAkBgC,EAAQnC,OAAO,IAGnC,IAAIiB,GAASkB,EAAQpC,OAAQoC,EAAQnC,OAAQ/b,EACxD,CAGA,IAAMoe,GAAgBH,GAAc,GAAsB,QAAQ5B,aAAY,SAACgC,EAAMC,GAAS,OAAAj2C,KAAK+C,KAAKkzC,EAAO,IAAM,GAAI,EAA3B,IACxFC,GAAgBN,GAAc,GAAsB,QAAQ5B,aAAY,SAACgC,EAAMC,GAAS,OAAAj2C,KAAK+C,KAAKkzC,EAAO,IAAM,GAAI,EAA3B,IACxFE,GAAUP,GAAc,GAAoB,QAAQ5B,aAAY,SAACgC,EAAMC,GAAS,OAAAj2C,KAAK+C,IAAIkzC,EAAO,IAAO,EAAvB,IAChFG,GAASR,GAAc,GAAmB,QAC1CS,GAAUT,GAAc,GAAoB,QAC5CU,GAAuBV,GAAc,GAAoC,QA6B/E,SAASW,GAAiBC,GACtB,IAAMC,EAAa3rC,SAAS4rC,cAAc,UAC1CD,EAAWvzB,MAAQszB,EAAS9C,OAAOlyC,OACnCi1C,EAAWrD,OAAS,EAEpB,IAAIuD,EAAMF,EAAWG,WAAW,MAWhC,OATAJ,EAAS9C,OAAOloC,SAAQ,SAACqrC,EAAMrB,GAC3B,GAAY,OAARmB,EACA,KAAM,4DAGVA,EAAIG,UAAYD,EAAY,MAAI72C,KAAKu1B,MAAwB,IAAlBshB,EAAc,SAAS/hC,SAAS,IAC3E6hC,EAAII,SAASvB,EAAO,EAAG,EAAG,EAC9B,IAEOiB,CACX,CAEA,SAASO,GAAaR,GAKlB,IAFA,IACMS,EAAW,GACRt3C,EAAI,EAAGA,EAFC,IAEaA,IAC1Bs3C,EAAS31C,KAAK3B,EAAI,KAGtB,IAAM8zC,EAAS+C,EAAS/C,OAClByD,EAAQzD,EAAOjyC,OAAS,EAExB21C,EAAa1D,EAAOtzB,KAAI,SAACi3B,EAAKzB,GAAS,OAAAA,EAAOuB,CAAP,IACvCG,EAAY5D,EAAOtzB,KAAI,SAAAi3B,GAAO,OAACA,EAAM3D,EAAO,KAAOA,EAAOyD,GAASzD,EAAO,GAA5C,IAC9B6D,EAAgBL,EAAS92B,KAAI,SAAAi3B,GAC/B,IAAIG,EACJ,IAAKA,EAAO,IAAKF,EAAUE,IAASH,GAAOA,GAAOC,EAAUE,EAAO,IAAKA,KAExE,IAAMC,GAASJ,EAAMC,EAAUE,KAAUF,EAAUE,EAAO,GAAKF,EAAUE,IACzE,OAAOJ,EAAWI,IAAS,EAAIC,GAASL,EAAWI,EAAO,GAAKC,CACnE,IAEA,OAAO,IAAI3P,GAAayP,EAC5B,gSC1PMG,GAAsB,EAAQ,KAC9BC,GAAwB,EAAQ,KAStC,cAmBI,WAAoB3f,EAA8B4f,EAAoBhgB,GAClEA,OAAgB1sB,IAAT0sB,EAAqB,CAAC,EAAIA,EACjC74B,KAAKg0C,WAAuB7nC,IAAf0sB,EAAKmb,MAAsB,CAAC,EAAI,EAAI,EAAI,GAAMne,EAASgD,EAAKmb,OACzE,IAAM8E,OAAiC3sC,IAApB0sB,EAAKigB,WAA2B,EAAIjgB,EAAKigB,WAE5D94C,KAAKokB,MAAQ00B,EAEb,IAAMC,EAAiB,GA0BvB,GAxBA/4C,KAAKg5C,SAAW,IAAIxM,GAAUvT,EAAI4f,EAAmB,SAAG,EAAG5f,EAAGggB,gBAC9Dj5C,KAAKk5C,UAAY,IAAI1M,GAAUvT,EAAI4f,EAAoB,UAAG,EAAG5f,EAAGggB,qBAEvC9sC,IAArB0sC,EAASM,SACTn5C,KAAKG,OAAS,IAAIqsC,GAAUvT,EAAI4f,EAASM,QAAS,EAAGlgB,EAAGggB,gBACxDj5C,KAAKo5C,WAA8BjtC,IAAtB0sB,EAAKwgB,aAA6B,EAAIxgB,EAAKwgB,aACxDN,EAAev2C,KAAK,YAGpBxC,KAAKG,OAAS,KACdH,KAAKo5C,MAAQ,WAGKjtC,IAAlB0sC,EAAShhB,MACT73B,KAAKs5C,SAAW,IAAI9M,GAAUvT,EAAI4f,EAAShhB,KAAM,EAAGoB,EAAGggB,gBACvDF,EAAev2C,KAAK,SAGpBxC,KAAKs5C,SAAW,KAGpBt5C,KAAKu5C,UAAY,aACjBv5C,KAAKw5C,SAAW,kBAEMrtC,IAAlB0sC,EAASptB,KAAoB,CAE7BzrB,KAAKs5C,SAAW,IAAI9M,GAAUvT,EAAI4f,EAAShhB,KAAM,EAAGoB,EAAGggB,gBACvDF,EAAev2C,KAAK,QAEd,MAAmF+2B,EAAyBN,GAAI,GAAvGwgB,EAAa,SAASC,EAAW,OAAiBC,EAAoB,gBAEjFC,OAAS,OACKztC,IAAd0sB,EAAKghB,MACLD,EAAY,CAAC,OAAU3gB,EAAG+U,KAAM,KAAQ/U,EAAG8S,cAAe,MAAS,EAAG,OAAU,EAAG,MAAS,IAAIrnC,WAAW1E,KAAKg0C,OAAQ,WAAc/a,EAAG6gB,SACzI95C,KAAK+5C,UAAY,IAAIhR,GAAa,CAAC,EAAI,MAGvC6Q,EAAY,CAAC,OAAU3gB,EAAG+U,KAAM,KAAQ/U,EAAG8S,cAAe,MAAS0L,GAAiB5e,EAAKghB,MAAO,WAAc5gB,EAAG6gB,SACjH95C,KAAKu5C,SAAW1gB,EAAKghB,KAAKlF,OAAO,GACjC30C,KAAKw5C,SAAW3gB,EAAKghB,KAAKlF,OAAO9b,EAAKghB,KAAKlF,OAAOjyC,OAAS,GAE3D1C,KAAK+5C,UAAY7B,GAAarf,EAAKghB,OAGvC,IAAMG,EAAoB,CAAC,OAAUP,EAAe,KAAQC,EACxD,MAAS15C,KAAK+5C,UAAUr3C,OAAQ,OAAU,EAC1C,MAAS,IAAIyM,YAAYnP,KAAK+5C,UAAU75C,QACxC,WAAc+4B,EAAGoU,OAAQ,cAAiBsM,GAG9C35C,KAAKi6C,oBAAsB,IAAInN,GAAW7T,EAAI+gB,GAE9Ch6C,KAAKk6C,aAAe,IAAIpN,GAAW7T,EAAI2gB,GACvC55C,KAAKm6C,UAAY,IAAI3N,GAAUvT,EAAI4f,EAAe,KAAG,EAAG5f,EAAGggB,eAC/D,MAEIj5C,KAAKk6C,aAAe,KACpBl6C,KAAKm6C,UAAY,KACjBn6C,KAAK+5C,UAAY,KAGrB/5C,KAAKoxC,QAAU,IAAIhB,GAAWnX,EAAI0f,GAAqBC,GAAuB,CAAC94C,OAAQi5C,GAC3F,CAuDJ,OArDiB,EAAAqB,KAAb,SAAkBnhB,EAA8BohB,EAAmBxhB,upCAC7C,SAAMO,EAAakhB,cAAcD,WACnD,OADME,EAAY,SACX,CAAP,EAAO,IAAIC,EAAmBvhB,EAAIshB,EAAW1hB,ySAG1C,YAAA4hB,OAAP,SAAcxhB,EAA8ByhB,EAAiC,EAA2CC,EAAkBC,EAAqBC,OAAlF,UAACC,EAAS,KAAEC,EAAU,KAC3FL,aAAkBprC,eAClBorC,iMAAS,OAAIA,IAAM,IAEvB,IAAM7I,EAAwC,CAAC,MAAS7xC,KAAKg5C,SAAU,YAAeh5C,KAAKk5C,WACrFpH,EAA8C,CAChD,SAAY4I,EAAQ,aAAgB16C,KAAKokB,MAAO,YAAe02B,EAAW,aAAgBC,EAAY,cAAiBH,EAAa,SAAY,GAE9I9H,EAAuC,CAAC,EAE1B,OAAhB9yC,KAAKG,SACL0xC,EAAqB,SAAI7xC,KAAKG,OAC9B2xC,EAAyB,eAAI9xC,KAAKo5C,OAAS2B,EAAaD,IAGtC,OAAlB96C,KAAKs5C,WACLzH,EAAuB,WAAI7xC,KAAKs5C,SAChCxH,EAAiB,OAAI6I,GAGF,OAAnB36C,KAAKm6C,WAA4C,OAAtBn6C,KAAKk6C,cAChCrI,EAAmB,OAAI7xC,KAAKm6C,UAC5BrH,EAAyB,eAAI9yC,KAAKk6C,aAClCpH,EAAgC,sBAAI9yC,KAAKi6C,oBACzCnI,EAAqB,WAAI9xC,KAAKu5C,SAC9BzH,EAAqB,WAAI9xC,KAAKw5C,SAC9B1H,EAAoB,UAAI9xC,KAAK+5C,UAAUr3C,QAGvCovC,EAAkB,QAAI9xC,KAAKg0C,MAG/Bh0C,KAAKoxC,QAAQuB,IAAId,EAAYC,EAAUgB,GAEvC7Z,EAAG+hB,OAAO/hB,EAAGgiB,OACbhiB,EAAGiiB,kBAAkBjiB,EAAGkiB,UAAWliB,EAAGmiB,oBAAqBniB,EAAGoiB,IAAKpiB,EAAGmiB,qBAEtEp7C,KAAKoxC,QAAQsC,OAEb1zC,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,IACvCjzC,KAAKoxC,QAAQsC,OAEb1zC,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,IACvCjzC,KAAKoxC,QAAQsC,OAEb1zC,KAAKoxC,QAAQ6B,YAAY,CAAC,SAAY,IACtCjzC,KAAKoxC,QAAQsC,MACjB,EACJ,EAjJA,43CCTM4H,GAAyB,EAAQ,KACjCC,GAA2B,EAAQ,KACnCC,GAAgB,IAAIC,GAAM,SAACxiB,GAAiC,WAAImX,GAAWnX,EAAIqiB,GAAwBC,GAA3C,IA6ElE,SAASG,GAAYC,GACjB,IAAMC,EAAsBD,EAAWzlB,QAAO,SAAA2lB,GAAS,YAAe1vC,IAAf0vC,EAAMpwB,IAAN,IAEjDqwB,EAAmD,GASnD,ECnGK,SAAiBC,GAG5B,IAAIC,EAAO,EACPC,EAAW,EAEf,IAAK,MAAMC,KAAOH,EACdC,GAAQE,EAAIC,EAAID,EAAI94C,EACpB64C,EAAW/6C,KAAKiD,IAAI83C,EAAUC,EAAIC,GAItCJ,EAAMv4C,MAAK,CAACM,EAAGwE,IAAMA,EAAElF,EAAIU,EAAEV,IAI7B,MAGMg5C,EAAS,CAAC,CAAC3uB,EAAG,EAAGsP,EAAG,EAAGof,EAHVj7C,KAAKiD,IAAIjD,KAAKm7C,KAAKn7C,KAAKs6B,KAAKwgB,EAAO,MAAQC,GAGnB74C,EAAGnC,MAE/C,IAAImjB,EAAQ,EACRkwB,EAAS,EAEb,IAAK,MAAM4H,KAAOH,EAEd,IAAK,IAAIl7C,EAAIu7C,EAAO15C,OAAS,EAAG7B,GAAK,EAAGA,IAAK,CACzC,MAAMy7C,EAAQF,EAAOv7C,GAGrB,KAAIq7C,EAAIC,EAAIG,EAAMH,GAAKD,EAAI94C,EAAIk5C,EAAMl5C,GAArC,CAcA,GANA84C,EAAIzuB,EAAI6uB,EAAM7uB,EACdyuB,EAAInf,EAAIuf,EAAMvf,EAEduX,EAASpzC,KAAKiD,IAAImwC,EAAQ4H,EAAInf,EAAImf,EAAI94C,GACtCghB,EAAQljB,KAAKiD,IAAIigB,EAAO83B,EAAIzuB,EAAIyuB,EAAIC,GAEhCD,EAAIC,IAAMG,EAAMH,GAAKD,EAAI94C,IAAMk5C,EAAMl5C,EAAG,CAExC,MAAM8xB,EAAOknB,EAAOz5C,MAChB9B,EAAIu7C,EAAO15C,SAAQ05C,EAAOv7C,GAAKq0B,EAEvC,MAAWgnB,EAAI94C,IAAMk5C,EAAMl5C,GAKvBk5C,EAAM7uB,GAAKyuB,EAAIC,EACfG,EAAMH,GAAKD,EAAIC,GAERD,EAAIC,IAAMG,EAAMH,GAOvBG,EAAMvf,GAAKmf,EAAI94C,EACfk5C,EAAMl5C,GAAK84C,EAAI94C,IASfg5C,EAAO55C,KAAK,CACRirB,EAAG6uB,EAAM7uB,EAAIyuB,EAAIC,EACjBpf,EAAGuf,EAAMvf,EACTof,EAAGG,EAAMH,EAAID,EAAIC,EACjB/4C,EAAG84C,EAAI94C,IAEXk5C,EAAMvf,GAAKmf,EAAI94C,EACfk5C,EAAMl5C,GAAK84C,EAAI94C,GAEnB,KArDgD,CAsDpD,CAGJ,MAAO,CACH+4C,EAAG/3B,EACHhhB,EAAGkxC,EACH7e,KAAOumB,GAAQ53B,EAAQkwB,IAAY,EAE3C,CDO0CiI,CAPzBX,EAAoBv6B,KAAI,SAAAw6B,GACjC,IAAMW,EAAM,CAAC/uB,EAAG,EAAGsP,EAAG,EAAGof,EAAGN,EAAMz3B,MAAOhhB,EAAGy4C,EAAMvH,QAGlD,OAFAwH,EAAWt5C,KAAK,CAACq5C,MAAOA,EAAOW,IAAKA,IAE7BA,CACX,KAEUC,EAAS,IAAKC,EAAU,IAE5BC,EAAa,IAAIj4C,WAAW+3C,EAAYC,GACxCE,EAAgC,CAAC,EACvCd,EAAWpvC,SAAQ,SAAAmwC,GACR,IAAAL,EAAcK,EAAS,IAAlBhB,EAASgB,EAAS,MAE9BD,EAAOf,EAAMn1B,IAAM,CACfA,GAAIm1B,EAAMn1B,GAAItC,MAAOy3B,EAAMz3B,MAAOkwB,OAAQuH,EAAMvH,OAAQryC,KAAM45C,EAAM55C,KAAM66C,IAAKjB,EAAMiB,IACrFC,QAASP,EAAI/uB,EAAGuvB,QAASR,EAAIzf,EAAGkgB,QAASpB,EAAMoB,SAGnD,IAAK,IAAIp8C,EAAI,EAAGA,EAAIg7C,EAAMz3B,MAAOvjB,IAC7B,IAAK,IAAI6tB,EAAI,EAAGA,EAAImtB,EAAMvH,OAAQ5lB,IAAK,CACnC,IAAMwuB,EAAYr8C,EAAIg7C,EAAMz3B,MAAQsK,EAC9ByuB,EAAat8C,EAAI27C,EAAI/uB,EAAKgvB,GAAa/tB,EAAI8tB,EAAIzf,GACrD4f,EAAWQ,GAAatB,EAAMpwB,KAAKyxB,EACvC,CAER,IAEA,IAAME,EAAUR,EAAO,IAAI/xC,WAAW,IAChCwyC,EAAWD,EAAQ9I,OAAS8I,EAAQN,IACpCA,GAAOM,EAAQN,IAErB,MAAO,CAACQ,MAAOX,EAAYY,YAAad,EAAWe,aAAcd,EAAYW,SAAUA,EAAUP,IAAKA,EAAKW,WAAYb,EAC3H,CAEA,SAAec,GAAaC,uGACX,SAAM5qC,MAAM4qC,WACZ,SADA,SACWC,eACJ,SADP,SACkBC,sBAM/B,OANMC,EAAc,SA/FFryB,EAkGU,IAAI/mB,WAAWo5C,GAjGrCC,EAAY,SAACl2C,EAAag0C,EAAYv2C,GACxC,OAAQuC,GACJ,KAAK,EACDg0C,EAAMn1B,GAAKphB,EAAIC,aACf,MACJ,KAAK,EACDs2C,EAAMpwB,KAAOnmB,EAAIoE,YACjB,MACJ,KAAK,EACDmyC,EAAMz3B,MAAQ9e,EAAIC,aAAe,EACjC,MACJ,KAAK,EACDs2C,EAAMvH,OAAShvC,EAAIC,aAAe,EAClC,MACJ,KAAK,EACDs2C,EAAM55C,KAAOqD,EAAImD,cACjB,MACJ,KAAK,EACDozC,EAAMiB,IAAMx3C,EAAImD,cAChB,MACJ,KAAK,EACDozC,EAAMoB,QAAU33C,EAAIC,aAGhC,EAEMy4C,EAAgB,SAACn2C,EAAa+0C,EAAoBt3C,GACpD,GAAW,GAAPuC,EAAU,CACV,IAAMg0C,EAAQv2C,EAAIyC,YAAYg2C,EAAW,CAAC,GAC1CnB,EAAOp6C,KAAKq5C,EAChB,CACJ,EAkEMe,EA1DC,IAAI,KAAJ,CAAanxB,GAAMhkB,YANH,SAACI,EAAa+0C,EAAoBt3C,GAC1C,GAAPuC,GACAvC,EAAIyC,YAAYi2C,EAAepB,EAEvC,GAEqD,IA6D9C,CAAP,EAAOlB,GAAYkB,IArGvB,IAAsBnxB,EACZsyB,EA0BAC,QAgGV,OAAMC,GAAgE,CAClEC,iBAAkB,OAClBC,eAAgB,WAChBC,UAAW,GACXC,WAAY,CAAC,EAAG,EAAG,GACnBC,WAAY,CAAC,EAAG,EAAG,GACnBC,MAAM,GAGV,cASI,WAAoBtlB,EAA8BulB,EAAuBC,EAAuB5lB,GAC5F74B,KAAKoxC,QAAUoK,GAAc7iB,SAASM,GAEtCj5B,KAAK64B,KAAOD,EAAiBC,EAAMolB,IAEnC,IAKMlR,EAAQ,CACV,OANc/T,EAAYC,GACHA,EAAGylB,GAAKzlB,EAAGmB,UAKhB,KAJTnB,EAAG8S,cAIoB,MAAS0S,EAAWlB,YAAa,OAAUkB,EAAWjB,aACtF,MAASiB,EAAWnB,MAAO,cAJT,EAIyC,WAAcrkB,EAAGoU,QAGhFrtC,KAAKgtC,QAAU,IAAIF,GAAW7T,EAAI8T,GAElC,IAAMZ,EAA2E,EAAjEqS,EAAUn9B,KAAI,SAAAs9B,GAAM,OAAAA,EAAG5vC,KAAKrM,MAAR,IAAgB+wB,QAAO,SAAC3vB,EAAGwE,GAAM,OAAAxE,EAAIwE,CAAJ,GAAO,GAEtEs2C,EAAc,IAAItvC,aAAuB,EAAV68B,GAC/B0S,EAAc,IAAIvvC,aAAuB,EAAV68B,GAC/B2S,EAAU,IAAIxvC,aAAuB,EAAV68B,GAE7B4S,EAAS,EAAGC,EAAQ,EAAGC,EAAO,EAElCT,EAAU9xC,SAAQ,SAAAwyC,GAQd,IAPO,IAAAlkB,EAAkBkkB,EAAG,IAAhBliB,EAAakiB,EAAG,IAAXnwC,EAAQmwC,EAAG,KACtB5F,OAA4BntC,IAAjB+yC,EAAI5F,SAAyB,EAAI4F,EAAI5F,SAChD,EAA6B,IAAIxb,EAAOd,EAAKhC,GAAK4C,kBAA9CuhB,EAAQ,IAAKC,EAAQ,IAE3BC,EAAW,EACTC,EAAaN,EAEVn+C,EAAI,EAAGA,EAAIkO,EAAKrM,OAAQ7B,IAAK,CAClC,IAAM0+C,EAAaxwC,EAAKlE,WAAWhK,GAC7B48C,EAAagB,EAAWhB,WAAW8B,QAEtBpzC,IAAfsxC,GAKJ4B,GAAY5B,EAAWx7C,KAEvB28C,EAAYG,KAAYI,EAAUP,EAAYG,KAAYK,EAAUR,EAAYG,KAAYzF,EAC5FsF,EAAYG,KAAYI,EAAUP,EAAYG,KAAYK,EAAUR,EAAYG,KAAYzF,EAC5FsF,EAAYG,KAAYI,EAAUP,EAAYG,KAAYK,EAAUR,EAAYG,KAAYzF,EAC5FsF,EAAYG,KAAYI,EAAUP,EAAYG,KAAYK,EAAUR,EAAYG,KAAYzF,EAC5FsF,EAAYG,KAAYI,EAAUP,EAAYG,KAAYK,EAAUR,EAAYG,KAAYzF,EAC5FsF,EAAYG,KAAYI,EAAUP,EAAYG,KAAYK,EAAUR,EAAYG,KAAYzF,EAE5FuF,EAAYG,KAAWK,EAA6BR,EAAYG,KAAWP,EAAWpB,SAAWI,EAAWX,IAAMW,EAAWnJ,OAC7HuK,EAAYG,KAAWK,EAA6BR,EAAYG,KAAWP,EAAWpB,SAAWI,EAAWX,IAAMW,EAAWnJ,OAC7HuK,EAAYG,KAAWK,EAAW5B,EAAWr5B,MAAOy6B,EAAYG,KAAWP,EAAWpB,SAAWI,EAAWX,IAAMW,EAAWnJ,OAC7HuK,EAAYG,KAAWK,EAA6BR,EAAYG,KAAWP,EAAWpB,SAAWI,EAAWX,IAC5G+B,EAAYG,KAAWK,EAAW5B,EAAWr5B,MAAOy6B,EAAYG,KAAWP,EAAWpB,SAAWI,EAAWX,IAC5G+B,EAAYG,KAAWK,EAAW5B,EAAWr5B,MAAOy6B,EAAYG,KAAWP,EAAWpB,SAAWI,EAAWX,IAE5GgC,EAAQG,KAAUxB,EAAWV,QAAU0B,EAAWlB,YAAkCuB,EAAQG,MAAWxB,EAAWT,QAAUS,EAAWnJ,QAAUmK,EAAWjB,aAC5JsB,EAAQG,KAAUxB,EAAWV,QAAU0B,EAAWlB,YAAkCuB,EAAQG,MAAWxB,EAAWT,QAAUS,EAAWnJ,QAAUmK,EAAWjB,aAC5JsB,EAAQG,MAAWxB,EAAWV,QAAUU,EAAWr5B,OAASq6B,EAAWlB,YAAauB,EAAQG,MAAWxB,EAAWT,QAAUS,EAAWnJ,QAAUmK,EAAWjB,aAC5JsB,EAAQG,KAAUxB,EAAWV,QAAU0B,EAAWlB,YAAkCuB,EAAQG,KAAUxB,EAAWT,QAAUyB,EAAWjB,aACtIsB,EAAQG,MAAWxB,EAAWV,QAAUU,EAAWr5B,OAASq6B,EAAWlB,YAAauB,EAAQG,KAAUxB,EAAWT,QAAUyB,EAAWjB,aACtIsB,EAAQG,MAAWxB,EAAWV,QAAUU,EAAWr5B,OAASq6B,EAAWlB,YAAauB,EAAQG,KAAUxB,EAAWT,QAAUyB,EAAWjB,aAEtI6B,GAAY5B,EAAWR,QAAUQ,EAAWx7C,MA3BxCo9C,GAAY,CA4BpB,CAEA,GAA6B,UAAzBxmB,EAAKqlB,iBACL,IAASr9C,EAAIy+C,EAAYz+C,EAAIy+C,EAA2B,GAAdvwC,EAAKrM,OAAa7B,GAAK,EAC7Dg+C,EAAYh+C,IAAMw+C,EAAW,OAGhC,GAA6B,SAAzBxmB,EAAKqlB,iBACV,IAASr9C,EAAIy+C,EAAYz+C,EAAIy+C,EAA2B,GAAdvwC,EAAKrM,OAAa7B,GAAK,EAC7Dg+C,EAAYh+C,IAAMw+C,EAI1B,GAA2B,OAAvBxmB,EAAKslB,eACL,IAASt9C,EAAIy+C,EAAa,EAAGz+C,EAAIy+C,EAA2B,GAAdvwC,EAAKrM,OAAa7B,GAAK,EACjEg+C,EAAYh+C,IAAO49C,EAAWpB,SAAWoB,EAAW3B,SAGvD,GAA2B,UAAvBjkB,EAAKslB,eACV,IAASt9C,EAAIy+C,EAAa,EAAGz+C,EAAIy+C,EAA2B,GAAdvwC,EAAKrM,OAAa7B,GAAK,EACjEg+C,EAAYh+C,KAAO49C,EAAWpB,SAAWoB,EAAW3B,KAAO,CAGvE,IAEA98C,KAAKw/C,QAAU,IAAIhT,GAAUvT,EAAI2lB,EAAa,EAAG3lB,EAAGggB,gBACpDj5C,KAAKm5C,QAAU,IAAI3M,GAAUvT,EAAI4lB,EAAa,EAAG5lB,EAAGggB,gBACpDj5C,KAAKy/C,UAAY,IAAIjT,GAAUvT,EAAI6lB,EAAS,EAAG7lB,EAAGggB,eACtD,CAuDJ,OArDiB,EAAAmB,KAAb,SAAkBnhB,EAA8BulB,EAAuBkB,EAAuB7mB,qGAC5E,SAAM6kB,GAAagC,WACjC,OADMpC,EAAQ,SACP,CAAP,EAAO,IAAIqC,EAAe1mB,EAAIulB,EAAWlB,EAAOzkB,YAGpD,YAAA4hB,OAAA,SAAOxhB,EAA8ByhB,EAAkB,EAA2CC,OAA3C,+RAC7C7I,EAAgC,CAClC,SAAY4I,EAAQ,YAFqC,KAEX,aAFuB,KAEK,WAAcC,EAAU,YAAe36C,KAAK64B,KAAKulB,UAC3H,aAAgBp+C,KAAK64B,KAAKwlB,WAAY,aAAgBr+C,KAAK64B,KAAKylB,WAAY,SAAY,GAG5FxM,EAAoB,UAAI9xC,KAAK64B,KAAK0lB,KAAO,EAAI,EAE7Cv+C,KAAKoxC,QAAQuB,IACT,CAAC,MAAS3yC,KAAKw/C,QAAS,SAAYx/C,KAAKm5C,QAAS,YAAen5C,KAAKy/C,WACtE3N,EACA,CAAC,cAAiB9xC,KAAKgtC,UAG3B/T,EAAG+hB,OAAO/hB,EAAGgiB,OACbhiB,EAAGiiB,kBAAkBjiB,EAAGkiB,UAAWliB,EAAGmiB,oBAAqBniB,EAAGoiB,IAAKpiB,EAAGmiB,qBAEtEp7C,KAAKoxC,QAAQsC,OAET1zC,KAAK64B,KAAK0lB,OACVv+C,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,IACvCjzC,KAAKoxC,QAAQsC,QAGjB1zC,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,EAAG,UAAajzC,KAAK64B,KAAK0lB,KAAO,EAAI,IAC5Ev+C,KAAKoxC,QAAQsC,OAET1zC,KAAK64B,KAAK0lB,OACVv+C,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,IACvCjzC,KAAKoxC,QAAQsC,QAGjB1zC,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,EAAG,UAAajzC,KAAK64B,KAAK0lB,KAAO,EAAI,IAC5Ev+C,KAAKoxC,QAAQsC,OAET1zC,KAAK64B,KAAK0lB,OACVv+C,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,IACvCjzC,KAAKoxC,QAAQsC,QAGjB1zC,KAAKoxC,QAAQ6B,YAAY,CAAC,SAAY,EAAG,UAAajzC,KAAK64B,KAAK0lB,KAAO,EAAI,IAC3Ev+C,KAAKoxC,QAAQsC,OAET1zC,KAAK64B,KAAK0lB,OACVv+C,KAAKoxC,QAAQ6B,YAAY,CAAC,UAAa,IACvCjzC,KAAKoxC,QAAQsC,OAErB,EACJ,EA9JA,uxEE5HA,eAcI,WAAYkM,EAAkC/mB,GAC1C,QAAK,YAAE,YAEP,EAAK+mB,MAAQA,EAEb,EAAKC,SAAWhnB,EAAKgnB,UAAY,EACjC,EAAKlL,OAAS9b,EAAK8b,QAAU,GAE7B,EAAKX,MAAQnb,EAAKmb,OAAS,UAE3B,EAAK8L,SAAW,KAChB,EAAKC,SAAW,MACpB,CAyDJ,OAnFiF,QAgChE,YAAAC,YAAb,SAAyBJ,2GAErB,OADA5/C,KAAK4/C,MAAQA,EACS,OAAlB5/C,KAAK8/C,SAAmB,KAEtB7mB,EAAKj5B,KAAK8/C,SAAS7mB,GAEJ,GAAMj5B,KAAKigD,uBAKhB,OALVC,EAAe,SACf/F,EAAYvtC,OAAOk2B,OAAOod,GAAcC,OAAO9+B,KAAI,SAAA/f,GACrD,MAAO,CAAC03C,SAAU13C,EACtB,IAEA,EAAAtB,KAAgB,GAAMw6C,GAAmBJ,KAAKnhB,EAAIkhB,EAAW,CAACrB,WAAY,EAAG9E,MAAOh0C,KAAKg0C,uBAAzF,EAAK+L,SAAW,SAChB//C,KAAK8/C,SAASz+B,IAAI++B,6BAGT,YAAAH,YAAb,uGACW,SAAMjgD,KAAK4/C,MAAMK,YAAY,CAACJ,SAAU7/C,KAAK6/C,SAAUlL,OAAQ30C,KAAK20C,iBAA3E,MAAO,CAAP,EAAO,kBAOE,YAAA0L,MAAb,SAAmBh/B,EAAc4X,+FAM7B,OAJAj5B,KAAK8/C,SAAW,CACZ7mB,GAAIA,EAAI5X,IAAKA,GAGjB,GAAMrhB,KAAKggD,YAAYhgD,KAAK4/C,sBAA5B,qBAOG,YAAAnF,OAAP,SAAcxhB,EAA8ByhB,GACxC,GAAsB,OAAlB16C,KAAK8/C,UAAuC,OAAlB9/C,KAAK+/C,SAAnC,CACA,IAAMD,EAAW9/C,KAAK8/C,SAElBpF,aAAkBprC,eAClBorC,EAAS,SAAIA,IAAM,IAEvB,IAAM7iB,EAAOioB,EAASz+B,IAAIi/B,UACpBxF,EAAYgF,EAASz+B,IAAIk/B,YAAYn8B,MACrC22B,EAAa+E,EAASz+B,IAAIk/B,YAAYjM,OACtCkM,EAAUV,EAASz+B,IAAIo/B,aACvBC,EAAQZ,EAASz+B,IAAIs/B,WAE3B3gD,KAAK+/C,SAAStF,OAAOxhB,EAAIyhB,EAAQ,CAACI,EAAWC,GAAaljB,EAAM2oB,EAASE,EAZb,CAahE,EACJ,EAnFA,CAAiFE,GAqI3EC,GAA4D,CAC9DC,iBAAkB,EAClBC,UAAW,eACX3C,UAAW,GACX4C,kBAAmB,GACnB3C,WAAY,UACZC,WAAY,UACZC,MAAM,GAGV,eAMI,WAAYwB,EAAuClnB,GAC/C,QAAK,YAAE,YAEP,EAAKA,KAAOD,EAAiBC,EAAMgoB,IAEnC,EAAKd,SAAWA,EAChB,EAAKkB,gBAAkB,KACvB,EAAKnB,SAAW,MACpB,CA8IJ,OA5JuF,QAmBtE,YAAAE,YAAb,uLACI,OAAsB,OAAlBhgD,KAAK8/C,SAAmB,KAEtBz+B,EAAMrhB,KAAK8/C,SAASz+B,IACpB4X,EAAKj5B,KAAK8/C,SAAS7mB,GAEnBioB,EAAY7/B,EAAI8/B,WAEhBH,EAAmD,IAA/BhhD,KAAK64B,KAAKmoB,kBAA0BE,EAAUtE,OAAS58C,KAAK64B,KAAKmoB,kBACrFI,EAAWJ,EAAkBzzC,QAAQ,UAAW,SAASA,QAAQ,cAAevN,KAAK64B,KAAKkoB,WAE1FM,EAAwB,GAET,GAAMrhD,KAAK+/C,SAASE,uBAgEzC,IAhEMC,EAAe,UACfoB,EAAiB10C,OAAOuO,KAAK+kC,GAAc7+B,IAAIkgC,aACtC/9C,MAAK,SAACM,EAAGwE,GAAM,OAAAxE,EAAIwE,CAAJ,IAExBk5C,EAAengC,EAAIogC,aACnBC,EAAwB,IAAOxgD,KAAKC,IAAI,EAAG,EAAIqgD,GACjDG,EAAwB,KAAMC,EAAwB,KAAMC,EAAwB,KAAMC,EAAwB,KAEtHl1C,OAAOmsB,QAAQmnB,GAAcxzC,SAAQ,SAAC,iBAACiqC,EAAK,KAAEoJ,EAAQ,KAC5CgC,EAASR,WAAW5K,GAAS2K,EAAe,GAC5CU,EAAYrL,EAAM3gC,WAExB+pC,EAASrzC,SAAQ,SAAAu1C,GACb,IAAMC,EAAQD,EAAQ5gC,KAAI,SAAA6C,GACtB,IAAMi+B,GAAO,IAAIrkB,EAAA,WAAAA,EAAM,eAAI5Z,IAAC,MAAE0Z,kBAC9B,MAAO,CAACukB,EAAK10B,EAAG00B,EAAKplB,EACzB,IAEMqlB,EAAiB,GACvBF,EAAMx1C,SAAQ,SAACwX,EAAGrjB,GACd,GAAS,GAALA,EACAuhD,EAAK5/C,KAAK,OAET,CACD,IAAM6/C,EAASH,EAAMrhD,EAAI,GACnByhD,EAAYphD,KAAKi8B,MAAMklB,EAAO,GAAKn+B,EAAE,GAAIm+B,EAAO,GAAKn+B,EAAE,IAC7Dk+B,EAAK5/C,KAAK4/C,EAAKvhD,EAAI,GAAKyhD,EAC5B,CACJ,IAGA,IADA,IAAIC,EAAkB,EACbC,EAAQ,EAAGA,EAAQJ,EAAK1/C,OAAQ8/C,IAAS,CAC9C,IAAMC,EAAcf,GAAyBa,EAAmBR,EAAQ,EAAK,GAC7E,GAAIK,EAAKI,EAAQ,IAAMC,GAAeA,EAAcL,EAAKI,GAAQ,CAC7D,IAAME,EAAMT,EAAQO,EAAQ,GACtBG,EAAMV,EAAQO,GAEd9J,GAAS+J,EAAcL,EAAKI,EAAQ,KAAOJ,EAAKI,GAASJ,EAAKI,EAAQ,IACtEI,GAAU,EAAIlK,GAASgK,EAAI,GAAKhK,EAAQiK,EAAI,GAC5CE,GAAU,EAAInK,GAASgK,EAAI,GAAKhK,EAAQiK,EAAI,IAE5B,OAAlBd,GAA0Be,EAASf,KAAeA,EAAgBe,IAChD,OAAlBd,GAA0Bc,EAASd,KAAeA,EAAgBc,IAChD,OAAlBjB,GAA0BkB,EAASlB,KAAeA,EAAgBkB,IAChD,OAAlBjB,GAA0BiB,EAASjB,KAAeA,EAAgBiB,GAEtExB,EAAU7+C,KAAK,CAACw6B,IAAK4lB,EAAQ5nB,IAAK6nB,EAAQvJ,SAAUkI,EAAczyC,KAAMizC,IACxEO,GACJ,CACJ,CACJ,GACJ,IAEMO,EAAO,IAAI,GAAAz/C,OAAOg+C,GAAW,SAACv9C,EAAGwE,GAAM,OAAApH,KAAKi8B,MAAMr5B,EAAEk5B,IAAM10B,EAAE00B,IAAKl5B,EAAEk3B,IAAM1yB,EAAE0yB,IAApC,GAA0C,CAAC,MAAO,QAEzF,EAAmC,IAAI8C,EAAO+jB,EAAeF,GAAe/jB,kBAAxEmlB,EAAW,IAAKC,EAAW,IAC/B,EAAmC,IAAIllB,EAAOgkB,EAAeF,GAAehkB,kBAAxEqlB,EAAW,IAAKC,EAAW,IAC/BC,EAAkBF,EAAcF,EAChCK,EAAmBJ,EAAcE,EACjCG,EAAeniD,KAAKu1B,MAAM,EAAI0sB,EAAkBzB,GAChD4B,EAAepiD,KAAKu1B,MAAM,EAAI2sB,EAAmB1B,GACjD6B,EAAe,GACfC,EAAe,GAEZ/uC,EAAM,EAAGA,EAAM4uC,EAAc5uC,IAClC8uC,EAAa/gD,KAAKugD,EAAetuC,EAAM4uC,EAAgBF,GAG3D,IAASM,EAAM,EAAGA,EAAMH,EAAcG,IAClCD,EAAahhD,KAAK0gD,EAAeO,EAAMH,EAAgBF,GAI3D,IADIt7C,EAAO,EACF+vB,EAAO2pB,EAAe,EAAG3pB,GAAQ,EAAGA,IAAQ,CACjD,IAASpjB,EAAM,EAAGA,EAAM4uC,EAAc5uC,GAAO3M,EACzC,IAAS27C,EAAM,EAAGA,EAAMH,EAAcG,GAAO37C,EACnC47C,EAASH,EAAa9uC,GACtBkvC,EAASH,EAAaC,GACtBG,EAAK9lB,EAAOD,kBAAkB6lB,EAAQC,GAEtC,KAAgBb,EAAKl/C,QAAQ,CAACo5B,IAAK4mB,EAAGjmB,IAAK3C,IAAK4oB,EAAG5oB,IAAKse,SAAU,EAAGvqC,KAAM,IAAK,GAAG,GAAE,GAApF80C,EAAK,KAAM,KAClBA,EAAMvK,SAAWzhB,EAIzB/vB,GAAQ,CACZ,CAQuB,OANjBg8C,EAAiC,CACnC5F,iBAAkB,SAAUC,eAAgB,SAAUC,UAAWp+C,KAAK64B,KAAKulB,UAC3EG,KAAMv+C,KAAK64B,KAAK0lB,KAChBF,WAAYjoB,EAAQp2B,KAAK64B,KAAKwlB,YAAaC,WAAYloB,EAAQp2B,KAAK64B,KAAKylB,aAG7E,EAAAt+C,KAAuB,GAAM2/C,GAAevF,KAAKnhB,EAAIooB,EAAWD,EAAU0C,kBAA1E,EAAK7C,gBAAkB,SACvB5/B,EAAI++B,6BAOK,YAAAC,MAAb,SAAmBh/B,EAAc4X,+EAC7Bj5B,KAAK8/C,SAAW,CACZ7mB,GAAIA,EAAI5X,IAAKA,GAGjBrhB,KAAKggD,yBAOF,YAAAvF,OAAP,SAAcxhB,EAA8ByhB,GACxC,GAAsB,OAAlB16C,KAAK8/C,UAA8C,OAAzB9/C,KAAKihD,gBAAnC,CACA,IAAMnB,EAAW9/C,KAAK8/C,SAEhBhF,EAAYgF,EAASz+B,IAAIk/B,YAAYn8B,MACrC22B,EAAa+E,EAASz+B,IAAIk/B,YAAYjM,OACtCqG,EAAWmF,EAASz+B,IAAIi/B,UAE9BtgD,KAAKihD,gBAAgBxG,OAAOxhB,EAAIyhB,EAAQ,CAACI,EAAWC,GAAaJ,EAPE,CAQvE,EACJ,EA5JA,CAAuFiG,GA8JvF,+0DC/UMmD,GAAgC,EAAQ,KACxCC,GAAkC,EAAQ,KAmChD,eAaI,WAAYpE,EAAkC/mB,GAC1C,QAAK,YAAE,YAEP,EAAK+mB,MAAQA,EACb,EAAK/F,KAAOhhB,EAAKghB,KACjB,EAAKnE,QAAU7c,EAAK6c,SAAW,EAE/B,EAAKiC,WAAaF,GAAiB,EAAKoC,MACxC,EAAKE,UAAY7B,GAAa,EAAK2B,MAEnC,EAAKiG,SAAW,KAChB,EAAKmE,aAAe,KACpB,EAAKC,iBAAmB,KACxB,EAAKC,gBAAkB,MAC3B,CA4FJ,OAvH2F,QA6B1E,YAAAnE,YAAb,SAAyBJ,4FAGrB,OAFA5/C,KAAK4/C,MAAQA,EAES,OAAlB5/C,KAAK8/C,WAEH7mB,EAAKj5B,KAAK8/C,SAAS7mB,GACnB5X,EAAMrhB,KAAK8/C,SAASz+B,IAEpB+iC,EAAWpkD,KAAK4/C,MAAMyE,iBACtB,EAAgC9qB,EAAyBN,IAAMmrB,aAAoB90C,eAAlFmqB,EAAM,SAAE70B,EAAI,OAAE80B,EAAa,gBAE5B4qB,EAAa,CAAC,OAAU7qB,EAAQ,KAAQ70B,EAC1C,MAAS5E,KAAK4/C,MAAM2E,KAAKC,GAAI,OAAUxkD,KAAK4/C,MAAM2E,KAAKE,GAAI,MAASL,EACpE,WAAcpkD,KAAKkkD,iBAAkB,cAAiBxqB,GAGhC,OAAtB15B,KAAKikD,aACLjkD,KAAKikD,aAAe,IAAInX,GAAW7T,EAAIqrB,GAGvCtkD,KAAKikD,aAAa9W,aAAamX,GAGnCjjC,EAAI++B,kBApBwB,WAuBnB,YAAAC,MAAb,SAAmBh/B,EAAc4X,+HAG7B,GAA8B,OAA1Bj5B,KAAKkkD,kBAAsD,OAAzBlkD,KAAKmkD,gBACvC,KAAM,+CAK+C,OAFnD/S,EAAU,IAAIhB,GAAWnX,EAAI8qB,GAA+BC,IAET,GAAMhkD,KAAK4/C,MAAM2E,KAAKG,cAAczrB,kBAAvF,EAAmD,SAAxC0rB,EAAS,WAAaC,EAAc,YAC/C5L,EAAW2L,EACXlF,EAAYmF,EAEZjN,EAAa,CAAC,OAAU1e,EAAG+U,KAAM,KAAQ/U,EAAG8S,cAAe,MAAS/rC,KAAK23C,WAAY,WAAc33C,KAAKmkD,iBACxGU,EAAe,IAAI/X,GAAW7T,EAAI0e,GAElC,EAAmFpe,EAAyBN,GAAI,GAAvGwgB,EAAa,SAASC,EAAW,OAAiBC,EAAoB,gBAE/EK,EAAoB,CAAC,OAAUP,EAAe,KAAQC,EACxD,MAAS15C,KAAK+5C,UAAUr3C,OAAQ,OAAU,EAC1C,MAAS,IAAIyM,YAAYnP,KAAK+5C,UAAU75C,QACxC,WAAc+4B,EAAGoU,OAAQ,cAAiBsM,GAGxCM,EAAsB,IAAInN,GAAW7T,EAAI+gB,GAC/Ch6C,KAAK8/C,SAAW,CACZ7mB,GAAIA,EAAI5X,IAAKA,EAAK+vB,QAASA,EAAS4H,SAAUA,EAAUyG,UAAWA,EACnEoF,aAAcA,EAAc5K,oBAAqBA,GAGrDj6C,KAAKggD,YAAYhgD,KAAK4/C,mBAGnB,YAAAnF,OAAP,SAAcxhB,EAA8ByhB,GACxC,GAAsB,OAAlB16C,KAAK8/C,UAA2C,OAAtB9/C,KAAKikD,aAAnC,CACA,IAAMnE,EAAW9/C,KAAK8/C,SAElBpF,aAAkBprC,eAClBorC,iMAAS,4RAAIA,IAAM,IAEvB,IAAM3F,EAAgD,OAA9B/0C,KAAK65C,KAAK9E,gBAA2B,CAAC,EAAG,EAAG,EAAG,GAAK3e,EAAQp2B,KAAK65C,KAAK9E,gBAAgBf,OAAO1zB,OAAOtgB,KAAK65C,KAAK9E,gBAAgBW,SAChJZ,EAA8C,OAA7B90C,KAAK65C,KAAK/E,eAA0B,CAAC,EAAG,EAAG,EAAG,GAAK1e,EAAQp2B,KAAK65C,KAAK/E,eAAed,OAAO1zB,OAAOtgB,KAAK65C,KAAK/E,eAAeY,SAElJoK,EAAS1O,QAAQuB,IACb,CAAC,MAASmN,EAAS9G,SAAU,YAAe8G,EAASL,WACrD,CAAC,WAAcz/C,KAAK65C,KAAKlF,OAAO,GAAI,WAAc30C,KAAK65C,KAAKlF,OAAO30C,KAAK65C,KAAKlF,OAAOjyC,OAAS,GAAI,SAAYg4C,EAAQ,UAAa16C,KAAK01C,QACtI,UAAa11C,KAAK+5C,UAAUr3C,OAAQ,kBAAqBqyC,EAAiB,iBAAoBD,EAAgB,SAAY,GAC3H,CAAC,eAAkB90C,KAAKikD,aAAc,eAAkBnE,EAAS+E,aAAc,sBAAyB/E,EAAS7F,sBAGrHhhB,EAAG+hB,OAAO/hB,EAAGgiB,OACbhiB,EAAGiiB,kBAAkBjiB,EAAGkiB,UAAWliB,EAAGmiB,oBAAqBniB,EAAGoiB,IAAKpiB,EAAGmiB,qBAEtE0E,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,UAAa,IAC3C6M,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,UAAa,IAC3C6M,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,SAAY,IAC1C6M,EAAS1O,QAAQsC,MA5B+C,CA6BpE,EACJ,EAvHA,CAA2FkN,GA+H3F,eAOI,WAAYhB,EAAkC/mB,GAC1C,SAAK,UAAC+mB,EAAO/mB,IAAK,IACtB,CA2BJ,OApCgF,QAe/D,YAAAmnB,YAAb,SAAyBJ,+FACrB,SAAM,YAAMI,YAAW,UAACJ,kBAAxB,qBAOS,YAAAS,MAAb,SAAmBh/B,EAAc4X,+FAG7B,OAFAj5B,KAAKkkD,iBAAmBjrB,EAAG6gB,QAC3B95C,KAAKmkD,gBAAkBlrB,EAAGoU,OAC1B,GAAM,YAAMgT,MAAK,UAACh/B,EAAK4X,kBAAvB,qBAOG,YAAAwhB,OAAP,SAAcxhB,EAA8ByhB,GACxC,YAAMD,OAAM,UAACxhB,EAAIyhB,EACrB,EACJ,EApCA,CAAgFoK,IA4ChF,eAOI,WAAYlF,EAAkC/mB,GAC1C,SAAK,UAAC+mB,EAAO/mB,IAAK,IACtB,CA2BJ,OApCqF,QAepE,YAAAmnB,YAAb,SAAyBJ,+FACrB,SAAM,YAAMI,YAAW,UAACJ,kBAAxB,qBAOS,YAAAS,MAAb,SAAmBh/B,EAAc4X,+FAG7B,OAFAj5B,KAAKkkD,iBAAmBjrB,EAAGoU,OAC3BrtC,KAAKmkD,gBAAkBlrB,EAAG6gB,QAC1B,GAAM,YAAMuG,MAAK,UAACh/B,EAAK4X,kBAAvB,qBAOG,YAAAwhB,OAAP,SAAcxhB,EAA8ByhB,GACxC,YAAMD,OAAM,UAACxhB,EAAIyhB,EACrB,EACJ,EApCA,CAAqFoK,+RCnN/EC,GAA8B,EAAQ,KACtCC,GAAgC,EAAQ,IAW9C,cAcI,WAAYpF,EAAkC9nB,EAAkBmtB,EACpDC,EAAiCC,EAA+BC,EAA2CC,GAEnHrlD,KAAK4/C,MAAQA,EACb5/C,KAAKslD,KAAOH,EACZnlD,KAAKg0C,MAAQoR,EACbplD,KAAKulD,gBAAkBF,EACvBrlD,KAAK83B,SAAWA,EAChB93B,KAAKilD,SAAWA,EAChBjlD,KAAKklD,gBAAkBA,EACvBllD,KAAK8/C,SAAW,KAChB9/C,KAAKwlD,cAAgB,KAErB,IAAMC,EAAkBvkD,KAAKwkD,KAAK5tB,GAC5B6tB,EAAuBzkD,KAAKiD,IAAIshD,EAAkB,EAAIR,EAAU,GACtEjlD,KAAK4lD,kBAAoB1kD,KAAKC,IAAI,EAAGwkD,GACrC3lD,KAAK6lD,YAAa,CACtB,CA+EJ,OA7EW,YAAA7F,YAAP,SAAmBJ,GAGf,GAFA5/C,KAAK4/C,MAAQA,EAES,OAAlB5/C,KAAK8/C,SAAT,CAEA,IAAM7mB,EAAKj5B,KAAK8/C,SAAS7mB,GACnBxN,EAAOzrB,KAAK4/C,MAAMkG,gBAAgB9lD,KAAK4lD,kBAAmB5lD,KAAK4lD,mBAE/D,EAAyBn6B,EAAK44B,iBAA1B0B,EAAM,IAAKC,EAAM,IAC3BhmD,KAAK6lD,WAAwB,OAAXE,EACZ,MAAgCxsB,EAAyBN,IAAM8sB,aAAkBz2C,eAAhFmqB,EAAM,SAAE70B,EAAI,OAAE80B,EAAa,gBAE5BusB,EAAU,CAAC,OAAUxsB,EAAQ,KAAQ70B,EACvC,MAAS6mB,EAAK84B,KAAKC,GAAI,OAAU/4B,EAAK84B,KAAKE,GAAI,MAASsB,EACxD,WAAc9sB,EAAG6gB,QAAS,cAAiBpgB,GAGzCwsB,EAAU,CAAC,OAAUzsB,EAAQ,KAAQ70B,EACvC,MAAS6mB,EAAK84B,KAAKC,GAAI,OAAU/4B,EAAK84B,KAAKE,GAAI,MAASuB,EACxD,WAAc/sB,EAAG6gB,QAAS,cAAiBpgB,GAGpB,OAAvB15B,KAAKwlD,cACLxlD,KAAKwlD,cAAgB,CAACriD,EAAG,IAAI2pC,GAAW7T,EAAIgtB,GAAU/hC,EAAG,IAAI4oB,GAAW7T,EAAIitB,KAG5ElmD,KAAKwlD,cAAcriD,EAAEgqC,aAAa8Y,GAClCjmD,KAAKwlD,cAActhC,EAAEipB,aAAa+Y,GAxBJ,CA0BtC,EAEa,YAAAC,MAAb,SAAmBltB,mqCAIe,OAHxBmY,EAAU,IAAIhB,GAAWnX,EAAI8rB,GAA6BC,IAGlC,IADxBoB,EAAgBpmD,KAAK4/C,MAAMkG,gBAAgB9lD,KAAK4lD,kBAAmB5lD,KAAK4lD,oBAC5BrB,KAAK8B,uBAAuBptB,EAAIj5B,KAAK83B,SAAW93B,KAAK4lD,kBAAmB5lD,KAAKilD,yBAAzH,EAAwB,SAAvBjM,EAAQ,WAAEyG,EAAS,YACT6G,EAAqBF,EAAc7B,KAAKgC,yBAAyBttB,GAAG,SAE/E+T,EAAU,IAAIF,GAAW7T,EAAIj5B,KAAKklD,iBAExCllD,KAAK8/C,SAAW,CAAC7mB,GAAIA,EAAImY,QAASA,EAAS4H,SAAUA,EAAUyG,UAAWA,EAAWzS,QAASA,EAASwZ,iBAAkBF,4SAGtH,YAAA7L,OAAP,SAAcxhB,EAA8ByhB,EAAiC,EAA2CC,EAAkBC,EAAqBC,OAAlF,UAACC,EAAS,KAAEC,EAAU,KAC/F,GAAsB,OAAlB/6C,KAAK8/C,UAA4C,OAAvB9/C,KAAKwlD,eAA2BxlD,KAAK6lD,WAAnE,CAEInL,aAAkBprC,eAClBorC,iMAAS,OAAIA,IAAM,IAEvB,IAAMoF,EAAW9/C,KAAK8/C,SAEhB2G,EAAUzmD,KAAKslD,KAAKoB,WAAa3L,EAAaD,GAAa96C,KAAKulD,gBAChEoB,EAAW3mD,KAAKslD,KAAKsB,SAAW5mD,KAAKslD,KAAKuB,aAC1CC,EAAY9mD,KAAKslD,KAAKoB,UAAY1mD,KAAKslD,KAAKyB,cAElDjH,EAAS1O,QAAQuB,IACb,CAAC,MAASmN,EAAS9G,SAAU,YAAe8G,EAASL,WACrD,CAAC,UAAagH,EAAS,WAAcE,EAAU,YAAeG,EAC7D,kBAAqB9mD,KAAKslD,KAAK0B,gBAAiB,cAAiBhnD,KAAKslD,KAAK2B,YAAa,SAAY,EACpG,WAAcjnD,KAAKg0C,MAAO,SAAY0G,EAAQ,aAAgBK,EAAaD,EAAW,OAAUH,EAAU,cAAiBC,GAC5H,CAAC,UAAakF,EAAS9S,QAAS,YAAehtC,KAAKwlD,cAAcriD,EAAG,YAAenD,KAAKwlD,cAActhC,EAAG,cAAiB47B,EAAS0G,mBAGxIvtB,EAAG+hB,OAAO/hB,EAAGgiB,OACbhiB,EAAGiiB,kBAAkBjiB,EAAGkiB,UAAWliB,EAAGmiB,oBAAqBniB,EAAGoiB,IAAKpiB,EAAGmiB,qBAEtE0E,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,UAAa,IAC3C6M,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,UAAa,IAC3C6M,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,SAAY,IAC1C6M,EAAS1O,QAAQsC,MA/BoE,CAgCzF,EACJ,EA9GA,k0DCVMwT,GAAY,CACdN,SAAU,GACVF,UAAW,IACXG,aAAc,KACdE,cAAe,KACfI,WAAY,IACZF,YAAa,GACbD,gBAAiB,GA6GjBI,GAAyC,KA+G7C,SAjFA,YAaI,WAAYC,EAAmCxuB,GAC3C,QAAK,YAAE,KAEP,EAAKwuB,OAASA,EAEd,IAAMrT,EAAQne,EAASgD,EAAKmb,OAAS,kBACrC,EAAKA,MAAQ,CAACA,EAAM,GAAIA,EAAM,GAAIA,EAAM,IACxC,EAAKlc,SAAWe,EAAKf,UAAY,EAEjC,EAAKgoB,SAAW,MACpB,CAwDJ,OA/E+E,QA6B9D,YAAAE,YAAb,SAAyBqH,wEAErB,OADArnD,KAAKqnD,OAASA,EACQ,OAAlBrnD,KAAK8/C,WACT9/C,KAAK8/C,SAASwH,gBAAgBtH,YAAYqH,GAC1CrnD,KAAK8/C,SAASz+B,IAAI++B,kBAFU,WASnB,YAAAC,MAAb,SAAmBh/B,EAAc4X,yGAc7B,OAbAA,EAAGgB,aAAa,qBAChBhB,EAAGgB,aAAa,4BAEVunB,EAAengC,EAAIogC,aAEJ,OAAjB2F,KACAA,GAvLZ,WACI,IAAIG,EAASv7C,SAAS4rC,cAAc,UAKpC,SAAS4P,EAAa3P,EAA+B4P,EAAcC,EAAcC,GAC7E,IAAMC,EAAiBV,GAAUN,SAAW,EAAI,EAC1CiB,EAAeD,EAAiB,EAEtC,GAAID,EAAM,IACN9P,EAAIiQ,YACJjQ,EAAIkQ,IAAIN,EAAMC,EAAME,EAAiB,EAAG,EAAG,EAAI1mD,KAAKk6B,IACpDyc,EAAImQ,aAEH,CACD,IAAIC,EAAW,EACXC,EAAgBP,EAEhBQ,EAAe,EACbC,EAAUlnD,KAAKQ,OAAOwmD,EAAgB,KAAO,IACnDC,GAAgBC,EAAUR,EAAiB,EAAIC,GACrBO,EAAU,GAAKP,EAAe,EACxDK,GAA2B,GAAVE,EACjB,IAAMC,EAAennD,KAAKQ,OAAOwmD,EAAgB,KAAO,IACxDC,GAAgBE,EAAeR,EAC/BK,GAAgC,GAAfG,EAEjBF,GADqBjnD,KAAKQ,OAAOwmD,EAAgB,KAAO,GACzBL,EAE3BF,EAAM,MACNQ,GAAgBN,GAGpBM,EAAejnD,KAAKiD,IAAI,IAAKgkD,GAG7BtQ,EAAIiQ,YACJjQ,EAAIyQ,OAAOb,EAAMC,GACjB7P,EAAI0Q,OAAOd,EAAMC,EAAOS,GAExBD,EAAgBP,EAEhBM,EAAWP,EAAOS,EAIlB,IAHA,IAAIK,GAAgB,EAChBC,GAAa,EAEVP,EAAgB,MACfM,IAAeP,GAAYJ,EAAe,GAEzCY,GACD5Q,EAAIyQ,OAAOb,EAAMQ,GAErBpQ,EAAI0Q,OAAOd,EAAOG,EAAgBK,GAClCpQ,EAAI0Q,OAAOd,EAAMQ,EAAWL,EAAiB,GAE7CK,GAAYL,EAAiB,EAAIC,EACjCK,GAAiB,GACjBM,GAAgB,EAChBC,GAAa,EAGjB,KAAOP,EAAgB,KAEdO,GACD5Q,EAAIyQ,OAAOb,EAAMQ,GAErBpQ,EAAI0Q,OAAOd,EAAOG,EAAgBK,EAAWL,EAAiB,GAE9DK,GAAYJ,EACZK,GAAiB,GACjBO,GAAa,EAOjB,IAJId,EAAM,MACNM,GAAYJ,GAGTK,EAAgB,KAEnBrQ,EAAIyQ,OAAOb,EAAMQ,GACjBpQ,EAAI0Q,OAAOd,EAAOG,EAAiB,EAAGK,EAAWL,EAAiB,GAClEM,GAAiB,EAGrBrQ,EAAImQ,QACR,CACJ,CApFAT,EAAOnjC,MAAQ8iC,GAAUL,aACzBU,EAAOjT,OAAS4S,GAAUH,cAqF1B,IAAIlP,EAAM0P,EAAOzP,WAAW,MAC5B,GAAY,OAARD,EACA,KAAM,2DAGVA,EAAI6Q,UAAY,EAChB7Q,EAAI8Q,WAAa,EAEjB,IAAK,IAAIC,EAAQ,EAAGA,GAAS1B,GAAUC,WAAYyB,GAAS1B,GAAUF,gBAGlEQ,EAAa3P,EAFE+Q,EAAQ1B,GAAUD,YAAeC,GAAUF,gBAAkBE,GAAUN,SAAWM,GAAUN,SAAW,EACxG1lD,KAAKQ,MAAMknD,EAAQ1B,GAAUD,aAAeC,GAAUR,UAAYQ,GAAUN,SAAW,EACrEgC,GAGpC,OAAOrB,CACX,CA+E2BsB,IAGbC,EAAa,CAACrvB,OAAQR,EAAG+U,KAAMppC,KAAMq0B,EAAG8S,cAAegB,MAAOqa,GAAcha,WAAYnU,EAAG6gB,SAIjG,IAFMwN,EAAkB,IAAIyB,GAAoB/oD,KAAKqnD,OAAQrnD,KAAK83B,SAAU0pB,EAAcsH,EACtF5B,GAAWlnD,KAAKg0C,MAAO,KACLmS,MAAMltB,kBAA5B,SAEAj5B,KAAK8/C,SAAW,CACZz+B,IAAKA,EAAKimC,gBAAiBA,GAG/BtnD,KAAKggD,YAAYhgD,KAAKqnD,oBAOnB,YAAA5M,OAAP,SAAcxhB,EAA8ByhB,GACxC,GAAsB,OAAlB16C,KAAK8/C,SAAT,CACA,IAAMA,EAAW9/C,KAAK8/C,SAEhBjoB,EAAOioB,EAASz+B,IAAIi/B,UACpBxF,EAAYgF,EAASz+B,IAAIk/B,YAAYn8B,MACrC22B,EAAa+E,EAASz+B,IAAIk/B,YAAYjM,OACtCkM,EAAUV,EAASz+B,IAAIo/B,aACvBC,EAAQZ,EAASz+B,IAAIs/B,WAE3Bb,EAASwH,gBAAgB7M,OAAOxhB,EAAIyhB,EAAQ,CAACI,EAAWC,GAAaljB,EAAM2oB,EAASE,EATlD,CAUtC,EACJ,EA/EA,CAA+EE,oyEClJzEoI,GAA8B,EAAQ,KACtCC,GAAgC,EAAQ,KA4I9C,SA/GA,YAeI,WAAYrJ,EAAkC/mB,GAC1C,QAAK,YAAE,KAEP,EAAK+mB,MAAQA,EAGb,IAAMhL,OAAyBzoC,KAD/B0sB,OAAgB1sB,IAAT0sB,EAAqBA,EAAO,CAAC,GAChB+b,OAAuB,SAAI/b,EAAK+b,SAAM,GAAI,CAAC,kBAC/D,EAAKA,OAASA,EAAO1R,UAAU7hB,KAAI,SAAA2yB,GAAS,OAAAne,EAASme,EAAT,IAAiBmM,OAC7D,EAAKzK,aAA2BvpC,IAAjB0sB,EAAK6c,QAAwB7c,EAAK6c,QAAU,EAE3D,EAAKoK,SAAW,KAChB,EAAKmE,aAAe,MACxB,CAkFJ,OA7GmF,QAiClE,YAAAjE,YAAb,SAAyBJ,0FAGrB,OAFA5/C,KAAK4/C,MAAQA,EAES,OAAlB5/C,KAAK8/C,YACH7mB,EAAKj5B,KAAK8/C,SAAS7mB,IAEtB4V,YAAY5V,EAAG6V,iBAAkB,GAE9BsV,EAAWpkD,KAAK4/C,MAAMyE,iBACtB,EAAgC9qB,EAAyBN,IAAMmrB,aAAoB90C,eAAlFmqB,EAAM,SAAE70B,EAAI,OAAE80B,EAAa,gBAE5B4qB,EAAa,CAAC,OAAU7qB,EAAQ,KAAQ70B,EAC1C,MAAS5E,KAAK4/C,MAAM2E,KAAKC,GAAI,OAAUxkD,KAAK4/C,MAAM2E,KAAKE,GAAI,MAASL,EACpE,WAAcnrB,EAAG6gB,QAAS,cAAiBpgB,GAGrB,OAAtB15B,KAAKikD,aACLjkD,KAAKikD,aAAe,IAAInX,GAAW7T,EAAIqrB,GAGvCtkD,KAAKikD,aAAa9W,aAAamX,IAjBP,WAyBnB,YAAAjE,MAAb,SAAmBh/B,EAAc4X,+GAK4B,OAJzDA,EAAGgB,aAAa,qBAEVmX,EAAU,IAAIhB,GAAWnX,EAAI+vB,GAA6BC,IAEP,GAAMjpD,KAAK4/C,MAAM2E,KAAKG,cAAczrB,kBAAvF,EAAmD,SAAxC0rB,EAAS,WAAaC,EAAc,YAC/C5L,EAAW2L,EACXlF,EAAYmF,EAElB5kD,KAAK8/C,SAAW,CACZ7mB,GAAIA,EAAImY,QAASA,EAAS4H,SAAUA,EAAUyG,UAAWA,GAG7Dz/C,KAAKggD,YAAYhgD,KAAK4/C,mBAOnB,YAAAnF,OAAP,SAAcxhB,EAA8ByhB,GACxC,GAAsB,OAAlB16C,KAAK8/C,UAA2C,OAAtB9/C,KAAKikD,aAAnC,CACA,IAAMnE,EAAW9/C,KAAK8/C,SAElBpF,aAAkBprC,eAClBorC,EAAS,SAAIA,IAAM,IAGvBoF,EAAS1O,QAAQuB,IACb,CAAC,MAASmN,EAAS9G,SAAU,YAAe8G,EAASL,WACrD,CAAC,SAAY/E,EAAQ,UAAa16C,KAAK01C,QAAS,SAAY11C,KAAK40C,OAAQ,aAAgB50C,KAAK40C,OAAOlyC,OAAS,EAAG,SAAY,GAC7H,CAAC,eAAkB1C,KAAKikD,eAG5BhrB,EAAG+hB,OAAO/hB,EAAGgiB,OACbhiB,EAAGiiB,kBAAkBjiB,EAAGkiB,UAAWliB,EAAGmiB,oBAAqBniB,EAAGoiB,IAAKpiB,EAAGmiB,qBAEtE0E,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,UAAa,IAC3C6M,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,UAAa,IAC3C6M,EAAS1O,QAAQsC,OAEjBoM,EAAS1O,QAAQ6B,YAAY,CAAC,SAAY,IAC1C6M,EAAS1O,QAAQsC,MAzB+C,CA0BpE,EACJ,EA7GA,CAAmFkN,oyECxB7EsI,GAAe,CACjBtC,SAAU,IACVF,UAAW,IACXG,aAAc,IACdE,cAAe,IACfI,WAAY,IACZF,YAAa,IACbD,gBAAiB,KAmCjBmC,GAA4C,KAE1CC,GAAY,IAAIvT,GAAS,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,CAAC,UAAW,UAAW,UAAW,YAqJlF,SA9HA,YAeI,WAAYwT,EAAgCxwB,GACxC,QAAK,YAAE,YAEPA,EAAOA,GAAQ,CAAC,EAEhB,EAAKwwB,cAAgBA,EAErB,EAAKC,QAAUzwB,EAAKywB,SAAW,UAC/B,EAAKxxB,SAAWe,EAAKf,UAAY,EAEjC,EAAKyxB,YAAcL,GAAarC,aAAe2C,IA9F/B,GA8FkDN,GAAarC,cAC/E,EAAK4C,QAAU,IAEf,EAAK3J,SAAW,KAChB,EAAK4J,WAAa,MACtB,CA8FJ,OA5HsD,QAoCrC,YAAA1J,YAAb,SAAyBJ,sHAGrB,OAFA5/C,KAAKqpD,cAAgBzJ,EAEC,OAAlB5/C,KAAK8/C,SAAmB,KAEtB7mB,EAAKj5B,KAAK8/C,SAAS7mB,GAEzBj5B,KAAK8/C,SAAS6J,aAAa3J,YAAYJ,EAAMgK,sBAEvCC,EAAW7pD,KAAKqpD,cAAcQ,SAE9BC,EAAgBD,EAASxoC,KAAI,SAAA0oC,GAC/B,IAAMlyB,EAAOJ,EAAWsyB,EAAW,KAAGA,EAAW,KAAG,EAAKjyB,UAEzD,MAAO,CACH,QAAW,SAAIiyB,EAAQ,IAAC,GAAE1oC,KAAI,SAACle,EAAG6mD,GAAQ,OAAC7mD,EAAI4mD,EAAU,IAAGA,EAAQ,EAAEC,GAAOD,EAAU,IAA7C,IAC1C,SAAY,SAAIA,EAAQ,IAAC,GAAE1oC,KAAI,SAAAle,GAAK,OAAC4mD,EAAU,IAAGA,EAAU,IAAxB,IACpC,KAAQlyB,EACR,KAAQ,SAAIkyB,EAAQ,IAAC,GAE7B,IAEkB,GAAMvP,GAAmBJ,KAAKnhB,EAAI6wB,EAAe,CAAChR,WAAY,IAAKe,KAAMuP,GAAW/P,aAAcr5C,KAAKupD,WAAavpD,KAAKypD,mBAiB3H,OAjBVQ,EAAY,SAEZC,EAAcL,EAASxoC,KAAI,SAAA0oC,GAC7B,IAAMlyB,EAAOJ,EAAWsyB,EAAW,KAAGA,EAAW,KAAG,EAAKjyB,UAEnDqyB,EAASjpD,KAAKi8B,MAAM4sB,EAAU,IAAGA,EAAU,KAC3CK,EAASlpD,KAAKk6B,GAAK,EAAIl6B,KAAK+7B,OAAO8sB,EAAU,KAAIA,EAAU,KAGjE,MAAO,CACH,QAAW,CAAC,CAHD,EAGW7oD,KAAKg6B,IAAIkvB,GAHpB,EAGsClpD,KAAKq6B,IAAI6uB,IAC5C,CAACD,EAASjpD,KAAKg6B,IAAIkvB,GAASD,EAASjpD,KAAKq6B,IAAI6uB,KAC5D,SAAY,CAAC,CAACL,EAAU,IAAGA,EAAU,KAAI,CAACA,EAAU,IAAGA,EAAU,MACjE,KAAQlyB,EAEhB,IAEgB,GAAM2iB,GAAmBJ,KAAKnhB,EAAIixB,EAAa,CAACpR,WAAY,IAAK9E,MAAOh0C,KAAKspD,QAASjQ,aAAcr5C,KAAKupD,WAAavpD,KAAKypD,yBAArIY,EAAU,SAEhBrqD,KAAK0pD,WAAa,CACdO,UAAWA,EAAWI,QAASA,eAQ1B,YAAAhK,MAAb,SAAmBh/B,EAAc4X,yGAU7B,OATwB,OAApBkwB,KACAA,GAjJZ,WACI,IAAI5B,EAASv7C,SAAS4rC,cAAc,UAEpC2P,EAAOnjC,MAAQ8kC,GAAarC,aAC5BU,EAAOjT,OAAS4U,GAAanC,cAE7B,IAAIlP,EAAM0P,EAAOzP,WAAW,MAE5B,GAAY,OAARD,EACA,KAAM,sEAGVA,EAAI6Q,UAzBW,EA2Bf,IAAK,IAAI4B,EAAOpB,GAAarC,aAAe,EAAGyD,GAAQpB,GAAarC,aAAe,EAAGyD,GAAQpB,GAAarC,aAAe,EACtHhP,EAAIiQ,YACJjQ,EAAIkQ,IAAImB,GAAarC,aAAe,EAAGqC,GAAarC,aAAe,EAAGyD,EAAOd,EAAgB,EAAG,EAAItoD,KAAKk6B,IACzGyc,EAAImQ,SAGR,IAAMuC,EAAQrB,GAAarC,aAAe,EAAG2D,EAAQtB,GAAarC,aAAe,EASjF,OAPAhP,EAAIiQ,YACJjQ,EAAIyQ,OAAOiC,EAAOC,GAClB3S,EAAI0Q,OAAOgC,EAAQE,GAAgBD,EAHhB,IAInB3S,EAAI0Q,OAAOgC,EAAQE,GAAgBD,EAJhB,IAKnB3S,EAAI0Q,OAAOgC,EAAOC,GAClB3S,EAAIpiB,OAEG8xB,CACX,CAmH8BmD,IAGhBC,EAAW,CAAC,OAAU1xB,EAAG+U,KAAM,KAAQ/U,EAAG8S,cAAe,MAASod,GAAiB,WAAclwB,EAAG6gB,SACpGmL,EAAW5jC,EAAIogC,aAIrB,IAFMkI,EAAe,IAAIZ,GAAoB/oD,KAAKqpD,cAAcO,qBAAsB5pD,KAAK83B,SAAUmtB,EAAU0F,EAAUzB,GAAc9yB,EAAQp2B,KAAKspD,SACxF,KAAftpD,KAAKypD,UAC/BtD,MAAMltB,kBAAzB,SAEAj5B,KAAK8/C,SAAW,CACZ7mB,GAAIA,EAAI5X,IAAKA,EAAKsoC,aAAcA,GAGpC3pD,KAAKggD,YAAYhgD,KAAKqpD,2BAOnB,YAAA5O,OAAP,SAAcxhB,EAA8ByhB,GACxC,GAAsB,OAAlB16C,KAAK8/C,UAAyC,OAApB9/C,KAAK0pD,WAAnC,CACA,IAAM5J,EAAW9/C,KAAK8/C,SAChB4J,EAAa1pD,KAAK0pD,WAElB7xB,EAAOioB,EAASz+B,IAAIi/B,UACpBxF,EAAYgF,EAASz+B,IAAIk/B,YAAYn8B,MACrC22B,EAAa+E,EAASz+B,IAAIk/B,YAAYjM,OACtCkM,EAAUV,EAASz+B,IAAIo/B,aACvBC,EAAQZ,EAASz+B,IAAIs/B,WAE3B+I,EAAWO,UAAUxP,OAAOxhB,EAAIyhB,EAAQ,CAACI,EAAWC,GAAaljB,EAAM2oB,EAASE,GAChFgJ,EAAWW,QAAQ5P,OAAOxhB,EAAIyhB,EAAQ,CAACI,EAAWC,GAAaljB,EAAM2oB,EAASA,GAC9EV,EAAS6J,aAAalP,OAAOxhB,EAAIyhB,EAAQ,CAACI,EAAWC,GAAaljB,EAAM2oB,EAASE,EAZnB,CAalE,EACJ,EA5HA,CAAsDE,keC3EtD,cAKI,WAAYl6B,GACR1mB,KAAK4E,KAAO,SACZ5E,KAAK0mB,GAAKA,EACV1mB,KAAKqhB,IAAM,IACf,CAUJ,OALc,YAAAupC,QAAV,WACqB,OAAb5qD,KAAKqhB,KACLrhB,KAAKqhB,IAAI++B,gBAEjB,EACJ,EAnBA,GA8BA,eAQI,WAAY15B,EAAYk5B,GACpB,QAAK,UAACl5B,IAAG,YACT,EAAKk5B,MAAQA,GACjB,CAkBJ,OA7BqD,GAAAiL,EAAA,GAiBpC,YAAAxK,MAAb,SAAmBh/B,EAAc4X,ipCAE7B,OADAj5B,KAAKqhB,IAAMA,EACX,GAAMrhB,KAAK4/C,MAAMS,MAAMh/B,EAAK4X,kBAA5B,kTAOG,YAAAwhB,OAAP,SAAcxhB,EAA8ByhB,GACxC16C,KAAK4/C,MAAMnF,OAAOxhB,EAAIyhB,EAC1B,EACJ,EA7BA,CAAqDoQ,IA6CrD,eAUI,WAAYpkC,GACR,QAAK,UAACA,IAAG,YAET,EAAK2gC,OAAS,CAAC,EACf,EAAK0D,UAAY,KACjB,EAAK1pC,IAAM,KACX,EAAK4X,GAAK,MACd,CAqEJ,OAtF0D,QAuB/C,YAAAonB,MAAP,SAAah/B,EAAc4X,GAA3B,WACIj5B,KAAKqhB,IAAMA,EACXrhB,KAAKi5B,GAAKA,EAEVrsB,OAAOk2B,OAAO9iC,KAAKqnD,QAAQ36C,SAAQ,SAAAkzC,GAC/BA,EAAMS,MAAMh/B,EAAK4X,GAAIjmB,MAAK,SAAAg4C,GACtB,EAAKJ,SACT,GACJ,IAEA5qD,KAAK4qD,SACT,EAMO,YAAAnQ,OAAP,SAAcxhB,EAA8ByhB,GACvB,OAAb16C,KAAKqhB,KAA4B,OAAZrhB,KAAKi5B,IAAkC,OAAnBj5B,KAAK+qD,WAC3C/qD,KAAKqnD,OAAOhuC,eAAerZ,KAAK+qD,YAA8C,OAAhC/qD,KAAKqnD,OAAOrnD,KAAK+qD,YAClE/qD,KAAKqnD,OAAOrnD,KAAK+qD,WAAWtQ,OAAOxhB,EAAIyhB,EAE/C,EAMO,YAAAuQ,aAAP,SAAoB15B,GACMvxB,KAAK+qD,UAC3B/qD,KAAK+qD,UAAYx5B,EAEjBvxB,KAAK4qD,SACT,EAMO,YAAAM,QAAP,WACI,OAAOt+C,OAAOuO,KAAKnb,KAAKqnD,OAC5B,EAOO,YAAA8D,SAAP,SAAgBvL,EAA+BruB,GAA/C,WAC0BvxB,KAAK+qD,UAEV,OAAb/qD,KAAKqhB,KAA4B,OAAZrhB,KAAKi5B,IAAyB,OAAV2mB,GACzCA,EAAMS,MAAMrgD,KAAKqhB,IAAKrhB,KAAKi5B,IAAIjmB,MAAK,SAAAg4C,GAChC,EAAKJ,SACT,IAGJ5qD,KAAKqnD,OAAO91B,GAAOquB,EAEI,OAAnB5/C,KAAK+qD,YACL/qD,KAAK+qD,UAAYx5B,EAEzB,EACJ,EAtFA,CAA0Du5B,uNCxCpDlT,GAAgB,SAACwT,EAAiBvZ,EAA8C1vC,GAClF,IAAMkpD,EAAOr/C,SAASs/C,gBAAgB,6BAA8BF,GAYpE,YAVmBj/C,IAAf0lC,GACAjlC,OAAOmsB,QAAQ8Y,GAAYnlC,SAAQ,SAAC,sSAAC4O,EAAC,KAAE4I,EAAC,KACrCmnC,EAAKE,aAAajwC,EAAG4I,EAAElO,WAC3B,SAGW7J,IAAXhK,GACAA,EAAOqpD,YAAYH,GAGhBA,CACX,EAeA,SAASI,GAAa/T,EAAoB7e,GACtC,IAAMgrB,EAAQhrB,EAAKgrB,OAAS,GACtB6H,EAAQ7yB,EAAK6yB,OAAShU,EAAS/C,OAC/BgX,EAAc9yB,EAAK8yB,aAAe,WAClCC,EAAW/yB,EAAK+yB,UAAY,aAC5BC,EAAehzB,EAAKizB,eAAiB,GAErCC,EAAWlzB,EAAKmzB,iBAAkC,YAAfL,EAA4B,OAAS,UAE9E,GAAmB,YAAfA,IAA0C,OAAZI,GAAiC,UAAZA,IACpC,cAAfJ,IAA4C,QAAZI,GAAkC,SAAZA,GACtD,KAAM,6BAAsBA,EAAQ,4CAAoCJ,GAG5E,IAeIrX,EAAgBlwB,EAAe6nC,EAAkBC,EAAiBC,EAAmBC,EAAoBC,EAAmBC,EAC5HC,EAAoBC,EAAuBC,EAhBzCC,EAAW,SAAC5qD,GACd,OAAOA,EAAEkU,WAAWtT,MACxB,EAEMiqD,EAAaD,EAAShB,EAAM,IAC5BkB,EAAcF,EAAShB,EAAMA,EAAMhpD,OAAS,IAC5CmqD,EAA6C,OAA7BnV,EAAS3C,iBAAwD,OAA5B2C,EAAS5C,eAE9DgY,EAAgB,IAChBC,EAAiBD,EAAgB,EACjCE,EAAe9rD,KAAKiD,IAAmB,cAAfwnD,EAAkE,EAApCzqD,KAAKiD,IAAIwoD,EAAYC,GAAmB,EACtEC,EAAgBE,GAAkB,EAAI7rD,KAAKs6B,KAAK,IAAM,GAOjE,YAAfmwB,GACArX,EAASwY,EACT1oC,EAAQ2oC,EAORV,GALAJ,EAAuB,QAAZF,EAAqBgB,kBAVd,IAYlBZ,EAXkB,IAelBI,EAAaN,EAAWE,EAAY,EACpCG,GANAJ,EAAUc,IAEVZ,EAAaU,EAAgB,EAAIE,GAKjCR,EAA6C,OAA7B9U,EAAS3C,gBAA2BuX,EAAaA,EAAaS,GAAiC,EAAf7rD,KAAKs6B,KAAK,IAC1GixB,EAA6C,OAA5B/U,EAAS5C,eAA0BoX,EAAUA,EAAUa,GAAiC,EAAf7rD,KAAKs6B,KAAK,MAGpGpX,EAAQ0oC,EACRxY,EAASyY,EAAiB,EAO1BV,GALAJ,EAAWe,IAGXb,EAAYW,EAAgB,EAAIE,GAGhCT,GALAL,EAAsB,UAAZH,EA1BQ,EA0B+BgB,oBACjDX,EA1BkB,IA8BkB,EACpCE,EAAaJ,EAAUE,EACvBI,EAA6C,OAA7B9U,EAAS3C,gBAA2BkX,EAAWA,EAAWc,GAAiC,EAAf7rD,KAAKs6B,KAAK,IACtGixB,EAA6C,OAA5B/U,EAAS5C,eAA0BuX,EAAYA,EAAYU,GAAiC,EAAf7rD,KAAKs6B,KAAK,KAG5G,IAKIyxB,EALE9W,EAAWuB,EAAS9C,OAAOlyC,OAE3BhD,EAAOk4C,GAAc,MAAO,CAACxzB,MAAOA,EAAOkwB,OAAQA,IACnD4Y,EAAOtV,GAAc,IAAK,CAAC,EAAGl4C,GAIhCutD,EADe,YAAftB,EACyB,QAAZI,EAAqB,CAAC,cAAe,MAAOoB,UAAW,oBAAalB,EAAQ,aAAKC,EAAO,MACnE,CAACiB,UAAW,oBAAalB,EAAWE,EAAS,aAAKD,EAAO,MAGlE,UAAZH,EAAuB,CAAC,cAAe,SAAUoB,UAAW,oBAAalB,EAAQ,aAAKC,EAAUE,EAAU,MACnF,CAAC,cAAe,SAAUe,UAAW,oBAAalB,EAAQ,aAAKC,EAAO,MAE9G,IAAMkB,EAASxV,GAAc,IAAKqV,EAAYvtD,GAkB9C,GAfAg4C,EAAS9C,OAAOloC,SAAQ,SAACsnC,EAAOqZ,GAW5BzV,GAAc,OAAQ,SARH,YAAf+T,EACQ,CACJl+B,EAAGw+B,EAAUlvB,EAAGmvB,EAAUE,GAAc,GAAKiB,EAAS,GAAKlX,GAAW/xB,MAAO+nC,EAAW7X,OAAQ8X,EAAajW,GAGzG,CAAC1oB,EAAGw+B,EAAWE,EAAYkB,EAASlX,EAAUpZ,EAAGmvB,EAAS9nC,MAAO+nC,EAAYhW,EAAU7B,OAAQ8X,IAG5E,CAAE32B,KAAMue,EAAMA,MAAO0B,QAAS1B,EAAM0B,UAAUwX,EACjF,IAGiC,OAA7BxV,EAAS3C,gBAA0B,CACnC,IAQMuY,EAAkB,CAACC,OAPN,YAAf5B,EACa,UAAGU,EAAS,YAAIC,EAAU,aAAKC,EAAU,YAAIC,EAAa,aAAKP,EAAQ,YAAIK,EAAU,aAAKD,EAAS,YAAIC,GAGvG,UAAGL,EAAQ,YAAIK,EAAU,aAAKE,EAAa,YAAID,EAAU,aAAKN,EAAQ,YAAIC,EAAO,aAAKD,EAAQ,YAAIK,GAGtE72B,KAAMiiB,EAAS3C,gBAAgBf,MAAO0B,QAASgC,EAAS3C,gBAAgBW,SACrHkC,GAAc,UAAW0V,EAAiBJ,EAC9C,CAEA,GAAgC,OAA5BxV,EAAS5C,eAAyB,CAClC,IAQM0Y,EAAiB,CAACD,OAPL,YAAf5B,EACa,UAAGM,EAAQ,YAAIC,EAAO,aAAKK,EAAU,YAAIE,EAAc,aAAKJ,EAAS,YAAIH,EAAO,aAAKD,EAAQ,YAAIC,GAGjG,UAAGG,EAAS,YAAIH,EAAO,aAAKO,EAAc,YAAIF,EAAU,aAAKF,EAAS,YAAIC,EAAU,aAAKD,EAAS,YAAIH,GAG3Ez2B,KAAMiiB,EAAS5C,eAAed,MAAO0B,QAASgC,EAAS5C,eAAeY,SAClHkC,GAAc,UAAW4V,EAAgBN,EAC7C,CAGA,IAoCIO,EAmBAC,EAvDEC,EAAcjW,EAAS/C,OAAO,GAC9BiZ,EAAalW,EAAS/C,OAAO+C,EAAS/C,OAAOjyC,OAAS,GAgE5D,OA9DAgpD,EAAMx1B,QAAO,SAAAygB,GAAS,OAAAgX,GAAehX,GAASA,GAASiX,CAAjC,IAA6ClhD,SAAQ,SAAAiqC,GACvE,IAAMkX,EAAQnW,EAAS/C,OAAOtzB,KAAI,SAAAne,GAAK,OAAAhC,KAAKM,IAAI0B,EAAIyzC,EAAb,IACnCmX,EAASD,EAAMxgD,QAAQwgD,EAAMp6B,QAAO,SAAC3vB,EAAGwE,GAAM,OAAApH,KAAK+C,IAAIH,EAAGwE,EAAZ,KAC9CquC,GAASe,EAAS/C,OAAOmZ,IAAWA,EAAS,IAC7CA,GAAU,GACdA,IAAWnX,EAAQe,EAAS/C,OAAOmZ,KAAYpW,EAAS/C,OAAOmZ,EAAS,GAAKpW,EAAS/C,OAAOmZ,IAC7F,IAAMC,EAA2B,YAAfpC,EAA4B,CAACwB,UAAW,uBAAgBf,GAAc,EAAI0B,EAAS3X,GAAS,MAChE,CAACgX,UAAW,oBAAahB,EAAY2B,EAAS3X,EAAQ,SAC9F6X,EAAQpW,GAAc,IAAKmW,EAAWX,GAU5CxV,GAAc,OAAQ,SAPH,YAAf+T,EACwB,QAAZI,EAAqB,CAACkC,IAAK,GAAK,CAACA,GAAI,GAGzB,UAAZlC,EAAuB,CAACmC,GAAK,GAAK,CAACA,IAAK,IAGrB,CAAElG,OAAQ,UAAW,eAAgB,MAAMgG,GAUjEpW,GAAc,OAAQ,SAPhB,YAAf+T,EACwB,QAAZI,EAAqB,CAACt+B,GAAI,EAAG0gC,GAAI,UAAY,CAAC1gC,EAAG,EAAG0gC,GAAI,UAG5C,UAAZpC,EAAuB,CAAChvB,EAAG,EAAGoxB,GAAI,SAAW,CAACpxB,GAAI,EAAGoxB,GAAI,QAGzB,CAAE14B,KAAM,UAAW24B,MAAO,uBAAgBxC,EAAQ,wBAAgBC,EAAY,QAAOmC,GAChIK,YAAc1X,EAAM3gC,UAC7B,IAKIy3C,EADe,YAAf9B,EACa,UAAGM,EAAQ,YAAIC,EAAO,aAAKK,EAAU,YAAIE,EAAc,aAAKJ,EAAS,YAAIH,EAAO,aAAKG,EAAS,YAAIC,EAAU,MAC5G,UAAGC,EAAU,YAAIC,EAAa,aAAKP,EAAQ,YAAIK,EAAU,aAAKL,EAAQ,YAAIC,GAG1E,UAAGD,EAAQ,YAAIC,EAAO,aAAKG,EAAS,YAAIH,EAAO,aAAKO,EAAc,YAAIF,EAAU,aAAKF,EAAS,YAAIC,EAAU,MAC5G,UAAGL,EAAQ,YAAIK,EAAU,aAAKE,EAAa,YAAID,EAAU,aAAKN,EAAQ,YAAIC,GAS3FtU,GAAc,UANQ,CAClB2V,OAAQE,EACRzF,OAAQ,UACR,eAAgB,IAChBvyB,KAAM,QAE8B/1B,GAKpCguD,EADe,YAAf/B,EACyB,QAAZI,EAAqB,CAACoB,UAAW,wBAAiB7Y,EAAS,EAAC,kBAAmB,CAAC6Y,UAAW,oBAAa/oC,EAAQ,EAAC,aAAKkwB,EAAS,EAAC,kBAGpH,UAAZyX,EAAuB,CAACoB,UAAW,oBAAa/oC,EAAQ,EAAC,aAAKkwB,EAAS,EAAC,MAAO,CAAC6Y,UAAW,oBAAa/oC,EAAQ,EAAC,UAE/GwzB,GAAc,OAAQ,SAAI8V,GAAU,CAAEj4B,KAAM,UAAW,cAAe,SAAU24B,MAAO,uBAAgBxC,EAAQ,OAAMlsD,GAC7H2uD,YAAcxK,EAElBnkD,CACX,CA6BA,SAAS4uD,GAAiB1Z,EAA4B2Z,EAAkB11B,GACpE,GAAI+b,EAAOlyC,QAAU6rD,EAAO7rD,OACxB,KAAM,iDAA0CkyC,EAAOlyC,OAAM,uCAA+B6rD,EAAO7rD,OAAM,KAI7G,IAAM8rD,OAAyBriD,KAD/B0sB,OAAgB1sB,IAAT0sB,EAAqB,CAAC,EAAIA,GACb21B,OAAuB,EAAG31B,EAAK21B,OAC7C5C,OAA6Bz/C,IAAlB0sB,EAAK+yB,SAAyB,aAAe/yB,EAAK+yB,SAW7D6C,EAASvtD,KAAKm7C,KAAKzH,EAAOlyC,OAAS8rD,GAKnC9uD,EAAOk4C,GAAc,MAAO,CAACxzB,MAH3B,IAAuDoqC,EALtC,GAKmEA,EAAS,GAGpDla,OAX3B,GASGma,EALC,GAK6BA,EAAS,KAG1DvB,EAAOtV,GAAc,IAAK,CAAC,EAAGl4C,GAyBpC,OAvBAk1C,EAAOloC,SAAQ,SAACsnC,EAAOqZ,GACnB,IAAMxJ,EAAQ0K,EAAOlB,GAEfqB,EAAOrB,EAASoB,EAChBE,EAAOztD,KAAKQ,MAAM2rD,EAASoB,GAE7B/Y,EAAU,EACM,iBAAT1B,IACP0B,EAAU1B,EAAM0B,QAChB1B,EAAQA,EAAMA,OAGlB,IAAMvmB,EAvBe,EAuBe,IAAPkhC,EACvB5xB,EAvBgB,EAuBe,GAAP2xB,EAE9B9W,GAAc,OAAQ,CAACnqB,EAAGA,EAAGsP,EAAGA,EAAGtH,KAAMue,EAAO0B,QAASA,EAAStxB,MA9BjD,GA8BsEkwB,OA7BrE,IA6B6F4Y,GAIlGtV,GAAc,OAAQ,SAFnB,CAACnqB,EAAGA,EAhCH,GAEG,EA8BoCsP,EAAGA,EAAI6xB,GAAmBT,GAAI,WAEtC,CAAE14B,KAAM,UAAW24B,MAAO,yCAAkCxC,EAAQ,OAAMsB,GACrHmB,YAAcxK,CACvB,IAEOnkD,CACX,6TCzUImvD,GAAqD,KAEzD,SAASC,KAKL,OAJoB,OAAhBD,KACAA,GAAc,QAGXA,EACX,CAcA,SAAeE,GAA6CtjC,EAAiB84B,EAAY1rB,yqCACrF,QAAsB1sB,IAAlB0sB,EAAKgnB,eAA0C1zC,IAAhB0sB,EAAK8b,OACpC,KAAM,+DAME,OAHNkL,OAA6B1zC,IAAlB0sB,EAAKgnB,SAAyB,EAAIhnB,EAAKgnB,SAClDlL,OAAyBxoC,IAAhB0sB,EAAK8b,OAAuB,kMAAK,OAAI9b,EAAK8b,SAAM,GAEnD,GAAMma,aAkBlB,GAlBME,EAAM,SAENC,EAAc1K,EAAK2K,iBAEnBC,EAAY,IAAIH,EAAII,WAChBC,OAAO9K,EAAKC,GAAKD,EAAKE,GAAI,GACnBh5B,EAER/e,SAAQ,SAACwX,EAAGrjB,GAAM,OAAAsuD,EAAU9kD,IAAIxJ,EAAGqjB,EAAjB,KAErBw/B,EAAS,IAAIsL,EAAII,WAChBC,OAAO9K,EAAKC,GAAI,GACvByK,EAAYxhC,EAAE/gB,SAAQ,SAACwX,EAAGrjB,GAAM,OAAA6iD,EAAOr5C,IAAIxJ,EAAGqjB,EAAd,KAE1By/B,EAAS,IAAIqL,EAAII,WAChBC,OAAO9K,EAAKE,GAAI,GACvBwK,EAAYlyB,EAAErwB,SAAQ,SAACwX,EAAGrjB,GAAM,OAAA8iD,EAAOt5C,IAAIxJ,EAAGqjB,EAAd,IAEX,GAAjBywB,EAAOjyC,OAAa,CAGpB,IAFM4sD,EAAaN,EAAIO,wBAAwBJ,EAAW5K,EAAKC,GAAID,EAAKE,GAAI5E,GAEnE2P,EAAO,EAAGA,EAAOF,EAAWtsD,OAAQwsD,IACzC7a,EAAOnyC,KAAK8sD,EAAWviD,IAAIyiD,IAG/BF,EAAW/f,QACf,CAgCA,OA9BMwQ,EAAwB,CAAC,EAC/BpL,EAAOjoC,SAAQ,SAAAwX,GACX,IAAMurC,EAAYT,EAAIU,oBAAoBP,EAAWzL,EAAQC,EAAQz/B,GACrE67B,EAAS77B,GAAK,GAEd,IAAK,IAAI69B,EAAQ,EAAGA,EAAQ0N,EAAUzsD,OAAQ++C,IAAS,CACnD,IAAME,EAAsBwN,EAAU1iD,IAAIg1C,GACpC4N,EAAqB1N,EAAQwL,WAEnC1N,EAAS77B,GAAG1hB,KAAK,IAEjB,IAAK,IAAIwnD,EAAM,EAAGA,EAAM2F,EAAmB3sD,OAAQgnD,IAAO,CACtD,IAAM4F,EAAYD,EAAmB5iD,IAAIi9C,GACnC,KAAazF,EAAK4I,UAAUyC,EAAGniC,EAAGmiC,EAAG7yB,EAAG,CAACD,SAAS,IAAM,GAAvDE,EAAG,KAAEhC,EAAG,KACf+kB,EAAS77B,GAAG69B,GAAOv/C,KAAK,CAACw6B,EAAKhC,IAE9B40B,EAAGrgB,QACP,CAEAogB,EAAmBpgB,SACnB0S,EAAQ1S,QACZ,CAEAkgB,EAAUlgB,QACd,IAEA4f,EAAU5f,SACVmU,EAAOnU,SACPoU,EAAOpU,SAEA,CAAP,EAAOwQ,05ECvFX,SAAS8P,GAAkD/jB,GACvD,OAAOA,EAAI35B,WACf,CAGA,kBAWI,WAAYoyC,EAAY94B,GAAxB,WAII,GAHAzrB,KAAKukD,KAAOA,EACZvkD,KAAKyrB,KAAOA,EAER84B,EAAKC,GAAKD,EAAKE,IAAMh5B,EAAK/oB,OAC1B,KAAM,qBAAc+oB,EAAK/oB,OAAM,gDAAwC6hD,EAAKC,GAAE,cAAMD,EAAKE,GAAE,sBAAcF,EAAKC,GAAKD,EAAKE,GAAE,YAG9HzkD,KAAK8vD,cAAgB,IAAIrU,GAAM,SAAO5iB,GAAsB,yFACjD,SAAMk2B,GAAe/uD,KAAKyrB,KAAMzrB,KAAKukD,KAAM1rB,WAAlD,MAAO,CAAP,EAAO,mBAEf,CA2CJ,OAxCW,YAAAwrB,eAAP,WAEI,IAAM0L,EAAW/vD,KAAKyrB,KAStB,OAPIskC,aAAoBzgD,aACbygD,EAGA,IAAI5gD,YAAY4gD,EAAS7vD,OAIxC,EAEa,YAAA+/C,YAAb,SAAyBpnB,+FACd,SAAM74B,KAAK8vD,cAAcn3B,SAASE,WAAzC,MAAO,CAAP,EAAO,kBAYG,EAAAm3B,gBAAd,SAA4D/vC,OAAqC,wDAC7F,SAAUgwC,EAAmBC,EAAmBjwC,6FACzB,KAAAiwC,GAAG,iDAAX7E,EAAI,QACX,GAAMprC,EAAKorC,YAAX,yNAIR,IAAM8E,EAAYN,GAAoBl4C,EAAK,GAAG8T,MACxC2kC,EAAcr4B,EAAA,WAAI,EAAD,SAAIpgB,EAAK0J,KAAI,SAAAvd,GAAK,OAAAA,EAAE2nB,IAAF,MAAO,IAC1C4kC,EAAW,IAAIF,EAAUF,EAAaG,GAAa,SAACtsD,GAAwB,OAAAmc,EAAI,sBAAInc,IAAC,GAAT,KAElF,OAAO,IAAIwsD,EAAe34C,EAAK,GAAG4sC,KAAM8L,EAC5C,EACJ,EAjEA,GA8EA,cAYI,WAAY9L,EAAYphD,EAAc+gB,EAAc2U,GAChDA,OAAgB1sB,IAAT0sB,EAAqB,CAAC,EAAGA,EAEhC74B,KAAKmD,EAAI,IAAImtD,GAAe/L,EAAMphD,GAClCnD,KAAKkkB,EAAI,IAAIosC,GAAe/L,EAAMrgC,GAClClkB,KAAKuwD,iBAAmCpkD,IAArB0sB,EAAK03B,YAA4B,OAAS13B,EAAK03B,WACtE,CAyCJ,OAvCW,YAAAlM,eAAP,WAEI,IAAMmM,EAAQxwD,KAAKmD,EAAEsoB,KACfglC,EAAQzwD,KAAKkkB,EAAEuH,KAKrB,MAAO,CAACtoB,EAHOqtD,aAAiBlhD,aAAekhD,EAAQ,IAAIrhD,YAAYqhD,EAAMtwD,QAGjCgkB,EAF7BusC,aAAiBnhD,aAAemhD,EAAQ,IAAIthD,YAAYshD,EAAMvwD,QAGjF,EAEO,YAAA4lD,gBAAP,SAAuB4K,EAAgBC,GAAvC,WACUC,EAAW5wD,KAAKukD,KAAKsM,eAAeH,EAAQC,GAE5CG,EAAW,SAACrlC,GAId,IAHA,IACMslC,EAAW,IADClB,GAAoBpkC,GACrB,CAAcmlC,EAASpM,GAAKoM,EAASnM,IAE7C5jD,EAAI,EAAGA,EAAI+vD,EAASpM,GAAI3jD,IAC7B,IAAK,IAAI6tB,EAAI,EAAIA,EAAIkiC,EAASnM,GAAI/1B,IAAK,CACnC,IAAMsiC,EAAUnwD,EAAI6vD,EAAS,EAAKnM,KAAKC,GAAK91B,EAAIiiC,EAGhDI,EAFYlwD,EAAI+vD,EAASpM,GAAK91B,GAEdjD,EAAKulC,EACzB,CAGJ,OAAOD,CACX,EAEME,EAASH,EAAS9wD,KAAKmD,EAAEsoB,MACzBylC,EAASJ,EAAS9wD,KAAKkkB,EAAEuH,MAE/B,OAAO,IAAI0lC,EAAeP,EAAUK,EAAQC,EAAQ,CAACX,YAAavwD,KAAKuwD,aAC3E,EAEA,sBAAW,mBAAI,KAAf,WACI,OAAOvwD,KAAKmD,EAAEohD,IAClB,kCACJ,EA3DA,GA8DA,cASI,WAAYA,EAAYsF,GACpB7pD,KAAK6pD,SAAWA,EAChB7pD,KAAKukD,KAAOA,CAChB,CAgBJ,OAbW,YAAAqF,mBAAP,sBACUC,EAAW7pD,KAAK6pD,SAChB1mD,EAAI,IAAI4lC,GAAa/oC,KAAKukD,KAAKC,GAAKxkD,KAAKukD,KAAKE,IAAIhvB,KAAK8rB,WAAW,QAClEr9B,EAAI,IAAI6kB,GAAa/oC,KAAKukD,KAAKC,GAAKxkD,KAAKukD,KAAKE,IAAIhvB,KAAK8rB,WAAW,QAQxE,OANAsI,EAASn9C,SAAQ,SAAAq9C,GACb,IAAMt1C,EAAMs1C,EAAKpyB,KAAO,EAAK4sB,KAAKC,GAAKuF,EAAKryB,KAC5Cv0B,EAAEsR,GAAOs1C,EAAKqH,IACdltC,EAAEzP,GAAOs1C,EAAKsH,GAClB,IAEO,IAAIF,GAAenxD,KAAKukD,KAAMphD,EAAG+gB,EAAG,CAACqsC,YAAa,QAC7D,EACJ,EA5BA,6lECzEA,cAUI,WAAY3rD,EAAgB0sD,EAAuB9M,EAAYC,GAA/D,WACIzkD,KAAK4E,KAAOA,EACZ5E,KAAKsxD,aAAeA,EACpBtxD,KAAKwkD,GAAKA,EACVxkD,KAAKykD,GAAKA,EAEVzkD,KAAKuxD,aAAe,IAAI9V,GAAM,SAACxiB,GAC3B,IAAMu4B,EAAStwD,KAAKiD,IAAIjD,KAAKQ,MAAM,EAAK8iD,GAAK,IAAK,IAC5CiN,EAASvwD,KAAKiD,IAAIjD,KAAKQ,MAAM,EAAK+iD,GAAK,IAAK,IAClD,OAnFZ,SAAoCxrB,EAA8BsrB,EAAYmN,yHASpD,OANhBC,EAAoB,GAAK,GAF/BD,OAA8BvlD,IAAhBulD,EAA4BA,EAAanN,GAERC,IACzCoN,EAAoB,GAAK,EAAIF,EAAYjN,IAEzCoN,EAA6BtN,EAAKC,GAAKD,EAAKE,IAAOiN,EAAYlN,GAAKkN,EAAYjN,IAEhF,EAAuCF,EAAKuN,iBAArCC,EAAU,OAAQC,EAAU,OACnB,GAAM54B,EAAa64B,+BAA+BF,EAAYC,EAAYzN,EAAKC,GAAID,EAAKE,GAAIkN,EAAmBC,WAErI,IAFMM,EAAgB,SAEbC,EAAM,EAAGA,EAAMD,EAA8B,eAAExvD,OAAQyvD,IAC5DD,EAA8B,eAAEC,IAAQN,EAO5C,OAJM7Y,EAAW,IAAIxM,GAAUvT,EAAIi5B,EAAwB,SAAG,EAAGj5B,EAAGggB,gBAC9DwG,EAAY,IAAIjT,GAAUvT,EAAIi5B,EAA0B,WAAG,EAAGj5B,EAAGggB,gBACjEmZ,EAAiB,IAAI5lB,GAAUvT,EAAIi5B,EAA8B,eAAG,EAAGj5B,EAAGggB,gBAEzE,CAAP,EAAO,CAAC,SAAYD,EAAU,UAAayG,EAAW,SAAY2S,WAgEnDC,CAAqBp5B,EAAI,EAAKq5B,KAAK,CAAC9N,GAAIgN,EAAQ/M,GAAIgN,IAAU,EACzE,IAEAzxD,KAAKuyD,uBAAyB,IAAI9W,GAAM,SAACxiB,EAA8BnB,EAAkBmtB,GACrF,OAjEZ,SAAuChsB,EAA8BsrB,EAAYzsB,EAAkBmtB,+GAE3E,OADd,EAAuCV,EAAKuN,iBAArCC,EAAU,OAAQC,EAAU,OACrB,GAAM54B,EAAao5B,eAAeT,EAAYC,EAAYzN,EAAKC,GAAID,EAAKE,GAAI3sB,EAAUmtB,WAK1G,OALMwN,EAAc,SAEdzZ,EAAW,IAAIxM,GAAUvT,EAAIw5B,EAAiB,IAAG,EAAGx5B,EAAGggB,gBACvDwG,EAAY,IAAIjT,GAAUvT,EAAIw5B,EAAwB,WAAG,EAAGx5B,EAAGggB,gBAE9D,CAAP,EAAO,CAAC,SAAYD,EAAU,UAAayG,WA0D5BiT,CAAwBz5B,EAAI,EAAMnB,EAAUmtB,EACvD,IAEAjlD,KAAK2yD,sBAAwB,IAAIlX,GAAM,SAACxiB,GACpC,OA3DZ,SAAmCA,EAA8BsrB,GAC7D,IAAMqO,EAASrO,EAAKuN,iBAEfvN,EAAK+M,cAENxjD,QAAQsP,KAAK,oGAKjB,IAFA,IAAMy1C,EAAW,IAAI9pB,GAAa6pB,EAAOE,KAAKpwD,QAErCyvD,EAAM,EAAGA,EAAMS,EAAOE,KAAKpwD,OAAQyvD,IAAO,CAC/C,IAAMn1B,EAAM41B,EAAOG,KAAKZ,GAClBn3B,EAAM43B,EAAOE,KAAKX,GAElB,KAAS5N,EAAK4I,UAAUnwB,EAAKhC,GAAI,GAAhCvN,EAAC,KAAEsP,EAAC,KACL,KAAyBwnB,EAAK4I,UAAUnwB,EAAM,IAAMhC,GAAI,GAAvDg4B,EAAS,KAAEC,EAAS,KAC3BJ,EAASV,GAAOjxD,KAAK+7B,MAAMg2B,EAAYl2B,EAAGi2B,EAAYvlC,EAC1D,CAEM,MAAgC8L,EAAyBN,GAAI,GAE7Di6B,EAA0B,CAC5Bz5B,OAHS,SAGO70B,KAHD,OAGa80B,cAHE,gBAG4BqT,MAAO,IAAI59B,YAAY0jD,EAAS3yD,QAC1FkkB,MAAOmgC,EAAKC,GAAIlQ,OAAQiQ,EAAKE,GAAIrX,WAAYnU,EAAGoU,QAIpD,MAAO,CAAC,SADQ,IAAIP,GAAW7T,EAAIi6B,GAEvC,CA+BmBC,CAA0Bl6B,EAAI,EACzC,GACJ,CAoBJ,OAXiB,YAAAyrB,cAAb,SAA2BzrB,+FAChB,SAAMj5B,KAAKuxD,aAAa54B,SAASM,WAAxC,MAAO,CAAP,EAAO,kBAGE,YAAAotB,uBAAb,SAAoCptB,EAA8BnB,EAAkBmtB,+FACzE,SAAMjlD,KAAKuyD,uBAAuB55B,SAASM,EAAInB,EAAUmtB,WAAhE,MAAO,CAAP,EAAO,kBAGJ,YAAAsB,yBAAP,SAAgCttB,GAC5B,OAAOj5B,KAAK2yD,sBAAsBh6B,SAASM,EAC/C,EACJ,EAjDA,GAoDA,eAkBI,WAAYurB,EAAYC,EAAY2O,EAAgBC,EAAgBC,EAAgBC,GAChF,QAAK,UAAC,UAAU,EAAM/O,EAAIC,IAAG,KAE7B,EAAK2O,OAASA,EACd,EAAKC,OAASA,EACd,EAAKC,OAASA,EACd,EAAKC,OAASA,EAEd,IAAMC,GAAQ,EAAKF,OAAS,EAAKF,SAAW,EAAK5O,GAAK,GAChDiP,GAAQ,EAAKF,OAAS,EAAKF,SAAW,EAAK5O,GAAK,UAEtD,EAAKiP,SAAW,IAAIjY,GAAM,WAItB,IAHA,IAAMsX,EAAO,IAAIzjD,aAAa,EAAKk1C,GAAK,EAAKC,IACvCqO,EAAO,IAAIxjD,aAAa,EAAKk1C,GAAK,EAAKC,IAEpC5jD,EAAI,EAAGA,EAAI,EAAK2jD,GAAI3jD,IACzB,IAAK,IAAI6tB,EAAI,EAAGA,EAAI,EAAK+1B,GAAI/1B,IAAK,CAC9B,IAAMja,EAAM5T,EAAI6tB,EAAI,EAAK81B,GAEzBuO,EAAKt+C,GAAO,EAAK2+C,OAASvyD,EAAI2yD,EAC9BV,EAAKr+C,GAAO,EAAK4+C,OAAS3kC,EAAI+kC,CAClC,CAGJ,MAAO,CAAC,KAAQV,EAAM,KAAQD,EAClC,IAEA,EAAKa,SAAW,IAAIlY,GAAM,WAItB,IAHA,IAAMhuB,EAAI,IAAIne,aAAa,EAAKk1C,IAC1BznB,EAAI,IAAIztB,aAAa,EAAKm1C,IAEvB5jD,EAAI,EAAGA,EAAI,EAAK2jD,GAAI3jD,IACzB4sB,EAAE5sB,GAAK,EAAKuyD,OAASvyD,EAAI2yD,EAG7B,IAAK,IAAI9kC,EAAI,EAAGA,EAAI,EAAK+1B,GAAI/1B,IACzBqO,EAAErO,GAAK,EAAK2kC,OAAS3kC,EAAI+kC,EAG7B,MAAO,CAAChmC,EAAGA,EAAGsP,EAAGA,EACrB,KACJ,CA4CJ,OAvG8B,QA6DnB,YAAAu1B,KAAP,SAAYz5B,GASR,OAAO,IAAI+6B,OAPYznD,KADvB0sB,OAAgB1sB,IAAT0sB,EAAqBA,EAAO,CAAC,GACpB2rB,GAAmB3rB,EAAK2rB,GAAKxkD,KAAKwkD,QAC3Br4C,IAAZ0sB,EAAK4rB,GAAmB5rB,EAAK4rB,GAAKzkD,KAAKykD,QACnBt4C,IAAhB0sB,EAAKu6B,OAAuBv6B,EAAKu6B,OAASpzD,KAAKozD,YAC/BjnD,IAAhB0sB,EAAKw6B,OAAuBx6B,EAAKw6B,OAASrzD,KAAKqzD,YAC/BlnD,IAAhB0sB,EAAKy6B,OAAuBz6B,EAAKy6B,OAAStzD,KAAKszD,YAC/BnnD,IAAhB0sB,EAAK06B,OAAuB16B,EAAK06B,OAASvzD,KAAKuzD,OAGlE,EAKO,YAAAzB,eAAP,WACI,OAAO9xD,KAAK0zD,SAAS/6B,UACzB,EAEO,YAAAu2B,cAAP,WACI,OAAOlvD,KAAK2zD,SAASh7B,UACzB,EAEO,YAAAw0B,UAAP,SAAiB1/B,EAAWsP,EAAWlE,GACnC,MAAO,CAACpL,EAAGsP,EACf,EAEO,YAAA8zB,eAAP,SAAsBH,EAAgBC,GAClC,IAAM6C,GAAQxzD,KAAKszD,OAAStzD,KAAKozD,QAAUpzD,KAAKwkD,GAC1CiP,GAAQzzD,KAAKuzD,OAASvzD,KAAKqzD,QAAUrzD,KAAKykD,GAE1CD,EAAKtjD,KAAKm7C,KAAKr8C,KAAKwkD,GAAKkM,GACzBjM,EAAKvjD,KAAKm7C,KAAKr8C,KAAKykD,GAAKkM,GACzBkD,GAAa7zD,KAAKwkD,GAAK,GAAKkM,EAC5BoD,GAAa9zD,KAAKykD,GAAK,GAAKkM,EAMlC,OAAO,IAAIiD,EAAgBpP,EAAIC,EALhBzkD,KAAKozD,OACLpzD,KAAKqzD,OACLrzD,KAAKszD,OAASO,EAAYL,EAC1BxzD,KAAKuzD,OAASO,EAAYL,EAG7C,EACJ,EAvGA,CAA8BM,IA0G9B,eAyBI,WAAYvP,EAAYC,EAAYuP,EAAgBC,EAAgBC,EAAmBd,EAAgBC,EAAgBC,EAAgBC,GACnI,QAAK,UAAC,aAAa,EAAM/O,EAAIC,IAAG,KAEhC,EAAKuP,OAASA,EACd,EAAKC,OAASA,EACd,EAAKC,UAAYA,EACjB,EAAKd,OAASA,EACd,EAAKC,OAASA,EACd,EAAKC,OAASA,EACd,EAAKC,OAASA,EACd,EAAKY,M5BzIb,SAAsBt5B,GAClB,IAAMa,EAAUx6B,KAAKk6B,GAAK,IACpB64B,EAASp5B,EAAOo5B,OAASv4B,EACzBs4B,EAASn5B,EAAOm5B,OAASt4B,EACzBw4B,EAAYr5B,EAAOq5B,UAAYx4B,EAE/B04B,EAAalzD,KAAKg6B,IAAI+4B,GACtBI,EAAanzD,KAAKq6B,IAAI04B,GAoC5B,OAAO,SAACnwD,EAAWwE,EAAWuwB,GAE1B,OADAA,OAAgB1sB,IAAT0sB,EAAqB,CAACiE,SAAS,GAASjE,GACnCiE,QAnBiB,SAACw3B,EAAeC,GAC7CD,GAAS54B,EACT64B,GAAS74B,EAET,IAAM84B,EAAYtzD,KAAKg6B,IAAIq5B,GACrBE,EAAYvzD,KAAKq6B,IAAIg5B,GACrBG,EAAiBxzD,KAAKg6B,IAAIo5B,EAAQN,GAClCW,EAAiBzzD,KAAKq6B,IAAI+4B,EAAQN,GAElCh5B,EAAM95B,KAAK0zD,KAAKR,EAAaI,EAAYH,EAAaI,EAAYE,GACpE33B,EAAMk3B,EAAYhzD,KAAK+7B,MAAOw3B,EAAYC,EAAkBN,EAAaK,EAAYE,EAAiBN,EAAaG,GAIvH,OAFIF,EAAQpzD,KAAKk6B,KAAIk5B,GAAS,EAAIpzD,KAAKk6B,IAEhC,CAAC4B,EAAMtB,EAASV,EAAMU,EACjC,CAI0Bm5B,CAAyB/wD,EAAGwE,GApC7B,SAAC00B,EAAahC,GACnCgC,GAAOtB,EACPV,GAAOU,EAEP,IAAMT,EAAU/5B,KAAKg6B,IAAIF,GACnB85B,EAAU5zD,KAAKq6B,IAAIP,GACnB+5B,EAAe7zD,KAAKg6B,IAAI8B,EAAMk3B,GAC9Bc,EAAe9zD,KAAKq6B,IAAIyB,EAAMk3B,GAE9BK,EAAQrzD,KAAK0zD,KAAKR,EAAan5B,EAAUo5B,EAAaS,EAAUE,GAClEV,EAAQN,EAAS9yD,KAAK+7B,MAAO63B,EAAUC,EAAgBX,EAAaU,EAAUE,EAAeX,EAAap5B,GAI9G,OAFIq5B,EAAQpzD,KAAKk6B,KAAIk5B,GAAS,EAAIpzD,KAAKk6B,IAEhC,CAACk5B,EAAQ54B,EAAS64B,EAAQ74B,EACrC,CAqB2Du5B,CAAiBnxD,EAAGwE,EAC/E,CACJ,C4B0FqB4sD,CAAa,CAAClB,OAAQA,EAAQC,OAAQA,EAAQC,UAAWA,IAEtE,IAAMV,GAAQ,EAAKF,OAAS,EAAKF,SAAW,EAAK5O,GAAK,GAChDiP,GAAQ,EAAKF,OAAS,EAAKF,SAAW,EAAK5O,GAAK,UAEtD,EAAKiP,SAAW,IAAIjY,GAAM,WAItB,IAHA,IAAMsX,EAAO,IAAIzjD,aAAa,EAAKk1C,GAAK,EAAKC,IACvCqO,EAAO,IAAIxjD,aAAa,EAAKk1C,GAAK,EAAKC,IAEpC5jD,EAAI,EAAGA,EAAI,EAAK2jD,GAAI3jD,IAEzB,IADA,IAAMyzD,EAAQ,EAAKlB,OAASvyD,EAAI2yD,EACvB9kC,EAAI,EAAGA,EAAI,EAAK+1B,GAAI/1B,IAAK,CAC9B,IAAM6lC,EAAQ,EAAKlB,OAAS3kC,EAAI+kC,EAE1B,KAAa,EAAKU,MAAMG,EAAOC,GAAM,GAApCv3B,EAAG,KAAEhC,EAAG,KACTvmB,EAAM5T,EAAI6tB,EAAI,EAAK81B,GACzBuO,EAAKt+C,GAAOuoB,EACZ81B,EAAKr+C,GAAOumB,CAChB,CAGJ,MAAO,CAAC+3B,KAAMA,EAAMD,KAAMA,EAC9B,IAEA,EAAKa,SAAW,IAAIlY,GAAM,WAItB,IAHA,IAAMhuB,EAAI,IAAIne,aAAa,EAAKk1C,IAC1BznB,EAAI,IAAIztB,aAAa,EAAKm1C,IAEvB5jD,EAAI,EAAGA,EAAI,EAAK2jD,GAAI3jD,IACzB4sB,EAAE5sB,GAAK,EAAKuyD,OAASvyD,EAAI2yD,EAG7B,IAAK,IAAI9kC,EAAI,EAAGA,EAAI,EAAK+1B,GAAI/1B,IACzBqO,EAAErO,GAAK,EAAK2kC,OAAS3kC,EAAI+kC,EAG7B,MAAO,CAAChmC,EAAGA,EAAGsP,EAAGA,EACrB,KACJ,CA+CJ,OAxHqC,QA2E1B,YAAAu1B,KAAP,SAAYz5B,GAER,IAAM2rB,OAAiBr4C,KADvB0sB,OAAgB1sB,IAAT0sB,EAAqBA,EAAO,CAAC,GACpB2rB,GAAmB3rB,EAAK2rB,GAAKxkD,KAAKwkD,GAC5CC,OAAiBt4C,IAAZ0sB,EAAK4rB,GAAmB5rB,EAAK4rB,GAAKzkD,KAAKykD,GAC5C2O,OAAyBjnD,IAAhB0sB,EAAKu6B,OAAuBv6B,EAAKu6B,OAASpzD,KAAKozD,OACxDC,OAAyBlnD,IAAhB0sB,EAAKw6B,OAAuBx6B,EAAKw6B,OAASrzD,KAAKqzD,OACxDC,OAAyBnnD,IAAhB0sB,EAAKy6B,OAAuBz6B,EAAKy6B,OAAStzD,KAAKszD,OACxDC,OAAyBpnD,IAAhB0sB,EAAK06B,OAAuB16B,EAAK06B,OAASvzD,KAAKuzD,OAE9D,OAAO,IAAI4B,EAAuB3Q,EAAIC,EAAIzkD,KAAKg0D,OAAQh0D,KAAKi0D,OAAQj0D,KAAKk0D,UAAWd,EAAQC,EAAQC,EAAQC,EAChH,EAKO,YAAAzB,eAAP,WACI,OAAO9xD,KAAK0zD,SAAS/6B,UACzB,EAEO,YAAAu2B,cAAP,WACI,OAAOlvD,KAAK2zD,SAASh7B,UACzB,EAEO,YAAAw0B,UAAP,SAAiB1/B,EAAWsP,EAAWlE,GAEnC,IAAMiE,EAAU,YADhBjE,OAAgB1sB,IAAT0sB,EAAqB,CAAC,EAAGA,IACIA,EAAKiE,QAEzC,OAAO98B,KAAKm0D,MAAM1mC,EAAGsP,EAAG,CAACD,SAAUA,GACvC,EAEO,YAAA+zB,eAAP,SAAsBH,EAAgBC,GAClC,IAAM6C,GAAQxzD,KAAKszD,OAAStzD,KAAKozD,QAAUpzD,KAAKwkD,GAC1CiP,GAAQzzD,KAAKuzD,OAASvzD,KAAKqzD,QAAUrzD,KAAKykD,GAE1CD,EAAKtjD,KAAKm7C,KAAKr8C,KAAKwkD,GAAKkM,GACzBjM,EAAKvjD,KAAKm7C,KAAKr8C,KAAKykD,GAAKkM,GACzBkD,GAAa7zD,KAAKwkD,GAAK,GAAKkM,EAC5BoD,GAAa9zD,KAAKykD,GAAK,GAAKkM,EAC5ByC,EAASpzD,KAAKozD,OACdC,EAASrzD,KAAKqzD,OACdC,EAAStzD,KAAKszD,OAASO,EAAYL,EACnCD,EAASvzD,KAAKuzD,OAASO,EAAYL,EAEzC,OAAO,IAAI0B,EAAuB3Q,EAAIC,EAAIzkD,KAAKg0D,OAAQh0D,KAAKi0D,OAAQj0D,KAAKk0D,UAAWd,EAAQC,EAAQC,EAAQC,EAChH,EACJ,EAxHA,CAAqCQ,IA2HrC,eAyBI,WAAYvP,EAAYC,EAAY9oB,EAAeC,EAAeC,EACtDu5B,EAAcC,EAAcC,EAAcC,GAClD,QAAK,UAAC,OAAO,EAAM/Q,EAAIC,IAAG,KAE1B,EAAK9oB,MAAQA,EACb,EAAKC,MAAQA,EACb,EAAKC,QAAUA,EACf,EAAKu5B,KAAOA,EACZ,EAAKC,KAAOA,EACZ,EAAKC,KAAOA,EACZ,EAAKC,KAAOA,EACZ,EAAKC,IAAM56B,EAAsB,CAACe,MAAOA,EAAOC,MAAOA,EAAOC,QAASA,IAEvE,IAAM45B,GAAM,EAAKH,KAAO,EAAKF,OAAS,EAAK5Q,GAAK,GAC1C2J,GAAM,EAAKoH,KAAO,EAAKF,OAAS,EAAK5Q,GAAK,UAEhD,EAAKiP,SAAW,IAAIjY,GAAM,WAItB,IAHA,IAAMsX,EAAO,IAAIzjD,aAAa,EAAKk1C,GAAK,EAAKC,IACvCqO,EAAO,IAAIxjD,aAAa,EAAKk1C,GAAK,EAAKC,IAEpC5jD,EAAI,EAAGA,EAAI,EAAK2jD,GAAI3jD,IAEzB,IADA,IAAM4sB,EAAI,EAAK2nC,KAAOv0D,EAAI40D,EACjB/mC,EAAI,EAAGA,EAAI,EAAK+1B,GAAI/1B,IAAK,CAC9B,IAAMqO,EAAI,EAAKs4B,KAAO3mC,EAAIy/B,EAEpB,KAAa,EAAKqH,IAAI/nC,EAAGsP,EAAG,CAACD,SAAS,IAAM,GAA3CE,EAAG,KAAEhC,EAAG,KACTvmB,EAAM5T,EAAI6tB,EAAI,EAAK81B,GACzBuO,EAAKt+C,GAAOuoB,EACZ81B,EAAKr+C,GAAOumB,CAChB,CAGJ,MAAO,CAAC+3B,KAAMA,EAAMD,KAAMA,EAC9B,IAEA,EAAKa,SAAW,IAAIlY,GAAM,WAItB,IAHA,IAAMhuB,EAAI,IAAIne,aAAa,EAAKk1C,IAC1BznB,EAAI,IAAIztB,aAAa,EAAKm1C,IAEvB5jD,EAAI,EAAGA,EAAI,EAAK2jD,GAAI3jD,IACzB4sB,EAAE5sB,GAAK,EAAKu0D,KAAOv0D,EAAI40D,EAG3B,IAAK,IAAI/mC,EAAI,EAAGA,EAAI,EAAK+1B,GAAI/1B,IACzBqO,EAAErO,GAAK,EAAK2mC,KAAO3mC,EAAIy/B,EAG3B,MAAO,CAAC1gC,EAAGA,EAAGsP,EAAGA,EACrB,KACJ,CA+CJ,OAzH0B,QA4Ef,YAAAu1B,KAAP,SAAYz5B,GAER,IAAM2rB,OAAiBr4C,KADvB0sB,OAAgB1sB,IAAT0sB,EAAqBA,EAAO,CAAC,GACpB2rB,GAAmB3rB,EAAK2rB,GAAKxkD,KAAKwkD,GAC5CC,OAAiBt4C,IAAZ0sB,EAAK4rB,GAAmB5rB,EAAK4rB,GAAKzkD,KAAKykD,GAC5C2Q,OAAqBjpD,IAAd0sB,EAAKu8B,KAAqBv8B,EAAKu8B,KAAOp1D,KAAKo1D,KAClDC,OAAqBlpD,IAAd0sB,EAAKw8B,KAAqBx8B,EAAKw8B,KAAOr1D,KAAKq1D,KAClDC,OAAqBnpD,IAAd0sB,EAAKy8B,KAAqBz8B,EAAKy8B,KAAOt1D,KAAKs1D,KAClDC,OAAqBppD,IAAd0sB,EAAK08B,KAAqB18B,EAAK08B,KAAOv1D,KAAKu1D,KAExD,OAAO,IAAIG,EAAYlR,EAAIC,EAAIzkD,KAAK27B,MAAO37B,KAAK47B,MAAO57B,KAAK67B,QAASu5B,EAAMC,EAAMC,EAAMC,EAC3F,EAKO,YAAAzD,eAAP,WACI,OAAO9xD,KAAK0zD,SAAS/6B,UACzB,EAEO,YAAAu2B,cAAP,WACI,OAAOlvD,KAAK2zD,SAASh7B,UACzB,EAEO,YAAAw0B,UAAP,SAAiB1/B,EAAWsP,EAAWlE,GAEnC,IAAMiE,EAAU,YADhBjE,OAAgB1sB,IAAT0sB,EAAqB,CAAC,EAAGA,IACIA,EAAKiE,QAEzC,OAAO98B,KAAKw1D,IAAI/nC,EAAGsP,EAAG,CAACD,QAASA,GACpC,EAEO,YAAA+zB,eAAP,SAAsBH,EAAgBC,GAClC,IAAM8E,GAAMz1D,KAAKs1D,KAAOt1D,KAAKo1D,MAAQp1D,KAAKwkD,GACpC2J,GAAMnuD,KAAKu1D,KAAOv1D,KAAKq1D,MAAQr1D,KAAKykD,GAEpCD,EAAKtjD,KAAKm7C,KAAKr8C,KAAKwkD,GAAKkM,GACzBjM,EAAKvjD,KAAKm7C,KAAKr8C,KAAKykD,GAAKkM,GACzBkD,GAAa7zD,KAAKwkD,GAAK,GAAKkM,EAC5BoD,GAAa9zD,KAAKykD,GAAK,GAAKkM,EAC5ByE,EAAOp1D,KAAKo1D,KACZC,EAAOr1D,KAAKq1D,KACZC,EAAOt1D,KAAKs1D,KAAOzB,EAAY4B,EAC/BF,EAAOv1D,KAAKu1D,KAAOzB,EAAY3F,EAErC,OAAO,IAAIuH,EAAYlR,EAAIC,EAAIzkD,KAAK27B,MAAO37B,KAAK47B,MAAO57B,KAAK67B,QAASu5B,EAAMC,EAAMC,EAAMC,EAC3F,EACJ,EAzHA,CAA0BxB,ICxVpB4B,GAAY,CACdC,Qf4LY,SAAC3f,EAAmBC,EAAmBC,GACnD,OAAON,GAASC,UAAU,UAAW,UAAWG,EAAWC,EAAWC,EAC1E,Ee7LI0f,QfgLY,SAAC5f,EAAmBC,EAAmBC,GACnD,OAAON,GAASC,UAAU,UAAW,UAAWG,EAAWC,EAAWC,EAC1E,EejLIc,cAAeA,GACfG,cAAeA,GACfC,QAASA,GACTC,OAAQA,GACRC,QAASA,GACTC,qBAAsBA,IAO1B,SAASse,KACLhH,IACJ","sources":["webpack://apgl/webpack/universalModuleDefinition","webpack://apgl/./node_modules/ieee754/index.js","webpack://apgl/./node_modules/kd-tree-javascript/kdTree-min.js","webpack://apgl/./node_modules/pbf/index.js","webpack://apgl/./src/glsl/billboard_fragment.glsl","webpack://apgl/./src/glsl/billboard_vertex.glsl","webpack://apgl/./src/glsl/contourfill_fragment.glsl","webpack://apgl/./src/glsl/contourfill_vertex.glsl","webpack://apgl/./src/glsl/paintball_fragment.glsl","webpack://apgl/./src/glsl/paintball_vertex.glsl","webpack://apgl/./src/glsl/polyline_fragment.glsl","webpack://apgl/./src/glsl/polyline_vertex.glsl","webpack://apgl/./src/glsl/text_fragment.glsl","webpack://apgl/./src/glsl/text_vertex.glsl","webpack://apgl/./src/cpp/marchingsquares.js","webpack://apgl/webpack/bootstrap","webpack://apgl/webpack/runtime/compat get default export","webpack://apgl/webpack/runtime/define property getters","webpack://apgl/webpack/runtime/get javascript chunk filename","webpack://apgl/webpack/runtime/global","webpack://apgl/webpack/runtime/hasOwnProperty shorthand","webpack://apgl/webpack/runtime/make namespace object","webpack://apgl/webpack/runtime/publicPath","webpack://apgl/webpack/runtime/jsonp chunk loading","webpack://apgl/./node_modules/comlink/dist/esm/comlink.mjs","webpack://apgl/./src/utils.ts","webpack://apgl/./src/AutumnTypes.ts","webpack://apgl/./src/PlotComponent.ts","webpack://apgl/./src/Map.ts","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/messages.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/primordials.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/arrayIterator.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/is.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/brand.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/converter.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/spec.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/Float16Array.mjs","webpack://apgl/./node_modules/autumn-wgl/lib/WGLBuffer.js","webpack://apgl/./node_modules/autumn-wgl/lib/utils.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLTexture.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLProgram.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLFramebuffer.js","webpack://apgl/./src/Colormap.ts","webpack://apgl/./src/PolylineCollection.ts","webpack://apgl/./src/TextCollection.ts","webpack://apgl/./node_modules/potpack/index.js","webpack://apgl/./src/Contour.ts","webpack://apgl/./src/Fill.ts","webpack://apgl/./src/BillboardCollection.ts","webpack://apgl/./src/Barbs.ts","webpack://apgl/./src/Paintball.ts","webpack://apgl/./src/Hodographs.ts","webpack://apgl/./src/PlotLayer.ts","webpack://apgl/./src/ColorBar.ts","webpack://apgl/./src/ContourCreator.ts","webpack://apgl/./src/RawField.ts","webpack://apgl/./src/Grid.ts","webpack://apgl/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apgl\"] = factory();\n\telse\n\t\troot[\"apgl\"] = factory();\n})(this, () => {\nreturn ","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/**\n * k-d Tree JavaScript - V 1.01\n *\n * https://github.com/ubilabs/kd-tree-javascript\n *\n * @author Mircea Pricop <pricop@ubilabs.net>, 2012\n * @author Martin Kleppe <kleppe@ubilabs.net>, 2012\n * @author Ubilabs http://ubilabs.net, 2012\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\n */!function(t,n){\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(\"object\"==typeof exports?exports:t)}(this,function(t){function n(t,n,o){this.obj=t,this.left=null,this.right=null,this.parent=o,this.dimension=n}function o(t){this.content=[],this.scoreFunction=t}o.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var n=this.content.length,o=0;o<n;o++)if(this.content[o]==t){var i=this.content.pop();return void(o!=n-1&&(this.content[o]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(o):this.sinkDown(o)))}throw new Error(\"Node not found.\")},size:function(){return this.content.length},bubbleUp:function(t){for(var n=this.content[t];t>0;){var o=Math.floor((t+1)/2)-1,i=this.content[o];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[o]=n,this.content[t]=i,t=o}},sinkDown:function(t){for(var n=this.content.length,o=this.content[t],i=this.scoreFunction(o);;){var e=2*(t+1),r=e-1,l=null;if(r<n){var u=this.content[r],h=this.scoreFunction(u);h<i&&(l=r)}if(e<n){var s=this.content[e];this.scoreFunction(s)<(null==l?i:h)&&(l=e)}if(null==l)break;this.content[t]=this.content[l],this.content[l]=o,t=l}}},t.kdTree=function(t,i,e){function r(t,o,i){var l,u,h=o%e.length;return 0===t.length?null:1===t.length?new n(t[0],h,i):(t.sort(function(t,n){return t[e[h]]-n[e[h]]}),l=Math.floor(t.length/2),u=new n(t[l],h,i),u.left=r(t.slice(0,l),o+1,u),u.right=r(t.slice(l+1),o+1,u),u)}var l=this;Array.isArray(t)?this.root=r(t,0,null):function(t){function n(t){t.left&&(t.left.parent=t,n(t.left)),t.right&&(t.right.parent=t,n(t.right))}l.root=t,n(l.root)}(t),this.toJSON=function(t){t||(t=this.root);var o=new n(t.obj,t.dimension,null);return t.left&&(o.left=l.toJSON(t.left)),t.right&&(o.right=l.toJSON(t.right)),o},this.insert=function(t){function o(n,i){if(null===n)return i;var r=e[n.dimension];return t[r]<n.obj[r]?o(n.left,n):o(n.right,n)}var i,r,l=o(this.root,null);null!==l?(i=new n(t,(l.dimension+1)%e.length,l),r=e[l.dimension],t[r]<l.obj[r]?l.left=i:l.right=i):this.root=new n(t,0,null)},this.remove=function(t){function n(o){if(null===o)return null;if(o.obj===t)return o;var i=e[o.dimension];return t[i]<o.obj[i]?n(o.left,o):n(o.right,o)}function o(t){function n(t,o){var i,r,l,u,h;return null===t?null:(i=e[o],t.dimension===o?null!==t.left?n(t.left,o):t:(r=t.obj[i],l=n(t.left,o),u=n(t.right,o),h=t,null!==l&&l.obj[i]<r&&(h=l),null!==u&&u.obj[i]<h.obj[i]&&(h=u),h))}var i,r,u;if(null===t.left&&null===t.right)return null===t.parent?void(l.root=null):(u=e[t.parent.dimension],void(t.obj[u]<t.parent.obj[u]?t.parent.left=null:t.parent.right=null));null!==t.right?(r=(i=n(t.right,t.dimension)).obj,o(i),t.obj=r):(r=(i=n(t.left,t.dimension)).obj,o(i),t.right=t.left,t.left=null,t.obj=r)}var i;null!==(i=n(l.root))&&o(i)},this.nearest=function(t,n,r){function u(o){function r(t,o){f.push([t,o]),f.size()>n&&f.pop()}var l,h,s,c,a=e[o.dimension],g=i(t,o.obj),p={};for(c=0;c<e.length;c+=1)c===o.dimension?p[e[c]]=t[e[c]]:p[e[c]]=o.obj[e[c]];h=i(p,o.obj),null!==o.right||null!==o.left?(u(l=null===o.right?o.left:null===o.left?o.right:t[a]<o.obj[a]?o.left:o.right),(f.size()<n||g<f.peek()[1])&&r(o,g),(f.size()<n||Math.abs(h)<f.peek()[1])&&null!==(s=l===o.left?o.right:o.left)&&u(s)):(f.size()<n||g<f.peek()[1])&&r(o,g)}var h,s,f;if(f=new o(function(t){return-t[1]}),r)for(h=0;h<n;h+=1)f.push([null,r]);for(l.root&&u(l.root),s=[],h=0;h<Math.min(n,f.content.length);h+=1)f.content[h][0]&&s.push([f.content[h][0].obj,f.content[h][1]]);return s},this.balanceFactor=function(){function t(n){return null===n?0:Math.max(t(n.left),t(n.right))+1}function n(t){return null===t?0:n(t.left)+n(t.right)+1}return t(l.root)/(Math.log(n(l.root))/Math.log(2))}},t.BinaryHeap=o});\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\n// Threshold chosen based on both benchmarking and knowledge about browser string\n// data structures (which currently switch structure types at 12 bytes or more)\nvar TEXT_DECODER_MIN_LENGTH = 12;\nvar utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf8');\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos;\n        var pos = this.pos;\n        this.pos = end;\n\n        if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {\n            // longer strings are fast with the built-in browser TextDecoder API\n            return readUtf8TextDecoder(this.buf, pos, end);\n        }\n        // short strings are fast with our custom implementation\n        return readUtf8(this.buf, pos, end);\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction readUtf8TextDecoder(buf, pos, end) {\n    return utf8TextDecoder.decode(buf.subarray(pos, end));\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","module.exports = \"varying highp vec2 v_tex_coord;\\n\\nuniform sampler2D u_sampler;\\nuniform lowp vec3 u_bb_color;\\n\\nvoid main() {\\n    lowp vec4 tex_color = texture2D(u_sampler, v_tex_coord);\\n    gl_FragColor = vec4(u_bb_color, tex_color.a); // mix(vec4(1.0, 0.0, 0.0, 0.5), vec4(u_bb_color, 1.0), tex_color.a);\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec3 a_pos;    // Has position, zoom, and corner info\\nattribute vec2 a_tex_coord;\\nuniform lowp float u_bb_size;\\nuniform lowp float u_map_aspect;\\nuniform lowp float u_zoom;\\nuniform highp float u_map_bearing;\\nuniform lowp float u_bb_width;  // Normalized by texture width\\nuniform lowp float u_bb_height; // Normalized by texture height\\nuniform highp float u_bb_mag_bin_size;\\n//uniform highp float u_bb_max_mag;\\nuniform highp float u_bb_mag_wrap;\\n\\nuniform sampler2D u_u_sampler;\\nuniform sampler2D u_v_sampler;\\nuniform sampler2D u_rot_sampler;\\n\\nvarying highp vec2 v_tex_coord;\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nmat4 rotationZMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( c,  s,  0., 0.,\\n                -s,  c,  0., 0.,\\n                 0., 0., 1., 0.,\\n                 0., 0., 0., 1.);\\n}\\n\\nmat4 rotationXMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( 1.,  0., 0., 0.,\\n                 0.,  c,  s,  0.,\\n                 0., -s,  c,  0.,\\n                 0.,  0., 0., 1.);\\n}\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    vec4 pivot_pos = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0);\\n    highp float zoom_corner = a_pos.z;\\n    lowp float min_zoom = floor(zoom_corner / 4.0);\\n    lowp float corner = mod(zoom_corner, 4.0);\\n\\n    highp float u = texture2D(u_u_sampler, a_tex_coord).r;\\n    highp float v = texture2D(u_v_sampler, a_tex_coord).r;\\n    highp float rot = texture2D(u_rot_sampler, a_tex_coord).r;\\n\\n    lowp float bb_aspect = u_bb_width / u_bb_height;\\n    lowp float ang = (abs(u) < 1e-6 && abs(v) < 1e-6) ? 0. : atan(v, u) - 3.141592654 / 2.0;\\n    highp float mag = length(vec2(u, v));\\n    mag = floor(mag / u_bb_mag_bin_size + 0.5) * u_bb_mag_bin_size;\\n\\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\\n    vec2 texcoord = vec2(0.0, 0.0);\\n    \\n    if (u_zoom >= min_zoom) {\\n        // Subtracting a small number off of u_bb_mag_wrap fixes (I think) a precision issue on some GPUs\\n        vec2 tex_loc = vec2(mod(mag, u_bb_mag_wrap - 1e-5) / u_bb_mag_bin_size * u_bb_width, floor(mag / (u_bb_mag_wrap - 1e-5)) * u_bb_height);\\n\\n        if (corner < 0.5) {\\n            offset = vec4(-u_bb_size, u_bb_size, 0., 0.);\\n            texcoord = tex_loc;\\n        }\\n        else if (corner < 1.5) {\\n            offset = vec4(u_bb_size, u_bb_size, 0., 0.);\\n            texcoord = tex_loc + vec2(u_bb_width, 0.0);\\n        }\\n        else if (corner < 2.5) {\\n            offset = vec4(-u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\\n            texcoord = tex_loc + vec2(0.0, u_bb_height);\\n        }\\n        else if (corner < 3.5) {\\n            offset = vec4(u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\\n            texcoord = tex_loc + vec2(u_bb_width, u_bb_height);\\n        }\\n\\n        mat4 barb_rotation = rotationZMatrix(ang + radians(u_map_bearing) - rot);\\n        mat4 map_stretch_matrix = scalingMatrix(1.0, 1. / u_map_aspect, 1.0);\\n        offset = map_stretch_matrix * barb_rotation * offset;\\n    }\\n\\n    gl_Position = pivot_pos + offset;\\n    v_tex_coord = texcoord;\\n}\"","module.exports = \"varying highp vec2 v_tex_coord;\\n\\nuniform sampler2D u_fill_sampler;\\nuniform sampler2D u_cmap_sampler;\\nuniform sampler2D u_cmap_nonlin_sampler;\\nuniform highp float u_cmap_min;\\nuniform highp float u_cmap_max;\\nuniform highp float u_opacity;\\nuniform highp vec4 u_underflow_color;\\nuniform highp vec4 u_overflow_color;\\nuniform int u_n_index;\\n\\nvoid main() {\\n    lowp float index_buffer = 1. / (2. * float(u_n_index));\\n    highp float fill_val = texture2D(u_fill_sampler, v_tex_coord).r;\\n    lowp float normed_val = (fill_val - u_cmap_min) / (u_cmap_max - u_cmap_min);\\n    \\n    lowp vec4 color;\\n    if (normed_val < 0.0) {\\n        color = u_underflow_color;\\n    }\\n    else if (normed_val > 1.0) {\\n        color = u_overflow_color;\\n    }\\n    else {\\n        normed_val = index_buffer + normed_val * (1. - 2. * index_buffer); // Chop off the half pixels on either end of the texture\\n        highp float nonlin_val = texture2D(u_cmap_nonlin_sampler, vec2(normed_val, 0.5)).r;\\n        color = texture2D(u_cmap_sampler, vec2(nonlin_val, 0.5));\\n    }\\n\\n    color.a = color.a * u_opacity;\\n    gl_FragColor = color;\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_tex_coord;\\n\\nvarying highp vec2 v_tex_coord;\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    gl_Position = u_matrix * vec4(a_pos + globe_offset, 0.0, 1.0);\\n    v_tex_coord = a_tex_coord;\\n}\"","module.exports = \"#define MAX_N_COLORS 24\\n\\nvarying highp vec2 v_tex_coord;\\n\\nuniform sampler2D u_fill_sampler;\\nuniform lowp vec4 u_colors[MAX_N_COLORS];\\nuniform int u_num_colors;\\nuniform highp float u_opacity;\\n\\nvoid main() {\\n    highp float fill_val = texture2D(u_fill_sampler, v_tex_coord).r;\\n    \\n    if (fill_val < 0.5) {\\n        discard;\\n    }\\n\\n    lowp vec4 color = vec4(0., 0., 0., 0.);\\n\\n    for (int nclr = 0; nclr < MAX_N_COLORS ; nclr++) {\\n        if (nclr >= u_num_colors || fill_val < 0.99) { break; }\\n\\n        lowp float mem_active = mod(fill_val, 2.);\\n        color = mix(color, u_colors[nclr], mem_active);\\n        fill_val = floor(fill_val / 2.);\\n    }\\n\\n    color.a = color.a * u_opacity;\\n    gl_FragColor = color;\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_tex_coord;\\n\\nvarying highp vec2 v_tex_coord;\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    gl_Position = u_matrix * vec4(a_pos + globe_offset, 0.0, 1.0);\\n    v_tex_coord = a_tex_coord;\\n}\"","module.exports = \"#ifdef DATA\\nvarying highp float v_data;\\n\\nuniform sampler2D u_cmap_sampler;\\nuniform sampler2D u_cmap_nonlin_sampler;\\nuniform highp float u_cmap_min;\\nuniform highp float u_cmap_max;\\nuniform int u_n_index;\\n#else\\nuniform lowp vec4 u_color;\\n#endif\\n\\nvoid main() {\\n    lowp vec4 color;\\n#ifdef DATA\\n    lowp float index_buffer = 1. / (2. * float(u_n_index));\\n    lowp float normed_val = (v_data - u_cmap_min) / (u_cmap_max - u_cmap_min);\\n\\n    if (normed_val < 0.0 || normed_val > 1.0) {\\n        discard;\\n    }\\n\\n    normed_val = index_buffer + normed_val * (1. - 2. * index_buffer); // Chop off the half pixels on either end of the texture\\n    highp float nonlin_val = texture2D(u_cmap_nonlin_sampler, vec2(normed_val, 0.5)).r;\\n    color = texture2D(u_cmap_sampler, vec2(nonlin_val, 0.5));\\n#else\\n    color = u_color;\\n#endif\\n    gl_FragColor = color;\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_extrusion;\\nattribute float a_data;\\n\\n#ifdef ZOOM\\nattribute float a_min_zoom;\\n#endif\\n\\n#ifdef OFFSET\\nattribute vec2 a_offset;\\n#endif\\n\\nuniform lowp float u_line_width;\\nuniform lowp float u_map_width;\\nuniform lowp float u_map_height;\\nuniform highp float u_map_bearing;\\n\\n#ifdef ZOOM\\nuniform lowp float u_zoom;\\n#endif\\n\\n#ifdef OFFSET\\nuniform lowp float u_offset_scale;\\n#endif\\n\\n#ifdef DATA\\nvarying highp float v_data;\\n#endif\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nmat4 rotationZMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( c,  s,  0., 0.,\\n                -s,  c,  0., 0.,\\n                 0., 0., 1., 0.,\\n                 0., 0., 0., 1.);\\n}\\n\\nmat4 rotationXMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( 1.,  0., 0., 0.,\\n                 0.,  c,  s,  0.,\\n                 0., -s,  c,  0.,\\n                 0.,  0., 0., 1.);\\n}\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    vec4 center_pos = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0);\\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\\n\\n#ifdef ZOOM\\n    if (u_zoom >= a_min_zoom) {\\n#endif\\n\\n        vec2 offset_ext = u_line_width * 1.5 * a_extrusion;\\n\\n        mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\\n        mat4 rotation_matrix = rotationZMatrix(radians(u_map_bearing));  \\n        offset = map_stretch_matrix * rotation_matrix * vec4(offset_ext, 0., 0.);\\n\\n#ifdef OFFSET\\n        map_stretch_matrix = scalingMatrix(1., u_map_width / u_map_height, 1.);\\n        vec2 offset_offset = u_offset_scale * a_offset;\\n        offset += map_stretch_matrix * rotation_matrix * vec4(offset_offset, 0., 0.);\\n#endif\\n\\n#ifdef ZOOM\\n    }\\n#endif\\n\\n    gl_Position = center_pos + offset;\\n\\n#ifdef DATA\\n    v_data = a_data;\\n#endif\\n}\"","module.exports = \"\\nvarying highp vec2 v_tex_coord;\\nuniform sampler2D u_sdf_sampler;\\nuniform int u_is_halo;\\n\\nuniform lowp vec3 u_text_color;\\nuniform lowp vec3 u_halo_color;\\n\\n#define SDF_FILL 0.75\\n#define SDF_HALO 0.45\\n\\nvoid main() {\\n    highp float sdf_val = texture2D(u_sdf_sampler, v_tex_coord).r;\\n\\n    lowp float step_width = 0.08;\\n    lowp float alpha = smoothstep(SDF_FILL - step_width, SDF_FILL + step_width, sdf_val);\\n\\n    lowp vec3 color = u_is_halo == 1 ? u_halo_color : u_text_color;\\n\\n    if (u_is_halo == 1) {\\n        alpha = min(smoothstep(SDF_HALO - step_width, SDF_HALO + step_width, sdf_val), 1.0 - alpha);\\n    }\\n\\n    gl_FragColor = vec4(color, alpha);\\n}\"","module.exports = \"\\nuniform mat4 u_matrix;\\nuniform int u_offset;\\nuniform highp float u_map_width;\\nuniform highp float u_map_height;\\nuniform highp float u_map_zoom;\\nuniform highp float u_font_size;\\n\\nattribute vec3 a_pos;\\nattribute vec2 a_offset;\\nattribute vec2 a_tex_coord;\\n\\nvarying highp vec2 v_tex_coord;\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nvoid main() {\\n    float min_zoom = a_pos.z;\\n\\n    vec2 offset = a_offset;\\n    if (u_map_zoom < min_zoom)\\n        offset = vec2(0., 0.);\\n\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\\n\\n    gl_Position = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0) + u_font_size / 12. * 1.5 * map_stretch_matrix * vec4(offset, 0., 0.);\\n    v_tex_coord = a_tex_coord;\\n}\"","\nvar Module = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(moduleArg = {}) {\n\n// include: shell.js\n// The Module object: Our interface to the outside world. We import\n// and export values on it. There are various ways Module can be used:\n// 1. Not defined. We create it here\n// 2. A function parameter, function(Module) { ..generated code.. }\n// 3. pre-run appended it, var Module = {}; ..generated code..\n// 4. External script tag defines var Module.\n// We need to check if Module already exists (e.g. case 3 above).\n// Substitution will be replaced with actual code on later stage of the build,\n// this way Closure Compiler will not mangle it (e.g. case 4. above).\n// Note that if you want to run closure, and also to use Module\n// after the generated code, you will need to define   var Module = {};\n// before the code. Then that object will be used in the code, and you\n// can continue to use Module afterwards as well.\nvar Module = moduleArg;\n\n// Set up the promise that indicates the Module is initialized\nvar readyPromiseResolve, readyPromiseReject;\nModule['ready'] = new Promise((resolve, reject) => {\n  readyPromiseResolve = resolve;\n  readyPromiseReject = reject;\n});\n[\"_main\",\"getExceptionMessage\",\"___get_exception_message\",\"_free\",\"_memory\",\"___indirect_function_table\",\"_fflush\",\"onRuntimeInitialized\"].forEach((prop) => {\n  if (!Object.getOwnPropertyDescriptor(Module['ready'], prop)) {\n    Object.defineProperty(Module['ready'], prop, {\n      get: () => abort('You are getting ' + prop + ' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),\n      set: () => abort('You are setting ' + prop + ' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),\n    });\n  }\n});\n\n// --pre-jses are emitted after the Module integration code, so that they can\n// refer to Module (if they choose; they can also define Module)\n\n\n// Sometimes an existing Module object exists with properties\n// meant to overwrite the default module functionality. Here\n// we collect those properties and reapply _after_ we configure\n// the current environment's defaults to avoid having to be so\n// defensive during initialization.\nvar moduleOverrides = Object.assign({}, Module);\n\nvar arguments_ = [];\nvar thisProgram = './this.program';\nvar quit_ = (status, toThrow) => {\n  throw toThrow;\n};\n\n// Determine the runtime environment we are in. You can customize this by\n// setting the ENVIRONMENT setting at compile time (see settings.js).\n\nvar ENVIRONMENT_IS_WEB = true;\nvar ENVIRONMENT_IS_WORKER = false;\nvar ENVIRONMENT_IS_NODE = false;\nvar ENVIRONMENT_IS_SHELL = false;\n\nif (Module['ENVIRONMENT']) {\n  throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');\n}\n\n// `/` should be present at the end if `scriptDirectory` is not empty\nvar scriptDirectory = '';\nfunction locateFile(path) {\n  if (Module['locateFile']) {\n    return Module['locateFile'](path, scriptDirectory);\n  }\n  return scriptDirectory + path;\n}\n\n// Hooks that are implemented differently in different runtime environments.\nvar read_,\n    readAsync,\n    readBinary;\n\nif (ENVIRONMENT_IS_SHELL) {\n\n  if ((typeof process == 'object' && typeof require === 'function') || typeof window == 'object' || typeof importScripts == 'function') throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  if (typeof read != 'undefined') {\n    read_ = read;\n  }\n\n  readBinary = (f) => {\n    if (typeof readbuffer == 'function') {\n      return new Uint8Array(readbuffer(f));\n    }\n    let data = read(f, 'binary');\n    assert(typeof data == 'object');\n    return data;\n  };\n\n  readAsync = (f, onload, onerror) => {\n    setTimeout(() => onload(readBinary(f)));\n  };\n\n  if (typeof clearTimeout == 'undefined') {\n    globalThis.clearTimeout = (id) => {};\n  }\n\n  if (typeof setTimeout == 'undefined') {\n    // spidermonkey lacks setTimeout but we use it above in readAsync.\n    globalThis.setTimeout = (f) => (typeof f == 'function') ? f() : abort();\n  }\n\n  if (typeof scriptArgs != 'undefined') {\n    arguments_ = scriptArgs;\n  } else if (typeof arguments != 'undefined') {\n    arguments_ = arguments;\n  }\n\n  if (typeof quit == 'function') {\n    quit_ = (status, toThrow) => {\n      // Unlike node which has process.exitCode, d8 has no such mechanism. So we\n      // have no way to set the exit code and then let the program exit with\n      // that code when it naturally stops running (say, when all setTimeouts\n      // have completed). For that reason, we must call `quit` - the only way to\n      // set the exit code - but quit also halts immediately.  To increase\n      // consistency with node (and the web) we schedule the actual quit call\n      // using a setTimeout to give the current stack and any exception handlers\n      // a chance to run.  This enables features such as addOnPostRun (which\n      // expected to be able to run code after main returns).\n      setTimeout(() => {\n        if (!(toThrow instanceof ExitStatus)) {\n          let toLog = toThrow;\n          if (toThrow && typeof toThrow == 'object' && toThrow.stack) {\n            toLog = [toThrow, toThrow.stack];\n          }\n          err(`exiting due to exception: ${toLog}`);\n        }\n        quit(status);\n      });\n      throw toThrow;\n    };\n  }\n\n  if (typeof print != 'undefined') {\n    // Prefer to use print/printErr where they exist, as they usually work better.\n    if (typeof console == 'undefined') console = /** @type{!Console} */({});\n    console.log = /** @type{!function(this:Console, ...*): undefined} */ (print);\n    console.warn = console.error = /** @type{!function(this:Console, ...*): undefined} */ (typeof printErr != 'undefined' ? printErr : print);\n  }\n\n} else\n\n// Note that this includes Node.js workers when relevant (pthreads is enabled).\n// Node.js workers are detected as a combination of ENVIRONMENT_IS_WORKER and\n// ENVIRONMENT_IS_NODE.\nif (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n  if (ENVIRONMENT_IS_WORKER) { // Check worker, not web, since window could be polyfilled\n    scriptDirectory = self.location.href;\n  } else if (typeof document != 'undefined' && document.currentScript) { // web\n    scriptDirectory = document.currentScript.src;\n  }\n  // When MODULARIZE, this JS may be executed later, after document.currentScript\n  // is gone, so we saved it, and we use it here instead of any other info.\n  if (_scriptDir) {\n    scriptDirectory = _scriptDir;\n  }\n  // blob urls look like blob:http://site.com/etc/etc and we cannot infer anything from them.\n  // otherwise, slice off the final part of the url to find the script directory.\n  // if scriptDirectory does not contain a slash, lastIndexOf will return -1,\n  // and scriptDirectory will correctly be replaced with an empty string.\n  // If scriptDirectory contains a query (starting with ?) or a fragment (starting with #),\n  // they are removed because they could contain a slash.\n  if (scriptDirectory.indexOf('blob:') !== 0) {\n    scriptDirectory = scriptDirectory.substr(0, scriptDirectory.replace(/[?#].*/, \"\").lastIndexOf('/')+1);\n  } else {\n    scriptDirectory = '';\n  }\n\n  if (!(typeof window == 'object' || typeof importScripts == 'function')) throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  // Differentiate the Web Worker from the Node Worker case, as reading must\n  // be done differently.\n  {\n// include: web_or_worker_shell_read.js\nread_ = (url) => {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, false);\n    xhr.send(null);\n    return xhr.responseText;\n  }\n\n  if (ENVIRONMENT_IS_WORKER) {\n    readBinary = (url) => {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, false);\n      xhr.responseType = 'arraybuffer';\n      xhr.send(null);\n      return new Uint8Array(/** @type{!ArrayBuffer} */(xhr.response));\n    };\n  }\n\n  readAsync = (url, onload, onerror) => {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'arraybuffer';\n    xhr.onload = () => {\n      if (xhr.status == 200 || (xhr.status == 0 && xhr.response)) { // file URLs can return 0\n        onload(xhr.response);\n        return;\n      }\n      onerror();\n    };\n    xhr.onerror = onerror;\n    xhr.send(null);\n  }\n\n// end include: web_or_worker_shell_read.js\n  }\n} else\n{\n  throw new Error('environment detection error');\n}\n\nvar out = Module['print'] || console.log.bind(console);\nvar err = Module['printErr'] || console.error.bind(console);\n\n// Merge back in the overrides\nObject.assign(Module, moduleOverrides);\n// Free the object hierarchy contained in the overrides, this lets the GC\n// reclaim data used e.g. in memoryInitializerRequest, which is a large typed array.\nmoduleOverrides = null;\ncheckIncomingModuleAPI();\n\n// Emit code to handle expected values on the Module object. This applies Module.x\n// to the proper local x. This has two benefits: first, we only emit it if it is\n// expected to arrive, and second, by using a local everywhere else that can be\n// minified.\n\nif (Module['arguments']) arguments_ = Module['arguments'];legacyModuleProp('arguments', 'arguments_');\n\nif (Module['thisProgram']) thisProgram = Module['thisProgram'];legacyModuleProp('thisProgram', 'thisProgram');\n\nif (Module['quit']) quit_ = Module['quit'];legacyModuleProp('quit', 'quit_');\n\n// perform assertions in shell.js after we set up out() and err(), as otherwise if an assertion fails it cannot print the message\n// Assertions on removed incoming Module JS APIs.\nassert(typeof Module['memoryInitializerPrefixURL'] == 'undefined', 'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['pthreadMainPrefixURL'] == 'undefined', 'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['cdInitializerPrefixURL'] == 'undefined', 'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['filePackagePrefixURL'] == 'undefined', 'Module.filePackagePrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['read'] == 'undefined', 'Module.read option was removed (modify read_ in JS)');\nassert(typeof Module['readAsync'] == 'undefined', 'Module.readAsync option was removed (modify readAsync in JS)');\nassert(typeof Module['readBinary'] == 'undefined', 'Module.readBinary option was removed (modify readBinary in JS)');\nassert(typeof Module['setWindowTitle'] == 'undefined', 'Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)');\nassert(typeof Module['TOTAL_MEMORY'] == 'undefined', 'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY');\nlegacyModuleProp('asm', 'wasmExports');\nlegacyModuleProp('read', 'read_');\nlegacyModuleProp('readAsync', 'readAsync');\nlegacyModuleProp('readBinary', 'readBinary');\nlegacyModuleProp('setWindowTitle', 'setWindowTitle');\nvar IDBFS = 'IDBFS is no longer included by default; build with -lidbfs.js';\nvar PROXYFS = 'PROXYFS is no longer included by default; build with -lproxyfs.js';\nvar WORKERFS = 'WORKERFS is no longer included by default; build with -lworkerfs.js';\nvar FETCHFS = 'FETCHFS is no longer included by default; build with -lfetchfs.js';\nvar ICASEFS = 'ICASEFS is no longer included by default; build with -licasefs.js';\nvar JSFILEFS = 'JSFILEFS is no longer included by default; build with -ljsfilefs.js';\nvar OPFS = 'OPFS is no longer included by default; build with -lopfs.js';\n\nvar NODEFS = 'NODEFS is no longer included by default; build with -lnodefs.js';\n\nassert(!ENVIRONMENT_IS_WORKER, \"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable.\");\n\nassert(!ENVIRONMENT_IS_NODE, \"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable.\");\n\nassert(!ENVIRONMENT_IS_SHELL, \"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.\");\n\n\n// end include: shell.js\n// include: preamble.js\n// === Preamble library stuff ===\n\n// Documentation for the public APIs defined in this file must be updated in:\n//    site/source/docs/api_reference/preamble.js.rst\n// A prebuilt local version of the documentation is available at:\n//    site/build/text/docs/api_reference/preamble.js.txt\n// You can also build docs locally as HTML or other formats in site/\n// An online HTML version (which may be of a different version of Emscripten)\n//    is up at http://kripken.github.io/emscripten-site/docs/api_reference/preamble.js.html\n\nvar wasmBinary; \nif (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];legacyModuleProp('wasmBinary', 'wasmBinary');\n\nif (typeof WebAssembly != 'object') {\n  abort('no native wasm support detected');\n}\n\n// Wasm globals\n\nvar wasmMemory;\n\n//========================================\n// Runtime essentials\n//========================================\n\n// whether we are quitting the application. no code should run after this.\n// set in exit() and abort()\nvar ABORT = false;\n\n// set by exit() and abort().  Passed to 'onExit' handler.\n// NOTE: This is also used as the process return code code in shell environments\n// but only when noExitRuntime is false.\nvar EXITSTATUS;\n\n// In STRICT mode, we only define assert() when ASSERTIONS is set.  i.e. we\n// don't define it at all in release modes.  This matches the behaviour of\n// MINIMAL_RUNTIME.\n// TODO(sbc): Make this the default even without STRICT enabled.\n/** @type {function(*, string=)} */\nfunction assert(condition, text) {\n  if (!condition) {\n    abort('Assertion failed' + (text ? ': ' + text : ''));\n  }\n}\n\n// We used to include malloc/free by default in the past. Show a helpful error in\n// builds with assertions.\n\n// Memory management\n\nvar HEAP,\n/** @type {!Int8Array} */\n  HEAP8,\n/** @type {!Uint8Array} */\n  HEAPU8,\n/** @type {!Int16Array} */\n  HEAP16,\n/** @type {!Uint16Array} */\n  HEAPU16,\n/** @type {!Int32Array} */\n  HEAP32,\n/** @type {!Uint32Array} */\n  HEAPU32,\n/** @type {!Float32Array} */\n  HEAPF32,\n/** @type {!Float64Array} */\n  HEAPF64;\n\nfunction updateMemoryViews() {\n  var b = wasmMemory.buffer;\n  Module['HEAP8'] = HEAP8 = new Int8Array(b);\n  Module['HEAP16'] = HEAP16 = new Int16Array(b);\n  Module['HEAPU8'] = HEAPU8 = new Uint8Array(b);\n  Module['HEAPU16'] = HEAPU16 = new Uint16Array(b);\n  Module['HEAP32'] = HEAP32 = new Int32Array(b);\n  Module['HEAPU32'] = HEAPU32 = new Uint32Array(b);\n  Module['HEAPF32'] = HEAPF32 = new Float32Array(b);\n  Module['HEAPF64'] = HEAPF64 = new Float64Array(b);\n}\n\nassert(!Module['STACK_SIZE'], 'STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time')\n\nassert(typeof Int32Array != 'undefined' && typeof Float64Array !== 'undefined' && Int32Array.prototype.subarray != undefined && Int32Array.prototype.set != undefined,\n       'JS engine does not provide full typed array support');\n\n// If memory is defined in wasm, the user can't provide it, or set INITIAL_MEMORY\nassert(!Module['wasmMemory'], 'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally');\nassert(!Module['INITIAL_MEMORY'], 'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically');\n\n// include: runtime_stack_check.js\n// Initializes the stack cookie. Called at the startup of main and at the startup of each thread in pthreads mode.\nfunction writeStackCookie() {\n  var max = _emscripten_stack_get_end();\n  assert((max & 3) == 0);\n  // If the stack ends at address zero we write our cookies 4 bytes into the\n  // stack.  This prevents interference with SAFE_HEAP and ASAN which also\n  // monitor writes to address zero.\n  if (max == 0) {\n    max += 4;\n  }\n  // The stack grow downwards towards _emscripten_stack_get_end.\n  // We write cookies to the final two words in the stack and detect if they are\n  // ever overwritten.\n  HEAPU32[((max)>>2)] = 0x02135467;\n  HEAPU32[(((max)+(4))>>2)] = 0x89BACDFE;\n  // Also test the global address 0 for integrity.\n  HEAPU32[((0)>>2)] = 1668509029;\n}\n\nfunction checkStackCookie() {\n  if (ABORT) return;\n  var max = _emscripten_stack_get_end();\n  // See writeStackCookie().\n  if (max == 0) {\n    max += 4;\n  }\n  var cookie1 = HEAPU32[((max)>>2)];\n  var cookie2 = HEAPU32[(((max)+(4))>>2)];\n  if (cookie1 != 0x02135467 || cookie2 != 0x89BACDFE) {\n    abort(`Stack overflow! Stack cookie has been overwritten at ${ptrToString(max)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ptrToString(cookie2)} ${ptrToString(cookie1)}`);\n  }\n  // Also test the global address 0 for integrity.\n  if (HEAPU32[((0)>>2)] != 0x63736d65 /* 'emsc' */) {\n    abort('Runtime error: The application has corrupted its heap memory area (address zero)!');\n  }\n}\n// end include: runtime_stack_check.js\n// include: runtime_assertions.js\n// Endianness check\n(function() {\n  var h16 = new Int16Array(1);\n  var h8 = new Int8Array(h16.buffer);\n  h16[0] = 0x6373;\n  if (h8[0] !== 0x73 || h8[1] !== 0x63) throw 'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)';\n})();\n\n// end include: runtime_assertions.js\nvar __ATPRERUN__  = []; // functions called before the runtime is initialized\nvar __ATINIT__    = []; // functions called during startup\nvar __ATEXIT__    = []; // functions called during shutdown\nvar __ATPOSTRUN__ = []; // functions called after the main() is called\n\nvar runtimeInitialized = false;\n\nfunction preRun() {\n  if (Module['preRun']) {\n    if (typeof Module['preRun'] == 'function') Module['preRun'] = [Module['preRun']];\n    while (Module['preRun'].length) {\n      addOnPreRun(Module['preRun'].shift());\n    }\n  }\n  callRuntimeCallbacks(__ATPRERUN__);\n}\n\nfunction initRuntime() {\n  assert(!runtimeInitialized);\n  runtimeInitialized = true;\n\n  checkStackCookie();\n\n  \n  callRuntimeCallbacks(__ATINIT__);\n}\n\nfunction postRun() {\n  checkStackCookie();\n\n  if (Module['postRun']) {\n    if (typeof Module['postRun'] == 'function') Module['postRun'] = [Module['postRun']];\n    while (Module['postRun'].length) {\n      addOnPostRun(Module['postRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPOSTRUN__);\n}\n\nfunction addOnPreRun(cb) {\n  __ATPRERUN__.unshift(cb);\n}\n\nfunction addOnInit(cb) {\n  __ATINIT__.unshift(cb);\n}\n\nfunction addOnExit(cb) {\n}\n\nfunction addOnPostRun(cb) {\n  __ATPOSTRUN__.unshift(cb);\n}\n\n// include: runtime_math.js\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/fround\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc\n\nassert(Math.imul, 'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.fround, 'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.clz32, 'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.trunc, 'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\n// end include: runtime_math.js\n// A counter of dependencies for calling run(). If we need to\n// do asynchronous work before running, increment this and\n// decrement it. Incrementing must happen in a place like\n// Module.preRun (used by emcc to add file preloading).\n// Note that you can add dependencies in preRun, even though\n// it happens right before run - run will be postponed until\n// the dependencies are met.\nvar runDependencies = 0;\nvar runDependencyWatcher = null;\nvar dependenciesFulfilled = null; // overridden to take different actions when all run dependencies are fulfilled\nvar runDependencyTracking = {};\n\nfunction getUniqueRunDependency(id) {\n  var orig = id;\n  while (1) {\n    if (!runDependencyTracking[id]) return id;\n    id = orig + Math.random();\n  }\n}\n\nfunction addRunDependency(id) {\n  runDependencies++;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(!runDependencyTracking[id]);\n    runDependencyTracking[id] = 1;\n    if (runDependencyWatcher === null && typeof setInterval != 'undefined') {\n      // Check for missing dependencies every few seconds\n      runDependencyWatcher = setInterval(() => {\n        if (ABORT) {\n          clearInterval(runDependencyWatcher);\n          runDependencyWatcher = null;\n          return;\n        }\n        var shown = false;\n        for (var dep in runDependencyTracking) {\n          if (!shown) {\n            shown = true;\n            err('still waiting on run dependencies:');\n          }\n          err(`dependency: ${dep}`);\n        }\n        if (shown) {\n          err('(end of list)');\n        }\n      }, 10000);\n    }\n  } else {\n    err('warning: run dependency added without ID');\n  }\n}\n\nfunction removeRunDependency(id) {\n  runDependencies--;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(runDependencyTracking[id]);\n    delete runDependencyTracking[id];\n  } else {\n    err('warning: run dependency removed without ID');\n  }\n  if (runDependencies == 0) {\n    if (runDependencyWatcher !== null) {\n      clearInterval(runDependencyWatcher);\n      runDependencyWatcher = null;\n    }\n    if (dependenciesFulfilled) {\n      var callback = dependenciesFulfilled;\n      dependenciesFulfilled = null;\n      callback(); // can add another dependenciesFulfilled\n    }\n  }\n}\n\n/** @param {string|number=} what */\nfunction abort(what) {\n  if (Module['onAbort']) {\n    Module['onAbort'](what);\n  }\n\n  what = 'Aborted(' + what + ')';\n  // TODO(sbc): Should we remove printing and leave it up to whoever\n  // catches the exception?\n  err(what);\n\n  ABORT = true;\n  EXITSTATUS = 1;\n\n  // Use a wasm runtime error, because a JS error might be seen as a foreign\n  // exception, which means we'd run destructors on it. We need the error to\n  // simply make the program stop.\n  // FIXME This approach does not work in Wasm EH because it currently does not assume\n  // all RuntimeErrors are from traps; it decides whether a RuntimeError is from\n  // a trap or not based on a hidden field within the object. So at the moment\n  // we don't have a way of throwing a wasm trap from JS. TODO Make a JS API that\n  // allows this in the wasm spec.\n\n  // Suppress closure compiler warning here. Closure compiler's builtin extern\n  // defintion for WebAssembly.RuntimeError claims it takes no arguments even\n  // though it can.\n  // TODO(https://github.com/google/closure-compiler/pull/3913): Remove if/when upstream closure gets fixed.\n  /** @suppress {checkTypes} */\n  var e = new WebAssembly.RuntimeError(what);\n\n  readyPromiseReject(e);\n  // Throw the error whether or not MODULARIZE is set because abort is used\n  // in code paths apart from instantiation where an exception is expected\n  // to be thrown when abort is called.\n  throw e;\n}\n\n// include: memoryprofiler.js\n// end include: memoryprofiler.js\n// show errors on likely calls to FS when it was not included\nvar FS = {\n  error() {\n    abort('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM');\n  },\n  init() { FS.error() },\n  createDataFile() { FS.error() },\n  createPreloadedFile() { FS.error() },\n  createLazyFile() { FS.error() },\n  open() { FS.error() },\n  mkdev() { FS.error() },\n  registerDevice() { FS.error() },\n  analyzePath() { FS.error() },\n\n  ErrnoError() { FS.error() },\n};\nModule['FS_createDataFile'] = FS.createDataFile;\nModule['FS_createPreloadedFile'] = FS.createPreloadedFile;\n\n// include: URIUtils.js\n// Prefix of data URIs emitted by SINGLE_FILE and related options.\nvar dataURIPrefix = 'data:application/octet-stream;base64,';\n\n/**\n * Indicates whether filename is a base64 data URI.\n * @noinline\n */\nvar isDataURI = (filename) => filename.startsWith(dataURIPrefix);\n\n/**\n * Indicates whether filename is delivered via file protocol (as opposed to http/https)\n * @noinline\n */\nvar isFileURI = (filename) => filename.startsWith('file://');\n// end include: URIUtils.js\nfunction createExportWrapper(name) {\n  return function() {\n    assert(runtimeInitialized, `native function \\`${name}\\` called before runtime initialization`);\n    var f = wasmExports[name];\n    assert(f, `exported native function \\`${name}\\` not found`);\n    return f.apply(null, arguments);\n  };\n}\n\n// include: runtime_exceptions.js\n// Base Emscripten EH error class\nclass EmscriptenEH extends Error {}\n\nclass EmscriptenSjLj extends EmscriptenEH {}\n\nclass CppException extends EmscriptenEH {\n  constructor(excPtr) {\n    super(excPtr);\n    this.excPtr = excPtr;\n    const excInfo = getExceptionMessage(excPtr);\n    this.name = excInfo[0];\n    this.message = excInfo[1];\n  }\n}\n// end include: runtime_exceptions.js\nvar wasmBinaryFile;\n  wasmBinaryFile = 'marchingsquares.wasm';\n  if (!isDataURI(wasmBinaryFile)) {\n    wasmBinaryFile = locateFile(wasmBinaryFile);\n  }\n\nfunction getBinarySync(file) {\n  if (file == wasmBinaryFile && wasmBinary) {\n    return new Uint8Array(wasmBinary);\n  }\n  if (readBinary) {\n    return readBinary(file);\n  }\n  throw \"both async and sync fetching of the wasm failed\";\n}\n\nfunction getBinaryPromise(binaryFile) {\n  // If we don't have the binary yet, try to load it asynchronously.\n  // Fetch has some additional restrictions over XHR, like it can't be used on a file:// url.\n  // See https://github.com/github/fetch/pull/92#issuecomment-140665932\n  // Cordova or Electron apps are typically loaded from a file:// url.\n  // So use fetch if it is available and the url is not a file, otherwise fall back to XHR.\n  if (!wasmBinary\n      && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER)) {\n    if (typeof fetch == 'function'\n    ) {\n      return fetch(binaryFile, { credentials: 'same-origin' }).then((response) => {\n        if (!response['ok']) {\n          throw \"failed to load wasm binary file at '\" + binaryFile + \"'\";\n        }\n        return response['arrayBuffer']();\n      }).catch(() => getBinarySync(binaryFile));\n    }\n  }\n\n  // Otherwise, getBinarySync should be able to get it synchronously\n  return Promise.resolve().then(() => getBinarySync(binaryFile));\n}\n\nfunction instantiateArrayBuffer(binaryFile, imports, receiver) {\n  return getBinaryPromise(binaryFile).then((binary) => {\n    return WebAssembly.instantiate(binary, imports);\n  }).then((instance) => {\n    return instance;\n  }).then(receiver, (reason) => {\n    err(`failed to asynchronously prepare wasm: ${reason}`);\n\n    // Warn on some common problems.\n    if (isFileURI(wasmBinaryFile)) {\n      err(`warning: Loading from a file URI (${wasmBinaryFile}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`);\n    }\n    abort(reason);\n  });\n}\n\nfunction instantiateAsync(binary, binaryFile, imports, callback) {\n  if (!binary &&\n      typeof WebAssembly.instantiateStreaming == 'function' &&\n      !isDataURI(binaryFile) &&\n      typeof fetch == 'function') {\n    return fetch(binaryFile, { credentials: 'same-origin' }).then((response) => {\n      // Suppress closure warning here since the upstream definition for\n      // instantiateStreaming only allows Promise<Repsponse> rather than\n      // an actual Response.\n      // TODO(https://github.com/google/closure-compiler/pull/3913): Remove if/when upstream closure is fixed.\n      /** @suppress {checkTypes} */\n      var result = WebAssembly.instantiateStreaming(response, imports);\n\n      return result.then(\n        callback,\n        function(reason) {\n          // We expect the most common failure cause to be a bad MIME type for the binary,\n          // in which case falling back to ArrayBuffer instantiation should work.\n          err(`wasm streaming compile failed: ${reason}`);\n          err('falling back to ArrayBuffer instantiation');\n          return instantiateArrayBuffer(binaryFile, imports, callback);\n        });\n    });\n  }\n  return instantiateArrayBuffer(binaryFile, imports, callback);\n}\n\n// Create the wasm instance.\n// Receives the wasm imports, returns the exports.\nfunction createWasm() {\n  // prepare imports\n  var info = {\n    'env': wasmImports,\n    'wasi_snapshot_preview1': wasmImports,\n  };\n  // Load the wasm module and create an instance of using native support in the JS engine.\n  // handle a generated wasm instance, receiving its exports and\n  // performing other necessary setup\n  /** @param {WebAssembly.Module=} module*/\n  function receiveInstance(instance, module) {\n    wasmExports = instance.exports;\n\n    \n\n    wasmMemory = wasmExports['memory'];\n    \n    assert(wasmMemory, \"memory not found in wasm exports\");\n    // This assertion doesn't hold when emscripten is run in --post-link\n    // mode.\n    // TODO(sbc): Read INITIAL_MEMORY out of the wasm file in post-link mode.\n    //assert(wasmMemory.buffer.byteLength === 16777216);\n    updateMemoryViews();\n\n    wasmTable = wasmExports['__indirect_function_table'];\n    \n    assert(wasmTable, \"table not found in wasm exports\");\n\n    addOnInit(wasmExports['__wasm_call_ctors']);\n\n    removeRunDependency('wasm-instantiate');\n    return wasmExports;\n  }\n  // wait for the pthread pool (if any)\n  addRunDependency('wasm-instantiate');\n\n  // Prefer streaming instantiation if available.\n  // Async compilation can be confusing when an error on the page overwrites Module\n  // (for example, if the order of elements is wrong, and the one defining Module is\n  // later), so we save Module and check it later.\n  var trueModule = Module;\n  function receiveInstantiationResult(result) {\n    // 'result' is a ResultObject object which has both the module and instance.\n    // receiveInstance() will swap in the exports (to Module.asm) so they can be called\n    assert(Module === trueModule, 'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?');\n    trueModule = null;\n    // TODO: Due to Closure regression https://github.com/google/closure-compiler/issues/3193, the above line no longer optimizes out down to the following line.\n    // When the regression is fixed, can restore the above PTHREADS-enabled path.\n    receiveInstance(result['instance']);\n  }\n\n  // User shell pages can write their own Module.instantiateWasm = function(imports, successCallback) callback\n  // to manually instantiate the Wasm module themselves. This allows pages to\n  // run the instantiation parallel to any other async startup actions they are\n  // performing.\n  // Also pthreads and wasm workers initialize the wasm instance through this\n  // path.\n  if (Module['instantiateWasm']) {\n\n    try {\n      return Module['instantiateWasm'](info, receiveInstance);\n    } catch(e) {\n      err(`Module.instantiateWasm callback failed with error: ${e}`);\n        // If instantiation fails, reject the module ready promise.\n        readyPromiseReject(e);\n    }\n  }\n\n  // If instantiation fails, reject the module ready promise.\n  instantiateAsync(wasmBinary, wasmBinaryFile, info, receiveInstantiationResult).catch(readyPromiseReject);\n  return {}; // no exports yet; we'll fill them in later\n}\n\n// Globals used by JS i64 conversions (see makeSetValue)\nvar tempDouble;\nvar tempI64;\n\n// include: runtime_debug.js\nfunction legacyModuleProp(prop, newName, incomming=true) {\n  if (!Object.getOwnPropertyDescriptor(Module, prop)) {\n    Object.defineProperty(Module, prop, {\n      configurable: true,\n      get() {\n        let extra = incomming ? ' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)' : '';\n        abort(`\\`Module.${prop}\\` has been replaced by \\`${newName}\\`` + extra);\n\n      }\n    });\n  }\n}\n\nfunction ignoredModuleProp(prop) {\n  if (Object.getOwnPropertyDescriptor(Module, prop)) {\n    abort(`\\`Module.${prop}\\` was supplied but \\`${prop}\\` not included in INCOMING_MODULE_JS_API`);\n  }\n}\n\n// forcing the filesystem exports a few things by default\nfunction isExportedByForceFilesystem(name) {\n  return name === 'FS_createPath' ||\n         name === 'FS_createDataFile' ||\n         name === 'FS_createPreloadedFile' ||\n         name === 'FS_unlink' ||\n         name === 'addRunDependency' ||\n         // The old FS has some functionality that WasmFS lacks.\n         name === 'FS_createLazyFile' ||\n         name === 'FS_createDevice' ||\n         name === 'removeRunDependency';\n}\n\nfunction missingGlobal(sym, msg) {\n  if (typeof globalThis !== 'undefined') {\n    Object.defineProperty(globalThis, sym, {\n      configurable: true,\n      get() {\n        warnOnce(`\\`${sym}\\` is not longer defined by emscripten. ${msg}`);\n        return undefined;\n      }\n    });\n  }\n}\n\nmissingGlobal('buffer', 'Please use HEAP8.buffer or wasmMemory.buffer');\nmissingGlobal('asm', 'Please use wasmExports instead');\n\nfunction missingLibrarySymbol(sym) {\n  if (typeof globalThis !== 'undefined' && !Object.getOwnPropertyDescriptor(globalThis, sym)) {\n    Object.defineProperty(globalThis, sym, {\n      configurable: true,\n      get() {\n        // Can't `abort()` here because it would break code that does runtime\n        // checks.  e.g. `if (typeof SDL === 'undefined')`.\n        var msg = `\\`${sym}\\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`;\n        // DEFAULT_LIBRARY_FUNCS_TO_INCLUDE requires the name as it appears in\n        // library.js, which means $name for a JS name with no prefix, or name\n        // for a JS name like _name.\n        var librarySymbol = sym;\n        if (!librarySymbol.startsWith('_')) {\n          librarySymbol = '$' + sym;\n        }\n        msg += ` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${librarySymbol}')`;\n        if (isExportedByForceFilesystem(sym)) {\n          msg += '. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you';\n        }\n        warnOnce(msg);\n        return undefined;\n      }\n    });\n  }\n  // Any symbol that is not included from the JS libary is also (by definition)\n  // not exported on the Module object.\n  unexportedRuntimeSymbol(sym);\n}\n\nfunction unexportedRuntimeSymbol(sym) {\n  if (!Object.getOwnPropertyDescriptor(Module, sym)) {\n    Object.defineProperty(Module, sym, {\n      configurable: true,\n      get() {\n        var msg = `'${sym}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;\n        if (isExportedByForceFilesystem(sym)) {\n          msg += '. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you';\n        }\n        abort(msg);\n      }\n    });\n  }\n}\n\n// Used by XXXXX_DEBUG settings to output debug messages.\nfunction dbg(text) {\n  // TODO(sbc): Make this configurable somehow.  Its not always convenient for\n  // logging to show up as warnings.\n  console.warn.apply(console, arguments);\n}\n// end include: runtime_debug.js\n// === Body ===\n\n// end include: preamble.js\n\n  /** @constructor */\n  function ExitStatus(status) {\n      this.name = 'ExitStatus';\n      this.message = `Program terminated with exit(${status})`;\n      this.status = status;\n    }\n\n  var callRuntimeCallbacks = (callbacks) => {\n      while (callbacks.length > 0) {\n        // Pass the module as the first argument.\n        callbacks.shift()(Module);\n      }\n    };\n\n  var decrementExceptionRefcount = (ptr) => ___cxa_decrement_exception_refcount(ptr);\n\n  \n  \n  var withStackSave = (f) => {\n      var stack = stackSave();\n      var ret = f();\n      stackRestore(stack);\n      return ret;\n    };\n  \n  var UTF8Decoder = typeof TextDecoder != 'undefined' ? new TextDecoder('utf8') : undefined;\n  \n    /**\n     * Given a pointer 'idx' to a null-terminated UTF8-encoded string in the given\n     * array that contains uint8 values, returns a copy of that string as a\n     * Javascript String object.\n     * heapOrArray is either a regular array, or a JavaScript typed array view.\n     * @param {number} idx\n     * @param {number=} maxBytesToRead\n     * @return {string}\n     */\n  var UTF8ArrayToString = (heapOrArray, idx, maxBytesToRead) => {\n      var endIdx = idx + maxBytesToRead;\n      var endPtr = idx;\n      // TextDecoder needs to know the byte length in advance, it doesn't stop on\n      // null terminator by itself.  Also, use the length info to avoid running tiny\n      // strings through TextDecoder, since .subarray() allocates garbage.\n      // (As a tiny code save trick, compare endPtr against endIdx using a negation,\n      // so that undefined means Infinity)\n      while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n  \n      if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n        return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n      }\n      var str = '';\n      // If building with TextDecoder, we have already computed the string length\n      // above, so test loop end condition against that\n      while (idx < endPtr) {\n        // For UTF8 byte structure, see:\n        // http://en.wikipedia.org/wiki/UTF-8#Description\n        // https://www.ietf.org/rfc/rfc2279.txt\n        // https://tools.ietf.org/html/rfc3629\n        var u0 = heapOrArray[idx++];\n        if (!(u0 & 0x80)) { str += String.fromCharCode(u0); continue; }\n        var u1 = heapOrArray[idx++] & 63;\n        if ((u0 & 0xE0) == 0xC0) { str += String.fromCharCode(((u0 & 31) << 6) | u1); continue; }\n        var u2 = heapOrArray[idx++] & 63;\n        if ((u0 & 0xF0) == 0xE0) {\n          u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n        } else {\n          if ((u0 & 0xF8) != 0xF0) warnOnce('Invalid UTF-8 leading byte ' + ptrToString(u0) + ' encountered when deserializing a UTF-8 string in wasm memory to a JS string!');\n          u0 = ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heapOrArray[idx++] & 63);\n        }\n  \n        if (u0 < 0x10000) {\n          str += String.fromCharCode(u0);\n        } else {\n          var ch = u0 - 0x10000;\n          str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n        }\n      }\n      return str;\n    };\n  \n    /**\n     * Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the\n     * emscripten HEAP, returns a copy of that string as a Javascript String object.\n     *\n     * @param {number} ptr\n     * @param {number=} maxBytesToRead - An optional length that specifies the\n     *   maximum number of bytes to read. You can omit this parameter to scan the\n     *   string until the first 0 byte. If maxBytesToRead is passed, and the string\n     *   at [ptr, ptr+maxBytesToReadr[ contains a null byte in the middle, then the\n     *   string will cut short at that byte index (i.e. maxBytesToRead will not\n     *   produce a string of exact length [ptr, ptr+maxBytesToRead[) N.B. mixing\n     *   frequent uses of UTF8ToString() with and without maxBytesToRead may throw\n     *   JS JIT optimizations off, so it is worth to consider consistently using one\n     * @return {string}\n     */\n  var UTF8ToString = (ptr, maxBytesToRead) => {\n      assert(typeof ptr == 'number', `UTF8ToString expects a number (got ${typeof ptr})`);\n      return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n    };\n  var getExceptionMessageCommon = (ptr) => withStackSave(() => {\n      var type_addr_addr = stackAlloc(4);\n      var message_addr_addr = stackAlloc(4);\n      ___get_exception_message(ptr, type_addr_addr, message_addr_addr);\n      var type_addr = HEAPU32[((type_addr_addr)>>2)];\n      var message_addr = HEAPU32[((message_addr_addr)>>2)];\n      var type = UTF8ToString(type_addr);\n      _free(type_addr);\n      var message;\n      if (message_addr) {\n        message = UTF8ToString(message_addr);\n        _free(message_addr);\n      }\n      return [type, message];\n    });\n  var getExceptionMessage = (ptr) => getExceptionMessageCommon(ptr);\n  Module['getExceptionMessage'] = getExceptionMessage;\n\n  \n    /**\n     * @param {number} ptr\n     * @param {string} type\n     */\n  function getValue(ptr, type = 'i8') {\n    if (type.endsWith('*')) type = '*';\n    switch (type) {\n      case 'i1': return HEAP8[((ptr)>>0)];\n      case 'i8': return HEAP8[((ptr)>>0)];\n      case 'i16': return HEAP16[((ptr)>>1)];\n      case 'i32': return HEAP32[((ptr)>>2)];\n      case 'i64': abort('to do getValue(i64) use WASM_BIGINT');\n      case 'float': return HEAPF32[((ptr)>>2)];\n      case 'double': return HEAPF64[((ptr)>>3)];\n      case '*': return HEAPU32[((ptr)>>2)];\n      default: abort(`invalid type for getValue: ${type}`);\n    }\n  }\n\n  var incrementExceptionRefcount = (ptr) => ___cxa_increment_exception_refcount(ptr);\n\n  var noExitRuntime = Module['noExitRuntime'] || true;\n\n  var ptrToString = (ptr) => {\n      assert(typeof ptr === 'number');\n      // With CAN_ADDRESS_2GB or MEMORY64, pointers are already unsigned.\n      ptr >>>= 0;\n      return '0x' + ptr.toString(16).padStart(8, '0');\n    };\n\n  \n    /**\n     * @param {number} ptr\n     * @param {number} value\n     * @param {string} type\n     */\n  function setValue(ptr, value, type = 'i8') {\n    if (type.endsWith('*')) type = '*';\n    switch (type) {\n      case 'i1': HEAP8[((ptr)>>0)] = value; break;\n      case 'i8': HEAP8[((ptr)>>0)] = value; break;\n      case 'i16': HEAP16[((ptr)>>1)] = value; break;\n      case 'i32': HEAP32[((ptr)>>2)] = value; break;\n      case 'i64': abort('to do setValue(i64) use WASM_BIGINT');\n      case 'float': HEAPF32[((ptr)>>2)] = value; break;\n      case 'double': HEAPF64[((ptr)>>3)] = value; break;\n      case '*': HEAPU32[((ptr)>>2)] = value; break;\n      default: abort(`invalid type for setValue: ${type}`);\n    }\n  }\n\n  var warnOnce = (text) => {\n      if (!warnOnce.shown) warnOnce.shown = {};\n      if (!warnOnce.shown[text]) {\n        warnOnce.shown[text] = 1;\n        err(text);\n      }\n    };\n\n  var ___assert_fail = (condition, filename, line, func) => {\n      abort(`Assertion failed: ${UTF8ToString(condition)}, at: ` + [filename ? UTF8ToString(filename) : 'unknown filename', line, func ? UTF8ToString(func) : 'unknown function']);\n    };\n\n  var exceptionCaught =  [];\n  \n  \n  var uncaughtExceptionCount = 0;\n  var ___cxa_begin_catch = (ptr) => {\n      var info = new ExceptionInfo(ptr);\n      if (!info.get_caught()) {\n        info.set_caught(true);\n        uncaughtExceptionCount--;\n      }\n      info.set_rethrown(false);\n      exceptionCaught.push(info);\n      ___cxa_increment_exception_refcount(info.excPtr);\n      return info.get_exception_ptr();\n    };\n\n  var exceptionLast = 0;\n  \n  /** @constructor */\n  function ExceptionInfo(excPtr) {\n      this.excPtr = excPtr;\n      this.ptr = excPtr - 24;\n  \n      this.set_type = function(type) {\n        HEAPU32[(((this.ptr)+(4))>>2)] = type;\n      };\n  \n      this.get_type = function() {\n        return HEAPU32[(((this.ptr)+(4))>>2)];\n      };\n  \n      this.set_destructor = function(destructor) {\n        HEAPU32[(((this.ptr)+(8))>>2)] = destructor;\n      };\n  \n      this.get_destructor = function() {\n        return HEAPU32[(((this.ptr)+(8))>>2)];\n      };\n  \n      this.set_caught = function(caught) {\n        caught = caught ? 1 : 0;\n        HEAP8[(((this.ptr)+(12))>>0)] = caught;\n      };\n  \n      this.get_caught = function() {\n        return HEAP8[(((this.ptr)+(12))>>0)] != 0;\n      };\n  \n      this.set_rethrown = function(rethrown) {\n        rethrown = rethrown ? 1 : 0;\n        HEAP8[(((this.ptr)+(13))>>0)] = rethrown;\n      };\n  \n      this.get_rethrown = function() {\n        return HEAP8[(((this.ptr)+(13))>>0)] != 0;\n      };\n  \n      // Initialize native structure fields. Should be called once after allocated.\n      this.init = function(type, destructor) {\n        this.set_adjusted_ptr(0);\n        this.set_type(type);\n        this.set_destructor(destructor);\n      }\n  \n      this.set_adjusted_ptr = function(adjustedPtr) {\n        HEAPU32[(((this.ptr)+(16))>>2)] = adjustedPtr;\n      };\n  \n      this.get_adjusted_ptr = function() {\n        return HEAPU32[(((this.ptr)+(16))>>2)];\n      };\n  \n      // Get pointer which is expected to be received by catch clause in C++ code. It may be adjusted\n      // when the pointer is casted to some of the exception object base classes (e.g. when virtual\n      // inheritance is used). When a pointer is thrown this method should return the thrown pointer\n      // itself.\n      this.get_exception_ptr = function() {\n        // Work around a fastcomp bug, this code is still included for some reason in a build without\n        // exceptions support.\n        var isPointer = ___cxa_is_pointer_type(this.get_type());\n        if (isPointer) {\n          return HEAPU32[((this.excPtr)>>2)];\n        }\n        var adjusted = this.get_adjusted_ptr();\n        if (adjusted !== 0) return adjusted;\n        return this.excPtr;\n      };\n    }\n  \n  var ___resumeException = (ptr) => {\n      if (!exceptionLast) {\n        exceptionLast = new CppException(ptr);\n      }\n      throw exceptionLast;\n    };\n  \n  \n  var findMatchingCatch = (args) => {\n      var thrown =\n        exceptionLast && exceptionLast.excPtr;\n      if (!thrown) {\n        // just pass through the null ptr\n        setTempRet0(0);\n        return 0;\n      }\n      var info = new ExceptionInfo(thrown);\n      info.set_adjusted_ptr(thrown);\n      var thrownType = info.get_type();\n      if (!thrownType) {\n        // just pass through the thrown ptr\n        setTempRet0(0);\n        return thrown;\n      }\n  \n      // can_catch receives a **, add indirection\n      // The different catch blocks are denoted by different types.\n      // Due to inheritance, those types may not precisely match the\n      // type of the thrown object. Find one which matches, and\n      // return the type of the catch block which should be called.\n      for (var arg in args) {\n        var caughtType = args[arg];\n  \n        if (caughtType === 0 || caughtType === thrownType) {\n          // Catch all clause matched or exactly the same type is caught\n          break;\n        }\n        var adjusted_ptr_addr = info.ptr + 16;\n        if (___cxa_can_catch(caughtType, thrownType, adjusted_ptr_addr)) {\n          setTempRet0(caughtType);\n          return thrown;\n        }\n      }\n      setTempRet0(thrownType);\n      return thrown;\n    };\n  var ___cxa_find_matching_catch_2 = () => findMatchingCatch([]);\n\n  var ___cxa_find_matching_catch_3 = (arg0) => findMatchingCatch([arg0]);\n\n  \n  \n  var ___cxa_throw = (ptr, type, destructor) => {\n      var info = new ExceptionInfo(ptr);\n      // Initialize ExceptionInfo content after it was allocated in __cxa_allocate_exception.\n      info.init(type, destructor);\n      exceptionLast = new CppException(ptr);\n      uncaughtExceptionCount++;\n      throw exceptionLast;\n    };\n\n\n  var __embind_register_bigint = (primitiveType, name, size, minRange, maxRange) => {};\n\n  var embind_init_charCodes = () => {\n      var codes = new Array(256);\n      for (var i = 0; i < 256; ++i) {\n          codes[i] = String.fromCharCode(i);\n      }\n      embind_charCodes = codes;\n    };\n  var embind_charCodes;\n  var readLatin1String = (ptr) => {\n      var ret = \"\";\n      var c = ptr;\n      while (HEAPU8[c]) {\n          ret += embind_charCodes[HEAPU8[c++]];\n      }\n      return ret;\n    };\n  \n  var awaitingDependencies = {\n  };\n  \n  var registeredTypes = {\n  };\n  \n  var typeDependencies = {\n  };\n  \n  var BindingError;\n  var throwBindingError = (message) => { throw new BindingError(message); };\n  \n  \n  \n  \n  var InternalError;\n  var throwInternalError = (message) => { throw new InternalError(message); };\n  var whenDependentTypesAreResolved = (myTypes, dependentTypes, getTypeConverters) => {\n      myTypes.forEach(function(type) {\n          typeDependencies[type] = dependentTypes;\n      });\n  \n      function onComplete(typeConverters) {\n          var myTypeConverters = getTypeConverters(typeConverters);\n          if (myTypeConverters.length !== myTypes.length) {\n              throwInternalError('Mismatched type converter count');\n          }\n          for (var i = 0; i < myTypes.length; ++i) {\n              registerType(myTypes[i], myTypeConverters[i]);\n          }\n      }\n  \n      var typeConverters = new Array(dependentTypes.length);\n      var unregisteredTypes = [];\n      var registered = 0;\n      dependentTypes.forEach((dt, i) => {\n        if (registeredTypes.hasOwnProperty(dt)) {\n          typeConverters[i] = registeredTypes[dt];\n        } else {\n          unregisteredTypes.push(dt);\n          if (!awaitingDependencies.hasOwnProperty(dt)) {\n            awaitingDependencies[dt] = [];\n          }\n          awaitingDependencies[dt].push(() => {\n            typeConverters[i] = registeredTypes[dt];\n            ++registered;\n            if (registered === unregisteredTypes.length) {\n              onComplete(typeConverters);\n            }\n          });\n        }\n      });\n      if (0 === unregisteredTypes.length) {\n        onComplete(typeConverters);\n      }\n    };\n  /** @param {Object=} options */\n  function sharedRegisterType(rawType, registeredInstance, options = {}) {\n      var name = registeredInstance.name;\n      if (!rawType) {\n        throwBindingError(`type \"${name}\" must have a positive integer typeid pointer`);\n      }\n      if (registeredTypes.hasOwnProperty(rawType)) {\n        if (options.ignoreDuplicateRegistrations) {\n          return;\n        } else {\n          throwBindingError(`Cannot register type '${name}' twice`);\n        }\n      }\n  \n      registeredTypes[rawType] = registeredInstance;\n      delete typeDependencies[rawType];\n  \n      if (awaitingDependencies.hasOwnProperty(rawType)) {\n        var callbacks = awaitingDependencies[rawType];\n        delete awaitingDependencies[rawType];\n        callbacks.forEach((cb) => cb());\n      }\n    }\n  /** @param {Object=} options */\n  function registerType(rawType, registeredInstance, options = {}) {\n      if (!('argPackAdvance' in registeredInstance)) {\n        throw new TypeError('registerType registeredInstance requires argPackAdvance');\n      }\n      return sharedRegisterType(rawType, registeredInstance, options);\n    }\n  \n  var GenericWireTypeSize = 8;\n  /** @suppress {globalThis} */\n  var __embind_register_bool = (rawType, name, trueValue, falseValue) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n          name,\n          'fromWireType': function(wt) {\n              // ambiguous emscripten ABI: sometimes return values are\n              // true or false, and sometimes integers (0 or 1)\n              return !!wt;\n          },\n          'toWireType': function(destructors, o) {\n              return o ? trueValue : falseValue;\n          },\n          'argPackAdvance': GenericWireTypeSize,\n          'readValueFromPointer': function(pointer) {\n              return this['fromWireType'](HEAPU8[pointer]);\n          },\n          destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  \n  \n  var shallowCopyInternalPointer = (o) => {\n      return {\n        count: o.count,\n        deleteScheduled: o.deleteScheduled,\n        preservePointerOnDelete: o.preservePointerOnDelete,\n        ptr: o.ptr,\n        ptrType: o.ptrType,\n        smartPtr: o.smartPtr,\n        smartPtrType: o.smartPtrType,\n      };\n    };\n  \n  var throwInstanceAlreadyDeleted = (obj) => {\n      function getInstanceTypeName(handle) {\n        return handle.$$.ptrType.registeredClass.name;\n      }\n      throwBindingError(getInstanceTypeName(obj) + ' instance already deleted');\n    };\n  \n  var finalizationRegistry = false;\n  \n  var detachFinalizer = (handle) => {};\n  \n  var runDestructor = ($$) => {\n      if ($$.smartPtr) {\n        $$.smartPtrType.rawDestructor($$.smartPtr);\n      } else {\n        $$.ptrType.registeredClass.rawDestructor($$.ptr);\n      }\n    };\n  var releaseClassHandle = ($$) => {\n      $$.count.value -= 1;\n      var toDelete = 0 === $$.count.value;\n      if (toDelete) {\n        runDestructor($$);\n      }\n    };\n  \n  var downcastPointer = (ptr, ptrClass, desiredClass) => {\n      if (ptrClass === desiredClass) {\n        return ptr;\n      }\n      if (undefined === desiredClass.baseClass) {\n        return null; // no conversion\n      }\n  \n      var rv = downcastPointer(ptr, ptrClass, desiredClass.baseClass);\n      if (rv === null) {\n        return null;\n      }\n      return desiredClass.downcast(rv);\n    };\n  \n  var registeredPointers = {\n  };\n  \n  var getInheritedInstanceCount = () => Object.keys(registeredInstances).length;\n  \n  var getLiveInheritedInstances = () => {\n      var rv = [];\n      for (var k in registeredInstances) {\n        if (registeredInstances.hasOwnProperty(k)) {\n          rv.push(registeredInstances[k]);\n        }\n      }\n      return rv;\n    };\n  \n  var deletionQueue = [];\n  var flushPendingDeletes = () => {\n      while (deletionQueue.length) {\n        var obj = deletionQueue.pop();\n        obj.$$.deleteScheduled = false;\n        obj['delete']();\n      }\n    };\n  \n  var delayFunction;\n  \n  \n  var setDelayFunction = (fn) => {\n      delayFunction = fn;\n      if (deletionQueue.length && delayFunction) {\n        delayFunction(flushPendingDeletes);\n      }\n    };\n  var init_embind = () => {\n      Module['getInheritedInstanceCount'] = getInheritedInstanceCount;\n      Module['getLiveInheritedInstances'] = getLiveInheritedInstances;\n      Module['flushPendingDeletes'] = flushPendingDeletes;\n      Module['setDelayFunction'] = setDelayFunction;\n    };\n  var registeredInstances = {\n  };\n  \n  var getBasestPointer = (class_, ptr) => {\n      if (ptr === undefined) {\n          throwBindingError('ptr should not be undefined');\n      }\n      while (class_.baseClass) {\n          ptr = class_.upcast(ptr);\n          class_ = class_.baseClass;\n      }\n      return ptr;\n    };\n  var getInheritedInstance = (class_, ptr) => {\n      ptr = getBasestPointer(class_, ptr);\n      return registeredInstances[ptr];\n    };\n  \n  \n  var makeClassHandle = (prototype, record) => {\n      if (!record.ptrType || !record.ptr) {\n        throwInternalError('makeClassHandle requires ptr and ptrType');\n      }\n      var hasSmartPtrType = !!record.smartPtrType;\n      var hasSmartPtr = !!record.smartPtr;\n      if (hasSmartPtrType !== hasSmartPtr) {\n        throwInternalError('Both smartPtrType and smartPtr must be specified');\n      }\n      record.count = { value: 1 };\n      return attachFinalizer(Object.create(prototype, {\n        $$: {\n            value: record,\n        },\n      }));\n    };\n  /** @suppress {globalThis} */\n  function RegisteredPointer_fromWireType(ptr) {\n      // ptr is a raw pointer (or a raw smartpointer)\n  \n      // rawPointer is a maybe-null raw pointer\n      var rawPointer = this.getPointee(ptr);\n      if (!rawPointer) {\n        this.destructor(ptr);\n        return null;\n      }\n  \n      var registeredInstance = getInheritedInstance(this.registeredClass, rawPointer);\n      if (undefined !== registeredInstance) {\n        // JS object has been neutered, time to repopulate it\n        if (0 === registeredInstance.$$.count.value) {\n          registeredInstance.$$.ptr = rawPointer;\n          registeredInstance.$$.smartPtr = ptr;\n          return registeredInstance['clone']();\n        } else {\n          // else, just increment reference count on existing object\n          // it already has a reference to the smart pointer\n          var rv = registeredInstance['clone']();\n          this.destructor(ptr);\n          return rv;\n        }\n      }\n  \n      function makeDefaultHandle() {\n        if (this.isSmartPointer) {\n          return makeClassHandle(this.registeredClass.instancePrototype, {\n            ptrType: this.pointeeType,\n            ptr: rawPointer,\n            smartPtrType: this,\n            smartPtr: ptr,\n          });\n        } else {\n          return makeClassHandle(this.registeredClass.instancePrototype, {\n            ptrType: this,\n            ptr,\n          });\n        }\n      }\n  \n      var actualType = this.registeredClass.getActualType(rawPointer);\n      var registeredPointerRecord = registeredPointers[actualType];\n      if (!registeredPointerRecord) {\n        return makeDefaultHandle.call(this);\n      }\n  \n      var toType;\n      if (this.isConst) {\n        toType = registeredPointerRecord.constPointerType;\n      } else {\n        toType = registeredPointerRecord.pointerType;\n      }\n      var dp = downcastPointer(\n          rawPointer,\n          this.registeredClass,\n          toType.registeredClass);\n      if (dp === null) {\n        return makeDefaultHandle.call(this);\n      }\n      if (this.isSmartPointer) {\n        return makeClassHandle(toType.registeredClass.instancePrototype, {\n          ptrType: toType,\n          ptr: dp,\n          smartPtrType: this,\n          smartPtr: ptr,\n        });\n      } else {\n        return makeClassHandle(toType.registeredClass.instancePrototype, {\n          ptrType: toType,\n          ptr: dp,\n        });\n      }\n    }\n  var attachFinalizer = (handle) => {\n      if ('undefined' === typeof FinalizationRegistry) {\n        attachFinalizer = (handle) => handle;\n        return handle;\n      }\n      // If the running environment has a FinalizationRegistry (see\n      // https://github.com/tc39/proposal-weakrefs), then attach finalizers\n      // for class handles.  We check for the presence of FinalizationRegistry\n      // at run-time, not build-time.\n      finalizationRegistry = new FinalizationRegistry((info) => {\n        console.warn(info.leakWarning.stack.replace(/^Error: /, ''));\n        releaseClassHandle(info.$$);\n      });\n      attachFinalizer = (handle) => {\n        var $$ = handle.$$;\n        var hasSmartPtr = !!$$.smartPtr;\n        if (hasSmartPtr) {\n          // We should not call the destructor on raw pointers in case other code expects the pointee to live\n          var info = { $$: $$ };\n          // Create a warning as an Error instance in advance so that we can store\n          // the current stacktrace and point to it when / if a leak is detected.\n          // This is more useful than the empty stacktrace of `FinalizationRegistry`\n          // callback.\n          var cls = $$.ptrType.registeredClass;\n          info.leakWarning = new Error(`Embind found a leaked C++ instance ${cls.name} <${ptrToString($$.ptr)}>.\\n` +\n          \"We'll free it automatically in this case, but this functionality is not reliable across various environments.\\n\" +\n          \"Make sure to invoke .delete() manually once you're done with the instance instead.\\n\" +\n          \"Originally allocated\"); // `.stack` will add \"at ...\" after this sentence\n          if ('captureStackTrace' in Error) {\n            Error.captureStackTrace(info.leakWarning, RegisteredPointer_fromWireType);\n          }\n          finalizationRegistry.register(handle, info, handle);\n        }\n        return handle;\n      };\n      detachFinalizer = (handle) => finalizationRegistry.unregister(handle);\n      return attachFinalizer(handle);\n    };\n  \n  \n  \n  var init_ClassHandle = () => {\n      Object.assign(ClassHandle.prototype, {\n        \"isAliasOf\"(other) {\n          if (!(this instanceof ClassHandle)) {\n            return false;\n          }\n          if (!(other instanceof ClassHandle)) {\n            return false;\n          }\n  \n          var leftClass = this.$$.ptrType.registeredClass;\n          var left = this.$$.ptr;\n          other.$$ = /** @type {Object} */ (other.$$);\n          var rightClass = other.$$.ptrType.registeredClass;\n          var right = other.$$.ptr;\n  \n          while (leftClass.baseClass) {\n            left = leftClass.upcast(left);\n            leftClass = leftClass.baseClass;\n          }\n  \n          while (rightClass.baseClass) {\n            right = rightClass.upcast(right);\n            rightClass = rightClass.baseClass;\n          }\n  \n          return leftClass === rightClass && left === right;\n        },\n  \n        \"clone\"() {\n          if (!this.$$.ptr) {\n            throwInstanceAlreadyDeleted(this);\n          }\n  \n          if (this.$$.preservePointerOnDelete) {\n            this.$$.count.value += 1;\n            return this;\n          } else {\n            var clone = attachFinalizer(Object.create(Object.getPrototypeOf(this), {\n              $$: {\n                value: shallowCopyInternalPointer(this.$$),\n              }\n            }));\n  \n            clone.$$.count.value += 1;\n            clone.$$.deleteScheduled = false;\n            return clone;\n          }\n        },\n  \n        \"delete\"() {\n          if (!this.$$.ptr) {\n            throwInstanceAlreadyDeleted(this);\n          }\n  \n          if (this.$$.deleteScheduled && !this.$$.preservePointerOnDelete) {\n            throwBindingError('Object already scheduled for deletion');\n          }\n  \n          detachFinalizer(this);\n          releaseClassHandle(this.$$);\n  \n          if (!this.$$.preservePointerOnDelete) {\n            this.$$.smartPtr = undefined;\n            this.$$.ptr = undefined;\n          }\n        },\n  \n        \"isDeleted\"() {\n          return !this.$$.ptr;\n        },\n  \n        \"deleteLater\"() {\n          if (!this.$$.ptr) {\n            throwInstanceAlreadyDeleted(this);\n          }\n          if (this.$$.deleteScheduled && !this.$$.preservePointerOnDelete) {\n            throwBindingError('Object already scheduled for deletion');\n          }\n          deletionQueue.push(this);\n          if (deletionQueue.length === 1 && delayFunction) {\n            delayFunction(flushPendingDeletes);\n          }\n          this.$$.deleteScheduled = true;\n          return this;\n        },\n      });\n    };\n  /** @constructor */\n  function ClassHandle() {\n    }\n  \n  var createNamedFunction = (name, body) => Object.defineProperty(body, 'name', {\n      value: name\n    });\n  \n  \n  var ensureOverloadTable = (proto, methodName, humanName) => {\n      if (undefined === proto[methodName].overloadTable) {\n        var prevFunc = proto[methodName];\n        // Inject an overload resolver function that routes to the appropriate overload based on the number of arguments.\n        proto[methodName] = function() {\n          // TODO This check can be removed in -O3 level \"unsafe\" optimizations.\n          if (!proto[methodName].overloadTable.hasOwnProperty(arguments.length)) {\n              throwBindingError(`Function '${humanName}' called with an invalid number of arguments (${arguments.length}) - expects one of (${proto[methodName].overloadTable})!`);\n          }\n          return proto[methodName].overloadTable[arguments.length].apply(this, arguments);\n        };\n        // Move the previous function into the overload table.\n        proto[methodName].overloadTable = [];\n        proto[methodName].overloadTable[prevFunc.argCount] = prevFunc;\n      }\n    };\n  \n  /** @param {number=} numArguments */\n  var exposePublicSymbol = (name, value, numArguments) => {\n      if (Module.hasOwnProperty(name)) {\n        if (undefined === numArguments || (undefined !== Module[name].overloadTable && undefined !== Module[name].overloadTable[numArguments])) {\n          throwBindingError(`Cannot register public name '${name}' twice`);\n        }\n  \n        // We are exposing a function with the same name as an existing function. Create an overload table and a function selector\n        // that routes between the two.\n        ensureOverloadTable(Module, name, name);\n        if (Module.hasOwnProperty(numArguments)) {\n          throwBindingError(`Cannot register multiple overloads of a function with the same number of arguments (${numArguments})!`);\n        }\n        // Add the new function into the overload table.\n        Module[name].overloadTable[numArguments] = value;\n      }\n      else {\n        Module[name] = value;\n        if (undefined !== numArguments) {\n          Module[name].numArguments = numArguments;\n        }\n      }\n    };\n  \n  var char_0 = 48;\n  \n  var char_9 = 57;\n  var makeLegalFunctionName = (name) => {\n      if (undefined === name) {\n        return '_unknown';\n      }\n      name = name.replace(/[^a-zA-Z0-9_]/g, '$');\n      var f = name.charCodeAt(0);\n      if (f >= char_0 && f <= char_9) {\n        return `_${name}`;\n      }\n      return name;\n    };\n  \n  \n  /** @constructor */\n  function RegisteredClass(name,\n                               constructor,\n                               instancePrototype,\n                               rawDestructor,\n                               baseClass,\n                               getActualType,\n                               upcast,\n                               downcast) {\n      this.name = name;\n      this.constructor = constructor;\n      this.instancePrototype = instancePrototype;\n      this.rawDestructor = rawDestructor;\n      this.baseClass = baseClass;\n      this.getActualType = getActualType;\n      this.upcast = upcast;\n      this.downcast = downcast;\n      this.pureVirtualFunctions = [];\n    }\n  \n  \n  var upcastPointer = (ptr, ptrClass, desiredClass) => {\n      while (ptrClass !== desiredClass) {\n        if (!ptrClass.upcast) {\n          throwBindingError(`Expected null or instance of ${desiredClass.name}, got an instance of ${ptrClass.name}`);\n        }\n        ptr = ptrClass.upcast(ptr);\n        ptrClass = ptrClass.baseClass;\n      }\n      return ptr;\n    };\n  /** @suppress {globalThis} */\n  function constNoSmartPtrRawPointerToWireType(destructors, handle) {\n      if (handle === null) {\n        if (this.isReference) {\n          throwBindingError(`null is not a valid ${this.name}`);\n        }\n        return 0;\n      }\n  \n      if (!handle.$$) {\n        throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`);\n      }\n      if (!handle.$$.ptr) {\n        throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`);\n      }\n      var handleClass = handle.$$.ptrType.registeredClass;\n      var ptr = upcastPointer(handle.$$.ptr, handleClass, this.registeredClass);\n      return ptr;\n    }\n  \n  \n  /** @suppress {globalThis} */\n  function genericPointerToWireType(destructors, handle) {\n      var ptr;\n      if (handle === null) {\n        if (this.isReference) {\n          throwBindingError(`null is not a valid ${this.name}`);\n        }\n  \n        if (this.isSmartPointer) {\n          ptr = this.rawConstructor();\n          if (destructors !== null) {\n            destructors.push(this.rawDestructor, ptr);\n          }\n          return ptr;\n        } else {\n          return 0;\n        }\n      }\n  \n      if (!handle.$$) {\n        throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`);\n      }\n      if (!handle.$$.ptr) {\n        throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`);\n      }\n      if (!this.isConst && handle.$$.ptrType.isConst) {\n        throwBindingError(`Cannot convert argument of type ${(handle.$$.smartPtrType ? handle.$$.smartPtrType.name : handle.$$.ptrType.name)} to parameter type ${this.name}`);\n      }\n      var handleClass = handle.$$.ptrType.registeredClass;\n      ptr = upcastPointer(handle.$$.ptr, handleClass, this.registeredClass);\n  \n      if (this.isSmartPointer) {\n        // TODO: this is not strictly true\n        // We could support BY_EMVAL conversions from raw pointers to smart pointers\n        // because the smart pointer can hold a reference to the handle\n        if (undefined === handle.$$.smartPtr) {\n          throwBindingError('Passing raw pointer to smart pointer is illegal');\n        }\n  \n        switch (this.sharingPolicy) {\n          case 0: // NONE\n            // no upcasting\n            if (handle.$$.smartPtrType === this) {\n              ptr = handle.$$.smartPtr;\n            } else {\n              throwBindingError(`Cannot convert argument of type ${(handle.$$.smartPtrType ? handle.$$.smartPtrType.name : handle.$$.ptrType.name)} to parameter type ${this.name}`);\n            }\n            break;\n  \n          case 1: // INTRUSIVE\n            ptr = handle.$$.smartPtr;\n            break;\n  \n          case 2: // BY_EMVAL\n            if (handle.$$.smartPtrType === this) {\n              ptr = handle.$$.smartPtr;\n            } else {\n              var clonedHandle = handle['clone']();\n              ptr = this.rawShare(\n                ptr,\n                Emval.toHandle(() => clonedHandle['delete']())\n              );\n              if (destructors !== null) {\n                destructors.push(this.rawDestructor, ptr);\n              }\n            }\n            break;\n  \n          default:\n            throwBindingError('Unsupporting sharing policy');\n        }\n      }\n      return ptr;\n    }\n  \n  \n  /** @suppress {globalThis} */\n  function nonConstNoSmartPtrRawPointerToWireType(destructors, handle) {\n      if (handle === null) {\n        if (this.isReference) {\n          throwBindingError(`null is not a valid ${this.name}`);\n        }\n        return 0;\n      }\n  \n      if (!handle.$$) {\n        throwBindingError(`Cannot pass \"${embindRepr(handle)}\" as a ${this.name}`);\n      }\n      if (!handle.$$.ptr) {\n        throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`);\n      }\n      if (handle.$$.ptrType.isConst) {\n          throwBindingError(`Cannot convert argument of type ${handle.$$.ptrType.name} to parameter type ${this.name}`);\n      }\n      var handleClass = handle.$$.ptrType.registeredClass;\n      var ptr = upcastPointer(handle.$$.ptr, handleClass, this.registeredClass);\n      return ptr;\n    }\n  \n  \n  /** @suppress {globalThis} */\n  function readPointer(pointer) {\n      return this['fromWireType'](HEAPU32[((pointer)>>2)]);\n    }\n  \n  \n  var init_RegisteredPointer = () => {\n      Object.assign(RegisteredPointer.prototype, {\n        getPointee(ptr) {\n          if (this.rawGetPointee) {\n            ptr = this.rawGetPointee(ptr);\n          }\n          return ptr;\n        },\n        destructor(ptr) {\n          if (this.rawDestructor) {\n            this.rawDestructor(ptr);\n          }\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': readPointer,\n        'deleteObject'(handle) {\n          if (handle !== null) {\n            handle['delete']();\n          }\n        },\n        'fromWireType': RegisteredPointer_fromWireType,\n      });\n    };\n  /** @constructor\n      @param {*=} pointeeType,\n      @param {*=} sharingPolicy,\n      @param {*=} rawGetPointee,\n      @param {*=} rawConstructor,\n      @param {*=} rawShare,\n      @param {*=} rawDestructor,\n       */\n  function RegisteredPointer(\n      name,\n      registeredClass,\n      isReference,\n      isConst,\n  \n      // smart pointer properties\n      isSmartPointer,\n      pointeeType,\n      sharingPolicy,\n      rawGetPointee,\n      rawConstructor,\n      rawShare,\n      rawDestructor\n    ) {\n      this.name = name;\n      this.registeredClass = registeredClass;\n      this.isReference = isReference;\n      this.isConst = isConst;\n  \n      // smart pointer properties\n      this.isSmartPointer = isSmartPointer;\n      this.pointeeType = pointeeType;\n      this.sharingPolicy = sharingPolicy;\n      this.rawGetPointee = rawGetPointee;\n      this.rawConstructor = rawConstructor;\n      this.rawShare = rawShare;\n      this.rawDestructor = rawDestructor;\n  \n      if (!isSmartPointer && registeredClass.baseClass === undefined) {\n        if (isConst) {\n          this['toWireType'] = constNoSmartPtrRawPointerToWireType;\n          this.destructorFunction = null;\n        } else {\n          this['toWireType'] = nonConstNoSmartPtrRawPointerToWireType;\n          this.destructorFunction = null;\n        }\n      } else {\n        this['toWireType'] = genericPointerToWireType;\n        // Here we must leave this.destructorFunction undefined, since whether genericPointerToWireType returns\n        // a pointer that needs to be freed up is runtime-dependent, and cannot be evaluated at registration time.\n        // TODO: Create an alternative mechanism that allows removing the use of var destructors = []; array in\n        //       craftInvokerFunction altogether.\n      }\n    }\n  \n  /** @param {number=} numArguments */\n  var replacePublicSymbol = (name, value, numArguments) => {\n      if (!Module.hasOwnProperty(name)) {\n        throwInternalError('Replacing nonexistant public symbol');\n      }\n      // If there's an overload table for this symbol, replace the symbol in the overload table instead.\n      if (undefined !== Module[name].overloadTable && undefined !== numArguments) {\n        Module[name].overloadTable[numArguments] = value;\n      }\n      else {\n        Module[name] = value;\n        Module[name].argCount = numArguments;\n      }\n    };\n  \n  \n  \n  var dynCallLegacy = (sig, ptr, args) => {\n      assert(('dynCall_' + sig) in Module, `bad function pointer type - dynCall function not found for sig '${sig}'`);\n      if (args && args.length) {\n        // j (64-bit integer) must be passed in as two numbers [low 32, high 32].\n        assert(args.length === sig.substring(1).replace(/j/g, '--').length);\n      } else {\n        assert(sig.length == 1);\n      }\n      var f = Module['dynCall_' + sig];\n      return args && args.length ? f.apply(null, [ptr].concat(args)) : f.call(null, ptr);\n    };\n  \n  var wasmTableMirror = [];\n  \n  var wasmTable;\n  var getWasmTableEntry = (funcPtr) => {\n      var func = wasmTableMirror[funcPtr];\n      if (!func) {\n        if (funcPtr >= wasmTableMirror.length) wasmTableMirror.length = funcPtr + 1;\n        wasmTableMirror[funcPtr] = func = wasmTable.get(funcPtr);\n      }\n      assert(wasmTable.get(funcPtr) == func, \"JavaScript-side Wasm function table mirror is out of date!\");\n      return func;\n    };\n  \n  /** @param {Object=} args */\n  var dynCall = (sig, ptr, args) => {\n      // Without WASM_BIGINT support we cannot directly call function with i64 as\n      // part of thier signature, so we rely the dynCall functions generated by\n      // wasm-emscripten-finalize\n      if (sig.includes('j')) {\n        return dynCallLegacy(sig, ptr, args);\n      }\n      assert(getWasmTableEntry(ptr), `missing table entry in dynCall: ${ptr}`);\n      var rtn = getWasmTableEntry(ptr).apply(null, args);\n      return rtn;\n    };\n  var getDynCaller = (sig, ptr) => {\n      assert(sig.includes('j') || sig.includes('p'), 'getDynCaller should only be called with i64 sigs')\n      var argCache = [];\n      return function() {\n        argCache.length = 0;\n        Object.assign(argCache, arguments);\n        return dynCall(sig, ptr, argCache);\n      };\n    };\n  \n  \n  var embind__requireFunction = (signature, rawFunction) => {\n      signature = readLatin1String(signature);\n  \n      function makeDynCaller() {\n        if (signature.includes('j')) {\n          return getDynCaller(signature, rawFunction);\n        }\n        return getWasmTableEntry(rawFunction);\n      }\n  \n      var fp = makeDynCaller();\n      if (typeof fp != \"function\") {\n          throwBindingError(`unknown function pointer with signature ${signature}: ${rawFunction}`);\n      }\n      return fp;\n    };\n  \n  \n  \n  var extendError = (baseErrorType, errorName) => {\n      var errorClass = createNamedFunction(errorName, function(message) {\n        this.name = errorName;\n        this.message = message;\n  \n        var stack = (new Error(message)).stack;\n        if (stack !== undefined) {\n          this.stack = this.toString() + '\\n' +\n              stack.replace(/^Error(:[^\\n]*)?\\n/, '');\n        }\n      });\n      errorClass.prototype = Object.create(baseErrorType.prototype);\n      errorClass.prototype.constructor = errorClass;\n      errorClass.prototype.toString = function() {\n        if (this.message === undefined) {\n          return this.name;\n        } else {\n          return `${this.name}: ${this.message}`;\n        }\n      };\n  \n      return errorClass;\n    };\n  var UnboundTypeError;\n  \n  \n  \n  var getTypeName = (type) => {\n      var ptr = ___getTypeName(type);\n      var rv = readLatin1String(ptr);\n      _free(ptr);\n      return rv;\n    };\n  var throwUnboundTypeError = (message, types) => {\n      var unboundTypes = [];\n      var seen = {};\n      function visit(type) {\n        if (seen[type]) {\n          return;\n        }\n        if (registeredTypes[type]) {\n          return;\n        }\n        if (typeDependencies[type]) {\n          typeDependencies[type].forEach(visit);\n          return;\n        }\n        unboundTypes.push(type);\n        seen[type] = true;\n      }\n      types.forEach(visit);\n  \n      throw new UnboundTypeError(`${message}: ` + unboundTypes.map(getTypeName).join([', ']));\n    };\n  \n  var __embind_register_class = (rawType,\n                             rawPointerType,\n                             rawConstPointerType,\n                             baseClassRawType,\n                             getActualTypeSignature,\n                             getActualType,\n                             upcastSignature,\n                             upcast,\n                             downcastSignature,\n                             downcast,\n                             name,\n                             destructorSignature,\n                             rawDestructor) => {\n      name = readLatin1String(name);\n      getActualType = embind__requireFunction(getActualTypeSignature, getActualType);\n      if (upcast) {\n        upcast = embind__requireFunction(upcastSignature, upcast);\n      }\n      if (downcast) {\n        downcast = embind__requireFunction(downcastSignature, downcast);\n      }\n      rawDestructor = embind__requireFunction(destructorSignature, rawDestructor);\n      var legalFunctionName = makeLegalFunctionName(name);\n  \n      exposePublicSymbol(legalFunctionName, function() {\n        // this code cannot run if baseClassRawType is zero\n        throwUnboundTypeError(`Cannot construct ${name} due to unbound types`, [baseClassRawType]);\n      });\n  \n      whenDependentTypesAreResolved(\n        [rawType, rawPointerType, rawConstPointerType],\n        baseClassRawType ? [baseClassRawType] : [],\n        function(base) {\n          base = base[0];\n  \n          var baseClass;\n          var basePrototype;\n          if (baseClassRawType) {\n            baseClass = base.registeredClass;\n            basePrototype = baseClass.instancePrototype;\n          } else {\n            basePrototype = ClassHandle.prototype;\n          }\n  \n          var constructor = createNamedFunction(name, function() {\n            if (Object.getPrototypeOf(this) !== instancePrototype) {\n              throw new BindingError(\"Use 'new' to construct \" + name);\n            }\n            if (undefined === registeredClass.constructor_body) {\n              throw new BindingError(name + \" has no accessible constructor\");\n            }\n            var body = registeredClass.constructor_body[arguments.length];\n            if (undefined === body) {\n              throw new BindingError(`Tried to invoke ctor of ${name} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(registeredClass.constructor_body).toString()}) parameters instead!`);\n            }\n            return body.apply(this, arguments);\n          });\n  \n          var instancePrototype = Object.create(basePrototype, {\n            constructor: { value: constructor },\n          });\n  \n          constructor.prototype = instancePrototype;\n  \n          var registeredClass = new RegisteredClass(name,\n                                                    constructor,\n                                                    instancePrototype,\n                                                    rawDestructor,\n                                                    baseClass,\n                                                    getActualType,\n                                                    upcast,\n                                                    downcast);\n  \n          if (registeredClass.baseClass) {\n            // Keep track of class hierarchy. Used to allow sub-classes to inherit class functions.\n            if (registeredClass.baseClass.__derivedClasses === undefined) {\n              registeredClass.baseClass.__derivedClasses = [];\n            }\n  \n            registeredClass.baseClass.__derivedClasses.push(registeredClass);\n          }\n  \n          var referenceConverter = new RegisteredPointer(name,\n                                                         registeredClass,\n                                                         true,\n                                                         false,\n                                                         false);\n  \n          var pointerConverter = new RegisteredPointer(name + '*',\n                                                       registeredClass,\n                                                       false,\n                                                       false,\n                                                       false);\n  \n          var constPointerConverter = new RegisteredPointer(name + ' const*',\n                                                            registeredClass,\n                                                            false,\n                                                            true,\n                                                            false);\n  \n          registeredPointers[rawType] = {\n            pointerType: pointerConverter,\n            constPointerType: constPointerConverter\n          };\n  \n          replacePublicSymbol(legalFunctionName, constructor);\n  \n          return [referenceConverter, pointerConverter, constPointerConverter];\n        }\n      );\n    };\n\n  var heap32VectorToArray = (count, firstElement) => {\n      var array = [];\n      for (var i = 0; i < count; i++) {\n          // TODO(https://github.com/emscripten-core/emscripten/issues/17310):\n          // Find a way to hoist the `>> 2` or `>> 3` out of this loop.\n          array.push(HEAPU32[(((firstElement)+(i * 4))>>2)]);\n      }\n      return array;\n    };\n  \n  \n  var runDestructors = (destructors) => {\n      while (destructors.length) {\n        var ptr = destructors.pop();\n        var del = destructors.pop();\n        del(ptr);\n      }\n    };\n  \n  \n  \n  \n  \n  \n  \n  function newFunc(constructor, argumentList) {\n      if (!(constructor instanceof Function)) {\n        throw new TypeError(`new_ called with constructor type ${typeof(constructor)} which is not a function`);\n      }\n      /*\n       * Previously, the following line was just:\n       *   function dummy() {};\n       * Unfortunately, Chrome was preserving 'dummy' as the object's name, even\n       * though at creation, the 'dummy' has the correct constructor name.  Thus,\n       * objects created with IMVU.new would show up in the debugger as 'dummy',\n       * which isn't very helpful.  Using IMVU.createNamedFunction addresses the\n       * issue.  Doublely-unfortunately, there's no way to write a test for this\n       * behavior.  -NRD 2013.02.22\n       */\n      var dummy = createNamedFunction(constructor.name || 'unknownFunctionName', function(){});\n      dummy.prototype = constructor.prototype;\n      var obj = new dummy;\n  \n      var r = constructor.apply(obj, argumentList);\n      return (r instanceof Object) ? r : obj;\n    }\n  function craftInvokerFunction(humanName, argTypes, classType, cppInvokerFunc, cppTargetFunc, /** boolean= */ isAsync) {\n      // humanName: a human-readable string name for the function to be generated.\n      // argTypes: An array that contains the embind type objects for all types in the function signature.\n      //    argTypes[0] is the type object for the function return value.\n      //    argTypes[1] is the type object for function this object/class type, or null if not crafting an invoker for a class method.\n      //    argTypes[2...] are the actual function parameters.\n      // classType: The embind type object for the class to be bound, or null if this is not a method of a class.\n      // cppInvokerFunc: JS Function object to the C++-side function that interops into C++ code.\n      // cppTargetFunc: Function pointer (an integer to FUNCTION_TABLE) to the target C++ function the cppInvokerFunc will end up calling.\n      // isAsync: Optional. If true, returns an async function. Async bindings are only supported with JSPI.\n      var argCount = argTypes.length;\n  \n      if (argCount < 2) {\n        throwBindingError(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n      }\n  \n      assert(!isAsync, 'Async bindings are only supported with JSPI.');\n  \n      var isClassMethodFunc = (argTypes[1] !== null && classType !== null);\n  \n      // Free functions with signature \"void function()\" do not need an invoker that marshalls between wire types.\n  // TODO: This omits argument count check - enable only at -O3 or similar.\n  //    if (ENABLE_UNSAFE_OPTS && argCount == 2 && argTypes[0].name == \"void\" && !isClassMethodFunc) {\n  //       return FUNCTION_TABLE[fn];\n  //    }\n  \n      // Determine if we need to use a dynamic stack to store the destructors for the function parameters.\n      // TODO: Remove this completely once all function invokers are being dynamically generated.\n      var needsDestructorStack = false;\n  \n      for (var i = 1; i < argTypes.length; ++i) { // Skip return value at index 0 - it's not deleted here.\n        if (argTypes[i] !== null && argTypes[i].destructorFunction === undefined) { // The type does not define a destructor function - must use dynamic stack\n          needsDestructorStack = true;\n          break;\n        }\n      }\n  \n      var returns = (argTypes[0].name !== \"void\");\n  \n      var argsList = \"\";\n      var argsListWired = \"\";\n      for (var i = 0; i < argCount - 2; ++i) {\n        argsList += (i!==0?\", \":\"\")+\"arg\"+i;\n        argsListWired += (i!==0?\", \":\"\")+\"arg\"+i+\"Wired\";\n      }\n  \n      var invokerFnBody = `\n        return function (${argsList}) {\n        if (arguments.length !== ${argCount - 2}) {\n          throwBindingError('function ${humanName} called with ' + arguments.length + ' arguments, expected ${argCount - 2}');\n        }`;\n  \n      if (needsDestructorStack) {\n        invokerFnBody += \"var destructors = [];\\n\";\n      }\n  \n      var dtorStack = needsDestructorStack ? \"destructors\" : \"null\";\n      var args1 = [\"throwBindingError\", \"invoker\", \"fn\", \"runDestructors\", \"retType\", \"classParam\"];\n      var args2 = [throwBindingError, cppInvokerFunc, cppTargetFunc, runDestructors, argTypes[0], argTypes[1]];\n  \n      if (isClassMethodFunc) {\n        invokerFnBody += \"var thisWired = classParam.toWireType(\"+dtorStack+\", this);\\n\";\n      }\n  \n      for (var i = 0; i < argCount - 2; ++i) {\n        invokerFnBody += \"var arg\"+i+\"Wired = argType\"+i+\".toWireType(\"+dtorStack+\", arg\"+i+\"); // \"+argTypes[i+2].name+\"\\n\";\n        args1.push(\"argType\"+i);\n        args2.push(argTypes[i+2]);\n      }\n  \n      if (isClassMethodFunc) {\n        argsListWired = \"thisWired\" + (argsListWired.length > 0 ? \", \" : \"\") + argsListWired;\n      }\n  \n      invokerFnBody +=\n          (returns || isAsync ? \"var rv = \":\"\") + \"invoker(fn\"+(argsListWired.length>0?\", \":\"\")+argsListWired+\");\\n\";\n  \n      if (needsDestructorStack) {\n        invokerFnBody += \"runDestructors(destructors);\\n\";\n      } else {\n        for (var i = isClassMethodFunc?1:2; i < argTypes.length; ++i) { // Skip return value at index 0 - it's not deleted here. Also skip class type if not a method.\n          var paramName = (i === 1 ? \"thisWired\" : (\"arg\"+(i - 2)+\"Wired\"));\n          if (argTypes[i].destructorFunction !== null) {\n            invokerFnBody += paramName+\"_dtor(\"+paramName+\"); // \"+argTypes[i].name+\"\\n\";\n            args1.push(paramName+\"_dtor\");\n            args2.push(argTypes[i].destructorFunction);\n          }\n        }\n      }\n  \n      if (returns) {\n        invokerFnBody += \"var ret = retType.fromWireType(rv);\\n\" +\n                         \"return ret;\\n\";\n      } else {\n      }\n  \n      invokerFnBody += \"}\\n\";\n  \n      args1.push(invokerFnBody);\n  \n      var invokerFn = newFunc(Function, args1).apply(null, args2);\n      return createNamedFunction(humanName, invokerFn);\n    }\n  var __embind_register_class_constructor = (\n      rawClassType,\n      argCount,\n      rawArgTypesAddr,\n      invokerSignature,\n      invoker,\n      rawConstructor\n    ) => {\n      assert(argCount > 0);\n      var rawArgTypes = heap32VectorToArray(argCount, rawArgTypesAddr);\n      invoker = embind__requireFunction(invokerSignature, invoker);\n      var args = [rawConstructor];\n      var destructors = [];\n  \n      whenDependentTypesAreResolved([], [rawClassType], function(classType) {\n        classType = classType[0];\n        var humanName = `constructor ${classType.name}`;\n  \n        if (undefined === classType.registeredClass.constructor_body) {\n          classType.registeredClass.constructor_body = [];\n        }\n        if (undefined !== classType.registeredClass.constructor_body[argCount - 1]) {\n          throw new BindingError(`Cannot register multiple constructors with identical number of parameters (${argCount-1}) for class '${classType.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);\n        }\n        classType.registeredClass.constructor_body[argCount - 1] = () => {\n          throwUnboundTypeError(`Cannot construct ${classType.name} due to unbound types`, rawArgTypes);\n        };\n  \n        whenDependentTypesAreResolved([], rawArgTypes, (argTypes) => {\n          // Insert empty slot for context type (argTypes[1]).\n          argTypes.splice(1, 0, null);\n          classType.registeredClass.constructor_body[argCount - 1] = craftInvokerFunction(humanName, argTypes, null, invoker, rawConstructor);\n          return [];\n        });\n        return [];\n      });\n    };\n\n  \n  \n  \n  \n  \n  \n  var getFunctionName = (signature) => {\n      signature = signature.trim();\n      const argsIndex = signature.indexOf(\"(\");\n      if (argsIndex !== -1) {\n        assert(signature[signature.length - 1] == \")\", \"Parentheses for argument names should match.\");\n        return signature.substr(0, argsIndex);\n      } else {\n        return signature;\n      }\n    };\n  var __embind_register_class_function = (rawClassType,\n                                      methodName,\n                                      argCount,\n                                      rawArgTypesAddr, // [ReturnType, ThisType, Args...]\n                                      invokerSignature,\n                                      rawInvoker,\n                                      context,\n                                      isPureVirtual,\n                                      isAsync) => {\n      var rawArgTypes = heap32VectorToArray(argCount, rawArgTypesAddr);\n      methodName = readLatin1String(methodName);\n      methodName = getFunctionName(methodName);\n      rawInvoker = embind__requireFunction(invokerSignature, rawInvoker);\n  \n      whenDependentTypesAreResolved([], [rawClassType], function(classType) {\n        classType = classType[0];\n        var humanName = `${classType.name}.${methodName}`;\n  \n        if (methodName.startsWith(\"@@\")) {\n          methodName = Symbol[methodName.substring(2)];\n        }\n  \n        if (isPureVirtual) {\n          classType.registeredClass.pureVirtualFunctions.push(methodName);\n        }\n  \n        function unboundTypesHandler() {\n          throwUnboundTypeError(`Cannot call ${humanName} due to unbound types`, rawArgTypes);\n        }\n  \n        var proto = classType.registeredClass.instancePrototype;\n        var method = proto[methodName];\n        if (undefined === method || (undefined === method.overloadTable && method.className !== classType.name && method.argCount === argCount - 2)) {\n          // This is the first overload to be registered, OR we are replacing a\n          // function in the base class with a function in the derived class.\n          unboundTypesHandler.argCount = argCount - 2;\n          unboundTypesHandler.className = classType.name;\n          proto[methodName] = unboundTypesHandler;\n        } else {\n          // There was an existing function with the same name registered. Set up\n          // a function overload routing table.\n          ensureOverloadTable(proto, methodName, humanName);\n          proto[methodName].overloadTable[argCount - 2] = unboundTypesHandler;\n        }\n  \n        whenDependentTypesAreResolved([], rawArgTypes, function(argTypes) {\n          var memberFunction = craftInvokerFunction(humanName, argTypes, classType, rawInvoker, context, isAsync);\n  \n          // Replace the initial unbound-handler-stub function with the appropriate member function, now that all types\n          // are resolved. If multiple overloads are registered for this function, the function goes into an overload table.\n          if (undefined === proto[methodName].overloadTable) {\n            // Set argCount in case an overload is registered later\n            memberFunction.argCount = argCount - 2;\n            proto[methodName] = memberFunction;\n          } else {\n            proto[methodName].overloadTable[argCount - 2] = memberFunction;\n          }\n  \n          return [];\n        });\n        return [];\n      });\n    };\n\n  \n  \n  \n  \n  \n  \n  \n  var validateThis = (this_, classType, humanName) => {\n      if (!(this_ instanceof Object)) {\n        throwBindingError(`${humanName} with invalid \"this\": ${this_}`);\n      }\n      if (!(this_ instanceof classType.registeredClass.constructor)) {\n        throwBindingError(`${humanName} incompatible with \"this\" of type ${this_.constructor.name}`);\n      }\n      if (!this_.$$.ptr) {\n        throwBindingError(`cannot call emscripten binding method ${humanName} on deleted object`);\n      }\n  \n      // todo: kill this\n      return upcastPointer(this_.$$.ptr,\n                           this_.$$.ptrType.registeredClass,\n                           classType.registeredClass);\n    };\n  var __embind_register_class_property = (classType,\n                                      fieldName,\n                                      getterReturnType,\n                                      getterSignature,\n                                      getter,\n                                      getterContext,\n                                      setterArgumentType,\n                                      setterSignature,\n                                      setter,\n                                      setterContext) => {\n      fieldName = readLatin1String(fieldName);\n      getter = embind__requireFunction(getterSignature, getter);\n  \n      whenDependentTypesAreResolved([], [classType], function(classType) {\n        classType = classType[0];\n        var humanName = `${classType.name}.${fieldName}`;\n        var desc = {\n          get() {\n            throwUnboundTypeError(`Cannot access ${humanName} due to unbound types`, [getterReturnType, setterArgumentType]);\n          },\n          enumerable: true,\n          configurable: true\n        };\n        if (setter) {\n          desc.set = () => throwUnboundTypeError(`Cannot access ${humanName} due to unbound types`, [getterReturnType, setterArgumentType]);\n        } else {\n          desc.set = (v) => throwBindingError(humanName + ' is a read-only property');\n        }\n  \n        Object.defineProperty(classType.registeredClass.instancePrototype, fieldName, desc);\n  \n        whenDependentTypesAreResolved(\n          [],\n          (setter ? [getterReturnType, setterArgumentType] : [getterReturnType]),\n      function(types) {\n          var getterReturnType = types[0];\n          var desc = {\n            get() {\n              var ptr = validateThis(this, classType, humanName + ' getter');\n              return getterReturnType['fromWireType'](getter(getterContext, ptr));\n            },\n            enumerable: true\n          };\n  \n          if (setter) {\n            setter = embind__requireFunction(setterSignature, setter);\n            var setterArgumentType = types[1];\n            desc.set = function(v) {\n              var ptr = validateThis(this, classType, humanName + ' setter');\n              var destructors = [];\n              setter(setterContext, ptr, setterArgumentType['toWireType'](destructors, v));\n              runDestructors(destructors);\n            };\n          }\n  \n          Object.defineProperty(classType.registeredClass.instancePrototype, fieldName, desc);\n          return [];\n        });\n  \n        return [];\n      });\n    };\n\n  function handleAllocatorInit() {\n      Object.assign(HandleAllocator.prototype, /** @lends {HandleAllocator.prototype} */ {\n        get(id) {\n          assert(this.allocated[id] !== undefined, `invalid handle: ${id}`);\n          return this.allocated[id];\n        },\n        has(id) {\n          return this.allocated[id] !== undefined;\n        },\n        allocate(handle) {\n          var id = this.freelist.pop() || this.allocated.length;\n          this.allocated[id] = handle;\n          return id;\n        },\n        free(id) {\n          assert(this.allocated[id] !== undefined);\n          // Set the slot to `undefined` rather than using `delete` here since\n          // apparently arrays with holes in them can be less efficient.\n          this.allocated[id] = undefined;\n          this.freelist.push(id);\n        }\n      });\n    }\n  /** @constructor */\n  function HandleAllocator() {\n      // Reserve slot 0 so that 0 is always an invalid handle\n      this.allocated = [undefined];\n      this.freelist = [];\n    }\n  var emval_handles = new HandleAllocator();;\n  var __emval_decref = (handle) => {\n      if (handle >= emval_handles.reserved && 0 === --emval_handles.get(handle).refcount) {\n        emval_handles.free(handle);\n      }\n    };\n  \n  \n  \n  var count_emval_handles = () => {\n      var count = 0;\n      for (var i = emval_handles.reserved; i < emval_handles.allocated.length; ++i) {\n        if (emval_handles.allocated[i] !== undefined) {\n          ++count;\n        }\n      }\n      return count;\n    };\n  \n  var init_emval = () => {\n      // reserve some special values. These never get de-allocated.\n      // The HandleAllocator takes care of reserving zero.\n      emval_handles.allocated.push(\n        {value: undefined},\n        {value: null},\n        {value: true},\n        {value: false},\n      );\n      emval_handles.reserved = emval_handles.allocated.length\n      Module['count_emval_handles'] = count_emval_handles;\n    };\n  var Emval = {\n  toValue:(handle) => {\n        if (!handle) {\n            throwBindingError('Cannot use deleted val. handle = ' + handle);\n        }\n        return emval_handles.get(handle).value;\n      },\n  toHandle:(value) => {\n        switch (value) {\n          case undefined: return 1;\n          case null: return 2;\n          case true: return 3;\n          case false: return 4;\n          default:{\n            return emval_handles.allocate({refcount: 1, value: value});\n          }\n        }\n      },\n  };\n  \n  \n  \n  /** @suppress {globalThis} */\n  function simpleReadValueFromPointer(pointer) {\n      return this['fromWireType'](HEAP32[((pointer)>>2)]);\n    }\n  var __embind_register_emval = (rawType, name) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': (handle) => {\n          var rv = Emval.toValue(handle);\n          __emval_decref(handle);\n          return rv;\n        },\n        'toWireType': (destructors, value) => Emval.toHandle(value),\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': simpleReadValueFromPointer,\n        destructorFunction: null, // This type does not need a destructor\n  \n        // TODO: do we need a deleteObject here?  write a test where\n        // emval is passed into JS via an interface\n      });\n    };\n\n  var embindRepr = (v) => {\n      if (v === null) {\n          return 'null';\n      }\n      var t = typeof v;\n      if (t === 'object' || t === 'array' || t === 'function') {\n          return v.toString();\n      } else {\n          return '' + v;\n      }\n    };\n  \n  var floatReadValueFromPointer = (name, width) => {\n      switch (width) {\n          case 4: return function(pointer) {\n              return this['fromWireType'](HEAPF32[((pointer)>>2)]);\n          };\n          case 8: return function(pointer) {\n              return this['fromWireType'](HEAPF64[((pointer)>>3)]);\n          };\n          default:\n              throw new TypeError(`invalid float width (${width}): ${name}`);\n      }\n    };\n  \n  \n  var __embind_register_float = (rawType, name, size) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': (value) => value,\n        'toWireType': (destructors, value) => {\n          if (typeof value != \"number\" && typeof value != \"boolean\") {\n            throw new TypeError(`Cannot convert ${embindRepr(value)} to ${this.name}`);\n          }\n          // The VM will perform JS to Wasm value conversion, according to the spec:\n          // https://www.w3.org/TR/wasm-js-api-1/#towebassemblyvalue\n          return value;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': floatReadValueFromPointer(name, size),\n        destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  \n  \n  \n  \n  \n  \n  \n  \n  var __embind_register_function = (name, argCount, rawArgTypesAddr, signature, rawInvoker, fn, isAsync) => {\n      var argTypes = heap32VectorToArray(argCount, rawArgTypesAddr);\n      name = readLatin1String(name);\n      name = getFunctionName(name);\n  \n      rawInvoker = embind__requireFunction(signature, rawInvoker);\n  \n      exposePublicSymbol(name, function() {\n        throwUnboundTypeError(`Cannot call ${name} due to unbound types`, argTypes);\n      }, argCount - 1);\n  \n      whenDependentTypesAreResolved([], argTypes, function(argTypes) {\n        var invokerArgsArray = [argTypes[0] /* return value */, null /* no class 'this'*/].concat(argTypes.slice(1) /* actual params */);\n        replacePublicSymbol(name, craftInvokerFunction(name, invokerArgsArray, null /* no class 'this'*/, rawInvoker, fn, isAsync), argCount - 1);\n        return [];\n      });\n    };\n\n  \n  var integerReadValueFromPointer = (name, width, signed) => {\n      // integers are quite common, so generate very specialized functions\n      switch (width) {\n          case 1: return signed ?\n              (pointer) => HEAP8[((pointer)>>0)] :\n              (pointer) => HEAPU8[((pointer)>>0)];\n          case 2: return signed ?\n              (pointer) => HEAP16[((pointer)>>1)] :\n              (pointer) => HEAPU16[((pointer)>>1)]\n          case 4: return signed ?\n              (pointer) => HEAP32[((pointer)>>2)] :\n              (pointer) => HEAPU32[((pointer)>>2)]\n          default:\n              throw new TypeError(`invalid integer width (${width}): ${name}`);\n      }\n    };\n  \n  \n  /** @suppress {globalThis} */\n  var __embind_register_integer = (primitiveType, name, size, minRange, maxRange) => {\n      name = readLatin1String(name);\n      // LLVM doesn't have signed and unsigned 32-bit types, so u32 literals come\n      // out as 'i32 -1'. Always treat those as max u32.\n      if (maxRange === -1) {\n        maxRange = 4294967295;\n      }\n  \n      var fromWireType = (value) => value;\n  \n      if (minRange === 0) {\n        var bitshift = 32 - 8*size;\n        fromWireType = (value) => (value << bitshift) >>> bitshift;\n      }\n  \n      var isUnsignedType = (name.includes('unsigned'));\n      var checkAssertions = (value, toTypeName) => {\n        if (typeof value != \"number\" && typeof value != \"boolean\") {\n          throw new TypeError(`Cannot convert \"${embindRepr(value)}\" to ${toTypeName}`);\n        }\n        if (value < minRange || value > maxRange) {\n          throw new TypeError(`Passing a number \"${embindRepr(value)}\" from JS side to C/C++ side to an argument of type \"${name}\", which is outside the valid range [${minRange}, ${maxRange}]!`);\n        }\n      }\n      var toWireType;\n      if (isUnsignedType) {\n        toWireType = function(destructors, value) {\n          checkAssertions(value, this.name);\n          return value >>> 0;\n        }\n      } else {\n        toWireType = function(destructors, value) {\n          checkAssertions(value, this.name);\n          // The VM will perform JS to Wasm value conversion, according to the spec:\n          // https://www.w3.org/TR/wasm-js-api-1/#towebassemblyvalue\n          return value;\n        }\n      }\n      registerType(primitiveType, {\n        name,\n        'fromWireType': fromWireType,\n        'toWireType': toWireType,\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': integerReadValueFromPointer(name, size, minRange !== 0),\n        destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  \n  var __embind_register_memory_view = (rawType, dataTypeIndex, name) => {\n      var typeMapping = [\n        Int8Array,\n        Uint8Array,\n        Int16Array,\n        Uint16Array,\n        Int32Array,\n        Uint32Array,\n        Float32Array,\n        Float64Array,\n      ];\n  \n      var TA = typeMapping[dataTypeIndex];\n  \n      function decodeMemoryView(handle) {\n        var size = HEAPU32[((handle)>>2)];\n        var data = HEAPU32[(((handle)+(4))>>2)];\n        return new TA(HEAP8.buffer, data, size);\n      }\n  \n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': decodeMemoryView,\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': decodeMemoryView,\n      }, {\n        ignoreDuplicateRegistrations: true,\n      });\n    };\n\n  \n  \n  \n  \n  var stringToUTF8Array = (str, heap, outIdx, maxBytesToWrite) => {\n      assert(typeof str === 'string', `stringToUTF8Array expects a string (got ${typeof str})`);\n      // Parameter maxBytesToWrite is not optional. Negative values, 0, null,\n      // undefined and false each don't write out any bytes.\n      if (!(maxBytesToWrite > 0))\n        return 0;\n  \n      var startIdx = outIdx;\n      var endIdx = outIdx + maxBytesToWrite - 1; // -1 for string null terminator.\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code\n        // unit, not a Unicode code point of the character! So decode\n        // UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description\n        // and https://www.ietf.org/rfc/rfc2279.txt\n        // and https://tools.ietf.org/html/rfc3629\n        var u = str.charCodeAt(i); // possibly a lead surrogate\n        if (u >= 0xD800 && u <= 0xDFFF) {\n          var u1 = str.charCodeAt(++i);\n          u = 0x10000 + ((u & 0x3FF) << 10) | (u1 & 0x3FF);\n        }\n        if (u <= 0x7F) {\n          if (outIdx >= endIdx) break;\n          heap[outIdx++] = u;\n        } else if (u <= 0x7FF) {\n          if (outIdx + 1 >= endIdx) break;\n          heap[outIdx++] = 0xC0 | (u >> 6);\n          heap[outIdx++] = 0x80 | (u & 63);\n        } else if (u <= 0xFFFF) {\n          if (outIdx + 2 >= endIdx) break;\n          heap[outIdx++] = 0xE0 | (u >> 12);\n          heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n          heap[outIdx++] = 0x80 | (u & 63);\n        } else {\n          if (outIdx + 3 >= endIdx) break;\n          if (u > 0x10FFFF) warnOnce('Invalid Unicode code point ' + ptrToString(u) + ' encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).');\n          heap[outIdx++] = 0xF0 | (u >> 18);\n          heap[outIdx++] = 0x80 | ((u >> 12) & 63);\n          heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n          heap[outIdx++] = 0x80 | (u & 63);\n        }\n      }\n      // Null-terminate the pointer to the buffer.\n      heap[outIdx] = 0;\n      return outIdx - startIdx;\n    };\n  var stringToUTF8 = (str, outPtr, maxBytesToWrite) => {\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      return stringToUTF8Array(str, HEAPU8, outPtr, maxBytesToWrite);\n    };\n  \n  var lengthBytesUTF8 = (str) => {\n      var len = 0;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code\n        // unit, not a Unicode code point of the character! So decode\n        // UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var c = str.charCodeAt(i); // possibly a lead surrogate\n        if (c <= 0x7F) {\n          len++;\n        } else if (c <= 0x7FF) {\n          len += 2;\n        } else if (c >= 0xD800 && c <= 0xDFFF) {\n          len += 4; ++i;\n        } else {\n          len += 3;\n        }\n      }\n      return len;\n    };\n  \n  \n  \n  var __embind_register_std_string = (rawType, name) => {\n      name = readLatin1String(name);\n      var stdStringIsUTF8\n      //process only std::string bindings with UTF8 support, in contrast to e.g. std::basic_string<unsigned char>\n      = (name === \"std::string\");\n  \n      registerType(rawType, {\n        name,\n        // For some method names we use string keys here since they are part of\n        // the public/external API and/or used by the runtime-generated code.\n        'fromWireType'(value) {\n          var length = HEAPU32[((value)>>2)];\n          var payload = value + 4;\n  \n          var str;\n          if (stdStringIsUTF8) {\n            var decodeStartPtr = payload;\n            // Looping here to support possible embedded '0' bytes\n            for (var i = 0; i <= length; ++i) {\n              var currentBytePtr = payload + i;\n              if (i == length || HEAPU8[currentBytePtr] == 0) {\n                var maxRead = currentBytePtr - decodeStartPtr;\n                var stringSegment = UTF8ToString(decodeStartPtr, maxRead);\n                if (str === undefined) {\n                  str = stringSegment;\n                } else {\n                  str += String.fromCharCode(0);\n                  str += stringSegment;\n                }\n                decodeStartPtr = currentBytePtr + 1;\n              }\n            }\n          } else {\n            var a = new Array(length);\n            for (var i = 0; i < length; ++i) {\n              a[i] = String.fromCharCode(HEAPU8[payload + i]);\n            }\n            str = a.join('');\n          }\n  \n          _free(value);\n  \n          return str;\n        },\n        'toWireType'(destructors, value) {\n          if (value instanceof ArrayBuffer) {\n            value = new Uint8Array(value);\n          }\n  \n          var length;\n          var valueIsOfTypeString = (typeof value == 'string');\n  \n          if (!(valueIsOfTypeString || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Int8Array)) {\n            throwBindingError('Cannot pass non-string to std::string');\n          }\n          if (stdStringIsUTF8 && valueIsOfTypeString) {\n            length = lengthBytesUTF8(value);\n          } else {\n            length = value.length;\n          }\n  \n          // assumes 4-byte alignment\n          var base = _malloc(4 + length + 1);\n          var ptr = base + 4;\n          HEAPU32[((base)>>2)] = length;\n          if (stdStringIsUTF8 && valueIsOfTypeString) {\n            stringToUTF8(value, ptr, length + 1);\n          } else {\n            if (valueIsOfTypeString) {\n              for (var i = 0; i < length; ++i) {\n                var charCode = value.charCodeAt(i);\n                if (charCode > 255) {\n                  _free(ptr);\n                  throwBindingError('String has UTF-16 code units that do not fit in 8 bits');\n                }\n                HEAPU8[ptr + i] = charCode;\n              }\n            } else {\n              for (var i = 0; i < length; ++i) {\n                HEAPU8[ptr + i] = value[i];\n              }\n            }\n          }\n  \n          if (destructors !== null) {\n            destructors.push(_free, base);\n          }\n          return base;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': readPointer,\n        destructorFunction(ptr) {\n          _free(ptr);\n        },\n      });\n    };\n\n  \n  \n  \n  var UTF16Decoder = typeof TextDecoder != 'undefined' ? new TextDecoder('utf-16le') : undefined;;\n  var UTF16ToString = (ptr, maxBytesToRead) => {\n      assert(ptr % 2 == 0, 'Pointer passed to UTF16ToString must be aligned to two bytes!');\n      var endPtr = ptr;\n      // TextDecoder needs to know the byte length in advance, it doesn't stop on\n      // null terminator by itself.\n      // Also, use the length info to avoid running tiny strings through\n      // TextDecoder, since .subarray() allocates garbage.\n      var idx = endPtr >> 1;\n      var maxIdx = idx + maxBytesToRead / 2;\n      // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n      // will always evaluate to true. This saves on code size.\n      while (!(idx >= maxIdx) && HEAPU16[idx]) ++idx;\n      endPtr = idx << 1;\n  \n      if (endPtr - ptr > 32 && UTF16Decoder)\n        return UTF16Decoder.decode(HEAPU8.subarray(ptr, endPtr));\n  \n      // Fallback: decode without UTF16Decoder\n      var str = '';\n  \n      // If maxBytesToRead is not passed explicitly, it will be undefined, and the\n      // for-loop's condition will always evaluate to true. The loop is then\n      // terminated on the first null char.\n      for (var i = 0; !(i >= maxBytesToRead / 2); ++i) {\n        var codeUnit = HEAP16[(((ptr)+(i*2))>>1)];\n        if (codeUnit == 0) break;\n        // fromCharCode constructs a character from a UTF-16 code unit, so we can\n        // pass the UTF16 string right through.\n        str += String.fromCharCode(codeUnit);\n      }\n  \n      return str;\n    };\n  \n  var stringToUTF16 = (str, outPtr, maxBytesToWrite) => {\n      assert(outPtr % 2 == 0, 'Pointer passed to stringToUTF16 must be aligned to two bytes!');\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n      if (maxBytesToWrite === undefined) {\n        maxBytesToWrite = 0x7FFFFFFF;\n      }\n      if (maxBytesToWrite < 2) return 0;\n      maxBytesToWrite -= 2; // Null terminator.\n      var startPtr = outPtr;\n      var numCharsToWrite = (maxBytesToWrite < str.length*2) ? (maxBytesToWrite / 2) : str.length;\n      for (var i = 0; i < numCharsToWrite; ++i) {\n        // charCodeAt returns a UTF-16 encoded code unit, so it can be directly written to the HEAP.\n        var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n        HEAP16[((outPtr)>>1)] = codeUnit;\n        outPtr += 2;\n      }\n      // Null-terminate the pointer to the HEAP.\n      HEAP16[((outPtr)>>1)] = 0;\n      return outPtr - startPtr;\n    };\n  \n  var lengthBytesUTF16 = (str) => {\n      return str.length*2;\n    };\n  \n  var UTF32ToString = (ptr, maxBytesToRead) => {\n      assert(ptr % 4 == 0, 'Pointer passed to UTF32ToString must be aligned to four bytes!');\n      var i = 0;\n  \n      var str = '';\n      // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n      // will always evaluate to true. This saves on code size.\n      while (!(i >= maxBytesToRead / 4)) {\n        var utf32 = HEAP32[(((ptr)+(i*4))>>2)];\n        if (utf32 == 0) break;\n        ++i;\n        // Gotcha: fromCharCode constructs a character from a UTF-16 encoded code (pair), not from a Unicode code point! So encode the code point to UTF-16 for constructing.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        if (utf32 >= 0x10000) {\n          var ch = utf32 - 0x10000;\n          str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n        } else {\n          str += String.fromCharCode(utf32);\n        }\n      }\n      return str;\n    };\n  \n  var stringToUTF32 = (str, outPtr, maxBytesToWrite) => {\n      assert(outPtr % 4 == 0, 'Pointer passed to stringToUTF32 must be aligned to four bytes!');\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n      if (maxBytesToWrite === undefined) {\n        maxBytesToWrite = 0x7FFFFFFF;\n      }\n      if (maxBytesToWrite < 4) return 0;\n      var startPtr = outPtr;\n      var endPtr = startPtr + maxBytesToWrite - 4;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n        if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) {\n          var trailSurrogate = str.charCodeAt(++i);\n          codeUnit = 0x10000 + ((codeUnit & 0x3FF) << 10) | (trailSurrogate & 0x3FF);\n        }\n        HEAP32[((outPtr)>>2)] = codeUnit;\n        outPtr += 4;\n        if (outPtr + 4 > endPtr) break;\n      }\n      // Null-terminate the pointer to the HEAP.\n      HEAP32[((outPtr)>>2)] = 0;\n      return outPtr - startPtr;\n    };\n  \n  var lengthBytesUTF32 = (str) => {\n      var len = 0;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var codeUnit = str.charCodeAt(i);\n        if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) ++i; // possibly a lead surrogate, so skip over the tail surrogate.\n        len += 4;\n      }\n  \n      return len;\n    };\n  var __embind_register_std_wstring = (rawType, charSize, name) => {\n      name = readLatin1String(name);\n      var decodeString, encodeString, getHeap, lengthBytesUTF, shift;\n      if (charSize === 2) {\n        decodeString = UTF16ToString;\n        encodeString = stringToUTF16;\n        lengthBytesUTF = lengthBytesUTF16;\n        getHeap = () => HEAPU16;\n        shift = 1;\n      } else if (charSize === 4) {\n        decodeString = UTF32ToString;\n        encodeString = stringToUTF32;\n        lengthBytesUTF = lengthBytesUTF32;\n        getHeap = () => HEAPU32;\n        shift = 2;\n      }\n      registerType(rawType, {\n        name,\n        'fromWireType': (value) => {\n          // Code mostly taken from _embind_register_std_string fromWireType\n          var length = HEAPU32[((value)>>2)];\n          var HEAP = getHeap();\n          var str;\n  \n          var decodeStartPtr = value + 4;\n          // Looping here to support possible embedded '0' bytes\n          for (var i = 0; i <= length; ++i) {\n            var currentBytePtr = value + 4 + i * charSize;\n            if (i == length || HEAP[currentBytePtr >> shift] == 0) {\n              var maxReadBytes = currentBytePtr - decodeStartPtr;\n              var stringSegment = decodeString(decodeStartPtr, maxReadBytes);\n              if (str === undefined) {\n                str = stringSegment;\n              } else {\n                str += String.fromCharCode(0);\n                str += stringSegment;\n              }\n              decodeStartPtr = currentBytePtr + charSize;\n            }\n          }\n  \n          _free(value);\n  \n          return str;\n        },\n        'toWireType': (destructors, value) => {\n          if (!(typeof value == 'string')) {\n            throwBindingError(`Cannot pass non-string to C++ string type ${name}`);\n          }\n  \n          // assumes 4-byte alignment\n          var length = lengthBytesUTF(value);\n          var ptr = _malloc(4 + length + charSize);\n          HEAPU32[ptr >> 2] = length >> shift;\n  \n          encodeString(value, ptr + 4, length + charSize);\n  \n          if (destructors !== null) {\n            destructors.push(_free, ptr);\n          }\n          return ptr;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': simpleReadValueFromPointer,\n        destructorFunction(ptr) {\n          _free(ptr);\n        }\n      });\n    };\n\n  \n  var __embind_register_void = (rawType, name) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        isVoid: true, // void return values can be optimized out sometimes\n        name,\n        'argPackAdvance': 0,\n        'fromWireType': () => undefined,\n        // TODO: assert if anything else is given?\n        'toWireType': (destructors, o) => undefined,\n      });\n    };\n\n\n  var __emval_incref = (handle) => {\n      if (handle > 4) {\n        emval_handles.get(handle).refcount += 1;\n      }\n    };\n\n  \n  \n  \n  var requireRegisteredType = (rawType, humanName) => {\n      var impl = registeredTypes[rawType];\n      if (undefined === impl) {\n          throwBindingError(humanName + \" has unknown type \" + getTypeName(rawType));\n      }\n      return impl;\n    };\n  var __emval_take_value = (type, arg) => {\n      type = requireRegisteredType(type, '_emval_take_value');\n      var v = type['readValueFromPointer'](arg);\n      return Emval.toHandle(v);\n    };\n\n  var _abort = () => {\n      abort('native code called abort()');\n    };\n\n  var _emscripten_memcpy_js = (dest, src, num) => HEAPU8.copyWithin(dest, src, src + num);\n\n  var getHeapMax = () =>\n      // Stay one Wasm page short of 4GB: while e.g. Chrome is able to allocate\n      // full 4GB Wasm memories, the size will wrap back to 0 bytes in Wasm side\n      // for any code that deals with heap sizes, which would require special\n      // casing all heap size related code to treat 0 specially.\n      2147483648;\n  \n  var growMemory = (size) => {\n      var b = wasmMemory.buffer;\n      var pages = (size - b.byteLength + 65535) / 65536;\n      try {\n        // round size grow request up to wasm page size (fixed 64KB per spec)\n        wasmMemory.grow(pages); // .grow() takes a delta compared to the previous size\n        updateMemoryViews();\n        return 1 /*success*/;\n      } catch(e) {\n        err(`growMemory: Attempted to grow heap from ${b.byteLength} bytes to ${size} bytes, but got error: ${e}`);\n      }\n      // implicit 0 return to save code size (caller will cast \"undefined\" into 0\n      // anyhow)\n    };\n  var _emscripten_resize_heap = (requestedSize) => {\n      var oldSize = HEAPU8.length;\n      // With CAN_ADDRESS_2GB or MEMORY64, pointers are already unsigned.\n      requestedSize >>>= 0;\n      // With multithreaded builds, races can happen (another thread might increase the size\n      // in between), so return a failure, and let the caller retry.\n      assert(requestedSize > oldSize);\n  \n      // Memory resize rules:\n      // 1.  Always increase heap size to at least the requested size, rounded up\n      //     to next page multiple.\n      // 2a. If MEMORY_GROWTH_LINEAR_STEP == -1, excessively resize the heap\n      //     geometrically: increase the heap size according to\n      //     MEMORY_GROWTH_GEOMETRIC_STEP factor (default +20%), At most\n      //     overreserve by MEMORY_GROWTH_GEOMETRIC_CAP bytes (default 96MB).\n      // 2b. If MEMORY_GROWTH_LINEAR_STEP != -1, excessively resize the heap\n      //     linearly: increase the heap size by at least\n      //     MEMORY_GROWTH_LINEAR_STEP bytes.\n      // 3.  Max size for the heap is capped at 2048MB-WASM_PAGE_SIZE, or by\n      //     MAXIMUM_MEMORY, or by ASAN limit, depending on which is smallest\n      // 4.  If we were unable to allocate as much memory, it may be due to\n      //     over-eager decision to excessively reserve due to (3) above.\n      //     Hence if an allocation fails, cut down on the amount of excess\n      //     growth, in an attempt to succeed to perform a smaller allocation.\n  \n      // A limit is set for how much we can grow. We should not exceed that\n      // (the wasm binary specifies it, so if we tried, we'd fail anyhow).\n      var maxHeapSize = getHeapMax();\n      if (requestedSize > maxHeapSize) {\n        err(`Cannot enlarge memory, requested ${requestedSize} bytes, but the limit is ${maxHeapSize} bytes!`);\n        return false;\n      }\n  \n      var alignUp = (x, multiple) => x + (multiple - x % multiple) % multiple;\n  \n      // Loop through potential heap size increases. If we attempt a too eager\n      // reservation that fails, cut down on the attempted size and reserve a\n      // smaller bump instead. (max 3 times, chosen somewhat arbitrarily)\n      for (var cutDown = 1; cutDown <= 4; cutDown *= 2) {\n        var overGrownHeapSize = oldSize * (1 + 0.2 / cutDown); // ensure geometric growth\n        // but limit overreserving (default to capping at +96MB overgrowth at most)\n        overGrownHeapSize = Math.min(overGrownHeapSize, requestedSize + 100663296 );\n  \n        var newSize = Math.min(maxHeapSize, alignUp(Math.max(requestedSize, overGrownHeapSize), 65536));\n  \n        var replacement = growMemory(newSize);\n        if (replacement) {\n  \n          return true;\n        }\n      }\n      err(`Failed to grow the heap from ${oldSize} bytes to ${newSize} bytes, not enough memory!`);\n      return false;\n    };\n\n  var SYSCALLS = {\n  varargs:undefined,\n  get() {\n        assert(SYSCALLS.varargs != undefined);\n        // the `+` prepended here is necessary to convince the JSCompiler that varargs is indeed a number.\n        var ret = HEAP32[((+SYSCALLS.varargs)>>2)];\n        SYSCALLS.varargs += 4;\n        return ret;\n      },\n  getp() { return SYSCALLS.get() },\n  getStr(ptr) {\n        var ret = UTF8ToString(ptr);\n        return ret;\n      },\n  };\n  var _fd_close = (fd) => {\n      abort('fd_close called without SYSCALLS_REQUIRE_FILESYSTEM');\n    };\n\n  \n  var convertI32PairToI53Checked = (lo, hi) => {\n      assert(lo == (lo >>> 0) || lo == (lo|0)); // lo should either be a i32 or a u32\n      assert(hi === (hi|0));                    // hi should be a i32\n      return ((hi + 0x200000) >>> 0 < 0x400001 - !!lo) ? (lo >>> 0) + hi * 4294967296 : NaN;\n    };\n  function _fd_seek(fd,offset_low, offset_high,whence,newOffset) {\n    var offset = convertI32PairToI53Checked(offset_low, offset_high);;\n  \n    \n      return 70;\n    ;\n  }\n\n  var printCharBuffers = [null,[],[]];\n  \n  var printChar = (stream, curr) => {\n      var buffer = printCharBuffers[stream];\n      assert(buffer);\n      if (curr === 0 || curr === 10) {\n        (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n        buffer.length = 0;\n      } else {\n        buffer.push(curr);\n      }\n    };\n  \n  var flush_NO_FILESYSTEM = () => {\n      // flush anything remaining in the buffers during shutdown\n      _fflush(0);\n      if (printCharBuffers[1].length) printChar(1, 10);\n      if (printCharBuffers[2].length) printChar(2, 10);\n    };\n  \n  \n  var _fd_write = (fd, iov, iovcnt, pnum) => {\n      // hack to support printf in SYSCALLS_REQUIRE_FILESYSTEM=0\n      var num = 0;\n      for (var i = 0; i < iovcnt; i++) {\n        var ptr = HEAPU32[((iov)>>2)];\n        var len = HEAPU32[(((iov)+(4))>>2)];\n        iov += 8;\n        for (var j = 0; j < len; j++) {\n          printChar(fd, HEAPU8[ptr+j]);\n        }\n        num += len;\n      }\n      HEAPU32[((pnum)>>2)] = num;\n      return 0;\n    };\n\nembind_init_charCodes();\nBindingError = Module['BindingError'] = class BindingError extends Error { constructor(message) { super(message); this.name = 'BindingError'; }};\nInternalError = Module['InternalError'] = class InternalError extends Error { constructor(message) { super(message); this.name = 'InternalError'; }};\ninit_ClassHandle();\ninit_embind();;\ninit_RegisteredPointer();\nUnboundTypeError = Module['UnboundTypeError'] = extendError(Error, 'UnboundTypeError');;\nhandleAllocatorInit();\ninit_emval();;\nfunction checkIncomingModuleAPI() {\n  ignoredModuleProp('fetchSettings');\n}\nvar wasmImports = {\n  /** @export */\n  __assert_fail: ___assert_fail,\n  /** @export */\n  __cxa_begin_catch: ___cxa_begin_catch,\n  /** @export */\n  __cxa_find_matching_catch_2: ___cxa_find_matching_catch_2,\n  /** @export */\n  __cxa_find_matching_catch_3: ___cxa_find_matching_catch_3,\n  /** @export */\n  __cxa_throw: ___cxa_throw,\n  /** @export */\n  __resumeException: ___resumeException,\n  /** @export */\n  _embind_register_bigint: __embind_register_bigint,\n  /** @export */\n  _embind_register_bool: __embind_register_bool,\n  /** @export */\n  _embind_register_class: __embind_register_class,\n  /** @export */\n  _embind_register_class_constructor: __embind_register_class_constructor,\n  /** @export */\n  _embind_register_class_function: __embind_register_class_function,\n  /** @export */\n  _embind_register_class_property: __embind_register_class_property,\n  /** @export */\n  _embind_register_emval: __embind_register_emval,\n  /** @export */\n  _embind_register_float: __embind_register_float,\n  /** @export */\n  _embind_register_function: __embind_register_function,\n  /** @export */\n  _embind_register_integer: __embind_register_integer,\n  /** @export */\n  _embind_register_memory_view: __embind_register_memory_view,\n  /** @export */\n  _embind_register_std_string: __embind_register_std_string,\n  /** @export */\n  _embind_register_std_wstring: __embind_register_std_wstring,\n  /** @export */\n  _embind_register_void: __embind_register_void,\n  /** @export */\n  _emval_decref: __emval_decref,\n  /** @export */\n  _emval_incref: __emval_incref,\n  /** @export */\n  _emval_take_value: __emval_take_value,\n  /** @export */\n  abort: _abort,\n  /** @export */\n  emscripten_memcpy_js: _emscripten_memcpy_js,\n  /** @export */\n  emscripten_resize_heap: _emscripten_resize_heap,\n  /** @export */\n  fd_close: _fd_close,\n  /** @export */\n  fd_seek: _fd_seek,\n  /** @export */\n  fd_write: _fd_write,\n  /** @export */\n  invoke_ii: invoke_ii,\n  /** @export */\n  invoke_iii: invoke_iii,\n  /** @export */\n  invoke_v: invoke_v,\n  /** @export */\n  invoke_vi: invoke_vi,\n  /** @export */\n  invoke_vii: invoke_vii,\n  /** @export */\n  invoke_viii: invoke_viii,\n  /** @export */\n  invoke_viiii: invoke_viiii\n};\nvar wasmExports = createWasm();\nvar ___wasm_call_ctors = createExportWrapper('__wasm_call_ctors');\nvar ___getTypeName = createExportWrapper('__getTypeName');\nvar ___errno_location = createExportWrapper('__errno_location');\nvar _fflush = Module['_fflush'] = createExportWrapper('fflush');\nvar _malloc = createExportWrapper('malloc');\nvar _free = Module['_free'] = createExportWrapper('free');\nvar _setThrew = createExportWrapper('setThrew');\nvar setTempRet0 = createExportWrapper('setTempRet0');\nvar _emscripten_stack_init = () => (_emscripten_stack_init = wasmExports['emscripten_stack_init'])();\nvar _emscripten_stack_get_free = () => (_emscripten_stack_get_free = wasmExports['emscripten_stack_get_free'])();\nvar _emscripten_stack_get_base = () => (_emscripten_stack_get_base = wasmExports['emscripten_stack_get_base'])();\nvar _emscripten_stack_get_end = () => (_emscripten_stack_get_end = wasmExports['emscripten_stack_get_end'])();\nvar stackSave = createExportWrapper('stackSave');\nvar stackRestore = createExportWrapper('stackRestore');\nvar stackAlloc = createExportWrapper('stackAlloc');\nvar _emscripten_stack_get_current = () => (_emscripten_stack_get_current = wasmExports['emscripten_stack_get_current'])();\nvar ___cxa_free_exception = createExportWrapper('__cxa_free_exception');\nvar ___cxa_increment_exception_refcount = createExportWrapper('__cxa_increment_exception_refcount');\nvar ___cxa_decrement_exception_refcount = createExportWrapper('__cxa_decrement_exception_refcount');\nvar ___get_exception_message = Module['___get_exception_message'] = createExportWrapper('__get_exception_message');\nvar ___cxa_can_catch = createExportWrapper('__cxa_can_catch');\nvar ___cxa_is_pointer_type = createExportWrapper('__cxa_is_pointer_type');\nvar dynCall_jiji = Module['dynCall_jiji'] = createExportWrapper('dynCall_jiji');\n\nfunction invoke_iii(index,a1,a2) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1,a2);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_ii(index,a1) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_v(index) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)();\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_vi(index,a1) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_viiii(index,a1,a2,a3,a4) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2,a3,a4);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_vii(index,a1,a2) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_viii(index,a1,a2,a3) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2,a3);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\n\n// include: postamble.js\n// === Auto-generated postamble setup entry stuff ===\n\nvar missingLibrarySymbols = [\n  'writeI53ToI64',\n  'writeI53ToI64Clamped',\n  'writeI53ToI64Signaling',\n  'writeI53ToU64Clamped',\n  'writeI53ToU64Signaling',\n  'readI53FromI64',\n  'readI53FromU64',\n  'convertI32PairToI53',\n  'convertU32PairToI53',\n  'zeroMemory',\n  'exitJS',\n  'isLeapYear',\n  'ydayFromDate',\n  'arraySum',\n  'addDays',\n  'setErrNo',\n  'inetPton4',\n  'inetNtop4',\n  'inetPton6',\n  'inetNtop6',\n  'readSockaddr',\n  'writeSockaddr',\n  'getHostByName',\n  'initRandomFill',\n  'randomFill',\n  'getCallstack',\n  'emscriptenLog',\n  'convertPCtoSourceLocation',\n  'readEmAsmArgs',\n  'jstoi_q',\n  'jstoi_s',\n  'getExecutableName',\n  'listenOnce',\n  'autoResumeAudioContext',\n  'handleException',\n  'keepRuntimeAlive',\n  'runtimeKeepalivePush',\n  'runtimeKeepalivePop',\n  'callUserCallback',\n  'maybeExit',\n  'asmjsMangle',\n  'asyncLoad',\n  'alignMemory',\n  'mmapAlloc',\n  'getNativeTypeSize',\n  'STACK_SIZE',\n  'STACK_ALIGN',\n  'POINTER_SIZE',\n  'ASSERTIONS',\n  'getCFunc',\n  'ccall',\n  'cwrap',\n  'uleb128Encode',\n  'sigToWasmTypes',\n  'generateFuncType',\n  'convertJsFunctionToWasm',\n  'getEmptyTableSlot',\n  'updateTableMap',\n  'getFunctionAddress',\n  'addFunction',\n  'removeFunction',\n  'reallyNegative',\n  'unSign',\n  'strLen',\n  'reSign',\n  'formatString',\n  'intArrayFromString',\n  'intArrayToString',\n  'AsciiToString',\n  'stringToAscii',\n  'stringToNewUTF8',\n  'stringToUTF8OnStack',\n  'writeArrayToMemory',\n  'registerKeyEventCallback',\n  'maybeCStringToJsString',\n  'findEventTarget',\n  'findCanvasEventTarget',\n  'getBoundingClientRect',\n  'fillMouseEventData',\n  'registerMouseEventCallback',\n  'registerWheelEventCallback',\n  'registerUiEventCallback',\n  'registerFocusEventCallback',\n  'fillDeviceOrientationEventData',\n  'registerDeviceOrientationEventCallback',\n  'fillDeviceMotionEventData',\n  'registerDeviceMotionEventCallback',\n  'screenOrientation',\n  'fillOrientationChangeEventData',\n  'registerOrientationChangeEventCallback',\n  'fillFullscreenChangeEventData',\n  'registerFullscreenChangeEventCallback',\n  'JSEvents_requestFullscreen',\n  'JSEvents_resizeCanvasForFullscreen',\n  'registerRestoreOldStyle',\n  'hideEverythingExceptGivenElement',\n  'restoreHiddenElements',\n  'setLetterbox',\n  'softFullscreenResizeWebGLRenderTarget',\n  'doRequestFullscreen',\n  'fillPointerlockChangeEventData',\n  'registerPointerlockChangeEventCallback',\n  'registerPointerlockErrorEventCallback',\n  'requestPointerLock',\n  'fillVisibilityChangeEventData',\n  'registerVisibilityChangeEventCallback',\n  'registerTouchEventCallback',\n  'fillGamepadEventData',\n  'registerGamepadEventCallback',\n  'registerBeforeUnloadEventCallback',\n  'fillBatteryEventData',\n  'battery',\n  'registerBatteryEventCallback',\n  'setCanvasElementSize',\n  'getCanvasElementSize',\n  'demangle',\n  'demangleAll',\n  'jsStackTrace',\n  'stackTrace',\n  'getEnvStrings',\n  'checkWasiClock',\n  'wasiRightsToMuslOFlags',\n  'wasiOFlagsToMuslOFlags',\n  'createDyncallWrapper',\n  'safeSetTimeout',\n  'setImmediateWrapped',\n  'clearImmediateWrapped',\n  'polyfillSetImmediate',\n  'getPromise',\n  'makePromise',\n  'idsToPromises',\n  'makePromiseCallback',\n  'setMainLoop',\n  'getSocketFromFD',\n  'getSocketAddress',\n  'FS_createPreloadedFile',\n  'FS_modeStringToFlags',\n  'FS_getMode',\n  'FS_stdin_getChar',\n  'FS_createDataFile',\n  'FS_unlink',\n  'FS_mkdirTree',\n  '_setNetworkCallback',\n  'heapObjectForWebGLType',\n  'heapAccessShiftForWebGLHeap',\n  'webgl_enable_ANGLE_instanced_arrays',\n  'webgl_enable_OES_vertex_array_object',\n  'webgl_enable_WEBGL_draw_buffers',\n  'webgl_enable_WEBGL_multi_draw',\n  'emscriptenWebGLGet',\n  'computeUnpackAlignedImageSize',\n  'colorChannelsInGlTextureFormat',\n  'emscriptenWebGLGetTexPixelData',\n  '__glGenObject',\n  'emscriptenWebGLGetUniform',\n  'webglGetUniformLocation',\n  'webglPrepareUniformLocationsBeforeFirstUse',\n  'webglGetLeftBracePos',\n  'emscriptenWebGLGetVertexAttrib',\n  '__glGetActiveAttribOrUniform',\n  'writeGLArray',\n  'registerWebGlEventCallback',\n  'runAndAbortIfError',\n  'SDL_unicode',\n  'SDL_ttfContext',\n  'SDL_audio',\n  'ALLOC_NORMAL',\n  'ALLOC_STACK',\n  'allocate',\n  'writeStringToMemory',\n  'writeAsciiToMemory',\n  'getFunctionArgsName',\n  'registerInheritedInstance',\n  'unregisterInheritedInstance',\n  'enumReadValueFromPointer',\n  'getStringOrSymbol',\n  'emval_get_global',\n  'emval_returnValue',\n  'emval_lookupTypes',\n  'emval_addMethodCaller',\n];\nmissingLibrarySymbols.forEach(missingLibrarySymbol)\n\nvar unexportedSymbols = [\n  'run',\n  'addOnPreRun',\n  'addOnInit',\n  'addOnPreMain',\n  'addOnExit',\n  'addOnPostRun',\n  'addRunDependency',\n  'removeRunDependency',\n  'FS_createFolder',\n  'FS_createPath',\n  'FS_createLazyFile',\n  'FS_createLink',\n  'FS_createDevice',\n  'FS_readFile',\n  'out',\n  'err',\n  'callMain',\n  'abort',\n  'wasmMemory',\n  'wasmExports',\n  'stackAlloc',\n  'stackSave',\n  'stackRestore',\n  'getTempRet0',\n  'setTempRet0',\n  'writeStackCookie',\n  'checkStackCookie',\n  'convertI32PairToI53Checked',\n  'ptrToString',\n  'getHeapMax',\n  'growMemory',\n  'ENV',\n  'MONTH_DAYS_REGULAR',\n  'MONTH_DAYS_LEAP',\n  'MONTH_DAYS_REGULAR_CUMULATIVE',\n  'MONTH_DAYS_LEAP_CUMULATIVE',\n  'ERRNO_CODES',\n  'ERRNO_MESSAGES',\n  'DNS',\n  'Protocols',\n  'Sockets',\n  'timers',\n  'warnOnce',\n  'UNWIND_CACHE',\n  'readEmAsmArgsArray',\n  'dynCallLegacy',\n  'getDynCaller',\n  'dynCall',\n  'handleAllocatorInit',\n  'HandleAllocator',\n  'wasmTable',\n  'noExitRuntime',\n  'freeTableIndexes',\n  'functionsInTableMap',\n  'setValue',\n  'getValue',\n  'PATH',\n  'PATH_FS',\n  'UTF8Decoder',\n  'UTF8ArrayToString',\n  'UTF8ToString',\n  'stringToUTF8Array',\n  'stringToUTF8',\n  'lengthBytesUTF8',\n  'UTF16Decoder',\n  'UTF16ToString',\n  'stringToUTF16',\n  'lengthBytesUTF16',\n  'UTF32ToString',\n  'stringToUTF32',\n  'lengthBytesUTF32',\n  'JSEvents',\n  'specialHTMLTargets',\n  'currentFullscreenStrategy',\n  'restoreOldWindowedStyle',\n  'ExitStatus',\n  'flush_NO_FILESYSTEM',\n  'promiseMap',\n  'uncaughtExceptionCount',\n  'exceptionLast',\n  'exceptionCaught',\n  'ExceptionInfo',\n  'findMatchingCatch',\n  'getExceptionMessageCommon',\n  'incrementExceptionRefcount',\n  'decrementExceptionRefcount',\n  'getExceptionMessage',\n  'Browser',\n  'wget',\n  'SYSCALLS',\n  'preloadPlugins',\n  'FS_stdin_getChar_buffer',\n  'FS',\n  'MEMFS',\n  'TTY',\n  'PIPEFS',\n  'SOCKFS',\n  'tempFixedLengthArray',\n  'miniTempWebGLFloatBuffers',\n  'miniTempWebGLIntBuffers',\n  'GL',\n  'emscripten_webgl_power_preferences',\n  'AL',\n  'GLUT',\n  'EGL',\n  'GLEW',\n  'IDBStore',\n  'SDL',\n  'SDL_gfx',\n  'allocateUTF8',\n  'allocateUTF8OnStack',\n  'InternalError',\n  'BindingError',\n  'throwInternalError',\n  'throwBindingError',\n  'registeredTypes',\n  'awaitingDependencies',\n  'typeDependencies',\n  'tupleRegistrations',\n  'structRegistrations',\n  'sharedRegisterType',\n  'whenDependentTypesAreResolved',\n  'embind_charCodes',\n  'embind_init_charCodes',\n  'readLatin1String',\n  'getTypeName',\n  'getFunctionName',\n  'heap32VectorToArray',\n  'requireRegisteredType',\n  'UnboundTypeError',\n  'PureVirtualError',\n  'GenericWireTypeSize',\n  'init_embind',\n  'throwUnboundTypeError',\n  'ensureOverloadTable',\n  'exposePublicSymbol',\n  'replacePublicSymbol',\n  'extendError',\n  'createNamedFunction',\n  'embindRepr',\n  'registeredInstances',\n  'getBasestPointer',\n  'getInheritedInstance',\n  'getInheritedInstanceCount',\n  'getLiveInheritedInstances',\n  'registeredPointers',\n  'registerType',\n  'integerReadValueFromPointer',\n  'floatReadValueFromPointer',\n  'simpleReadValueFromPointer',\n  'readPointer',\n  'runDestructors',\n  'newFunc',\n  'craftInvokerFunction',\n  'embind__requireFunction',\n  'genericPointerToWireType',\n  'constNoSmartPtrRawPointerToWireType',\n  'nonConstNoSmartPtrRawPointerToWireType',\n  'init_RegisteredPointer',\n  'RegisteredPointer',\n  'RegisteredPointer_fromWireType',\n  'runDestructor',\n  'releaseClassHandle',\n  'finalizationRegistry',\n  'detachFinalizer_deps',\n  'detachFinalizer',\n  'attachFinalizer',\n  'makeClassHandle',\n  'init_ClassHandle',\n  'ClassHandle',\n  'throwInstanceAlreadyDeleted',\n  'deletionQueue',\n  'flushPendingDeletes',\n  'delayFunction',\n  'setDelayFunction',\n  'RegisteredClass',\n  'shallowCopyInternalPointer',\n  'downcastPointer',\n  'upcastPointer',\n  'validateThis',\n  'char_0',\n  'char_9',\n  'makeLegalFunctionName',\n  'emval_handles',\n  'emval_symbols',\n  'init_emval',\n  'count_emval_handles',\n  'Emval',\n  'emval_methodCallers',\n  'reflectConstruct',\n];\nunexportedSymbols.forEach(unexportedRuntimeSymbol);\n\n\n\nvar calledRun;\n\ndependenciesFulfilled = function runCaller() {\n  // If run has never been called, and we should call run (INVOKE_RUN is true, and Module.noInitialRun is not false)\n  if (!calledRun) run();\n  if (!calledRun) dependenciesFulfilled = runCaller; // try this again later, after new deps are fulfilled\n};\n\nfunction stackCheckInit() {\n  // This is normally called automatically during __wasm_call_ctors but need to\n  // get these values before even running any of the ctors so we call it redundantly\n  // here.\n  _emscripten_stack_init();\n  // TODO(sbc): Move writeStackCookie to native to to avoid this.\n  writeStackCookie();\n}\n\nfunction run() {\n\n  if (runDependencies > 0) {\n    return;\n  }\n\n    stackCheckInit();\n\n  preRun();\n\n  // a preRun added a dependency, run will be called later\n  if (runDependencies > 0) {\n    return;\n  }\n\n  function doRun() {\n    // run may have just been called through dependencies being fulfilled just in this very frame,\n    // or while the async setStatus time below was happening\n    if (calledRun) return;\n    calledRun = true;\n    Module['calledRun'] = true;\n\n    if (ABORT) return;\n\n    initRuntime();\n\n    readyPromiseResolve(Module);\n    if (Module['onRuntimeInitialized']) Module['onRuntimeInitialized']();\n\n    assert(!Module['_main'], 'compiled without a main, but one is present. if you added it from JS, use Module[\"onRuntimeInitialized\"]');\n\n    postRun();\n  }\n\n  if (Module['setStatus']) {\n    Module['setStatus']('Running...');\n    setTimeout(function() {\n      setTimeout(function() {\n        Module['setStatus']('');\n      }, 1);\n      doRun();\n    }, 1);\n  } else\n  {\n    doRun();\n  }\n  checkStackCookie();\n}\n\nfunction checkUnflushedContent() {\n  // Compiler settings do not allow exiting the runtime, so flushing\n  // the streams is not possible. but in ASSERTIONS mode we check\n  // if there was something to flush, and if so tell the user they\n  // should request that the runtime be exitable.\n  // Normally we would not even include flush() at all, but in ASSERTIONS\n  // builds we do so just for this check, and here we see if there is any\n  // content to flush, that is, we check if there would have been\n  // something a non-ASSERTIONS build would have not seen.\n  // How we flush the streams depends on whether we are in SYSCALLS_REQUIRE_FILESYSTEM=0\n  // mode (which has its own special function for this; otherwise, all\n  // the code is inside libc)\n  var oldOut = out;\n  var oldErr = err;\n  var has = false;\n  out = err = (x) => {\n    has = true;\n  }\n  try { // it doesn't matter if it fails\n    flush_NO_FILESYSTEM();\n  } catch(e) {}\n  out = oldOut;\n  err = oldErr;\n  if (has) {\n    warnOnce('stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the Emscripten FAQ), or make sure to emit a newline when you printf etc.');\n    warnOnce('(this may also be due to not including full filesystem support - try building with -sFORCE_FILESYSTEM)');\n  }\n}\n\nif (Module['preInit']) {\n  if (typeof Module['preInit'] == 'function') Module['preInit'] = [Module['preInit']];\n  while (Module['preInit'].length > 0) {\n    Module['preInit'].pop()();\n  }\n}\n\nrun();\n\n\n// end include: postamble.js\n\n\n  return moduleArg.ready\n}\n);\n})();\n;\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = Module;\nelse if (typeof define === 'function' && define['amd'])\n  define([], () => Module);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".autumnplot-gl.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","/**\r\n * Copyright 2019 Google Inc. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst proxyMarker = Symbol(\"Comlink.proxy\");\r\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\r\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\r\nconst throwMarker = Symbol(\"Comlink.thrown\");\r\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\r\n/**\r\n * Internal transfer handle to handle objects marked to proxy.\r\n */\r\nconst proxyTransferHandler = {\r\n    canHandle: (val) => isObject(val) && val[proxyMarker],\r\n    serialize(obj) {\r\n        const { port1, port2 } = new MessageChannel();\r\n        expose(obj, port1);\r\n        return [port2, [port2]];\r\n    },\r\n    deserialize(port) {\r\n        port.start();\r\n        return wrap(port);\r\n    },\r\n};\r\n/**\r\n * Internal transfer handler to handle thrown exceptions.\r\n */\r\nconst throwTransferHandler = {\r\n    canHandle: (value) => isObject(value) && throwMarker in value,\r\n    serialize({ value }) {\r\n        let serialized;\r\n        if (value instanceof Error) {\r\n            serialized = {\r\n                isError: true,\r\n                value: {\r\n                    message: value.message,\r\n                    name: value.name,\r\n                    stack: value.stack,\r\n                },\r\n            };\r\n        }\r\n        else {\r\n            serialized = { isError: false, value };\r\n        }\r\n        return [serialized, []];\r\n    },\r\n    deserialize(serialized) {\r\n        if (serialized.isError) {\r\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\r\n        }\r\n        throw serialized.value;\r\n    },\r\n};\r\n/**\r\n * Allows customizing the serialization of certain values.\r\n */\r\nconst transferHandlers = new Map([\r\n    [\"proxy\", proxyTransferHandler],\r\n    [\"throw\", throwTransferHandler],\r\n]);\r\nfunction expose(obj, ep = self) {\r\n    ep.addEventListener(\"message\", function callback(ev) {\r\n        if (!ev || !ev.data) {\r\n            return;\r\n        }\r\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\r\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\r\n        let returnValue;\r\n        try {\r\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\r\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\r\n            switch (type) {\r\n                case \"GET\" /* GET */:\r\n                    {\r\n                        returnValue = rawValue;\r\n                    }\r\n                    break;\r\n                case \"SET\" /* SET */:\r\n                    {\r\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\r\n                        returnValue = true;\r\n                    }\r\n                    break;\r\n                case \"APPLY\" /* APPLY */:\r\n                    {\r\n                        returnValue = rawValue.apply(parent, argumentList);\r\n                    }\r\n                    break;\r\n                case \"CONSTRUCT\" /* CONSTRUCT */:\r\n                    {\r\n                        const value = new rawValue(...argumentList);\r\n                        returnValue = proxy(value);\r\n                    }\r\n                    break;\r\n                case \"ENDPOINT\" /* ENDPOINT */:\r\n                    {\r\n                        const { port1, port2 } = new MessageChannel();\r\n                        expose(obj, port2);\r\n                        returnValue = transfer(port1, [port1]);\r\n                    }\r\n                    break;\r\n                case \"RELEASE\" /* RELEASE */:\r\n                    {\r\n                        returnValue = undefined;\r\n                    }\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        catch (value) {\r\n            returnValue = { value, [throwMarker]: 0 };\r\n        }\r\n        Promise.resolve(returnValue)\r\n            .catch((value) => {\r\n            return { value, [throwMarker]: 0 };\r\n        })\r\n            .then((returnValue) => {\r\n            const [wireValue, transferables] = toWireValue(returnValue);\r\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\r\n            if (type === \"RELEASE\" /* RELEASE */) {\r\n                // detach and deactive after sending release response above.\r\n                ep.removeEventListener(\"message\", callback);\r\n                closeEndPoint(ep);\r\n            }\r\n        });\r\n    });\r\n    if (ep.start) {\r\n        ep.start();\r\n    }\r\n}\r\nfunction isMessagePort(endpoint) {\r\n    return endpoint.constructor.name === \"MessagePort\";\r\n}\r\nfunction closeEndPoint(endpoint) {\r\n    if (isMessagePort(endpoint))\r\n        endpoint.close();\r\n}\r\nfunction wrap(ep, target) {\r\n    return createProxy(ep, [], target);\r\n}\r\nfunction throwIfProxyReleased(isReleased) {\r\n    if (isReleased) {\r\n        throw new Error(\"Proxy has been released and is not useable\");\r\n    }\r\n}\r\nfunction createProxy(ep, path = [], target = function () { }) {\r\n    let isProxyReleased = false;\r\n    const proxy = new Proxy(target, {\r\n        get(_target, prop) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            if (prop === releaseProxy) {\r\n                return () => {\r\n                    return requestResponseMessage(ep, {\r\n                        type: \"RELEASE\" /* RELEASE */,\r\n                        path: path.map((p) => p.toString()),\r\n                    }).then(() => {\r\n                        closeEndPoint(ep);\r\n                        isProxyReleased = true;\r\n                    });\r\n                };\r\n            }\r\n            if (prop === \"then\") {\r\n                if (path.length === 0) {\r\n                    return { then: () => proxy };\r\n                }\r\n                const r = requestResponseMessage(ep, {\r\n                    type: \"GET\" /* GET */,\r\n                    path: path.map((p) => p.toString()),\r\n                }).then(fromWireValue);\r\n                return r.then.bind(r);\r\n            }\r\n            return createProxy(ep, [...path, prop]);\r\n        },\r\n        set(_target, prop, rawValue) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\r\n            // boolean. To show good will, we return true asynchronously \\_()_/\r\n            const [value, transferables] = toWireValue(rawValue);\r\n            return requestResponseMessage(ep, {\r\n                type: \"SET\" /* SET */,\r\n                path: [...path, prop].map((p) => p.toString()),\r\n                value,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        apply(_target, _thisArg, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const last = path[path.length - 1];\r\n            if (last === createEndpoint) {\r\n                return requestResponseMessage(ep, {\r\n                    type: \"ENDPOINT\" /* ENDPOINT */,\r\n                }).then(fromWireValue);\r\n            }\r\n            // We just pretend that `bind()` didnt happen.\r\n            if (last === \"bind\") {\r\n                return createProxy(ep, path.slice(0, -1));\r\n            }\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"APPLY\" /* APPLY */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        construct(_target, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"CONSTRUCT\" /* CONSTRUCT */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n    });\r\n    return proxy;\r\n}\r\nfunction myFlat(arr) {\r\n    return Array.prototype.concat.apply([], arr);\r\n}\r\nfunction processArguments(argumentList) {\r\n    const processed = argumentList.map(toWireValue);\r\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\r\n}\r\nconst transferCache = new WeakMap();\r\nfunction transfer(obj, transfers) {\r\n    transferCache.set(obj, transfers);\r\n    return obj;\r\n}\r\nfunction proxy(obj) {\r\n    return Object.assign(obj, { [proxyMarker]: true });\r\n}\r\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\r\n    return {\r\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\r\n        addEventListener: context.addEventListener.bind(context),\r\n        removeEventListener: context.removeEventListener.bind(context),\r\n    };\r\n}\r\nfunction toWireValue(value) {\r\n    for (const [name, handler] of transferHandlers) {\r\n        if (handler.canHandle(value)) {\r\n            const [serializedValue, transferables] = handler.serialize(value);\r\n            return [\r\n                {\r\n                    type: \"HANDLER\" /* HANDLER */,\r\n                    name,\r\n                    value: serializedValue,\r\n                },\r\n                transferables,\r\n            ];\r\n        }\r\n    }\r\n    return [\r\n        {\r\n            type: \"RAW\" /* RAW */,\r\n            value,\r\n        },\r\n        transferCache.get(value) || [],\r\n    ];\r\n}\r\nfunction fromWireValue(value) {\r\n    switch (value.type) {\r\n        case \"HANDLER\" /* HANDLER */:\r\n            return transferHandlers.get(value.name).deserialize(value.value);\r\n        case \"RAW\" /* RAW */:\r\n            return value.value;\r\n    }\r\n}\r\nfunction requestResponseMessage(ep, msg, transfers) {\r\n    return new Promise((resolve) => {\r\n        const id = generateUUID();\r\n        ep.addEventListener(\"message\", function l(ev) {\r\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\r\n                return;\r\n            }\r\n            ep.removeEventListener(\"message\", l);\r\n            resolve(ev.data);\r\n        });\r\n        if (ep.start) {\r\n            ep.start();\r\n        }\r\n        ep.postMessage(Object.assign({ id }, msg), transfers);\r\n    });\r\n}\r\nfunction generateUUID() {\r\n    return new Array(4)\r\n        .fill(0)\r\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\r\n        .join(\"-\");\r\n}\n\nexport { createEndpoint, expose, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","\nconst hex2rgba = (hexstr: string, out_type?: string) : [number, number, number, number] => {\n    out_type = out_type === undefined ? 'float' : out_type;\n\n    const match = hexstr.match(/#([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?/i);\n    if (match === null) {\n        throw `Got '${hexstr}' in hex2rgba, which does not look like a hex color`;\n    }\n\n    let rgba = match.slice(1).filter(c => c !== undefined).map(c => parseInt(c, 16));\n\n    if (out_type == 'float') {\n        rgba = rgba.map(c => c / 255);\n    }\n\n    return rgba[3] === undefined ? [rgba[0], rgba[1], rgba[2], 1] : [rgba[0], rgba[1], rgba[2], rgba[3]];\n}\n\nconst rgba2hex = (rgba: [number, number, number, number], in_type?: string) : string => {\n    in_type = in_type === undefined ? 'float' : in_type;\n\n    let rgba_ = rgba as number[];\n    if (in_type == 'float') {\n        rgba_ = rgba_.map(c => Math.round(c * 255));\n    }\n\n    return '#' + rgba_.map(c => c.toString(16).padStart(2, '0').toUpperCase()).join('');\n}\n\nconst hex2rgb = (hexstr: string, out_type?: string) : [number, number, number] => {\n    const[r, g, b, a] = hex2rgba(hexstr, out_type);\n    return [r, g, b];\n}\n\nconst rgb2hex = (rgb: [number, number, number], in_type?: string) : string => {\n    const [r, g, b] = rgb;\n    return rgba2hex([r, g, b, 0], in_type).slice(0, -2);\n}\n\nconst rgb2hsv = (rgb: [number, number, number]) : [number, number, number] => {\n    const [r, g, b] = rgb;\n\n    const Cmax = Math.max(r, g, b);\n    const Cmin = Math.min(r, g, b);\n    const Delta = Cmax - Cmin;\n    \n    let H: number;\n    if (Delta == 0) {\n        H = 0;\n    }\n    else if (Cmax == r) {\n        H = 60 * ((g - b) / Delta) % 6;\n    }\n    else if (Cmax == g) {\n        H = 60 * ((b - r) / Delta + 2);\n    }\n    else if (Cmax == b) {\n        H = 60 * ((r - g) / Delta + 4);\n    }\n\n    let S = Cmax == 0 ? 0 : Delta / Cmax;\n    let V = Cmax;\n\n    return [H, S, V];\n}\n\nconst hsv2rgb = (hsv: [number, number, number]) : [number, number, number] => {\n    const [H, S, V] = hsv;\n\n    const C = V * S;\n    const X = C * (1 - Math.abs(H / 60 % 2 - 1));\n    const m = V - C;\n\n    let r_prime, g_prime, b_prime;\n    if (0 <= H && H < 60) {\n        r_prime = C; g_prime = X, b_prime = 0;\n    }\n    else if (60 <= H && H < 120) {\n        r_prime = X; g_prime = C, b_prime = 0;\n    }\n    else if (120 <= H && H < 180) {\n        r_prime = 0; g_prime = C, b_prime = X;\n    }\n    else if (180 <= H && H < 240) {\n        r_prime = 0; g_prime = X, b_prime = C;\n    }\n    else if (240 <= H && H < 300) {\n        r_prime = X; g_prime = 0, b_prime = C;\n    }\n    else if (300 <= H && H < 360) {\n        r_prime = C; g_prime = 0, b_prime = X;\n    }\n\n    return [r_prime + m, g_prime + m, b_prime + m];\n}\n\nfunction getMinZoom(jlat: number, ilon: number, thin_fac_base: number) {\n    const zoom_base = 1;\n\n    let zoom = zoom_base;\n    let thin_fac = thin_fac_base;\n\n    while (((jlat % thin_fac) != 0) || ((ilon % thin_fac) != 0)) {\n        zoom += 1;\n        thin_fac /= 2;\n    }\n\n    return zoom;\n}\n\nfunction* zip(...args: any[]) {\n\tconst iterators = args.map(x => x[Symbol.iterator]());\n\twhile (true) {\n\t\tconst current = iterators.map(x => x.next());\n\t\tif (current.some(x => x.done)) {\n\t\t\tbreak;\n\t\t}\n\t\tyield current.map(x => x.value);\n\t}\n}\n\nfunction getOS() {\n    const userAgent = window.navigator.userAgent,\n        platform = window.navigator.platform,\n        macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],\n        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],\n        iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n    let os = null;\n\n    if (macosPlatforms.indexOf(platform) !== -1 && navigator.maxTouchPoints <= 1) {\n        os = 'Mac OS';\n    } \n    else if (iosPlatforms.indexOf(platform) !== -1 || (macosPlatforms.indexOf(platform) !== -1 && navigator.maxTouchPoints > 1)) { \n        os = 'iOS';\n    } \n    else if (windowsPlatforms.indexOf(platform) !== -1) {\n        os = 'Windows';\n    } \n    else if (/Android/.test(userAgent)) {\n        os = 'Android';\n    } \n    else if (/Linux/.test(platform)) {\n        os = 'Linux';\n    }\n\n    return os;\n}\n\nclass Cache<A extends unknown[], R> {\n    private cached_values: Record<string, R>;\n    private readonly compute_value: (...args: A) => R;\n    private readonly make_key: (...args: A) => string;\n\n    constructor(compute_value: (...args: A) => R, make_key?: (...args: A) => string) {\n        this.cached_values = {};\n        this.compute_value = compute_value;\n        this.make_key = make_key === undefined ? (...args: A) => JSON.stringify(args) : make_key;\n    }\n\n    public getValue(...args: A) {\n        const key = this.make_key(...args);\n\n        if (!(key in this.cached_values)) {\n            this.cached_values[key] = this.compute_value(...args);\n        }\n\n        return this.cached_values[key];\n    }\n}\n\n\nfunction normalizeOptions<Type extends Record<string, any>>(opts: Type | undefined, defaults: Required<Type>) {\n    const ret = {...defaults} as Required<Type>;\n\n    if (opts !== undefined) {\n        Object.entries(opts).forEach(([k, v]: [keyof Type, any]) => {\n            ret[k] = v;\n        });\n    }\n\n    return ret;\n}\n\nexport {hex2rgba, rgba2hex, hex2rgb, rgb2hex, rgb2hsv, hsv2rgb, zip, getMinZoom, getOS, Cache, normalizeOptions};\n","\nimport { Float16Array } from \"@petamoriken/float16\";\n\ninterface WindProfile {\n    lat: number;\n    lon: number;\n    jlat: number;\n    ilon: number;\n    smu: number;\n    smv: number;\n    u: Float32Array;\n    v: Float32Array;\n    z: Float32Array\n}\n\ninterface BillboardSpec {\n    BB_WIDTH: number;\n    BB_HEIGHT: number;\n    BB_TEX_WIDTH: number;\n    BB_TEX_HEIGHT: number;\n    BB_MAG_BIN_SIZE: number;\n    BB_MAG_WRAP: number;\n    BB_MAG_MAX: number;\n}\n\ntype LineData = {\n    vertices: [number, number][];\n    offsets?: [number, number][];\n    data?: number[];\n    zoom?: number;\n}\n\ntype Polyline = {\n    extrusion: Float32Array;\n    vertices: Float32Array;\n    offsets?: Float32Array;\n    data?: Float32Array;\n    zoom?: Float32Array;\n};\n\ntype WebGLAnyRenderingContext = WebGLRenderingContext | WebGL2RenderingContext;\n\nfunction isWebGL2Ctx(gl: WebGLAnyRenderingContext) : gl is WebGL2RenderingContext {\n    return gl.getParameter(gl.VERSION).includes('WebGL 2.0');\n}\n\ntype TypedArray = Float16Array | Float32Array;\n\ntype ContourData = Record<number, [number, number][][]>;\n\nexport {isWebGL2Ctx};\nexport type {WindProfile, BillboardSpec, Polyline, LineData, WebGLAnyRenderingContext, TypedArray, ContourData};","\nimport * as Comlink from 'comlink';\n\nimport { getOS } from \"./utils\";\nimport { PlotLayerWorker } from './PlotLayer.worker';\nimport { MapLikeType } from './Map';\nimport { WebGLAnyRenderingContext, isWebGL2Ctx } from './AutumnTypes';\n\nconst worker = new Worker(new URL('./PlotLayer.worker', import.meta.url));\nconst layer_worker = Comlink.wrap<PlotLayerWorker>(worker);\n\nabstract class PlotComponent<MapType extends MapLikeType> {\n    public abstract onAdd(map: MapType, gl: WebGLAnyRenderingContext) : Promise<void>;\n    public abstract render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) : void;\n}\n\nfunction getGLFormatTypeAlignment(gl: WebGLAnyRenderingContext, is_float16: boolean) {\n    let format, type, row_alignment;\n    const is_webgl2 = isWebGL2Ctx(gl);\n\n    if (is_float16) {\n        const ext = gl.getExtension('OES_texture_half_float');\n        const ext_lin = gl.getExtension('OES_texture_half_float_linear');\n\n        if ((!is_webgl2 && ext === null) || (!is_webgl2 && ext_lin === null)) {\n            throw \"Float16 data are not supported on this hardware. Try Float32 data instead.\";\n        }\n\n        format = is_webgl2 ? gl.R16F : gl.LUMINANCE;\n        type = is_webgl2 ? gl.HALF_FLOAT : ext.HALF_FLOAT_OES;\n        row_alignment = 2;\n    }\n    else {\n        const ext = gl.getExtension('OES_texture_float');\n        const ext_lin = gl.getExtension('OES_texture_float_linear');\n\n\t\t// As of 11/3/2023, Safari/WebKit on iOS reports as supporting float textures,\n\t\t// but really doesn't. It just silently fails. In WebGL 1, Safari/Webkit returns\n\t\t// null for ext_lin here, but in WebGL2, both ext vars are null because they were \n\t\t// merged into the standard. This means that to properly fail for iOS devices using\n\t\t// WebGL2, we have to hard code an OS check... this OS check also works when uers\n\t\t// request desktop-mode websites.\n\t\tif ((!is_webgl2 && ext === null) || (!is_webgl2 && ext_lin === null) || (getOS() === 'iOS')) {\t\n            throw \"Float32 data are not supported on this hardware. Try Float16 data instead.\";\n        }\n\n        format = is_webgl2 ? gl.R32F : gl.LUMINANCE;\n        type = gl.FLOAT;\n        row_alignment = 4;\n    }\n\n    return {format: format, type: type, row_alignment: row_alignment};\n}\n\nexport { PlotComponent, layer_worker, getGLFormatTypeAlignment };\n","\n\n// Stub in required method and property types for the mapping library. God help me if these start to diverge between Mapbox and MapLibre.\ntype StyleSpecification = {\n    glyphs?: string;\n}\n\ntype MapLikeType = {\n    triggerRepaint: () => void;\n    getCanvas: () => HTMLCanvasElement;\n    getStyle: () => StyleSpecification;\n\n    getZoom: () => number;\n    getMaxZoom: () => number;\n    getBearing: () => number;\n    getPitch: () => number;\n};\n\ninterface LambertConformalConicParameters {\n    lon_0: number,\n    lat_0: number,\n    lat_std: [number, number] | number;\n}\n\nfunction lambertConformalConic(params: LambertConformalConicParameters) {\n    // Formulas from https://pubs.usgs.gov/pp/1395/report.pdf\n\n    const compute_t = (lat: number) => {\n        const sin_lat = Math.sin(lat);\n        return Math.tan(Math.PI / 4 - lat / 2) * Math.pow((1 + eccen * sin_lat) / (1 - eccen * sin_lat), eccen / 2);\n    };\n    const compute_m = (lat: number) => {\n        const sin_lat = Math.sin(lat);\n        return Math.cos(lat) / Math.sqrt(1 - eccen * eccen * sin_lat * sin_lat);\n    }\n\n    // WGS 84 spheroid\n    const semimajor = 6378137.0;\n    const semiminor = 6356752.314245;\n    const eccen = Math.sqrt(1 - (semiminor * semiminor) / (semimajor * semimajor));\n    const radians = Math.PI / 180;\n\n    let {lon_0, lat_0, lat_std} = params;\n    lat_std = Array.isArray(lat_std) && lat_std[0] == lat_std[1] ? lat_std[0] : lat_std;\n\n    lon_0 *= radians;\n    lat_0 *= radians;\n\n    let F: number, n: number;\n    const t_0 = compute_t(lat_0);\n\n    if (Array.isArray(lat_std)) {\n        let [lat_1, lat_2] = lat_std;\n        lat_1 *= radians;\n        lat_2 *= radians;\n\n        const t_1 = compute_t(lat_1);\n        const t_2 = compute_t(lat_2);\n        const m_1 = compute_m(lat_1);\n        const m_2 = compute_m(lat_2);\n\n        n = Math.log(m_1 / m_2) / Math.log(t_1 / t_2);\n        F = m_1 / (n * Math.pow(t_1, n));\n    }\n    else {\n        let lat_1 = lat_std;\n        lat_1 *= radians;\n\n        const t_1 = compute_t(lat_1);\n        const m_1 = compute_m(lat_1);\n        n = Math.sin(lat_1);\n        F = m_1 / (n * Math.pow(t_1, n));\n    }\n\n    const rho_0 = semimajor * F * Math.pow(t_0, n);\n\n    const compute_lcc = (lon: number, lat: number) : [number, number] => {\n        lon *= radians;\n        lat *= radians;\n\n        const t = compute_t(lat);\n        const rho = semimajor * F * Math.pow(t, n);\n        const theta = n * (lon - lon_0);\n        const x = rho * Math.sin(theta);\n        const y = rho_0 - rho * Math.cos(theta);\n\n        return [x, y];\n    }\n\n    const eccen2 = eccen * eccen;\n    const eccen4 = eccen2 * eccen2;\n    const eccen6 = eccen4 * eccen2;\n    const eccen8 = eccen6 * eccen2;\n\n/*\n    const A = eccen2 / 2 + 5 * eccen4 / 24 + eccen6 / 12 + 13 * eccen8 / 360;\n    const B = 7 * eccen4 / 48 + 29 * eccen6 / 240 + 811 * eccen8 / 11520;\n    const C = 7 * eccen6 / 120 + 81 * eccen8 / 1120;\n    const D = 4279 * eccen8 / 161280;\n    const Ap = A - C;\n    const Bp = 2 * B - 4 * D;\n    const Cp = 4 * C;\n    const Dp = 8 * D;\n*/\n\n    const Ap = eccen2 / 2 + 5 * eccen4 / 24 + 3 * eccen6 / 120 - 73 * eccen8 / 2016;\n    const Bp = 7 * eccen4 / 24 + 29 * eccen6 / 120 + 233 * eccen8 / 6720;\n    const Cp = 7 * eccen6 / 30 + 81 * eccen8 / 280;\n    const Dp = 4729 * eccen8 / 20160;\n\n    const compute_lcc_inverse = (x: number, y: number) : [number, number] => {\n        const theta = Math.atan2(x, rho_0 - y); // These arguments are backwards from what I'd expect ...\n        const lon = theta / n + lon_0;\n        const rho = Math.hypot(x, rho_0 - y) * Math.sign(n);\n        const t = Math.pow(rho / (semimajor * F), 1 / n);\n\n        const chi = Math.PI / 2 - 2 * Math.atan(t);\n        const sin_2chi = Math.sin(2 * chi);\n        const cos_2chi = Math.cos(2 * chi);\n\n        const lat = chi + sin_2chi * (Ap + cos_2chi * (Bp + cos_2chi * (Cp + Dp * cos_2chi)));\n\n        return [lon / radians, lat / radians];\n    }\n\n    return (a: number, b: number, opts?: {inverse: boolean}) : [number, number] => {\n        opts = opts === undefined ? {inverse: false} : opts;\n        return opts.inverse ? compute_lcc_inverse(a, b) : compute_lcc(a, b);\n    }\n}\n\ninterface RotateSphereParams {\n    np_lon: number,\n    np_lat: number,\n    lon_shift: number,\n}\n\nfunction rotateSphere(params: RotateSphereParams) {\n    const radians = Math.PI / 180;\n    const np_lat = params.np_lat * radians;\n    const np_lon = params.np_lon * radians;\n    const lon_shift = params.lon_shift * radians;\n\n    const sin_np_lat = Math.sin(np_lat);\n    const cos_np_lat = Math.cos(np_lat);\n\n    const compute_rotation = (lon: number, lat: number) : [number, number] => {\n        lon *= radians;\n        lat *= radians;\n\n        const sin_lat = Math.sin(lat);\n        const cos_lat = Math.cos(lat);\n        const sin_lon_diff = Math.sin(lon - lon_shift);\n        const cos_lon_diff = Math.cos(lon - lon_shift);\n\n        const lat_p = Math.asin(sin_np_lat * sin_lat - cos_np_lat * cos_lat * cos_lon_diff);\n        let lon_p = np_lon + Math.atan2((cos_lat * sin_lon_diff), (sin_np_lat * cos_lat * cos_lon_diff + cos_np_lat * sin_lat));\n\n        if (lon_p > Math.PI) lon_p -= 2 * Math.PI;\n\n        return [lon_p / radians, lat_p / radians];\n    }\n\n    const compute_rotation_inverse = (lon_p: number, lat_p: number) : [number, number] => {\n        lon_p *= radians;\n        lat_p *= radians;\n\n        const sin_lat_p = Math.sin(lat_p);\n        const cos_lat_p = Math.cos(lat_p);\n        const sin_lon_p_diff = Math.sin(lon_p - np_lon);\n        const cos_lon_p_diff = Math.cos(lon_p - np_lon);\n\n        const lat = Math.asin(sin_np_lat * sin_lat_p + cos_np_lat * cos_lat_p * cos_lon_p_diff);\n        let lon = lon_shift + Math.atan2((cos_lat_p * sin_lon_p_diff), (sin_np_lat * cos_lat_p * cos_lon_p_diff - cos_np_lat * sin_lat_p));\n\n        if (lon_p > Math.PI) lon_p -= 2 * Math.PI;\n\n        return [lon / radians, lat / radians];\n    }\n\n    return (a: number, b: number, opts?: {inverse: boolean}) => {\n        opts = opts === undefined ? {inverse: false} : opts;\n        return opts.inverse ? compute_rotation_inverse(a, b) : compute_rotation(a, b);\n    }\n}\n\nfunction mercatorXfromLng(lng: number) {\n    return (180 + lng) / 360;\n}\n\nfunction lngFromMercatorX(x: number) {\n    return 360 * x - 180;\n}\n\nfunction mercatorYfromLat(lat: number) {\n    const sin_lat = Math.sin(lat * Math.PI / 180);\n    const y = (180 - (90 / Math.PI * Math.log((1 + sin_lat) / (1 - sin_lat)))) / 360;\n    return Math.min(2, Math.max(-2, y));\n}\n\nfunction latFromMercatorY(y: number) {\n    return Math.atan(Math.sinh((180 - y * 360) * Math.PI / 180)) * 180 / Math.PI;\n}\n\n/**\n * A `LngLat` object represents a given longitude and latitude coordinate, measured in degrees.\n * These coordinates are based on the [WGS84 (EPSG:4326) standard](https://en.wikipedia.org/wiki/World_Geodetic_System#WGS84).\n *\n * MapLibre GL uses longitude, latitude coordinate order (as opposed to latitude, longitude) to match the\n * [GeoJSON specification](https://tools.ietf.org/html/rfc7946).\n *\n * @param {number} lng Longitude, measured in degrees.\n * @param {number} lat Latitude, measured in degrees.\n * @example\n * var ll = new LngLat(-123.9749, 40.7736);\n * ll.lng; // = -123.9749\n */\n class LngLat {\n    public lng: number;\n    public lat: number;\n\n    constructor(lng: number, lat: number) {\n        if (isNaN(lng) || isNaN(lat)) {\n            throw new Error(`Invalid LngLat object: (${lng}, ${lat})`);\n        }\n        this.lng = +lng;\n        this.lat = +lat;\n        if (this.lat > 90 || this.lat < -90) {\n            throw new Error('Invalid LngLat latitude value: must be between -90 and 90');\n        }\n    }\n\n    public toMercatorCoord() {\n        return {x: mercatorXfromLng(this.lng), y: mercatorYfromLat(this.lat)};\n    }\n\n    public static fromMercatorCoord(x: number, y: number) {\n        return new LngLat(lngFromMercatorX(x), latFromMercatorY(y));\n    }\n}\n\nexport {LngLat, lambertConformalConic, rotateSphere};\nexport type {MapLikeType};","export const THIS_IS_NOT_AN_OBJECT = \"This is not an object\";\nexport const THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT = \"This is not a Float16Array object\";\nexport const THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY =\n  \"This constructor is not a subclass of Float16Array\";\nexport const THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT =\n  \"The constructor property value is not an object\";\nexport const SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT =\n  \"Species constructor didn't return TypedArray object\";\nexport const DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH =\n  \"Derived constructor created TypedArray object which was too small length\";\nexport const ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER =\n  \"Attempting to access detached ArrayBuffer\";\nexport const CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT =\n  \"Cannot convert undefined or null to object\";\nexport const CANNOT_MIX_BIGINT_AND_OTHER_TYPES =\n  \"Cannot mix BigInt and other types, use explicit conversions\";\nexport const ITERATOR_PROPERTY_IS_NOT_CALLABLE = \"@@iterator property is not callable\";\nexport const REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE =\n  \"Reduce of empty array with no initial value\";\nexport const THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED =\n  \"The comparison function must be either a function or undefined\";\nexport const OFFSET_IS_OUT_OF_BOUNDS = \"Offset is out of bounds\";\n","/* eslint-disable no-restricted-globals, no-restricted-syntax */\n/* global SharedArrayBuffer */\n\nimport { CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT } from \"./messages.mjs\";\n\n/** @type {<T extends (...args: any) => any>(target: T) => (thisArg: ThisType<T>, ...args: any[]) => any} */\nfunction uncurryThis(target) {\n  return (thisArg, ...args) => {\n    return ReflectApply(target, thisArg, args);\n  };\n}\n\n/** @type {(target: any, key: string | symbol) => (thisArg: any, ...args: any[]) => any} */\nfunction uncurryThisGetter(target, key) {\n  return uncurryThis(\n    ReflectGetOwnPropertyDescriptor(\n      target,\n      key\n    ).get\n  );\n}\n\n// Reflect\nexport const {\n  apply: ReflectApply,\n  construct: ReflectConstruct,\n  defineProperty: ReflectDefineProperty,\n  get: ReflectGet,\n  getOwnPropertyDescriptor: ReflectGetOwnPropertyDescriptor,\n  getPrototypeOf: ReflectGetPrototypeOf,\n  has: ReflectHas,\n  ownKeys: ReflectOwnKeys,\n  set: ReflectSet,\n  setPrototypeOf: ReflectSetPrototypeOf,\n} = Reflect;\n\n// Proxy\nexport const NativeProxy = Proxy;\n\n// Number\nexport const {\n  EPSILON,\n  MAX_SAFE_INTEGER,\n  isFinite: NumberIsFinite,\n  isNaN: NumberIsNaN,\n} = Number;\n\n// Symbol\nexport const {\n  iterator: SymbolIterator,\n  species: SymbolSpecies,\n  toStringTag: SymbolToStringTag,\n  for: SymbolFor,\n} = Symbol;\n\n// Object\nexport const NativeObject = Object;\nexport const {\n  create: ObjectCreate,\n  defineProperty: ObjectDefineProperty,\n  freeze: ObjectFreeze,\n  is: ObjectIs,\n} = NativeObject;\nconst ObjectPrototype = NativeObject.prototype;\n/** @type {(object: object, key: PropertyKey) => Function | undefined} */\nexport const ObjectPrototype__lookupGetter__ = /** @type {any} */ (ObjectPrototype).__lookupGetter__\n  ? uncurryThis(/** @type {any} */ (ObjectPrototype).__lookupGetter__)\n  : (object, key) => {\n    if (object == null) {\n      throw NativeTypeError(\n        CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n      );\n    }\n\n    let target = NativeObject(object);\n    do {\n      const descriptor = ReflectGetOwnPropertyDescriptor(target, key);\n      if (descriptor !== undefined) {\n        if (ObjectHasOwn(descriptor, \"get\")) {\n          return descriptor.get;\n        }\n\n        return;\n      }\n    } while ((target = ReflectGetPrototypeOf(target)) !== null);\n  };\n/** @type {(object: object, key: PropertyKey) => boolean} */\nexport const ObjectHasOwn = /** @type {any} */ (NativeObject).hasOwn ||\n  uncurryThis(ObjectPrototype.hasOwnProperty);\n\n// Array\nconst NativeArray = Array;\nexport const ArrayIsArray = NativeArray.isArray;\nconst ArrayPrototype = NativeArray.prototype;\n/** @type {(array: ArrayLike<unknown>, separator?: string) => string} */\nexport const ArrayPrototypeJoin = uncurryThis(ArrayPrototype.join);\n/** @type {<T>(array: T[], ...items: T[]) => number} */\nexport const ArrayPrototypePush = uncurryThis(ArrayPrototype.push);\n/** @type {(array: ArrayLike<unknown>, ...opts: any[]) => string} */\nexport const ArrayPrototypeToLocaleString = uncurryThis(\n  ArrayPrototype.toLocaleString\n);\nexport const NativeArrayPrototypeSymbolIterator = ArrayPrototype[SymbolIterator];\n/** @type {<T>(array: T[]) => IterableIterator<T>} */\nexport const ArrayPrototypeSymbolIterator = uncurryThis(NativeArrayPrototypeSymbolIterator);\n\n// Math\nexport const {\n  abs: MathAbs,\n  trunc: MathTrunc,\n} = Math;\n\n// ArrayBuffer\nexport const NativeArrayBuffer = ArrayBuffer;\nexport const ArrayBufferIsView = NativeArrayBuffer.isView;\nconst ArrayBufferPrototype = NativeArrayBuffer.prototype;\n/** @type {(buffer: ArrayBuffer, begin?: number, end?: number) => number} */\nexport const ArrayBufferPrototypeSlice = uncurryThis(ArrayBufferPrototype.slice);\n/** @type {(buffer: ArrayBuffer) => ArrayBuffer} */\nexport const ArrayBufferPrototypeGetByteLength = uncurryThisGetter(ArrayBufferPrototype, \"byteLength\");\n\n// SharedArrayBuffer\nexport const NativeSharedArrayBuffer = typeof SharedArrayBuffer !== \"undefined\" ? SharedArrayBuffer : null;\n/** @type {(buffer: SharedArrayBuffer) => SharedArrayBuffer} */\nexport const SharedArrayBufferPrototypeGetByteLength = NativeSharedArrayBuffer\n  && uncurryThisGetter(NativeSharedArrayBuffer.prototype, \"byteLength\");\n\n// TypedArray\n/** @typedef {Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float32Array|Float64Array|BigUint64Array|BigInt64Array} TypedArray */\n/** @type {any} */\nexport const TypedArray = ReflectGetPrototypeOf(Uint8Array);\nconst TypedArrayFrom = TypedArray.from;\nexport const TypedArrayPrototype = TypedArray.prototype;\nexport const NativeTypedArrayPrototypeSymbolIterator = TypedArrayPrototype[SymbolIterator];\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\nexport const TypedArrayPrototypeKeys = uncurryThis(TypedArrayPrototype.keys);\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\nexport const TypedArrayPrototypeValues = uncurryThis(\n  TypedArrayPrototype.values\n);\n/** @type {(typedArray: TypedArray) => IterableIterator<[number, number]>} */\nexport const TypedArrayPrototypeEntries = uncurryThis(\n  TypedArrayPrototype.entries\n);\n/** @type {(typedArray: TypedArray, array: ArrayLike<number>, offset?: number) => void} */\nexport const TypedArrayPrototypeSet = uncurryThis(TypedArrayPrototype.set);\n/** @type {<T extends TypedArray>(typedArray: T) => T} */\nexport const TypedArrayPrototypeReverse = uncurryThis(\n  TypedArrayPrototype.reverse\n);\n/** @type {<T extends TypedArray>(typedArray: T, value: number, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeFill = uncurryThis(TypedArrayPrototype.fill);\n/** @type {<T extends TypedArray>(typedArray: T, target: number, start: number, end?: number) => T} */\nexport const TypedArrayPrototypeCopyWithin = uncurryThis(\n  TypedArrayPrototype.copyWithin\n);\n/** @type {<T extends TypedArray>(typedArray: T, compareFn?: (a: number, b: number) => number) => T} */\nexport const TypedArrayPrototypeSort = uncurryThis(TypedArrayPrototype.sort);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeSlice = uncurryThis(TypedArrayPrototype.slice);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeSubarray = uncurryThis(\n  TypedArrayPrototype.subarray\n);\n/** @type {((typedArray: TypedArray) => ArrayBuffer)} */\nexport const TypedArrayPrototypeGetBuffer = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"buffer\"\n);\n/** @type {((typedArray: TypedArray) => number)} */\nexport const TypedArrayPrototypeGetByteOffset = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"byteOffset\"\n);\n/** @type {((typedArray: TypedArray) => number)} */\nexport const TypedArrayPrototypeGetLength = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"length\"\n);\n/** @type {(target: unknown) => string} */\nexport const TypedArrayPrototypeGetSymbolToStringTag = uncurryThisGetter(\n  TypedArrayPrototype,\n  SymbolToStringTag\n);\n\n// Uint8Array\nexport const NativeUint8Array = Uint8Array;\n\n// Uint16Array\nexport const NativeUint16Array = Uint16Array;\n/** @type {Uint16ArrayConstructor[\"from\"]} */\nexport const Uint16ArrayFrom = (...args) => {\n  return ReflectApply(TypedArrayFrom, NativeUint16Array, args);\n};\n\n// Uint32Array\nexport const NativeUint32Array = Uint32Array;\n\n// Float32Array\nexport const NativeFloat32Array = Float32Array;\n\n// ArrayIterator\n/** @type {any} */\nexport const ArrayIteratorPrototype = ReflectGetPrototypeOf([][SymbolIterator]());\n/** @type {<T>(arrayIterator: IterableIterator<T>) => IteratorResult<T>} */\nexport const ArrayIteratorPrototypeNext = uncurryThis(ArrayIteratorPrototype.next);\n\n// Generator\n/** @type {<T = unknown, TReturn = any, TNext = unknown>(generator: Generator<T, TReturn, TNext>, value?: TNext) => T} */\nexport const GeneratorPrototypeNext = uncurryThis((function* () {})().next);\n\n// Iterator\nexport const IteratorPrototype = ReflectGetPrototypeOf(ArrayIteratorPrototype);\n\n// DataView\nconst DataViewPrototype = DataView.prototype;\n/** @type {(dataView: DataView, byteOffset: number, littleEndian?: boolean) => number} */\nexport const DataViewPrototypeGetUint16 = uncurryThis(\n  DataViewPrototype.getUint16\n);\n/** @type {(dataView: DataView, byteOffset: number, value: number, littleEndian?: boolean) => void} */\nexport const DataViewPrototypeSetUint16 = uncurryThis(\n  DataViewPrototype.setUint16\n);\n\n// Error\nexport const NativeTypeError = TypeError;\nexport const NativeRangeError = RangeError;\n\n// WeakSet\n/**\n * Do not construct with arguments to avoid calling the \"add\" method\n * @type {{new <T extends {}>(): WeakSet<T>}}\n */\nexport const NativeWeakSet = WeakSet;\nconst WeakSetPrototype = NativeWeakSet.prototype;\n/** @type {<T extends {}>(set: WeakSet<T>, value: T) => Set<T>} */\nexport const WeakSetPrototypeAdd = uncurryThis(WeakSetPrototype.add);\n/** @type {<T extends {}>(set: WeakSet<T>, value: T) => boolean} */\nexport const WeakSetPrototypeHas = uncurryThis(WeakSetPrototype.has);\n\n// WeakMap\n/**\n * Do not construct with arguments to avoid calling the \"set\" method\n * @type {{new <K extends {}, V>(): WeakMap<K, V>}}\n */\nexport const NativeWeakMap = WeakMap;\nconst WeakMapPrototype = NativeWeakMap.prototype;\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => V} */\nexport const WeakMapPrototypeGet = uncurryThis(WeakMapPrototype.get);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => boolean} */\nexport const WeakMapPrototypeHas = uncurryThis(WeakMapPrototype.has);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K, value: V) => WeakMap} */\nexport const WeakMapPrototypeSet = uncurryThis(WeakMapPrototype.set);\n","import {\n  ArrayIteratorPrototype,\n  ArrayIteratorPrototypeNext,\n  ArrayPrototypeSymbolIterator,\n  GeneratorPrototypeNext,\n  IteratorPrototype,\n  NativeArrayPrototypeSymbolIterator,\n  NativeWeakMap,\n  ObjectCreate,\n  ObjectDefineProperty,\n  ReflectGetOwnPropertyDescriptor,\n  ReflectOwnKeys,\n  SymbolIterator,\n  WeakMapPrototypeGet,\n  WeakMapPrototypeSet,\n} from \"./primordials.mjs\";\n\n/** @type {WeakMap<{}, IterableIterator<any>>} */\nconst arrayIterators = new NativeWeakMap();\n\nconst SafeIteratorPrototype = ObjectCreate(null, {\n  next: {\n    value: function next() {\n      const arrayIterator = WeakMapPrototypeGet(arrayIterators, this);\n      return ArrayIteratorPrototypeNext(arrayIterator);\n    },\n  },\n\n  [SymbolIterator]: {\n    value: function values() {\n      return this;\n    },\n  },\n});\n\n/**\n * Wrap the Array around the SafeIterator If Array.prototype [@@iterator] has been modified\n * @type {<T>(array: T[]) => Iterable<T>}\n */\nexport function safeIfNeeded(array) {\n  if (\n    array[SymbolIterator] === NativeArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  ) {\n    return array;\n  }\n\n  const safe = ObjectCreate(SafeIteratorPrototype);\n  WeakMapPrototypeSet(arrayIterators, safe, ArrayPrototypeSymbolIterator(array));\n  return safe;\n}\n\n/** @type {WeakMap<{}, Generator<any>>} */\nconst generators = new NativeWeakMap();\n\n/** @see https://tc39.es/ecma262/#sec-%arrayiteratorprototype%-object */\nconst DummyArrayIteratorPrototype = ObjectCreate(IteratorPrototype, {\n  next: {\n    value: function next() {\n      const generator = WeakMapPrototypeGet(generators, this);\n      return GeneratorPrototypeNext(generator);\n    },\n    writable: true,\n    configurable: true,\n  },\n});\n\nfor (const key of ReflectOwnKeys(ArrayIteratorPrototype)) {\n  // next method has already defined\n  if (key === \"next\") {\n    continue;\n  }\n\n  // Copy ArrayIteratorPrototype descriptors to DummyArrayIteratorPrototype\n  ObjectDefineProperty(DummyArrayIteratorPrototype, key, ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype, key));\n}\n\n/**\n * Wrap the Generator around the dummy ArrayIterator\n * @type {<T>(generator: Generator<T>) => IterableIterator<T>}\n */\nexport function wrap(generator) {\n  const dummy = ObjectCreate(DummyArrayIteratorPrototype);\n  WeakMapPrototypeSet(generators, dummy, generator);\n  return dummy;\n}\n","import {\n  ArrayBufferPrototypeGetByteLength,\n  ArrayIsArray,\n  ArrayIteratorPrototype,\n  ArrayIteratorPrototypeNext,\n  MathTrunc,\n  NativeArrayPrototypeSymbolIterator,\n  NativeSharedArrayBuffer,\n  NativeTypedArrayPrototypeSymbolIterator,\n  NumberIsFinite,\n  SharedArrayBufferPrototypeGetByteLength,\n  SymbolIterator,\n  TypedArrayPrototypeGetSymbolToStringTag,\n} from \"./primordials.mjs\";\n\n/**\n * @param {unknown} value\n * @returns {value is {}}\n */\nexport function isObject(value) {\n  return (\n    (value !== null && typeof value === \"object\") ||\n    typeof value === \"function\"\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is {}}\n */\nexport function isObjectLike(value) {\n  return value !== null && typeof value === \"object\";\n}\n\n// Inspired by util.types implementation of Node.js\n/** @typedef {Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float32Array|Float64Array|BigUint64Array|BigInt64Array} TypedArray */\n\n/**\n * @param {unknown} value\n * @returns {value is TypedArray}\n */\nexport function isNativeTypedArray(value) {\n  return TypedArrayPrototypeGetSymbolToStringTag(value) !== undefined;\n}\n\n/**\n * @param {unknown} value\n * @returns {value is BigInt64Array|BigUint64Array}\n */\nexport function isNativeBigIntTypedArray(value) {\n  const typedArrayName = TypedArrayPrototypeGetSymbolToStringTag(value);\n  return (\n    typedArrayName === \"BigInt64Array\" ||\n    typedArrayName === \"BigUint64Array\"\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is ArrayBuffer}\n */\nfunction isArrayBuffer(value) {\n  try {\n    ArrayBufferPrototypeGetByteLength(/** @type {any} */ (value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @param {unknown} value\n * @returns {value is SharedArrayBuffer}\n */\nexport function isSharedArrayBuffer(value) {\n  if (NativeSharedArrayBuffer === null) {\n    return false;\n  }\n\n  try {\n    SharedArrayBufferPrototypeGetByteLength(/** @type {any} */ (value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @param {unknown} value\n * @returns {value is ArrayBuffer|SharedArrayBuffer}\n */\nexport function isAnyArrayBuffer(value) {\n  return isArrayBuffer(value) || isSharedArrayBuffer(value);\n}\n\n/**\n * @param {unknown} value\n * @returns {value is unknown[]}\n */\nexport function isOrdinaryArray(value) {\n  if (!ArrayIsArray(value)) {\n    return false;\n  }\n\n  // Verify that there are no changes in ArrayIterator\n  return (\n    value[SymbolIterator] === NativeArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is TypedArray}\n */\nexport function isOrdinaryNativeTypedArray(value) {\n  if (!isNativeTypedArray(value)) {\n    return false;\n  }\n\n  // Verify that there are no changes in ArrayIterator\n  return (\n    value[SymbolIterator] === NativeTypedArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is string}\n */\nexport function isCanonicalIntegerIndexString(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  const number = +value;\n  if (value !== number + \"\") {\n    return false;\n  }\n\n  if (!NumberIsFinite(number)) {\n    return false;\n  }\n\n  return number === MathTrunc(number);\n}\n","import { isObject, isObjectLike } from \"./is.mjs\";\nimport { THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT } from \"./messages.mjs\";\nimport { NativeTypeError, ReflectGetPrototypeOf, ReflectHas, SymbolFor } from \"./primordials.mjs\";\n\nexport const brand = SymbolFor(\"__Float16Array__\");\n\n/**\n * @param {unknown} target\n * @throws {TypeError}\n * @returns {boolean}\n */\nexport function hasFloat16ArrayBrand(target) {\n  if (!isObjectLike(target)) {\n    return false;\n  }\n\n  const prototype = ReflectGetPrototypeOf(target);\n  if (!isObjectLike(prototype)) {\n    return false;\n  }\n\n  const constructor = prototype.constructor;\n  if (constructor === undefined) {\n    return false;\n  }\n  if (!isObject(constructor)) {\n    throw NativeTypeError(THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT);\n  }\n\n  return ReflectHas(constructor, brand);\n}\n","import {\n  EPSILON,\n  MathAbs,\n  NativeArrayBuffer,\n  NativeFloat32Array,\n  NativeUint16Array,\n  NativeUint32Array,\n  NativeUint8Array,\n  NumberIsFinite,\n  NumberIsNaN,\n} from \"./primordials.mjs\";\n\nconst INVERSE_OF_EPSILON = 1 / EPSILON;\n\n/**\n * rounds to the nearest value;\n * if the number falls midway, it is rounded to the nearest value with an even least significant digit\n * @param {number} num\n * @returns {number}\n */\nfunction roundTiesToEven(num) {\n  return (num + INVERSE_OF_EPSILON) - INVERSE_OF_EPSILON;\n}\n\nconst FLOAT16_MIN_VALUE = 6.103515625e-05;\nconst FLOAT16_MAX_VALUE = 65504;\nconst FLOAT16_EPSILON = 0.0009765625;\n\nconst FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE = FLOAT16_EPSILON * FLOAT16_MIN_VALUE;\nconst FLOAT16_EPSILON_DEVIDED_BY_EPSILON = FLOAT16_EPSILON * INVERSE_OF_EPSILON;\n\n/**\n * round a number to a half float number\n * @param {unknown} num - double float\n * @returns {number} half float number bits\n */\nexport function roundToFloat16(num) {\n  const number = +num;\n\n  // NaN, Infinity, -Infinity, 0, -0\n  if (!NumberIsFinite(number) || number === 0) {\n    return number;\n  }\n\n  // finite except 0, -0\n  const sign = number > 0 ? 1 : -1;\n  const absolute = MathAbs(number);\n\n  // small number\n  if (absolute < FLOAT16_MIN_VALUE) {\n    return sign * roundTiesToEven(absolute / FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE) * FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE;\n  }\n\n  const temp = (1 + FLOAT16_EPSILON_DEVIDED_BY_EPSILON) * absolute;\n  const result = temp - (temp - absolute);\n\n  // large number\n  if (result > FLOAT16_MAX_VALUE || NumberIsNaN(result)) {\n    return sign * Infinity;\n  }\n\n  return sign * result;\n}\n\n// base algorithm: http://fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst buffer = new NativeArrayBuffer(4);\nconst floatView = new NativeFloat32Array(buffer);\nconst uint32View = new NativeUint32Array(buffer);\n\nconst baseTable = new NativeUint16Array(512);\nconst shiftTable = new NativeUint8Array(512);\n\nfor (let i = 0; i < 256; ++i) {\n  const e = i - 127;\n\n  // very small number (0, -0)\n  if (e < -27) {\n    baseTable[i]         = 0x0000;\n    baseTable[i | 0x100] = 0x8000;\n    shiftTable[i]         = 24;\n    shiftTable[i | 0x100] = 24;\n\n  // small number (denorm)\n  } else if (e < -14) {\n    baseTable[i]         =  0x0400 >> (-e - 14);\n    baseTable[i | 0x100] = (0x0400 >> (-e - 14)) | 0x8000;\n    shiftTable[i]         = -e - 1;\n    shiftTable[i | 0x100] = -e - 1;\n\n  // normal number\n  } else if (e <= 15) {\n    baseTable[i]         =  (e + 15) << 10;\n    baseTable[i | 0x100] = ((e + 15) << 10) | 0x8000;\n    shiftTable[i]         = 13;\n    shiftTable[i | 0x100] = 13;\n\n  // large number (Infinity, -Infinity)\n  } else if (e < 128) {\n    baseTable[i]         = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i]         = 24;\n    shiftTable[i | 0x100] = 24;\n\n  // stay (NaN, Infinity, -Infinity)\n  } else {\n    baseTable[i]         = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i]         = 13;\n    shiftTable[i | 0x100] = 13;\n  }\n}\n\n/**\n * round a number to a half float number bits\n * @param {unknown} num - double float\n * @returns {number} half float number bits\n */\nexport function roundToFloat16Bits(num) {\n  floatView[0] = roundToFloat16(num);\n  const f = uint32View[0];\n  const e = (f >> 23) & 0x1ff;\n  return baseTable[e] + ((f & 0x007fffff) >> shiftTable[e]);\n}\n\nconst mantissaTable = new NativeUint32Array(2048);\nfor (let i = 1; i < 1024; ++i) {\n  let m = i << 13; // zero pad mantissa bits\n  let e = 0; // zero exponent\n\n  // normalized\n  while ((m & 0x00800000) === 0) {\n    m <<= 1;\n    e -= 0x00800000; // decrement exponent\n  }\n\n  m &= ~0x00800000; // clear leading 1 bit\n  e += 0x38800000; // adjust bias\n\n  mantissaTable[i] = m | e;\n}\nfor (let i = 1024; i < 2048; ++i) {\n  mantissaTable[i] = 0x38000000 + ((i - 1024) << 13);\n}\n\nconst exponentTable = new NativeUint32Array(64);\nfor (let i = 1; i < 31; ++i) {\n  exponentTable[i] = i << 23;\n}\nexponentTable[31] = 0x47800000;\nexponentTable[32] = 0x80000000;\nfor (let i = 33; i < 63; ++i) {\n  exponentTable[i] = 0x80000000 + ((i - 32) << 23);\n}\nexponentTable[63] = 0xc7800000;\n\nconst offsetTable = new NativeUint16Array(64);\nfor (let i = 1; i < 64; ++i) {\n  if (i !== 32) {\n    offsetTable[i] = 1024;\n  }\n}\n\n/**\n * convert a half float number bits to a number\n * @param {number} float16bits - half float number bits\n * @returns {number} double float\n */\nexport function convertToNumber(float16bits) {\n  const i = float16bits >> 10;\n  uint32View[0] = mantissaTable[offsetTable[i] + (float16bits & 0x3ff)] + exponentTable[i];\n  return floatView[0];\n}\n","import { isObject, isSharedArrayBuffer } from \"./is.mjs\";\nimport {\n  THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT,\n  THIS_IS_NOT_AN_OBJECT,\n} from \"./messages.mjs\";\nimport {\n  ArrayBufferPrototypeSlice,\n  MAX_SAFE_INTEGER,\n  MathTrunc,\n  NativeTypeError,\n  NumberIsNaN,\n  ObjectIs,\n  SymbolSpecies,\n} from \"./primordials.mjs\";\n\n/**\n * @see https://tc39.es/ecma262/#sec-tointegerorinfinity\n * @param {unknown} target\n * @returns {number}\n */\nexport function ToIntegerOrInfinity(target) {\n  const number = +target;\n\n  if (NumberIsNaN(number) || number === 0) {\n    return 0;\n  }\n\n  return MathTrunc(number);\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-tolength\n * @param {unknown} target\n * @returns {number}\n */\nexport function ToLength(target) {\n  const length = ToIntegerOrInfinity(target);\n  if (length < 0) {\n    return 0;\n  }\n\n  return length < MAX_SAFE_INTEGER\n    ? length\n    : MAX_SAFE_INTEGER;\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-speciesconstructor\n * @param {object} target\n * @param {{ new(...args: any[]): any; }} defaultConstructor\n * @returns {{ new(...args: any[]): any; }}\n */\nexport function SpeciesConstructor(target, defaultConstructor) {\n  if (!isObject(target)) {\n    throw NativeTypeError(THIS_IS_NOT_AN_OBJECT);\n  }\n\n  const constructor = target.constructor;\n  if (constructor === undefined) {\n    return defaultConstructor;\n  }\n  if (!isObject(constructor)) {\n    throw NativeTypeError(THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT);\n  }\n\n  const species = constructor[SymbolSpecies];\n  if (species == null) {\n    return defaultConstructor;\n  }\n\n  return species;\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-isdetachedbuffer\n * @param {ArrayBufferLike} buffer\n * @returns {boolean}\n */\nexport function IsDetachedBuffer(buffer) {\n  if (isSharedArrayBuffer(buffer)) {\n    return false;\n  }\n\n  try {\n    ArrayBufferPrototypeSlice(buffer, 0, 0);\n    return false;\n  } catch (e) {/* empty */}\n\n  return true;\n}\n\n/**\n * bigint comparisons are not supported\n * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\n * @param {number} x\n * @param {number} y\n * @returns {-1 | 0 | 1}\n */\nexport function defaultCompare(x, y) {\n  const isXNaN = NumberIsNaN(x);\n  const isYNaN = NumberIsNaN(y);\n\n  if (isXNaN && isYNaN) {\n    return 0;\n  }\n\n  if (isXNaN) {\n    return 1;\n  }\n\n  if (isYNaN) {\n    return -1;\n  }\n\n  if (x < y) {\n    return -1;\n  }\n\n  if (x > y) {\n    return 1;\n  }\n\n  if (x === 0 && y === 0) {\n    const isXPlusZero = ObjectIs(x, 0);\n    const isYPlusZero = ObjectIs(y, 0);\n\n    if (!isXPlusZero && isYPlusZero) {\n      return -1;\n    }\n\n    if (isXPlusZero && !isYPlusZero) {\n      return 1;\n    }\n  }\n\n  return 0;\n}\n","import { safeIfNeeded, wrap } from \"./_util/arrayIterator.mjs\";\nimport { brand, hasFloat16ArrayBrand } from \"./_util/brand.mjs\";\nimport { convertToNumber, roundToFloat16Bits } from \"./_util/converter.mjs\";\nimport {\n  isAnyArrayBuffer,\n  isCanonicalIntegerIndexString,\n  isNativeBigIntTypedArray,\n  isNativeTypedArray,\n  isObject,\n  isOrdinaryArray,\n  isOrdinaryNativeTypedArray,\n} from \"./_util/is.mjs\";\nimport {\n  ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER,\n  CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT,\n  CANNOT_MIX_BIGINT_AND_OTHER_TYPES,\n  DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH,\n  ITERATOR_PROPERTY_IS_NOT_CALLABLE,\n  OFFSET_IS_OUT_OF_BOUNDS,\n  REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE,\n  SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT,\n  THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED,\n  THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY,\n  THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT,\n} from \"./_util/messages.mjs\";\nimport {\n  ArrayBufferIsView,\n  ArrayPrototypeJoin,\n  ArrayPrototypePush,\n  ArrayPrototypeToLocaleString,\n  NativeArrayBuffer,\n  NativeObject,\n  NativeProxy,\n  NativeRangeError,\n  NativeTypeError,\n  NativeUint16Array,\n  NativeWeakMap,\n  NativeWeakSet,\n  NumberIsNaN,\n  ObjectDefineProperty,\n  ObjectFreeze,\n  ObjectHasOwn,\n  ObjectPrototype__lookupGetter__,\n  ReflectApply,\n  ReflectConstruct,\n  ReflectDefineProperty,\n  ReflectGet,\n  ReflectGetOwnPropertyDescriptor,\n  ReflectHas,\n  ReflectOwnKeys,\n  ReflectSet,\n  ReflectSetPrototypeOf,\n  SymbolIterator,\n  SymbolToStringTag,\n  TypedArray,\n  TypedArrayPrototype,\n  TypedArrayPrototypeCopyWithin,\n  TypedArrayPrototypeEntries,\n  TypedArrayPrototypeFill,\n  TypedArrayPrototypeGetBuffer,\n  TypedArrayPrototypeGetByteOffset,\n  TypedArrayPrototypeGetLength,\n  TypedArrayPrototypeKeys,\n  TypedArrayPrototypeReverse,\n  TypedArrayPrototypeSet,\n  TypedArrayPrototypeSlice,\n  TypedArrayPrototypeSort,\n  TypedArrayPrototypeSubarray,\n  TypedArrayPrototypeValues,\n  Uint16ArrayFrom,\n  WeakMapPrototypeGet,\n  WeakMapPrototypeHas,\n  WeakMapPrototypeSet,\n  WeakSetPrototypeAdd,\n  WeakSetPrototypeHas,\n} from \"./_util/primordials.mjs\";\nimport {\n  IsDetachedBuffer,\n  SpeciesConstructor,\n  ToIntegerOrInfinity,\n  ToLength,\n  defaultCompare,\n} from \"./_util/spec.mjs\";\n\nconst BYTES_PER_ELEMENT = 2;\n\n/** @typedef {Uint16Array & { __float16bits: never }} Float16BitsArray */\n\n/** @type {WeakMap<Float16Array, Float16BitsArray>} */\nconst float16bitsArrays = new NativeWeakMap();\n\n/**\n * @param {unknown} target\n * @returns {target is Float16Array}\n */\nexport function isFloat16Array(target) {\n  return WeakMapPrototypeHas(float16bitsArrays, target) ||\n    (!ArrayBufferIsView(target) && hasFloat16ArrayBrand(target));\n}\n\n/**\n * @param {unknown} target\n * @throws {TypeError}\n * @returns {asserts target is Float16Array}\n */\nfunction assertFloat16Array(target) {\n  if (!isFloat16Array(target)) {\n    throw NativeTypeError(THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT);\n  }\n}\n\n/**\n * @param {unknown} target\n * @param {number=} count\n * @throws {TypeError}\n * @returns {asserts target is Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float16Array|Float32Array|Float64Array}\n */\nfunction assertSpeciesTypedArray(target, count) {\n  const isTargetFloat16Array = isFloat16Array(target);\n  const isTargetTypedArray = isNativeTypedArray(target);\n\n  if (!isTargetFloat16Array && !isTargetTypedArray) {\n    throw NativeTypeError(SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT);\n  }\n\n  if (typeof count === \"number\") {\n    let length;\n    if (isTargetFloat16Array) {\n      const float16bitsArray = getFloat16BitsArray(target);\n      length = TypedArrayPrototypeGetLength(float16bitsArray);\n    } else {\n      length = TypedArrayPrototypeGetLength(target);\n    }\n\n    if (length < count) {\n      throw NativeTypeError(\n        DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH\n      );\n    }\n  }\n\n  if (isNativeBigIntTypedArray(target)) {\n    throw NativeTypeError(CANNOT_MIX_BIGINT_AND_OTHER_TYPES);\n  }\n}\n\n/**\n * @param {Float16Array} float16\n * @throws {TypeError}\n * @returns {Float16BitsArray}\n */\nfunction getFloat16BitsArray(float16) {\n  const float16bitsArray = WeakMapPrototypeGet(float16bitsArrays, float16);\n  if (float16bitsArray !== undefined) {\n    const buffer = TypedArrayPrototypeGetBuffer(float16bitsArray);\n\n    if (IsDetachedBuffer(buffer)) {\n      throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n    }\n\n    return float16bitsArray;\n  }\n\n  // from another Float16Array instance (a different version?)\n  const buffer = /** @type {any} */ (float16).buffer;\n\n  if (IsDetachedBuffer(buffer)) {\n    throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n  }\n\n  const cloned = ReflectConstruct(Float16Array, [\n    buffer,\n    /** @type {any} */ (float16).byteOffset,\n    /** @type {any} */ (float16).length,\n  ], float16.constructor);\n  return WeakMapPrototypeGet(float16bitsArrays, cloned);\n}\n\n/**\n * @param {Float16BitsArray} float16bitsArray\n * @returns {number[]}\n */\nfunction copyToArray(float16bitsArray) {\n  const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n  const array = [];\n  for (let i = 0; i < length; ++i) {\n    array[i] = convertToNumber(float16bitsArray[i]);\n  }\n\n  return array;\n}\n\n/** @type {WeakSet<Function>} */\nconst TypedArrayPrototypeGetters = new NativeWeakSet();\nfor (const key of ReflectOwnKeys(TypedArrayPrototype)) {\n  // @@toStringTag getter property is defined in Float16Array.prototype\n  if (key === SymbolToStringTag) {\n    continue;\n  }\n\n  const descriptor = ReflectGetOwnPropertyDescriptor(TypedArrayPrototype, key);\n  if (ObjectHasOwn(descriptor, \"get\") && typeof descriptor.get === \"function\") {\n    WeakSetPrototypeAdd(TypedArrayPrototypeGetters, descriptor.get);\n  }\n}\n\nconst handler = ObjectFreeze(/** @type {ProxyHandler<Float16BitsArray>} */ ({\n  get(target, key, receiver) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      return convertToNumber(ReflectGet(target, key));\n    }\n\n    // %TypedArray%.prototype getter properties cannot called by Proxy receiver\n    if (WeakSetPrototypeHas(TypedArrayPrototypeGetters, ObjectPrototype__lookupGetter__(target, key))) {\n      return ReflectGet(target, key);\n    }\n\n    return ReflectGet(target, key, receiver);\n  },\n\n  set(target, key, value, receiver) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      return ReflectSet(target, key, roundToFloat16Bits(value));\n    }\n\n    return ReflectSet(target, key, value, receiver);\n  },\n\n  getOwnPropertyDescriptor(target, key) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      const descriptor = ReflectGetOwnPropertyDescriptor(target, key);\n      descriptor.value = convertToNumber(descriptor.value);\n      return descriptor;\n    }\n\n    return ReflectGetOwnPropertyDescriptor(target, key);\n  },\n\n  defineProperty(target, key, descriptor) {\n    if (\n      isCanonicalIntegerIndexString(key) &&\n      ObjectHasOwn(target, key) &&\n      ObjectHasOwn(descriptor, \"value\")\n    ) {\n      descriptor.value = roundToFloat16Bits(descriptor.value);\n      return ReflectDefineProperty(target, key, descriptor);\n    }\n\n    return ReflectDefineProperty(target, key, descriptor);\n  },\n}));\n\nexport class Float16Array {\n  /** @see https://tc39.es/ecma262/#sec-typedarray */\n  constructor(input, _byteOffset, _length) {\n    /** @type {Float16BitsArray} */\n    let float16bitsArray;\n\n    if (isFloat16Array(input)) {\n      float16bitsArray = ReflectConstruct(NativeUint16Array, [getFloat16BitsArray(input)], new.target);\n    } else if (isObject(input) && !isAnyArrayBuffer(input)) { // object without ArrayBuffer, SharedArrayBuffer\n      /** @type {ArrayLike<unknown>} */\n      let list;\n      /** @type {number} */\n      let length;\n\n      if (isNativeTypedArray(input)) { // TypedArray\n        list = input;\n        length = TypedArrayPrototypeGetLength(input);\n\n        const buffer = TypedArrayPrototypeGetBuffer(input);\n\n        if (IsDetachedBuffer(buffer)) {\n          throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n        }\n\n        if (isNativeBigIntTypedArray(input)) {\n          throw NativeTypeError(CANNOT_MIX_BIGINT_AND_OTHER_TYPES);\n        }\n\n        const data = new NativeArrayBuffer(\n          length * BYTES_PER_ELEMENT\n        );\n        float16bitsArray = ReflectConstruct(NativeUint16Array, [data], new.target);\n      } else {\n        const iterator = input[SymbolIterator];\n        if (iterator != null && typeof iterator !== \"function\") {\n          throw NativeTypeError(ITERATOR_PROPERTY_IS_NOT_CALLABLE);\n        }\n\n        if (iterator != null) { // Iterable (Array)\n          // for optimization\n          if (isOrdinaryArray(input)) {\n            list = input;\n            length = input.length;\n          } else {\n            // eslint-disable-next-line no-restricted-syntax\n            list = [... /** @type {Iterable<unknown>} */ (input)];\n            length = list.length;\n          }\n        } else { // ArrayLike\n          list = /** @type {ArrayLike<unknown>} */ (input);\n          length = ToLength(list.length);\n        }\n        float16bitsArray = ReflectConstruct(NativeUint16Array, [length], new.target);\n      }\n\n      // set values\n      for (let i = 0; i < length; ++i) {\n        float16bitsArray[i] = roundToFloat16Bits(list[i]);\n      }\n    } else { // primitive, ArrayBuffer, SharedArrayBuffer\n      float16bitsArray = ReflectConstruct(NativeUint16Array, arguments, new.target);\n    }\n\n    /** @type {Float16Array} */\n    const proxy = /** @type {any} */ (new NativeProxy(float16bitsArray, handler));\n\n    // proxy private storage\n    WeakMapPrototypeSet(float16bitsArrays, proxy, float16bitsArray);\n\n    return proxy;\n  }\n\n  /**\n   * limitation: `Object.getOwnPropertyNames(Float16Array)` or `Reflect.ownKeys(Float16Array)` include this key\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.from\n   */\n  static from(src, ...opts) {\n    const Constructor = this;\n\n    if (!ReflectHas(Constructor, brand)) {\n      throw NativeTypeError(\n        THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY\n      );\n    }\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      if (isFloat16Array(src) && opts.length === 0) {\n        const float16bitsArray = getFloat16BitsArray(src);\n        const uint16 = new NativeUint16Array(\n          TypedArrayPrototypeGetBuffer(float16bitsArray),\n          TypedArrayPrototypeGetByteOffset(float16bitsArray),\n          TypedArrayPrototypeGetLength(float16bitsArray)\n        );\n        return new Float16Array(\n          TypedArrayPrototypeGetBuffer(TypedArrayPrototypeSlice(uint16))\n        );\n      }\n\n      if (opts.length === 0) {\n        return new Float16Array(\n          TypedArrayPrototypeGetBuffer(\n            Uint16ArrayFrom(src, roundToFloat16Bits)\n          )\n        );\n      }\n\n      const mapFunc = opts[0];\n      const thisArg = opts[1];\n\n      return new Float16Array(\n        TypedArrayPrototypeGetBuffer(\n          Uint16ArrayFrom(src, function (val, ...args) {\n            return roundToFloat16Bits(\n              ReflectApply(mapFunc, this, [val, ...safeIfNeeded(args)])\n            );\n          }, thisArg)\n        )\n      );\n    }\n\n    /** @type {ArrayLike<unknown>} */\n    let list;\n    /** @type {number} */\n    let length;\n\n    const iterator = src[SymbolIterator];\n    if (iterator != null && typeof iterator !== \"function\") {\n      throw NativeTypeError(ITERATOR_PROPERTY_IS_NOT_CALLABLE);\n    }\n\n    if (iterator != null) { // Iterable (TypedArray, Array)\n      // for optimization\n      if (isOrdinaryArray(src)) {\n        list = src;\n        length = src.length;\n      } else if (isOrdinaryNativeTypedArray(src)) {\n        list = src;\n        length = TypedArrayPrototypeGetLength(src);\n      } else {\n        // eslint-disable-next-line no-restricted-syntax\n        list = [...src];\n        length = list.length;\n      }\n    } else { // ArrayLike\n      if (src == null) {\n        throw NativeTypeError(\n          CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n        );\n      }\n      list = NativeObject(src);\n      length = ToLength(list.length);\n    }\n\n    const array = new Constructor(length);\n\n    if (opts.length === 0) {\n      for (let i = 0; i < length; ++i) {\n        array[i] = /** @type {number} */ (list[i]);\n      }\n    } else {\n      const mapFunc = opts[0];\n      const thisArg = opts[1];\n      for (let i = 0; i < length; ++i) {\n        array[i] = ReflectApply(mapFunc, thisArg, [list[i], i]);\n      }\n    }\n\n    return array;\n  }\n\n  /**\n   * limitation: `Object.getOwnPropertyNames(Float16Array)` or `Reflect.ownKeys(Float16Array)` include this key\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.of\n   */\n  static of(...items) {\n    const Constructor = this;\n\n    if (!ReflectHas(Constructor, brand)) {\n      throw NativeTypeError(\n        THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY\n      );\n    }\n\n    const length = items.length;\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const proxy = new Float16Array(length);\n      const float16bitsArray = getFloat16BitsArray(proxy);\n\n      for (let i = 0; i < length; ++i) {\n        float16bitsArray[i] = roundToFloat16Bits(items[i]);\n      }\n\n      return proxy;\n    }\n\n    const array = new Constructor(length);\n\n    for (let i = 0; i < length; ++i) {\n      array[i] = items[i];\n    }\n\n    return array;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys */\n  keys() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return TypedArrayPrototypeKeys(float16bitsArray);\n  }\n\n  /**\n   * limitation: returns a object whose prototype is not `%ArrayIteratorPrototype%`\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.values\n   */\n  values() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return wrap((function* () {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const val of TypedArrayPrototypeValues(float16bitsArray)) {\n        yield convertToNumber(val);\n      }\n    })());\n  }\n\n  /**\n   * limitation: returns a object whose prototype is not `%ArrayIteratorPrototype%`\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries\n   */\n  entries() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return wrap((function* () {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const [i, val] of TypedArrayPrototypeEntries(float16bitsArray)) {\n        yield /** @type {[number, number]} */ ([i, convertToNumber(val)]);\n      }\n    })());\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.at */\n  at(index) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeIndex = ToIntegerOrInfinity(index);\n    const k = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n\n    if (k < 0 || k >= length) {\n      return;\n    }\n\n    return convertToNumber(float16bitsArray[k]);\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with */\n  with(index, value) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeIndex = ToIntegerOrInfinity(index);\n    const k = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n\n    const number = +value;\n\n    if (k < 0 || k >= length) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n    const array = getFloat16BitsArray(cloned);\n\n    array[k] = roundToFloat16Bits(number);\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.map */\n  map(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const proxy = new Float16Array(length);\n      const array = getFloat16BitsArray(proxy);\n\n      for (let i = 0; i < length; ++i) {\n        const val = convertToNumber(float16bitsArray[i]);\n        array[i] = roundToFloat16Bits(\n          ReflectApply(callback, thisArg, [val, i, this])\n        );\n      }\n\n      return proxy;\n    }\n\n    const array = new Constructor(length);\n    assertSpeciesTypedArray(array, length);\n\n    for (let i = 0; i < length; ++i) {\n      const val = convertToNumber(float16bitsArray[i]);\n      array[i] = ReflectApply(callback, thisArg, [val, i, this]);\n    }\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter */\n  filter(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    const kept = [];\n    for (let i = 0; i < length; ++i) {\n      const val = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [val, i, this])) {\n        ArrayPrototypePush(kept, val);\n      }\n    }\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n    const array = new Constructor(kept);\n    assertSpeciesTypedArray(array);\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce */\n  reduce(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    if (length === 0 && opts.length === 0) {\n      throw NativeTypeError(REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE);\n    }\n\n    let accumulator, start;\n    if (opts.length === 0) {\n      accumulator = convertToNumber(float16bitsArray[0]);\n      start = 1;\n    } else {\n      accumulator = opts[0];\n      start = 0;\n    }\n\n    for (let i = start; i < length; ++i) {\n      accumulator = callback(\n        accumulator,\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this\n      );\n    }\n\n    return accumulator;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright */\n  reduceRight(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    if (length === 0 && opts.length === 0) {\n      throw NativeTypeError(REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE);\n    }\n\n    let accumulator, start;\n    if (opts.length === 0) {\n      accumulator = convertToNumber(float16bitsArray[length - 1]);\n      start = length - 2;\n    } else {\n      accumulator = opts[0];\n      start = length - 1;\n    }\n\n    for (let i = start; i >= 0; --i) {\n      accumulator = callback(\n        accumulator,\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this\n      );\n    }\n\n    return accumulator;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach */\n  forEach(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      ReflectApply(callback, thisArg, [\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this,\n      ]);\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.find */\n  find(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return value;\n      }\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex */\n  findIndex(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/proposal-array-find-from-last/index.html#sec-%typedarray%.prototype.findlast */\n  findLast(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = length - 1; i >= 0; --i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return value;\n      }\n    }\n  }\n\n  /** @see https://tc39.es/proposal-array-find-from-last/index.html#sec-%typedarray%.prototype.findlastindex */\n  findLastIndex(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = length - 1; i >= 0; --i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.every */\n  every(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      if (\n        !ReflectApply(callback, thisArg, [\n          convertToNumber(float16bitsArray[i]),\n          i,\n          this,\n        ])\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.some */\n  some(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      if (\n        ReflectApply(callback, thisArg, [\n          convertToNumber(float16bitsArray[i]),\n          i,\n          this,\n        ])\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.set */\n  set(input, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const targetOffset = ToIntegerOrInfinity(opts[0]);\n    if (targetOffset < 0) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    if (input == null) {\n      throw NativeTypeError(\n        CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n      );\n    }\n\n    if (isNativeBigIntTypedArray(input)) {\n      throw NativeTypeError(\n        CANNOT_MIX_BIGINT_AND_OTHER_TYPES\n      );\n    }\n\n    // for optimization\n    if (isFloat16Array(input)) {\n      // peel off Proxy\n      return TypedArrayPrototypeSet(\n        getFloat16BitsArray(this),\n        getFloat16BitsArray(input),\n        targetOffset\n      );\n    }\n\n    if (isNativeTypedArray(input)) {\n      const buffer = TypedArrayPrototypeGetBuffer(input);\n      if (IsDetachedBuffer(buffer)) {\n        throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n      }\n    }\n\n    const targetLength = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    const src = NativeObject(input);\n    const srcLength = ToLength(src.length);\n\n    if (targetOffset === Infinity || srcLength + targetOffset > targetLength) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    for (let i = 0; i < srcLength; ++i) {\n      float16bitsArray[i + targetOffset] = roundToFloat16Bits(src[i]);\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse */\n  reverse() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeReverse(float16bitsArray);\n\n    return this;\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed */\n  toReversed() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n\n    const clonedFloat16bitsArray = getFloat16BitsArray(cloned);\n    TypedArrayPrototypeReverse(clonedFloat16bitsArray);\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill */\n  fill(value, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeFill(\n      float16bitsArray,\n      roundToFloat16Bits(value),\n      ...safeIfNeeded(opts)\n    );\n\n    return this;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin */\n  copyWithin(target, start, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeCopyWithin(float16bitsArray, target, start, ...safeIfNeeded(opts));\n\n    return this;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort */\n  sort(compareFn) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const sortCompare = compareFn !== undefined ? compareFn : defaultCompare;\n    TypedArrayPrototypeSort(float16bitsArray, (x, y) => {\n      return sortCompare(convertToNumber(x), convertToNumber(y));\n    });\n\n    return this;\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toSorted */\n  toSorted(compareFn) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    if (compareFn !== undefined && typeof compareFn !== \"function\") {\n      throw new NativeTypeError(THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED);\n    }\n    const sortCompare = compareFn !== undefined ? compareFn : defaultCompare;\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n\n    const clonedFloat16bitsArray = getFloat16BitsArray(cloned);\n    TypedArrayPrototypeSort(clonedFloat16bitsArray, (x, y) => {\n      return sortCompare(convertToNumber(x), convertToNumber(y));\n    });\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice */\n  slice(start, end) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const uint16 = new NativeUint16Array(\n        TypedArrayPrototypeGetBuffer(float16bitsArray),\n        TypedArrayPrototypeGetByteOffset(float16bitsArray),\n        TypedArrayPrototypeGetLength(float16bitsArray)\n      );\n      return new Float16Array(\n        TypedArrayPrototypeGetBuffer(\n          TypedArrayPrototypeSlice(uint16, start, end)\n        )\n      );\n    }\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeStart = ToIntegerOrInfinity(start);\n    const relativeEnd = end === undefined ? length : ToIntegerOrInfinity(end);\n\n    let k;\n    if (relativeStart === -Infinity) {\n      k = 0;\n    } else if (relativeStart < 0) {\n      k = length + relativeStart > 0 ? length + relativeStart : 0;\n    } else {\n      k = length < relativeStart ? length : relativeStart;\n    }\n\n    let final;\n    if (relativeEnd === -Infinity) {\n      final = 0;\n    } else if (relativeEnd < 0) {\n      final = length + relativeEnd > 0 ? length + relativeEnd : 0;\n    } else {\n      final = length < relativeEnd ? length : relativeEnd;\n    }\n\n    const count = final - k > 0 ? final - k : 0;\n    const array = new Constructor(count);\n    assertSpeciesTypedArray(array, count);\n\n    if (count === 0) {\n      return array;\n    }\n\n    const buffer = TypedArrayPrototypeGetBuffer(float16bitsArray);\n    if (IsDetachedBuffer(buffer)) {\n      throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n    }\n\n    let n = 0;\n    while (k < final) {\n      array[n] = convertToNumber(float16bitsArray[k]);\n      ++k;\n      ++n;\n    }\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray */\n  subarray(begin, end) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const uint16Subarray = TypedArrayPrototypeSubarray(uint16, begin, end);\n\n    const array = new Constructor(\n      TypedArrayPrototypeGetBuffer(uint16Subarray),\n      TypedArrayPrototypeGetByteOffset(uint16Subarray),\n      TypedArrayPrototypeGetLength(uint16Subarray)\n    );\n    assertSpeciesTypedArray(array);\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof */\n  indexOf(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = ToIntegerOrInfinity(opts[0]);\n    if (from === Infinity) {\n      return -1;\n    }\n\n    if (from < 0) {\n      from += length;\n      if (from < 0) {\n        from = 0;\n      }\n    }\n\n    for (let i = from; i < length; ++i) {\n      if (\n        ObjectHasOwn(float16bitsArray, i) &&\n        convertToNumber(float16bitsArray[i]) === element\n      ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof */\n  lastIndexOf(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = opts.length >= 1 ? ToIntegerOrInfinity(opts[0]) : length - 1;\n    if (from === -Infinity) {\n      return -1;\n    }\n\n    if (from >= 0) {\n      from = from < length - 1 ? from : length - 1;\n    } else {\n      from += length;\n    }\n\n    for (let i = from; i >= 0; --i) {\n      if (\n        ObjectHasOwn(float16bitsArray, i) &&\n        convertToNumber(float16bitsArray[i]) === element\n      ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes */\n  includes(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = ToIntegerOrInfinity(opts[0]);\n    if (from === Infinity) {\n      return false;\n    }\n\n    if (from < 0) {\n      from += length;\n      if (from < 0) {\n        from = 0;\n      }\n    }\n\n    const isNaN = NumberIsNaN(element);\n    for (let i = from; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n\n      if (isNaN && NumberIsNaN(value)) {\n        return true;\n      }\n\n      if (value === element) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.join */\n  join(separator) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const array = copyToArray(float16bitsArray);\n\n    return ArrayPrototypeJoin(array, separator);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring */\n  toLocaleString(...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const array = copyToArray(float16bitsArray);\n\n    return ArrayPrototypeToLocaleString(array, ...safeIfNeeded(opts));\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-get-%typedarray%.prototype-@@tostringtag */\n  get [SymbolToStringTag]() {\n    if (isFloat16Array(this)) {\n      return /** @type {any} */ (\"Float16Array\");\n    }\n  }\n}\n\n/** @see https://tc39.es/ecma262/#sec-typedarray.bytes_per_element */\nObjectDefineProperty(Float16Array, \"BYTES_PER_ELEMENT\", {\n  value: BYTES_PER_ELEMENT,\n});\n\n// limitation: It is peaked by `Object.getOwnPropertySymbols(Float16Array)` and `Reflect.ownKeys(Float16Array)`\nObjectDefineProperty(Float16Array, brand, {});\n\n/** @see https://tc39.es/ecma262/#sec-properties-of-the-typedarray-constructors */\nReflectSetPrototypeOf(Float16Array, TypedArray);\n\nconst Float16ArrayPrototype = Float16Array.prototype;\n\n/** @see https://tc39.es/ecma262/#sec-typedarray.prototype.bytes_per_element */\nObjectDefineProperty(Float16ArrayPrototype, \"BYTES_PER_ELEMENT\", {\n  value: BYTES_PER_ELEMENT,\n});\n\n/** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator */\nObjectDefineProperty(Float16ArrayPrototype, SymbolIterator, {\n  value: Float16ArrayPrototype.values,\n  writable: true,\n  configurable: true,\n});\n\nReflectSetPrototypeOf(Float16ArrayPrototype, TypedArrayPrototype);\n","/**\n * @module wgl/WebGLBuffer\n * Module containing a helper class for WebGL data buffers\n */\nconst getGLDtype = (gl, ary) => {\n    const DTYPES = {\n        'Float32Array': gl.FLOAT,\n        'Uint8Array': gl.UNSIGNED_BYTE,\n        'Uint16Array': gl.UNSIGNED_SHORT,\n        'Uint32Array': gl.UNSIGNED_INT,\n    };\n    return DTYPES[ary.constructor.name];\n};\nclass WGLBufferBase {\n    constructor(gl, verts, n_coords_per_vert, draw_mode, bind_target) {\n        this.gl = gl;\n        this.n_coords_per_vert = n_coords_per_vert;\n        this.dtype = getGLDtype(gl, verts);\n        this.n_verts = verts.length / n_coords_per_vert;\n        this.draw_mode = draw_mode;\n        const buffer = gl.createBuffer();\n        if (buffer === null) {\n            throw \"Could not create WebGL buffer\";\n        }\n        this.buffer = buffer;\n        gl.bindBuffer(bind_target, this.buffer);\n        gl.bufferData(bind_target, verts, gl.STATIC_DRAW);\n    }\n}\n/** A class representing a WebGL data buffer */\nclass WGLBuffer extends WGLBufferBase {\n    /**\n     * Create a WebGL buffer and put some data in it\n     * @param gl                 - The WebGL rendering context\n     * @param verts              - The vertex data to use for this buffer\n     * @param n_coords_per_vert  - The number of coordinates for each vertex in the data buffer\n     * @param draw_mode          - The draw mode to use for this buffer. Should be one of gl.TRIANGLE_STRIP, etc.\n     */\n    constructor(gl, verts, n_coords_per_vert, draw_mode) {\n        super(gl, verts, n_coords_per_vert, draw_mode, gl.ARRAY_BUFFER);\n    }\n    /**\n     * Bind this buffer to a location in a shader program\n     * @internal\n     * @param prog_attr_location - The location of the variable in the shader program (returned from gl.getAttribLocation())\n     */\n    bindToProgram(prog_attr_location) {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);\n        this.gl.enableVertexAttribArray(prog_attr_location);\n        this.gl.vertexAttribPointer(prog_attr_location, this.n_coords_per_vert, this.dtype, false, 0, 0);\n    }\n}\n/** A class representing a WebGL data buffer for array indices */\nclass WGLIndexBuffer extends WGLBufferBase {\n    /**\n     *\n     * @param gl         - The WebGL rendering context\n     * @param indices    - The index data\n     * @param draw_mode  - The draw mode to use for this buffer. Should be one of gl.TRIANGLE_STRIP, etc.\n     */\n    constructor(gl, indices, draw_mode) {\n        super(gl, indices, 1, draw_mode, gl.ELEMENT_ARRAY_BUFFER);\n    }\n    /**\n     * Bind this buffer to the ELEMENT_ARRAY_BUFFER target\n     * @internal\n     */\n    bind() {\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n    }\n}\nexport { WGLBuffer, WGLIndexBuffer };\n","function isWebGL2Ctx(gl) {\n    return gl.getParameter(gl.VERSION).includes('WebGL 2.0');\n}\nexport { isWebGL2Ctx };\n","/**\n * @module wgl/WebGLTexture\n * A module containing a helper class for WebGL textures\n */\nimport { isWebGL2Ctx } from \"./utils\";\nfunction getWebGL2Format(gl, internal_format, data_type) {\n    switch (data_type) {\n        case (gl.UNSIGNED_BYTE):\n            switch (internal_format) {\n                case (gl.RGBA8): return gl.RGBA;\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGBA4): return gl.RGBA;\n                case (gl.SRGB8_ALPHA8): return gl.RGBA;\n                case (gl.RGBA8UI): return gl.RGBA_INTEGER;\n                case (gl.RGB8): return gl.RGB;\n                case (gl.RGB565): return gl.RGB;\n                case (gl.SRGB8): return gl.RGB;\n                case (gl.RGB8UI): return gl.RGB_INTEGER;\n                case (gl.RG8): return gl.RG;\n                case (gl.RG8UI): return gl.RG_INTEGER;\n                case (gl.R8): return gl.RED;\n                case (gl.R8UI): return gl.RED_INTEGER;\n                case (gl.RGBA): return gl.RGBA;\n                case (gl.RGB): return gl.RGB;\n                case (gl.LUMINANCE_ALPHA): return gl.LUMINANCE_ALPHA;\n                case (gl.LUMINANCE): return gl.LUMINANCE;\n                case (gl.ALPHA): return gl.ALPHA;\n            }\n            break;\n        case (gl.BYTE):\n            switch (internal_format) {\n                case (gl.RGBA8_SNORM): return gl.RGBA;\n                case (gl.RGBA8I): return gl.RGBA_INTEGER;\n                case (gl.RGB8_SNORM): return gl.RGB;\n                case (gl.RGB8I): return gl.RGB_INTEGER;\n                case (gl.RG8_SNORM): return gl.RG;\n                case (gl.RG8I): return gl.RG_INTEGER;\n                case (gl.R8_SNORM): return gl.RED;\n                case (gl.R8I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_4_4_4_4):\n            switch (internal_format) {\n                case (gl.RGBA4): return gl.RGBA;\n                case (gl.RGBA): return gl.RGBA;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_5_5_5_1):\n            switch (internal_format) {\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGBA): return gl.RGBA;\n            }\n            break;\n        case (gl.UNSIGNED_INT_2_10_10_10_REV):\n            switch (internal_format) {\n                case (gl.RGB10_A2): return gl.RGBA;\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGB10_A2UI): return gl.RGBA_INTEGER;\n            }\n            break;\n        case (gl.HALF_FLOAT):\n            switch (internal_format) {\n                case (gl.RGBA16F): return gl.RGBA;\n                case (gl.RGB16F): return gl.RGB;\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n                case (gl.RGB9_E5): return gl.RGB;\n                case (gl.RG16F): return gl.RG;\n                case (gl.R16F): return gl.RED;\n            }\n            break;\n        case (gl.FLOAT):\n            switch (internal_format) {\n                case (gl.RGBA32F): return gl.RGBA;\n                case (gl.RGBA16F): return gl.RGBA;\n                case (gl.RGB32F): return gl.RGB;\n                case (gl.RGB16F): return gl.RGB;\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n                case (gl.RGB9_E5): return gl.RGB;\n                case (gl.RG32F): return gl.RG;\n                case (gl.RG16F): return gl.RG;\n                case (gl.R32F): return gl.RED;\n                case (gl.R16F): return gl.RED;\n                case (gl.DEPTH_COMPONENT32F): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT):\n            switch (internal_format) {\n                case (gl.RGBA16UI): return gl.RGBA_INTEGER;\n                case (gl.RGB16UI): return gl.RGB_INTEGER;\n                case (gl.RG16UI): return gl.RG_INTEGER;\n                case (gl.R16UI): return gl.RED_INTEGER;\n                case (gl.DEPTH_COMPONENT16): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.SHORT):\n            switch (internal_format) {\n                case (gl.RGBA16I): return gl.RGBA_INTEGER;\n                case (gl.RGB16I): return gl.RGB_INTEGER;\n                case (gl.RG16I): return gl.RG_INTEGER;\n                case (gl.R16I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_INT):\n            switch (internal_format) {\n                case (gl.RGBA32UI): return gl.RGBA_INTEGER;\n                case (gl.RGB32UI): return gl.RGB_INTEGER;\n                case (gl.RG32UI): return gl.RG_INTEGER;\n                case (gl.R32UI): return gl.RED_INTEGER;\n                case (gl.DEPTH_COMPONENT24): return gl.DEPTH_COMPONENT;\n                case (gl.DEPTH_COMPONENT16): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.INT):\n            switch (internal_format) {\n                case (gl.RGBA32I): return gl.RGBA_INTEGER;\n                case (gl.RGB32I): return gl.RGB_INTEGER;\n                case (gl.RG32I): return gl.RG_INTEGER;\n                case (gl.R32I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_5_6_5):\n            switch (internal_format) {\n                case (gl.RGB565): return gl.RGB;\n                case (gl.RGB): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_10F_11F_11F_REV):\n            switch (internal_format) {\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_5_9_9_9_REV):\n            switch (internal_format) {\n                case (gl.RGB9_E5): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_24_8):\n            switch (internal_format) {\n                case (gl.DEPTH24_STENCIL8): return gl.DEPTH_STENCIL;\n            }\n            break;\n        case (gl.FLOAT_32_UNSIGNED_INT_24_8_REV):\n            switch (internal_format) {\n                case (gl.DEPTH32F_STENCIL8): return gl.DEPTH_STENCIL;\n            }\n            break;\n        default:\n            throw `Unknown format in getWebGL2InternalFormat`;\n    }\n    throw `Invalid combination of internal format and data type`;\n}\n/** Class representing a WebGL texture */\nclass WGLTexture {\n    /**\n     *\n     * @param gl               - The WebGL rendering context\n     * @param image            - The specification for the image\n     * @param image.format     - The format for the image (e.g., which color channels are present?). Should be one of gl.RGBA, gl.RGB, etc.\n     * @param image.type       - The data type for the image. Should be one of gl.FLOAT, gl.UNSIGNED_BYTE, etc.\n     * @param image.width      - The width of the texture\n     * @param image.height     - The height of the texture\n     * @param image.mag_filter - The magnification filter to use for the texture. Should be one of gl.LINEAR, gl.NEAREST, etc.\n     * @param image.image      - The image to use for the texture. Can be null to allocate space without filling it.\n     */\n    constructor(gl, image) {\n        this.gl = gl;\n        const texture = gl.createTexture();\n        if (texture === null) {\n            throw \"Could not create WebGL texture\";\n        }\n        this.texture = texture;\n        this.tex_num = null;\n        this.setImageData(image);\n        const mag_filter = image['mag_filter'] === undefined ? gl.LINEAR : image['mag_filter'];\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, mag_filter);\n    }\n    /**\n     * Set image data in this texture\n     * @param image        - The specification for the image\n     * @param image.format - The format for the image (e.g., which color channels are present?). Should be one of gl.RGBA, gl.RGB, etc.\n     * @param image.type   - The data type for the image. Should be one of gl.FLOAT, gl.UNSIGNED_BYTE, etc.\n     * @param image.width  - The width of the texture\n     * @param image.height - The height of the texture\n     * @param image.image  - The image to use for the texture. Can be null to allocate space without filling it.\n     */\n    setImageData(image) {\n        const gl = this.gl;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        const format = isWebGL2Ctx(gl) ? getWebGL2Format(gl, image['format'], image['type']) : image['format'];\n        const row_alignment = image['row_alignment'] === undefined ? 4 : image['row_alignment'];\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, row_alignment);\n        if (image['width'] !== undefined && image['height'] !== undefined) {\n            gl.texImage2D(gl.TEXTURE_2D, 0, image['format'], image['width'], image['height'], 0, format, image['type'], image['image']);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, 0, image['format'], format, image['type'], image['image']);\n        }\n    }\n    /**\n     * Bind this texture to a location in a shader program\n     * @internal\n     * @param prog_uni_location - The location of the sampler uniform value (returned from gl.getUniform()) in the shader program.\n     * @param gl_tex_num        - The texture number to bind this texture to.\n     */\n    bindToProgram(prog_uni_location, gl_tex_num) {\n        this.activate(gl_tex_num);\n        this.gl.uniform1i(prog_uni_location, gl_tex_num);\n    }\n    /**\n     * Bind this texture to a given texture number\n     * @param gl_tex_num - The texture number to bind this texture to.\n     */\n    activate(gl_tex_num) {\n        this.tex_num = gl_tex_num;\n        this.gl.activeTexture(this.gl.TEXTURE0 + this.tex_num);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);\n    }\n    /**\n     * Unbind this texture from the texture number it was most recently bound to.\n     */\n    deactivate() {\n        if (this.tex_num === null) {\n            return;\n        }\n        this.gl.activeTexture(this.gl.TEXTURE0 + this.tex_num);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n        this.tex_num = null;\n    }\n    /**\n     * Delete this texture.\n     */\n    delete() {\n        this.gl.deleteTexture(this.texture);\n        this.tex_num = null;\n    }\n}\nexport { WGLTexture };\n","import { isWebGL2Ctx } from \"./utils\";\n/**\n * @module wgl/WebGLProgram\n * Module containing a helper class for WebGL programs\n */\nfunction preprocessShader(shader_src, opts) {\n    opts = opts === undefined ? {} : opts;\n    const defines = opts.define === undefined ? [] : [...opts.define];\n    const current_defines = [];\n    const define_truth = {};\n    const processed_shader_src = shader_src.split(\"\\n\").map(line => {\n        const match_define = line.match(/#define\\s+([\\w\\d_]+)/i);\n        if (match_define !== null) {\n            defines.push(match_define[1]);\n        }\n        const match_ifdef = line.match(/#ifdef\\s+([\\w\\d_]+)/i);\n        if (match_ifdef !== null) {\n            current_defines.push(match_ifdef[1]);\n            define_truth[match_ifdef[1]] = true;\n            return \"\";\n        }\n        const match_ifndef = line.match(/#ifndef\\s+([\\w\\d_]+)/i);\n        if (match_ifndef !== null) {\n            current_defines.push(match_ifndef[1]);\n            define_truth[match_ifndef[1]] = false;\n            return \"\";\n        }\n        const match_else = line.match(/#else/i);\n        if (match_else !== null) {\n            const def = current_defines[current_defines.length - 1];\n            define_truth[def] = !define_truth[def];\n            return \"\";\n        }\n        const match_endif = line.match(/#endif/i);\n        if (match_endif !== null) {\n            const def = current_defines.pop();\n            define_truth[def] = undefined;\n            return \"\";\n        }\n        const keep_line = current_defines.map(def => defines.includes(def) == define_truth[def]).reduce((a, b) => a && b, true);\n        return keep_line ? line : \"\";\n    }).join(\"\\n\");\n    if (current_defines.length > 0) {\n        throw `Unterminated #ifdef/#ifndef block in shader`;\n    }\n    return processed_shader_src;\n}\n/**\n * Compile and link a shader program\n * @param gl                - The WebGL rendering context\n * @param vertex_shader_src - The source code for the vertex shader\n * @param frag_shader_src   - The source code for the fragment shader\n * @returns                   A compiled and linked WebGL program\n */\nconst compileAndLinkShaders = (gl, vertex_shader_src, frag_shader_src) => {\n    // create a vertex shader\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    if (vertexShader === null) {\n        throw \"Could not create vertex shader\";\n    }\n    gl.shaderSource(vertexShader, vertex_shader_src);\n    gl.compileShader(vertexShader);\n    const vertexCompiled = gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS);\n    if (!vertexCompiled) {\n        const compilationLog = gl.getShaderInfoLog(vertexShader);\n        console.log('Vertex shader compiler log: ' + compilationLog);\n    }\n    // create a fragment shader\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    if (fragmentShader === null) {\n        throw \"Could not create fragment shader\";\n    }\n    gl.shaderSource(fragmentShader, frag_shader_src);\n    gl.compileShader(fragmentShader);\n    const fragmentCompiled = gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS);\n    if (!fragmentCompiled) {\n        const compilationLog = gl.getShaderInfoLog(fragmentShader);\n        console.log('Fragment shader compiler log: ' + compilationLog);\n    }\n    // link the two shaders into a WebGL program\n    const program = gl.createProgram();\n    if (program === null) {\n        throw \"Could not create shader program\";\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    const linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        const linkLog = gl.getProgramInfoLog(program);\n        console.log('Linker log: ' + linkLog);\n    }\n    return program;\n};\n/** Class representing a WebGL shader program */\nclass WGLProgram {\n    /**\n     * Create and compile a shader program from source\n     * @param gl                  - The WebGL rendering context\n     * @param vertex_shader_src   - The vertex shader source code\n     * @param fragment_shader_src - The fragment shader source code\n     * @param opts.define         - Preprocessor macros to define (like -D when running gcc)\n     */\n    constructor(gl, vertex_shader_src, fragment_shader_src, opts) {\n        vertex_shader_src = preprocessShader(vertex_shader_src, opts);\n        fragment_shader_src = preprocessShader(fragment_shader_src, opts);\n        this.gl = gl;\n        this.prog = compileAndLinkShaders(gl, vertex_shader_src, fragment_shader_src);\n        this.attributes = {};\n        this.uniforms = {};\n        this.n_verts = null;\n        this.draw_mode = null;\n        this.index_buffer = null;\n        const remove_comments = (line) => {\n            const comment_idx = line.indexOf('//');\n            if (comment_idx >= 0) {\n                line = line.slice(0, comment_idx);\n            }\n            return line;\n        };\n        vertex_shader_src = vertex_shader_src.split('\\n').map(remove_comments).join('\\n');\n        fragment_shader_src = fragment_shader_src.split('\\n').map(remove_comments).join('\\n');\n        // safety check the vertex shader source\n        const is_webgl2 = isWebGL2Ctx(this.gl);\n        if (!is_webgl2 &&\n            (vertex_shader_src.includes('#version 300 es') || fragment_shader_src.includes('#version 300 es'))) {\n            throw `WebGL2 context required for shader source containing '#version 300 es'`;\n        }\n        // in WebGL2 shaders (gl 300 es), attribute just become the keyword 'in'\n        let vtx_shader_match = is_webgl2 ?\n            /\\b(?:in|attribute)+([\\w ]+?) +([\\w_]+);[\\s]*$/mg : /attribute +([\\w ]+?) +([\\w_]+);[\\s]*$/mg;\n        for (const match of vertex_shader_src.matchAll(vtx_shader_match)) {\n            const [full_match, type, a_name] = match;\n            this.attributes[a_name] = { 'type': type, 'location': gl.getAttribLocation(this.prog, a_name) };\n        }\n        for (const match of vertex_shader_src.matchAll(/uniform +([\\w ]+?) +([\\w_]+)(?:[\\s]*\\[.*\\])?;[\\s]*$/mg)) {\n            const [full_match, type, u_name] = match;\n            const type_parts = type.split(' ');\n            const uniform_loc = gl.getUniformLocation(this.prog, u_name);\n            if (uniform_loc === null) {\n                throw `Could not get vertex shader uniform location for '${u_name}'`;\n            }\n            this.uniforms[u_name] = { 'type': type_parts[type_parts.length - 1], 'location': uniform_loc };\n        }\n        for (const match of fragment_shader_src.matchAll(/uniform +([\\w ]+?) +([\\w_]+)(?:[\\s]*\\[.*\\])?;[\\s]*$/mg)) {\n            const [full_match, type, u_name] = match;\n            const type_parts = type.split(' ');\n            const uniform_loc = gl.getUniformLocation(this.prog, u_name);\n            if (uniform_loc === null) {\n                throw `Could not get fragment shader uniform location for '${u_name}'`;\n            }\n            this.uniforms[u_name] = { 'type': type_parts[type_parts.length - 1], 'location': uniform_loc };\n        }\n    }\n    /**\n     * Enable this program for rendering and optionally bind attribute, uniform, and texture values. This function should be called before calling\n     * {@link WGLProgram.bindAttributes}, {@link WGLProgram.setUniforms}, or {@link WGLProgram.bindTextures} on a given rendering pass.\n     * @param attribute_buffers - An object with the keys being the attribute variable names and the values being the buffers to associate with each variable\n     * @param uniform_values    - An object with the keys being the uniform variable names and the values being the uniform values\n     * @param textures          - An object with the keys being the sampler names in the source code and the values being the textures to associate with each sampler\n     * @param index_buffer      - A WGLIndexBuffer specifying which indices to draw in which order\n     */\n    use(attribute_buffers, uniform_values, textures, index_buffer) {\n        this.gl.useProgram(this.prog);\n        if (index_buffer !== undefined) {\n            index_buffer.bind();\n            this.index_buffer = index_buffer;\n        }\n        else {\n            this.index_buffer = null;\n        }\n        this.draw_mode = null;\n        this.n_verts = null;\n        if (attribute_buffers !== undefined) {\n            this.bindAttributes(attribute_buffers);\n        }\n        if (uniform_values !== undefined) {\n            this.setUniforms(uniform_values);\n        }\n        if (textures !== undefined) {\n            this.bindTextures(textures);\n        }\n    }\n    /**\n     * Bind attribute buffers to variables in this shader program. When rendring, call {@link WGLProgram.use} before calling this function.\n     * @param attribute_buffers - An object with the keys being the attribute variable names and the values being the buffers to associate with each variable\n     */\n    bindAttributes(attribute_buffers) {\n        Object.entries(attribute_buffers).forEach(([a_name, buffer]) => {\n            if (this.attributes[a_name] === undefined) {\n                console.warn(`Skipping attribute buffer provided for '${a_name}' because the attribute was not found in the program.`);\n                return;\n            }\n            this.n_verts = this.n_verts === null ? buffer.n_verts : this.n_verts;\n            this.draw_mode = this.draw_mode === null ? buffer.draw_mode : this.draw_mode;\n            if (this.draw_mode != buffer.draw_mode) {\n                throw `Unexpected draw mode for attribute buffer ${a_name} (expected ${this.draw_mode}, got ${buffer.draw_mode}).`;\n            }\n            if (this.n_verts != buffer.n_verts) {\n                throw `Unexpected number of vertices for attribute buffer ${a_name} (expected ${this.n_verts}, got ${buffer.n_verts}).`;\n            }\n            const { type, location } = this.attributes[a_name];\n            buffer.bindToProgram(location);\n        });\n    }\n    /**\n     * Set uniform values in this shader program. When rendering, call {@link WGLProgram.use} before calling this function.\n     * @param uniform_values - An object with the keys being the uniform variable names and the values being the uniform values\n     */\n    setUniforms(uniform_values) {\n        Object.entries(uniform_values).forEach(([u_name, value]) => {\n            if (this.uniforms[u_name] === undefined) {\n                console.warn(`Skipping uniform value provided for '${u_name}' because the uniform was not found in the program.`);\n                return;\n            }\n            const { type, location } = this.uniforms[u_name];\n            if (type === 'int' && typeof value == 'number') {\n                this.gl.uniform1i(location, value);\n            }\n            else if (type === 'float' && typeof value == 'number') {\n                this.gl.uniform1f(location, value);\n            }\n            else if (type === 'float' && value instanceof Array) {\n                this.gl.uniform1fv(location, value);\n            }\n            else if (type === 'vec2' && value instanceof Array) {\n                this.gl.uniform2fv(location, value);\n            }\n            else if (type === 'vec3' && value instanceof Array) {\n                this.gl.uniform3fv(location, value);\n            }\n            else if (type === 'vec4' && value instanceof Array) {\n                this.gl.uniform4fv(location, value);\n            }\n            else if (type === 'mat4' && value instanceof Array) {\n                this.gl.uniformMatrix4fv(location, false, value);\n            }\n            else {\n                throw `Could not figure out uniform function for type '${type}' and value '${String(value)}'`;\n            }\n        });\n    }\n    /**\n     * Bind textures to samplers in this shader program. When rendring, call {@link WGLProgram.use} before calling this function.\n     * @param textures - An object with the keys being the sampler names in the source code and the values being the textures to associate with each sampler\n     */\n    bindTextures(textures) {\n        Object.entries(textures).forEach(([sampler_name, texture], gl_tex_num) => {\n            if (this.uniforms[sampler_name] === undefined) {\n                console.warn(`Skipping texture provided for sampler '${sampler_name}' because the sampler was not found in the program.`);\n                return;\n            }\n            const { type, location } = this.uniforms[sampler_name];\n            texture.bindToProgram(location, gl_tex_num);\n        });\n    }\n    /**\n     * Run this shader program.\n     */\n    draw() {\n        if (this.draw_mode === null || this.n_verts === null) {\n            throw \"Cannot draw without binding attribute buffers\";\n        }\n        if (this.index_buffer === null) {\n            this.gl.drawArrays(this.draw_mode, 0, this.n_verts);\n        }\n        else {\n            this.gl.drawElements(this.draw_mode, this.index_buffer.n_verts, this.index_buffer.dtype, 0);\n        }\n    }\n}\nexport { WGLProgram };\n","/**\n * @module wgl/WebGLFramebuffer\n * Module containing helper classes for WebGL Framebuffers\n */\n/**\n * Base class for WebGL framebuffers\n */\nclass WGLFramebufferBase {\n    constructor(gl, framebuffer) {\n        this.gl = gl;\n        this.framebuffer = framebuffer;\n    }\n    /**\n     * Clear the framebuffer to a particular color\n     * @param color - The color to use when clearing the framebuffer as a float RGBA tuple\n     */\n    clear(color) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.clearColor(...color);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    /**\n     * Render to a portion of this framebuffer\n     * @param x      - The x coordinate of the starting point for the viewport\n     * @param y      - The y coordinate of the starting point for the viewport\n     * @param width  - The width of the viewport\n     * @param height - The height of the viewport\n     */\n    renderTo(x, y, width, height) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.viewport(x, y, width, height);\n    }\n    /**\n     * Copy the contents of this framebuffer to another texture\n     * @param texture - The destination texture for the copy\n     * @param x       - The x coordinate of the start of the source rectangle\n     * @param y       - The y coordinate of the start of the source rectangle\n     * @param width   - The width of the source rectangle\n     * @param height  - The height of the source rectangle\n     */\n    copyToTexture(texture, x, y, width, height) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        texture.activate(0);\n        gl.copyTexImage2D(gl.TEXTURE_2D, 0, gl.RGBA, x, y, width, height, 0);\n    }\n}\n/**\n * Class representing the screen buffer\n * @extends WGLFramebufferBase\n */\nclass WGLScreenbuffer extends WGLFramebufferBase {\n    /**\n     * Create the screen buffer. Use the {@link WGLFramebuffer.screen} static variable of {@link WGLFramebuffer} instead of creating your own screenbuffer.\n     */\n    constructor() {\n        super(null, null);\n    }\n    /**\n     * Register the WebGL rendering context for later use\n     * @param gl - The WebGL rendering context\n     */\n    registerGLContext(gl) {\n        this.gl = gl;\n    }\n}\nconst SCREEN = new WGLScreenbuffer();\n/**\n * Class representing a WebGL framebuffer\n * @extends WGLFramebufferBase\n */\nclass WGLFramebuffer extends WGLFramebufferBase {\n    /**\n     * Create a framebuffer associated with a texture\n     * @param gl      - The WebGL rendering context\n     * @param texture - The texture object to associate with this framebuffer\n     */\n    constructor(gl, texture) {\n        const framebuffer = gl.createFramebuffer();\n        if (framebuffer === null) {\n            throw \"Could not create WebGL Framebuffer\";\n        }\n        super(gl, framebuffer);\n        this.texture = texture;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture['texture'], 0);\n    }\n    /**\n     * Get a screen buffer object for interacting with the screen\n     * @static\n     * @param gl - The WebGL rendering context to use\n     */\n    static screen(gl) {\n        SCREEN.registerGLContext(gl);\n        return SCREEN;\n    }\n}\n/**\n * Perform several rendering passes, flip-flopping between two framebuffers\n * @param n_passes  - The number of rendering passes to do\n * @param source_fb - The framebuffer containing the initial data for the rendering\n * @param aux_fb    - The auxilary rendering framebuffers (should be 2 of them)\n * @param do_render - A method that does the actual rendering pass\n */\nconst flipFlopBuffers = (n_passes, source_fb, aux_fb, do_render) => {\n    // fb1 is the source and fb2 is the target for each pass\n    let fb1 = source_fb, fb2 = aux_fb[0];\n    for (let ipass = 0; ipass < n_passes; ipass++) {\n        // Clear and unbind destination texture\n        fb2.clear([0., 0., 0., 1.]);\n        fb2.texture.deactivate();\n        // Do whatever rendering task we want to do\n        do_render(fb1, fb2, ipass);\n        if (ipass > 0) {\n            // Flip the framebuffers so the destination on this pass becomes the source on the next pass and vice-versa\n            aux_fb.reverse();\n        }\n        [fb1, fb2] = aux_fb;\n    }\n    // The most recent target is fb2, but the two framebuffers got flipped at the end of the loop, so the data we want are in fb1.\n    return fb1;\n};\nexport { WGLFramebuffer, flipFlopBuffers };\n","import { hex2rgb, hsv2rgb, rgb2hex, rgb2hsv } from \"./utils\";\n\nimport spd500_colormap_data from \"./json/pw500speed_colormap.json\";\nimport spd850_colormap_data from \"./json/pw850speed_colormap.json\";\nimport cape_colormap_data from \"./json/pwcape_colormap.json\";\nimport t2m_colormap_data from \"./json/pwt2m_colormap.json\";\nimport td2m_colormap_data from \"./json/pwtd2m_colormap.json\";\nimport nws_storm_clear_refl_colormap_data from \"./json/nws_storm_clear_refl_colormap.json\";\nimport { Float16Array } from \"@petamoriken/float16\";\n\ninterface Color {\n    /** The color as a hex color string */\n    color: string;\n\n    /** The opacity as a number from 0 to 1 */\n    opacity: number;\n}\n\nfunction isColor(obj: any): obj is Color {\n    return (typeof obj == 'object') && 'color' in obj && 'opacity' in obj;\n}\n\ninterface ColorMapOptions {\n    /** The color to use for areas where the value is below the lowest value in the color map */\n    overflow_color?: Color | string;\n\n    /** The color to use for areas where the value is above the highest value in the color map */\n    underflow_color?: Color | string;\n}\n\n/** A mapping from values to colors */\nclass ColorMap {\n    public readonly levels: number[];\n    public readonly colors: Color[];\n    public readonly overflow_color: Color | null;\n    public readonly underflow_color: Color | null;\n\n    /**\n     * Create a color map\n     * @param levels - The list of levels. The number of levels should always be one more than the number of colors.\n     * @param colors - A list of colors\n     * @param opts   - Options for the color map\n     */\n    constructor(levels: number[], colors: Color[] | string[], opts?: ColorMapOptions) {\n        if (levels.length != colors.length + 1) {\n            throw `Mismatch between number of levels (${levels.length}) and number of colors (${colors.length}; expected ${levels.length - 1})`;\n        }\n\n        const normalizeColor = (c: Color | string) => isColor(c) ? c : {'color': c, 'opacity': 1.};\n\n        this.levels = levels;\n        this.colors = colors.map(c => normalizeColor(c));\n\n        opts = opts === undefined ? {} : opts;\n        this.overflow_color = opts.overflow_color === undefined ? null : normalizeColor(opts.overflow_color);\n        this.underflow_color = opts.underflow_color === undefined ? null : normalizeColor(opts.underflow_color);\n    }\n\n    /**\n     * @returns an array of hex color strings\n     */\n    public getColors() : string[] {\n        return this.colors.map(s => s['color']);\n    }\n\n    /**\n     * @returns an array of opacities, one for each color in the color map\n     */\n    public getOpacities() : number[] {\n        return this.colors.map(s => s['opacity']);\n    }\n\n    /**\n     * Make a new color map with different opacities. The opacities are set by func.\n     * @param func - A function which takes the two levels associated with a color (an upper and lower bound) and returns an opacity in the range from 0 to 1.\n     * @returns A new color map\n     */\n    public withOpacity(func: (level_lower: number, level_upper: number) => number) {\n        const new_colors: Color[] = [];\n        const new_levels: number[] = [];\n        const opts: ColorMapOptions = {};\n\n        for (let ic = 0 ; ic < this.colors.length ; ic++) {\n            const color = this.colors[ic];\n            const level_lower = this.levels[ic];\n            const level_upper = this.levels[ic + 1];\n\n            const new_opacity = func(level_lower, level_upper)\n            const new_color = {color: color.color, opacity: new_opacity};\n            if (new_opacity > 0) {\n                if (new_levels[new_levels.length - 1] != level_lower)\n                    new_levels.push(level_lower)\n                new_levels.push(level_upper);\n                new_colors.push(new_color);\n            }\n        }\n\n        if (this.underflow_color !== null) {\n            const underflow_opacity = func(this.levels[0], this.levels[0]);\n            if (underflow_opacity > 0) {\n                opts.underflow_color = {color: this.underflow_color.color, opacity: underflow_opacity};\n            }\n        }\n\n        if (this.overflow_color !== null) {\n            const overflow_opacity = func(this.levels[this.levels.length - 1], this.levels[this.levels.length - 1]);\n            if (overflow_opacity > 0) {\n                opts.overflow_color = {color: this.overflow_color.color, opacity: overflow_opacity};\n            }\n        }\n        \n        return new ColorMap(new_levels, new_colors, opts);\n    }\n\n    /**\n     * Create a diverging color map using two input colors\n     * @param color1    - The color corresponding to the lowest value in the color map\n     * @param color2    - The color corresponding to the highest value in the color map\n     * @param level_min - The lowest value in the color map\n     * @param level_max - The highest value in the color map\n     * @param n_colors  - The number of colors to use\n     * @returns a Colormap object\n     */\n    public static diverging(color1: string, color2: string, level_min: number, level_max: number, n_colors: number) {\n        const stops: Color[] = [];\n        const levels: number[] = [];\n\n        const level_step = (level_max - level_min) / (n_colors - 1);\n        const crossover = (level_max + level_min) / 2;\n        const crossover_hsv: [number, number, number] = [0, 0, 0.9];\n\n        const color1_hsv = rgb2hsv(hex2rgb(color1));\n        const color2_hsv = rgb2hsv(hex2rgb(color2));\n\n        for (let istop = 0; istop < n_colors; istop++) {\n            const level = level_min + istop * level_step;\n            let h, s, v;\n            let interp_fac;\n            if (level < crossover) {\n                interp_fac = (crossover - level) / (crossover - level_min);\n\n                [h, s, v] = [\n                    color1_hsv[0], \n                    crossover_hsv[1] + (color1_hsv[1] - crossover_hsv[1]) * interp_fac,\n                    crossover_hsv[2] + (color1_hsv[2] - crossover_hsv[2]) * interp_fac]\n            }\n            else if (level >= crossover) {\n                interp_fac = (level - crossover) / (level_max - crossover);\n                \n                [h, s, v] = [\n                    color2_hsv[0], \n                    crossover_hsv[1] + (color2_hsv[1] - crossover_hsv[1]) * interp_fac,\n                    crossover_hsv[2] + (color2_hsv[2] - crossover_hsv[2]) * interp_fac]\n            }\n            const color = rgb2hex(hsv2rgb([h, s, v]));\n            stops.push({'color': color, 'opacity': Math.min(2 * interp_fac, 1)});\n        }\n\n        for (let ilev = 0; ilev <= n_colors; ilev++) {\n            const level_step = (level_max - level_min) / n_colors;\n            levels.push(level_min + ilev * level_step);\n        }\n\n        return new ColorMap(levels, stops);\n    }\n}\n\nfunction buildColormap(cm_data: {levels: number[], colors: string[]}, overflow: 'under' | 'over' | 'both' | 'neither') {\n    const n_colors = cm_data.colors.length;\n    const opts: ColorMapOptions = {};\n\n    if (overflow == 'over' || overflow == 'both') {\n        opts.overflow_color = cm_data.colors[n_colors - 1];\n    }\n    if (overflow == 'under' || overflow == 'both') {\n        opts.underflow_color = cm_data.colors[0];\n    }\n\n    return new ColorMap(cm_data.levels, cm_data.colors, opts);\n}\n\n// Some built-in colormaps\nconst pw_speed500mb = buildColormap(spd500_colormap_data, 'over').withOpacity((levl, levu) => Math.min((levu - 20) / 10, 1.));\nconst pw_speed850mb = buildColormap(spd850_colormap_data, 'over').withOpacity((levl, levu) => Math.min((levu - 20) / 10, 1.));\nconst pw_cape = buildColormap(cape_colormap_data, 'over').withOpacity((levl, levu) => Math.min(levu / 1000., 1.));\nconst pw_t2m = buildColormap(t2m_colormap_data, 'both');\nconst pw_td2m = buildColormap(td2m_colormap_data, 'both');\nconst nws_storm_clear_refl = buildColormap(nws_storm_clear_refl_colormap_data, 'over');\n\n/**\n * Create a diverging red/blue colormap, where red corresponds to the lowest value and blue corresponds to the highest value\n * @param level_min - The lowest value in the color map\n * @param level_max - The highest value in the color map\n * @param n_colors  - The number of colors\n * @returns a Colormap object\n */\nconst redblue = (level_min: number, level_max: number, n_colors: number) => {\n    return ColorMap.diverging('#ff0000', '#0000ff', level_min, level_max, n_colors);\n}\n\n/**\n * Create a diverging blue/red colormap, where blue corresponds to the lowest value and red corresponds to the highest value\n * @param level_min - The lowest value in the color map\n * @param level_max - The highest value in the color map\n * @param n_colors  - The number of colors\n * @returns a Colormap object\n */\nconst bluered = (level_min: number, level_max: number, n_colors: number) => {\n    return ColorMap.diverging('#0000ff', '#ff0000', level_min, level_max, n_colors);\n}\n\n/**\n * Make a canvas image corresponding to a color map\n * @param colormap - The color map to use\n * @returns A canvas element containing each color of the color map\n */\nfunction makeTextureImage(colormap: ColorMap) {\n    const cmap_image = document.createElement('canvas');\n    cmap_image.width = colormap.colors.length;\n    cmap_image.height = 1;\n\n    let ctx = cmap_image.getContext('2d');\n\n    colormap.colors.forEach((stop, istop) => {\n        if (ctx === null) {\n            throw \"Could not get rendering context for colormap image canvas\";\n        }\n\n        ctx.fillStyle = stop['color'] + Math.round(stop['opacity'] * 255).toString(16);\n        ctx.fillRect(istop, 0, 1, 1);\n    });\n\n    return cmap_image;\n}\n\nfunction makeIndexMap(colormap: ColorMap) {\n    // Build a texture to account for nonlinear colormaps (basically inverts the relationship between\n    //  the normalized index and the normalized level)\n    const n_nonlin = 101;\n    const map_norm = [];\n    for (let i = 0; i < n_nonlin; i++) {\n        map_norm.push(i / (n_nonlin - 1));\n    }\n\n    const levels = colormap.levels;\n    const n_lev = levels.length - 1;\n\n    const input_norm = levels.map((lev, ilev) => ilev / n_lev);\n    const cmap_norm = levels.map(lev => (lev - levels[0]) / (levels[n_lev] - levels[0]));\n    const inv_cmap_norm = map_norm.map(lev => {\n        let jlev;\n        for (jlev = 0; !(cmap_norm[jlev] <= lev && lev <= cmap_norm[jlev + 1]); jlev++) {}\n\n        const alpha = (lev - cmap_norm[jlev]) / (cmap_norm[jlev + 1] - cmap_norm[jlev]);\n        return input_norm[jlev] * (1 - alpha) + input_norm[jlev + 1] * alpha;\n    });\n\n    return new Float16Array(inv_cmap_norm);\n}\n\nexport {ColorMap, bluered, redblue, pw_speed500mb, pw_speed850mb, pw_cape, pw_t2m, pw_td2m, nws_storm_clear_refl, makeTextureImage, makeIndexMap}\nexport type {Color, ColorMapOptions};","\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { WGLBuffer, WGLProgram, WGLTexture, WGLTextureSpec } from \"autumn-wgl\";\nimport { Polyline, LineData, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { ColorMap, makeIndexMap, makeTextureImage } from \"./Colormap\";\nimport { getGLFormatTypeAlignment, layer_worker } from \"./PlotComponent\";\nimport { Cache, hex2rgba } from \"./utils\";\n\nconst polyline_vertex_src = require('./glsl/polyline_vertex.glsl');\nconst polyline_fragment_src = require('./glsl/polyline_fragment.glsl');\n\ninterface PolylineCollectionOpts {\n    offset_scale?: number;\n    color?: string;\n    cmap?: ColorMap;\n    line_width?: number;\n}\n\nclass PolylineCollection {\n    public readonly width: number;\n    public readonly scale: number | null;\n\n    private readonly program: WGLProgram;\n\n    private readonly vertices: WGLBuffer;\n    private readonly extrusion: WGLBuffer;\n\n    private readonly offset: WGLBuffer | null;\n    private readonly min_zoom: WGLBuffer | null;\n    private readonly line_data: WGLBuffer | null;\n    private readonly line_texture: WGLTexture | null;\n    private readonly color: [number, number, number, number];\n    private readonly cmap_min: number;\n    private readonly cmap_max: number;\n    private readonly index_map: Float16Array | null;\n    private readonly cmap_nonlin_texture: WGLTexture | null;\n\n    private constructor(gl: WebGLAnyRenderingContext, polyline: Polyline, opts: PolylineCollectionOpts) {\n        opts = opts === undefined ? {} : opts;\n        this.color = opts.color === undefined ? [0., 0., 0., 1.] : hex2rgba(opts.color);\n        const line_width = opts.line_width === undefined ? 1 : opts.line_width;\n\n        this.width = line_width;\n\n        const shader_defines = [];\n\n        this.vertices = new WGLBuffer(gl, polyline['vertices'], 3, gl.TRIANGLE_STRIP);\n        this.extrusion = new WGLBuffer(gl, polyline['extrusion'], 2, gl.TRIANGLE_STRIP);\n\n        if (polyline.offsets !== undefined) {\n            this.offset = new WGLBuffer(gl, polyline.offsets, 2, gl.TRIANGLE_STRIP);\n            this.scale = opts.offset_scale === undefined ? 1 : opts.offset_scale;\n            shader_defines.push('OFFSET');\n        }\n        else {\n            this.offset = null;\n            this.scale = null;\n        }\n\n        if (polyline.zoom !== undefined) {\n            this.min_zoom = new WGLBuffer(gl, polyline.zoom, 1, gl.TRIANGLE_STRIP);\n            shader_defines.push('ZOOM');\n        }\n        else {\n            this.min_zoom = null;\n        }\n\n        this.cmap_min = -3.40282347e+38;\n        this.cmap_max = 3.40282347e+38;\n\n        if (polyline.data !== undefined) {\n            // TAS: this needs some cleanup (there's some repated code between here and the contour fills that should be combined?)\n            this.min_zoom = new WGLBuffer(gl, polyline.zoom, 1, gl.TRIANGLE_STRIP);\n            shader_defines.push('DATA');\n\n            const {format: format_nonlin , type: type_nonlin, row_alignment: row_alignment_nonlin} = getGLFormatTypeAlignment(gl, true);\n\n            let tex_image: WGLTextureSpec\n            if (opts.cmap === undefined) {\n                tex_image = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'width': 1, 'height': 1, 'image': new Uint8Array(this.color), 'mag_filter': gl.NEAREST};\n                this.index_map = new Float16Array([0., 1.]);\n            }\n            else {\n                tex_image = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'image': makeTextureImage(opts.cmap), 'mag_filter': gl.NEAREST};\n                this.cmap_min = opts.cmap.levels[0];\n                this.cmap_max = opts.cmap.levels[opts.cmap.levels.length - 1];\n\n                this.index_map = makeIndexMap(opts.cmap);\n            }\n\n            const cmap_nonlin_image = {'format': format_nonlin, 'type': type_nonlin, \n                'width': this.index_map.length, 'height': 1,\n                'image': new Uint16Array(this.index_map.buffer), \n                'mag_filter': gl.LINEAR, 'row_alignment': row_alignment_nonlin,\n            };\n\n            this.cmap_nonlin_texture = new WGLTexture(gl, cmap_nonlin_image);\n    \n            this.line_texture = new WGLTexture(gl, tex_image);\n            this.line_data = new WGLBuffer(gl, polyline['data'], 1, gl.TRIANGLE_STRIP);\n        }\n        else {\n            this.line_texture = null;\n            this.line_data = null;\n            this.index_map = null;\n        }\n\n        this.program = new WGLProgram(gl, polyline_vertex_src, polyline_fragment_src, {define: shader_defines});\n    }\n\n    static async make(gl: WebGLAnyRenderingContext, lines: LineData[], opts?: PolylineCollectionOpts) {\n        const polylines = await layer_worker.makePolyLines(lines);\n        return new PolylineCollection(gl, polylines, opts);\n    }\n\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array, [map_width, map_height]: [number, number], map_zoom: number, map_bearing: number, map_pitch: number) {\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        const attributes: Record<string, WGLBuffer> = {'a_pos': this.vertices, 'a_extrusion': this.extrusion};\n        const uniforms: Record<string, number | number[]> = {\n            'u_matrix': matrix, 'u_line_width': this.width, 'u_map_width': map_width, 'u_map_height': map_height, 'u_map_bearing': map_bearing, 'u_offset': 0\n        };\n        const textures: Record<string, WGLTexture> = {};\n\n        if (this.offset !== null) {\n            attributes['a_offset'] = this.offset;\n            uniforms['u_offset_scale'] = this.scale * (map_height / map_width);\n        }\n\n        if (this.min_zoom !== null) {\n            attributes['a_min_zoom'] = this.min_zoom;\n            uniforms['u_zoom'] = map_zoom;\n        }\n\n        if (this.line_data !== null && this.line_texture !== null) {\n            attributes['a_data'] = this.line_data;\n            textures['u_cmap_sampler'] = this.line_texture;\n            textures['u_cmap_nonlin_sampler'] = this.cmap_nonlin_texture;\n            uniforms['u_cmap_min'] = this.cmap_min;\n            uniforms['u_cmap_max'] = this.cmap_max;\n            uniforms['u_n_index'] = this.index_map.length;\n        }\n        else {\n            uniforms['u_color'] = this.color;\n        }\n\n        this.program.use(attributes, uniforms, textures);\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        this.program.draw();\n\n        this.program.setUniforms({'u_offset': -2});\n        this.program.draw();\n\n        this.program.setUniforms({'u_offset': -1});\n        this.program.draw();\n\n        this.program.setUniforms({'u_offset': 1});\n        this.program.draw();\n    }\n}\n\nexport {PolylineCollection};","import { isWebGL2Ctx, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { LngLat } from \"./Map\";\nimport { Cache, normalizeOptions } from \"./utils\";\n\nimport { WGLBuffer, WGLProgram, WGLTexture } from \"autumn-wgl\";\n\nimport Protobuf from 'pbf';\nimport potpack, {PotpackBox} from \"potpack\";\n\nconst text_vertex_shader_src = require('./glsl/text_vertex.glsl');\nconst text_fragment_shader_src = require('./glsl/text_fragment.glsl');\nconst program_cache = new Cache((gl: WebGLAnyRenderingContext) => new WGLProgram(gl, text_vertex_shader_src, text_fragment_shader_src));\n\nconst PADDING = 3\n\ninterface PBFGlyph {\n    id: number;\n    data: Uint8Array;\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    advance: number;\n}\n\ninterface Glyph {\n    id: number;\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    atlas_i: number;\n    atlas_j: number;\n    advance: number;\n}\n\nfunction parseFontPBF(data: Uint8Array) {\n    const readGlyph = (tag: number, glyph: any, pbf: Protobuf) => {\n        switch (tag) {\n            case 1:\n                glyph.id = pbf.readVarint();\n                break;\n            case 2:\n                glyph.data = pbf.readBytes();\n                break;\n            case 3:\n                glyph.width = pbf.readVarint() + 2 * PADDING;\n                break;\n            case 4:\n                glyph.height = pbf.readVarint() + 2 * PADDING;\n                break;\n            case 5:\n                glyph.left = pbf.readSVarint();\n                break;\n            case 6:\n                glyph.top = pbf.readSVarint();\n                break;\n            case 7:\n                glyph.advance = pbf.readVarint();\n                break;\n        }\n    }\n\n    const readFontStack = (tag: number, glyphs: PBFGlyph[], pbf: Protobuf) => {\n        if (tag == 3) {\n            const glyph = pbf.readMessage(readGlyph, {});\n            glyphs.push(glyph);\n        }\n    }\n\n    const readFontStacks = (tag: number, glyphs: PBFGlyph[], pbf: Protobuf) => {\n        if (tag == 1) {\n            pbf.readMessage(readFontStack, glyphs);\n        }\n    }\n\n    return new Protobuf(data).readFields(readFontStacks, []);\n}\n\ninterface FontAtlas {\n    atlas: Uint8Array;\n    atlas_width: number;\n    atlas_height: number;\n    baseline: number;\n    top: number;\n    glyph_info: Record<number, Glyph>;\n}\n\nfunction createAtlas(pbf_glyphs: PBFGlyph[]): FontAtlas {\n    const pbf_glyphs_filtered = pbf_glyphs.filter(glyph => glyph.data !== undefined);\n\n    const glyph_bins: {glyph: PBFGlyph, bin: PotpackBox}[] = [];\n\n    const bins = pbf_glyphs_filtered.map(glyph => {\n        const bin = {x: 0, y: 0, w: glyph.width, h: glyph.height} as PotpackBox;\n        glyph_bins.push({glyph: glyph, bin: bin});\n\n        return bin;\n    });\n\n    const {w: img_width, h: img_height} = potpack(bins);\n\n    const atlas_data = new Uint8Array(img_width * img_height);\n    const glyphs: Record<number, Glyph> = {}\n    glyph_bins.forEach(glyph_bin => {\n        const {bin, glyph} = glyph_bin;\n\n        glyphs[glyph.id] = {\n            id: glyph.id, width: glyph.width, height: glyph.height, left: glyph.left, top: glyph.top,\n            atlas_i: bin.x, atlas_j: bin.y, advance: glyph.advance\n        };\n\n        for (let i = 0; i < glyph.width; i++) {\n            for (let j = 0; j < glyph.height; j++) {\n                const glyph_idx = i + glyph.width * j;\n                const atlas_idx = (i + bin.x) + img_width * (j + bin.y);\n                atlas_data[atlas_idx] = glyph.data[glyph_idx];\n            }\n        }\n    });\n\n    const glyph_M = glyphs['M'.charCodeAt(0)];\n    const baseline = glyph_M.height - glyph_M.top;\n    const top = -glyph_M.top;\n\n    return {atlas: atlas_data, atlas_width: img_width, atlas_height: img_height, baseline: baseline, top: top, glyph_info: glyphs};\n}\n\nasync function getFontAtlas(url: string) {\n    const resp = await fetch(url);\n    const blob = await resp.blob();\n    const data_buffer = await blob.arrayBuffer();\n\n    // Parse the PBF and get the glyph data\n    const glyphs = parseFontPBF(new Uint8Array(data_buffer));\n\n    // Create an atlas for the glyphs\n    return createAtlas(glyphs);\n}\n\ninterface TextSpec {\n    lat: number;\n    lon: number;\n    text: string;\n    min_zoom?: number;\n}\n\ntype HorizontalAlign = 'left' | 'center' | 'right';\ntype VerticalAlign = 'baseline' | 'middle' | 'top';\n\ninterface TextCollectionOptions {\n    horizontal_align?: HorizontalAlign;\n    vertical_align?: VerticalAlign;\n    font_size?: number;\n    text_color?: [number, number, number];\n    halo_color?: [number, number, number];\n    halo?: boolean;\n}\n\nconst text_collection_opt_defaults: Required<TextCollectionOptions> = {\n    horizontal_align: 'left',\n    vertical_align: 'baseline',\n    font_size: 12,\n    text_color: [0, 0, 0],\n    halo_color: [0, 0, 0],\n    halo: false\n}\n\nclass TextCollection {\n    readonly program: WGLProgram;\n    readonly anchors: WGLBuffer;\n    readonly offsets: WGLBuffer;\n    readonly texcoords: WGLBuffer;\n    readonly texture: WGLTexture;\n\n    readonly opts: Required<TextCollectionOptions>;\n\n    private constructor(gl: WebGLAnyRenderingContext, text_locs: TextSpec[], font_atlas: FontAtlas, opts?: TextCollectionOptions) {\n        this.program = program_cache.getValue(gl);\n\n        this.opts = normalizeOptions(opts, text_collection_opt_defaults);\n        \n        const is_webgl2 = isWebGL2Ctx(gl);\n        const format = is_webgl2 ? gl.R8 : gl.LUMINANCE;\n        const type = gl.UNSIGNED_BYTE;\n        const row_alignment = 1;\n\n        const image = {\n            'format': format, 'type': type, 'width': font_atlas.atlas_width, 'height': font_atlas.atlas_height, \n            'image': font_atlas.atlas, 'row_alignment': row_alignment, 'mag_filter': gl.LINEAR\n        };\n\n        this.texture = new WGLTexture(gl, image);\n\n        const n_verts = text_locs.map(tl => tl.text.length).reduce((a, b) => a + b, 0) * 6;\n\n        const anchor_data = new Float32Array(n_verts * 3);\n        const offset_data = new Float32Array(n_verts * 2);\n        const tc_data = new Float32Array(n_verts * 2);\n\n        let i_anch = 0, i_off = 0, i_tc = 0;\n\n        text_locs.forEach(loc => {\n            const {lat, lon, text} = loc;\n            const min_zoom = loc.min_zoom === undefined ? 0 : loc.min_zoom;\n            const {x: anchor_x, y: anchor_y} = new LngLat(lon, lat).toMercatorCoord();\n            \n            let x_offset = 0;\n            const init_i_off = i_off;\n\n            for (let i = 0; i < text.length; i++) {\n                const glyph_code = text.charCodeAt(i);\n                const glyph_info = font_atlas.glyph_info[glyph_code];\n\n                if (glyph_info === undefined) {\n                    x_offset += 7;\n                    continue;\n                }\n\n                x_offset += glyph_info.left;\n\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                \n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = font_atlas.baseline + glyph_info.top;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = font_atlas.baseline + glyph_info.top;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = font_atlas.baseline + glyph_info.top;\n                \n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n\n                x_offset += glyph_info.advance - glyph_info.left;\n            }\n\n            if (opts.horizontal_align == 'center') {\n                for (let i = init_i_off; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= x_offset / 2;\n                }\n            }\n            else if (opts.horizontal_align == 'right') {\n                for (let i = init_i_off; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= x_offset;\n                }\n            }\n\n            if (opts.vertical_align == 'top') {\n                for (let i = init_i_off + 1; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (font_atlas.baseline - font_atlas.top);\n                }\n            }\n            else if (opts.vertical_align == 'middle') {\n                for (let i = init_i_off + 1; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (font_atlas.baseline - font_atlas.top) / 2;\n                }\n            }\n        });\n\n        this.anchors = new WGLBuffer(gl, anchor_data, 3, gl.TRIANGLE_STRIP);\n        this.offsets = new WGLBuffer(gl, offset_data, 2, gl.TRIANGLE_STRIP);\n        this.texcoords = new WGLBuffer(gl, tc_data, 2, gl.TRIANGLE_STRIP);\n    }\n\n    static async make(gl: WebGLAnyRenderingContext, text_locs: TextSpec[], fontstack_url: string, opts?: TextCollectionOptions) {\n        const atlas = await getFontAtlas(fontstack_url);\n        return new TextCollection(gl, text_locs, atlas, opts);\n    }\n\n    render(gl: WebGLAnyRenderingContext, matrix: number[], [map_width, map_height]: [number, number], map_zoom: number) {\n        const uniforms: Record<string, any> = {\n            'u_matrix': matrix, 'u_map_width': map_width, 'u_map_height': map_height, 'u_map_zoom': map_zoom, 'u_font_size': this.opts.font_size,\n            'u_text_color': this.opts.text_color, 'u_halo_color': this.opts.halo_color, 'u_offset': 0\n        }\n\n        uniforms['u_is_halo'] = this.opts.halo ? 1 : 0;\n\n        this.program.use(\n            {'a_pos': this.anchors, 'a_offset': this.offsets, 'a_tex_coord': this.texcoords},\n            uniforms,\n            {'u_sdf_sampler': this.texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n\n        this.program.setUniforms({'u_offset': -2, 'u_is_halo': this.opts.halo ? 1 : 0});\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n\n        this.program.setUniforms({'u_offset': -1, 'u_is_halo': this.opts.halo ? 1 : 0});\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n\n        this.program.setUniforms({'u_offset': 1, 'u_is_halo': this.opts.halo ? 1 : 0});\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n    }\n}\n\nexport {TextCollection};\nexport type {TextSpec, TextCollectionOptions};","\nexport default function potpack(boxes) {\n\n    // calculate total box area and maximum box width\n    let area = 0;\n    let maxWidth = 0;\n\n    for (const box of boxes) {\n        area += box.w * box.h;\n        maxWidth = Math.max(maxWidth, box.w);\n    }\n\n    // sort the boxes for insertion by height, descending\n    boxes.sort((a, b) => b.h - a.h);\n\n    // aim for a squarish resulting container,\n    // slightly adjusted for sub-100% space utilization\n    const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);\n\n    // start with a single empty space, unbounded at the bottom\n    const spaces = [{x: 0, y: 0, w: startWidth, h: Infinity}];\n\n    let width = 0;\n    let height = 0;\n\n    for (const box of boxes) {\n        // look through spaces backwards so that we check smaller spaces first\n        for (let i = spaces.length - 1; i >= 0; i--) {\n            const space = spaces[i];\n\n            // look for empty spaces that can accommodate the current box\n            if (box.w > space.w || box.h > space.h) continue;\n\n            // found the space; add the box to its top-left corner\n            // |-------|-------|\n            // |  box  |       |\n            // |_______|       |\n            // |         space |\n            // |_______________|\n            box.x = space.x;\n            box.y = space.y;\n\n            height = Math.max(height, box.y + box.h);\n            width = Math.max(width, box.x + box.w);\n\n            if (box.w === space.w && box.h === space.h) {\n                // space matches the box exactly; remove it\n                const last = spaces.pop();\n                if (i < spaces.length) spaces[i] = last;\n\n            } else if (box.h === space.h) {\n                // space matches the box height; update it accordingly\n                // |-------|---------------|\n                // |  box  | updated space |\n                // |_______|_______________|\n                space.x += box.w;\n                space.w -= box.w;\n\n            } else if (box.w === space.w) {\n                // space matches the box width; update it accordingly\n                // |---------------|\n                // |      box      |\n                // |_______________|\n                // | updated space |\n                // |_______________|\n                space.y += box.h;\n                space.h -= box.h;\n\n            } else {\n                // otherwise the box splits the space into two spaces\n                // |-------|-----------|\n                // |  box  | new space |\n                // |_______|___________|\n                // | updated space     |\n                // |___________________|\n                spaces.push({\n                    x: space.x + box.w,\n                    y: space.y,\n                    w: space.w - box.w,\n                    h: box.h\n                });\n                space.y += box.h;\n                space.h -= box.h;\n            }\n            break;\n        }\n    }\n\n    return {\n        w: width, // container width\n        h: height, // container height\n        fill: (area / (width * height)) || 0 // space utilization\n    };\n}\n","\nimport { LineData, TypedArray, WebGLAnyRenderingContext} from './AutumnTypes';\nimport { LngLat, MapLikeType } from './Map';\nimport { PlotComponent, getGLFormatTypeAlignment } from './PlotComponent';\nimport { RawScalarField } from './RawField';\nimport { PolylineCollection } from './PolylineCollection';\nimport { TextCollection, TextCollectionOptions, TextSpec } from './TextCollection';\nimport { WGLTexture } from 'autumn-wgl';\n\nimport { hex2rgb, normalizeOptions } from './utils';\nimport { kdTree } from 'kd-tree-javascript';\n\ninterface ContourOptions {\n    /** \n     * The color of the contours as a hex color string \n     * @default '#000000'\n     */\n    color?: string;\n\n    /** \n     * The contour interval for drawing contours at regular intervals\n     * @default 1\n     */\n    interval?: number;\n\n    /**\n     * A list of arbitrary levels (up to 40) to contour. This overrides the `interval` option.\n     * @default Draw contours at regular intervals given by the `interval` option.\n     */\n    levels?: number[];\n}\n\ninterface ContourGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n}\n\n/** \n * A field of contoured data.\n * @example\n * // Create a contoured height field, with black contours every 30 m (assuming the height field is in \n * // meters).\n * const contours = new Contour(height_field, {color: '#000000', interval: 30});\n */\nclass Contour<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType>;\n    public readonly color: string;\n    public readonly interval: number;\n    public readonly levels: number[];\n\n    private gl_elems: ContourGLElems<MapType> | null;\n    private contours: PolylineCollection | null;\n\n    /**\n     * Create a contoured field\n     * @param field - The field to contour\n     * @param opts  - Options for creating the contours\n     */\n    constructor(field: RawScalarField<ArrayType>, opts: ContourOptions) {\n        super();\n\n        this.field = field;\n\n        this.interval = opts.interval || 1;\n        this.levels = opts.levels || [];\n\n        this.color = opts.color || '#000000';\n\n        this.gl_elems = null;\n        this.contours = null;\n    }\n\n    /**\n     * Update the data displayed as contours\n     * @param field - The new field to contour\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        this.field = field;\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n\n        const contour_data = await this.getContours();\n        const line_data = Object.values(contour_data).flat().map(c => {\n            return {vertices: c} as LineData;\n        });\n\n        this.contours = await PolylineCollection.make(gl, line_data, {line_width: 2, color: this.color});\n        this.gl_elems.map.triggerRepaint();\n    }\n\n    public async getContours() {\n        return await this.field.getContours({interval: this.interval, levels: this.levels});\n    }\n\n    /**\n     * @internal\n     * Add the contours to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n\n        this.gl_elems = {\n            gl: gl, map: map\n        };\n\n        await this.updateField(this.field);\n    }\n\n    /**\n     * @internal\n     * Render the contours\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.contours === null) return;\n        const gl_elems = this.gl_elems;\n\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        this.contours.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n    }\n}\n\ninterface ContourLabelGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n}\n\ninterface ContourLabelOptions {\n    /**\n     * Number of decimal places to use in the contour labels\n     * @default 0\n     */\n    n_decimal_places?: number;\n\n    /**\n     * Font face to use for the contour labels\n     * @default 'Trebuchet MS'\n     */\n    font_face?: string;\n\n    /**\n     * Font size in points to use for the contour labels\n     * @default 12\n     */\n    font_size?: number;\n\n    /**\n     * URL template to use in retrieving the font data for the labels. The default is to use the template from the map style.\n     */\n    font_url_template?: string;\n\n    /**\n     * Text color for the contour labels\n     * @default '#000000'\n     */\n    text_color?: string;\n\n    /**\n     * Halo (outline) color for the contour labels\n     * @default '#000000'\n     */\n    halo_color?: string;\n\n    /**\n     * Whether to draw the halo (outline) on the contour labels\n     * @default false\n     */\n    halo?: boolean;\n}\n\nconst contour_label_opt_defaults: Required<ContourLabelOptions> = {\n    n_decimal_places: 0,\n    font_face: 'Trebuchet MS',\n    font_size: 12,\n    font_url_template: '',\n    text_color: '#000000',\n    halo_color: '#000000',\n    halo: false\n}\n\nclass ContourLabels<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private readonly contours: Contour<ArrayType, MapType>;\n    private gl_elems: ContourLabelGLElems<MapType> | null;\n    private text_collection: TextCollection | null;\n    private readonly opts: Required<ContourLabelOptions>;\n\n    constructor(contours: Contour<ArrayType, MapType>, opts?: ContourLabelOptions) {\n        super();\n\n        this.opts = normalizeOptions(opts, contour_label_opt_defaults);\n\n        this.contours = contours;\n        this.text_collection = null;\n        this.gl_elems = null;\n    }\n\n    /**\n     * Update contour labels when the field for the associated Contour object has been changed.\n     */\n    public async updateField() {\n        if (this.gl_elems === null) return;\n\n        const map = this.gl_elems.map;\n        const gl = this.gl_elems.gl;\n\n        const map_style = map.getStyle();\n\n        const font_url_template = this.opts.font_url_template == '' ? map_style.glyphs : this.opts.font_url_template;\n        const font_url = font_url_template.replace('{range}', '0-255').replace('{fontstack}', this.opts.font_face);\n\n        const label_pos: TextSpec[] = [];\n\n        const contour_data = await this.contours.getContours();\n        const contour_levels = Object.keys(contour_data).map(parseFloat);\n        contour_levels.sort((a, b) => a - b);\n\n        const map_max_zoom = map.getMaxZoom();\n        const contour_label_spacing = 0.01 * Math.pow(2, 7 - map_max_zoom);\n        let min_label_lat: number = null, max_label_lat: number = null, min_label_lon: number = null, max_label_lon: number = null;\n\n        Object.entries(contour_data).forEach(([level, contours]) => {\n            const icntr = (parseFloat(level) - contour_levels[0]);\n            const level_str = level.toString();\n\n            contours.forEach(contour => {\n                const c_map = contour.map(v => {\n                    const v_ll = new LngLat(...v).toMercatorCoord();\n                    return [v_ll.x, v_ll.y] as [number, number];\n                });\n        \n                const dist: number[] = [];\n                c_map.forEach((v, i) => {\n                    if (i == 0) {\n                        dist.push(0);\n                    }\n                    else {\n                        const v_last = c_map[i - 1];\n                        const this_dist = Math.hypot(v_last[0] - v[0], v_last[1] - v[1]);\n                        dist.push(dist[i - 1] + this_dist);\n                    }\n                });\n\n                let n_labels_placed = 0;\n                for (let idist = 1; idist < dist.length; idist++) {\n                    const target_dist = contour_label_spacing * (n_labels_placed + (icntr / 2) % 1);\n                    if (dist[idist - 1] <= target_dist && target_dist < dist[idist]) {\n                        const pt1 = contour[idist - 1];\n                        const pt2 = contour[idist];\n\n                        const alpha = (target_dist - dist[idist - 1]) / (dist[idist] - dist[idist - 1]);\n                        const pt_lon = (1 - alpha) * pt1[0] + alpha * pt2[0];\n                        const pt_lat = (1 - alpha) * pt1[1] + alpha * pt2[1];\n\n                        if (min_label_lon === null || pt_lon < min_label_lon) min_label_lon = pt_lon;\n                        if (max_label_lon === null || pt_lon > max_label_lon) max_label_lon = pt_lon;\n                        if (min_label_lat === null || pt_lat < min_label_lat) min_label_lat = pt_lat;\n                        if (max_label_lat === null || pt_lat > max_label_lat) max_label_lat = pt_lat;\n\n                        label_pos.push({lon: pt_lon, lat: pt_lat, min_zoom: map_max_zoom, text: level_str});\n                        n_labels_placed++;\n                    }\n                }\n            });\n        });\n\n        const tree = new kdTree(label_pos, (a, b) => Math.hypot(a.lon - b.lon, a.lat - b.lat), ['lon', 'lat']);\n\n        const {x: min_label_x, y: max_label_y} = new LngLat(min_label_lon, min_label_lat).toMercatorCoord();\n        const {x: max_label_x, y: min_label_y} = new LngLat(max_label_lon, max_label_lat).toMercatorCoord();\n        const thin_grid_width = max_label_x - min_label_x;\n        const thin_grid_height = max_label_y - min_label_y;\n        const ni_thin_grid = Math.round(4 * thin_grid_width / contour_label_spacing);\n        const nj_thin_grid = Math.round(4 * thin_grid_height / contour_label_spacing);\n        const thin_grid_xs = [];\n        const thin_grid_ys = [];\n\n        for (let idx = 0; idx < ni_thin_grid; idx++) {\n            thin_grid_xs.push(min_label_x + (idx / ni_thin_grid) * thin_grid_width);\n        }\n\n        for (let jdy = 0; jdy < nj_thin_grid; jdy++) {\n            thin_grid_ys.push(min_label_y + (jdy / nj_thin_grid) * thin_grid_height);\n        }\n\n        let skip = 1;\n        for (let zoom = map_max_zoom - 1; zoom >= 0; zoom--) {        \n            for (let idx = 0; idx < ni_thin_grid; idx += skip) {\n                for (let jdy = 0; jdy < nj_thin_grid; jdy += skip) {\n                    const grid_x = thin_grid_xs[idx];\n                    const grid_y = thin_grid_ys[jdy];\n                    const ll = LngLat.fromMercatorCoord(grid_x, grid_y);\n\n                    const [label, dist] = tree.nearest({lon: ll.lng, lat: ll.lat, min_zoom: 0, text: \"\"}, 1)[0];\n                    label.min_zoom = zoom;\n                }\n            }\n\n            skip *= 2;\n        }\n\n        const tc_opts: TextCollectionOptions = {\n            horizontal_align: 'center', vertical_align: 'middle', font_size: this.opts.font_size,\n            halo: this.opts.halo, \n            text_color: hex2rgb(this.opts.text_color), halo_color: hex2rgb(this.opts.halo_color),\n        };\n\n        this.text_collection = await TextCollection.make(gl, label_pos, font_url, tc_opts);\n        map.triggerRepaint();\n    }\n\n    /** \n     * @internal \n     * Add the contour labels to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.gl_elems = {\n            gl: gl, map: map,\n        }\n\n        this.updateField();\n    }\n\n    /** \n     * @internal \n     * Render the contour labels\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[]) {\n        if (this.gl_elems === null || this.text_collection === null) return;\n        const gl_elems = this.gl_elems;\n\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const map_zoom = gl_elems.map.getZoom();\n\n        this.text_collection.render(gl, matrix, [map_width, map_height], map_zoom);\n    }\n}\n\nexport default Contour;\nexport {ContourLabels};\nexport type {ContourOptions, ContourLabelOptions};","\nimport { PlotComponent, getGLFormatTypeAlignment } from './PlotComponent';\nimport { ColorMap, makeIndexMap, makeTextureImage } from './Colormap';\nimport { WGLBuffer, WGLProgram, WGLTexture } from 'autumn-wgl';\nimport { RawScalarField } from './RawField';\nimport { MapLikeType } from './Map';\nimport { TypedArray, WebGLAnyRenderingContext } from './AutumnTypes';\nimport { Float16Array } from '@petamoriken/float16';\nimport { hex2rgb } from './utils';\n\nconst contourfill_vertex_shader_src = require('./glsl/contourfill_vertex.glsl');\nconst contourfill_fragment_shader_src = require('./glsl/contourfill_fragment.glsl');\n\ninterface ContourFillOptions {\n    /** The color map to use when creating the fills */\n    cmap: ColorMap;\n\n    /** \n     * The opacity for the filled contours \n     * @default 1\n     */\n    opacity?: number;\n}\n\ninterface RasterOptions {\n    /** The color map to use when creating the raster plot */\n    cmap: ColorMap;\n\n    /** \n     * The opacity for the raster plot\n     * @default 1\n     */\n    opacity?: number;\n}\n\ninterface PlotComponentFillGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n    program: WGLProgram;\n    vertices: WGLBuffer;\n\n    texcoords: WGLBuffer;\n    cmap_texture: WGLTexture;\n    cmap_nonlin_texture: WGLTexture;\n}\n\nclass PlotComponentFill<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType>;\n    public readonly cmap: ColorMap;\n    public readonly opacity: number;\n\n    private readonly cmap_image: HTMLCanvasElement;\n    private readonly index_map: Float16Array;\n\n    private gl_elems: PlotComponentFillGLElems<MapType> | null;\n    private fill_texture: WGLTexture | null;\n    protected image_mag_filter: number | null;\n    protected cmap_mag_filter: number | null;\n\n    constructor(field: RawScalarField<ArrayType>, opts: ContourFillOptions) {\n        super();\n\n        this.field = field;\n        this.cmap = opts.cmap;\n        this.opacity = opts.opacity || 1.;\n\n        this.cmap_image = makeTextureImage(this.cmap);\n        this.index_map = makeIndexMap(this.cmap);\n\n        this.gl_elems = null;\n        this.fill_texture = null;\n        this.image_mag_filter = null;\n        this.cmap_mag_filter = null;\n    }\n\n    public async updateField(field: RawScalarField<ArrayType>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n        const map = this.gl_elems.map;\n        \n        const tex_data = this.field.getTextureData();\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, !(tex_data instanceof Float32Array));\n    \n        const fill_image = {'format': format, 'type': type,\n            'width': this.field.grid.ni, 'height': this.field.grid.nj, 'image': tex_data,\n            'mag_filter': this.image_mag_filter, 'row_alignment': row_alignment,\n        };\n\n        if (this.fill_texture === null) {\n            this.fill_texture = new WGLTexture(gl, fill_image);\n        }\n        else {\n            this.fill_texture.setImageData(fill_image);\n        }\n\n        map.triggerRepaint();\n    }\n\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        // Basic procedure for the filled contours inspired by https://blog.mbq.me/webgl-weather-globe/\n        \n        if (this.image_mag_filter === null || this.cmap_mag_filter === null) {\n            throw `Implement magnification filtes in a subclass`;\n        }\n        \n        const program = new WGLProgram(gl, contourfill_vertex_shader_src, contourfill_fragment_shader_src);\n\n        const {vertices: verts_buf, texcoords: tex_coords_buf} = await this.field.grid.getWGLBuffers(gl);\n        const vertices = verts_buf;\n        const texcoords = tex_coords_buf;\n\n        const cmap_image = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'image': this.cmap_image, 'mag_filter': this.cmap_mag_filter};\n        const cmap_texture = new WGLTexture(gl, cmap_image);\n\n        const {format: format_nonlin , type: type_nonlin, row_alignment: row_alignment_nonlin} = getGLFormatTypeAlignment(gl, true);\n\n        const cmap_nonlin_image = {'format': format_nonlin, 'type': type_nonlin, \n            'width': this.index_map.length, 'height': 1,\n            'image': new Uint16Array(this.index_map.buffer), \n            'mag_filter': gl.LINEAR, 'row_alignment': row_alignment_nonlin,\n        };\n\n        const cmap_nonlin_texture = new WGLTexture(gl, cmap_nonlin_image);\n        this.gl_elems = {\n            gl: gl, map: map, program: program, vertices: vertices, texcoords: texcoords, \n            cmap_texture: cmap_texture, cmap_nonlin_texture: cmap_nonlin_texture,\n        };\n\n        this.updateField(this.field);\n    }\n\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.fill_texture === null) return;\n        const gl_elems = this.gl_elems;\n\n        if (matrix instanceof Float32Array) \n            matrix = [...matrix];\n\n        const underflow_color = this.cmap.underflow_color === null ? [0, 0, 0, 0] : hex2rgb(this.cmap.underflow_color.color).concat(this.cmap.underflow_color.opacity);\n        const overflow_color = this.cmap.overflow_color === null ? [0, 0, 0, 0] : hex2rgb(this.cmap.overflow_color.color).concat(this.cmap.overflow_color.opacity);\n\n        gl_elems.program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_cmap_min': this.cmap.levels[0], 'u_cmap_max': this.cmap.levels[this.cmap.levels.length - 1], 'u_matrix': matrix, 'u_opacity': this.opacity,\n             'u_n_index': this.index_map.length, 'u_underflow_color': underflow_color, 'u_overflow_color': overflow_color, 'u_offset': 0},\n            {'u_fill_sampler': this.fill_texture, 'u_cmap_sampler': gl_elems.cmap_texture, 'u_cmap_nonlin_sampler': gl_elems.cmap_nonlin_texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -2});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -1});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': 1});\n        gl_elems.program.draw();\n    }\n}\n\n/** \n * A raster (i.e. pixel) plot \n * @example\n * // Create a raster plot with the provided color map\n * const raster = new Raster(wind_speed_field, {cmap: color_map});\n */\nclass Raster<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponentFill<ArrayType, MapType> {\n\n    /**\n     * Create a raster plot\n     * @param field - The field to create the raster plot from\n     * @param opts  - Options for creating the raster plot\n     */\n    constructor(field: RawScalarField<ArrayType>, opts: RasterOptions) {\n        super(field, opts);\n    }\n\n    /**\n     * Update the data displayed as a raster plot\n     * @param field - The new field to display as a raster plot\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        await super.updateField(field);\n    }\n\n    /**\n     * @internal\n     * Add the raster plot to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.image_mag_filter = gl.NEAREST;\n        this.cmap_mag_filter = gl.LINEAR;\n        await super.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render the raster plot\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        super.render(gl, matrix);\n    }\n}\n\n/** \n * A filled contoured field \n * @example\n * // Create a field of filled contours with the provided color map\n * const fill = new ContourFill(wind_speed_field, {cmap: color_map});\n */\nclass ContourFill<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponentFill<ArrayType, MapType> {\n\n    /**\n     * Create a filled contoured field\n     * @param field - The field to create filled contours from\n     * @param opts  - Options for creating the filled contours\n     */\n    constructor(field: RawScalarField<ArrayType>, opts: ContourFillOptions) {\n        super(field, opts);\n    }\n\n    /**\n     * Update the data displayed as filled contours\n     * @param field - The new field to display as filled contours\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        await super.updateField(field);\n    }\n\n    /**\n     * @internal\n     * Add the filled contours to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.image_mag_filter = gl.LINEAR;\n        this.cmap_mag_filter = gl.NEAREST;\n        await super.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render the filled contours\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        super.render(gl, matrix);\n    }\n}\n\nexport {ContourFill, Raster};\nexport type {ContourFillOptions, RasterOptions};","\nimport { BillboardSpec, TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { getGLFormatTypeAlignment } from \"./PlotComponent\";\nimport { RawVectorField } from \"./RawField\";\nimport { WGLBuffer, WGLProgram, WGLTexture, WGLTextureSpec } from \"autumn-wgl\";\n\nconst billboard_vertex_shader_src = require('./glsl/billboard_vertex.glsl');\nconst billboard_fragment_shader_src = require('./glsl/billboard_fragment.glsl');\n\nclass BillboardCollectionGLElems {\n    gl: WebGLAnyRenderingContext;\n    program: WGLProgram;\n    vertices: WGLBuffer;\n    texcoords: WGLBuffer;\n    texture: WGLTexture;\n    proj_rot_texture: WGLTexture;\n}\n\nclass BillboardCollection<ArrayType extends TypedArray> {\n    private field: RawVectorField<ArrayType>;\n    public readonly spec: BillboardSpec;\n    public readonly color: [number, number, number];\n    public readonly size_multiplier: number;\n    public readonly thin_fac: number;\n    public readonly max_zoom: number;\n    public readonly billboard_image: WGLTextureSpec;\n\n    private gl_elems: BillboardCollectionGLElems | null;\n    private wind_textures: {u: WGLTexture, v: WGLTexture} | null;\n    private readonly trim_inaccessible: number;\n    private show_field: boolean;\n\n    constructor(field: RawVectorField<ArrayType>, thin_fac: number, max_zoom: number, \n                billboard_image: WGLTextureSpec, billboard_spec: BillboardSpec, billboard_color: [number, number, number], billboard_size_mult: number) {\n\n        this.field = field;\n        this.spec = billboard_spec;\n        this.color = billboard_color;\n        this.size_multiplier = billboard_size_mult;\n        this.thin_fac = thin_fac;\n        this.max_zoom = max_zoom;\n        this.billboard_image = billboard_image;\n        this.gl_elems = null;\n        this.wind_textures = null;\n\n        const n_density_tiers = Math.log2(thin_fac);\n        const n_inaccessible_tiers = Math.max(n_density_tiers + 1 - max_zoom, 0);\n        this.trim_inaccessible = Math.pow(2, n_inaccessible_tiers);\n        this.show_field = true;\n    }\n\n    public updateField(field: RawVectorField<ArrayType>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n        const data = this.field.getThinnedField(this.trim_inaccessible, this.trim_inaccessible);\n\n        const {u: u_thin, v: v_thin} = data.getTextureData();\n        this.show_field = u_thin !== null;\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, !(u_thin instanceof Float32Array));\n\n        const u_image = {'format': format, 'type': type,\n            'width': data.grid.ni, 'height': data.grid.nj, 'image': u_thin,\n            'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n        };\n\n        const v_image = {'format': format, 'type': type,\n            'width': data.grid.ni, 'height': data.grid.nj, 'image': v_thin,\n            'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n        };\n\n        if (this.wind_textures === null) {\n            this.wind_textures = {u: new WGLTexture(gl, u_image), v: new WGLTexture(gl, v_image)};\n        }\n        else {\n            this.wind_textures.u.setImageData(u_image);\n            this.wind_textures.v.setImageData(v_image);\n        }\n    }\n\n    public async setup(gl: WebGLAnyRenderingContext) {\n        const program = new WGLProgram(gl, billboard_vertex_shader_src, billboard_fragment_shader_src);\n\n        const thinned_field = this.field.getThinnedField(this.trim_inaccessible, this.trim_inaccessible);\n        const {vertices, texcoords} = await thinned_field.grid.getWGLBillboardBuffers(gl, this.thin_fac / this.trim_inaccessible, this.max_zoom);\n        const {rotation: proj_rotation_tex} = thinned_field.grid.getVectorRotationTexture(gl);\n\n        const texture = new WGLTexture(gl, this.billboard_image);\n\n        this.gl_elems = {gl: gl, program: program, vertices: vertices, texcoords: texcoords, texture: texture, proj_rot_texture: proj_rotation_tex};\n    }\n\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array, [map_width, map_height]: [number, number], map_zoom: number, map_bearing: number, map_pitch: number) {\n        if (this.gl_elems === null || this.wind_textures === null || !this.show_field) return;\n\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        const gl_elems = this.gl_elems;\n\n        const bb_size = this.spec.BB_HEIGHT * (map_height / map_width) * this.size_multiplier;\n        const bb_width = this.spec.BB_WIDTH / this.spec.BB_TEX_WIDTH;\n        const bb_height = this.spec.BB_HEIGHT / this.spec.BB_TEX_HEIGHT;\n\n        gl_elems.program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_bb_size': bb_size, 'u_bb_width': bb_width, 'u_bb_height': bb_height,\n             'u_bb_mag_bin_size': this.spec.BB_MAG_BIN_SIZE, 'u_bb_mag_wrap': this.spec.BB_MAG_WRAP, 'u_offset': 0,\n             'u_bb_color': this.color, 'u_matrix': matrix, 'u_map_aspect': map_height / map_width, 'u_zoom': map_zoom, 'u_map_bearing': map_bearing},\n            {'u_sampler': gl_elems.texture, 'u_u_sampler': this.wind_textures.u, 'u_v_sampler': this.wind_textures.v, 'u_rot_sampler': gl_elems.proj_rot_texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -2});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -1});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': 1});\n        gl_elems.program.draw();\n    }\n}\n\nexport {BillboardCollection};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport { BillboardCollection } from './BillboardCollection';\nimport { hex2rgba } from './utils';\nimport { RawVectorField } from \"./RawField\";\nimport { MapLikeType } from \"./Map\";\nimport { TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\n\nconst BARB_DIMS = {\n    BB_WIDTH: 85,\n    BB_HEIGHT: 256,\n    BB_TEX_WIDTH: 1024,\n    BB_TEX_HEIGHT: 1024,\n    BB_MAG_MAX: 235,\n    BB_MAG_WRAP: 60,\n    BB_MAG_BIN_SIZE: 5,\n}\n\nfunction _createBarbTexture() : HTMLCanvasElement {\n    let canvas = document.createElement('canvas');\n\n    canvas.width = BARB_DIMS.BB_TEX_WIDTH;\n    canvas.height = BARB_DIMS.BB_TEX_HEIGHT;\n    \n    function drawWindBarb(ctx: CanvasRenderingContext2D, tipx: number, tipy: number, mag: number) : void {\n        const elem_full_size = BARB_DIMS.BB_WIDTH / 2 - 4;\n        const elem_spacing = elem_full_size / 2;\n        \n        if (mag < 2.5) {\n            ctx.beginPath();\n            ctx.arc(tipx, tipy, elem_full_size / 2, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        else {\n            let elem_pos = 0;\n            let mag_countdown = mag;\n\n            let staff_length = 0;\n            const n_flags = Math.floor((mag_countdown + 2.5) / 50)\n            staff_length += n_flags * elem_full_size / 2 + elem_spacing \n                                   + (n_flags - 1) * elem_spacing / 2;\n            mag_countdown -= n_flags * 50;\n            const n_full_barbs = Math.floor((mag_countdown + 2.5) / 10)\n            staff_length += n_full_barbs * elem_spacing;\n            mag_countdown -= n_full_barbs * 10;\n            const n_half_barbs = Math.floor((mag_countdown + 2.5) / 5);\n            staff_length += n_half_barbs * elem_spacing;\n            \n            if (mag < 7.5) {\n                staff_length += elem_spacing;\n            }\n            \n            staff_length = Math.max(120, staff_length);\n            \n            // staff\n            ctx.beginPath();\n            ctx.moveTo(tipx, tipy);\n            ctx.lineTo(tipx, tipy + staff_length);\n\n            mag_countdown = mag;\n\n            elem_pos = tipy + staff_length;\n            let last_was_flag = false;\n            let first_elem = true;\n        \n            while (mag_countdown > 47.5) {\n                if (last_was_flag) elem_pos += elem_spacing / 2;\n                // flag\n                if (!first_elem) {\n                    ctx.moveTo(tipx, elem_pos);\n                }\n                ctx.lineTo(tipx - elem_full_size, elem_pos);\n                ctx.lineTo(tipx, elem_pos - elem_full_size / 2)\n\n                elem_pos -= elem_full_size / 2 + elem_spacing;\n                mag_countdown -= 50;\n                last_was_flag = true;\n                first_elem = false;\n            }\n        \n            while (mag_countdown > 7.5) {\n                // full barb\n                if (!first_elem) {\n                    ctx.moveTo(tipx, elem_pos);\n                }\n                ctx.lineTo(tipx - elem_full_size, elem_pos + elem_full_size / 2);\n            \n                elem_pos -= elem_spacing;\n                mag_countdown -= 10;\n                first_elem = false;\n            }\n            \n            if (mag < 7.5) {\n                elem_pos -= elem_spacing;\n            }\n        \n            while (mag_countdown > 2.5) {\n                // half barb\n                ctx.moveTo(tipx, elem_pos);\n                ctx.lineTo(tipx - elem_full_size / 2, elem_pos + elem_full_size / 4);\n                mag_countdown -= 5;\n            }\n\n            ctx.stroke();\n        }\n    }\n    \n    let ctx = canvas.getContext('2d');\n    if (ctx === null) {\n        throw \"Could not get rendering context for the wind barb canvas\";\n    }\n\n    ctx.lineWidth = 8;\n    ctx.miterLimit = 4;\n    \n    for (let ibarb = 0; ibarb <= BARB_DIMS.BB_MAG_MAX; ibarb += BARB_DIMS.BB_MAG_BIN_SIZE) {\n        const x_pos = (ibarb % BARB_DIMS.BB_MAG_WRAP) / BARB_DIMS.BB_MAG_BIN_SIZE * BARB_DIMS.BB_WIDTH + BARB_DIMS.BB_WIDTH / 2;\n        const y_pos = Math.floor(ibarb / BARB_DIMS.BB_MAG_WRAP) * BARB_DIMS.BB_HEIGHT + BARB_DIMS.BB_WIDTH / 2;\n        drawWindBarb(ctx, x_pos, y_pos, ibarb);\n    }\n\n    return canvas;\n}\n\nlet BARB_TEXTURE: HTMLCanvasElement | null = null;\n\ninterface BarbsOptions {\n    /** \n     * The color to use for the barbs as a hex color string;.\n     * @default '#000000'\n     */\n    color?: string;\n\n    /** \n     * How much to thin the barbs at zoom level 1 on the map. This effectively means to plot every `n`th barb in the i and j directions, where `n` = \n     * `thin_fac`. `thin_fac` should be a power of 2. \n     * @default 1\n     */\n    thin_fac?: number;\n}\n\ninterface BarbsGLElems<ArrayType extends TypedArray, MapType extends MapLikeType> {\n    map: MapType;\n    barb_billboards: BillboardCollection<ArrayType>;\n}\n\n/** \n * A class representing a field of wind barbs. The barbs are automatically thinned based on the zoom level on the map; the user only has to provide a\n * thinning factor at zoom level 1.\n * @example\n * // Create a barb field with black barbs and plotting every 16th wind barb in both i and j at zoom level 1\n * const vector_field = new RawVectorField(grid, u_data, v_data);\n * const barbs = new Barbs(vector_field, {color: '#000000', thin_fac: 16});\n */\nclass Barbs<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    /** The vector field */\n    private fields: RawVectorField<ArrayType>;\n    public readonly color: [number, number, number];\n    public readonly thin_fac: number;\n\n    private gl_elems: BarbsGLElems<ArrayType, MapType> | null;\n\n    /**\n     * Create a field of wind barbs\n     * @param fields - The vector field to plot as barbs\n     * @param opts   - Options for creating the wind barbs\n     */\n    constructor(fields: RawVectorField<ArrayType>, opts: BarbsOptions) {\n        super();\n\n        this.fields = fields;\n\n        const color = hex2rgba(opts.color || '#000000');\n        this.color = [color[0], color[1], color[2]];\n        this.thin_fac = opts.thin_fac || 1;\n\n        this.gl_elems = null;\n    }\n\n    /**\n     * Update the field displayed as barbs\n     * @param fields - The new field to display as barbs\n     */\n    public async updateField(fields: RawVectorField<ArrayType>) {\n        this.fields = fields;\n        if (this.gl_elems === null) return;\n        this.gl_elems.barb_billboards.updateField(fields);\n        this.gl_elems.map.triggerRepaint();\n    }\n\n    /**\n     * @internal \n     * Add the barb field to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        gl.getExtension('OES_texture_float');\n        gl.getExtension('OES_texture_float_linear');\n        \n        const map_max_zoom = map.getMaxZoom();\n\n        if (BARB_TEXTURE === null) {\n            BARB_TEXTURE = _createBarbTexture();\n        }\n\n        const barb_image = {format: gl.RGBA, type: gl.UNSIGNED_BYTE, image: BARB_TEXTURE, mag_filter: gl.NEAREST};\n\n        const barb_billboards = new BillboardCollection(this.fields, this.thin_fac, map_max_zoom, barb_image, \n            BARB_DIMS, this.color, 0.1);\n        await barb_billboards.setup(gl);\n\n        this.gl_elems = {\n            map: map, barb_billboards: barb_billboards\n        }\n\n        this.updateField(this.fields);\n    }\n\n    /**\n     * @internal \n     * Render the barb field\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null) return;\n        const gl_elems = this.gl_elems\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        gl_elems.barb_billboards.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n    }\n}\n\nexport default Barbs;\nexport type {BarbsOptions};","\nimport { TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { MapLikeType } from \"./Map\";\nimport { PlotComponent, getGLFormatTypeAlignment } from \"./PlotComponent\";\nimport { RawScalarField } from \"./RawField\";\nimport { hex2rgba } from \"./utils\";\nimport { WGLBuffer, WGLProgram, WGLTexture } from \"autumn-wgl\";\n\nconst paintball_vertex_shader_src = require('./glsl/paintball_vertex.glsl');\nconst paintball_fragment_shader_src = require('./glsl/paintball_fragment.glsl');\n\ninterface PaintballOptions {\n    /**\n     * The list of colors (as hex strings) to use for each member in the paintball plot. The first color corresponds to member 1, the second to member 2, etc.\n     */\n    colors?: string[];\n\n    /**\n     * The opacity of the paintball plot\n     * @default 1\n     */\n    opacity?: number;\n}\n\ninterface PaintballGLElems {\n    gl: WebGLAnyRenderingContext;\n    program: WGLProgram;\n    vertices: WGLBuffer;\n    texcoords: WGLBuffer;\n}\n\n/** \n * A class representing a paintball plot, which is a plot of objects in every member of an ensemble. Objects are usually defined by a single threshold on\n * a field (such as simulated reflectivity greater than 40 dBZ), but could in theory be defined by any arbitrarily complicated method. In autumnplot-gl,\n * the data for the paintball plot is given as a single field with the objects from each member encoded as \"bits\" in the field. Because the field is made up\n * of single-precision floats, this works for up to 24 members. (Technically speaking, I don't need the quotes around \"bits\", as they're bits of the \n * significand of an IEEE 754 float.)\n */\nclass Paintball<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType>;\n    public readonly colors: number[];\n    public readonly opacity: number;\n\n    private gl_elems: PaintballGLElems | null;\n    private fill_texture: WGLTexture | null;\n\n    /**\n     * Create a paintball plot\n     * @param field - A scalar field containing the member objects encoded as \"bits.\" The numerical value of each grid point can be constructed like \n     *               `1.0 * M1 + 2.0 * M2 + 4.0 * M3 + 8.0 * M4 ...`, where `M1` is 1 if that grid point is in an object in member 1 and 0 otherwise,\n     *               `M2` is the same thing for member 2, and `M3` and `M4` and up to `Mn` are the same thing for the rest of the members.\n     * @param opts  - Options for creating the paintball plot\n     */\n    constructor(field: RawScalarField<ArrayType>, opts?: PaintballOptions) {\n        super();\n\n        this.field = field;\n\n        opts = opts !== undefined ? opts : {};\n        const colors = opts.colors !== undefined ? [...opts.colors] : ['#000000'];\n        this.colors = colors.reverse().map(color => hex2rgba(color)).flat()\n        this.opacity = opts.opacity !== undefined ? opts.opacity : 1.;\n\n        this.gl_elems = null;\n        this.fill_texture = null;\n    }\n\n    /**\n     * Update the field displayed as a paintball plot\n     * @param field - The new field to display as a paintball plot\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n        const gl = this.gl_elems.gl;\n\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, 2);\n\n        const tex_data = this.field.getTextureData();\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, !(tex_data instanceof Float32Array));\n\n        const fill_image = {'format': format, 'type': type,\n            'width': this.field.grid.ni, 'height': this.field.grid.nj, 'image': tex_data,\n            'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n        };\n\n        if (this.fill_texture === null) {\n            this.fill_texture = new WGLTexture(gl, fill_image);\n        }\n        else {\n            this.fill_texture.setImageData(fill_image);\n        }\n    }\n\n    /**\n     * @internal\n     * Add the paintball plot to a map.\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        gl.getExtension('OES_texture_float');\n\n        const program = new WGLProgram(gl, paintball_vertex_shader_src, paintball_fragment_shader_src);\n\n        const {vertices: verts_buf, texcoords: tex_coords_buf} = await this.field.grid.getWGLBuffers(gl);\n        const vertices = verts_buf;\n        const texcoords = tex_coords_buf;\n\n        this.gl_elems = {\n            gl: gl, program: program, vertices: vertices, texcoords: texcoords,\n        };\n\n        this.updateField(this.field);\n    }\n\n    /**\n     * @internal\n     * Render the paintball plot\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.fill_texture === null) return;\n        const gl_elems = this.gl_elems;\n\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        // Render to framebuffer\n        gl_elems.program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_matrix': matrix, 'u_opacity': this.opacity, 'u_colors': this.colors, 'u_num_colors': this.colors.length / 4, 'u_offset': 0},\n            {'u_fill_sampler': this.fill_texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -2});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -1});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': 1});\n        gl_elems.program.draw();\n    }\n}\n\nexport default Paintball;\nexport type {PaintballOptions};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport { PolylineCollection } from \"./PolylineCollection\";\nimport { BillboardCollection } from \"./BillboardCollection\";\nimport { getMinZoom, hex2rgb } from './utils';\nimport { LngLat, MapLikeType } from \"./Map\";\nimport { RawProfileField } from \"./RawField\";\nimport { LineData, TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { ColorMap } from \"./Colormap\";\n\nconst LINE_WIDTH = 4;\nconst BG_MAX_RING_MAG = 40;\n\nconst HODO_BG_DIMS = {\n    BB_WIDTH: 256,\n    BB_HEIGHT: 256,\n    BB_TEX_WIDTH: 256,\n    BB_TEX_HEIGHT: 256,\n    BB_MAG_MAX: 1000,\n    BB_MAG_WRAP: 1000,\n    BB_MAG_BIN_SIZE: 1000,\n}\n\nfunction _createHodoBackgroundTexture() {\n    let canvas = document.createElement('canvas');\n\n    canvas.width = HODO_BG_DIMS.BB_TEX_WIDTH;\n    canvas.height = HODO_BG_DIMS.BB_TEX_HEIGHT;\n\n    let ctx = canvas.getContext('2d');\n\n    if (ctx === null) {\n        throw \"Could not get rendering context for the hodograph background canvas\";\n    }\n\n    ctx.lineWidth = LINE_WIDTH;\n\n    for (let irng = HODO_BG_DIMS.BB_TEX_WIDTH / 4; irng <= HODO_BG_DIMS.BB_TEX_WIDTH / 2; irng += HODO_BG_DIMS.BB_TEX_WIDTH / 4) {\n        ctx.beginPath();\n        ctx.arc(HODO_BG_DIMS.BB_TEX_WIDTH / 2, HODO_BG_DIMS.BB_TEX_WIDTH / 2, irng - LINE_WIDTH / 2, 0, 2 * Math.PI);\n        ctx.stroke();\n    }\n\n    const ctr_x = HODO_BG_DIMS.BB_TEX_WIDTH / 2, ctr_y = HODO_BG_DIMS.BB_TEX_WIDTH / 2;\n    const arrow_size = 20\n    ctx.beginPath()\n    ctx.moveTo(ctr_x, ctr_y);\n    ctx.lineTo(ctr_x + arrow_size / 2, ctr_y + arrow_size);\n    ctx.lineTo(ctr_x - arrow_size / 2, ctr_y + arrow_size);\n    ctx.lineTo(ctr_x, ctr_y);\n    ctx.fill()\n\n    return canvas;\n};\n\nlet HODO_BG_TEXTURE: HTMLCanvasElement | null = null;\n\nconst HODO_CMAP = new ColorMap([0, 1, 3, 6, 9], ['#ffffcc', '#a1dab4', '#41b6c4', '#225ea8']);\n\ninterface HodographOptions {\n    /** \n     * The color of the hodograph plot background as a hex string\n     */\n    bgcolor?: string;\n\n    /** \n     * How much to thin the hodographs at zoom level 1 on the map. This effectively means to plot every `n`th hodograph in the i and j directions, where `n` = \n     * `thin_fac`. `thin_fac` should be a power of 2. \n     * @default 1\n     */\n    thin_fac?: number;\n}\n\ninterface HodographGLElems<ArrayType extends TypedArray, MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n    bg_billboard: BillboardCollection<ArrayType>;\n}\n\n/** A class representing a a field of hodograph plots */\nclass Hodographs<MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private profile_field: RawProfileField;\n    public readonly bgcolor: string;\n    public readonly thin_fac: number;\n\n    private gl_elems: HodographGLElems<Float16Array, MapType>;\n    private line_elems: {hodo_line: PolylineCollection, sm_line: PolylineCollection} | null;\n    private readonly hodo_scale;\n    private readonly bg_size;\n\n    /**\n     * Create a field of hodographs\n     * @param profile_field - The grid of profiles to plot\n     * @param opts          - Various options to use when creating the hodographs \n     */\n    constructor(profile_field: RawProfileField, opts?: HodographOptions) {\n        super();\n\n        opts = opts || {};\n        \n        this.profile_field = profile_field;\n\n        this.bgcolor = opts.bgcolor || '#000000'\n        this.thin_fac = opts.thin_fac || 1;\n\n        this.hodo_scale = (HODO_BG_DIMS.BB_TEX_WIDTH - LINE_WIDTH / 2) / (HODO_BG_DIMS.BB_TEX_WIDTH * BG_MAX_RING_MAG);\n        this.bg_size = 140;\n\n        this.gl_elems = null;\n        this.line_elems = null;\n    }\n\n    /**\n     * Update the profiles displayed\n     * @param field - The new profiles to display as hodographs\n     */\n    public async updateField(field: RawProfileField) {\n        this.profile_field = field;\n\n        if (this.gl_elems === null) return;\n        // XXX: This might leak VRAM\n        const gl = this.gl_elems.gl;\n\n        this.gl_elems.bg_billboard.updateField(field.getStormMotionGrid());\n\n        const profiles = this.profile_field.profiles;\n        \n        const hodo_polyline = profiles.map(prof => {\n            const zoom = getMinZoom(prof['jlat'], prof['ilon'], this.thin_fac);\n\n            return {\n                'offsets': [...prof['u']].map((u, ipt) => [u - prof['smu'], prof['v'][ipt] - prof['smv']]),\n                'vertices': [...prof['u']].map(u => [prof['lon'], prof['lat']]),\n                'zoom': zoom,\n                'data': [...prof['z']],\n            } as LineData;\n        });\n\n        const hodo_line = await PolylineCollection.make(gl, hodo_polyline, {line_width: 2.5, cmap: HODO_CMAP, offset_scale: this.hodo_scale * this.bg_size});\n\n        const sm_polyline = profiles.map(prof => {\n            const zoom = getMinZoom(prof['jlat'], prof['ilon'], this.thin_fac);\n\n            const sm_mag = Math.hypot(prof['smu'], prof['smv']);\n            const sm_ang = Math.PI / 2 - Math.atan2(-prof['smv'], -prof['smu']);\n            const buffer = 2\n\n            return {\n                'offsets': [[buffer * Math.sin(sm_ang), buffer * Math.cos(sm_ang)], \n                              [sm_mag * Math.sin(sm_ang), sm_mag * Math.cos(sm_ang)]],\n                'vertices': [[prof['lon'], prof['lat']], [prof['lon'], prof['lat']]],\n                'zoom': zoom\n            } as LineData;\n        });\n\n        const sm_line = await PolylineCollection.make(gl, sm_polyline, {line_width: 1.5, color: this.bgcolor, offset_scale: this.hodo_scale * this.bg_size});\n\n        this.line_elems = {\n            hodo_line: hodo_line, sm_line: sm_line\n        }\n    }\n\n    /**\n     * @internal\n     * Add the hodographs to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        if (HODO_BG_TEXTURE === null) {\n            HODO_BG_TEXTURE = _createHodoBackgroundTexture();\n        }\n\n        const bg_image = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'image': HODO_BG_TEXTURE, 'mag_filter': gl.NEAREST};\n        const max_zoom = map.getMaxZoom();\n\n        const bg_billboard = new BillboardCollection(this.profile_field.getStormMotionGrid(), this.thin_fac, max_zoom, bg_image, HODO_BG_DIMS, hex2rgb(this.bgcolor), \n                                                     this.bg_size * 0.004);\n        await bg_billboard.setup(gl);\n\n        this.gl_elems = {\n            gl: gl, map: map, bg_billboard: bg_billboard\n        };\n\n        this.updateField(this.profile_field);\n    }\n\n    /**\n     * @internal\n     * Render the hodographs\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.line_elems === null) return;\n        const gl_elems = this.gl_elems;\n        const line_elems = this.line_elems;\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        line_elems.hodo_line.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n        line_elems.sm_line.render(gl, matrix, [map_width, map_height], zoom, bearing, bearing);\n        gl_elems.bg_billboard.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n    }\n}\n\nexport default Hodographs;\nexport type {HodographOptions};","\nimport { WebGLAnyRenderingContext } from './AutumnTypes';\nimport { MapLikeType } from './Map';\n\nimport { PlotComponent } from './PlotComponent';\n\nabstract class PlotLayerBase<MapType extends MapLikeType> {\n    public readonly type: 'custom';\n    public readonly id: string;\n    protected map: MapType;\n\n    constructor(id: string) {\n        this.type = 'custom';\n        this.id = id;\n        this.map = null;\n    }\n\n    public abstract onAdd(map: MapType, gl: WebGLAnyRenderingContext) : void;\n    public abstract render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) : void;\n\n    protected repaint() {\n        if (this.map !== null) {\n            this.map.triggerRepaint();\n        }\n    }\n}\n\n/** \n * A static map layer. The data are assumed to be static in time. If the data have a time component (e.g., a model forecast), an {@link MultiPlotLayer} \n * may be more appropriate.\n * @example\n * // Create map layers from provided fields\n * const height_layer = new PlotLayer('height-contours', height_contours);\n * const wind_speed_layer = new PlotLayer('wind-speed-fill', wind_speed_fill);\n * const barb_layer = new PlotLayer('barbs', wind_barbs);\n */\nclass PlotLayer<MapType extends MapLikeType> extends PlotLayerBase<MapType> {\n    private readonly field: PlotComponent<MapType>;\n\n    /**\n     * Create a map layer from a field\n     * @param id    - A unique id for this layer\n     * @param field - The field to plot in this layer\n     */\n    constructor(id: string, field: PlotComponent<MapType>) {\n        super(id);\n        this.field = field;\n    }\n\n    /**\n     * @internal\n     * Add this layer to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.map = map;\n        await this.field.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render this layer\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        this.field.render(gl, matrix);\n    }\n}\n\n/**\n * A varying map layer. If the data don't have a varying component, such as over time, it might be easier to use an {@link PlotLayer} instead.\n * @example\n * // Create a varying map layer\n * height_layer = new MultiPlotLayer('height-contours');\n * \n * // Add some fields to it\n * height_layer.addField(height_contour_f00, '20230112_1200');\n * height_layer.addField(height_contour_f01, '20230112_1300');\n * height_layer.addField(height_contour_f02, '20230112_1400');\n * \n * // Set the date/time in the map layer\n * height_layer.setActiveKey('20230112_1200');\n */\nclass MultiPlotLayer<MapType extends MapLikeType> extends PlotLayerBase<MapType> {\n    private fields: Record<string, PlotComponent<MapType>>;\n    private field_key: string | null;\n\n    private gl: WebGLAnyRenderingContext | null;\n\n    /**\n     * Create a time-varying map layer\n     * @param id - A unique id for this layer\n     */\n    constructor(id: string) {\n        super(id);\n\n        this.fields = {};\n        this.field_key = null;\n        this.map = null;\n        this.gl = null;\n    }\n\n    /**\n     * @internal\n     * Add this layer to a map\n     */\n    public onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.map = map;\n        this.gl = gl;\n\n        Object.values(this.fields).forEach(field => {\n            field.onAdd(map, gl).then(res => {\n                this.repaint();\n            });\n        });\n\n        this.repaint();\n    }\n\n    /**\n     * @internal\n     * Render this layer\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.map !== null && this.gl !== null && this.field_key !== null \n            && this.fields.hasOwnProperty(this.field_key) && this.fields[this.field_key] !== null) {\n            this.fields[this.field_key].render(gl, matrix);\n        }\n    }\n\n    /**\n     * Set the active key\n     * @param key - The new key. The field with that key is plotted immediately.\n     */\n    public setActiveKey(key: string) {\n        const old_field_key = this.field_key;\n        this.field_key = key;\n\n        this.repaint();\n    }\n\n    /**\n     * Get a list of all dates/times that have been added to the layer\n     * @returns An array of dates/times\n     */\n    public getKeys() {\n        return Object.keys(this.fields);\n    }\n\n    /**\n     * Add a field with a given key\n     * @param field - The field to add\n     * @param key   - The key to associate with the field\n     */\n    public addField(field: PlotComponent<MapType>, key: string) {\n        const old_field_key = this.field_key;\n\n        if (this.map !== null && this.gl !== null && field !== null) {\n            field.onAdd(this.map, this.gl).then(res => {\n                this.repaint();\n            });\n        }\n\n        this.fields[key] = field;\n        \n        if (this.field_key === null) {\n            this.field_key = key;\n        }\n    }\n}\n\nexport {PlotLayer, MultiPlotLayer};","\nimport { Color, ColorMap } from \"./Colormap\";\n\ntype ColorbarOrientation = 'horizontal' | 'vertical';\ntype ColorbarTickDirection = 'top' | 'bottom' | 'left' | 'right';\ninterface ColorBarOptions {\n    /** The label to place along the color bar */\n    label?: string;\n\n    /** \n     * An array of numbers to use as the tick locations. \n     * @default Use all the levels in the color map provided to {@link makeColorBar}.\n     */\n    ticks?: number[];\n\n    /** \n     * The direction the ticks should face. Valid values are 'left' and 'right' if orientation is 'vertical' and 'top' and \n     * 'bottom' if orientation is 'horizontal'.\n     * @default 'left' if orientation is 'vertical' and 'bottom' if orientation is 'horizontal'\n     */\n    tick_direction?: ColorbarTickDirection;\n\n    /** \n     * The orientation for the color bar. Valid values are 'horizontal' and 'vertical'.\n     * @default 'vertical'\n     */\n    orientation?: ColorbarOrientation;\n\n    /** \n     * A font face to use for the label and tick values.\n     * @default 'sans-serif'\n     */\n    fontface?: string;\n\n    /**\n     * The font size (in points) to use for the tick labels\n     * @default 12\n     */\n    ticklabelsize?: number;\n};\n\nconst createElement = (tagname: string, attributes?: Record<string, string | number>, parent?: SVGElement) => {\n    const elem = document.createElementNS('http://www.w3.org/2000/svg', tagname);\n\n    if (attributes !== undefined) {\n        Object.entries(attributes).forEach(([k, v]) => {\n            elem.setAttribute(k, v.toString());\n        });\n    }\n\n    if (parent !== undefined) {\n        parent.appendChild(elem);\n    }\n\n    return elem;\n};\n\n/**\n * Make an SVG containing a color bar. The color bar can either be oriented horizontal or vertical, and a label can be provided.\n * @param colormap - The color map to use\n * @param opts     - The options for creating the color bar\n * @returns An SVGElement containing the color bar image.\n * @example\n * // Create the color bar\n * const svg = makeColorBar(color_map, {label: 'Wind Speed (kts)', orientation: 'horizontal', \n *                                      fontface: 'Trebuchet MS'});\n * \n * // Add colorbar to the page\n * document.getElementById('colorbar-container').appendChild(svg);\n */\nfunction makeColorBar(colormap: ColorMap, opts: ColorBarOptions) {\n    const label = opts.label || \"\";\n    const ticks = opts.ticks || colormap.levels;\n    const orientation = opts.orientation || 'vertical';\n    const fontface = opts.fontface || 'sans-serif';\n    const tickfontsize = opts.ticklabelsize || 12;\n\n    const tick_dir = opts.tick_direction || (orientation == 'vertical' ? 'left' : 'bottom');\n\n    if (orientation == 'vertical' && (tick_dir == 'top' || tick_dir == 'bottom') ||\n        orientation == 'horizontal' && (tick_dir == 'left' || tick_dir == 'right')) {\n        throw `tick_direction of '${tick_dir} doesn't match an orientation of ${orientation}`;\n    }\n\n    const getNChar = (n: number) => {\n        return n.toString().length;\n    }\n\n    const chars_left = getNChar(ticks[0]);\n    const chars_right = getNChar(ticks[ticks.length - 1]);\n    const need_overflow = colormap.underflow_color !== null || colormap.overflow_color !== null;\n\n    const bar_long_size = 600;\n    const bar_cross_size = bar_long_size / 9;\n    const bar_long_pad = Math.max(orientation == 'horizontal' ? Math.max(chars_left, chars_right) * 6 : 8, \n                                  need_overflow ? bar_cross_size / (2 * Math.sqrt(3)) : 0);\n    const bar_cross_pad = 3;\n    const bar_thickness = 10;\n\n    let height: number, width: number, bar_left: number, bar_top: number, bar_width: number, bar_height: number, bar_right: number, bar_bottom: number,\n        bar_middle: number, bar_low_arrow: number, bar_high_arrow: number;\n\n    if (orientation == 'vertical') {\n        height = bar_long_size;\n        width = bar_cross_size;\n\n        bar_left = tick_dir == 'left' ? bar_cross_size - bar_cross_pad - bar_thickness : bar_cross_pad;\n        bar_top = bar_long_pad;\n        bar_width = bar_thickness;\n        bar_height = bar_long_size - 2 * bar_long_pad;\n\n        bar_right = bar_left + bar_width;\n        bar_middle = bar_left + bar_width / 2;\n        bar_bottom = bar_top + bar_height;\n        bar_low_arrow = colormap.underflow_color === null ? bar_bottom : bar_bottom + bar_cross_size / (Math.sqrt(3) * 2);\n        bar_high_arrow = colormap.overflow_color === null ? bar_top : bar_top - bar_cross_size / (Math.sqrt(3) * 2);\n    }\n    else {\n        width = bar_long_size;\n        height = bar_cross_size - 6;\n\n        bar_left = bar_long_pad;\n        bar_top = tick_dir == 'bottom' ? bar_cross_pad : bar_cross_size - 6 - bar_cross_pad - bar_thickness;\n        bar_height = bar_thickness;\n        bar_width = bar_long_size - 2 * bar_long_pad;\n\n        bar_right = bar_left + bar_width;\n        bar_middle = bar_top + bar_height / 2;\n        bar_bottom = bar_top + bar_height;\n        bar_low_arrow = colormap.underflow_color === null ? bar_left : bar_left - bar_cross_size / (Math.sqrt(3) * 2);\n        bar_high_arrow = colormap.overflow_color === null ? bar_right : bar_right + bar_cross_size / (Math.sqrt(3) * 2);\n    }\n\n    const n_colors = colormap.colors.length;\n\n    const root = createElement('svg', {width: width, height: height});\n    const gbar = createElement('g', {}, root);\n\n    let gtickattrs;\n    if (orientation == 'vertical') {\n        gtickattrs = tick_dir == 'left' ? {'text-anchor': 'end', transform: `translate(${bar_left}, ${bar_top})`} : \n                                          {transform: `translate(${bar_left + bar_width}, ${bar_top})`}\n    }\n    else {\n        gtickattrs = tick_dir == 'bottom' ? {'text-anchor': 'middle', transform: `translate(${bar_left}, ${bar_top + bar_height})`} : \n                                            {'text-anchor': 'middle', transform: `translate(${bar_left}, ${bar_top})`}\n    }\n    const gticks = createElement('g', gtickattrs, root);\n\n    // Make the colored background\n    colormap.colors.forEach((color, icolor) => {\n        let attrs: Record<string, string | number> = {};\n\n        if (orientation == 'vertical') {\n            attrs = {\n                x: bar_left, y: bar_top + bar_height * (1 - (icolor + 1) / n_colors), width: bar_width, height: bar_height / n_colors};\n        }\n        else {\n            attrs = {x: bar_left + bar_width * icolor / n_colors, y: bar_top, width: bar_width / n_colors, height: bar_height};\n        }\n\n        createElement('rect', {...attrs, fill: color.color, opacity: color.opacity}, gbar);\n    });\n\n    // Make the overflow and underflow triangles\n    if (colormap.underflow_color !== null) {\n        let point_list: string;\n        if (orientation == 'vertical') {\n            point_list = `${bar_right} ${bar_bottom}, ${bar_middle} ${bar_low_arrow}, ${bar_left} ${bar_bottom}, ${bar_right} ${bar_bottom}`;\n        }\n        else {\n            point_list = `${bar_left} ${bar_bottom}, ${bar_low_arrow} ${bar_middle}, ${bar_left} ${bar_top}, ${bar_left} ${bar_bottom}`;\n        }\n\n        const underflow_attrs = {points: point_list, fill: colormap.underflow_color.color, opacity: colormap.underflow_color.opacity};\n        createElement('polygon', underflow_attrs, gbar);\n    }\n\n    if (colormap.overflow_color !== null) {\n        let point_list: string;\n        if (orientation == 'vertical') {\n            point_list = `${bar_left} ${bar_top}, ${bar_middle} ${bar_high_arrow}, ${bar_right} ${bar_top}, ${bar_left} ${bar_top}`;\n        }\n        else {\n            point_list = `${bar_right} ${bar_top}, ${bar_high_arrow} ${bar_middle}, ${bar_right} ${bar_bottom}, ${bar_right} ${bar_top}`;\n        }\n\n        const overflow_attrs = {points: point_list, fill: colormap.overflow_color.color, opacity: colormap.overflow_color.opacity};\n        createElement('polygon', overflow_attrs, gbar);\n    }\n\n    // Make the ticks marks and labels\n    const first_level = colormap.levels[0];\n    const last_level = colormap.levels[colormap.levels.length - 1];\n\n    ticks.filter(level => first_level <= level && level <= last_level).forEach(level => {\n        const diffs = colormap.levels.map(l => Math.abs(l - level));\n        let ilevel = diffs.indexOf(diffs.reduce((a, b) => Math.min(a, b)));\n        if (level <= colormap.levels[ilevel] && ilevel > 0)\n            ilevel -= 1;\n        ilevel += (level - colormap.levels[ilevel]) / (colormap.levels[ilevel + 1] - colormap.levels[ilevel]);\n        const tickattrs = orientation == 'vertical' ? {transform: `translate(0, ${bar_height * (1 - ilevel / n_colors)})`} : \n                                                      {transform: `translate(${bar_width * ilevel / n_colors}, 0)`};\n        const gtick = createElement('g', tickattrs, gticks);\n\n        let lineattrs;\n        if (orientation == 'vertical') {\n            lineattrs = tick_dir == 'left' ? {x2: -6} : {x2: 6};\n        }\n        else {\n            lineattrs = tick_dir == 'bottom' ? {y2 : 6} : {y2: -6};\n        }\n\n        createElement('line', {...lineattrs, stroke: '#000000', 'stroke-width': 1.5}, gtick);\n\n        let textattrs;\n        if (orientation == 'vertical') {\n            textattrs = tick_dir == 'left' ? {x: -9, dy: '0.32em'} : {x: 9, dy: '0.32em'};\n        }\n        else {\n            textattrs = tick_dir == 'bottom' ? {y: 9, dy: '0.8em'} : {y: -9, dy: '0em'};\n        }\n\n        const text = createElement('text', {...textattrs, fill: '#000000', style: `font-family: ${fontface}; font-size: ${tickfontsize}pt`}, gtick);\n        text.textContent = level.toString();\n    });\n\n    // Draw the outline\n    let point_list: string;\n    if (orientation == 'vertical') {\n        point_list = `${bar_left} ${bar_top}, ${bar_middle} ${bar_high_arrow}, ${bar_right} ${bar_top}, ${bar_right} ${bar_bottom}, ` +\n                     `${bar_middle} ${bar_low_arrow}, ${bar_left} ${bar_bottom}, ${bar_left} ${bar_top}`;\n    }\n    else {\n        point_list = `${bar_left} ${bar_top}, ${bar_right} ${bar_top}, ${bar_high_arrow} ${bar_middle}, ${bar_right} ${bar_bottom}, ` +\n                     `${bar_left} ${bar_bottom}, ${bar_low_arrow} ${bar_middle}, ${bar_left} ${bar_top}`;\n    }\n\n    const outline_attrs = {\n        points: point_list,\n        stroke: '#000000',\n        'stroke-width': 1.5,\n        fill: 'none'\n    };\n    createElement('polygon', outline_attrs, root);\n\n    // Draw the colorbar label\n    let labelattrs;\n    if (orientation == 'vertical') {\n        labelattrs = tick_dir == 'left' ? {transform: `translate(15, ${height / 2}) rotate(-90)`} : {transform: `translate(${width - 6}, ${height / 2}) rotate(-90)`};\n    }\n    else {\n        labelattrs = tick_dir == 'bottom' ? {transform: `translate(${width / 2}, ${height - 5})`} : {transform: `translate(${width / 2}, 15)`}\n    }\n    const label_elem = createElement('text', {...labelattrs, fill: '#000000', 'text-anchor': 'middle', style: `font-family: ${fontface};`}, root);\n    label_elem.textContent = label;\n\n    return root;\n}\n\ninterface PaintballKeyOptions {\n    /**\n     * The number of columns of entries in the key\n     * @default 1\n     */\n    n_cols?: number;\n\n    /** \n     * A font face to use for the label and tick values.\n     * @default 'sans-serif'\n     */\n    fontface?: string;\n}\n\n/**\n * Make an SVG containing a color key for a paintball plot. The key can be split over any number of columns.\n * @param colors - A list of colors \n * @param labels - The labels corresponding to each color\n * @param opts   - The options for creating the color key\n * @returns An SVGElement containing the color bar image.\n * @example\n * // Create the color key\n * const svg = makePaintballKey(colors, labels, {n_cols: 2, fontface: 'Trebuchet MS'});\n * \n * // Add the color key to the page\n * document.getElementById('pb-key-container').appendChild(svg);\n */\nfunction makePaintballKey(colors: (Color | string)[], labels: string[], opts?: PaintballKeyOptions) {\n    if (colors.length != labels.length) {\n        throw `Mismatch between the number of colors (${colors.length}) and the number of labels (${labels.length})`;\n    }\n\n    opts = opts === undefined ? {} : opts;\n    const n_cols = opts.n_cols === undefined ? 1: opts.n_cols;\n    const fontface = opts.fontface === undefined ? 'sans-serif' : opts.fontface;\n\n    let height: number, width: number;\n\n    const swatch_width = 20;\n    const swatch_height = 20;\n    const swatch_text_pad = 3;\n    const swatch_text_space = 100;\n    const swatch_width_pad = 5;\n    const swatch_height_pad = 5;\n\n    const n_rows = Math.ceil(colors.length / n_cols);\n\n    width = (swatch_width + swatch_text_pad + swatch_text_space) * n_cols + swatch_width_pad * (n_cols + 1);\n    height = swatch_height * n_rows + swatch_height_pad * (n_rows + 1);\n\n    const root = createElement('svg', {width: width, height: height});\n    const gbar = createElement('g', {}, root);\n\n    colors.forEach((color, icolor) => {\n        const label = labels[icolor];\n\n        const irow = icolor % n_rows;\n        const icol = Math.floor(icolor / n_rows);\n\n        let opacity = 1.;\n        if (typeof color != 'string') {\n            opacity = color.opacity;\n            color = color.color;\n        }\n\n        const x = swatch_width_pad + icol * (swatch_width + swatch_text_pad + swatch_text_space + swatch_width_pad);\n        const y = swatch_height_pad + irow * (swatch_height + swatch_height_pad);\n\n        createElement('rect', {x: x, y: y, fill: color, opacity: opacity, width: swatch_width, height: swatch_height}, gbar);\n\n        let textattrs = {x: x + swatch_width + swatch_text_pad, y: y + swatch_height / 2, dy: '0.32em'};\n\n        const text = createElement('text', {...textattrs, fill: '#000000', style: `font-size: 0.8em; font-family: ${fontface};`}, gbar);\n        text.textContent = label;\n    })\n\n    return root;\n}\n\nexport {makeColorBar, makePaintballKey};\nexport type {ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions};","\nimport { LineString, Point } from \"./cpp/marchingsquares_embind\";\nimport Module from './cpp/marchingsquares';\nimport { MarchingSquaresModule } from './cpp/marchingsquares';\nimport './cpp/marchingsquares.wasm';\nimport { Grid } from \"./Grid\";\nimport { ContourData, TypedArray } from \"./AutumnTypes\";\n\nlet msm_promise: Promise<MarchingSquaresModule> | null = null;\n\nfunction initMSModule() {\n    if (msm_promise === null) {\n        msm_promise = Module();\n    }\n\n    return msm_promise;\n}\n\ninterface FieldContourOpts {\n    /**\n     * The interval at which to create contours. The field will be contoured at this interval from its minimum to its maximum.\n     */\n    interval?: number;\n\n    /**\n     * Contour the field at these specific levels.\n     */\n    levels?: number[];\n}\n\nasync function contourCreator<ArrayType extends TypedArray>(data: ArrayType, grid: Grid, opts: FieldContourOpts) {\n    if (opts.interval === undefined && opts.levels === undefined) {\n        throw \"Must supply either an interval or levels to contourCreator()\"\n    }\n\n    const interval = opts.interval === undefined ? 0 : opts.interval;\n    const levels = opts.levels === undefined ? [] : [...opts.levels];\n\n    const msm = await initMSModule();\n\n    const grid_coords = grid.getGridCoords();\n\n    const grid_data = new msm.FloatList();\n    grid_data.resize(grid.ni * grid.nj, 0);\n    const tex_data = data;\n\n    tex_data.forEach((v, i) => grid_data.set(i, v));\n\n    const grid_x = new msm.FloatList();\n    grid_x.resize(grid.ni, 0);\n    grid_coords.x.forEach((v, i) => grid_x.set(i, v));\n\n    const grid_y = new msm.FloatList();\n    grid_y.resize(grid.nj, 0);\n    grid_coords.y.forEach((v, i) => grid_y.set(i, v));\n\n    if (levels.length == 0) {\n        const levels_cpp = msm.getContourLevelsFloat32(grid_data, grid.ni, grid.nj, interval);\n\n        for (let ilvl = 0; ilvl < levels_cpp.size(); ilvl++) {\n            levels.push(levels_cpp.get(ilvl));\n        }\n\n        levels_cpp.delete();\n    }\n\n    const contours: ContourData = {};\n    levels.forEach(v => {\n        const contours_ = msm.makeContoursFloat32(grid_data, grid_x, grid_y, v);\n        contours[v] = [];\n\n        for (let icntr = 0; icntr < contours_.size(); icntr++) {\n            const contour: LineString = contours_.get(icntr);\n            const contour_point_list = contour.point_list;\n\n            contours[v].push([]);\n\n            for (let ipt = 0; ipt < contour_point_list.size(); ipt++) {\n                const pt: Point = contour_point_list.get(ipt);\n                const [lon, lat] = grid.transform(pt.x, pt.y, {inverse: true});\n                contours[v][icntr].push([lon, lat]);\n\n                pt.delete();\n            }\n\n            contour_point_list.delete();\n            contour.delete();\n        }\n\n        contours_.delete();\n    });\n\n    grid_data.delete();\n    grid_x.delete();\n    grid_y.delete();\n\n    return contours;\n}\n\nexport {contourCreator, initMSModule};\nexport type {FieldContourOpts};","\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { ContourData, TypedArray, WindProfile } from \"./AutumnTypes\";\nimport { contourCreator, FieldContourOpts } from \"./ContourCreator\";\nimport { Grid } from \"./Grid\";\nimport { Cache, zip } from \"./utils\";\n\ntype TextureDataType<ArrayType> = ArrayType extends Float32Array ? Float32Array : Uint16Array;\n\nfunction getArrayConstructor<ArrayType extends TypedArray>(ary: ArrayType) : new(...args: any[]) => ArrayType {\n    return ary.constructor as new(...args: any[]) => ArrayType;\n}\n\n/** A class representing a raw 2D field of gridded data, such as height or u wind. */\nclass RawScalarField<ArrayType extends TypedArray> {\n    public readonly grid: Grid;\n    public readonly data: ArrayType;\n\n    private readonly contour_cache: Cache<[FieldContourOpts], Promise<ContourData>>;\n\n    /**\n     * Create a data field. \n     * @param grid - The grid on which the data are defined\n     * @param data - The data, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid.\n     */\n    constructor(grid: Grid, data: ArrayType) {\n        this.grid = grid;\n        this.data = data;\n\n        if (grid.ni * grid.nj != data.length) {\n            throw `Data size (${data.length}) doesn't match the grid dimensions (${grid.ni} x ${grid.nj}; expected ${grid.ni * grid.nj} points)`;\n        }\n\n        this.contour_cache = new Cache(async (opts: FieldContourOpts) => {\n            return await contourCreator(this.data, this.grid, opts);\n        });\n    }\n\n    /** @internal */\n    public getTextureData() : TextureDataType<ArrayType> {\n        // Need to give float16 data as uint16s to make WebGL happy: https://github.com/petamoriken/float16/issues/105\n        const raw_data = this.data;\n        let data: any;\n        if (raw_data instanceof Float32Array) {\n            data = raw_data;\n        }\n        else {\n            data = new Uint16Array(raw_data.buffer);\n        }\n\n        return data as TextureDataType<ArrayType>;\n    }\n\n    public async getContours(opts: FieldContourOpts) {\n        return await this.contour_cache.getValue(opts);\n    }\n\n    /**\n     * Create a new field by aggregating a number of fields using a specific function\n     * @param func - A function that will be applied each element of the field. It should take the same number of arguments as fields you have and return a single number.\n     * @param args - The RawScalarFields to aggregate\n     * @returns a new gridded field\n     * @example\n     * // Compute wind speed from u and v\n     * wind_speed_field = RawScalarField.aggreateFields(Math.hypot, u_field, v_field);\n     */\n    public static aggregateFields<ArrayType extends TypedArray>(func: (...args: number[]) => number, ...args: RawScalarField<ArrayType>[]) {\n        function* mapGenerator<T, U>(gen: Generator<T>, func: (arg: T) => U) {\n            for (const elem of gen) {\n                yield func(elem);\n            }\n        }\n\n        const arrayType = getArrayConstructor(args[0].data);\n        const zipped_args = zip(...args.map(a => a.data));\n        const agg_data = new arrayType(mapGenerator(zipped_args, (a: number[]): number => func(...a)));\n\n        return new RawScalarField(args[0].grid, agg_data);\n    }\n}\n\ntype VectorRelativeTo = 'earth' | 'grid';\n\ninterface RawVectorFieldOptions {\n    /**\n     * Whether the vectors are relative to the grid ('grid') or Earth ('earth')\n     * @default 'grid'\n     */\n    relative_to?: VectorRelativeTo;\n}\n\n/** A class representing a 2D gridded field of vectors */\nclass RawVectorField<ArrayType extends TypedArray> {\n    public readonly u: RawScalarField<ArrayType>;\n    public readonly v: RawScalarField<ArrayType>;\n    public readonly relative_to: VectorRelativeTo;\n\n    /**\n     * Create a vector field.\n     * @param grid - The grid on which the vector components are defined\n     * @param u    - The u (east/west) component of the vectors, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid\n     * @param v    - The v (north/south) component of the vectors, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid\n     * @param opts - Options for creating the vector field.\n     */\n    constructor(grid: Grid, u: ArrayType, v: ArrayType, opts?: RawVectorFieldOptions) {\n        opts = opts === undefined ? {}: opts;\n\n        this.u = new RawScalarField(grid, u);\n        this.v = new RawScalarField(grid, v);\n        this.relative_to = opts.relative_to === undefined ? 'grid' : opts.relative_to;\n    }\n\n    public getTextureData() {\n        // Need to give float16 data as uint16s to make WebGL happy: https://github.com/petamoriken/float16/issues/105\n        const raw_u = this.u.data;\n        const raw_v = this.v.data;\n\n        const u: any = raw_u instanceof Float32Array ? raw_u : new Uint16Array(raw_u.buffer);\n        const v: any = raw_v instanceof Float32Array ? raw_v : new Uint16Array(raw_v.buffer);\n\n        return {u: u as TextureDataType<ArrayType>, v: v as TextureDataType<ArrayType>};\n    }\n\n    public getThinnedField(thin_x: number, thin_y: number) {\n        const new_grid = this.grid.getThinnedGrid(thin_x, thin_y);\n\n        const thinGrid = (data: ArrayType) => {\n            const arrayType = getArrayConstructor(data);\n            const new_data = new arrayType(new_grid.ni * new_grid.nj);\n    \n            for (let i = 0; i < new_grid.ni; i++) {\n                for (let j = 0 ; j < new_grid.nj; j++) {\n                    const idx_old = i * thin_x + this.grid.ni * j * thin_y;\n                    const idx = i + new_grid.ni * j;\n    \n                    new_data[idx] = data[idx_old];\n                }\n            }\n\n            return new_data;\n        }\n\n        const thin_u = thinGrid(this.u.data);\n        const thin_v = thinGrid(this.v.data);\n\n        return new RawVectorField(new_grid, thin_u, thin_v, {relative_to: this.relative_to});\n    }\n\n    public get grid() {\n        return this.u.grid\n    }\n}\n\n/** A class grid of wind profiles */\nclass RawProfileField {\n    public readonly profiles: WindProfile[];\n    public readonly grid: Grid;\n\n    /**\n     * Create a grid of wind profiles\n     * @param grid     - The grid on which the profiles are defined\n     * @param profiles - The wind profiles themselves, which should be given as a 1D array in row-major order, with the first profile being at the lower-left corner of the grid\n     */\n    constructor(grid: Grid, profiles: WindProfile[]) {\n        this.profiles = profiles;\n        this.grid = grid;\n    }\n\n    /** Get the gridded storm motion vector field (internal method) */\n    public getStormMotionGrid() {\n        const profiles = this.profiles\n        const u = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n        const v = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n\n        profiles.forEach(prof => {\n            const idx = prof.ilon + this.grid.ni * prof.jlat;\n            u[idx] = prof.smu;\n            v[idx] = prof.smv;\n        });\n\n        return new RawVectorField(this.grid, u, v, {relative_to: 'grid'});\n    }\n}\n\nexport {RawScalarField, RawVectorField, RawProfileField};\nexport type {RawVectorFieldOptions, VectorRelativeTo, TextureDataType};","import { Float16Array } from \"@petamoriken/float16\";\nimport { WGLBuffer, WGLTexture, WGLTextureSpec } from \"autumn-wgl\";\nimport { WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { lambertConformalConic, rotateSphere } from \"./Map\";\nimport { getGLFormatTypeAlignment, layer_worker } from \"./PlotComponent\";\nimport { Cache } from \"./utils\";\n\ninterface EarthCoords {\n    lons: Float32Array;\n    lats: Float32Array;\n}\n\ninterface GridCoords {\n    x: Float32Array;\n    y: Float32Array;\n}\n\nasync function makeWGLDomainBuffers(gl: WebGLAnyRenderingContext, grid: Grid, native_grid?: Grid) {\n    native_grid = native_grid !== undefined ? native_grid: grid;\n\n    const texcoord_margin_r = 1 / (2 * native_grid.ni);\n    const texcoord_margin_s = 1 / (2 * native_grid.nj);\n\n    const grid_cell_size_multiplier = (grid.ni * grid.nj) / (native_grid.ni * native_grid.nj);\n\n    const {lats: field_lats, lons: field_lons} = grid.getEarthCoords();\n    const domain_coords = await layer_worker.makeDomainVerticesAndTexCoords(field_lats, field_lons, grid.ni, grid.nj, texcoord_margin_r, texcoord_margin_s);\n\n    for (let icd = 0; icd < domain_coords['grid_cell_size'].length; icd++) {\n        domain_coords['grid_cell_size'][icd] *= grid_cell_size_multiplier;\n    }\n\n    const vertices = new WGLBuffer(gl, domain_coords['vertices'], 2, gl.TRIANGLE_STRIP);\n    const texcoords = new WGLBuffer(gl, domain_coords['tex_coords'], 2, gl.TRIANGLE_STRIP);\n    const grid_cell_size = new WGLBuffer(gl, domain_coords['grid_cell_size'], 1, gl.TRIANGLE_STRIP);\n\n    return {'vertices': vertices, 'texcoords': texcoords, 'cellsize': grid_cell_size};\n}\n\nasync function makeWGLBillboardBuffers(gl: WebGLAnyRenderingContext, grid: Grid, thin_fac: number, max_zoom: number) {\n    const {lats: field_lats, lons: field_lons} = grid.getEarthCoords();\n    const bb_elements = await layer_worker.makeBBElements(field_lats, field_lons, grid.ni, grid.nj, thin_fac, max_zoom);\n\n    const vertices = new WGLBuffer(gl, bb_elements['pts'], 3, gl.TRIANGLE_STRIP);\n    const texcoords = new WGLBuffer(gl, bb_elements['tex_coords'], 2, gl.TRIANGLE_STRIP);\n\n    return {'vertices': vertices, 'texcoords': texcoords};\n}\n\nfunction makeVectorRotationTexture(gl: WebGLAnyRenderingContext, grid: Grid) {\n    const coords = grid.getEarthCoords();\n\n    if (!grid.is_conformal) {\n        // If the grid is non-conformal, we need a fully general change of basis from grid coordinates to earth coordinates. This is not supported for now, so warn about it.\n        console.warn('Vector rotations for non-conformal projections are not supported. The output may look incorrect.')\n    }\n\n    const rot_vals = new Float16Array(coords.lats.length);\n\n    for (let icd = 0; icd < coords.lats.length; icd++) {\n        const lon = coords.lons[icd];\n        const lat = coords.lats[icd];\n\n        const [x, y] = grid.transform(lon, lat);\n        const [x_pertlon, y_pertlon] = grid.transform(lon + 0.01, lat);\n        rot_vals[icd] = Math.atan2(y_pertlon - y, x_pertlon - x);\n    }\n\n    const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, true);\n\n    const rot_img: WGLTextureSpec = {\n        format: format, type: type, row_alignment: row_alignment, image: new Uint16Array(rot_vals.buffer),\n        width: grid.ni, height: grid.nj, mag_filter: gl.LINEAR\n    };\n\n    const rot_tex = new WGLTexture(gl, rot_img);\n    return {'rotation': rot_tex};\n}\n\ntype GridType = 'latlon' | 'latlonrot' | 'lcc';\n\nabstract class Grid {\n    public readonly type: GridType;\n    public readonly ni: number;\n    public readonly nj: number;\n    public readonly is_conformal: boolean;\n\n    private readonly buffer_cache: Cache<[WebGLAnyRenderingContext], Promise<{'vertices': WGLBuffer, 'texcoords': WGLBuffer, 'cellsize': WGLBuffer}>>;\n    private readonly billboard_buffer_cache: Cache<[WebGLAnyRenderingContext, number, number], Promise<{'vertices': WGLBuffer, 'texcoords': WGLBuffer}>>;\n    private readonly vector_rotation_cache: Cache<[WebGLAnyRenderingContext], {'rotation': WGLTexture}>\n\n    constructor(type: GridType, is_conformal: boolean, ni: number, nj: number) {\n        this.type = type;\n        this.is_conformal = is_conformal;\n        this.ni = ni;\n        this.nj = nj;\n\n        this.buffer_cache = new Cache((gl: WebGLAnyRenderingContext) => {\n            const new_ni = Math.max(Math.floor(this.ni / 50), 20);\n            const new_nj = Math.max(Math.floor(this.nj / 50), 20);\n            return makeWGLDomainBuffers(gl, this.copy({ni: new_ni, nj: new_nj}), this);\n        });\n\n        this.billboard_buffer_cache = new Cache((gl: WebGLAnyRenderingContext, thin_fac: number, max_zoom: number) => {\n            return makeWGLBillboardBuffers(gl, this, thin_fac, max_zoom);\n        });\n\n        this.vector_rotation_cache = new Cache((gl: WebGLAnyRenderingContext) => {\n            return makeVectorRotationTexture(gl, this);\n        })\n    }\n\n    public abstract copy(opts?: {ni?: number, nj?: number}): Grid;\n\n    public abstract getEarthCoords(): EarthCoords;\n    public abstract getGridCoords(): GridCoords;\n    public abstract transform(x: number, y: number, opts?: {inverse?: boolean}): [number, number];\n    abstract getThinnedGrid(thin_x: number, thin_y: number): Grid;\n    \n    public async getWGLBuffers(gl: WebGLAnyRenderingContext) {\n        return await this.buffer_cache.getValue(gl);\n    }\n\n    public async getWGLBillboardBuffers(gl: WebGLAnyRenderingContext, thin_fac: number, max_zoom: number) {\n        return await this.billboard_buffer_cache.getValue(gl, thin_fac, max_zoom);\n    }\n\n    public getVectorRotationTexture(gl: WebGLAnyRenderingContext) {\n        return this.vector_rotation_cache.getValue(gl);\n    }\n}\n\n/** A plate carree (a.k.a. lat/lon) grid with uniform grid spacing */\nclass PlateCarreeGrid extends Grid {\n    public readonly ll_lon: number;\n    public readonly ll_lat: number;\n    public readonly ur_lon: number;\n    public readonly ur_lat: number;\n\n    private readonly ll_cache: Cache<[], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a plate carree grid\n     * @param ni     - The number of grid points in the i (longitude) direction\n     * @param nj     - The number of grid points in the j (latitude) direction\n     * @param ll_lon - The longitude of the lower left corner of the grid\n     * @param ll_lat - The latitude of the lower left corner of the grid\n     * @param ur_lon - The longitude of the upper right corner of the grid\n     * @param ur_lat - The latitude of the upper right corner of the grid\n     */\n    constructor(ni: number, nj: number, ll_lon: number, ll_lat: number, ur_lon: number, ur_lat: number) {\n        super('latlon', true, ni, nj);\n\n        this.ll_lon = ll_lon;\n        this.ll_lat = ll_lat;\n        this.ur_lon = ur_lon;\n        this.ur_lat = ur_lat;\n\n        const dlon = (this.ur_lon - this.ll_lon) / (this.ni - 1);\n        const dlat = (this.ur_lat - this.ll_lat) / (this.nj - 1);\n\n        this.ll_cache = new Cache(() => {\n            const lons = new Float32Array(this.ni * this.nj);\n            const lats = new Float32Array(this.ni * this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                for (let j = 0; j < this.nj; j++) {\n                    const idx = i + j * this.ni;\n\n                    lons[idx] = this.ll_lon + i * dlon;\n                    lats[idx] = this.ll_lat + j * dlat;\n                }\n            }\n\n            return {'lons': lons, 'lats': lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_lon + i * dlon;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_lat + j * dlat;\n            }\n\n            return {x: x, y: y};\n        })\n    }\n\n    public copy(opts?: {ni?: number, nj?: number, ll_lon?: number, ll_lat?: number, ur_lon?: number, ur_lat?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_lon = opts.ll_lon !== undefined ? opts.ll_lon : this.ll_lon;\n        const ll_lat = opts.ll_lat !== undefined ? opts.ll_lat : this.ll_lat;\n        const ur_lon = opts.ur_lon !== undefined ? opts.ur_lon : this.ur_lon;\n        const ur_lat = opts.ur_lat !== undefined ? opts.ur_lat : this.ur_lat;\n\n        return new PlateCarreeGrid(ni, nj, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n\n    /**\n     * Get a list of longitudes and latitudes on the grid (internal method)\n     */\n    public getEarthCoords() {\n        return this.ll_cache.getValue();\n    }\n\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        return [x, y] as [number, number];\n    }\n\n    public getThinnedGrid(thin_x: number, thin_y: number) {\n        const dlon = (this.ur_lon - this.ll_lon) / this.ni;\n        const dlat = (this.ur_lat - this.ll_lat) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_lon = this.ll_lon;\n        const ll_lat = this.ll_lat;\n        const ur_lon = this.ur_lon - ni_remove * dlon;\n        const ur_lat = this.ur_lat - nj_remove * dlat;\n\n        return new PlateCarreeGrid(ni, nj, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n}\n\n/** A rotated lat-lon (plate carree) grid with uniform grid spacing */\nclass PlateCarreeRotatedGrid extends Grid {\n    public readonly np_lon: number;\n    public readonly np_lat: number;\n    public readonly lon_shift: number;\n    public readonly ll_lon: number;\n    public readonly ll_lat: number;\n    public readonly ur_lon: number;\n    public readonly ur_lat: number;\n\n    private readonly llrot: (a: number, b: number, opts?: {inverse: boolean}) => [number, number];\n    private readonly ll_cache: Cache<[], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a Lambert conformal conic grid\n     * @param ni        - The number of grid points in the i (longitude) direction\n     * @param nj        - The number of grid points in the j (latitude) direction\n     * @param np_lon    - The longitude of the north pole for the rotated grid\n     * @param np_lat    - The latitude of the north pole for the rotated grid\n     * @param lon_shift - The angle around the rotated north pole to shift the central meridian\n     * @param ll_lon    - The longitude of the lower left corner of the grid (on the rotated earth)\n     * @param ll_lat    - The latitude of the lower left corner of the grid (on the rotated earth)\n     * @param ur_lon    - The longitude of the upper right corner of the grid (on the rotated earth)\n     * @param ur_lat    - The latitude of the upper right corner of the grid (on the rotated earth)\n     */\n    constructor(ni: number, nj: number, np_lon: number, np_lat: number, lon_shift: number, ll_lon: number, ll_lat: number, ur_lon: number, ur_lat: number) {\n        super('latlonrot', true, ni, nj);\n\n        this.np_lon = np_lon;\n        this.np_lat = np_lat;\n        this.lon_shift = lon_shift;\n        this.ll_lon = ll_lon;\n        this.ll_lat = ll_lat;\n        this.ur_lon = ur_lon;\n        this.ur_lat = ur_lat;\n        this.llrot = rotateSphere({np_lon: np_lon, np_lat: np_lat, lon_shift: lon_shift});\n\n        const dlon = (this.ur_lon - this.ll_lon) / (this.ni - 1);\n        const dlat = (this.ur_lat - this.ll_lat) / (this.nj - 1);\n\n        this.ll_cache = new Cache(() => {\n            const lons = new Float32Array(this.ni * this.nj);\n            const lats = new Float32Array(this.ni * this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                const lon_p = this.ll_lon + i * dlon;\n                for (let j = 0; j < this.nj; j++) {\n                    const lat_p = this.ll_lat + j * dlat;\n\n                    const [lon, lat] = this.llrot(lon_p, lat_p);\n                    const idx = i + j * this.ni;\n                    lons[idx] = lon;\n                    lats[idx] = lat;\n                }\n            }\n\n            return {lons: lons, lats: lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_lon + i * dlon;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_lat + j * dlat;\n            }\n\n            return {x: x, y: y};\n        })\n    }\n\n    public copy(opts?: {ni?: number, nj?: number, ll_lon?: number, ll_lat?: number, ur_lon?: number, ur_lat?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_lon = opts.ll_lon !== undefined ? opts.ll_lon : this.ll_lon;\n        const ll_lat = opts.ll_lat !== undefined ? opts.ll_lat : this.ll_lat;\n        const ur_lon = opts.ur_lon !== undefined ? opts.ur_lon : this.ur_lon;\n        const ur_lat = opts.ur_lat !== undefined ? opts.ur_lat : this.ur_lat;\n\n        return new PlateCarreeRotatedGrid(ni, nj, this.np_lon, this.np_lat, this.lon_shift, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n\n    /**\n     * Get a list of longitudes and latitudes on the grid (internal method)\n     */\n    public getEarthCoords() {\n        return this.ll_cache.getValue();\n    }\n\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        opts = opts === undefined ? {}: opts;\n        const inverse = 'inverse' in opts ? opts.inverse : false;\n\n        return this.llrot(x, y, {inverse: !inverse});\n    }\n\n    public getThinnedGrid(thin_x: number, thin_y: number) {\n        const dlon = (this.ur_lon - this.ll_lon) / this.ni;\n        const dlat = (this.ur_lat - this.ll_lat) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_lon = this.ll_lon;\n        const ll_lat = this.ll_lat;\n        const ur_lon = this.ur_lon - ni_remove * dlon;\n        const ur_lat = this.ur_lat - nj_remove * dlat;\n\n        return new PlateCarreeRotatedGrid(ni, nj, this.np_lon, this.np_lat, this.lon_shift, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n}\n\n/** A Lambert conformal conic grid with uniform grid spacing */\nclass LambertGrid extends Grid {\n    public readonly lon_0: number;\n    public readonly lat_0: number;\n    public readonly lat_std: [number, number];\n    public readonly ll_x: number;\n    public readonly ll_y: number;\n    public readonly ur_x: number;\n    public readonly ur_y: number;\n\n    private readonly lcc: (a: number, b: number, opts?: {inverse: boolean}) => [number, number];\n    private readonly ll_cache: Cache<[], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a Lambert conformal conic grid\n     * @param ni      - The number of grid points in the i (longitude) direction\n     * @param nj      - The number of grid points in the j (latitude) direction\n     * @param lon_0   - The standard longitude for the projection; this is also the center longitude for the projection\n     * @param lat_0   - The center latitude for the projection\n     * @param lat_std - The standard latitudes for the projection\n     * @param ll_x    - The x coordinate in projection space of the lower-left corner of the grid\n     * @param ll_y    - The y coordinate in projection space of the lower-left corner of the grid\n     * @param ur_x    - The x coordinate in projection space of the upper-right corner of the grid\n     * @param ur_y    - The y coordinate in projection space of the upper-right corner of the grid\n     */\n    constructor(ni: number, nj: number, lon_0: number, lat_0: number, lat_std: [number, number], \n                ll_x: number, ll_y: number, ur_x: number, ur_y: number) {\n        super('lcc', true, ni, nj);\n\n        this.lon_0 = lon_0;\n        this.lat_0 = lat_0;\n        this.lat_std = lat_std;\n        this.ll_x = ll_x;\n        this.ll_y = ll_y;\n        this.ur_x = ur_x;\n        this.ur_y = ur_y;\n        this.lcc = lambertConformalConic({lon_0: lon_0, lat_0: lat_0, lat_std: lat_std});\n\n        const dx = (this.ur_x - this.ll_x) / (this.ni - 1);\n        const dy = (this.ur_y - this.ll_y) / (this.nj - 1);\n\n        this.ll_cache = new Cache(() => {\n            const lons = new Float32Array(this.ni * this.nj);\n            const lats = new Float32Array(this.ni * this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                const x = this.ll_x + i * dx;\n                for (let j = 0; j < this.nj; j++) {\n                    const y = this.ll_y + j * dy;\n\n                    const [lon, lat] = this.lcc(x, y, {inverse: true});\n                    const idx = i + j * this.ni;\n                    lons[idx] = lon;\n                    lats[idx] = lat;\n                }\n            }\n\n            return {lons: lons, lats: lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_x + i * dx;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_y + j * dy;\n            }\n\n            return {x: x, y: y};\n        });\n    }\n\n    public copy(opts?: {ni?: number, nj?: number, ll_x?: number, ll_y?: number, ur_x?: number, ur_y?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_x = opts.ll_x !== undefined ? opts.ll_x : this.ll_x;\n        const ll_y = opts.ll_y !== undefined ? opts.ll_y : this.ll_y;\n        const ur_x = opts.ur_x !== undefined ? opts.ur_x : this.ur_x;\n        const ur_y = opts.ur_y !== undefined ? opts.ur_y : this.ur_y;\n\n        return new LambertGrid(ni, nj, this.lon_0, this.lat_0, this.lat_std, ll_x, ll_y, ur_x, ur_y);\n    }\n\n    /**\n     * Get a list of longitudes and latitudes on the grid (internal method)\n     */\n    public getEarthCoords() {\n        return this.ll_cache.getValue();\n    }\n\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        opts = opts === undefined ? {}: opts;\n        const inverse = 'inverse' in opts ? opts.inverse : false;\n\n        return this.lcc(x, y, {inverse: inverse});\n    }\n\n    public getThinnedGrid(thin_x: number, thin_y: number) {\n        const dx = (this.ur_x - this.ll_x) / this.ni;\n        const dy = (this.ur_y - this.ll_y) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_x = this.ll_x;\n        const ll_y = this.ll_y;\n        const ur_x = this.ur_x - ni_remove * dx;\n        const ur_y = this.ur_y - nj_remove * dy;\n\n        return new LambertGrid(ni, nj, this.lon_0, this.lat_0, this.lat_std, ll_x, ll_y, ur_x, ur_y);\n    }\n}\n\nexport {Grid, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid};\nexport type {GridType};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport Contour, {ContourOptions, ContourLabels, ContourLabelOptions} from \"./Contour\";\nimport {ContourFill, Raster, ContourFillOptions, RasterOptions} from \"./Fill\";\nimport Barbs, {BarbsOptions} from \"./Barbs\";\nimport Paintball, {PaintballOptions} from \"./Paintball\";\nimport Hodographs, {HodographOptions} from './Hodographs';\n\nimport { PlotLayer, MultiPlotLayer } from './PlotLayer';\nimport { WindProfile, WebGLAnyRenderingContext, TypedArray, ContourData } from \"./AutumnTypes\";\nimport { MapLikeType } from \"./Map\";\nimport { ColorMap, ColorMapOptions, bluered, redblue, pw_speed500mb, pw_speed850mb, pw_cape, pw_t2m, pw_td2m, Color, nws_storm_clear_refl } from './Colormap';\nimport { makeColorBar, makePaintballKey, ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions } from \"./ColorBar\";\nimport { RawScalarField, RawVectorField, RawProfileField, VectorRelativeTo, RawVectorFieldOptions} from \"./RawField\";\nimport { Grid, GridType, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid } from './Grid'\n\nimport { initMSModule, FieldContourOpts } from './ContourCreator';\n\nconst colormaps = {\n    bluered: bluered,\n    redblue: redblue,\n    pw_speed500mb: pw_speed500mb,\n    pw_speed850mb: pw_speed850mb,\n    pw_cape: pw_cape,\n    pw_t2m: pw_t2m,\n    pw_td2m: pw_td2m,\n    nws_storm_clear_refl: nws_storm_clear_refl,\n}\n\n/**\n * Initialize the WebAssembly module in autumnplot-gl. It's not strictly necessary to call it first, but if you call it\n * first, you can prevent races when you contour a bunch of fields at once.\n */\nfunction initAutumnPlot() {\n    initMSModule();\n}\n\nexport {PlotComponent,\n        Barbs, BarbsOptions,\n        Contour, ContourOptions, ContourLabels, ContourLabelOptions,\n        ContourFill, Raster, ContourFillOptions, RasterOptions,\n        Paintball, PaintballOptions,\n        Hodographs, HodographOptions, WindProfile,\n        PlotLayer, MultiPlotLayer, \n        MapLikeType,\n        ColorMap, ColorMapOptions, colormaps, makeColorBar, makePaintballKey, Color, ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions,\n        RawScalarField, RawVectorField, RawProfileField,\n        Grid, GridType, VectorRelativeTo, RawVectorFieldOptions, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid,\n        WebGLAnyRenderingContext, TypedArray, ContourData,\n        initAutumnPlot, FieldContourOpts};\n"],"names":["root","factory","exports","module","define","amd","this","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","i","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","log","LN2","t","n","o","obj","left","right","parent","dimension","content","scoreFunction","prototype","push","bubbleUp","length","pop","sinkDown","peek","remove","Error","size","r","l","u","h","kdTree","Array","isArray","sort","slice","toJSON","insert","nearest","f","a","g","p","min","balanceFactor","max","BinaryHeap","Pbf","ieee754","buf","ArrayBuffer","isView","Uint8Array","pos","type","Varint","Fixed64","Bytes","Fixed32","SHIFT_LEFT_32","SHIFT_RIGHT_32","utf8TextDecoder","TextDecoder","readPackedEnd","pbf","readVarint","toNum","low","high","isSigned","makeRoomForExtraLength","startPos","len","extraLen","realloc","writePackedVarint","arr","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","val","readInt32","destroy","readFields","readField","result","end","tag","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readFloat","readDouble","b","readVarintRemainder","readVarint64","readSVarint","num","readBoolean","Boolean","readString","decode","subarray","readUtf8TextDecoder","str","b1","b2","b3","b0","bytesPerSequence","String","fromCharCode","readUtf8","readBytes","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","set","finish","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeString","lead","charCodeAt","writeUtf8","writeBytes","writeRawMessage","fn","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","_scriptDir","Module","document","currentScript","src","undefined","moduleArg","readyPromiseResolve","readyPromiseReject","Promise","resolve","reject","forEach","prop","Object","getOwnPropertyDescriptor","defineProperty","get","abort","moduleOverrides","assign","readBinary","scriptDirectory","indexOf","substr","replace","lastIndexOf","window","importScripts","wasmBinary","wasmMemory","out","console","bind","err","error","legacyModuleProp","assert","WebAssembly","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAPF32","HEAPF64","ABORT","condition","text","updateMemoryViews","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","checkStackCookie","_emscripten_stack_get_end","cookie1","cookie2","ptrToString","h16","h8","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runtimeInitialized","imul","fround","clz32","trunc","runDependencies","runDependencyWatcher","dependenciesFulfilled","runDependencyTracking","what","RuntimeError","FS","init","createDataFile","createPreloadedFile","createLazyFile","open","mkdev","registerDevice","analyzePath","ErrnoError","wasmBinaryFile","path","isDataURI","filename","startsWith","createExportWrapper","name","wasmExports","apply","arguments","EmscriptenEH","CppException","constructor","excPtr","super","excInfo","getExceptionMessage","message","getBinarySync","file","instantiateArrayBuffer","binaryFile","imports","receiver","fetch","then","credentials","response","catch","getBinaryPromise","binary","instantiate","instance","reason","newName","incomming","configurable","isExportedByForceFilesystem","missingGlobal","sym","msg","globalThis","warnOnce","unexportedRuntimeSymbol","callRuntimeCallbacks","callbacks","shift","UTF8Decoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","u0","u1","u2","ch","UTF8ToString","ptr","getExceptionMessageCommon","withStackSave","type_addr_addr","stackAlloc","message_addr_addr","___get_exception_message","type_addr","message_addr","_free","stack","stackSave","ret","stackRestore","toString","padStart","shown","exceptionCaught","exceptionLast","ExceptionInfo","set_type","get_type","set_destructor","destructor","get_destructor","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","set_adjusted_ptr","adjustedPtr","get_adjusted_ptr","get_exception_ptr","___cxa_is_pointer_type","adjusted","embind_charCodes","BindingError","InternalError","findMatchingCatch","args","thrown","setTempRet0","info","thrownType","arg","caughtType","adjusted_ptr_addr","___cxa_can_catch","readLatin1String","awaitingDependencies","registeredTypes","typeDependencies","throwBindingError","throwInternalError","whenDependentTypesAreResolved","myTypes","dependentTypes","getTypeConverters","onComplete","typeConverters","myTypeConverters","registerType","unregisteredTypes","registered","dt","hasOwnProperty","rawType","registeredInstance","options","TypeError","ignoreDuplicateRegistrations","cb","sharedRegisterType","delayFunction","throwInstanceAlreadyDeleted","$$","ptrType","registeredClass","finalizationRegistry","detachFinalizer","handle","releaseClassHandle","count","smartPtr","smartPtrType","rawDestructor","runDestructor","downcastPointer","ptrClass","desiredClass","baseClass","rv","downcast","registeredPointers","getInheritedInstanceCount","keys","registeredInstances","getLiveInheritedInstances","k","deletionQueue","flushPendingDeletes","deleteScheduled","setDelayFunction","getInheritedInstance","class_","upcast","getBasestPointer","makeClassHandle","record","attachFinalizer","create","RegisteredPointer_fromWireType","rawPointer","getPointee","makeDefaultHandle","isSmartPointer","instancePrototype","pointeeType","toType","actualType","getActualType","registeredPointerRecord","call","isConst","constPointerType","pointerType","dp","FinalizationRegistry","warn","leakWarning","cls","captureStackTrace","register","unregister","ClassHandle","createNamedFunction","body","ensureOverloadTable","proto","methodName","humanName","overloadTable","prevFunc","argCount","exposePublicSymbol","numArguments","RegisteredClass","pureVirtualFunctions","upcastPointer","constNoSmartPtrRawPointerToWireType","destructors","isReference","embindRepr","handleClass","genericPointerToWireType","rawConstructor","sharingPolicy","clonedHandle","rawShare","Emval","toHandle","nonConstNoSmartPtrRawPointerToWireType","readPointer","pointer","RegisteredPointer","rawGetPointee","destructorFunction","wasmTable","UnboundTypeError","replacePublicSymbol","wasmTableMirror","getWasmTableEntry","funcPtr","func","dynCall","sig","includes","substring","concat","dynCallLegacy","embind__requireFunction","signature","rawFunction","fp","argCache","getDynCaller","getTypeName","___getTypeName","throwUnboundTypeError","types","unboundTypes","seen","visit","map","join","heap32VectorToArray","firstElement","array","runDestructors","del","craftInvokerFunction","argTypes","classType","cppInvokerFunc","cppTargetFunc","isAsync","isClassMethodFunc","needsDestructorStack","returns","argsList","argsListWired","invokerFnBody","dtorStack","args1","args2","paramName","invokerFn","argumentList","Function","dummy","newFunc","getFunctionName","argsIndex","trim","validateThis","this_","HandleAllocator","allocated","freelist","emval_handles","__emval_decref","reserved","refcount","free","count_emval_handles","toValue","allocate","simpleReadValueFromPointer","v","floatReadValueFromPointer","width","integerReadValueFromPointer","signed","stringToUTF8","outPtr","maxBytesToWrite","heap","outIdx","startIdx","stringToUTF8Array","UTF16Decoder","UTF16ToString","maxIdx","codeUnit","stringToUTF16","startPtr","numCharsToWrite","lengthBytesUTF16","UTF32ToString","utf32","stringToUTF32","lengthBytesUTF32","growMemory","pages","byteLength","grow","baseErrorType","errorName","errorClass","printCharBuffers","codes","embind_init_charCodes","other","leftClass","rightClass","preservePointerOnDelete","clone","getPrototypeOf","id","has","wasmImports","__assert_fail","line","__cxa_begin_catch","___cxa_increment_exception_refcount","__cxa_find_matching_catch_2","__cxa_find_matching_catch_3","arg0","__cxa_throw","__resumeException","_embind_register_bigint","primitiveType","minRange","maxRange","_embind_register_bool","trueValue","falseValue","wt","_embind_register_class","rawPointerType","rawConstPointerType","baseClassRawType","getActualTypeSignature","upcastSignature","downcastSignature","destructorSignature","legalFunctionName","makeLegalFunctionName","base","basePrototype","constructor_body","__derivedClasses","referenceConverter","pointerConverter","constPointerConverter","_embind_register_class_constructor","rawClassType","rawArgTypesAddr","invokerSignature","invoker","rawArgTypes","splice","_embind_register_class_function","rawInvoker","context","isPureVirtual","unboundTypesHandler","Symbol","method","className","memberFunction","_embind_register_class_property","fieldName","getterReturnType","getterSignature","getter","getterContext","setterArgumentType","setterSignature","setter","setterContext","desc","enumerable","_embind_register_emval","_embind_register_float","_embind_register_function","invokerArgsArray","_embind_register_integer","fromWireType","bitshift","isUnsignedType","checkAssertions","toTypeName","_embind_register_memory_view","dataTypeIndex","TA","decodeMemoryView","data","_embind_register_std_string","stdStringIsUTF8","payload","decodeStartPtr","currentBytePtr","stringSegment","valueIsOfTypeString","Uint8ClampedArray","lengthBytesUTF8","_malloc","charCode","_embind_register_std_wstring","charSize","decodeString","encodeString","getHeap","lengthBytesUTF","HEAP","_embind_register_void","isVoid","_emval_decref","_emval_incref","_emval_take_value","impl","emscripten_memcpy_js","dest","copyWithin","emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","x","cutDown","overGrownHeapSize","newSize","fd_close","fd","fd_seek","offset_low","offset_high","whence","newOffset","hi","lo","fd_write","iov","iovcnt","pnum","j","stream","curr","invoke_ii","index","a1","sp","_setThrew","invoke_iii","a2","invoke_v","invoke_vi","invoke_vii","invoke_viii","a3","invoke_viiii","a4","receiveInstance","unshift","clearInterval","callback","removeRunDependency","setInterval","dep","trueModule","instantiateStreaming","createWasm","_emscripten_stack_init","librarySymbol","calledRun","stackCheckInit","run","doRun","postRun","preRun","setTimeout","runCaller","ready","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","__esModule","definition","key","chunkId","toStringTag","scriptUrl","location","scripts","getElementsByTagName","baseURI","self","href","proxyMarker","createEndpoint","releaseProxy","throwMarker","isObject","transferHandlers","Map","canHandle","serialize","port1","port2","MessageChannel","expose","deserialize","port","start","wrap","serialized","isError","ep","addEventListener","ev","fromWireValue","returnValue","reduce","rawValue","proxy","transfers","transferCache","transfer","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","endpoint","isMessagePort","close","target","createProxy","throwIfProxyReleased","isReleased","isProxyReleased","Proxy","_target","requestResponseMessage","_thisArg","rawArgumentList","last","processArguments","construct","processed","WeakMap","handler","serializedValue","fill","random","Number","MAX_SAFE_INTEGER","hex2rgba","hexstr","out_type","match","rgba","filter","parseInt","hex2rgb","rgb2hex","rgb","in_type","rgba_","round","toUpperCase","rgba2hex","rgb2hsv","H","Cmax","Delta","hsv2rgb","hsv","r_prime","g_prime","b_prime","S","V","C","X","getMinZoom","jlat","ilon","thin_fac_base","zoom","thin_fac","zip","iterators","iterator","current","next","some","done","compute_value","make_key","cached_values","JSON","stringify","getValue","normalizeOptions","opts","defaults","entries","isWebGL2Ctx","gl","getParameter","VERSION","layer_worker","Worker","URL","getGLFormatTypeAlignment","is_float16","format","row_alignment","userAgent","platform","macosPlatforms","os","is_webgl2","ext","getExtension","ext_lin","R16F","LUMINANCE","HALF_FLOAT","HALF_FLOAT_OES","navigator","maxTouchPoints","test","R32F","FLOAT","lambertConformalConic","params","F","compute_t","lat","sin_lat","sin","tan","PI","eccen","compute_m","cos","sqrt","semimajor","radians","lon_0","lat_0","lat_std","t_0","lat_1","lat_2","t_1","t_2","m_1","m_2","rho_0","eccen2","eccen4","eccen6","eccen8","Ap","Bp","Cp","Dp","inverse","y","lon","atan2","rho","hypot","sign","chi","atan","sin_2chi","cos_2chi","theta","compute_lcc","lng","toMercatorCoord","fromMercatorCoord","LngLat","lngFromMercatorX","sinh","latFromMercatorY","THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY","THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT","ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER","CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT","CANNOT_MIX_BIGINT_AND_OTHER_TYPES","ITERATOR_PROPERTY_IS_NOT_CALLABLE","REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE","OFFSET_IS_OUT_OF_BOUNDS","uncurryThis","thisArg","ReflectApply","uncurryThisGetter","ReflectGetOwnPropertyDescriptor","ReflectConstruct","ReflectDefineProperty","ReflectGet","ReflectGetPrototypeOf","ReflectHas","ownKeys","ReflectOwnKeys","ReflectSet","setPrototypeOf","ReflectSetPrototypeOf","Reflect","NativeProxy","EPSILON","isFinite","NumberIsFinite","NumberIsNaN","SymbolIterator","species","SymbolSpecies","SymbolToStringTag","for","SymbolFor","NativeObject","ObjectCreate","ObjectDefineProperty","freeze","ObjectFreeze","is","ObjectIs","ObjectPrototype","ObjectPrototype__lookupGetter__","__lookupGetter__","object","NativeTypeError","descriptor","ObjectHasOwn","hasOwn","NativeArray","ArrayIsArray","ArrayPrototype","ArrayPrototypeJoin","ArrayPrototypePush","ArrayPrototypeToLocaleString","toLocaleString","NativeArrayPrototypeSymbolIterator","ArrayPrototypeSymbolIterator","MathAbs","MathTrunc","NativeArrayBuffer","ArrayBufferIsView","ArrayBufferPrototype","ArrayBufferPrototypeSlice","ArrayBufferPrototypeGetByteLength","NativeSharedArrayBuffer","SharedArrayBuffer","SharedArrayBufferPrototypeGetByteLength","TypedArray","TypedArrayFrom","from","TypedArrayPrototype","NativeTypedArrayPrototypeSymbolIterator","TypedArrayPrototypeKeys","TypedArrayPrototypeValues","values","TypedArrayPrototypeEntries","TypedArrayPrototypeSet","TypedArrayPrototypeReverse","reverse","TypedArrayPrototypeFill","TypedArrayPrototypeCopyWithin","TypedArrayPrototypeSort","TypedArrayPrototypeSlice","TypedArrayPrototypeSubarray","TypedArrayPrototypeGetBuffer","TypedArrayPrototypeGetByteOffset","TypedArrayPrototypeGetLength","TypedArrayPrototypeGetSymbolToStringTag","NativeUint8Array","NativeUint16Array","Uint16ArrayFrom","NativeUint32Array","NativeFloat32Array","ArrayIteratorPrototype","ArrayIteratorPrototypeNext","GeneratorPrototypeNext","IteratorPrototype","DataViewPrototype","DataView","getUint16","setUint16","NativeRangeError","RangeError","NativeWeakSet","WeakSet","WeakSetPrototype","WeakSetPrototypeAdd","add","WeakSetPrototypeHas","NativeWeakMap","WeakMapPrototype","WeakMapPrototypeGet","WeakMapPrototypeHas","WeakMapPrototypeSet","arrayIterators","SafeIteratorPrototype","arrayIterator","safeIfNeeded","safe","generators","DummyArrayIteratorPrototype","generator","writable","isObjectLike","isNativeTypedArray","isNativeBigIntTypedArray","typedArrayName","isSharedArrayBuffer","isOrdinaryArray","isCanonicalIntegerIndexString","number","brand","INVERSE_OF_EPSILON","FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE","FLOAT16_EPSILON","FLOAT16_EPSILON_DEVIDED_BY_EPSILON","floatView","uint32View","baseTable","shiftTable","roundToFloat16Bits","absolute","roundTiesToEven","temp","roundToFloat16","mantissaTable","exponentTable","offsetTable","convertToNumber","float16bits","ToIntegerOrInfinity","ToLength","SpeciesConstructor","defaultConstructor","IsDetachedBuffer","defaultCompare","isXNaN","isYNaN","isXPlusZero","isYPlusZero","float16bitsArrays","isFloat16Array","hasFloat16ArrayBrand","assertFloat16Array","assertSpeciesTypedArray","isTargetFloat16Array","isTargetTypedArray","float16bitsArray","getFloat16BitsArray","float16","cloned","Float16Array","byteOffset","copyToArray","TypedArrayPrototypeGetters","input","_byteOffset","_length","isArrayBuffer","list","static","Constructor","uint16","mapFunc","items","at","relativeIndex","with","kept","accumulator","reduceRight","find","findIndex","findLast","findLastIndex","every","targetOffset","targetLength","srcLength","toReversed","clonedFloat16bitsArray","compareFn","sortCompare","toSorted","relativeStart","relativeEnd","final","begin","uint16Subarray","element","separator","Float16ArrayPrototype","WGLBufferBase","verts","n_coords_per_vert","draw_mode","bind_target","dtype","ary","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","getGLDtype","n_verts","createBuffer","bindBuffer","bufferData","STATIC_DRAW","WGLBuffer","ARRAY_BUFFER","bindToProgram","prog_attr_location","enableVertexAttribArray","vertexAttribPointer","WGLTexture","image","texture","createTexture","tex_num","setImageData","mag_filter","LINEAR","texParameteri","TEXTURE_2D","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","bindTexture","internal_format","data_type","RGBA","RGBA_INTEGER","RGB","RGB_INTEGER","RG","RG_INTEGER","RED","RED_INTEGER","LUMINANCE_ALPHA","ALPHA","DEPTH_COMPONENT","DEPTH_STENCIL","getWebGL2Format","pixelStorei","UNPACK_ALIGNMENT","texImage2D","prog_uni_location","gl_tex_num","activate","uniform1i","activeTexture","TEXTURE0","deactivate","delete","deleteTexture","preprocessShader","shader_src","defines","current_defines","define_truth","processed_shader_src","split","match_define","match_ifdef","match_ifndef","def","WGLProgram","vertex_shader_src","fragment_shader_src","prog","frag_shader_src","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","compilationLog","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","linkLog","getProgramInfoLog","compileAndLinkShaders","attributes","uniforms","index_buffer","remove_comments","comment_idx","vtx_shader_match","matchAll","full_match","a_name","getAttribLocation","u_name","type_parts","uniform_loc","getUniformLocation","use","attribute_buffers","uniform_values","textures","useProgram","bindAttributes","setUniforms","bindTextures","uniform1f","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix4fv","sampler_name","draw","drawArrays","drawElements","WGLFramebufferBase","framebuffer","clear","color","clearColor","bindFramebuffer","FRAMEBUFFER","COLOR_BUFFER_BIT","renderTo","height","viewport","copyToTexture","copyTexImage2D","registerGLContext","levels","colors","normalizeColor","overflow_color","underflow_color","getColors","getOpacities","withOpacity","new_colors","new_levels","ic","level_lower","level_upper","new_opacity","new_color","opacity","underflow_opacity","overflow_opacity","ColorMap","diverging","color1","color2","level_min","level_max","n_colors","stops","level_step","crossover","crossover_hsv","color1_hsv","color2_hsv","istop","level","interp_fac","ilev","buildColormap","cm_data","overflow","pw_speed500mb","levl","levu","pw_speed850mb","pw_cape","pw_t2m","pw_td2m","nws_storm_clear_refl","makeTextureImage","colormap","cmap_image","createElement","ctx","getContext","stop","fillStyle","fillRect","makeIndexMap","map_norm","n_lev","input_norm","lev","cmap_norm","inv_cmap_norm","jlev","alpha","polyline_vertex_src","polyline_fragment_src","polyline","line_width","shader_defines","vertices","TRIANGLE_STRIP","extrusion","offsets","scale","offset_scale","min_zoom","cmap_min","cmap_max","format_nonlin","type_nonlin","row_alignment_nonlin","tex_image","cmap","NEAREST","index_map","cmap_nonlin_image","cmap_nonlin_texture","line_texture","line_data","make","lines","makePolyLines","polylines","PolylineCollection","render","matrix","map_zoom","map_bearing","map_pitch","map_width","map_height","enable","BLEND","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","text_vertex_shader_src","text_fragment_shader_src","program_cache","Cache","createAtlas","pbf_glyphs","pbf_glyphs_filtered","glyph","glyph_bins","boxes","area","maxWidth","box","w","spaces","ceil","space","potpack","bin","img_width","img_height","atlas_data","glyphs","glyph_bin","top","atlas_i","atlas_j","advance","glyph_idx","atlas_idx","glyph_M","baseline","atlas","atlas_width","atlas_height","glyph_info","getFontAtlas","url","blob","arrayBuffer","data_buffer","readGlyph","readFontStack","text_collection_opt_defaults","horizontal_align","vertical_align","font_size","text_color","halo_color","halo","text_locs","font_atlas","R8","tl","anchor_data","offset_data","tc_data","i_anch","i_off","i_tc","loc","anchor_x","anchor_y","x_offset","init_i_off","glyph_code","anchors","texcoords","fontstack_url","TextCollection","field","interval","gl_elems","contours","updateField","getContours","contour_data","flat","triggerRepaint","onAdd","getZoom","getCanvas","bearing","getBearing","pitch","getPitch","PlotComponent","contour_label_opt_defaults","n_decimal_places","font_face","font_url_template","text_collection","map_style","getStyle","font_url","label_pos","contour_levels","parseFloat","map_max_zoom","getMaxZoom","contour_label_spacing","min_label_lat","max_label_lat","min_label_lon","max_label_lon","icntr","level_str","contour","c_map","v_ll","dist","v_last","this_dist","n_labels_placed","idist","target_dist","pt1","pt2","pt_lon","pt_lat","tree","min_label_x","max_label_y","max_label_x","min_label_y","thin_grid_width","thin_grid_height","ni_thin_grid","nj_thin_grid","thin_grid_xs","thin_grid_ys","jdy","grid_x","grid_y","ll","label","tc_opts","contourfill_vertex_shader_src","contourfill_fragment_shader_src","fill_texture","image_mag_filter","cmap_mag_filter","tex_data","getTextureData","fill_image","grid","ni","nj","getWGLBuffers","verts_buf","tex_coords_buf","cmap_texture","PlotComponentFill","billboard_vertex_shader_src","billboard_fragment_shader_src","max_zoom","billboard_image","billboard_spec","billboard_color","billboard_size_mult","spec","size_multiplier","wind_textures","n_density_tiers","log2","n_inaccessible_tiers","trim_inaccessible","show_field","getThinnedField","u_thin","v_thin","u_image","v_image","setup","thinned_field","getWGLBillboardBuffers","proj_rotation_tex","getVectorRotationTexture","proj_rot_texture","bb_size","BB_HEIGHT","bb_width","BB_WIDTH","BB_TEX_WIDTH","bb_height","BB_TEX_HEIGHT","BB_MAG_BIN_SIZE","BB_MAG_WRAP","BARB_DIMS","BB_MAG_MAX","BARB_TEXTURE","fields","barb_billboards","canvas","drawWindBarb","tipx","tipy","mag","elem_full_size","elem_spacing","beginPath","arc","stroke","elem_pos","mag_countdown","staff_length","n_flags","n_full_barbs","moveTo","lineTo","last_was_flag","first_elem","lineWidth","miterLimit","ibarb","_createBarbTexture","barb_image","BillboardCollection","paintball_vertex_shader_src","paintball_fragment_shader_src","HODO_BG_DIMS","HODO_BG_TEXTURE","HODO_CMAP","profile_field","bgcolor","hodo_scale","LINE_WIDTH","bg_size","line_elems","bg_billboard","getStormMotionGrid","profiles","hodo_polyline","prof","ipt","hodo_line","sm_polyline","sm_mag","sm_ang","sm_line","irng","ctr_x","ctr_y","arrow_size","_createHodoBackgroundTexture","bg_image","repaint","PlotLayer","PlotLayerBase","field_key","res","setActiveKey","getKeys","addField","tagname","elem","createElementNS","setAttribute","appendChild","makeColorBar","ticks","orientation","fontface","tickfontsize","ticklabelsize","tick_dir","tick_direction","bar_left","bar_top","bar_width","bar_height","bar_right","bar_bottom","bar_middle","bar_low_arrow","bar_high_arrow","getNChar","chars_left","chars_right","need_overflow","bar_long_size","bar_cross_size","bar_long_pad","gtickattrs","gbar","transform","gticks","icolor","underflow_attrs","points","overflow_attrs","point_list","labelattrs","first_level","last_level","diffs","ilevel","tickattrs","gtick","x2","y2","dy","style","textContent","makePaintballKey","labels","n_cols","n_rows","irow","icol","swatch_height","msm_promise","initMSModule","contourCreator","msm","grid_coords","getGridCoords","grid_data","FloatList","resize","levels_cpp","getContourLevelsFloat32","ilvl","contours_","makeContoursFloat32","contour_point_list","pt","getArrayConstructor","contour_cache","raw_data","aggregateFields","mapGenerator","gen","arrayType","zipped_args","agg_data","RawScalarField","relative_to","raw_u","raw_v","thin_x","thin_y","new_grid","getThinnedGrid","thinGrid","new_data","idx_old","thin_u","thin_v","RawVectorField","smu","smv","is_conformal","buffer_cache","new_ni","new_nj","native_grid","texcoord_margin_r","texcoord_margin_s","grid_cell_size_multiplier","getEarthCoords","field_lats","field_lons","makeDomainVerticesAndTexCoords","domain_coords","icd","grid_cell_size","makeWGLDomainBuffers","copy","billboard_buffer_cache","makeBBElements","bb_elements","makeWGLBillboardBuffers","vector_rotation_cache","coords","rot_vals","lats","lons","x_pertlon","y_pertlon","rot_img","makeVectorRotationTexture","ll_lon","ll_lat","ur_lon","ur_lat","dlon","dlat","ll_cache","gc_cache","PlateCarreeGrid","ni_remove","nj_remove","Grid","np_lon","np_lat","lon_shift","llrot","sin_np_lat","cos_np_lat","lon_p","lat_p","sin_lat_p","cos_lat_p","sin_lon_p_diff","cos_lon_p_diff","asin","compute_rotation_inverse","cos_lat","sin_lon_diff","cos_lon_diff","compute_rotation","rotateSphere","PlateCarreeRotatedGrid","ll_x","ll_y","ur_x","ur_y","lcc","dx","LambertGrid","colormaps","bluered","redblue","initAutumnPlot"],"sourceRoot":""}