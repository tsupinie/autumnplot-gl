{"version":3,"file":"autumnplot-gl.js","mappings":"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AAyBvZ,GAAmC,yBAG5FrC,GAA4B,KAAOA,GAA4BqC,GAAsC,4BACrG+D,GAAYjE,EAAoB,aAChCmE,GAAenE,EAAoB,gBACnC0D,GAAa1D,EAAoB,cAGjCqP,IADwBrP,EAAoB,wBACNA,EAAoB,uCAE1D4D,IADsC5D,EAAoB,sCAC/B7F,EAAiC,yBAAI6F,EAAoB,4BACpFuG,GAAmBvG,EAAoB,mBACvCyF,GAAyBzF,EAAoB,yBAC7CwY,GAAYre,EAAkB,UAAI6F,EAAoB,aACvC7F,EAAqB,aAAI6F,EAAoB,gBAyGpC,CAC1B,gBACA,uBACA,yBACA,uBACA,yBACA,iBACA,iBACA,sBACA,sBACA,aACA,SACA,aACA,eACA,WACA,UACA,WACA,YACA,YACA,YACA,YACA,eACA,gBACA,gBACA,iBACA,aACA,eACA,gBACA,4BACA,gBACA,UACA,UACA,oBACA,aACA,yBACA,kBACA,mBACA,uBACA,sBACA,mBACA,YACA,cACA,YACA,cACA,YACA,oBACA,aACA,cACA,eACA,aACA,WACA,QACA,QACA,gBACA,iBACA,mBACA,0BACA,oBACA,iBACA,qBACA,cACA,iBACA,iBACA,SACA,SACA,SACA,eACA,qBACA,mBACA,gBACA,gBACA,kBACA,sBACA,qBACA,2BACA,yBACA,kBACA,wBACA,wBACA,qBACA,6BACA,6BACA,0BACA,6BACA,iCACA,yCACA,4BACA,oCACA,oBACA,iCACA,yCACA,gCACA,wCACA,6BACA,qCACA,0BACA,mCACA,wBACA,eACA,wCACA,sBACA,iCACA,yCACA,wCACA,qBACA,gCACA,wCACA,6BACA,uBACA,+BACA,oCACA,uBACA,UACA,+BACA,uBACA,uBACA,WACA,cACA,eACA,aACA,gBACA,iBACA,yBACA,yBACA,uBACA,iBACA,sBACA,wBACA,uBACA,aACA,cACA,gBACA,sBACA,cACA,kBACA,mBACA,yBACA,uBACA,aACA,mBACA,oBACA,YACA,eACA,sBACA,yBACA,8BACA,sCACA,uCACA,kCACA,gCACA,qBACA,gCACA,iCACA,iCACA,gBACA,4BACA,0BACA,6CACA,uBACA,iCACA,+BACA,eACA,6BACA,qBACA,cACA,iBACA,YACA,eACA,cACA,WACA,sBACA,qBACA,sBACA,cACA,mBACA,4BACA,8BACA,uBACA,4BACA,4BACA,2BACA,2BACA,sCACA,yCACA,yBACA,oBACA,iCACA,gBACA,qBACA,kBACA,kBACA,kBACA,mBACA,cACA,8BACA,sBACA,mBACA,kBACA,6BACA,kBACA,gBACA,eACA,SACA,SACA,wBACA,oBAEoBlF,SA7uEtB,SAA8BoH,GACF,oBAAfE,YAA+BpH,OAAOC,yBAAyBmH,WAAYF,IACpFlH,OAAOE,eAAekH,WAAYF,EAAK,CACrCH,cAAc,EACd5G,MAGE,IAAIgH,EAAM,KAAKD,mJAIXwX,EAAgBxX,EACfwX,EAAc3Z,WAAW,OAC5B2Z,EAAgB,IAAMxX,GAExBC,GAAO,8CAA8CuX,MACjD1X,EAA4BE,KAC9BC,GAAO,4FAETE,GAASF,EAEX,IAKJG,EAAwBJ,EAC1B,IAotEA,IA2KIyX,GAQJ,SAASC,KA35FT,IACMrnB,EA85FJknB,KA75FAld,EAAoB,IAAN,GADVhK,EAAMsL,QAKC,GAAPtL,IACFA,GAAO,GAKTuK,EAAS,GAAO,GAAM,SACtBA,EAAU,EAAM,GAAM,GAAM,WAE5BA,EAAQ,GAAY,UAm5FtB,CAEA,SAAS+c,KAeP,SAASC,IAGHH,KACJA,IAAY,EACZxf,EAAkB,WAAI,EAElB8C,IA13FNV,GAAQ+B,GACRA,GAAqB,EAErBV,IAGA2E,EAAqBnE,GAw3FnB3D,EAAoBN,GAChBA,EAA6B,sBAAGA,EAA6B,uBAEjEoC,GAAQpC,EAAc,MAAG,4GAx3F7B,WAGE,GAFAyD,IAEIzD,EAAgB,QAElB,IADgC,mBAArBA,EAAgB,UAAiBA,EAAgB,QAAI,CAACA,EAAgB,UAC1EA,EAAgB,QAAErJ,QAmBPuW,EAlBHlN,EAAgB,QAAEsI,QAmBnCpE,EAAc2a,QAAQ3R,GADxB,IAAsBA,EAdpB9E,EAAqBlE,EACvB,CA+2FI0b,IACF,CA9BIpb,EAAkB,IAIpBib,KAr3FJ,WACE,GAAIzf,EAAe,OAEjB,IAD+B,mBAApBA,EAAe,SAAiBA,EAAe,OAAI,CAACA,EAAe,SACvEA,EAAe,OAAErJ,QA8BPuW,EA7BHlN,EAAe,OAAEsI,QA8BjCtE,EAAa6a,QAAQ3R,GADvB,IAAqBA,EA1BnB9E,EAAqBpE,EACvB,CA+2FE6b,GAGIrb,EAAkB,IAuBlBxE,EAAkB,WACpBA,EAAkB,UAAE,cACpB8f,YAAW,WACTA,YAAW,WACT9f,EAAkB,UAAE,GACtB,GAAG,GACH2f,GACF,GAAG,IAGHA,IAEFlc,KACF,CA+BA,GA1QwB,CACtB,MACA,cACA,YACA,eACA,YACA,eACA,mBACA,sBACA,kBACA,gBACA,oBACA,gBACA,kBACA,cACA,MACA,MACA,WACA,QACA,aACA,cACA,aACA,YACA,eACA,cACA,cACA,mBACA,mBACA,6BACA,cACA,aACA,aACA,MACA,qBACA,kBACA,gCACA,6BACA,cACA,iBACA,MACA,YACA,UACA,SACA,WACA,eACA,qBACA,gBACA,eACA,UACA,sBACA,kBACA,YACA,gBACA,mBACA,sBACA,WACA,WACA,OACA,UACA,cACA,oBACA,eACA,oBACA,eACA,kBACA,eACA,gBACA,gBACA,mBACA,gBACA,gBACA,mBACA,WACA,qBACA,4BACA,0BACA,aACA,sBACA,aACA,yBACA,gBACA,kBACA,gBACA,oBACA,4BACA,6BACA,6BACA,sBACA,UACA,OACA,WACA,iBACA,0BACA,KACA,QACA,MACA,SACA,SACA,uBACA,4BACA,0BACA,KACA,qCACA,KACA,OACA,MACA,OACA,WACA,MACA,UACA,eACA,sBACA,gBACA,eACA,qBACA,oBACA,kBACA,uBACA,mBACA,qBACA,sBACA,qBACA,gCACA,mBACA,wBACA,mBACA,cACA,kBACA,sBACA,wBACA,mBACA,mBACA,sBACA,wBACA,sBACA,qBACA,sBACA,cACA,sBACA,aACA,sBACA,qBACA,eACA,8BACA,4BACA,6BACA,cACA,iBACA,UACA,uBACA,0BACA,uBACA,uBACA,gBACA,gBACA,gBACA,gBACA,aACA,sBACA,oBACA,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","sources":["webpack://apgl/webpack/universalModuleDefinition","webpack://apgl/./node_modules/ieee754/index.js","webpack://apgl/./node_modules/kd-tree-javascript/kdTree-min.js","webpack://apgl/./node_modules/pbf/index.js","webpack://apgl/./src/glsl/billboard_fragment.glsl","webpack://apgl/./src/glsl/billboard_vertex.glsl","webpack://apgl/./src/glsl/colormap.glsl","webpack://apgl/./src/glsl/contourfill_fragment.glsl","webpack://apgl/./src/glsl/contourfill_vertex.glsl","webpack://apgl/./src/glsl/paintball_fragment.glsl","webpack://apgl/./src/glsl/paintball_vertex.glsl","webpack://apgl/./src/glsl/polyline_fragment.glsl","webpack://apgl/./src/glsl/polyline_vertex.glsl","webpack://apgl/./src/glsl/text_fragment.glsl","webpack://apgl/./src/glsl/text_vertex.glsl","webpack://apgl/./src/cpp/marchingsquares.js","webpack://apgl/webpack/bootstrap","webpack://apgl/webpack/runtime/compat get default export","webpack://apgl/webpack/runtime/define property getters","webpack://apgl/webpack/runtime/get javascript chunk filename","webpack://apgl/webpack/runtime/global","webpack://apgl/webpack/runtime/hasOwnProperty shorthand","webpack://apgl/webpack/runtime/make namespace object","webpack://apgl/webpack/runtime/publicPath","webpack://apgl/webpack/runtime/jsonp chunk loading","webpack://apgl/./node_modules/comlink/dist/esm/comlink.mjs","webpack://apgl/./src/utils.ts","webpack://apgl/./src/AutumnTypes.ts","webpack://apgl/./src/PlotComponent.ts","webpack://apgl/./src/Map.ts","webpack://apgl/./node_modules/autumn-wgl/lib/WGLBuffer.js","webpack://apgl/./node_modules/autumn-wgl/lib/utils.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLTexture.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLProgram.js","webpack://apgl/./node_modules/autumn-wgl/lib/WGLFramebuffer.js","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/messages.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/primordials.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/arrayIterator.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/is.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/brand.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/converter.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/_util/spec.mjs","webpack://apgl/./node_modules/@petamoriken/float16/src/Float16Array.mjs","webpack://apgl/./src/Color.ts","webpack://apgl/./src/Colormap.ts","webpack://apgl/./src/PolylineCollection.ts","webpack://apgl/./src/TextCollection.ts","webpack://apgl/./node_modules/potpack/index.js","webpack://apgl/./src/Contour.ts","webpack://apgl/./src/Fill.ts","webpack://apgl/./src/BillboardCollection.ts","webpack://apgl/./src/Barbs.ts","webpack://apgl/./src/Paintball.ts","webpack://apgl/./src/Hodographs.ts","webpack://apgl/./src/PlotLayer.ts","webpack://apgl/./src/ColorBar.ts","webpack://apgl/./src/ContourCreator.ts","webpack://apgl/./src/RawField.ts","webpack://apgl/./src/Grid.ts","webpack://apgl/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apgl\"] = factory();\n\telse\n\t\troot[\"apgl\"] = factory();\n})(this, () => {\nreturn ","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/**\n * k-d Tree JavaScript - V 1.01\n *\n * https://github.com/ubilabs/kd-tree-javascript\n *\n * @author Mircea Pricop <pricop@ubilabs.net>, 2012\n * @author Martin Kleppe <kleppe@ubilabs.net>, 2012\n * @author Ubilabs http://ubilabs.net, 2012\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\n */!function(t,n){\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(\"object\"==typeof exports?exports:t)}(this,function(t){function n(t,n,o){this.obj=t,this.left=null,this.right=null,this.parent=o,this.dimension=n}function o(t){this.content=[],this.scoreFunction=t}o.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var n=this.content.length,o=0;o<n;o++)if(this.content[o]==t){var i=this.content.pop();return void(o!=n-1&&(this.content[o]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(o):this.sinkDown(o)))}throw new Error(\"Node not found.\")},size:function(){return this.content.length},bubbleUp:function(t){for(var n=this.content[t];t>0;){var o=Math.floor((t+1)/2)-1,i=this.content[o];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[o]=n,this.content[t]=i,t=o}},sinkDown:function(t){for(var n=this.content.length,o=this.content[t],i=this.scoreFunction(o);;){var e=2*(t+1),r=e-1,l=null;if(r<n){var u=this.content[r],h=this.scoreFunction(u);h<i&&(l=r)}if(e<n){var s=this.content[e];this.scoreFunction(s)<(null==l?i:h)&&(l=e)}if(null==l)break;this.content[t]=this.content[l],this.content[l]=o,t=l}}},t.kdTree=function(t,i,e){function r(t,o,i){var l,u,h=o%e.length;return 0===t.length?null:1===t.length?new n(t[0],h,i):(t.sort(function(t,n){return t[e[h]]-n[e[h]]}),l=Math.floor(t.length/2),u=new n(t[l],h,i),u.left=r(t.slice(0,l),o+1,u),u.right=r(t.slice(l+1),o+1,u),u)}var l=this;Array.isArray(t)?this.root=r(t,0,null):function(t){function n(t){t.left&&(t.left.parent=t,n(t.left)),t.right&&(t.right.parent=t,n(t.right))}l.root=t,n(l.root)}(t),this.toJSON=function(t){t||(t=this.root);var o=new n(t.obj,t.dimension,null);return t.left&&(o.left=l.toJSON(t.left)),t.right&&(o.right=l.toJSON(t.right)),o},this.insert=function(t){function o(n,i){if(null===n)return i;var r=e[n.dimension];return t[r]<n.obj[r]?o(n.left,n):o(n.right,n)}var i,r,l=o(this.root,null);null!==l?(i=new n(t,(l.dimension+1)%e.length,l),r=e[l.dimension],t[r]<l.obj[r]?l.left=i:l.right=i):this.root=new n(t,0,null)},this.remove=function(t){function n(o){if(null===o)return null;if(o.obj===t)return o;var i=e[o.dimension];return t[i]<o.obj[i]?n(o.left,o):n(o.right,o)}function o(t){function n(t,o){var i,r,l,u,h;return null===t?null:(i=e[o],t.dimension===o?null!==t.left?n(t.left,o):t:(r=t.obj[i],l=n(t.left,o),u=n(t.right,o),h=t,null!==l&&l.obj[i]<r&&(h=l),null!==u&&u.obj[i]<h.obj[i]&&(h=u),h))}var i,r,u;if(null===t.left&&null===t.right)return null===t.parent?void(l.root=null):(u=e[t.parent.dimension],void(t.obj[u]<t.parent.obj[u]?t.parent.left=null:t.parent.right=null));null!==t.right?(r=(i=n(t.right,t.dimension)).obj,o(i),t.obj=r):(r=(i=n(t.left,t.dimension)).obj,o(i),t.right=t.left,t.left=null,t.obj=r)}var i;null!==(i=n(l.root))&&o(i)},this.nearest=function(t,n,r){function u(o){function r(t,o){f.push([t,o]),f.size()>n&&f.pop()}var l,h,s,c,a=e[o.dimension],g=i(t,o.obj),p={};for(c=0;c<e.length;c+=1)c===o.dimension?p[e[c]]=t[e[c]]:p[e[c]]=o.obj[e[c]];h=i(p,o.obj),null!==o.right||null!==o.left?(u(l=null===o.right?o.left:null===o.left?o.right:t[a]<o.obj[a]?o.left:o.right),(f.size()<n||g<f.peek()[1])&&r(o,g),(f.size()<n||Math.abs(h)<f.peek()[1])&&null!==(s=l===o.left?o.right:o.left)&&u(s)):(f.size()<n||g<f.peek()[1])&&r(o,g)}var h,s,f;if(f=new o(function(t){return-t[1]}),r)for(h=0;h<n;h+=1)f.push([null,r]);for(l.root&&u(l.root),s=[],h=0;h<Math.min(n,f.content.length);h+=1)f.content[h][0]&&s.push([f.content[h][0].obj,f.content[h][1]]);return s},this.balanceFactor=function(){function t(n){return null===n?0:Math.max(t(n.left),t(n.right))+1}function n(t){return null===t?0:n(t.left)+n(t.right)+1}return t(l.root)/(Math.log(n(l.root))/Math.log(2))}},t.BinaryHeap=o});\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\n// Threshold chosen based on both benchmarking and knowledge about browser string\n// data structures (which currently switch structure types at 12 bytes or more)\nvar TEXT_DECODER_MIN_LENGTH = 12;\nvar utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf8');\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos;\n        var pos = this.pos;\n        this.pos = end;\n\n        if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {\n            // longer strings are fast with the built-in browser TextDecoder API\n            return readUtf8TextDecoder(this.buf, pos, end);\n        }\n        // short strings are fast with our custom implementation\n        return readUtf8(this.buf, pos, end);\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction readUtf8TextDecoder(buf, pos, end) {\n    return utf8TextDecoder.decode(buf.subarray(pos, end));\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","module.exports = \"varying highp vec2 v_tex_coord;\\n\\n#ifdef COLORMAP\\nvarying highp float v_mag;\\n#else\\nuniform lowp vec4 u_bb_color;\\n#endif\\n\\nuniform sampler2D u_sampler;\\n\\nvoid main() {\\n    lowp vec4 tex_color = texture2D(u_sampler, v_tex_coord);\\n\\n    lowp vec4 color;\\n#ifdef COLORMAP\\n    color = apply_colormap(v_mag);\\n#else\\n    color = u_bb_color;\\n#endif\\n\\n    color.a *= tex_color.a;\\n    gl_FragColor = color; // mix(vec4(1.0, 0.0, 0.0, 0.5), color, tex_color.a);\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec3 a_pos;    // Has position, zoom, and corner info\\nattribute vec2 a_tex_coord;\\nuniform lowp float u_bb_size;\\nuniform lowp float u_map_aspect;\\nuniform lowp float u_zoom;\\nuniform highp float u_map_bearing;\\nuniform lowp float u_bb_width;  // Normalized by texture width\\nuniform lowp float u_bb_height; // Normalized by texture height\\nuniform highp float u_bb_mag_bin_size;\\n//uniform highp float u_bb_max_mag;\\nuniform highp float u_bb_mag_wrap;\\n\\nuniform sampler2D u_u_sampler;\\nuniform sampler2D u_v_sampler;\\nuniform sampler2D u_rot_sampler;\\n\\nvarying highp vec2 v_tex_coord;\\n#ifdef COLORMAP\\nvarying highp float v_mag;\\n#endif\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nmat4 rotationZMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( c,  s,  0., 0.,\\n                -s,  c,  0., 0.,\\n                 0., 0., 1., 0.,\\n                 0., 0., 0., 1.);\\n}\\n\\nmat4 rotationXMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( 1.,  0., 0., 0.,\\n                 0.,  c,  s,  0.,\\n                 0., -s,  c,  0.,\\n                 0.,  0., 0., 1.);\\n}\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    vec4 pivot_pos = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0);\\n    highp float zoom_corner = a_pos.z;\\n    lowp float min_zoom = floor(zoom_corner / 4.0);\\n    lowp float corner = mod(zoom_corner, 4.0);\\n\\n    highp float u = texture2D(u_u_sampler, a_tex_coord).r;\\n    highp float v = texture2D(u_v_sampler, a_tex_coord).r;\\n    highp float rot = texture2D(u_rot_sampler, a_tex_coord).r;\\n\\n    lowp float bb_aspect = u_bb_width / u_bb_height;\\n    lowp float ang = (abs(u) < 1e-6 && abs(v) < 1e-6) ? 0. : atan(v, u) - 3.141592654 / 2.0;\\n    highp float mag = length(vec2(u, v));\\n#ifdef COLORMAP\\n    v_mag = mag;\\n#endif\\n    mag = floor(mag / u_bb_mag_bin_size + 0.5) * u_bb_mag_bin_size;\\n\\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\\n    vec2 texcoord = vec2(0.0, 0.0);\\n    \\n    if (u_zoom >= min_zoom) {\\n        // Subtracting a small number off of u_bb_mag_wrap fixes (I think) a precision issue on some GPUs\\n        vec2 tex_loc = vec2(mod(mag, u_bb_mag_wrap - 1e-5) / u_bb_mag_bin_size * u_bb_width, floor(mag / (u_bb_mag_wrap - 1e-5)) * u_bb_height);\\n\\n        if (corner < 0.5) {\\n            offset = vec4(-u_bb_size, u_bb_size, 0., 0.);\\n            texcoord = tex_loc;\\n        }\\n        else if (corner < 1.5) {\\n            offset = vec4(u_bb_size, u_bb_size, 0., 0.);\\n            texcoord = tex_loc + vec2(u_bb_width, 0.0);\\n        }\\n        else if (corner < 2.5) {\\n            offset = vec4(-u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\\n            texcoord = tex_loc + vec2(0.0, u_bb_height);\\n        }\\n        else if (corner < 3.5) {\\n            offset = vec4(u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\\n            texcoord = tex_loc + vec2(u_bb_width, u_bb_height);\\n        }\\n\\n        mat4 barb_rotation = rotationZMatrix(ang + radians(u_map_bearing) - rot);\\n        mat4 map_stretch_matrix = scalingMatrix(1.0, 1. / u_map_aspect, 1.0);\\n        offset = map_stretch_matrix * barb_rotation * offset;\\n    }\\n\\n    gl_Position = pivot_pos + offset;\\n    v_tex_coord = texcoord;\\n}\"","module.exports = \"\\nuniform sampler2D u_cmap_sampler;\\nuniform sampler2D u_cmap_nonlin_sampler;\\nuniform highp float u_cmap_min;\\nuniform highp float u_cmap_max;\\nuniform highp vec4 u_underflow_color;\\nuniform highp vec4 u_overflow_color;\\nuniform int u_n_index;\\n\\nlowp vec4 apply_colormap(highp float value) {\\n    lowp float normed_val = (value - u_cmap_min) / (u_cmap_max - u_cmap_min);\\n    \\n    lowp vec4 color;\\n    if (normed_val < 0.0) {\\n        color = u_underflow_color;\\n    }\\n    else if (normed_val > 1.0) {\\n        color = u_overflow_color;\\n    }\\n    else {\\n        lowp float index_buffer = 1. / (2. * float(u_n_index));\\n        normed_val = index_buffer + normed_val * (1. - 2. * index_buffer); // Chop off the half pixels on either end of the texture\\n        highp float nonlin_val = texture2D(u_cmap_nonlin_sampler, vec2(normed_val, 0.5)).r;\\n        color = texture2D(u_cmap_sampler, vec2(nonlin_val, 0.5));\\n    }\\n\\n    return color;\\n}\"","module.exports = \"varying highp vec2 v_tex_coord;\\n\\nuniform sampler2D u_fill_sampler;\\nuniform highp float u_opacity;\\n\\nbool isnan(highp float val) {\\n    return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\\n}\\n\\nvoid main() {\\n    highp float fill_val = texture2D(u_fill_sampler, v_tex_coord).r;\\n\\n    if (isnan(fill_val)) {\\n        discard;\\n    }\\n\\n    lowp vec4 color = apply_colormap(fill_val);\\n    color.a = color.a * u_opacity;\\n    gl_FragColor = color;\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_tex_coord;\\n\\nvarying highp vec2 v_tex_coord;\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    gl_Position = u_matrix * vec4(a_pos + globe_offset, 0.0, 1.0);\\n    v_tex_coord = a_tex_coord;\\n}\"","module.exports = \"#define MAX_N_COLORS 24\\n\\nvarying highp vec2 v_tex_coord;\\n\\nuniform sampler2D u_fill_sampler;\\nuniform lowp vec4 u_colors[MAX_N_COLORS];\\nuniform int u_num_colors;\\nuniform highp float u_opacity;\\n\\nvoid main() {\\n    highp float fill_val = texture2D(u_fill_sampler, v_tex_coord).r;\\n    \\n    if (fill_val < 0.5) {\\n        discard;\\n    }\\n\\n    lowp vec4 color = vec4(0., 0., 0., 0.);\\n\\n    for (int nclr = 0; nclr < MAX_N_COLORS ; nclr++) {\\n        if (nclr >= u_num_colors || fill_val < 0.99) { break; }\\n\\n        lowp float mem_active = mod(fill_val, 2.);\\n        color = mix(color, u_colors[nclr], mem_active);\\n        fill_val = floor(fill_val / 2.);\\n    }\\n\\n    color.a = color.a * u_opacity;\\n    gl_FragColor = color;\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_tex_coord;\\n\\nvarying highp vec2 v_tex_coord;\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    gl_Position = u_matrix * vec4(a_pos + globe_offset, 0.0, 1.0);\\n    v_tex_coord = a_tex_coord;\\n}\"","module.exports = \"\\nuniform sampler2D u_dash_sampler;\\n\\n#ifndef DATA\\nuniform lowp vec4 u_color;\\n#endif\\n\\nuniform lowp float u_line_width;\\nuniform lowp float u_zoom;\\nuniform int u_dash_pattern_length;\\n\\n#ifdef DATA\\nvarying highp float v_data;\\n#endif\\n\\nvarying highp float v_dist;\\nvarying lowp float v_cross;\\n\\nvoid main() {\\n    lowp float dash_x = fract(v_dist * 2e2 * pow(2., floor(u_zoom)) / float(u_dash_pattern_length));\\n    lowp float dash = texture2D(u_dash_sampler, vec2(dash_x, 0.5)).r;\\n\\n    lowp vec4 color;\\n#ifdef DATA\\n    color = apply_colormap(v_data);\\n#else\\n    color = u_color;\\n#endif\\n\\n    lowp float feather = clamp((1. - abs(v_cross)) * u_line_width, 0., 1.);\\n    color.a *= (dash >= 1. ? 1. : 0.) * feather;\\n\\n    gl_FragColor = color;\\n}\"","module.exports = \"uniform mat4 u_matrix;\\nuniform int u_offset;\\n\\nattribute vec3 a_pos;\\nattribute vec2 a_extrusion;\\nattribute float a_data;\\n\\n#ifdef ZOOM\\nattribute float a_min_zoom;\\n#endif\\n\\n#ifdef OFFSET\\nattribute vec2 a_offset;\\n#endif\\n\\nuniform lowp float u_line_width;\\nuniform lowp float u_map_width;\\nuniform lowp float u_map_height;\\nuniform highp float u_map_bearing;\\n\\n#ifdef ZOOM\\nuniform lowp float u_zoom;\\n#endif\\n\\n#ifdef OFFSET\\nuniform lowp float u_offset_scale;\\n#endif\\n\\n#ifdef DATA\\nvarying highp float v_data;\\n#endif\\n\\nvarying highp float v_dist;\\nvarying lowp float v_cross;\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nmat4 rotationZMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( c,  s,  0., 0.,\\n                -s,  c,  0., 0.,\\n                 0., 0., 1., 0.,\\n                 0., 0., 0., 1.);\\n}\\n\\nmat4 rotationXMatrix(float angle) {\\n    float s = sin(angle);\\n    float c = cos(angle);\\n\\n    return mat4( 1.,  0., 0., 0.,\\n                 0.,  c,  s,  0.,\\n                 0., -s,  c,  0.,\\n                 0.,  0., 0., 1.);\\n}\\n\\nvoid main() {\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    v_dist = abs(a_pos.z);\\n    v_cross = sign(a_pos.z);\\n    vec4 center_pos = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0);\\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\\n\\n#ifdef ZOOM\\n    if (u_zoom >= a_min_zoom) {\\n#endif\\n\\n        vec2 offset_ext = u_line_width * 2. * a_extrusion;\\n\\n        mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\\n        mat4 rotation_matrix = rotationZMatrix(radians(u_map_bearing));  \\n        offset = map_stretch_matrix * rotation_matrix * vec4(offset_ext, 0., 0.);\\n\\n#ifdef OFFSET\\n        map_stretch_matrix = scalingMatrix(1., u_map_width / u_map_height, 1.);\\n        vec2 offset_offset = u_offset_scale * a_offset;\\n        offset += map_stretch_matrix * rotation_matrix * vec4(offset_offset, 0., 0.);\\n#endif\\n\\n#ifdef ZOOM\\n    }\\n#endif\\n\\n    gl_Position = center_pos + offset;\\n\\n#ifdef DATA\\n    v_data = a_data;\\n#endif\\n}\"","module.exports = \"\\nvarying highp vec2 v_tex_coord;\\nuniform sampler2D u_sdf_sampler;\\nuniform int u_is_halo;\\n\\nuniform lowp vec4 u_text_color;\\nuniform lowp vec4 u_halo_color;\\n\\n#define SDF_FILL 0.75\\n#define SDF_HALO 0.45\\n\\nvoid main() {\\n    highp float sdf_val = texture2D(u_sdf_sampler, v_tex_coord).r;\\n\\n    lowp float step_width = 0.08;\\n    lowp float alpha = smoothstep(SDF_FILL - step_width, SDF_FILL + step_width, sdf_val);\\n\\n    lowp vec4 color = u_is_halo == 1 ? u_halo_color : u_text_color;\\n\\n    if (u_is_halo == 1) {\\n        alpha = min(smoothstep(SDF_HALO - step_width, SDF_HALO + step_width, sdf_val), 1.0 - alpha);\\n    }\\n\\n    color.a *= alpha;\\n    gl_FragColor = color;\\n}\"","module.exports = \"\\nuniform mat4 u_matrix;\\nuniform int u_offset;\\nuniform highp float u_map_width;\\nuniform highp float u_map_height;\\nuniform highp float u_map_zoom;\\nuniform highp float u_font_size;\\n\\nattribute vec3 a_pos;\\nattribute vec2 a_offset;\\nattribute vec2 a_tex_coord;\\n\\nvarying highp vec2 v_tex_coord;\\n\\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\\n    return mat4(x_scale, 0.0,     0.0,     0.0,\\n                0.0,     y_scale, 0.0,     0.0,\\n                0.0,     0.0,     z_scale, 0.0,\\n                0.0,     0.0,     0.0,     1.0);\\n}\\n\\nvoid main() {\\n    float min_zoom = a_pos.z;\\n\\n    vec2 offset = a_offset;\\n    if (u_map_zoom < min_zoom)\\n        offset = vec2(0., 0.);\\n\\n    float globe_width = 1.;\\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\\n\\n    mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\\n\\n    gl_Position = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0) + u_font_size / 12. * 1.5 * map_stretch_matrix * vec4(offset, 0., 0.);\\n    v_tex_coord = a_tex_coord;\\n}\"","\nvar Module = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(moduleArg = {}) {\n\n// include: shell.js\n// The Module object: Our interface to the outside world. We import\n// and export values on it. There are various ways Module can be used:\n// 1. Not defined. We create it here\n// 2. A function parameter, function(Module) { ..generated code.. }\n// 3. pre-run appended it, var Module = {}; ..generated code..\n// 4. External script tag defines var Module.\n// We need to check if Module already exists (e.g. case 3 above).\n// Substitution will be replaced with actual code on later stage of the build,\n// this way Closure Compiler will not mangle it (e.g. case 4. above).\n// Note that if you want to run closure, and also to use Module\n// after the generated code, you will need to define   var Module = {};\n// before the code. Then that object will be used in the code, and you\n// can continue to use Module afterwards as well.\nvar Module = moduleArg;\n\n// Set up the promise that indicates the Module is initialized\nvar readyPromiseResolve, readyPromiseReject;\nModule['ready'] = new Promise((resolve, reject) => {\n  readyPromiseResolve = resolve;\n  readyPromiseReject = reject;\n});\n[\"_main\",\"getExceptionMessage\",\"___get_exception_message\",\"_free\",\"_memory\",\"___indirect_function_table\",\"_fflush\",\"onRuntimeInitialized\"].forEach((prop) => {\n  if (!Object.getOwnPropertyDescriptor(Module['ready'], prop)) {\n    Object.defineProperty(Module['ready'], prop, {\n      get: () => abort('You are getting ' + prop + ' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),\n      set: () => abort('You are setting ' + prop + ' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),\n    });\n  }\n});\n\n// --pre-jses are emitted after the Module integration code, so that they can\n// refer to Module (if they choose; they can also define Module)\n\n\n// Sometimes an existing Module object exists with properties\n// meant to overwrite the default module functionality. Here\n// we collect those properties and reapply _after_ we configure\n// the current environment's defaults to avoid having to be so\n// defensive during initialization.\nvar moduleOverrides = Object.assign({}, Module);\n\nvar arguments_ = [];\nvar thisProgram = './this.program';\nvar quit_ = (status, toThrow) => {\n  throw toThrow;\n};\n\n// Determine the runtime environment we are in. You can customize this by\n// setting the ENVIRONMENT setting at compile time (see settings.js).\n\nvar ENVIRONMENT_IS_WEB = true;\nvar ENVIRONMENT_IS_WORKER = false;\nvar ENVIRONMENT_IS_NODE = false;\nvar ENVIRONMENT_IS_SHELL = false;\n\nif (Module['ENVIRONMENT']) {\n  throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');\n}\n\n// `/` should be present at the end if `scriptDirectory` is not empty\nvar scriptDirectory = '';\nfunction locateFile(path) {\n  if (Module['locateFile']) {\n    return Module['locateFile'](path, scriptDirectory);\n  }\n  return scriptDirectory + path;\n}\n\n// Hooks that are implemented differently in different runtime environments.\nvar read_,\n    readAsync,\n    readBinary;\n\nif (ENVIRONMENT_IS_SHELL) {\n\n  if ((typeof process == 'object' && typeof require === 'function') || typeof window == 'object' || typeof importScripts == 'function') throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  if (typeof read != 'undefined') {\n    read_ = read;\n  }\n\n  readBinary = (f) => {\n    if (typeof readbuffer == 'function') {\n      return new Uint8Array(readbuffer(f));\n    }\n    let data = read(f, 'binary');\n    assert(typeof data == 'object');\n    return data;\n  };\n\n  readAsync = (f, onload, onerror) => {\n    setTimeout(() => onload(readBinary(f)));\n  };\n\n  if (typeof clearTimeout == 'undefined') {\n    globalThis.clearTimeout = (id) => {};\n  }\n\n  if (typeof setTimeout == 'undefined') {\n    // spidermonkey lacks setTimeout but we use it above in readAsync.\n    globalThis.setTimeout = (f) => (typeof f == 'function') ? f() : abort();\n  }\n\n  if (typeof scriptArgs != 'undefined') {\n    arguments_ = scriptArgs;\n  } else if (typeof arguments != 'undefined') {\n    arguments_ = arguments;\n  }\n\n  if (typeof quit == 'function') {\n    quit_ = (status, toThrow) => {\n      // Unlike node which has process.exitCode, d8 has no such mechanism. So we\n      // have no way to set the exit code and then let the program exit with\n      // that code when it naturally stops running (say, when all setTimeouts\n      // have completed). For that reason, we must call `quit` - the only way to\n      // set the exit code - but quit also halts immediately.  To increase\n      // consistency with node (and the web) we schedule the actual quit call\n      // using a setTimeout to give the current stack and any exception handlers\n      // a chance to run.  This enables features such as addOnPostRun (which\n      // expected to be able to run code after main returns).\n      setTimeout(() => {\n        if (!(toThrow instanceof ExitStatus)) {\n          let toLog = toThrow;\n          if (toThrow && typeof toThrow == 'object' && toThrow.stack) {\n            toLog = [toThrow, toThrow.stack];\n          }\n          err(`exiting due to exception: ${toLog}`);\n        }\n        quit(status);\n      });\n      throw toThrow;\n    };\n  }\n\n  if (typeof print != 'undefined') {\n    // Prefer to use print/printErr where they exist, as they usually work better.\n    if (typeof console == 'undefined') console = /** @type{!Console} */({});\n    console.log = /** @type{!function(this:Console, ...*): undefined} */ (print);\n    console.warn = console.error = /** @type{!function(this:Console, ...*): undefined} */ (typeof printErr != 'undefined' ? printErr : print);\n  }\n\n} else\n\n// Note that this includes Node.js workers when relevant (pthreads is enabled).\n// Node.js workers are detected as a combination of ENVIRONMENT_IS_WORKER and\n// ENVIRONMENT_IS_NODE.\nif (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n  if (ENVIRONMENT_IS_WORKER) { // Check worker, not web, since window could be polyfilled\n    scriptDirectory = self.location.href;\n  } else if (typeof document != 'undefined' && document.currentScript) { // web\n    scriptDirectory = document.currentScript.src;\n  }\n  // When MODULARIZE, this JS may be executed later, after document.currentScript\n  // is gone, so we saved it, and we use it here instead of any other info.\n  if (_scriptDir) {\n    scriptDirectory = _scriptDir;\n  }\n  // blob urls look like blob:http://site.com/etc/etc and we cannot infer anything from them.\n  // otherwise, slice off the final part of the url to find the script directory.\n  // if scriptDirectory does not contain a slash, lastIndexOf will return -1,\n  // and scriptDirectory will correctly be replaced with an empty string.\n  // If scriptDirectory contains a query (starting with ?) or a fragment (starting with #),\n  // they are removed because they could contain a slash.\n  if (scriptDirectory.indexOf('blob:') !== 0) {\n    scriptDirectory = scriptDirectory.substr(0, scriptDirectory.replace(/[?#].*/, \"\").lastIndexOf('/')+1);\n  } else {\n    scriptDirectory = '';\n  }\n\n  if (!(typeof window == 'object' || typeof importScripts == 'function')) throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  // Differentiate the Web Worker from the Node Worker case, as reading must\n  // be done differently.\n  {\n// include: web_or_worker_shell_read.js\nread_ = (url) => {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, false);\n    xhr.send(null);\n    return xhr.responseText;\n  }\n\n  if (ENVIRONMENT_IS_WORKER) {\n    readBinary = (url) => {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, false);\n      xhr.responseType = 'arraybuffer';\n      xhr.send(null);\n      return new Uint8Array(/** @type{!ArrayBuffer} */(xhr.response));\n    };\n  }\n\n  readAsync = (url, onload, onerror) => {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'arraybuffer';\n    xhr.onload = () => {\n      if (xhr.status == 200 || (xhr.status == 0 && xhr.response)) { // file URLs can return 0\n        onload(xhr.response);\n        return;\n      }\n      onerror();\n    };\n    xhr.onerror = onerror;\n    xhr.send(null);\n  }\n\n// end include: web_or_worker_shell_read.js\n  }\n} else\n{\n  throw new Error('environment detection error');\n}\n\nvar out = Module['print'] || console.log.bind(console);\nvar err = Module['printErr'] || console.error.bind(console);\n\n// Merge back in the overrides\nObject.assign(Module, moduleOverrides);\n// Free the object hierarchy contained in the overrides, this lets the GC\n// reclaim data used e.g. in memoryInitializerRequest, which is a large typed array.\nmoduleOverrides = null;\ncheckIncomingModuleAPI();\n\n// Emit code to handle expected values on the Module object. This applies Module.x\n// to the proper local x. This has two benefits: first, we only emit it if it is\n// expected to arrive, and second, by using a local everywhere else that can be\n// minified.\n\nif (Module['arguments']) arguments_ = Module['arguments'];legacyModuleProp('arguments', 'arguments_');\n\nif (Module['thisProgram']) thisProgram = Module['thisProgram'];legacyModuleProp('thisProgram', 'thisProgram');\n\nif (Module['quit']) quit_ = Module['quit'];legacyModuleProp('quit', 'quit_');\n\n// perform assertions in shell.js after we set up out() and err(), as otherwise if an assertion fails it cannot print the message\n// Assertions on removed incoming Module JS APIs.\nassert(typeof Module['memoryInitializerPrefixURL'] == 'undefined', 'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['pthreadMainPrefixURL'] == 'undefined', 'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['cdInitializerPrefixURL'] == 'undefined', 'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['filePackagePrefixURL'] == 'undefined', 'Module.filePackagePrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['read'] == 'undefined', 'Module.read option was removed (modify read_ in JS)');\nassert(typeof Module['readAsync'] == 'undefined', 'Module.readAsync option was removed (modify readAsync in JS)');\nassert(typeof Module['readBinary'] == 'undefined', 'Module.readBinary option was removed (modify readBinary in JS)');\nassert(typeof Module['setWindowTitle'] == 'undefined', 'Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)');\nassert(typeof Module['TOTAL_MEMORY'] == 'undefined', 'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY');\nlegacyModuleProp('asm', 'wasmExports');\nlegacyModuleProp('read', 'read_');\nlegacyModuleProp('readAsync', 'readAsync');\nlegacyModuleProp('readBinary', 'readBinary');\nlegacyModuleProp('setWindowTitle', 'setWindowTitle');\nvar IDBFS = 'IDBFS is no longer included by default; build with -lidbfs.js';\nvar PROXYFS = 'PROXYFS is no longer included by default; build with -lproxyfs.js';\nvar WORKERFS = 'WORKERFS is no longer included by default; build with -lworkerfs.js';\nvar FETCHFS = 'FETCHFS is no longer included by default; build with -lfetchfs.js';\nvar ICASEFS = 'ICASEFS is no longer included by default; build with -licasefs.js';\nvar JSFILEFS = 'JSFILEFS is no longer included by default; build with -ljsfilefs.js';\nvar OPFS = 'OPFS is no longer included by default; build with -lopfs.js';\n\nvar NODEFS = 'NODEFS is no longer included by default; build with -lnodefs.js';\n\nassert(!ENVIRONMENT_IS_WORKER, \"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable.\");\n\nassert(!ENVIRONMENT_IS_NODE, \"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable.\");\n\nassert(!ENVIRONMENT_IS_SHELL, \"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.\");\n\n\n// end include: shell.js\n// include: preamble.js\n// === Preamble library stuff ===\n\n// Documentation for the public APIs defined in this file must be updated in:\n//    site/source/docs/api_reference/preamble.js.rst\n// A prebuilt local version of the documentation is available at:\n//    site/build/text/docs/api_reference/preamble.js.txt\n// You can also build docs locally as HTML or other formats in site/\n// An online HTML version (which may be of a different version of Emscripten)\n//    is up at http://kripken.github.io/emscripten-site/docs/api_reference/preamble.js.html\n\nvar wasmBinary; \nif (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];legacyModuleProp('wasmBinary', 'wasmBinary');\n\nif (typeof WebAssembly != 'object') {\n  abort('no native wasm support detected');\n}\n\n// Wasm globals\n\nvar wasmMemory;\n\n//========================================\n// Runtime essentials\n//========================================\n\n// whether we are quitting the application. no code should run after this.\n// set in exit() and abort()\nvar ABORT = false;\n\n// set by exit() and abort().  Passed to 'onExit' handler.\n// NOTE: This is also used as the process return code code in shell environments\n// but only when noExitRuntime is false.\nvar EXITSTATUS;\n\n// In STRICT mode, we only define assert() when ASSERTIONS is set.  i.e. we\n// don't define it at all in release modes.  This matches the behaviour of\n// MINIMAL_RUNTIME.\n// TODO(sbc): Make this the default even without STRICT enabled.\n/** @type {function(*, string=)} */\nfunction assert(condition, text) {\n  if (!condition) {\n    abort('Assertion failed' + (text ? ': ' + text : ''));\n  }\n}\n\n// We used to include malloc/free by default in the past. Show a helpful error in\n// builds with assertions.\n\n// Memory management\n\nvar HEAP,\n/** @type {!Int8Array} */\n  HEAP8,\n/** @type {!Uint8Array} */\n  HEAPU8,\n/** @type {!Int16Array} */\n  HEAP16,\n/** @type {!Uint16Array} */\n  HEAPU16,\n/** @type {!Int32Array} */\n  HEAP32,\n/** @type {!Uint32Array} */\n  HEAPU32,\n/** @type {!Float32Array} */\n  HEAPF32,\n/** @type {!Float64Array} */\n  HEAPF64;\n\nfunction updateMemoryViews() {\n  var b = wasmMemory.buffer;\n  Module['HEAP8'] = HEAP8 = new Int8Array(b);\n  Module['HEAP16'] = HEAP16 = new Int16Array(b);\n  Module['HEAPU8'] = HEAPU8 = new Uint8Array(b);\n  Module['HEAPU16'] = HEAPU16 = new Uint16Array(b);\n  Module['HEAP32'] = HEAP32 = new Int32Array(b);\n  Module['HEAPU32'] = HEAPU32 = new Uint32Array(b);\n  Module['HEAPF32'] = HEAPF32 = new Float32Array(b);\n  Module['HEAPF64'] = HEAPF64 = new Float64Array(b);\n}\n\nassert(!Module['STACK_SIZE'], 'STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time')\n\nassert(typeof Int32Array != 'undefined' && typeof Float64Array !== 'undefined' && Int32Array.prototype.subarray != undefined && Int32Array.prototype.set != undefined,\n       'JS engine does not provide full typed array support');\n\n// If memory is defined in wasm, the user can't provide it, or set INITIAL_MEMORY\nassert(!Module['wasmMemory'], 'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally');\nassert(!Module['INITIAL_MEMORY'], 'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically');\n\n// include: runtime_stack_check.js\n// Initializes the stack cookie. Called at the startup of main and at the startup of each thread in pthreads mode.\nfunction writeStackCookie() {\n  var max = _emscripten_stack_get_end();\n  assert((max & 3) == 0);\n  // If the stack ends at address zero we write our cookies 4 bytes into the\n  // stack.  This prevents interference with SAFE_HEAP and ASAN which also\n  // monitor writes to address zero.\n  if (max == 0) {\n    max += 4;\n  }\n  // The stack grow downwards towards _emscripten_stack_get_end.\n  // We write cookies to the final two words in the stack and detect if they are\n  // ever overwritten.\n  HEAPU32[((max)>>2)] = 0x02135467;\n  HEAPU32[(((max)+(4))>>2)] = 0x89BACDFE;\n  // Also test the global address 0 for integrity.\n  HEAPU32[((0)>>2)] = 1668509029;\n}\n\nfunction checkStackCookie() {\n  if (ABORT) return;\n  var max = _emscripten_stack_get_end();\n  // See writeStackCookie().\n  if (max == 0) {\n    max += 4;\n  }\n  var cookie1 = HEAPU32[((max)>>2)];\n  var cookie2 = HEAPU32[(((max)+(4))>>2)];\n  if (cookie1 != 0x02135467 || cookie2 != 0x89BACDFE) {\n    abort(`Stack overflow! Stack cookie has been overwritten at ${ptrToString(max)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ptrToString(cookie2)} ${ptrToString(cookie1)}`);\n  }\n  // Also test the global address 0 for integrity.\n  if (HEAPU32[((0)>>2)] != 0x63736d65 /* 'emsc' */) {\n    abort('Runtime error: The application has corrupted its heap memory area (address zero)!');\n  }\n}\n// end include: runtime_stack_check.js\n// include: runtime_assertions.js\n// Endianness check\n(function() {\n  var h16 = new Int16Array(1);\n  var h8 = new Int8Array(h16.buffer);\n  h16[0] = 0x6373;\n  if (h8[0] !== 0x73 || h8[1] !== 0x63) throw 'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)';\n})();\n\n// end include: runtime_assertions.js\nvar __ATPRERUN__  = []; // functions called before the runtime is initialized\nvar __ATINIT__    = []; // functions called during startup\nvar __ATEXIT__    = []; // functions called during shutdown\nvar __ATPOSTRUN__ = []; // functions called after the main() is called\n\nvar runtimeInitialized = false;\n\nfunction preRun() {\n  if (Module['preRun']) {\n    if (typeof Module['preRun'] == 'function') Module['preRun'] = [Module['preRun']];\n    while (Module['preRun'].length) {\n      addOnPreRun(Module['preRun'].shift());\n    }\n  }\n  callRuntimeCallbacks(__ATPRERUN__);\n}\n\nfunction initRuntime() {\n  assert(!runtimeInitialized);\n  runtimeInitialized = true;\n\n  checkStackCookie();\n\n  \n  callRuntimeCallbacks(__ATINIT__);\n}\n\nfunction postRun() {\n  checkStackCookie();\n\n  if (Module['postRun']) {\n    if (typeof Module['postRun'] == 'function') Module['postRun'] = [Module['postRun']];\n    while (Module['postRun'].length) {\n      addOnPostRun(Module['postRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPOSTRUN__);\n}\n\nfunction addOnPreRun(cb) {\n  __ATPRERUN__.unshift(cb);\n}\n\nfunction addOnInit(cb) {\n  __ATINIT__.unshift(cb);\n}\n\nfunction addOnExit(cb) {\n}\n\nfunction addOnPostRun(cb) {\n  __ATPOSTRUN__.unshift(cb);\n}\n\n// include: runtime_math.js\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/fround\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc\n\nassert(Math.imul, 'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.fround, 'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.clz32, 'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.trunc, 'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\n// end include: runtime_math.js\n// A counter of dependencies for calling run(). If we need to\n// do asynchronous work before running, increment this and\n// decrement it. Incrementing must happen in a place like\n// Module.preRun (used by emcc to add file preloading).\n// Note that you can add dependencies in preRun, even though\n// it happens right before run - run will be postponed until\n// the dependencies are met.\nvar runDependencies = 0;\nvar runDependencyWatcher = null;\nvar dependenciesFulfilled = null; // overridden to take different actions when all run dependencies are fulfilled\nvar runDependencyTracking = {};\n\nfunction getUniqueRunDependency(id) {\n  var orig = id;\n  while (1) {\n    if (!runDependencyTracking[id]) return id;\n    id = orig + Math.random();\n  }\n}\n\nfunction addRunDependency(id) {\n  runDependencies++;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(!runDependencyTracking[id]);\n    runDependencyTracking[id] = 1;\n    if (runDependencyWatcher === null && typeof setInterval != 'undefined') {\n      // Check for missing dependencies every few seconds\n      runDependencyWatcher = setInterval(() => {\n        if (ABORT) {\n          clearInterval(runDependencyWatcher);\n          runDependencyWatcher = null;\n          return;\n        }\n        var shown = false;\n        for (var dep in runDependencyTracking) {\n          if (!shown) {\n            shown = true;\n            err('still waiting on run dependencies:');\n          }\n          err(`dependency: ${dep}`);\n        }\n        if (shown) {\n          err('(end of list)');\n        }\n      }, 10000);\n    }\n  } else {\n    err('warning: run dependency added without ID');\n  }\n}\n\nfunction removeRunDependency(id) {\n  runDependencies--;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(runDependencyTracking[id]);\n    delete runDependencyTracking[id];\n  } else {\n    err('warning: run dependency removed without ID');\n  }\n  if (runDependencies == 0) {\n    if (runDependencyWatcher !== null) {\n      clearInterval(runDependencyWatcher);\n      runDependencyWatcher = null;\n    }\n    if (dependenciesFulfilled) {\n      var callback = dependenciesFulfilled;\n      dependenciesFulfilled = null;\n      callback(); // can add another dependenciesFulfilled\n    }\n  }\n}\n\n/** @param {string|number=} what */\nfunction abort(what) {\n  if (Module['onAbort']) {\n    Module['onAbort'](what);\n  }\n\n  what = 'Aborted(' + what + ')';\n  // TODO(sbc): Should we remove printing and leave it up to whoever\n  // catches the exception?\n  err(what);\n\n  ABORT = true;\n  EXITSTATUS = 1;\n\n  // Use a wasm runtime error, because a JS error might be seen as a foreign\n  // exception, which means we'd run destructors on it. We need the error to\n  // simply make the program stop.\n  // FIXME This approach does not work in Wasm EH because it currently does not assume\n  // all RuntimeErrors are from traps; it decides whether a RuntimeError is from\n  // a trap or not based on a hidden field within the object. So at the moment\n  // we don't have a way of throwing a wasm trap from JS. TODO Make a JS API that\n  // allows this in the wasm spec.\n\n  // Suppress closure compiler warning here. Closure compiler's builtin extern\n  // defintion for WebAssembly.RuntimeError claims it takes no arguments even\n  // though it can.\n  // TODO(https://github.com/google/closure-compiler/pull/3913): Remove if/when upstream closure gets fixed.\n  /** @suppress {checkTypes} */\n  var e = new WebAssembly.RuntimeError(what);\n\n  readyPromiseReject(e);\n  // Throw the error whether or not MODULARIZE is set because abort is used\n  // in code paths apart from instantiation where an exception is expected\n  // to be thrown when abort is called.\n  throw e;\n}\n\n// include: memoryprofiler.js\n// end include: memoryprofiler.js\n// show errors on likely calls to FS when it was not included\nvar FS = {\n  error() {\n    abort('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM');\n  },\n  init() { FS.error() },\n  createDataFile() { FS.error() },\n  createPreloadedFile() { FS.error() },\n  createLazyFile() { FS.error() },\n  open() { FS.error() },\n  mkdev() { FS.error() },\n  registerDevice() { FS.error() },\n  analyzePath() { FS.error() },\n\n  ErrnoError() { FS.error() },\n};\nModule['FS_createDataFile'] = FS.createDataFile;\nModule['FS_createPreloadedFile'] = FS.createPreloadedFile;\n\n// include: URIUtils.js\n// Prefix of data URIs emitted by SINGLE_FILE and related options.\nvar dataURIPrefix = 'data:application/octet-stream;base64,';\n\n/**\n * Indicates whether filename is a base64 data URI.\n * @noinline\n */\nvar isDataURI = (filename) => filename.startsWith(dataURIPrefix);\n\n/**\n * Indicates whether filename is delivered via file protocol (as opposed to http/https)\n * @noinline\n */\nvar isFileURI = (filename) => filename.startsWith('file://');\n// end include: URIUtils.js\nfunction createExportWrapper(name) {\n  return function() {\n    assert(runtimeInitialized, `native function \\`${name}\\` called before runtime initialization`);\n    var f = wasmExports[name];\n    assert(f, `exported native function \\`${name}\\` not found`);\n    return f.apply(null, arguments);\n  };\n}\n\n// include: runtime_exceptions.js\n// Base Emscripten EH error class\nclass EmscriptenEH extends Error {}\n\nclass EmscriptenSjLj extends EmscriptenEH {}\n\nclass CppException extends EmscriptenEH {\n  constructor(excPtr) {\n    super(excPtr);\n    this.excPtr = excPtr;\n    const excInfo = getExceptionMessage(excPtr);\n    this.name = excInfo[0];\n    this.message = excInfo[1];\n  }\n}\n// end include: runtime_exceptions.js\nvar wasmBinaryFile;\n  wasmBinaryFile = 'marchingsquares.wasm';\n  if (!isDataURI(wasmBinaryFile)) {\n    wasmBinaryFile = locateFile(wasmBinaryFile);\n  }\n\nfunction getBinarySync(file) {\n  if (file == wasmBinaryFile && wasmBinary) {\n    return new Uint8Array(wasmBinary);\n  }\n  if (readBinary) {\n    return readBinary(file);\n  }\n  throw \"both async and sync fetching of the wasm failed\";\n}\n\nfunction getBinaryPromise(binaryFile) {\n  // If we don't have the binary yet, try to load it asynchronously.\n  // Fetch has some additional restrictions over XHR, like it can't be used on a file:// url.\n  // See https://github.com/github/fetch/pull/92#issuecomment-140665932\n  // Cordova or Electron apps are typically loaded from a file:// url.\n  // So use fetch if it is available and the url is not a file, otherwise fall back to XHR.\n  if (!wasmBinary\n      && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER)) {\n    if (typeof fetch == 'function'\n    ) {\n      return fetch(binaryFile, { credentials: 'same-origin' }).then((response) => {\n        if (!response['ok']) {\n          throw \"failed to load wasm binary file at '\" + binaryFile + \"'\";\n        }\n        return response['arrayBuffer']();\n      }).catch(() => getBinarySync(binaryFile));\n    }\n  }\n\n  // Otherwise, getBinarySync should be able to get it synchronously\n  return Promise.resolve().then(() => getBinarySync(binaryFile));\n}\n\nfunction instantiateArrayBuffer(binaryFile, imports, receiver) {\n  return getBinaryPromise(binaryFile).then((binary) => {\n    return WebAssembly.instantiate(binary, imports);\n  }).then((instance) => {\n    return instance;\n  }).then(receiver, (reason) => {\n    err(`failed to asynchronously prepare wasm: ${reason}`);\n\n    // Warn on some common problems.\n    if (isFileURI(wasmBinaryFile)) {\n      err(`warning: Loading from a file URI (${wasmBinaryFile}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`);\n    }\n    abort(reason);\n  });\n}\n\nfunction instantiateAsync(binary, binaryFile, imports, callback) {\n  if (!binary &&\n      typeof WebAssembly.instantiateStreaming == 'function' &&\n      !isDataURI(binaryFile) &&\n      typeof fetch == 'function') {\n    return fetch(binaryFile, { credentials: 'same-origin' }).then((response) => {\n      // Suppress closure warning here since the upstream definition for\n      // instantiateStreaming only allows Promise<Repsponse> rather than\n      // an actual Response.\n      // TODO(https://github.com/google/closure-compiler/pull/3913): Remove if/when upstream closure is fixed.\n      /** @suppress {checkTypes} */\n      var result = WebAssembly.instantiateStreaming(response, imports);\n\n      return result.then(\n        callback,\n        function(reason) {\n          // We expect the most common failure cause to be a bad MIME type for the binary,\n          // in which case falling back to ArrayBuffer instantiation should work.\n          err(`wasm streaming compile failed: ${reason}`);\n          err('falling back to ArrayBuffer instantiation');\n          return instantiateArrayBuffer(binaryFile, imports, callback);\n        });\n    });\n  }\n  return instantiateArrayBuffer(binaryFile, imports, callback);\n}\n\n// Create the wasm instance.\n// Receives the wasm imports, returns the exports.\nfunction createWasm() {\n  // prepare imports\n  var info = {\n    'env': wasmImports,\n    'wasi_snapshot_preview1': wasmImports,\n  };\n  // Load the wasm module and create an instance of using native support in the JS engine.\n  // handle a generated wasm instance, receiving its exports and\n  // performing other necessary setup\n  /** @param {WebAssembly.Module=} module*/\n  function receiveInstance(instance, module) {\n    wasmExports = instance.exports;\n\n    \n\n    wasmMemory = wasmExports['memory'];\n    \n    assert(wasmMemory, \"memory not found in wasm exports\");\n    // This assertion doesn't hold when emscripten is run in --post-link\n    // mode.\n    // TODO(sbc): Read INITIAL_MEMORY out of the wasm file in post-link mode.\n    //assert(wasmMemory.buffer.byteLength === 16777216);\n    updateMemoryViews();\n\n    wasmTable = wasmExports['__indirect_function_table'];\n    \n    assert(wasmTable, \"table not found in wasm exports\");\n\n    addOnInit(wasmExports['__wasm_call_ctors']);\n\n    removeRunDependency('wasm-instantiate');\n    return wasmExports;\n  }\n  // wait for the pthread pool (if any)\n  addRunDependency('wasm-instantiate');\n\n  // Prefer streaming instantiation if available.\n  // Async compilation can be confusing when an error on the page overwrites Module\n  // (for example, if the order of elements is wrong, and the one defining Module is\n  // later), so we save Module and check it later.\n  var trueModule = Module;\n  function receiveInstantiationResult(result) {\n    // 'result' is a ResultObject object which has both the module and instance.\n    // receiveInstance() will swap in the exports (to Module.asm) so they can be called\n    assert(Module === trueModule, 'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?');\n    trueModule = null;\n    // TODO: Due to Closure regression https://github.com/google/closure-compiler/issues/3193, the above line no longer optimizes out down to the following line.\n    // When the regression is fixed, can restore the above PTHREADS-enabled path.\n    receiveInstance(result['instance']);\n  }\n\n  // User shell pages can write their own Module.instantiateWasm = function(imports, successCallback) callback\n  // to manually instantiate the Wasm module themselves. This allows pages to\n  // run the instantiation parallel to any other async startup actions they are\n  // performing.\n  // Also pthreads and wasm workers initialize the wasm instance through this\n  // path.\n  if (Module['instantiateWasm']) {\n\n    try {\n      return Module['instantiateWasm'](info, receiveInstance);\n    } catch(e) {\n      err(`Module.instantiateWasm callback failed with error: ${e}`);\n        // If instantiation fails, reject the module ready promise.\n        readyPromiseReject(e);\n    }\n  }\n\n  // If instantiation fails, reject the module ready promise.\n  instantiateAsync(wasmBinary, wasmBinaryFile, info, receiveInstantiationResult).catch(readyPromiseReject);\n  return {}; // no exports yet; we'll fill them in later\n}\n\n// Globals used by JS i64 conversions (see makeSetValue)\nvar tempDouble;\nvar tempI64;\n\n// include: runtime_debug.js\nfunction legacyModuleProp(prop, newName, incomming=true) {\n  if (!Object.getOwnPropertyDescriptor(Module, prop)) {\n    Object.defineProperty(Module, prop, {\n      configurable: true,\n      get() {\n        let extra = incomming ? ' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)' : '';\n        abort(`\\`Module.${prop}\\` has been replaced by \\`${newName}\\`` + extra);\n\n      }\n    });\n  }\n}\n\nfunction ignoredModuleProp(prop) {\n  if (Object.getOwnPropertyDescriptor(Module, prop)) {\n    abort(`\\`Module.${prop}\\` was supplied but \\`${prop}\\` not included in INCOMING_MODULE_JS_API`);\n  }\n}\n\n// forcing the filesystem exports a few things by default\nfunction isExportedByForceFilesystem(name) {\n  return name === 'FS_createPath' ||\n         name === 'FS_createDataFile' ||\n         name === 'FS_createPreloadedFile' ||\n         name === 'FS_unlink' ||\n         name === 'addRunDependency' ||\n         // The old FS has some functionality that WasmFS lacks.\n         name === 'FS_createLazyFile' ||\n         name === 'FS_createDevice' ||\n         name === 'removeRunDependency';\n}\n\nfunction missingGlobal(sym, msg) {\n  if (typeof globalThis !== 'undefined') {\n    Object.defineProperty(globalThis, sym, {\n      configurable: true,\n      get() {\n        warnOnce(`\\`${sym}\\` is not longer defined by emscripten. ${msg}`);\n        return undefined;\n      }\n    });\n  }\n}\n\nmissingGlobal('buffer', 'Please use HEAP8.buffer or wasmMemory.buffer');\nmissingGlobal('asm', 'Please use wasmExports instead');\n\nfunction missingLibrarySymbol(sym) {\n  if (typeof globalThis !== 'undefined' && !Object.getOwnPropertyDescriptor(globalThis, sym)) {\n    Object.defineProperty(globalThis, sym, {\n      configurable: true,\n      get() {\n        // Can't `abort()` here because it would break code that does runtime\n        // checks.  e.g. `if (typeof SDL === 'undefined')`.\n        var msg = `\\`${sym}\\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`;\n        // DEFAULT_LIBRARY_FUNCS_TO_INCLUDE requires the name as it appears in\n        // library.js, which means $name for a JS name with no prefix, or name\n        // for a JS name like _name.\n        var librarySymbol = sym;\n        if (!librarySymbol.startsWith('_')) {\n          librarySymbol = '$' + sym;\n        }\n        msg += ` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${librarySymbol}')`;\n        if (isExportedByForceFilesystem(sym)) {\n          msg += '. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you';\n        }\n        warnOnce(msg);\n        return undefined;\n      }\n    });\n  }\n  // Any symbol that is not included from the JS libary is also (by definition)\n  // not exported on the Module object.\n  unexportedRuntimeSymbol(sym);\n}\n\nfunction unexportedRuntimeSymbol(sym) {\n  if (!Object.getOwnPropertyDescriptor(Module, sym)) {\n    Object.defineProperty(Module, sym, {\n      configurable: true,\n      get() {\n        var msg = `'${sym}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;\n        if (isExportedByForceFilesystem(sym)) {\n          msg += '. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you';\n        }\n        abort(msg);\n      }\n    });\n  }\n}\n\n// Used by XXXXX_DEBUG settings to output debug messages.\nfunction dbg(text) {\n  // TODO(sbc): Make this configurable somehow.  Its not always convenient for\n  // logging to show up as warnings.\n  console.warn.apply(console, arguments);\n}\n// end include: runtime_debug.js\n// === Body ===\n\n// end include: preamble.js\n\n  /** @constructor */\n  function ExitStatus(status) {\n      this.name = 'ExitStatus';\n      this.message = `Program terminated with exit(${status})`;\n      this.status = status;\n    }\n\n  var callRuntimeCallbacks = (callbacks) => {\n      while (callbacks.length > 0) {\n        // Pass the module as the first argument.\n        callbacks.shift()(Module);\n      }\n    };\n\n  var decrementExceptionRefcount = (ptr) => ___cxa_decrement_exception_refcount(ptr);\n\n  \n  \n  var withStackSave = (f) => {\n      var stack = stackSave();\n      var ret = f();\n      stackRestore(stack);\n      return ret;\n    };\n  \n  var UTF8Decoder = typeof TextDecoder != 'undefined' ? new TextDecoder('utf8') : undefined;\n  \n    /**\n     * Given a pointer 'idx' to a null-terminated UTF8-encoded string in the given\n     * array that contains uint8 values, returns a copy of that string as a\n     * Javascript String object.\n     * heapOrArray is either a regular array, or a JavaScript typed array view.\n     * @param {number} idx\n     * @param {number=} maxBytesToRead\n     * @return {string}\n     */\n  var UTF8ArrayToString = (heapOrArray, idx, maxBytesToRead) => {\n      var endIdx = idx + maxBytesToRead;\n      var endPtr = idx;\n      // TextDecoder needs to know the byte length in advance, it doesn't stop on\n      // null terminator by itself.  Also, use the length info to avoid running tiny\n      // strings through TextDecoder, since .subarray() allocates garbage.\n      // (As a tiny code save trick, compare endPtr against endIdx using a negation,\n      // so that undefined means Infinity)\n      while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n  \n      if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n        return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n      }\n      var str = '';\n      // If building with TextDecoder, we have already computed the string length\n      // above, so test loop end condition against that\n      while (idx < endPtr) {\n        // For UTF8 byte structure, see:\n        // http://en.wikipedia.org/wiki/UTF-8#Description\n        // https://www.ietf.org/rfc/rfc2279.txt\n        // https://tools.ietf.org/html/rfc3629\n        var u0 = heapOrArray[idx++];\n        if (!(u0 & 0x80)) { str += String.fromCharCode(u0); continue; }\n        var u1 = heapOrArray[idx++] & 63;\n        if ((u0 & 0xE0) == 0xC0) { str += String.fromCharCode(((u0 & 31) << 6) | u1); continue; }\n        var u2 = heapOrArray[idx++] & 63;\n        if ((u0 & 0xF0) == 0xE0) {\n          u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n        } else {\n          if ((u0 & 0xF8) != 0xF0) warnOnce('Invalid UTF-8 leading byte ' + ptrToString(u0) + ' encountered when deserializing a UTF-8 string in wasm memory to a JS string!');\n          u0 = ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heapOrArray[idx++] & 63);\n        }\n  \n        if (u0 < 0x10000) {\n          str += String.fromCharCode(u0);\n        } else {\n          var ch = u0 - 0x10000;\n          str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n        }\n      }\n      return str;\n    };\n  \n    /**\n     * Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the\n     * emscripten HEAP, returns a copy of that string as a Javascript String object.\n     *\n     * @param {number} ptr\n     * @param {number=} maxBytesToRead - An optional length that specifies the\n     *   maximum number of bytes to read. You can omit this parameter to scan the\n     *   string until the first 0 byte. If maxBytesToRead is passed, and the string\n     *   at [ptr, ptr+maxBytesToReadr[ contains a null byte in the middle, then the\n     *   string will cut short at that byte index (i.e. maxBytesToRead will not\n     *   produce a string of exact length [ptr, ptr+maxBytesToRead[) N.B. mixing\n     *   frequent uses of UTF8ToString() with and without maxBytesToRead may throw\n     *   JS JIT optimizations off, so it is worth to consider consistently using one\n     * @return {string}\n     */\n  var UTF8ToString = (ptr, maxBytesToRead) => {\n      assert(typeof ptr == 'number', `UTF8ToString expects a number (got ${typeof ptr})`);\n      return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n    };\n  var getExceptionMessageCommon = (ptr) => withStackSave(() => {\n      var type_addr_addr = stackAlloc(4);\n      var message_addr_addr = stackAlloc(4);\n      ___get_exception_message(ptr, type_addr_addr, message_addr_addr);\n      var type_addr = HEAPU32[((type_addr_addr)>>2)];\n      var message_addr = HEAPU32[((message_addr_addr)>>2)];\n      var type = UTF8ToString(type_addr);\n      _free(type_addr);\n      var message;\n      if (message_addr) {\n        message = UTF8ToString(message_addr);\n        _free(message_addr);\n      }\n      return [type, message];\n    });\n  var getExceptionMessage = (ptr) => getExceptionMessageCommon(ptr);\n  Module['getExceptionMessage'] = getExceptionMessage;\n\n  \n    /**\n     * @param {number} ptr\n     * @param {string} type\n     */\n  function getValue(ptr, type = 'i8') {\n    if (type.endsWith('*')) type = '*';\n    switch (type) {\n      case 'i1': return HEAP8[((ptr)>>0)];\n      case 'i8': return HEAP8[((ptr)>>0)];\n      case 'i16': return HEAP16[((ptr)>>1)];\n      case 'i32': return HEAP32[((ptr)>>2)];\n      case 'i64': abort('to do getValue(i64) use WASM_BIGINT');\n      case 'float': return HEAPF32[((ptr)>>2)];\n      case 'double': return HEAPF64[((ptr)>>3)];\n      case '*': return HEAPU32[((ptr)>>2)];\n      default: abort(`invalid type for getValue: ${type}`);\n    }\n  }\n\n  var incrementExceptionRefcount = (ptr) => ___cxa_increment_exception_refcount(ptr);\n\n  var noExitRuntime = Module['noExitRuntime'] || true;\n\n  var ptrToString = (ptr) => {\n      assert(typeof ptr === 'number');\n      // With CAN_ADDRESS_2GB or MEMORY64, pointers are already unsigned.\n      ptr >>>= 0;\n      return '0x' + ptr.toString(16).padStart(8, '0');\n    };\n\n  \n    /**\n     * @param {number} ptr\n     * @param {number} value\n     * @param {string} type\n     */\n  function setValue(ptr, value, type = 'i8') {\n    if (type.endsWith('*')) type = '*';\n    switch (type) {\n      case 'i1': HEAP8[((ptr)>>0)] = value; break;\n      case 'i8': HEAP8[((ptr)>>0)] = value; break;\n      case 'i16': HEAP16[((ptr)>>1)] = value; break;\n      case 'i32': HEAP32[((ptr)>>2)] = value; break;\n      case 'i64': abort('to do setValue(i64) use WASM_BIGINT');\n      case 'float': HEAPF32[((ptr)>>2)] = value; break;\n      case 'double': HEAPF64[((ptr)>>3)] = value; break;\n      case '*': HEAPU32[((ptr)>>2)] = value; break;\n      default: abort(`invalid type for setValue: ${type}`);\n    }\n  }\n\n  var warnOnce = (text) => {\n      if (!warnOnce.shown) warnOnce.shown = {};\n      if (!warnOnce.shown[text]) {\n        warnOnce.shown[text] = 1;\n        err(text);\n      }\n    };\n\n  var ___assert_fail = (condition, filename, line, func) => {\n      abort(`Assertion failed: ${UTF8ToString(condition)}, at: ` + [filename ? UTF8ToString(filename) : 'unknown filename', line, func ? UTF8ToString(func) : 'unknown function']);\n    };\n\n  var exceptionCaught =  [];\n  \n  \n  var uncaughtExceptionCount = 0;\n  var ___cxa_begin_catch = (ptr) => {\n      var info = new ExceptionInfo(ptr);\n      if (!info.get_caught()) {\n        info.set_caught(true);\n        uncaughtExceptionCount--;\n      }\n      info.set_rethrown(false);\n      exceptionCaught.push(info);\n      ___cxa_increment_exception_refcount(info.excPtr);\n      return info.get_exception_ptr();\n    };\n\n  var exceptionLast = 0;\n  \n  /** @constructor */\n  function ExceptionInfo(excPtr) {\n      this.excPtr = excPtr;\n      this.ptr = excPtr - 24;\n  \n      this.set_type = function(type) {\n        HEAPU32[(((this.ptr)+(4))>>2)] = type;\n      };\n  \n      this.get_type = function() {\n        return HEAPU32[(((this.ptr)+(4))>>2)];\n      };\n  \n      this.set_destructor = function(destructor) {\n        HEAPU32[(((this.ptr)+(8))>>2)] = destructor;\n      };\n  \n      this.get_destructor = function() {\n        return HEAPU32[(((this.ptr)+(8))>>2)];\n      };\n  \n      this.set_caught = function(caught) {\n        caught = caught ? 1 : 0;\n        HEAP8[(((this.ptr)+(12))>>0)] = caught;\n      };\n  \n      this.get_caught = function() {\n        return HEAP8[(((this.ptr)+(12))>>0)] != 0;\n      };\n  \n      this.set_rethrown = function(rethrown) {\n        rethrown = rethrown ? 1 : 0;\n        HEAP8[(((this.ptr)+(13))>>0)] = rethrown;\n      };\n  \n      this.get_rethrown = function() {\n        return HEAP8[(((this.ptr)+(13))>>0)] != 0;\n      };\n  \n      // Initialize native structure fields. Should be called once after allocated.\n      this.init = function(type, destructor) {\n        this.set_adjusted_ptr(0);\n        this.set_type(type);\n        this.set_destructor(destructor);\n      }\n  \n      this.set_adjusted_ptr = function(adjustedPtr) {\n        HEAPU32[(((this.ptr)+(16))>>2)] = adjustedPtr;\n      };\n  \n      this.get_adjusted_ptr = function() {\n        return HEAPU32[(((this.ptr)+(16))>>2)];\n      };\n  \n      // Get pointer which is expected to be received by catch clause in C++ code. It may be adjusted\n      // when the pointer is casted to some of the exception object base classes (e.g. when virtual\n      // inheritance is used). When a pointer is thrown this method should return the thrown pointer\n      // itself.\n      this.get_exception_ptr = function() {\n        // Work around a fastcomp bug, this code is still included for some reason in a build without\n        // exceptions support.\n        var isPointer = ___cxa_is_pointer_type(this.get_type());\n        if (isPointer) {\n          return HEAPU32[((this.excPtr)>>2)];\n        }\n        var adjusted = this.get_adjusted_ptr();\n        if (adjusted !== 0) return adjusted;\n        return this.excPtr;\n      };\n    }\n  \n  var ___resumeException = (ptr) => {\n      if (!exceptionLast) {\n        exceptionLast = new CppException(ptr);\n      }\n      throw exceptionLast;\n    };\n  \n  \n  var findMatchingCatch = (args) => {\n      var thrown =\n        exceptionLast && exceptionLast.excPtr;\n      if (!thrown) {\n        // just pass through the null ptr\n        setTempRet0(0);\n        return 0;\n      }\n      var info = new ExceptionInfo(thrown);\n      info.set_adjusted_ptr(thrown);\n      var thrownType = info.get_type();\n      if (!thrownType) {\n        // just pass through the thrown ptr\n        setTempRet0(0);\n        return thrown;\n      }\n  \n      // can_catch receives a **, add indirection\n      // The different catch blocks are denoted by different types.\n      // Due to inheritance, those types may not precisely match the\n      // type of the thrown object. Find one which matches, and\n      // return the type of the catch block which should be called.\n      for (var arg in args) {\n        var caughtType = args[arg];\n  \n        if (caughtType === 0 || caughtType === thrownType) {\n          // Catch all clause matched or exactly the same type is caught\n          break;\n        }\n        var adjusted_ptr_addr = info.ptr + 16;\n        if (___cxa_can_catch(caughtType, thrownType, adjusted_ptr_addr)) {\n          setTempRet0(caughtType);\n          return thrown;\n        }\n      }\n      setTempRet0(thrownType);\n      return thrown;\n    };\n  var ___cxa_find_matching_catch_2 = () => findMatchingCatch([]);\n\n  var ___cxa_find_matching_catch_3 = (arg0) => findMatchingCatch([arg0]);\n\n  \n  \n  var ___cxa_throw = (ptr, type, destructor) => {\n      var info = new ExceptionInfo(ptr);\n      // Initialize ExceptionInfo content after it was allocated in __cxa_allocate_exception.\n      info.init(type, destructor);\n      exceptionLast = new CppException(ptr);\n      uncaughtExceptionCount++;\n      throw exceptionLast;\n    };\n\n\n  var __embind_register_bigint = (primitiveType, name, size, minRange, maxRange) => {};\n\n  var embind_init_charCodes = () => {\n      var codes = new Array(256);\n      for (var i = 0; i < 256; ++i) {\n          codes[i] = String.fromCharCode(i);\n      }\n      embind_charCodes = codes;\n    };\n  var embind_charCodes;\n  var readLatin1String = (ptr) => {\n      var ret = \"\";\n      var c = ptr;\n      while (HEAPU8[c]) {\n          ret += embind_charCodes[HEAPU8[c++]];\n      }\n      return ret;\n    };\n  \n  var awaitingDependencies = {\n  };\n  \n  var registeredTypes = {\n  };\n  \n  var typeDependencies = {\n  };\n  \n  var BindingError;\n  var throwBindingError = (message) => { throw new BindingError(message); };\n  \n  \n  \n  \n  var InternalError;\n  var throwInternalError = (message) => { throw new InternalError(message); };\n  var whenDependentTypesAreResolved = (myTypes, dependentTypes, getTypeConverters) => {\n      myTypes.forEach(function(type) {\n          typeDependencies[type] = dependentTypes;\n      });\n  \n      function onComplete(typeConverters) {\n          var myTypeConverters = getTypeConverters(typeConverters);\n          if (myTypeConverters.length !== myTypes.length) {\n              throwInternalError('Mismatched type converter count');\n          }\n          for (var i = 0; i < myTypes.length; ++i) {\n              registerType(myTypes[i], myTypeConverters[i]);\n          }\n      }\n  \n      var typeConverters = new Array(dependentTypes.length);\n      var unregisteredTypes = [];\n      var registered = 0;\n      dependentTypes.forEach((dt, i) => {\n        if (registeredTypes.hasOwnProperty(dt)) {\n          typeConverters[i] = registeredTypes[dt];\n        } else {\n          unregisteredTypes.push(dt);\n          if (!awaitingDependencies.hasOwnProperty(dt)) {\n            awaitingDependencies[dt] = [];\n          }\n          awaitingDependencies[dt].push(() => {\n            typeConverters[i] = registeredTypes[dt];\n            ++registered;\n            if (registered === unregisteredTypes.length) {\n              onComplete(typeConverters);\n            }\n          });\n        }\n      });\n      if (0 === unregisteredTypes.length) {\n        onComplete(typeConverters);\n      }\n    };\n  /** @param {Object=} options */\n  function sharedRegisterType(rawType, registeredInstance, options = {}) {\n      var name = registeredInstance.name;\n      if (!rawType) {\n        throwBindingError(`type \"${name}\" must have a positive integer typeid pointer`);\n      }\n      if (registeredTypes.hasOwnProperty(rawType)) {\n        if (options.ignoreDuplicateRegistrations) {\n          return;\n        } else {\n          throwBindingError(`Cannot register type '${name}' twice`);\n        }\n      }\n  \n      registeredTypes[rawType] = registeredInstance;\n      delete typeDependencies[rawType];\n  \n      if (awaitingDependencies.hasOwnProperty(rawType)) {\n        var callbacks = awaitingDependencies[rawType];\n        delete awaitingDependencies[rawType];\n        callbacks.forEach((cb) => cb());\n      }\n    }\n  /** @param {Object=} options */\n  function registerType(rawType, registeredInstance, options = {}) {\n      if (!('argPackAdvance' in registeredInstance)) {\n        throw new TypeError('registerType registeredInstance requires argPackAdvance');\n      }\n      return sharedRegisterType(rawType, registeredInstance, options);\n    }\n  \n  var GenericWireTypeSize = 8;\n  /** @suppress {globalThis} */\n  var __embind_register_bool = (rawType, name, trueValue, falseValue) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n          name,\n          'fromWireType': function(wt) {\n              // ambiguous emscripten ABI: sometimes return values are\n              // true or false, and sometimes integers (0 or 1)\n              return !!wt;\n          },\n          'toWireType': function(destructors, o) {\n              return o ? trueValue : falseValue;\n          },\n          'argPackAdvance': GenericWireTypeSize,\n          'readValueFromPointer': function(pointer) {\n              return this['fromWireType'](HEAPU8[pointer]);\n          },\n          destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  function handleAllocatorInit() {\n      Object.assign(HandleAllocator.prototype, /** @lends {HandleAllocator.prototype} */ {\n        get(id) {\n          assert(this.allocated[id] !== undefined, `invalid handle: ${id}`);\n          return this.allocated[id];\n        },\n        has(id) {\n          return this.allocated[id] !== undefined;\n        },\n        allocate(handle) {\n          var id = this.freelist.pop() || this.allocated.length;\n          this.allocated[id] = handle;\n          return id;\n        },\n        free(id) {\n          assert(this.allocated[id] !== undefined);\n          // Set the slot to `undefined` rather than using `delete` here since\n          // apparently arrays with holes in them can be less efficient.\n          this.allocated[id] = undefined;\n          this.freelist.push(id);\n        }\n      });\n    }\n  /** @constructor */\n  function HandleAllocator() {\n      // Reserve slot 0 so that 0 is always an invalid handle\n      this.allocated = [undefined];\n      this.freelist = [];\n    }\n  var emval_handles = new HandleAllocator();;\n  var __emval_decref = (handle) => {\n      if (handle >= emval_handles.reserved && 0 === --emval_handles.get(handle).refcount) {\n        emval_handles.free(handle);\n      }\n    };\n  \n  \n  \n  var count_emval_handles = () => {\n      var count = 0;\n      for (var i = emval_handles.reserved; i < emval_handles.allocated.length; ++i) {\n        if (emval_handles.allocated[i] !== undefined) {\n          ++count;\n        }\n      }\n      return count;\n    };\n  \n  var init_emval = () => {\n      // reserve some special values. These never get de-allocated.\n      // The HandleAllocator takes care of reserving zero.\n      emval_handles.allocated.push(\n        {value: undefined},\n        {value: null},\n        {value: true},\n        {value: false},\n      );\n      emval_handles.reserved = emval_handles.allocated.length\n      Module['count_emval_handles'] = count_emval_handles;\n    };\n  var Emval = {\n  toValue:(handle) => {\n        if (!handle) {\n            throwBindingError('Cannot use deleted val. handle = ' + handle);\n        }\n        return emval_handles.get(handle).value;\n      },\n  toHandle:(value) => {\n        switch (value) {\n          case undefined: return 1;\n          case null: return 2;\n          case true: return 3;\n          case false: return 4;\n          default:{\n            return emval_handles.allocate({refcount: 1, value: value});\n          }\n        }\n      },\n  };\n  \n  \n  \n  /** @suppress {globalThis} */\n  function simpleReadValueFromPointer(pointer) {\n      return this['fromWireType'](HEAP32[((pointer)>>2)]);\n    }\n  var __embind_register_emval = (rawType, name) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': (handle) => {\n          var rv = Emval.toValue(handle);\n          __emval_decref(handle);\n          return rv;\n        },\n        'toWireType': (destructors, value) => Emval.toHandle(value),\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': simpleReadValueFromPointer,\n        destructorFunction: null, // This type does not need a destructor\n  \n        // TODO: do we need a deleteObject here?  write a test where\n        // emval is passed into JS via an interface\n      });\n    };\n\n  var embindRepr = (v) => {\n      if (v === null) {\n          return 'null';\n      }\n      var t = typeof v;\n      if (t === 'object' || t === 'array' || t === 'function') {\n          return v.toString();\n      } else {\n          return '' + v;\n      }\n    };\n  \n  var floatReadValueFromPointer = (name, width) => {\n      switch (width) {\n          case 4: return function(pointer) {\n              return this['fromWireType'](HEAPF32[((pointer)>>2)]);\n          };\n          case 8: return function(pointer) {\n              return this['fromWireType'](HEAPF64[((pointer)>>3)]);\n          };\n          default:\n              throw new TypeError(`invalid float width (${width}): ${name}`);\n      }\n    };\n  \n  \n  var __embind_register_float = (rawType, name, size) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': (value) => value,\n        'toWireType': (destructors, value) => {\n          if (typeof value != \"number\" && typeof value != \"boolean\") {\n            throw new TypeError(`Cannot convert ${embindRepr(value)} to ${this.name}`);\n          }\n          // The VM will perform JS to Wasm value conversion, according to the spec:\n          // https://www.w3.org/TR/wasm-js-api-1/#towebassemblyvalue\n          return value;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': floatReadValueFromPointer(name, size),\n        destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  var createNamedFunction = (name, body) => Object.defineProperty(body, 'name', {\n      value: name\n    });\n  \n  var runDestructors = (destructors) => {\n      while (destructors.length) {\n        var ptr = destructors.pop();\n        var del = destructors.pop();\n        del(ptr);\n      }\n    };\n  \n  \n  function newFunc(constructor, argumentList) {\n      if (!(constructor instanceof Function)) {\n        throw new TypeError(`new_ called with constructor type ${typeof(constructor)} which is not a function`);\n      }\n      /*\n       * Previously, the following line was just:\n       *   function dummy() {};\n       * Unfortunately, Chrome was preserving 'dummy' as the object's name, even\n       * though at creation, the 'dummy' has the correct constructor name.  Thus,\n       * objects created with IMVU.new would show up in the debugger as 'dummy',\n       * which isn't very helpful.  Using IMVU.createNamedFunction addresses the\n       * issue.  Doublely-unfortunately, there's no way to write a test for this\n       * behavior.  -NRD 2013.02.22\n       */\n      var dummy = createNamedFunction(constructor.name || 'unknownFunctionName', function(){});\n      dummy.prototype = constructor.prototype;\n      var obj = new dummy;\n  \n      var r = constructor.apply(obj, argumentList);\n      return (r instanceof Object) ? r : obj;\n    }\n  function craftInvokerFunction(humanName, argTypes, classType, cppInvokerFunc, cppTargetFunc, /** boolean= */ isAsync) {\n      // humanName: a human-readable string name for the function to be generated.\n      // argTypes: An array that contains the embind type objects for all types in the function signature.\n      //    argTypes[0] is the type object for the function return value.\n      //    argTypes[1] is the type object for function this object/class type, or null if not crafting an invoker for a class method.\n      //    argTypes[2...] are the actual function parameters.\n      // classType: The embind type object for the class to be bound, or null if this is not a method of a class.\n      // cppInvokerFunc: JS Function object to the C++-side function that interops into C++ code.\n      // cppTargetFunc: Function pointer (an integer to FUNCTION_TABLE) to the target C++ function the cppInvokerFunc will end up calling.\n      // isAsync: Optional. If true, returns an async function. Async bindings are only supported with JSPI.\n      var argCount = argTypes.length;\n  \n      if (argCount < 2) {\n        throwBindingError(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n      }\n  \n      assert(!isAsync, 'Async bindings are only supported with JSPI.');\n  \n      var isClassMethodFunc = (argTypes[1] !== null && classType !== null);\n  \n      // Free functions with signature \"void function()\" do not need an invoker that marshalls between wire types.\n  // TODO: This omits argument count check - enable only at -O3 or similar.\n  //    if (ENABLE_UNSAFE_OPTS && argCount == 2 && argTypes[0].name == \"void\" && !isClassMethodFunc) {\n  //       return FUNCTION_TABLE[fn];\n  //    }\n  \n      // Determine if we need to use a dynamic stack to store the destructors for the function parameters.\n      // TODO: Remove this completely once all function invokers are being dynamically generated.\n      var needsDestructorStack = false;\n  \n      for (var i = 1; i < argTypes.length; ++i) { // Skip return value at index 0 - it's not deleted here.\n        if (argTypes[i] !== null && argTypes[i].destructorFunction === undefined) { // The type does not define a destructor function - must use dynamic stack\n          needsDestructorStack = true;\n          break;\n        }\n      }\n  \n      var returns = (argTypes[0].name !== \"void\");\n  \n      var argsList = \"\";\n      var argsListWired = \"\";\n      for (var i = 0; i < argCount - 2; ++i) {\n        argsList += (i!==0?\", \":\"\")+\"arg\"+i;\n        argsListWired += (i!==0?\", \":\"\")+\"arg\"+i+\"Wired\";\n      }\n  \n      var invokerFnBody = `\n        return function (${argsList}) {\n        if (arguments.length !== ${argCount - 2}) {\n          throwBindingError('function ${humanName} called with ' + arguments.length + ' arguments, expected ${argCount - 2}');\n        }`;\n  \n      if (needsDestructorStack) {\n        invokerFnBody += \"var destructors = [];\\n\";\n      }\n  \n      var dtorStack = needsDestructorStack ? \"destructors\" : \"null\";\n      var args1 = [\"throwBindingError\", \"invoker\", \"fn\", \"runDestructors\", \"retType\", \"classParam\"];\n      var args2 = [throwBindingError, cppInvokerFunc, cppTargetFunc, runDestructors, argTypes[0], argTypes[1]];\n  \n      if (isClassMethodFunc) {\n        invokerFnBody += \"var thisWired = classParam.toWireType(\"+dtorStack+\", this);\\n\";\n      }\n  \n      for (var i = 0; i < argCount - 2; ++i) {\n        invokerFnBody += \"var arg\"+i+\"Wired = argType\"+i+\".toWireType(\"+dtorStack+\", arg\"+i+\"); // \"+argTypes[i+2].name+\"\\n\";\n        args1.push(\"argType\"+i);\n        args2.push(argTypes[i+2]);\n      }\n  \n      if (isClassMethodFunc) {\n        argsListWired = \"thisWired\" + (argsListWired.length > 0 ? \", \" : \"\") + argsListWired;\n      }\n  \n      invokerFnBody +=\n          (returns || isAsync ? \"var rv = \":\"\") + \"invoker(fn\"+(argsListWired.length>0?\", \":\"\")+argsListWired+\");\\n\";\n  \n      if (needsDestructorStack) {\n        invokerFnBody += \"runDestructors(destructors);\\n\";\n      } else {\n        for (var i = isClassMethodFunc?1:2; i < argTypes.length; ++i) { // Skip return value at index 0 - it's not deleted here. Also skip class type if not a method.\n          var paramName = (i === 1 ? \"thisWired\" : (\"arg\"+(i - 2)+\"Wired\"));\n          if (argTypes[i].destructorFunction !== null) {\n            invokerFnBody += paramName+\"_dtor(\"+paramName+\"); // \"+argTypes[i].name+\"\\n\";\n            args1.push(paramName+\"_dtor\");\n            args2.push(argTypes[i].destructorFunction);\n          }\n        }\n      }\n  \n      if (returns) {\n        invokerFnBody += \"var ret = retType.fromWireType(rv);\\n\" +\n                         \"return ret;\\n\";\n      } else {\n      }\n  \n      invokerFnBody += \"}\\n\";\n  \n      args1.push(invokerFnBody);\n  \n      var invokerFn = newFunc(Function, args1).apply(null, args2);\n      return createNamedFunction(humanName, invokerFn);\n    }\n  \n  var ensureOverloadTable = (proto, methodName, humanName) => {\n      if (undefined === proto[methodName].overloadTable) {\n        var prevFunc = proto[methodName];\n        // Inject an overload resolver function that routes to the appropriate overload based on the number of arguments.\n        proto[methodName] = function() {\n          // TODO This check can be removed in -O3 level \"unsafe\" optimizations.\n          if (!proto[methodName].overloadTable.hasOwnProperty(arguments.length)) {\n              throwBindingError(`Function '${humanName}' called with an invalid number of arguments (${arguments.length}) - expects one of (${proto[methodName].overloadTable})!`);\n          }\n          return proto[methodName].overloadTable[arguments.length].apply(this, arguments);\n        };\n        // Move the previous function into the overload table.\n        proto[methodName].overloadTable = [];\n        proto[methodName].overloadTable[prevFunc.argCount] = prevFunc;\n      }\n    };\n  \n  /** @param {number=} numArguments */\n  var exposePublicSymbol = (name, value, numArguments) => {\n      if (Module.hasOwnProperty(name)) {\n        if (undefined === numArguments || (undefined !== Module[name].overloadTable && undefined !== Module[name].overloadTable[numArguments])) {\n          throwBindingError(`Cannot register public name '${name}' twice`);\n        }\n  \n        // We are exposing a function with the same name as an existing function. Create an overload table and a function selector\n        // that routes between the two.\n        ensureOverloadTable(Module, name, name);\n        if (Module.hasOwnProperty(numArguments)) {\n          throwBindingError(`Cannot register multiple overloads of a function with the same number of arguments (${numArguments})!`);\n        }\n        // Add the new function into the overload table.\n        Module[name].overloadTable[numArguments] = value;\n      }\n      else {\n        Module[name] = value;\n        if (undefined !== numArguments) {\n          Module[name].numArguments = numArguments;\n        }\n      }\n    };\n  \n  var heap32VectorToArray = (count, firstElement) => {\n      var array = [];\n      for (var i = 0; i < count; i++) {\n          // TODO(https://github.com/emscripten-core/emscripten/issues/17310):\n          // Find a way to hoist the `>> 2` or `>> 3` out of this loop.\n          array.push(HEAPU32[(((firstElement)+(i * 4))>>2)]);\n      }\n      return array;\n    };\n  \n  \n  /** @param {number=} numArguments */\n  var replacePublicSymbol = (name, value, numArguments) => {\n      if (!Module.hasOwnProperty(name)) {\n        throwInternalError('Replacing nonexistant public symbol');\n      }\n      // If there's an overload table for this symbol, replace the symbol in the overload table instead.\n      if (undefined !== Module[name].overloadTable && undefined !== numArguments) {\n        Module[name].overloadTable[numArguments] = value;\n      }\n      else {\n        Module[name] = value;\n        Module[name].argCount = numArguments;\n      }\n    };\n  \n  \n  \n  var dynCallLegacy = (sig, ptr, args) => {\n      assert(('dynCall_' + sig) in Module, `bad function pointer type - dynCall function not found for sig '${sig}'`);\n      if (args && args.length) {\n        // j (64-bit integer) must be passed in as two numbers [low 32, high 32].\n        assert(args.length === sig.substring(1).replace(/j/g, '--').length);\n      } else {\n        assert(sig.length == 1);\n      }\n      var f = Module['dynCall_' + sig];\n      return args && args.length ? f.apply(null, [ptr].concat(args)) : f.call(null, ptr);\n    };\n  \n  var wasmTableMirror = [];\n  \n  var wasmTable;\n  var getWasmTableEntry = (funcPtr) => {\n      var func = wasmTableMirror[funcPtr];\n      if (!func) {\n        if (funcPtr >= wasmTableMirror.length) wasmTableMirror.length = funcPtr + 1;\n        wasmTableMirror[funcPtr] = func = wasmTable.get(funcPtr);\n      }\n      assert(wasmTable.get(funcPtr) == func, \"JavaScript-side Wasm function table mirror is out of date!\");\n      return func;\n    };\n  \n  /** @param {Object=} args */\n  var dynCall = (sig, ptr, args) => {\n      // Without WASM_BIGINT support we cannot directly call function with i64 as\n      // part of thier signature, so we rely the dynCall functions generated by\n      // wasm-emscripten-finalize\n      if (sig.includes('j')) {\n        return dynCallLegacy(sig, ptr, args);\n      }\n      assert(getWasmTableEntry(ptr), `missing table entry in dynCall: ${ptr}`);\n      var rtn = getWasmTableEntry(ptr).apply(null, args);\n      return rtn;\n    };\n  var getDynCaller = (sig, ptr) => {\n      assert(sig.includes('j') || sig.includes('p'), 'getDynCaller should only be called with i64 sigs')\n      var argCache = [];\n      return function() {\n        argCache.length = 0;\n        Object.assign(argCache, arguments);\n        return dynCall(sig, ptr, argCache);\n      };\n    };\n  \n  \n  var embind__requireFunction = (signature, rawFunction) => {\n      signature = readLatin1String(signature);\n  \n      function makeDynCaller() {\n        if (signature.includes('j')) {\n          return getDynCaller(signature, rawFunction);\n        }\n        return getWasmTableEntry(rawFunction);\n      }\n  \n      var fp = makeDynCaller();\n      if (typeof fp != \"function\") {\n          throwBindingError(`unknown function pointer with signature ${signature}: ${rawFunction}`);\n      }\n      return fp;\n    };\n  \n  \n  \n  var extendError = (baseErrorType, errorName) => {\n      var errorClass = createNamedFunction(errorName, function(message) {\n        this.name = errorName;\n        this.message = message;\n  \n        var stack = (new Error(message)).stack;\n        if (stack !== undefined) {\n          this.stack = this.toString() + '\\n' +\n              stack.replace(/^Error(:[^\\n]*)?\\n/, '');\n        }\n      });\n      errorClass.prototype = Object.create(baseErrorType.prototype);\n      errorClass.prototype.constructor = errorClass;\n      errorClass.prototype.toString = function() {\n        if (this.message === undefined) {\n          return this.name;\n        } else {\n          return `${this.name}: ${this.message}`;\n        }\n      };\n  \n      return errorClass;\n    };\n  var UnboundTypeError;\n  \n  \n  \n  var getTypeName = (type) => {\n      var ptr = ___getTypeName(type);\n      var rv = readLatin1String(ptr);\n      _free(ptr);\n      return rv;\n    };\n  var throwUnboundTypeError = (message, types) => {\n      var unboundTypes = [];\n      var seen = {};\n      function visit(type) {\n        if (seen[type]) {\n          return;\n        }\n        if (registeredTypes[type]) {\n          return;\n        }\n        if (typeDependencies[type]) {\n          typeDependencies[type].forEach(visit);\n          return;\n        }\n        unboundTypes.push(type);\n        seen[type] = true;\n      }\n      types.forEach(visit);\n  \n      throw new UnboundTypeError(`${message}: ` + unboundTypes.map(getTypeName).join([', ']));\n    };\n  \n  \n  var getFunctionName = (signature) => {\n      signature = signature.trim();\n      const argsIndex = signature.indexOf(\"(\");\n      if (argsIndex !== -1) {\n        assert(signature[signature.length - 1] == \")\", \"Parentheses for argument names should match.\");\n        return signature.substr(0, argsIndex);\n      } else {\n        return signature;\n      }\n    };\n  var __embind_register_function = (name, argCount, rawArgTypesAddr, signature, rawInvoker, fn, isAsync) => {\n      var argTypes = heap32VectorToArray(argCount, rawArgTypesAddr);\n      name = readLatin1String(name);\n      name = getFunctionName(name);\n  \n      rawInvoker = embind__requireFunction(signature, rawInvoker);\n  \n      exposePublicSymbol(name, function() {\n        throwUnboundTypeError(`Cannot call ${name} due to unbound types`, argTypes);\n      }, argCount - 1);\n  \n      whenDependentTypesAreResolved([], argTypes, function(argTypes) {\n        var invokerArgsArray = [argTypes[0] /* return value */, null /* no class 'this'*/].concat(argTypes.slice(1) /* actual params */);\n        replacePublicSymbol(name, craftInvokerFunction(name, invokerArgsArray, null /* no class 'this'*/, rawInvoker, fn, isAsync), argCount - 1);\n        return [];\n      });\n    };\n\n  \n  var integerReadValueFromPointer = (name, width, signed) => {\n      // integers are quite common, so generate very specialized functions\n      switch (width) {\n          case 1: return signed ?\n              (pointer) => HEAP8[((pointer)>>0)] :\n              (pointer) => HEAPU8[((pointer)>>0)];\n          case 2: return signed ?\n              (pointer) => HEAP16[((pointer)>>1)] :\n              (pointer) => HEAPU16[((pointer)>>1)]\n          case 4: return signed ?\n              (pointer) => HEAP32[((pointer)>>2)] :\n              (pointer) => HEAPU32[((pointer)>>2)]\n          default:\n              throw new TypeError(`invalid integer width (${width}): ${name}`);\n      }\n    };\n  \n  \n  /** @suppress {globalThis} */\n  var __embind_register_integer = (primitiveType, name, size, minRange, maxRange) => {\n      name = readLatin1String(name);\n      // LLVM doesn't have signed and unsigned 32-bit types, so u32 literals come\n      // out as 'i32 -1'. Always treat those as max u32.\n      if (maxRange === -1) {\n        maxRange = 4294967295;\n      }\n  \n      var fromWireType = (value) => value;\n  \n      if (minRange === 0) {\n        var bitshift = 32 - 8*size;\n        fromWireType = (value) => (value << bitshift) >>> bitshift;\n      }\n  \n      var isUnsignedType = (name.includes('unsigned'));\n      var checkAssertions = (value, toTypeName) => {\n        if (typeof value != \"number\" && typeof value != \"boolean\") {\n          throw new TypeError(`Cannot convert \"${embindRepr(value)}\" to ${toTypeName}`);\n        }\n        if (value < minRange || value > maxRange) {\n          throw new TypeError(`Passing a number \"${embindRepr(value)}\" from JS side to C/C++ side to an argument of type \"${name}\", which is outside the valid range [${minRange}, ${maxRange}]!`);\n        }\n      }\n      var toWireType;\n      if (isUnsignedType) {\n        toWireType = function(destructors, value) {\n          checkAssertions(value, this.name);\n          return value >>> 0;\n        }\n      } else {\n        toWireType = function(destructors, value) {\n          checkAssertions(value, this.name);\n          // The VM will perform JS to Wasm value conversion, according to the spec:\n          // https://www.w3.org/TR/wasm-js-api-1/#towebassemblyvalue\n          return value;\n        }\n      }\n      registerType(primitiveType, {\n        name,\n        'fromWireType': fromWireType,\n        'toWireType': toWireType,\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': integerReadValueFromPointer(name, size, minRange !== 0),\n        destructorFunction: null, // This type does not need a destructor\n      });\n    };\n\n  \n  var __embind_register_memory_view = (rawType, dataTypeIndex, name) => {\n      var typeMapping = [\n        Int8Array,\n        Uint8Array,\n        Int16Array,\n        Uint16Array,\n        Int32Array,\n        Uint32Array,\n        Float32Array,\n        Float64Array,\n      ];\n  \n      var TA = typeMapping[dataTypeIndex];\n  \n      function decodeMemoryView(handle) {\n        var size = HEAPU32[((handle)>>2)];\n        var data = HEAPU32[(((handle)+(4))>>2)];\n        return new TA(HEAP8.buffer, data, size);\n      }\n  \n      name = readLatin1String(name);\n      registerType(rawType, {\n        name,\n        'fromWireType': decodeMemoryView,\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': decodeMemoryView,\n      }, {\n        ignoreDuplicateRegistrations: true,\n      });\n    };\n\n  \n  \n  /** @suppress {globalThis} */\n  function readPointer(pointer) {\n      return this['fromWireType'](HEAPU32[((pointer)>>2)]);\n    }\n  \n  \n  var stringToUTF8Array = (str, heap, outIdx, maxBytesToWrite) => {\n      assert(typeof str === 'string', `stringToUTF8Array expects a string (got ${typeof str})`);\n      // Parameter maxBytesToWrite is not optional. Negative values, 0, null,\n      // undefined and false each don't write out any bytes.\n      if (!(maxBytesToWrite > 0))\n        return 0;\n  \n      var startIdx = outIdx;\n      var endIdx = outIdx + maxBytesToWrite - 1; // -1 for string null terminator.\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code\n        // unit, not a Unicode code point of the character! So decode\n        // UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description\n        // and https://www.ietf.org/rfc/rfc2279.txt\n        // and https://tools.ietf.org/html/rfc3629\n        var u = str.charCodeAt(i); // possibly a lead surrogate\n        if (u >= 0xD800 && u <= 0xDFFF) {\n          var u1 = str.charCodeAt(++i);\n          u = 0x10000 + ((u & 0x3FF) << 10) | (u1 & 0x3FF);\n        }\n        if (u <= 0x7F) {\n          if (outIdx >= endIdx) break;\n          heap[outIdx++] = u;\n        } else if (u <= 0x7FF) {\n          if (outIdx + 1 >= endIdx) break;\n          heap[outIdx++] = 0xC0 | (u >> 6);\n          heap[outIdx++] = 0x80 | (u & 63);\n        } else if (u <= 0xFFFF) {\n          if (outIdx + 2 >= endIdx) break;\n          heap[outIdx++] = 0xE0 | (u >> 12);\n          heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n          heap[outIdx++] = 0x80 | (u & 63);\n        } else {\n          if (outIdx + 3 >= endIdx) break;\n          if (u > 0x10FFFF) warnOnce('Invalid Unicode code point ' + ptrToString(u) + ' encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).');\n          heap[outIdx++] = 0xF0 | (u >> 18);\n          heap[outIdx++] = 0x80 | ((u >> 12) & 63);\n          heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n          heap[outIdx++] = 0x80 | (u & 63);\n        }\n      }\n      // Null-terminate the pointer to the buffer.\n      heap[outIdx] = 0;\n      return outIdx - startIdx;\n    };\n  var stringToUTF8 = (str, outPtr, maxBytesToWrite) => {\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      return stringToUTF8Array(str, HEAPU8, outPtr, maxBytesToWrite);\n    };\n  \n  var lengthBytesUTF8 = (str) => {\n      var len = 0;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code\n        // unit, not a Unicode code point of the character! So decode\n        // UTF16->UTF32->UTF8.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var c = str.charCodeAt(i); // possibly a lead surrogate\n        if (c <= 0x7F) {\n          len++;\n        } else if (c <= 0x7FF) {\n          len += 2;\n        } else if (c >= 0xD800 && c <= 0xDFFF) {\n          len += 4; ++i;\n        } else {\n          len += 3;\n        }\n      }\n      return len;\n    };\n  \n  \n  \n  var __embind_register_std_string = (rawType, name) => {\n      name = readLatin1String(name);\n      var stdStringIsUTF8\n      //process only std::string bindings with UTF8 support, in contrast to e.g. std::basic_string<unsigned char>\n      = (name === \"std::string\");\n  \n      registerType(rawType, {\n        name,\n        // For some method names we use string keys here since they are part of\n        // the public/external API and/or used by the runtime-generated code.\n        'fromWireType'(value) {\n          var length = HEAPU32[((value)>>2)];\n          var payload = value + 4;\n  \n          var str;\n          if (stdStringIsUTF8) {\n            var decodeStartPtr = payload;\n            // Looping here to support possible embedded '0' bytes\n            for (var i = 0; i <= length; ++i) {\n              var currentBytePtr = payload + i;\n              if (i == length || HEAPU8[currentBytePtr] == 0) {\n                var maxRead = currentBytePtr - decodeStartPtr;\n                var stringSegment = UTF8ToString(decodeStartPtr, maxRead);\n                if (str === undefined) {\n                  str = stringSegment;\n                } else {\n                  str += String.fromCharCode(0);\n                  str += stringSegment;\n                }\n                decodeStartPtr = currentBytePtr + 1;\n              }\n            }\n          } else {\n            var a = new Array(length);\n            for (var i = 0; i < length; ++i) {\n              a[i] = String.fromCharCode(HEAPU8[payload + i]);\n            }\n            str = a.join('');\n          }\n  \n          _free(value);\n  \n          return str;\n        },\n        'toWireType'(destructors, value) {\n          if (value instanceof ArrayBuffer) {\n            value = new Uint8Array(value);\n          }\n  \n          var length;\n          var valueIsOfTypeString = (typeof value == 'string');\n  \n          if (!(valueIsOfTypeString || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Int8Array)) {\n            throwBindingError('Cannot pass non-string to std::string');\n          }\n          if (stdStringIsUTF8 && valueIsOfTypeString) {\n            length = lengthBytesUTF8(value);\n          } else {\n            length = value.length;\n          }\n  \n          // assumes 4-byte alignment\n          var base = _malloc(4 + length + 1);\n          var ptr = base + 4;\n          HEAPU32[((base)>>2)] = length;\n          if (stdStringIsUTF8 && valueIsOfTypeString) {\n            stringToUTF8(value, ptr, length + 1);\n          } else {\n            if (valueIsOfTypeString) {\n              for (var i = 0; i < length; ++i) {\n                var charCode = value.charCodeAt(i);\n                if (charCode > 255) {\n                  _free(ptr);\n                  throwBindingError('String has UTF-16 code units that do not fit in 8 bits');\n                }\n                HEAPU8[ptr + i] = charCode;\n              }\n            } else {\n              for (var i = 0; i < length; ++i) {\n                HEAPU8[ptr + i] = value[i];\n              }\n            }\n          }\n  \n          if (destructors !== null) {\n            destructors.push(_free, base);\n          }\n          return base;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': readPointer,\n        destructorFunction(ptr) {\n          _free(ptr);\n        },\n      });\n    };\n\n  \n  \n  \n  var UTF16Decoder = typeof TextDecoder != 'undefined' ? new TextDecoder('utf-16le') : undefined;;\n  var UTF16ToString = (ptr, maxBytesToRead) => {\n      assert(ptr % 2 == 0, 'Pointer passed to UTF16ToString must be aligned to two bytes!');\n      var endPtr = ptr;\n      // TextDecoder needs to know the byte length in advance, it doesn't stop on\n      // null terminator by itself.\n      // Also, use the length info to avoid running tiny strings through\n      // TextDecoder, since .subarray() allocates garbage.\n      var idx = endPtr >> 1;\n      var maxIdx = idx + maxBytesToRead / 2;\n      // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n      // will always evaluate to true. This saves on code size.\n      while (!(idx >= maxIdx) && HEAPU16[idx]) ++idx;\n      endPtr = idx << 1;\n  \n      if (endPtr - ptr > 32 && UTF16Decoder)\n        return UTF16Decoder.decode(HEAPU8.subarray(ptr, endPtr));\n  \n      // Fallback: decode without UTF16Decoder\n      var str = '';\n  \n      // If maxBytesToRead is not passed explicitly, it will be undefined, and the\n      // for-loop's condition will always evaluate to true. The loop is then\n      // terminated on the first null char.\n      for (var i = 0; !(i >= maxBytesToRead / 2); ++i) {\n        var codeUnit = HEAP16[(((ptr)+(i*2))>>1)];\n        if (codeUnit == 0) break;\n        // fromCharCode constructs a character from a UTF-16 code unit, so we can\n        // pass the UTF16 string right through.\n        str += String.fromCharCode(codeUnit);\n      }\n  \n      return str;\n    };\n  \n  var stringToUTF16 = (str, outPtr, maxBytesToWrite) => {\n      assert(outPtr % 2 == 0, 'Pointer passed to stringToUTF16 must be aligned to two bytes!');\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n      if (maxBytesToWrite === undefined) {\n        maxBytesToWrite = 0x7FFFFFFF;\n      }\n      if (maxBytesToWrite < 2) return 0;\n      maxBytesToWrite -= 2; // Null terminator.\n      var startPtr = outPtr;\n      var numCharsToWrite = (maxBytesToWrite < str.length*2) ? (maxBytesToWrite / 2) : str.length;\n      for (var i = 0; i < numCharsToWrite; ++i) {\n        // charCodeAt returns a UTF-16 encoded code unit, so it can be directly written to the HEAP.\n        var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n        HEAP16[((outPtr)>>1)] = codeUnit;\n        outPtr += 2;\n      }\n      // Null-terminate the pointer to the HEAP.\n      HEAP16[((outPtr)>>1)] = 0;\n      return outPtr - startPtr;\n    };\n  \n  var lengthBytesUTF16 = (str) => {\n      return str.length*2;\n    };\n  \n  var UTF32ToString = (ptr, maxBytesToRead) => {\n      assert(ptr % 4 == 0, 'Pointer passed to UTF32ToString must be aligned to four bytes!');\n      var i = 0;\n  \n      var str = '';\n      // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n      // will always evaluate to true. This saves on code size.\n      while (!(i >= maxBytesToRead / 4)) {\n        var utf32 = HEAP32[(((ptr)+(i*4))>>2)];\n        if (utf32 == 0) break;\n        ++i;\n        // Gotcha: fromCharCode constructs a character from a UTF-16 encoded code (pair), not from a Unicode code point! So encode the code point to UTF-16 for constructing.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        if (utf32 >= 0x10000) {\n          var ch = utf32 - 0x10000;\n          str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n        } else {\n          str += String.fromCharCode(utf32);\n        }\n      }\n      return str;\n    };\n  \n  var stringToUTF32 = (str, outPtr, maxBytesToWrite) => {\n      assert(outPtr % 4 == 0, 'Pointer passed to stringToUTF32 must be aligned to four bytes!');\n      assert(typeof maxBytesToWrite == 'number', 'stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n      // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n      if (maxBytesToWrite === undefined) {\n        maxBytesToWrite = 0x7FFFFFFF;\n      }\n      if (maxBytesToWrite < 4) return 0;\n      var startPtr = outPtr;\n      var endPtr = startPtr + maxBytesToWrite - 4;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n        if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) {\n          var trailSurrogate = str.charCodeAt(++i);\n          codeUnit = 0x10000 + ((codeUnit & 0x3FF) << 10) | (trailSurrogate & 0x3FF);\n        }\n        HEAP32[((outPtr)>>2)] = codeUnit;\n        outPtr += 4;\n        if (outPtr + 4 > endPtr) break;\n      }\n      // Null-terminate the pointer to the HEAP.\n      HEAP32[((outPtr)>>2)] = 0;\n      return outPtr - startPtr;\n    };\n  \n  var lengthBytesUTF32 = (str) => {\n      var len = 0;\n      for (var i = 0; i < str.length; ++i) {\n        // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n        // See http://unicode.org/faq/utf_bom.html#utf16-3\n        var codeUnit = str.charCodeAt(i);\n        if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) ++i; // possibly a lead surrogate, so skip over the tail surrogate.\n        len += 4;\n      }\n  \n      return len;\n    };\n  var __embind_register_std_wstring = (rawType, charSize, name) => {\n      name = readLatin1String(name);\n      var decodeString, encodeString, getHeap, lengthBytesUTF, shift;\n      if (charSize === 2) {\n        decodeString = UTF16ToString;\n        encodeString = stringToUTF16;\n        lengthBytesUTF = lengthBytesUTF16;\n        getHeap = () => HEAPU16;\n        shift = 1;\n      } else if (charSize === 4) {\n        decodeString = UTF32ToString;\n        encodeString = stringToUTF32;\n        lengthBytesUTF = lengthBytesUTF32;\n        getHeap = () => HEAPU32;\n        shift = 2;\n      }\n      registerType(rawType, {\n        name,\n        'fromWireType': (value) => {\n          // Code mostly taken from _embind_register_std_string fromWireType\n          var length = HEAPU32[((value)>>2)];\n          var HEAP = getHeap();\n          var str;\n  \n          var decodeStartPtr = value + 4;\n          // Looping here to support possible embedded '0' bytes\n          for (var i = 0; i <= length; ++i) {\n            var currentBytePtr = value + 4 + i * charSize;\n            if (i == length || HEAP[currentBytePtr >> shift] == 0) {\n              var maxReadBytes = currentBytePtr - decodeStartPtr;\n              var stringSegment = decodeString(decodeStartPtr, maxReadBytes);\n              if (str === undefined) {\n                str = stringSegment;\n              } else {\n                str += String.fromCharCode(0);\n                str += stringSegment;\n              }\n              decodeStartPtr = currentBytePtr + charSize;\n            }\n          }\n  \n          _free(value);\n  \n          return str;\n        },\n        'toWireType': (destructors, value) => {\n          if (!(typeof value == 'string')) {\n            throwBindingError(`Cannot pass non-string to C++ string type ${name}`);\n          }\n  \n          // assumes 4-byte alignment\n          var length = lengthBytesUTF(value);\n          var ptr = _malloc(4 + length + charSize);\n          HEAPU32[ptr >> 2] = length >> shift;\n  \n          encodeString(value, ptr + 4, length + charSize);\n  \n          if (destructors !== null) {\n            destructors.push(_free, ptr);\n          }\n          return ptr;\n        },\n        'argPackAdvance': GenericWireTypeSize,\n        'readValueFromPointer': simpleReadValueFromPointer,\n        destructorFunction(ptr) {\n          _free(ptr);\n        }\n      });\n    };\n\n  \n  var __embind_register_void = (rawType, name) => {\n      name = readLatin1String(name);\n      registerType(rawType, {\n        isVoid: true, // void return values can be optimized out sometimes\n        name,\n        'argPackAdvance': 0,\n        'fromWireType': () => undefined,\n        // TODO: assert if anything else is given?\n        'toWireType': (destructors, o) => undefined,\n      });\n    };\n\n  var nowIsMonotonic = 1;\n  var __emscripten_get_now_is_monotonic = () => nowIsMonotonic;\n\n  \n  \n  \n  var requireRegisteredType = (rawType, humanName) => {\n      var impl = registeredTypes[rawType];\n      if (undefined === impl) {\n          throwBindingError(humanName + \" has unknown type \" + getTypeName(rawType));\n      }\n      return impl;\n    };\n  \n  var emval_returnValue = (returnType, destructorsRef, handle) => {\n      var destructors = [];\n      var result = returnType['toWireType'](destructors, handle);\n      if (destructors.length) {\n        // void, primitives and any other types w/o destructors don't need to allocate a handle\n        HEAPU32[((destructorsRef)>>2)] = Emval.toHandle(destructors);\n      }\n      return result;\n    };\n  var __emval_as = (handle, returnType, destructorsRef) => {\n      handle = Emval.toValue(handle);\n      returnType = requireRegisteredType(returnType, 'emval::as');\n      return emval_returnValue(returnType, destructorsRef, handle);\n    };\n\n  var emval_methodCallers = [];\n  \n  var __emval_call = (caller, handle, destructorsRef, args) => {\n      caller = emval_methodCallers[caller];\n      handle = Emval.toValue(handle);\n      return caller(null, handle, destructorsRef, args);\n    };\n\n  var emval_symbols = {\n  };\n  \n  var getStringOrSymbol = (address) => {\n      var symbol = emval_symbols[address];\n      if (symbol === undefined) {\n        return readLatin1String(address);\n      }\n      return symbol;\n    };\n  \n  \n  var __emval_call_method = (caller, objHandle, methodName, destructorsRef, args) => {\n      caller = emval_methodCallers[caller];\n      objHandle = Emval.toValue(objHandle);\n      methodName = getStringOrSymbol(methodName);\n      return caller(objHandle, objHandle[methodName], destructorsRef, args);\n    };\n\n\n  var emval_addMethodCaller = (caller) => {\n      var id = emval_methodCallers.length;\n      emval_methodCallers.push(caller);\n      return id;\n    };\n  \n  var emval_lookupTypes = (argCount, argTypes) => {\n      var a = new Array(argCount);\n      for (var i = 0; i < argCount; ++i) {\n        a[i] = requireRegisteredType(HEAPU32[(((argTypes)+(i * 4))>>2)],\n                                     \"parameter \" + i);\n      }\n      return a;\n    };\n  \n  \n  var reflectConstruct = Reflect.construct;\n  \n  \n  var __emval_get_method_caller = (argCount, argTypes, kind) => {\n      var types = emval_lookupTypes(argCount, argTypes);\n      var retType = types.shift();\n      argCount--; // remove the shifted off return type\n  \n      var functionBody =\n        `return function (obj, func, destructorsRef, args) {\\n`;\n  \n      var offset = 0;\n      var argsList = []; // 'obj?, arg0, arg1, arg2, ... , argN'\n      if (kind === /* FUNCTION */ 0) {\n        argsList.push(\"obj\");\n      }\n      var params = [\"retType\"];\n      var args = [retType];\n      for (var i = 0; i < argCount; ++i) {\n        argsList.push(\"arg\" + i);\n        params.push(\"argType\" + i);\n        args.push(types[i]);\n        functionBody +=\n          `  var arg${i} = argType${i}.readValueFromPointer(args${offset ? \"+\" + offset : \"\"});\\n`;\n        offset += types[i]['argPackAdvance'];\n      }\n      var invoker = kind === /* CONSTRUCTOR */ 1 ? 'new func' : 'func.call';\n      functionBody +=\n        `  var rv = ${invoker}(${argsList.join(\", \")});\\n`;\n      for (var i = 0; i < argCount; ++i) {\n        if (types[i]['deleteObject']) {\n          functionBody +=\n            `  argType${i}.deleteObject(arg${i});\\n`;\n        }\n      }\n      if (!retType.isVoid) {\n        params.push(\"emval_returnValue\");\n        args.push(emval_returnValue);\n        functionBody +=\n          \"  return emval_returnValue(retType, destructorsRef, rv);\\n\";\n      }\n      functionBody +=\n        \"};\\n\";\n  \n      params.push(functionBody);\n      var invokerFunction = newFunc(Function, params).apply(null, args);\n      var functionName = `methodCaller<(${types.map(t => t.name).join(', ')}) => ${retType.name}>`;\n      return emval_addMethodCaller(createNamedFunction(functionName, invokerFunction));\n    };\n\n  \n  var __emval_get_module_property = (name) => {\n      name = getStringOrSymbol(name);\n      return Emval.toHandle(Module[name]);\n    };\n\n  var __emval_get_property = (handle, key) => {\n      handle = Emval.toValue(handle);\n      key = Emval.toValue(key);\n      return Emval.toHandle(handle[key]);\n    };\n\n  var __emval_incref = (handle) => {\n      if (handle > 4) {\n        emval_handles.get(handle).refcount += 1;\n      }\n    };\n\n  var __emval_new_array = () => Emval.toHandle([]);\n\n  \n  var __emval_new_cstring = (v) => Emval.toHandle(getStringOrSymbol(v));\n\n  var __emval_new_object = () => Emval.toHandle({});\n\n  \n  \n  var __emval_run_destructors = (handle) => {\n      var destructors = Emval.toValue(handle);\n      runDestructors(destructors);\n      __emval_decref(handle);\n    };\n\n  var __emval_set_property = (handle, key, value) => {\n      handle = Emval.toValue(handle);\n      key = Emval.toValue(key);\n      value = Emval.toValue(value);\n      handle[key] = value;\n    };\n\n  \n  var __emval_take_value = (type, arg) => {\n      type = requireRegisteredType(type, '_emval_take_value');\n      var v = type['readValueFromPointer'](arg);\n      return Emval.toHandle(v);\n    };\n\n  var _abort = () => {\n      abort('native code called abort()');\n    };\n\n  var _emscripten_date_now = () => Date.now();\n\n  var _emscripten_get_now;\n      // Modern environment where performance.now() is supported:\n      // N.B. a shorter form \"_emscripten_get_now = performance.now;\" is\n      // unfortunately not allowed even in current browsers (e.g. FF Nightly 75).\n      _emscripten_get_now = () => performance.now();\n  ;\n\n  var _emscripten_memcpy_js = (dest, src, num) => HEAPU8.copyWithin(dest, src, src + num);\n\n  var getHeapMax = () =>\n      // Stay one Wasm page short of 4GB: while e.g. Chrome is able to allocate\n      // full 4GB Wasm memories, the size will wrap back to 0 bytes in Wasm side\n      // for any code that deals with heap sizes, which would require special\n      // casing all heap size related code to treat 0 specially.\n      2147483648;\n  \n  var growMemory = (size) => {\n      var b = wasmMemory.buffer;\n      var pages = (size - b.byteLength + 65535) / 65536;\n      try {\n        // round size grow request up to wasm page size (fixed 64KB per spec)\n        wasmMemory.grow(pages); // .grow() takes a delta compared to the previous size\n        updateMemoryViews();\n        return 1 /*success*/;\n      } catch(e) {\n        err(`growMemory: Attempted to grow heap from ${b.byteLength} bytes to ${size} bytes, but got error: ${e}`);\n      }\n      // implicit 0 return to save code size (caller will cast \"undefined\" into 0\n      // anyhow)\n    };\n  var _emscripten_resize_heap = (requestedSize) => {\n      var oldSize = HEAPU8.length;\n      // With CAN_ADDRESS_2GB or MEMORY64, pointers are already unsigned.\n      requestedSize >>>= 0;\n      // With multithreaded builds, races can happen (another thread might increase the size\n      // in between), so return a failure, and let the caller retry.\n      assert(requestedSize > oldSize);\n  \n      // Memory resize rules:\n      // 1.  Always increase heap size to at least the requested size, rounded up\n      //     to next page multiple.\n      // 2a. If MEMORY_GROWTH_LINEAR_STEP == -1, excessively resize the heap\n      //     geometrically: increase the heap size according to\n      //     MEMORY_GROWTH_GEOMETRIC_STEP factor (default +20%), At most\n      //     overreserve by MEMORY_GROWTH_GEOMETRIC_CAP bytes (default 96MB).\n      // 2b. If MEMORY_GROWTH_LINEAR_STEP != -1, excessively resize the heap\n      //     linearly: increase the heap size by at least\n      //     MEMORY_GROWTH_LINEAR_STEP bytes.\n      // 3.  Max size for the heap is capped at 2048MB-WASM_PAGE_SIZE, or by\n      //     MAXIMUM_MEMORY, or by ASAN limit, depending on which is smallest\n      // 4.  If we were unable to allocate as much memory, it may be due to\n      //     over-eager decision to excessively reserve due to (3) above.\n      //     Hence if an allocation fails, cut down on the amount of excess\n      //     growth, in an attempt to succeed to perform a smaller allocation.\n  \n      // A limit is set for how much we can grow. We should not exceed that\n      // (the wasm binary specifies it, so if we tried, we'd fail anyhow).\n      var maxHeapSize = getHeapMax();\n      if (requestedSize > maxHeapSize) {\n        err(`Cannot enlarge memory, requested ${requestedSize} bytes, but the limit is ${maxHeapSize} bytes!`);\n        return false;\n      }\n  \n      var alignUp = (x, multiple) => x + (multiple - x % multiple) % multiple;\n  \n      // Loop through potential heap size increases. If we attempt a too eager\n      // reservation that fails, cut down on the attempted size and reserve a\n      // smaller bump instead. (max 3 times, chosen somewhat arbitrarily)\n      for (var cutDown = 1; cutDown <= 4; cutDown *= 2) {\n        var overGrownHeapSize = oldSize * (1 + 0.2 / cutDown); // ensure geometric growth\n        // but limit overreserving (default to capping at +96MB overgrowth at most)\n        overGrownHeapSize = Math.min(overGrownHeapSize, requestedSize + 100663296 );\n  \n        var newSize = Math.min(maxHeapSize, alignUp(Math.max(requestedSize, overGrownHeapSize), 65536));\n  \n        var replacement = growMemory(newSize);\n        if (replacement) {\n  \n          return true;\n        }\n      }\n      err(`Failed to grow the heap from ${oldSize} bytes to ${newSize} bytes, not enough memory!`);\n      return false;\n    };\n\n  var SYSCALLS = {\n  varargs:undefined,\n  get() {\n        assert(SYSCALLS.varargs != undefined);\n        // the `+` prepended here is necessary to convince the JSCompiler that varargs is indeed a number.\n        var ret = HEAP32[((+SYSCALLS.varargs)>>2)];\n        SYSCALLS.varargs += 4;\n        return ret;\n      },\n  getp() { return SYSCALLS.get() },\n  getStr(ptr) {\n        var ret = UTF8ToString(ptr);\n        return ret;\n      },\n  };\n  var _fd_close = (fd) => {\n      abort('fd_close called without SYSCALLS_REQUIRE_FILESYSTEM');\n    };\n\n  \n  var convertI32PairToI53Checked = (lo, hi) => {\n      assert(lo == (lo >>> 0) || lo == (lo|0)); // lo should either be a i32 or a u32\n      assert(hi === (hi|0));                    // hi should be a i32\n      return ((hi + 0x200000) >>> 0 < 0x400001 - !!lo) ? (lo >>> 0) + hi * 4294967296 : NaN;\n    };\n  function _fd_seek(fd,offset_low, offset_high,whence,newOffset) {\n    var offset = convertI32PairToI53Checked(offset_low, offset_high);;\n  \n    \n      return 70;\n    ;\n  }\n\n  var printCharBuffers = [null,[],[]];\n  \n  var printChar = (stream, curr) => {\n      var buffer = printCharBuffers[stream];\n      assert(buffer);\n      if (curr === 0 || curr === 10) {\n        (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n        buffer.length = 0;\n      } else {\n        buffer.push(curr);\n      }\n    };\n  \n  var flush_NO_FILESYSTEM = () => {\n      // flush anything remaining in the buffers during shutdown\n      _fflush(0);\n      if (printCharBuffers[1].length) printChar(1, 10);\n      if (printCharBuffers[2].length) printChar(2, 10);\n    };\n  \n  \n  var _fd_write = (fd, iov, iovcnt, pnum) => {\n      // hack to support printf in SYSCALLS_REQUIRE_FILESYSTEM=0\n      var num = 0;\n      for (var i = 0; i < iovcnt; i++) {\n        var ptr = HEAPU32[((iov)>>2)];\n        var len = HEAPU32[(((iov)+(4))>>2)];\n        iov += 8;\n        for (var j = 0; j < len; j++) {\n          printChar(fd, HEAPU8[ptr+j]);\n        }\n        num += len;\n      }\n      HEAPU32[((pnum)>>2)] = num;\n      return 0;\n    };\n\nembind_init_charCodes();\nBindingError = Module['BindingError'] = class BindingError extends Error { constructor(message) { super(message); this.name = 'BindingError'; }};\nInternalError = Module['InternalError'] = class InternalError extends Error { constructor(message) { super(message); this.name = 'InternalError'; }};\nhandleAllocatorInit();\ninit_emval();;\nUnboundTypeError = Module['UnboundTypeError'] = extendError(Error, 'UnboundTypeError');;\nfunction checkIncomingModuleAPI() {\n  ignoredModuleProp('fetchSettings');\n}\nvar wasmImports = {\n  /** @export */\n  __assert_fail: ___assert_fail,\n  /** @export */\n  __cxa_begin_catch: ___cxa_begin_catch,\n  /** @export */\n  __cxa_find_matching_catch_2: ___cxa_find_matching_catch_2,\n  /** @export */\n  __cxa_find_matching_catch_3: ___cxa_find_matching_catch_3,\n  /** @export */\n  __cxa_throw: ___cxa_throw,\n  /** @export */\n  __resumeException: ___resumeException,\n  /** @export */\n  _embind_register_bigint: __embind_register_bigint,\n  /** @export */\n  _embind_register_bool: __embind_register_bool,\n  /** @export */\n  _embind_register_emval: __embind_register_emval,\n  /** @export */\n  _embind_register_float: __embind_register_float,\n  /** @export */\n  _embind_register_function: __embind_register_function,\n  /** @export */\n  _embind_register_integer: __embind_register_integer,\n  /** @export */\n  _embind_register_memory_view: __embind_register_memory_view,\n  /** @export */\n  _embind_register_std_string: __embind_register_std_string,\n  /** @export */\n  _embind_register_std_wstring: __embind_register_std_wstring,\n  /** @export */\n  _embind_register_void: __embind_register_void,\n  /** @export */\n  _emscripten_get_now_is_monotonic: __emscripten_get_now_is_monotonic,\n  /** @export */\n  _emval_as: __emval_as,\n  /** @export */\n  _emval_call: __emval_call,\n  /** @export */\n  _emval_call_method: __emval_call_method,\n  /** @export */\n  _emval_decref: __emval_decref,\n  /** @export */\n  _emval_get_method_caller: __emval_get_method_caller,\n  /** @export */\n  _emval_get_module_property: __emval_get_module_property,\n  /** @export */\n  _emval_get_property: __emval_get_property,\n  /** @export */\n  _emval_incref: __emval_incref,\n  /** @export */\n  _emval_new_array: __emval_new_array,\n  /** @export */\n  _emval_new_cstring: __emval_new_cstring,\n  /** @export */\n  _emval_new_object: __emval_new_object,\n  /** @export */\n  _emval_run_destructors: __emval_run_destructors,\n  /** @export */\n  _emval_set_property: __emval_set_property,\n  /** @export */\n  _emval_take_value: __emval_take_value,\n  /** @export */\n  abort: _abort,\n  /** @export */\n  emscripten_date_now: _emscripten_date_now,\n  /** @export */\n  emscripten_get_now: _emscripten_get_now,\n  /** @export */\n  emscripten_memcpy_js: _emscripten_memcpy_js,\n  /** @export */\n  emscripten_resize_heap: _emscripten_resize_heap,\n  /** @export */\n  fd_close: _fd_close,\n  /** @export */\n  fd_seek: _fd_seek,\n  /** @export */\n  fd_write: _fd_write,\n  /** @export */\n  invoke_ii: invoke_ii,\n  /** @export */\n  invoke_iii: invoke_iii,\n  /** @export */\n  invoke_iiii: invoke_iiii,\n  /** @export */\n  invoke_j: invoke_j,\n  /** @export */\n  invoke_v: invoke_v,\n  /** @export */\n  invoke_vi: invoke_vi,\n  /** @export */\n  invoke_vii: invoke_vii,\n  /** @export */\n  invoke_viii: invoke_viii,\n  /** @export */\n  invoke_viiii: invoke_viiii\n};\nvar wasmExports = createWasm();\nvar ___wasm_call_ctors = createExportWrapper('__wasm_call_ctors');\nvar ___getTypeName = createExportWrapper('__getTypeName');\nvar ___errno_location = createExportWrapper('__errno_location');\nvar _fflush = Module['_fflush'] = createExportWrapper('fflush');\nvar _malloc = createExportWrapper('malloc');\nvar _free = Module['_free'] = createExportWrapper('free');\nvar _setThrew = createExportWrapper('setThrew');\nvar setTempRet0 = createExportWrapper('setTempRet0');\nvar _emscripten_stack_init = () => (_emscripten_stack_init = wasmExports['emscripten_stack_init'])();\nvar _emscripten_stack_get_free = () => (_emscripten_stack_get_free = wasmExports['emscripten_stack_get_free'])();\nvar _emscripten_stack_get_base = () => (_emscripten_stack_get_base = wasmExports['emscripten_stack_get_base'])();\nvar _emscripten_stack_get_end = () => (_emscripten_stack_get_end = wasmExports['emscripten_stack_get_end'])();\nvar stackSave = createExportWrapper('stackSave');\nvar stackRestore = createExportWrapper('stackRestore');\nvar stackAlloc = createExportWrapper('stackAlloc');\nvar _emscripten_stack_get_current = () => (_emscripten_stack_get_current = wasmExports['emscripten_stack_get_current'])();\nvar ___cxa_free_exception = createExportWrapper('__cxa_free_exception');\nvar ___cxa_increment_exception_refcount = createExportWrapper('__cxa_increment_exception_refcount');\nvar ___cxa_decrement_exception_refcount = createExportWrapper('__cxa_decrement_exception_refcount');\nvar ___get_exception_message = Module['___get_exception_message'] = createExportWrapper('__get_exception_message');\nvar ___cxa_can_catch = createExportWrapper('__cxa_can_catch');\nvar ___cxa_is_pointer_type = createExportWrapper('__cxa_is_pointer_type');\nvar dynCall_j = Module['dynCall_j'] = createExportWrapper('dynCall_j');\nvar dynCall_jiji = Module['dynCall_jiji'] = createExportWrapper('dynCall_jiji');\n\nfunction invoke_iiii(index,a1,a2,a3) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1,a2,a3);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_iii(index,a1,a2) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1,a2);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_ii(index,a1) {\n  var sp = stackSave();\n  try {\n    return getWasmTableEntry(index)(a1);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_v(index) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)();\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_vi(index,a1) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_viii(index,a1,a2,a3) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2,a3);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_viiii(index,a1,a2,a3,a4) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2,a3,a4);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_vii(index,a1,a2) {\n  var sp = stackSave();\n  try {\n    getWasmTableEntry(index)(a1,a2);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\nfunction invoke_j(index) {\n  var sp = stackSave();\n  try {\n    return dynCall_j(index);\n  } catch(e) {\n    stackRestore(sp);\n    if (!(e instanceof EmscriptenEH)) throw e;\n    _setThrew(1, 0);\n  }\n}\n\n\n// include: postamble.js\n// === Auto-generated postamble setup entry stuff ===\n\nvar missingLibrarySymbols = [\n  'writeI53ToI64',\n  'writeI53ToI64Clamped',\n  'writeI53ToI64Signaling',\n  'writeI53ToU64Clamped',\n  'writeI53ToU64Signaling',\n  'readI53FromI64',\n  'readI53FromU64',\n  'convertI32PairToI53',\n  'convertU32PairToI53',\n  'zeroMemory',\n  'exitJS',\n  'isLeapYear',\n  'ydayFromDate',\n  'arraySum',\n  'addDays',\n  'setErrNo',\n  'inetPton4',\n  'inetNtop4',\n  'inetPton6',\n  'inetNtop6',\n  'readSockaddr',\n  'writeSockaddr',\n  'getHostByName',\n  'initRandomFill',\n  'randomFill',\n  'getCallstack',\n  'emscriptenLog',\n  'convertPCtoSourceLocation',\n  'readEmAsmArgs',\n  'jstoi_q',\n  'jstoi_s',\n  'getExecutableName',\n  'listenOnce',\n  'autoResumeAudioContext',\n  'handleException',\n  'keepRuntimeAlive',\n  'runtimeKeepalivePush',\n  'runtimeKeepalivePop',\n  'callUserCallback',\n  'maybeExit',\n  'asmjsMangle',\n  'asyncLoad',\n  'alignMemory',\n  'mmapAlloc',\n  'getNativeTypeSize',\n  'STACK_SIZE',\n  'STACK_ALIGN',\n  'POINTER_SIZE',\n  'ASSERTIONS',\n  'getCFunc',\n  'ccall',\n  'cwrap',\n  'uleb128Encode',\n  'sigToWasmTypes',\n  'generateFuncType',\n  'convertJsFunctionToWasm',\n  'getEmptyTableSlot',\n  'updateTableMap',\n  'getFunctionAddress',\n  'addFunction',\n  'removeFunction',\n  'reallyNegative',\n  'unSign',\n  'strLen',\n  'reSign',\n  'formatString',\n  'intArrayFromString',\n  'intArrayToString',\n  'AsciiToString',\n  'stringToAscii',\n  'stringToNewUTF8',\n  'stringToUTF8OnStack',\n  'writeArrayToMemory',\n  'registerKeyEventCallback',\n  'maybeCStringToJsString',\n  'findEventTarget',\n  'findCanvasEventTarget',\n  'getBoundingClientRect',\n  'fillMouseEventData',\n  'registerMouseEventCallback',\n  'registerWheelEventCallback',\n  'registerUiEventCallback',\n  'registerFocusEventCallback',\n  'fillDeviceOrientationEventData',\n  'registerDeviceOrientationEventCallback',\n  'fillDeviceMotionEventData',\n  'registerDeviceMotionEventCallback',\n  'screenOrientation',\n  'fillOrientationChangeEventData',\n  'registerOrientationChangeEventCallback',\n  'fillFullscreenChangeEventData',\n  'registerFullscreenChangeEventCallback',\n  'JSEvents_requestFullscreen',\n  'JSEvents_resizeCanvasForFullscreen',\n  'registerRestoreOldStyle',\n  'hideEverythingExceptGivenElement',\n  'restoreHiddenElements',\n  'setLetterbox',\n  'softFullscreenResizeWebGLRenderTarget',\n  'doRequestFullscreen',\n  'fillPointerlockChangeEventData',\n  'registerPointerlockChangeEventCallback',\n  'registerPointerlockErrorEventCallback',\n  'requestPointerLock',\n  'fillVisibilityChangeEventData',\n  'registerVisibilityChangeEventCallback',\n  'registerTouchEventCallback',\n  'fillGamepadEventData',\n  'registerGamepadEventCallback',\n  'registerBeforeUnloadEventCallback',\n  'fillBatteryEventData',\n  'battery',\n  'registerBatteryEventCallback',\n  'setCanvasElementSize',\n  'getCanvasElementSize',\n  'demangle',\n  'demangleAll',\n  'jsStackTrace',\n  'stackTrace',\n  'getEnvStrings',\n  'checkWasiClock',\n  'wasiRightsToMuslOFlags',\n  'wasiOFlagsToMuslOFlags',\n  'createDyncallWrapper',\n  'safeSetTimeout',\n  'setImmediateWrapped',\n  'clearImmediateWrapped',\n  'polyfillSetImmediate',\n  'getPromise',\n  'makePromise',\n  'idsToPromises',\n  'makePromiseCallback',\n  'setMainLoop',\n  'getSocketFromFD',\n  'getSocketAddress',\n  'FS_createPreloadedFile',\n  'FS_modeStringToFlags',\n  'FS_getMode',\n  'FS_stdin_getChar',\n  'FS_createDataFile',\n  'FS_unlink',\n  'FS_mkdirTree',\n  '_setNetworkCallback',\n  'heapObjectForWebGLType',\n  'heapAccessShiftForWebGLHeap',\n  'webgl_enable_ANGLE_instanced_arrays',\n  'webgl_enable_OES_vertex_array_object',\n  'webgl_enable_WEBGL_draw_buffers',\n  'webgl_enable_WEBGL_multi_draw',\n  'emscriptenWebGLGet',\n  'computeUnpackAlignedImageSize',\n  'colorChannelsInGlTextureFormat',\n  'emscriptenWebGLGetTexPixelData',\n  '__glGenObject',\n  'emscriptenWebGLGetUniform',\n  'webglGetUniformLocation',\n  'webglPrepareUniformLocationsBeforeFirstUse',\n  'webglGetLeftBracePos',\n  'emscriptenWebGLGetVertexAttrib',\n  '__glGetActiveAttribOrUniform',\n  'writeGLArray',\n  'registerWebGlEventCallback',\n  'runAndAbortIfError',\n  'SDL_unicode',\n  'SDL_ttfContext',\n  'SDL_audio',\n  'ALLOC_NORMAL',\n  'ALLOC_STACK',\n  'allocate',\n  'writeStringToMemory',\n  'writeAsciiToMemory',\n  'getFunctionArgsName',\n  'init_embind',\n  'getBasestPointer',\n  'registerInheritedInstance',\n  'unregisterInheritedInstance',\n  'getInheritedInstance',\n  'getInheritedInstanceCount',\n  'getLiveInheritedInstances',\n  'enumReadValueFromPointer',\n  'genericPointerToWireType',\n  'constNoSmartPtrRawPointerToWireType',\n  'nonConstNoSmartPtrRawPointerToWireType',\n  'init_RegisteredPointer',\n  'RegisteredPointer',\n  'RegisteredPointer_fromWireType',\n  'runDestructor',\n  'releaseClassHandle',\n  'detachFinalizer',\n  'attachFinalizer',\n  'makeClassHandle',\n  'init_ClassHandle',\n  'ClassHandle',\n  'throwInstanceAlreadyDeleted',\n  'flushPendingDeletes',\n  'setDelayFunction',\n  'RegisteredClass',\n  'shallowCopyInternalPointer',\n  'downcastPointer',\n  'upcastPointer',\n  'validateThis',\n  'char_0',\n  'char_9',\n  'makeLegalFunctionName',\n  'emval_get_global',\n];\nmissingLibrarySymbols.forEach(missingLibrarySymbol)\n\nvar unexportedSymbols = [\n  'run',\n  'addOnPreRun',\n  'addOnInit',\n  'addOnPreMain',\n  'addOnExit',\n  'addOnPostRun',\n  'addRunDependency',\n  'removeRunDependency',\n  'FS_createFolder',\n  'FS_createPath',\n  'FS_createLazyFile',\n  'FS_createLink',\n  'FS_createDevice',\n  'FS_readFile',\n  'out',\n  'err',\n  'callMain',\n  'abort',\n  'wasmMemory',\n  'wasmExports',\n  'stackAlloc',\n  'stackSave',\n  'stackRestore',\n  'getTempRet0',\n  'setTempRet0',\n  'writeStackCookie',\n  'checkStackCookie',\n  'convertI32PairToI53Checked',\n  'ptrToString',\n  'getHeapMax',\n  'growMemory',\n  'ENV',\n  'MONTH_DAYS_REGULAR',\n  'MONTH_DAYS_LEAP',\n  'MONTH_DAYS_REGULAR_CUMULATIVE',\n  'MONTH_DAYS_LEAP_CUMULATIVE',\n  'ERRNO_CODES',\n  'ERRNO_MESSAGES',\n  'DNS',\n  'Protocols',\n  'Sockets',\n  'timers',\n  'warnOnce',\n  'UNWIND_CACHE',\n  'readEmAsmArgsArray',\n  'dynCallLegacy',\n  'getDynCaller',\n  'dynCall',\n  'handleAllocatorInit',\n  'HandleAllocator',\n  'wasmTable',\n  'noExitRuntime',\n  'freeTableIndexes',\n  'functionsInTableMap',\n  'setValue',\n  'getValue',\n  'PATH',\n  'PATH_FS',\n  'UTF8Decoder',\n  'UTF8ArrayToString',\n  'UTF8ToString',\n  'stringToUTF8Array',\n  'stringToUTF8',\n  'lengthBytesUTF8',\n  'UTF16Decoder',\n  'UTF16ToString',\n  'stringToUTF16',\n  'lengthBytesUTF16',\n  'UTF32ToString',\n  'stringToUTF32',\n  'lengthBytesUTF32',\n  'JSEvents',\n  'specialHTMLTargets',\n  'currentFullscreenStrategy',\n  'restoreOldWindowedStyle',\n  'ExitStatus',\n  'flush_NO_FILESYSTEM',\n  'promiseMap',\n  'uncaughtExceptionCount',\n  'exceptionLast',\n  'exceptionCaught',\n  'ExceptionInfo',\n  'findMatchingCatch',\n  'getExceptionMessageCommon',\n  'incrementExceptionRefcount',\n  'decrementExceptionRefcount',\n  'getExceptionMessage',\n  'Browser',\n  'wget',\n  'SYSCALLS',\n  'preloadPlugins',\n  'FS_stdin_getChar_buffer',\n  'FS',\n  'MEMFS',\n  'TTY',\n  'PIPEFS',\n  'SOCKFS',\n  'tempFixedLengthArray',\n  'miniTempWebGLFloatBuffers',\n  'miniTempWebGLIntBuffers',\n  'GL',\n  'emscripten_webgl_power_preferences',\n  'AL',\n  'GLUT',\n  'EGL',\n  'GLEW',\n  'IDBStore',\n  'SDL',\n  'SDL_gfx',\n  'allocateUTF8',\n  'allocateUTF8OnStack',\n  'InternalError',\n  'BindingError',\n  'throwInternalError',\n  'throwBindingError',\n  'registeredTypes',\n  'awaitingDependencies',\n  'typeDependencies',\n  'tupleRegistrations',\n  'structRegistrations',\n  'sharedRegisterType',\n  'whenDependentTypesAreResolved',\n  'embind_charCodes',\n  'embind_init_charCodes',\n  'readLatin1String',\n  'getTypeName',\n  'getFunctionName',\n  'heap32VectorToArray',\n  'requireRegisteredType',\n  'UnboundTypeError',\n  'PureVirtualError',\n  'GenericWireTypeSize',\n  'throwUnboundTypeError',\n  'ensureOverloadTable',\n  'exposePublicSymbol',\n  'replacePublicSymbol',\n  'extendError',\n  'createNamedFunction',\n  'embindRepr',\n  'registeredInstances',\n  'registeredPointers',\n  'registerType',\n  'integerReadValueFromPointer',\n  'floatReadValueFromPointer',\n  'simpleReadValueFromPointer',\n  'readPointer',\n  'runDestructors',\n  'newFunc',\n  'craftInvokerFunction',\n  'embind__requireFunction',\n  'finalizationRegistry',\n  'detachFinalizer_deps',\n  'deletionQueue',\n  'delayFunction',\n  'emval_handles',\n  'emval_symbols',\n  'init_emval',\n  'count_emval_handles',\n  'getStringOrSymbol',\n  'Emval',\n  'emval_returnValue',\n  'emval_lookupTypes',\n  'emval_methodCallers',\n  'emval_addMethodCaller',\n  'reflectConstruct',\n];\nunexportedSymbols.forEach(unexportedRuntimeSymbol);\n\n\n\nvar calledRun;\n\ndependenciesFulfilled = function runCaller() {\n  // If run has never been called, and we should call run (INVOKE_RUN is true, and Module.noInitialRun is not false)\n  if (!calledRun) run();\n  if (!calledRun) dependenciesFulfilled = runCaller; // try this again later, after new deps are fulfilled\n};\n\nfunction stackCheckInit() {\n  // This is normally called automatically during __wasm_call_ctors but need to\n  // get these values before even running any of the ctors so we call it redundantly\n  // here.\n  _emscripten_stack_init();\n  // TODO(sbc): Move writeStackCookie to native to to avoid this.\n  writeStackCookie();\n}\n\nfunction run() {\n\n  if (runDependencies > 0) {\n    return;\n  }\n\n    stackCheckInit();\n\n  preRun();\n\n  // a preRun added a dependency, run will be called later\n  if (runDependencies > 0) {\n    return;\n  }\n\n  function doRun() {\n    // run may have just been called through dependencies being fulfilled just in this very frame,\n    // or while the async setStatus time below was happening\n    if (calledRun) return;\n    calledRun = true;\n    Module['calledRun'] = true;\n\n    if (ABORT) return;\n\n    initRuntime();\n\n    readyPromiseResolve(Module);\n    if (Module['onRuntimeInitialized']) Module['onRuntimeInitialized']();\n\n    assert(!Module['_main'], 'compiled without a main, but one is present. if you added it from JS, use Module[\"onRuntimeInitialized\"]');\n\n    postRun();\n  }\n\n  if (Module['setStatus']) {\n    Module['setStatus']('Running...');\n    setTimeout(function() {\n      setTimeout(function() {\n        Module['setStatus']('');\n      }, 1);\n      doRun();\n    }, 1);\n  } else\n  {\n    doRun();\n  }\n  checkStackCookie();\n}\n\nfunction checkUnflushedContent() {\n  // Compiler settings do not allow exiting the runtime, so flushing\n  // the streams is not possible. but in ASSERTIONS mode we check\n  // if there was something to flush, and if so tell the user they\n  // should request that the runtime be exitable.\n  // Normally we would not even include flush() at all, but in ASSERTIONS\n  // builds we do so just for this check, and here we see if there is any\n  // content to flush, that is, we check if there would have been\n  // something a non-ASSERTIONS build would have not seen.\n  // How we flush the streams depends on whether we are in SYSCALLS_REQUIRE_FILESYSTEM=0\n  // mode (which has its own special function for this; otherwise, all\n  // the code is inside libc)\n  var oldOut = out;\n  var oldErr = err;\n  var has = false;\n  out = err = (x) => {\n    has = true;\n  }\n  try { // it doesn't matter if it fails\n    flush_NO_FILESYSTEM();\n  } catch(e) {}\n  out = oldOut;\n  err = oldErr;\n  if (has) {\n    warnOnce('stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the Emscripten FAQ), or make sure to emit a newline when you printf etc.');\n    warnOnce('(this may also be due to not including full filesystem support - try building with -sFORCE_FILESYSTEM)');\n  }\n}\n\nif (Module['preInit']) {\n  if (typeof Module['preInit'] == 'function') Module['preInit'] = [Module['preInit']];\n  while (Module['preInit'].length > 0) {\n    Module['preInit'].pop()();\n  }\n}\n\nrun();\n\n\n// end include: postamble.js\n\n\n  return moduleArg.ready\n}\n);\n})();\n;\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = Module;\nelse if (typeof define === 'function' && define['amd'])\n  define([], () => Module);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".autumnplot-gl.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","/**\r\n * Copyright 2019 Google Inc. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst proxyMarker = Symbol(\"Comlink.proxy\");\r\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\r\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\r\nconst throwMarker = Symbol(\"Comlink.thrown\");\r\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\r\n/**\r\n * Internal transfer handle to handle objects marked to proxy.\r\n */\r\nconst proxyTransferHandler = {\r\n    canHandle: (val) => isObject(val) && val[proxyMarker],\r\n    serialize(obj) {\r\n        const { port1, port2 } = new MessageChannel();\r\n        expose(obj, port1);\r\n        return [port2, [port2]];\r\n    },\r\n    deserialize(port) {\r\n        port.start();\r\n        return wrap(port);\r\n    },\r\n};\r\n/**\r\n * Internal transfer handler to handle thrown exceptions.\r\n */\r\nconst throwTransferHandler = {\r\n    canHandle: (value) => isObject(value) && throwMarker in value,\r\n    serialize({ value }) {\r\n        let serialized;\r\n        if (value instanceof Error) {\r\n            serialized = {\r\n                isError: true,\r\n                value: {\r\n                    message: value.message,\r\n                    name: value.name,\r\n                    stack: value.stack,\r\n                },\r\n            };\r\n        }\r\n        else {\r\n            serialized = { isError: false, value };\r\n        }\r\n        return [serialized, []];\r\n    },\r\n    deserialize(serialized) {\r\n        if (serialized.isError) {\r\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\r\n        }\r\n        throw serialized.value;\r\n    },\r\n};\r\n/**\r\n * Allows customizing the serialization of certain values.\r\n */\r\nconst transferHandlers = new Map([\r\n    [\"proxy\", proxyTransferHandler],\r\n    [\"throw\", throwTransferHandler],\r\n]);\r\nfunction expose(obj, ep = self) {\r\n    ep.addEventListener(\"message\", function callback(ev) {\r\n        if (!ev || !ev.data) {\r\n            return;\r\n        }\r\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\r\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\r\n        let returnValue;\r\n        try {\r\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\r\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\r\n            switch (type) {\r\n                case \"GET\" /* GET */:\r\n                    {\r\n                        returnValue = rawValue;\r\n                    }\r\n                    break;\r\n                case \"SET\" /* SET */:\r\n                    {\r\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\r\n                        returnValue = true;\r\n                    }\r\n                    break;\r\n                case \"APPLY\" /* APPLY */:\r\n                    {\r\n                        returnValue = rawValue.apply(parent, argumentList);\r\n                    }\r\n                    break;\r\n                case \"CONSTRUCT\" /* CONSTRUCT */:\r\n                    {\r\n                        const value = new rawValue(...argumentList);\r\n                        returnValue = proxy(value);\r\n                    }\r\n                    break;\r\n                case \"ENDPOINT\" /* ENDPOINT */:\r\n                    {\r\n                        const { port1, port2 } = new MessageChannel();\r\n                        expose(obj, port2);\r\n                        returnValue = transfer(port1, [port1]);\r\n                    }\r\n                    break;\r\n                case \"RELEASE\" /* RELEASE */:\r\n                    {\r\n                        returnValue = undefined;\r\n                    }\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        catch (value) {\r\n            returnValue = { value, [throwMarker]: 0 };\r\n        }\r\n        Promise.resolve(returnValue)\r\n            .catch((value) => {\r\n            return { value, [throwMarker]: 0 };\r\n        })\r\n            .then((returnValue) => {\r\n            const [wireValue, transferables] = toWireValue(returnValue);\r\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\r\n            if (type === \"RELEASE\" /* RELEASE */) {\r\n                // detach and deactive after sending release response above.\r\n                ep.removeEventListener(\"message\", callback);\r\n                closeEndPoint(ep);\r\n            }\r\n        });\r\n    });\r\n    if (ep.start) {\r\n        ep.start();\r\n    }\r\n}\r\nfunction isMessagePort(endpoint) {\r\n    return endpoint.constructor.name === \"MessagePort\";\r\n}\r\nfunction closeEndPoint(endpoint) {\r\n    if (isMessagePort(endpoint))\r\n        endpoint.close();\r\n}\r\nfunction wrap(ep, target) {\r\n    return createProxy(ep, [], target);\r\n}\r\nfunction throwIfProxyReleased(isReleased) {\r\n    if (isReleased) {\r\n        throw new Error(\"Proxy has been released and is not useable\");\r\n    }\r\n}\r\nfunction createProxy(ep, path = [], target = function () { }) {\r\n    let isProxyReleased = false;\r\n    const proxy = new Proxy(target, {\r\n        get(_target, prop) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            if (prop === releaseProxy) {\r\n                return () => {\r\n                    return requestResponseMessage(ep, {\r\n                        type: \"RELEASE\" /* RELEASE */,\r\n                        path: path.map((p) => p.toString()),\r\n                    }).then(() => {\r\n                        closeEndPoint(ep);\r\n                        isProxyReleased = true;\r\n                    });\r\n                };\r\n            }\r\n            if (prop === \"then\") {\r\n                if (path.length === 0) {\r\n                    return { then: () => proxy };\r\n                }\r\n                const r = requestResponseMessage(ep, {\r\n                    type: \"GET\" /* GET */,\r\n                    path: path.map((p) => p.toString()),\r\n                }).then(fromWireValue);\r\n                return r.then.bind(r);\r\n            }\r\n            return createProxy(ep, [...path, prop]);\r\n        },\r\n        set(_target, prop, rawValue) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\r\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\r\n            const [value, transferables] = toWireValue(rawValue);\r\n            return requestResponseMessage(ep, {\r\n                type: \"SET\" /* SET */,\r\n                path: [...path, prop].map((p) => p.toString()),\r\n                value,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        apply(_target, _thisArg, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const last = path[path.length - 1];\r\n            if (last === createEndpoint) {\r\n                return requestResponseMessage(ep, {\r\n                    type: \"ENDPOINT\" /* ENDPOINT */,\r\n                }).then(fromWireValue);\r\n            }\r\n            // We just pretend that `bind()` didn’t happen.\r\n            if (last === \"bind\") {\r\n                return createProxy(ep, path.slice(0, -1));\r\n            }\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"APPLY\" /* APPLY */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        construct(_target, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"CONSTRUCT\" /* CONSTRUCT */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n    });\r\n    return proxy;\r\n}\r\nfunction myFlat(arr) {\r\n    return Array.prototype.concat.apply([], arr);\r\n}\r\nfunction processArguments(argumentList) {\r\n    const processed = argumentList.map(toWireValue);\r\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\r\n}\r\nconst transferCache = new WeakMap();\r\nfunction transfer(obj, transfers) {\r\n    transferCache.set(obj, transfers);\r\n    return obj;\r\n}\r\nfunction proxy(obj) {\r\n    return Object.assign(obj, { [proxyMarker]: true });\r\n}\r\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\r\n    return {\r\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\r\n        addEventListener: context.addEventListener.bind(context),\r\n        removeEventListener: context.removeEventListener.bind(context),\r\n    };\r\n}\r\nfunction toWireValue(value) {\r\n    for (const [name, handler] of transferHandlers) {\r\n        if (handler.canHandle(value)) {\r\n            const [serializedValue, transferables] = handler.serialize(value);\r\n            return [\r\n                {\r\n                    type: \"HANDLER\" /* HANDLER */,\r\n                    name,\r\n                    value: serializedValue,\r\n                },\r\n                transferables,\r\n            ];\r\n        }\r\n    }\r\n    return [\r\n        {\r\n            type: \"RAW\" /* RAW */,\r\n            value,\r\n        },\r\n        transferCache.get(value) || [],\r\n    ];\r\n}\r\nfunction fromWireValue(value) {\r\n    switch (value.type) {\r\n        case \"HANDLER\" /* HANDLER */:\r\n            return transferHandlers.get(value.name).deserialize(value.value);\r\n        case \"RAW\" /* RAW */:\r\n            return value.value;\r\n    }\r\n}\r\nfunction requestResponseMessage(ep, msg, transfers) {\r\n    return new Promise((resolve) => {\r\n        const id = generateUUID();\r\n        ep.addEventListener(\"message\", function l(ev) {\r\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\r\n                return;\r\n            }\r\n            ep.removeEventListener(\"message\", l);\r\n            resolve(ev.data);\r\n        });\r\n        if (ep.start) {\r\n            ep.start();\r\n        }\r\n        ep.postMessage(Object.assign({ id }, msg), transfers);\r\n    });\r\n}\r\nfunction generateUUID() {\r\n    return new Array(4)\r\n        .fill(0)\r\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\r\n        .join(\"-\");\r\n}\n\nexport { createEndpoint, expose, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","\nfunction getMinZoom(jlat: number, ilon: number, thin_fac_base: number) {\n    const zoom_base = 1;\n\n    let zoom = zoom_base;\n    let thin_fac = thin_fac_base;\n\n    while (((jlat % thin_fac) != 0) || ((ilon % thin_fac) != 0)) {\n        zoom += 1;\n        thin_fac /= 2;\n    }\n\n    return zoom;\n}\n\nfunction* zip(...args: any[]) {\n\tconst iterators = args.map(x => x[Symbol.iterator]());\n\twhile (true) {\n\t\tconst current = iterators.map(x => x.next());\n\t\tif (current.some(x => x.done)) {\n\t\t\tbreak;\n\t\t}\n\t\tyield current.map(x => x.value);\n\t}\n}\n\nfunction getOS() {\n    const userAgent = window.navigator.userAgent,\n        platform = window.navigator.platform,\n        macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],\n        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],\n        iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n    let os = null;\n\n    if (macosPlatforms.indexOf(platform) !== -1 && navigator.maxTouchPoints <= 1) {\n        os = 'Mac OS';\n    } \n    else if (iosPlatforms.indexOf(platform) !== -1 || (macosPlatforms.indexOf(platform) !== -1 && navigator.maxTouchPoints > 1)) { \n        os = 'iOS';\n    } \n    else if (windowsPlatforms.indexOf(platform) !== -1) {\n        os = 'Windows';\n    } \n    else if (/Android/.test(userAgent)) {\n        os = 'Android';\n    } \n    else if (/Linux/.test(platform)) {\n        os = 'Linux';\n    }\n\n    return os;\n}\n\nclass Cache<A extends unknown[], R> {\n    private cached_values: Record<string, R>;\n    private readonly compute_value: (...args: A) => R;\n    private readonly make_key: (...args: A) => string;\n\n    constructor(compute_value: (...args: A) => R, make_key?: (...args: A) => string) {\n        this.cached_values = {};\n        this.compute_value = compute_value;\n        this.make_key = make_key === undefined ? (...args: A) => JSON.stringify(args) : make_key;\n    }\n\n    public getValue(...args: A) {\n        const key = this.make_key(...args);\n\n        if (!(key in this.cached_values)) {\n            this.cached_values[key] = this.compute_value(...args);\n        }\n\n        return this.cached_values[key];\n    }\n}\n\n\nfunction normalizeOptions<Type extends Record<string, any>>(opts: Type | undefined, defaults: Required<Type>) {\n    const ret = {...defaults} as Required<Type>;\n\n    if (opts !== undefined) {\n        Object.entries(opts).forEach(([k, v]: [keyof Type, any]) => {\n            ret[k] = v;\n        });\n    }\n\n    return ret;\n}\n\nexport {zip, getMinZoom, getOS, Cache, normalizeOptions};\n","\nimport { Float16Array } from \"@petamoriken/float16\";\n\ninterface WindProfile {\n    lat: number;\n    lon: number;\n    jlat: number;\n    ilon: number;\n    smu: number;\n    smv: number;\n    u: Float32Array;\n    v: Float32Array;\n    z: Float32Array\n}\n\ninterface BillboardSpec {\n    BB_WIDTH: number;\n    BB_HEIGHT: number;\n    BB_TEX_WIDTH: number;\n    BB_TEX_HEIGHT: number;\n    BB_MAG_BIN_SIZE: number;\n    BB_MAG_WRAP: number;\n    BB_MAG_MAX: number;\n}\n\ntype LineData = {\n    vertices: [number, number][];\n    offsets?: [number, number][];\n    data?: number[];\n    zoom?: number;\n}\n\ntype Polyline = {\n    extrusion: Float32Array;\n    vertices: Float32Array;\n    offsets?: Float32Array;\n    data?: Float32Array;\n    zoom?: Float32Array;\n};\n\ntype WebGLAnyRenderingContext = WebGLRenderingContext | WebGL2RenderingContext;\n\nfunction isWebGL2Ctx(gl: WebGLAnyRenderingContext) : gl is WebGL2RenderingContext {\n    return gl.getParameter(gl.VERSION).includes('WebGL 2.0');\n}\n\ntype TypedArray = Float16Array | Float32Array;\n\ntype ContourData = Record<number, [number, number][][]>;\n\nexport {isWebGL2Ctx};\nexport type {WindProfile, BillboardSpec, Polyline, LineData, WebGLAnyRenderingContext, TypedArray, ContourData};","\nimport * as Comlink from 'comlink';\n\nimport { getOS } from \"./utils\";\nimport { PlotLayerWorker } from './PlotLayer.worker';\nimport { MapLikeType } from './Map';\nimport { WebGLAnyRenderingContext, isWebGL2Ctx } from './AutumnTypes';\n\nconst worker = new Worker(new URL('./PlotLayer.worker', import.meta.url));\nconst layer_worker = Comlink.wrap<PlotLayerWorker>(worker);\n\nabstract class PlotComponent<MapType extends MapLikeType> {\n    public abstract onAdd(map: MapType, gl: WebGLAnyRenderingContext) : Promise<void>;\n    public abstract render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) : void;\n}\n\nfunction getGLFormatTypeAlignment(gl: WebGLAnyRenderingContext, is_float16: boolean) {\n    let format, type, row_alignment;\n    const is_webgl2 = isWebGL2Ctx(gl);\n\n    if (is_float16) {\n        const ext = gl.getExtension('OES_texture_half_float');\n        const ext_lin = gl.getExtension('OES_texture_half_float_linear');\n\n        if (is_webgl2) {\n            format = gl.R16F;\n            type = gl.HALF_FLOAT;\n        }\n        else {\n            if (ext === null || ext_lin === null)\n                throw \"Float16 data are not supported on this hardware. Try Float32 data instead.\";\n\n            format = gl.LUMINANCE;\n            type = ext.HALF_FLOAT_OES;\n        }\n\n        row_alignment = 2;\n    }\n    else {\n        const ext = gl.getExtension('OES_texture_float');\n        const ext_lin = gl.getExtension('OES_texture_float_linear');\n\n\t\t// As of 11/3/2023, Safari/WebKit on iOS reports as supporting float textures,\n\t\t// but really doesn't. It just silently fails. In WebGL 1, Safari/Webkit returns\n\t\t// null for ext_lin here, but in WebGL2, both ext vars are null because they were \n\t\t// merged into the standard. This means that to properly fail for iOS devices using\n\t\t// WebGL2, we have to hard code an OS check... this OS check also works when uers\n\t\t// request desktop-mode websites.\n\t\tif ((!is_webgl2 && ext === null) || (!is_webgl2 && ext_lin === null) || (getOS() === 'iOS')) {\t\n            throw \"Float32 data are not supported on this hardware. Try Float16 data instead.\";\n        }\n\n        format = is_webgl2 ? gl.R32F : gl.LUMINANCE;\n        type = gl.FLOAT;\n        row_alignment = 4;\n    }\n\n    return {format: format, type: type, row_alignment: row_alignment};\n}\n\nexport { PlotComponent, layer_worker, getGLFormatTypeAlignment };\n","\n\n// Stub in required method and property types for the mapping library. God help me if these start to diverge between Mapbox and MapLibre.\ntype StyleSpecification = {\n    glyphs?: string;\n}\n\ntype MapLikeType = {\n    triggerRepaint: () => void;\n    getCanvas: () => HTMLCanvasElement;\n    getStyle: () => StyleSpecification;\n\n    getZoom: () => number;\n    getMaxZoom: () => number;\n    getBearing: () => number;\n    getPitch: () => number;\n};\n\ninterface LambertConformalConicParameters {\n    lon_0: number,\n    lat_0: number,\n    lat_std: [number, number] | number;\n}\n\nfunction lambertConformalConic(params: LambertConformalConicParameters) {\n    // Formulas from https://pubs.usgs.gov/pp/1395/report.pdf\n\n    const compute_t = (lat: number) => {\n        const sin_lat = Math.sin(lat);\n        return Math.tan(Math.PI / 4 - lat / 2) * Math.pow((1 + eccen * sin_lat) / (1 - eccen * sin_lat), eccen / 2);\n    };\n    const compute_m = (lat: number) => {\n        const sin_lat = Math.sin(lat);\n        return Math.cos(lat) / Math.sqrt(1 - eccen * eccen * sin_lat * sin_lat);\n    }\n\n    // WGS 84 spheroid\n    const semimajor = 6378137.0;\n    const semiminor = 6356752.314245;\n    const eccen = Math.sqrt(1 - (semiminor * semiminor) / (semimajor * semimajor));\n    const radians = Math.PI / 180;\n\n    let {lon_0, lat_0, lat_std} = params;\n    lat_std = Array.isArray(lat_std) && lat_std[0] == lat_std[1] ? lat_std[0] : lat_std;\n\n    lon_0 *= radians;\n    lat_0 *= radians;\n\n    let F: number, n: number;\n    const t_0 = compute_t(lat_0);\n\n    if (Array.isArray(lat_std)) {\n        let [lat_1, lat_2] = lat_std;\n        lat_1 *= radians;\n        lat_2 *= radians;\n\n        const t_1 = compute_t(lat_1);\n        const t_2 = compute_t(lat_2);\n        const m_1 = compute_m(lat_1);\n        const m_2 = compute_m(lat_2);\n\n        n = Math.log(m_1 / m_2) / Math.log(t_1 / t_2);\n        F = m_1 / (n * Math.pow(t_1, n));\n    }\n    else {\n        let lat_1 = lat_std;\n        lat_1 *= radians;\n\n        const t_1 = compute_t(lat_1);\n        const m_1 = compute_m(lat_1);\n        n = Math.sin(lat_1);\n        F = m_1 / (n * Math.pow(t_1, n));\n    }\n\n    const rho_0 = semimajor * F * Math.pow(t_0, n);\n\n    const compute_lcc = (lon: number, lat: number) : [number, number] => {\n        lon *= radians;\n        lat *= radians;\n\n        const t = compute_t(lat);\n        const rho = semimajor * F * Math.pow(t, n);\n        const theta = n * (lon - lon_0);\n        const x = rho * Math.sin(theta);\n        const y = rho_0 - rho * Math.cos(theta);\n\n        return [x, y];\n    }\n\n    const eccen2 = eccen * eccen;\n    const eccen4 = eccen2 * eccen2;\n    const eccen6 = eccen4 * eccen2;\n    const eccen8 = eccen6 * eccen2;\n\n/*\n    const A = eccen2 / 2 + 5 * eccen4 / 24 + eccen6 / 12 + 13 * eccen8 / 360;\n    const B = 7 * eccen4 / 48 + 29 * eccen6 / 240 + 811 * eccen8 / 11520;\n    const C = 7 * eccen6 / 120 + 81 * eccen8 / 1120;\n    const D = 4279 * eccen8 / 161280;\n    const Ap = A - C;\n    const Bp = 2 * B - 4 * D;\n    const Cp = 4 * C;\n    const Dp = 8 * D;\n*/\n\n    const Ap = eccen2 / 2 + 5 * eccen4 / 24 + 3 * eccen6 / 120 - 73 * eccen8 / 2016;\n    const Bp = 7 * eccen4 / 24 + 29 * eccen6 / 120 + 233 * eccen8 / 6720;\n    const Cp = 7 * eccen6 / 30 + 81 * eccen8 / 280;\n    const Dp = 4729 * eccen8 / 20160;\n\n    const compute_lcc_inverse = (x: number, y: number) : [number, number] => {\n        const theta = Math.atan2(x, rho_0 - y); // These arguments are backwards from what I'd expect ...\n        const lon = theta / n + lon_0;\n        const rho = Math.hypot(x, rho_0 - y) * Math.sign(n);\n        const t = Math.pow(rho / (semimajor * F), 1 / n);\n\n        const chi = Math.PI / 2 - 2 * Math.atan(t);\n        const sin_2chi = Math.sin(2 * chi);\n        const cos_2chi = Math.cos(2 * chi);\n\n        const lat = chi + sin_2chi * (Ap + cos_2chi * (Bp + cos_2chi * (Cp + Dp * cos_2chi)));\n\n        return [lon / radians, lat / radians];\n    }\n\n    return (a: number, b: number, opts?: {inverse: boolean}) : [number, number] => {\n        opts = opts === undefined ? {inverse: false} : opts;\n        return opts.inverse ? compute_lcc_inverse(a, b) : compute_lcc(a, b);\n    }\n}\n\ninterface RotateSphereParams {\n    np_lon: number,\n    np_lat: number,\n    lon_shift: number,\n}\n\nfunction rotateSphere(params: RotateSphereParams) {\n    const radians = Math.PI / 180;\n    const np_lat = params.np_lat * radians;\n    const np_lon = params.np_lon * radians;\n    const lon_shift = params.lon_shift * radians;\n\n    const sin_np_lat = Math.sin(np_lat);\n    const cos_np_lat = Math.cos(np_lat);\n\n    const compute_rotation = (lon: number, lat: number) : [number, number] => {\n        lon *= radians;\n        lat *= radians;\n\n        const sin_lat = Math.sin(lat);\n        const cos_lat = Math.cos(lat);\n        const sin_lon_diff = Math.sin(lon - lon_shift);\n        const cos_lon_diff = Math.cos(lon - lon_shift);\n\n        const lat_p = Math.asin(sin_np_lat * sin_lat - cos_np_lat * cos_lat * cos_lon_diff);\n        let lon_p = np_lon + Math.atan2((cos_lat * sin_lon_diff), (sin_np_lat * cos_lat * cos_lon_diff + cos_np_lat * sin_lat));\n\n        if (lon_p > Math.PI) lon_p -= 2 * Math.PI;\n\n        return [lon_p / radians, lat_p / radians];\n    }\n\n    const compute_rotation_inverse = (lon_p: number, lat_p: number) : [number, number] => {\n        lon_p *= radians;\n        lat_p *= radians;\n\n        const sin_lat_p = Math.sin(lat_p);\n        const cos_lat_p = Math.cos(lat_p);\n        const sin_lon_p_diff = Math.sin(lon_p - np_lon);\n        const cos_lon_p_diff = Math.cos(lon_p - np_lon);\n\n        const lat = Math.asin(sin_np_lat * sin_lat_p + cos_np_lat * cos_lat_p * cos_lon_p_diff);\n        let lon = lon_shift + Math.atan2((cos_lat_p * sin_lon_p_diff), (sin_np_lat * cos_lat_p * cos_lon_p_diff - cos_np_lat * sin_lat_p));\n\n        if (lon_p > Math.PI) lon_p -= 2 * Math.PI;\n\n        return [lon / radians, lat / radians];\n    }\n\n    return (a: number, b: number, opts?: {inverse: boolean}) => {\n        opts = opts === undefined ? {inverse: false} : opts;\n        return opts.inverse ? compute_rotation_inverse(a, b) : compute_rotation(a, b);\n    }\n}\n\nfunction mercatorXfromLng(lng: number) {\n    return (180 + lng) / 360;\n}\n\nfunction lngFromMercatorX(x: number) {\n    return 360 * x - 180;\n}\n\nfunction mercatorYfromLat(lat: number) {\n    const sin_lat = Math.sin(lat * Math.PI / 180);\n    const y = (180 - (90 / Math.PI * Math.log((1 + sin_lat) / (1 - sin_lat)))) / 360;\n    return Math.min(2, Math.max(-2, y));\n}\n\nfunction latFromMercatorY(y: number) {\n    return Math.atan(Math.sinh((180 - y * 360) * Math.PI / 180)) * 180 / Math.PI;\n}\n\n/**\n * A `LngLat` object represents a given longitude and latitude coordinate, measured in degrees.\n * These coordinates are based on the [WGS84 (EPSG:4326) standard](https://en.wikipedia.org/wiki/World_Geodetic_System#WGS84).\n *\n * MapLibre GL uses longitude, latitude coordinate order (as opposed to latitude, longitude) to match the\n * [GeoJSON specification](https://tools.ietf.org/html/rfc7946).\n *\n * @param {number} lng Longitude, measured in degrees.\n * @param {number} lat Latitude, measured in degrees.\n * @example\n * var ll = new LngLat(-123.9749, 40.7736);\n * ll.lng; // = -123.9749\n */\n class LngLat {\n    public lng: number;\n    public lat: number;\n\n    constructor(lng: number, lat: number) {\n        if (isNaN(lng) || isNaN(lat)) {\n            throw new Error(`Invalid LngLat object: (${lng}, ${lat})`);\n        }\n        this.lng = +lng;\n        this.lat = +lat;\n        if (this.lat > 90 || this.lat < -90) {\n            throw new Error('Invalid LngLat latitude value: must be between -90 and 90');\n        }\n    }\n\n    public toMercatorCoord() {\n        return {x: mercatorXfromLng(this.lng), y: mercatorYfromLat(this.lat)};\n    }\n\n    public static fromMercatorCoord(x: number, y: number) {\n        return new LngLat(lngFromMercatorX(x), latFromMercatorY(y));\n    }\n}\n\nexport {LngLat, lambertConformalConic, rotateSphere};\nexport type {MapLikeType};","/**\n * @module wgl/WebGLBuffer\n * Module containing a helper class for WebGL data buffers\n */\nconst getGLDtype = (gl, ary) => {\n    const DTYPES = {\n        'Float32Array': gl.FLOAT,\n        'Uint8Array': gl.UNSIGNED_BYTE,\n        'Uint16Array': gl.UNSIGNED_SHORT,\n        'Uint32Array': gl.UNSIGNED_INT,\n    };\n    return DTYPES[ary.constructor.name];\n};\nclass WGLBufferBase {\n    constructor(gl, verts, n_coords_per_vert, draw_mode, bind_target) {\n        this.gl = gl;\n        this.n_coords_per_vert = n_coords_per_vert;\n        this.dtype = getGLDtype(gl, verts);\n        this.n_verts = verts.length / n_coords_per_vert;\n        this.draw_mode = draw_mode;\n        const buffer = gl.createBuffer();\n        if (buffer === null) {\n            throw \"Could not create WebGL buffer\";\n        }\n        this.buffer = buffer;\n        gl.bindBuffer(bind_target, this.buffer);\n        gl.bufferData(bind_target, verts, gl.STATIC_DRAW);\n    }\n}\n/** A class representing a WebGL data buffer */\nclass WGLBuffer extends WGLBufferBase {\n    /**\n     * Create a WebGL buffer and put some data in it\n     * @param gl                 - The WebGL rendering context\n     * @param verts              - The vertex data to use for this buffer\n     * @param n_coords_per_vert  - The number of coordinates for each vertex in the data buffer\n     * @param draw_mode          - The draw mode to use for this buffer. Should be one of gl.TRIANGLE_STRIP, etc.\n     */\n    constructor(gl, verts, n_coords_per_vert, draw_mode) {\n        super(gl, verts, n_coords_per_vert, draw_mode, gl.ARRAY_BUFFER);\n    }\n    /**\n     * Bind this buffer to a location in a shader program\n     * @internal\n     * @param prog_attr_location - The location of the variable in the shader program (returned from gl.getAttribLocation())\n     */\n    bindToProgram(prog_attr_location) {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);\n        this.gl.enableVertexAttribArray(prog_attr_location);\n        this.gl.vertexAttribPointer(prog_attr_location, this.n_coords_per_vert, this.dtype, false, 0, 0);\n    }\n}\n/** A class representing a WebGL data buffer for array indices */\nclass WGLIndexBuffer extends WGLBufferBase {\n    /**\n     *\n     * @param gl         - The WebGL rendering context\n     * @param indices    - The index data\n     * @param draw_mode  - The draw mode to use for this buffer. Should be one of gl.TRIANGLE_STRIP, etc.\n     */\n    constructor(gl, indices, draw_mode) {\n        super(gl, indices, 1, draw_mode, gl.ELEMENT_ARRAY_BUFFER);\n    }\n    /**\n     * Bind this buffer to the ELEMENT_ARRAY_BUFFER target\n     * @internal\n     */\n    bind() {\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n    }\n}\nexport { WGLBuffer, WGLIndexBuffer };\n","function isWebGL2Ctx(gl) {\n    return gl.getParameter(gl.VERSION).includes('WebGL 2.0');\n}\nexport { isWebGL2Ctx };\n","/**\n * @module wgl/WebGLTexture\n * A module containing a helper class for WebGL textures\n */\nimport { isWebGL2Ctx } from \"./utils\";\nfunction getWebGL2Format(gl, internal_format, data_type) {\n    switch (data_type) {\n        case (gl.UNSIGNED_BYTE):\n            switch (internal_format) {\n                case (gl.RGBA8): return gl.RGBA;\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGBA4): return gl.RGBA;\n                case (gl.SRGB8_ALPHA8): return gl.RGBA;\n                case (gl.RGBA8UI): return gl.RGBA_INTEGER;\n                case (gl.RGB8): return gl.RGB;\n                case (gl.RGB565): return gl.RGB;\n                case (gl.SRGB8): return gl.RGB;\n                case (gl.RGB8UI): return gl.RGB_INTEGER;\n                case (gl.RG8): return gl.RG;\n                case (gl.RG8UI): return gl.RG_INTEGER;\n                case (gl.R8): return gl.RED;\n                case (gl.R8UI): return gl.RED_INTEGER;\n                case (gl.RGBA): return gl.RGBA;\n                case (gl.RGB): return gl.RGB;\n                case (gl.LUMINANCE_ALPHA): return gl.LUMINANCE_ALPHA;\n                case (gl.LUMINANCE): return gl.LUMINANCE;\n                case (gl.ALPHA): return gl.ALPHA;\n            }\n            break;\n        case (gl.BYTE):\n            switch (internal_format) {\n                case (gl.RGBA8_SNORM): return gl.RGBA;\n                case (gl.RGBA8I): return gl.RGBA_INTEGER;\n                case (gl.RGB8_SNORM): return gl.RGB;\n                case (gl.RGB8I): return gl.RGB_INTEGER;\n                case (gl.RG8_SNORM): return gl.RG;\n                case (gl.RG8I): return gl.RG_INTEGER;\n                case (gl.R8_SNORM): return gl.RED;\n                case (gl.R8I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_4_4_4_4):\n            switch (internal_format) {\n                case (gl.RGBA4): return gl.RGBA;\n                case (gl.RGBA): return gl.RGBA;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_5_5_5_1):\n            switch (internal_format) {\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGBA): return gl.RGBA;\n            }\n            break;\n        case (gl.UNSIGNED_INT_2_10_10_10_REV):\n            switch (internal_format) {\n                case (gl.RGB10_A2): return gl.RGBA;\n                case (gl.RGB5_A1): return gl.RGBA;\n                case (gl.RGB10_A2UI): return gl.RGBA_INTEGER;\n            }\n            break;\n        case (gl.HALF_FLOAT):\n            switch (internal_format) {\n                case (gl.RGBA16F): return gl.RGBA;\n                case (gl.RGB16F): return gl.RGB;\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n                case (gl.RGB9_E5): return gl.RGB;\n                case (gl.RG16F): return gl.RG;\n                case (gl.R16F): return gl.RED;\n            }\n            break;\n        case (gl.FLOAT):\n            switch (internal_format) {\n                case (gl.RGBA32F): return gl.RGBA;\n                case (gl.RGBA16F): return gl.RGBA;\n                case (gl.RGB32F): return gl.RGB;\n                case (gl.RGB16F): return gl.RGB;\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n                case (gl.RGB9_E5): return gl.RGB;\n                case (gl.RG32F): return gl.RG;\n                case (gl.RG16F): return gl.RG;\n                case (gl.R32F): return gl.RED;\n                case (gl.R16F): return gl.RED;\n                case (gl.DEPTH_COMPONENT32F): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT):\n            switch (internal_format) {\n                case (gl.RGBA16UI): return gl.RGBA_INTEGER;\n                case (gl.RGB16UI): return gl.RGB_INTEGER;\n                case (gl.RG16UI): return gl.RG_INTEGER;\n                case (gl.R16UI): return gl.RED_INTEGER;\n                case (gl.DEPTH_COMPONENT16): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.SHORT):\n            switch (internal_format) {\n                case (gl.RGBA16I): return gl.RGBA_INTEGER;\n                case (gl.RGB16I): return gl.RGB_INTEGER;\n                case (gl.RG16I): return gl.RG_INTEGER;\n                case (gl.R16I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_INT):\n            switch (internal_format) {\n                case (gl.RGBA32UI): return gl.RGBA_INTEGER;\n                case (gl.RGB32UI): return gl.RGB_INTEGER;\n                case (gl.RG32UI): return gl.RG_INTEGER;\n                case (gl.R32UI): return gl.RED_INTEGER;\n                case (gl.DEPTH_COMPONENT24): return gl.DEPTH_COMPONENT;\n                case (gl.DEPTH_COMPONENT16): return gl.DEPTH_COMPONENT;\n            }\n            break;\n        case (gl.INT):\n            switch (internal_format) {\n                case (gl.RGBA32I): return gl.RGBA_INTEGER;\n                case (gl.RGB32I): return gl.RGB_INTEGER;\n                case (gl.RG32I): return gl.RG_INTEGER;\n                case (gl.R32I): return gl.RED_INTEGER;\n            }\n            break;\n        case (gl.UNSIGNED_SHORT_5_6_5):\n            switch (internal_format) {\n                case (gl.RGB565): return gl.RGB;\n                case (gl.RGB): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_10F_11F_11F_REV):\n            switch (internal_format) {\n                case (gl.R11F_G11F_B10F): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_5_9_9_9_REV):\n            switch (internal_format) {\n                case (gl.RGB9_E5): return gl.RGB;\n            }\n            break;\n        case (gl.UNSIGNED_INT_24_8):\n            switch (internal_format) {\n                case (gl.DEPTH24_STENCIL8): return gl.DEPTH_STENCIL;\n            }\n            break;\n        case (gl.FLOAT_32_UNSIGNED_INT_24_8_REV):\n            switch (internal_format) {\n                case (gl.DEPTH32F_STENCIL8): return gl.DEPTH_STENCIL;\n            }\n            break;\n        default:\n            throw `Unknown format in getWebGL2InternalFormat`;\n    }\n    throw `Invalid combination of internal format and data type`;\n}\n/** Class representing a WebGL texture */\nclass WGLTexture {\n    /**\n     *\n     * @param gl               - The WebGL rendering context\n     * @param image            - The specification for the image\n     * @param image.format     - The format for the image (e.g., which color channels are present?). Should be one of gl.RGBA, gl.RGB, etc.\n     * @param image.type       - The data type for the image. Should be one of gl.FLOAT, gl.UNSIGNED_BYTE, etc.\n     * @param image.width      - The width of the texture\n     * @param image.height     - The height of the texture\n     * @param image.mag_filter - The magnification filter to use for the texture. Should be one of gl.LINEAR, gl.NEAREST, etc.\n     * @param image.image      - The image to use for the texture. Can be null to allocate space without filling it.\n     */\n    constructor(gl, image) {\n        this.gl = gl;\n        const texture = gl.createTexture();\n        if (texture === null) {\n            throw \"Could not create WebGL texture\";\n        }\n        this.texture = texture;\n        this.tex_num = null;\n        this.setImageData(image);\n        const mag_filter = image['mag_filter'] === undefined ? gl.LINEAR : image['mag_filter'];\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, mag_filter);\n    }\n    /**\n     * Set image data in this texture\n     * @param image        - The specification for the image\n     * @param image.format - The format for the image (e.g., which color channels are present?). Should be one of gl.RGBA, gl.RGB, etc.\n     * @param image.type   - The data type for the image. Should be one of gl.FLOAT, gl.UNSIGNED_BYTE, etc.\n     * @param image.width  - The width of the texture\n     * @param image.height - The height of the texture\n     * @param image.image  - The image to use for the texture. Can be null to allocate space without filling it.\n     */\n    setImageData(image) {\n        const gl = this.gl;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        const format = isWebGL2Ctx(gl) ? getWebGL2Format(gl, image['format'], image['type']) : image['format'];\n        const row_alignment = image['row_alignment'] === undefined ? 4 : image['row_alignment'];\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, row_alignment);\n        if (image['width'] !== undefined && image['height'] !== undefined) {\n            gl.texImage2D(gl.TEXTURE_2D, 0, image['format'], image['width'], image['height'], 0, format, image['type'], image['image']);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, 0, image['format'], format, image['type'], image['image']);\n        }\n    }\n    /**\n     * Bind this texture to a location in a shader program\n     * @internal\n     * @param prog_uni_location - The location of the sampler uniform value (returned from gl.getUniform()) in the shader program.\n     * @param gl_tex_num        - The texture number to bind this texture to.\n     */\n    bindToProgram(prog_uni_location, gl_tex_num) {\n        this.activate(gl_tex_num);\n        this.gl.uniform1i(prog_uni_location, gl_tex_num);\n    }\n    /**\n     * Bind this texture to a given texture number\n     * @param gl_tex_num - The texture number to bind this texture to.\n     */\n    activate(gl_tex_num) {\n        this.tex_num = gl_tex_num;\n        this.gl.activeTexture(this.gl.TEXTURE0 + this.tex_num);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);\n    }\n    /**\n     * Unbind this texture from the texture number it was most recently bound to.\n     */\n    deactivate() {\n        if (this.tex_num === null) {\n            return;\n        }\n        this.gl.activeTexture(this.gl.TEXTURE0 + this.tex_num);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n        this.tex_num = null;\n    }\n    /**\n     * Delete this texture.\n     */\n    delete() {\n        this.gl.deleteTexture(this.texture);\n        this.tex_num = null;\n    }\n}\nexport { WGLTexture };\n","import { isWebGL2Ctx } from \"./utils\";\n/**\n * @module wgl/WebGLProgram\n * Module containing a helper class for WebGL programs\n */\nfunction preprocessShader(shader_src, opts) {\n    opts = opts === undefined ? {} : opts;\n    const defines = opts.define === undefined ? [] : [...opts.define];\n    const current_defines = [];\n    const define_truth = {};\n    const processed_shader_src = shader_src.split(\"\\n\").map(line => {\n        const match_define = line.match(/#define\\s+([\\w\\d_]+)/i);\n        if (match_define !== null) {\n            defines.push(match_define[1]);\n        }\n        const match_ifdef = line.match(/#ifdef\\s+([\\w\\d_]+)/i);\n        if (match_ifdef !== null) {\n            current_defines.push(match_ifdef[1]);\n            define_truth[match_ifdef[1]] = true;\n            return \"\";\n        }\n        const match_ifndef = line.match(/#ifndef\\s+([\\w\\d_]+)/i);\n        if (match_ifndef !== null) {\n            current_defines.push(match_ifndef[1]);\n            define_truth[match_ifndef[1]] = false;\n            return \"\";\n        }\n        const match_else = line.match(/#else/i);\n        if (match_else !== null) {\n            const def = current_defines[current_defines.length - 1];\n            define_truth[def] = !define_truth[def];\n            return \"\";\n        }\n        const match_endif = line.match(/#endif/i);\n        if (match_endif !== null) {\n            const def = current_defines.pop();\n            define_truth[def] = undefined;\n            return \"\";\n        }\n        const keep_line = current_defines.map(def => defines.includes(def) == define_truth[def]).reduce((a, b) => a && b, true);\n        return keep_line ? line : \"\";\n    }).join(\"\\n\");\n    if (current_defines.length > 0) {\n        throw `Unterminated #ifdef/#ifndef block in shader`;\n    }\n    return processed_shader_src;\n}\n/**\n * Compile and link a shader program\n * @param gl                - The WebGL rendering context\n * @param vertex_shader_src - The source code for the vertex shader\n * @param frag_shader_src   - The source code for the fragment shader\n * @returns                   A compiled and linked WebGL program\n */\nconst compileAndLinkShaders = (gl, vertex_shader_src, frag_shader_src) => {\n    // create a vertex shader\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    if (vertexShader === null) {\n        throw \"Could not create vertex shader\";\n    }\n    gl.shaderSource(vertexShader, vertex_shader_src);\n    gl.compileShader(vertexShader);\n    const vertexCompiled = gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS);\n    if (!vertexCompiled) {\n        const compilationLog = gl.getShaderInfoLog(vertexShader);\n        console.log('Vertex shader compiler log: ' + compilationLog);\n    }\n    // create a fragment shader\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    if (fragmentShader === null) {\n        throw \"Could not create fragment shader\";\n    }\n    gl.shaderSource(fragmentShader, frag_shader_src);\n    gl.compileShader(fragmentShader);\n    const fragmentCompiled = gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS);\n    if (!fragmentCompiled) {\n        const compilationLog = gl.getShaderInfoLog(fragmentShader);\n        console.log('Fragment shader compiler log: ' + compilationLog);\n    }\n    // link the two shaders into a WebGL program\n    const program = gl.createProgram();\n    if (program === null) {\n        throw \"Could not create shader program\";\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    const linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        const linkLog = gl.getProgramInfoLog(program);\n        console.log('Linker log: ' + linkLog);\n    }\n    return program;\n};\n/** Class representing a WebGL shader program */\nclass WGLProgram {\n    /**\n     * Create and compile a shader program from source\n     * @param gl                  - The WebGL rendering context\n     * @param vertex_shader_src   - The vertex shader source code\n     * @param fragment_shader_src - The fragment shader source code\n     * @param opts.define         - Preprocessor macros to define (like -D when running gcc)\n     */\n    constructor(gl, vertex_shader_src, fragment_shader_src, opts) {\n        vertex_shader_src = preprocessShader(vertex_shader_src, opts);\n        fragment_shader_src = preprocessShader(fragment_shader_src, opts);\n        this.gl = gl;\n        this.prog = compileAndLinkShaders(gl, vertex_shader_src, fragment_shader_src);\n        this.attributes = {};\n        this.uniforms = {};\n        this.n_verts = null;\n        this.draw_mode = null;\n        this.index_buffer = null;\n        this.sampler_names = [];\n        const remove_comments = (line) => {\n            const comment_idx = line.indexOf('//');\n            if (comment_idx >= 0) {\n                line = line.slice(0, comment_idx);\n            }\n            return line;\n        };\n        vertex_shader_src = vertex_shader_src.split('\\n').map(remove_comments).join('\\n');\n        fragment_shader_src = fragment_shader_src.split('\\n').map(remove_comments).join('\\n');\n        // safety check the vertex shader source\n        const is_webgl2 = isWebGL2Ctx(this.gl);\n        if (!is_webgl2 &&\n            (vertex_shader_src.includes('#version 300 es') || fragment_shader_src.includes('#version 300 es'))) {\n            throw `WebGL2 context required for shader source containing '#version 300 es'`;\n        }\n        // in WebGL2 shaders (gl 300 es), attribute just become the keyword 'in'\n        let vtx_shader_match = is_webgl2 ?\n            /\\b(?:in|attribute)+([\\w ]+?) +([\\w_]+);[\\s]*$/mg : /attribute +([\\w ]+?) +([\\w_]+);[\\s]*$/mg;\n        for (const match of vertex_shader_src.matchAll(vtx_shader_match)) {\n            const [full_match, type, a_name] = match;\n            this.attributes[a_name] = { 'type': type, 'location': gl.getAttribLocation(this.prog, a_name) };\n        }\n        for (const match of vertex_shader_src.matchAll(/uniform +([\\w ]+?) +([\\w_]+)(?:[\\s]*\\[.*\\])?;[\\s]*$/mg)) {\n            const [full_match, type, u_name] = match;\n            const type_parts = type.split(' ');\n            const uniform_loc = gl.getUniformLocation(this.prog, u_name);\n            if (uniform_loc === null) {\n                throw `Could not get vertex shader uniform location for '${u_name}'`;\n            }\n            this.uniforms[u_name] = { 'type': type_parts[type_parts.length - 1], 'location': uniform_loc };\n        }\n        for (const match of fragment_shader_src.matchAll(/uniform +([\\w ]+?) +([\\w_]+)(?:[\\s]*\\[.*\\])?;[\\s]*$/mg)) {\n            const [full_match, type, u_name] = match;\n            const type_parts = type.split(' ');\n            const uniform_loc = gl.getUniformLocation(this.prog, u_name);\n            if (uniform_loc === null) {\n                throw `Could not get fragment shader uniform location for '${u_name}'`;\n            }\n            this.uniforms[u_name] = { 'type': type_parts[type_parts.length - 1], 'location': uniform_loc };\n        }\n        Object.entries(this.uniforms).forEach(([u_name, uniform]) => {\n            if (uniform.type.toLowerCase() == 'sampler2d') {\n                this.sampler_names.push(u_name);\n            }\n        });\n    }\n    /**\n     * Enable this program for rendering and optionally bind attribute, uniform, and texture values. This function should be called before calling\n     * {@link WGLProgram.bindAttributes}, {@link WGLProgram.setUniforms}, or {@link WGLProgram.bindTextures} on a given rendering pass.\n     * @param attribute_buffers - An object with the keys being the attribute variable names and the values being the buffers to associate with each variable\n     * @param uniform_values    - An object with the keys being the uniform variable names and the values being the uniform values\n     * @param textures          - An object with the keys being the sampler names in the source code and the values being the textures to associate with each sampler\n     * @param index_buffer      - A WGLIndexBuffer specifying which indices to draw in which order\n     */\n    use(attribute_buffers, uniform_values, textures, index_buffer) {\n        this.gl.useProgram(this.prog);\n        if (index_buffer !== undefined) {\n            index_buffer.bind();\n            this.index_buffer = index_buffer;\n        }\n        else {\n            this.index_buffer = null;\n        }\n        this.draw_mode = null;\n        this.n_verts = null;\n        if (attribute_buffers !== undefined) {\n            this.bindAttributes(attribute_buffers);\n        }\n        if (uniform_values !== undefined) {\n            this.setUniforms(uniform_values);\n        }\n        if (textures !== undefined) {\n            this.bindTextures(textures);\n        }\n    }\n    /**\n     * Bind attribute buffers to variables in this shader program. When rendring, call {@link WGLProgram.use} before calling this function.\n     * @param attribute_buffers - An object with the keys being the attribute variable names and the values being the buffers to associate with each variable\n     */\n    bindAttributes(attribute_buffers) {\n        Object.entries(attribute_buffers).forEach(([a_name, buffer]) => {\n            if (this.attributes[a_name] === undefined) {\n                console.warn(`Skipping attribute buffer provided for '${a_name}' because the attribute was not found in the program.`);\n                return;\n            }\n            this.n_verts = this.n_verts === null ? buffer.n_verts : this.n_verts;\n            this.draw_mode = this.draw_mode === null ? buffer.draw_mode : this.draw_mode;\n            if (this.draw_mode != buffer.draw_mode) {\n                throw `Unexpected draw mode for attribute buffer ${a_name} (expected ${this.draw_mode}, got ${buffer.draw_mode}).`;\n            }\n            if (this.n_verts != buffer.n_verts) {\n                throw `Unexpected number of vertices for attribute buffer ${a_name} (expected ${this.n_verts}, got ${buffer.n_verts}).`;\n            }\n            const { type, location } = this.attributes[a_name];\n            buffer.bindToProgram(location);\n        });\n    }\n    /**\n     * Set uniform values in this shader program. When rendering, call {@link WGLProgram.use} before calling this function.\n     * @param uniform_values - An object with the keys being the uniform variable names and the values being the uniform values\n     */\n    setUniforms(uniform_values) {\n        Object.entries(uniform_values).forEach(([u_name, value]) => {\n            if (this.uniforms[u_name] === undefined) {\n                console.warn(`Skipping uniform value provided for '${u_name}' because the uniform was not found in the program.`);\n                return;\n            }\n            const { type, location } = this.uniforms[u_name];\n            if (type === 'int' && typeof value == 'number') {\n                this.gl.uniform1i(location, value);\n            }\n            else if (type === 'float' && typeof value == 'number') {\n                this.gl.uniform1f(location, value);\n            }\n            else if (type === 'float' && value instanceof Array) {\n                this.gl.uniform1fv(location, value);\n            }\n            else if (type === 'vec2' && value instanceof Array) {\n                this.gl.uniform2fv(location, value);\n            }\n            else if (type === 'vec3' && value instanceof Array) {\n                this.gl.uniform3fv(location, value);\n            }\n            else if (type === 'vec4' && value instanceof Array) {\n                this.gl.uniform4fv(location, value);\n            }\n            else if (type === 'mat4' && value instanceof Array) {\n                this.gl.uniformMatrix4fv(location, false, value);\n            }\n            else {\n                throw `Could not figure out uniform function for type '${type}' and value '${String(value)}'`;\n            }\n        });\n    }\n    /**\n     * Bind textures to samplers in this shader program. When rendring, call {@link WGLProgram.use} before calling this function.\n     * @param textures - An object with the keys being the sampler names in the source code and the values being the textures to associate with each sampler\n     */\n    bindTextures(textures) {\n        Object.entries(textures).forEach(([sampler_name, texture]) => {\n            if (this.uniforms[sampler_name] === undefined) {\n                console.warn(`Skipping texture provided for sampler '${sampler_name}' because the sampler was not found in the program.`);\n                return;\n            }\n            const gl_tex_num = this.sampler_names.indexOf(sampler_name);\n            const { type, location } = this.uniforms[sampler_name];\n            texture.bindToProgram(location, gl_tex_num);\n        });\n    }\n    /**\n     * Run this shader program.\n     */\n    draw() {\n        if (this.draw_mode === null || this.n_verts === null) {\n            throw \"Cannot draw without binding attribute buffers\";\n        }\n        if (this.index_buffer === null) {\n            this.gl.drawArrays(this.draw_mode, 0, this.n_verts);\n        }\n        else {\n            this.gl.drawElements(this.draw_mode, this.index_buffer.n_verts, this.index_buffer.dtype, 0);\n        }\n    }\n}\nexport { WGLProgram };\n","/**\n * @module wgl/WebGLFramebuffer\n * Module containing helper classes for WebGL Framebuffers\n */\n/**\n * Base class for WebGL framebuffers\n */\nclass WGLFramebufferBase {\n    constructor(gl, framebuffer) {\n        this.gl = gl;\n        this.framebuffer = framebuffer;\n    }\n    /**\n     * Clear the framebuffer to a particular color\n     * @param color - The color to use when clearing the framebuffer as a float RGBA tuple\n     */\n    clear(color) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.clearColor(...color);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    /**\n     * Render to a portion of this framebuffer\n     * @param x      - The x coordinate of the starting point for the viewport\n     * @param y      - The y coordinate of the starting point for the viewport\n     * @param width  - The width of the viewport\n     * @param height - The height of the viewport\n     */\n    renderTo(x, y, width, height) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.viewport(x, y, width, height);\n    }\n    /**\n     * Copy the contents of this framebuffer to another texture\n     * @param texture - The destination texture for the copy\n     * @param x       - The x coordinate of the start of the source rectangle\n     * @param y       - The y coordinate of the start of the source rectangle\n     * @param width   - The width of the source rectangle\n     * @param height  - The height of the source rectangle\n     */\n    copyToTexture(texture, x, y, width, height) {\n        const gl = this.gl;\n        if (gl === null) {\n            throw \"Register WebGL drawing context using registerGLContext() first\";\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        texture.activate(0);\n        gl.copyTexImage2D(gl.TEXTURE_2D, 0, gl.RGBA, x, y, width, height, 0);\n    }\n}\n/**\n * Class representing the screen buffer\n * @extends WGLFramebufferBase\n */\nclass WGLScreenbuffer extends WGLFramebufferBase {\n    /**\n     * Create the screen buffer. Use the {@link WGLFramebuffer.screen} static variable of {@link WGLFramebuffer} instead of creating your own screenbuffer.\n     */\n    constructor() {\n        super(null, null);\n    }\n    /**\n     * Register the WebGL rendering context for later use\n     * @param gl - The WebGL rendering context\n     */\n    registerGLContext(gl) {\n        this.gl = gl;\n    }\n}\nconst SCREEN = new WGLScreenbuffer();\n/**\n * Class representing a WebGL framebuffer\n * @extends WGLFramebufferBase\n */\nclass WGLFramebuffer extends WGLFramebufferBase {\n    /**\n     * Create a framebuffer associated with a texture\n     * @param gl      - The WebGL rendering context\n     * @param texture - The texture object to associate with this framebuffer\n     */\n    constructor(gl, texture) {\n        const framebuffer = gl.createFramebuffer();\n        if (framebuffer === null) {\n            throw \"Could not create WebGL Framebuffer\";\n        }\n        super(gl, framebuffer);\n        this.texture = texture;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture['texture'], 0);\n    }\n    /**\n     * Get a screen buffer object for interacting with the screen\n     * @static\n     * @param gl - The WebGL rendering context to use\n     */\n    static screen(gl) {\n        SCREEN.registerGLContext(gl);\n        return SCREEN;\n    }\n}\n/**\n * Perform several rendering passes, flip-flopping between two framebuffers\n * @param n_passes  - The number of rendering passes to do\n * @param source_fb - The framebuffer containing the initial data for the rendering\n * @param aux_fb    - The auxilary rendering framebuffers (should be 2 of them)\n * @param do_render - A method that does the actual rendering pass\n */\nconst flipFlopBuffers = (n_passes, source_fb, aux_fb, do_render) => {\n    // fb1 is the source and fb2 is the target for each pass\n    let fb1 = source_fb, fb2 = aux_fb[0];\n    for (let ipass = 0; ipass < n_passes; ipass++) {\n        // Clear and unbind destination texture\n        fb2.clear([0., 0., 0., 1.]);\n        fb2.texture.deactivate();\n        // Do whatever rendering task we want to do\n        do_render(fb1, fb2, ipass);\n        if (ipass > 0) {\n            // Flip the framebuffers so the destination on this pass becomes the source on the next pass and vice-versa\n            aux_fb.reverse();\n        }\n        [fb1, fb2] = aux_fb;\n    }\n    // The most recent target is fb2, but the two framebuffers got flipped at the end of the loop, so the data we want are in fb1.\n    return fb1;\n};\nexport { WGLFramebuffer, flipFlopBuffers };\n","export const THIS_IS_NOT_AN_OBJECT = \"This is not an object\";\nexport const THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT = \"This is not a Float16Array object\";\nexport const THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY =\n  \"This constructor is not a subclass of Float16Array\";\nexport const THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT =\n  \"The constructor property value is not an object\";\nexport const SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT =\n  \"Species constructor didn't return TypedArray object\";\nexport const DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH =\n  \"Derived constructor created TypedArray object which was too small length\";\nexport const ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER =\n  \"Attempting to access detached ArrayBuffer\";\nexport const CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT =\n  \"Cannot convert undefined or null to object\";\nexport const CANNOT_MIX_BIGINT_AND_OTHER_TYPES =\n  \"Cannot mix BigInt and other types, use explicit conversions\";\nexport const ITERATOR_PROPERTY_IS_NOT_CALLABLE = \"@@iterator property is not callable\";\nexport const REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE =\n  \"Reduce of empty array with no initial value\";\nexport const THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED =\n  \"The comparison function must be either a function or undefined\";\nexport const OFFSET_IS_OUT_OF_BOUNDS = \"Offset is out of bounds\";\n","/* eslint-disable no-restricted-globals, no-restricted-syntax */\n/* global SharedArrayBuffer */\n\nimport { CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT } from \"./messages.mjs\";\n\n/** @type {<T extends (...args: any) => any>(target: T) => (thisArg: ThisType<T>, ...args: any[]) => any} */\nfunction uncurryThis(target) {\n  return (thisArg, ...args) => {\n    return ReflectApply(target, thisArg, args);\n  };\n}\n\n/** @type {(target: any, key: string | symbol) => (thisArg: any, ...args: any[]) => any} */\nfunction uncurryThisGetter(target, key) {\n  return uncurryThis(\n    ReflectGetOwnPropertyDescriptor(\n      target,\n      key\n    ).get\n  );\n}\n\n// Reflect\nexport const {\n  apply: ReflectApply,\n  construct: ReflectConstruct,\n  defineProperty: ReflectDefineProperty,\n  get: ReflectGet,\n  getOwnPropertyDescriptor: ReflectGetOwnPropertyDescriptor,\n  getPrototypeOf: ReflectGetPrototypeOf,\n  has: ReflectHas,\n  ownKeys: ReflectOwnKeys,\n  set: ReflectSet,\n  setPrototypeOf: ReflectSetPrototypeOf,\n} = Reflect;\n\n// Proxy\nexport const NativeProxy = Proxy;\n\n// Number\nexport const {\n  EPSILON,\n  MAX_SAFE_INTEGER,\n  isFinite: NumberIsFinite,\n  isNaN: NumberIsNaN,\n} = Number;\n\n// Symbol\nexport const {\n  iterator: SymbolIterator,\n  species: SymbolSpecies,\n  toStringTag: SymbolToStringTag,\n  for: SymbolFor,\n} = Symbol;\n\n// Object\nexport const NativeObject = Object;\nexport const {\n  create: ObjectCreate,\n  defineProperty: ObjectDefineProperty,\n  freeze: ObjectFreeze,\n  is: ObjectIs,\n} = NativeObject;\nconst ObjectPrototype = NativeObject.prototype;\n/** @type {(object: object, key: PropertyKey) => Function | undefined} */\nexport const ObjectPrototype__lookupGetter__ = /** @type {any} */ (ObjectPrototype).__lookupGetter__\n  ? uncurryThis(/** @type {any} */ (ObjectPrototype).__lookupGetter__)\n  : (object, key) => {\n    if (object == null) {\n      throw NativeTypeError(\n        CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n      );\n    }\n\n    let target = NativeObject(object);\n    do {\n      const descriptor = ReflectGetOwnPropertyDescriptor(target, key);\n      if (descriptor !== undefined) {\n        if (ObjectHasOwn(descriptor, \"get\")) {\n          return descriptor.get;\n        }\n\n        return;\n      }\n    } while ((target = ReflectGetPrototypeOf(target)) !== null);\n  };\n/** @type {(object: object, key: PropertyKey) => boolean} */\nexport const ObjectHasOwn = /** @type {any} */ (NativeObject).hasOwn ||\n  uncurryThis(ObjectPrototype.hasOwnProperty);\n\n// Array\nconst NativeArray = Array;\nexport const ArrayIsArray = NativeArray.isArray;\nconst ArrayPrototype = NativeArray.prototype;\n/** @type {(array: ArrayLike<unknown>, separator?: string) => string} */\nexport const ArrayPrototypeJoin = uncurryThis(ArrayPrototype.join);\n/** @type {<T>(array: T[], ...items: T[]) => number} */\nexport const ArrayPrototypePush = uncurryThis(ArrayPrototype.push);\n/** @type {(array: ArrayLike<unknown>, ...opts: any[]) => string} */\nexport const ArrayPrototypeToLocaleString = uncurryThis(\n  ArrayPrototype.toLocaleString\n);\nexport const NativeArrayPrototypeSymbolIterator = ArrayPrototype[SymbolIterator];\n/** @type {<T>(array: T[]) => IterableIterator<T>} */\nexport const ArrayPrototypeSymbolIterator = uncurryThis(NativeArrayPrototypeSymbolIterator);\n\n// Math\nexport const {\n  abs: MathAbs,\n  trunc: MathTrunc,\n} = Math;\n\n// ArrayBuffer\nexport const NativeArrayBuffer = ArrayBuffer;\nexport const ArrayBufferIsView = NativeArrayBuffer.isView;\nconst ArrayBufferPrototype = NativeArrayBuffer.prototype;\n/** @type {(buffer: ArrayBuffer, begin?: number, end?: number) => number} */\nexport const ArrayBufferPrototypeSlice = uncurryThis(ArrayBufferPrototype.slice);\n/** @type {(buffer: ArrayBuffer) => ArrayBuffer} */\nexport const ArrayBufferPrototypeGetByteLength = uncurryThisGetter(ArrayBufferPrototype, \"byteLength\");\n\n// SharedArrayBuffer\nexport const NativeSharedArrayBuffer = typeof SharedArrayBuffer !== \"undefined\" ? SharedArrayBuffer : null;\n/** @type {(buffer: SharedArrayBuffer) => SharedArrayBuffer} */\nexport const SharedArrayBufferPrototypeGetByteLength = NativeSharedArrayBuffer\n  && uncurryThisGetter(NativeSharedArrayBuffer.prototype, \"byteLength\");\n\n// TypedArray\n/** @typedef {Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float32Array|Float64Array|BigUint64Array|BigInt64Array} TypedArray */\n/** @type {any} */\nexport const TypedArray = ReflectGetPrototypeOf(Uint8Array);\nconst TypedArrayFrom = TypedArray.from;\nexport const TypedArrayPrototype = TypedArray.prototype;\nexport const NativeTypedArrayPrototypeSymbolIterator = TypedArrayPrototype[SymbolIterator];\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\nexport const TypedArrayPrototypeKeys = uncurryThis(TypedArrayPrototype.keys);\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\nexport const TypedArrayPrototypeValues = uncurryThis(\n  TypedArrayPrototype.values\n);\n/** @type {(typedArray: TypedArray) => IterableIterator<[number, number]>} */\nexport const TypedArrayPrototypeEntries = uncurryThis(\n  TypedArrayPrototype.entries\n);\n/** @type {(typedArray: TypedArray, array: ArrayLike<number>, offset?: number) => void} */\nexport const TypedArrayPrototypeSet = uncurryThis(TypedArrayPrototype.set);\n/** @type {<T extends TypedArray>(typedArray: T) => T} */\nexport const TypedArrayPrototypeReverse = uncurryThis(\n  TypedArrayPrototype.reverse\n);\n/** @type {<T extends TypedArray>(typedArray: T, value: number, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeFill = uncurryThis(TypedArrayPrototype.fill);\n/** @type {<T extends TypedArray>(typedArray: T, target: number, start: number, end?: number) => T} */\nexport const TypedArrayPrototypeCopyWithin = uncurryThis(\n  TypedArrayPrototype.copyWithin\n);\n/** @type {<T extends TypedArray>(typedArray: T, compareFn?: (a: number, b: number) => number) => T} */\nexport const TypedArrayPrototypeSort = uncurryThis(TypedArrayPrototype.sort);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeSlice = uncurryThis(TypedArrayPrototype.slice);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\nexport const TypedArrayPrototypeSubarray = uncurryThis(\n  TypedArrayPrototype.subarray\n);\n/** @type {((typedArray: TypedArray) => ArrayBuffer)} */\nexport const TypedArrayPrototypeGetBuffer = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"buffer\"\n);\n/** @type {((typedArray: TypedArray) => number)} */\nexport const TypedArrayPrototypeGetByteOffset = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"byteOffset\"\n);\n/** @type {((typedArray: TypedArray) => number)} */\nexport const TypedArrayPrototypeGetLength = uncurryThisGetter(\n  TypedArrayPrototype,\n  \"length\"\n);\n/** @type {(target: unknown) => string} */\nexport const TypedArrayPrototypeGetSymbolToStringTag = uncurryThisGetter(\n  TypedArrayPrototype,\n  SymbolToStringTag\n);\n\n// Uint8Array\nexport const NativeUint8Array = Uint8Array;\n\n// Uint16Array\nexport const NativeUint16Array = Uint16Array;\n/** @type {Uint16ArrayConstructor[\"from\"]} */\nexport const Uint16ArrayFrom = (...args) => {\n  return ReflectApply(TypedArrayFrom, NativeUint16Array, args);\n};\n\n// Uint32Array\nexport const NativeUint32Array = Uint32Array;\n\n// Float32Array\nexport const NativeFloat32Array = Float32Array;\n\n// ArrayIterator\n/** @type {any} */\nexport const ArrayIteratorPrototype = ReflectGetPrototypeOf([][SymbolIterator]());\n/** @type {<T>(arrayIterator: IterableIterator<T>) => IteratorResult<T>} */\nexport const ArrayIteratorPrototypeNext = uncurryThis(ArrayIteratorPrototype.next);\n\n// Generator\n/** @type {<T = unknown, TReturn = any, TNext = unknown>(generator: Generator<T, TReturn, TNext>, value?: TNext) => T} */\nexport const GeneratorPrototypeNext = uncurryThis((function* () {})().next);\n\n// Iterator\nexport const IteratorPrototype = ReflectGetPrototypeOf(ArrayIteratorPrototype);\n\n// DataView\nconst DataViewPrototype = DataView.prototype;\n/** @type {(dataView: DataView, byteOffset: number, littleEndian?: boolean) => number} */\nexport const DataViewPrototypeGetUint16 = uncurryThis(\n  DataViewPrototype.getUint16\n);\n/** @type {(dataView: DataView, byteOffset: number, value: number, littleEndian?: boolean) => void} */\nexport const DataViewPrototypeSetUint16 = uncurryThis(\n  DataViewPrototype.setUint16\n);\n\n// Error\nexport const NativeTypeError = TypeError;\nexport const NativeRangeError = RangeError;\n\n// WeakSet\n/**\n * Do not construct with arguments to avoid calling the \"add\" method\n * @type {{new <T extends {}>(): WeakSet<T>}}\n */\nexport const NativeWeakSet = WeakSet;\nconst WeakSetPrototype = NativeWeakSet.prototype;\n/** @type {<T extends {}>(set: WeakSet<T>, value: T) => Set<T>} */\nexport const WeakSetPrototypeAdd = uncurryThis(WeakSetPrototype.add);\n/** @type {<T extends {}>(set: WeakSet<T>, value: T) => boolean} */\nexport const WeakSetPrototypeHas = uncurryThis(WeakSetPrototype.has);\n\n// WeakMap\n/**\n * Do not construct with arguments to avoid calling the \"set\" method\n * @type {{new <K extends {}, V>(): WeakMap<K, V>}}\n */\nexport const NativeWeakMap = WeakMap;\nconst WeakMapPrototype = NativeWeakMap.prototype;\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => V} */\nexport const WeakMapPrototypeGet = uncurryThis(WeakMapPrototype.get);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => boolean} */\nexport const WeakMapPrototypeHas = uncurryThis(WeakMapPrototype.has);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K, value: V) => WeakMap} */\nexport const WeakMapPrototypeSet = uncurryThis(WeakMapPrototype.set);\n","import {\n  ArrayIteratorPrototype,\n  ArrayIteratorPrototypeNext,\n  ArrayPrototypeSymbolIterator,\n  GeneratorPrototypeNext,\n  IteratorPrototype,\n  NativeArrayPrototypeSymbolIterator,\n  NativeWeakMap,\n  ObjectCreate,\n  ObjectDefineProperty,\n  ReflectGetOwnPropertyDescriptor,\n  ReflectOwnKeys,\n  SymbolIterator,\n  WeakMapPrototypeGet,\n  WeakMapPrototypeSet,\n} from \"./primordials.mjs\";\n\n/** @type {WeakMap<{}, IterableIterator<any>>} */\nconst arrayIterators = new NativeWeakMap();\n\nconst SafeIteratorPrototype = ObjectCreate(null, {\n  next: {\n    value: function next() {\n      const arrayIterator = WeakMapPrototypeGet(arrayIterators, this);\n      return ArrayIteratorPrototypeNext(arrayIterator);\n    },\n  },\n\n  [SymbolIterator]: {\n    value: function values() {\n      return this;\n    },\n  },\n});\n\n/**\n * Wrap the Array around the SafeIterator If Array.prototype [@@iterator] has been modified\n * @type {<T>(array: T[]) => Iterable<T>}\n */\nexport function safeIfNeeded(array) {\n  if (\n    array[SymbolIterator] === NativeArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  ) {\n    return array;\n  }\n\n  const safe = ObjectCreate(SafeIteratorPrototype);\n  WeakMapPrototypeSet(arrayIterators, safe, ArrayPrototypeSymbolIterator(array));\n  return safe;\n}\n\n/** @type {WeakMap<{}, Generator<any>>} */\nconst generators = new NativeWeakMap();\n\n/** @see https://tc39.es/ecma262/#sec-%arrayiteratorprototype%-object */\nconst DummyArrayIteratorPrototype = ObjectCreate(IteratorPrototype, {\n  next: {\n    value: function next() {\n      const generator = WeakMapPrototypeGet(generators, this);\n      return GeneratorPrototypeNext(generator);\n    },\n    writable: true,\n    configurable: true,\n  },\n});\n\nfor (const key of ReflectOwnKeys(ArrayIteratorPrototype)) {\n  // next method has already defined\n  if (key === \"next\") {\n    continue;\n  }\n\n  // Copy ArrayIteratorPrototype descriptors to DummyArrayIteratorPrototype\n  ObjectDefineProperty(DummyArrayIteratorPrototype, key, ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype, key));\n}\n\n/**\n * Wrap the Generator around the dummy ArrayIterator\n * @type {<T>(generator: Generator<T>) => IterableIterator<T>}\n */\nexport function wrap(generator) {\n  const dummy = ObjectCreate(DummyArrayIteratorPrototype);\n  WeakMapPrototypeSet(generators, dummy, generator);\n  return dummy;\n}\n","import {\n  ArrayBufferPrototypeGetByteLength,\n  ArrayIsArray,\n  ArrayIteratorPrototype,\n  ArrayIteratorPrototypeNext,\n  MathTrunc,\n  NativeArrayPrototypeSymbolIterator,\n  NativeSharedArrayBuffer,\n  NativeTypedArrayPrototypeSymbolIterator,\n  NumberIsFinite,\n  SharedArrayBufferPrototypeGetByteLength,\n  SymbolIterator,\n  TypedArrayPrototypeGetSymbolToStringTag,\n} from \"./primordials.mjs\";\n\n/**\n * @param {unknown} value\n * @returns {value is {}}\n */\nexport function isObject(value) {\n  return (\n    (value !== null && typeof value === \"object\") ||\n    typeof value === \"function\"\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is {}}\n */\nexport function isObjectLike(value) {\n  return value !== null && typeof value === \"object\";\n}\n\n// Inspired by util.types implementation of Node.js\n/** @typedef {Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float32Array|Float64Array|BigUint64Array|BigInt64Array} TypedArray */\n\n/**\n * @param {unknown} value\n * @returns {value is TypedArray}\n */\nexport function isNativeTypedArray(value) {\n  return TypedArrayPrototypeGetSymbolToStringTag(value) !== undefined;\n}\n\n/**\n * @param {unknown} value\n * @returns {value is BigInt64Array|BigUint64Array}\n */\nexport function isNativeBigIntTypedArray(value) {\n  const typedArrayName = TypedArrayPrototypeGetSymbolToStringTag(value);\n  return (\n    typedArrayName === \"BigInt64Array\" ||\n    typedArrayName === \"BigUint64Array\"\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is ArrayBuffer}\n */\nfunction isArrayBuffer(value) {\n  try {\n    ArrayBufferPrototypeGetByteLength(/** @type {any} */ (value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @param {unknown} value\n * @returns {value is SharedArrayBuffer}\n */\nexport function isSharedArrayBuffer(value) {\n  if (NativeSharedArrayBuffer === null) {\n    return false;\n  }\n\n  try {\n    SharedArrayBufferPrototypeGetByteLength(/** @type {any} */ (value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @param {unknown} value\n * @returns {value is ArrayBuffer|SharedArrayBuffer}\n */\nexport function isAnyArrayBuffer(value) {\n  return isArrayBuffer(value) || isSharedArrayBuffer(value);\n}\n\n/**\n * @param {unknown} value\n * @returns {value is unknown[]}\n */\nexport function isOrdinaryArray(value) {\n  if (!ArrayIsArray(value)) {\n    return false;\n  }\n\n  // Verify that there are no changes in ArrayIterator\n  return (\n    value[SymbolIterator] === NativeArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is TypedArray}\n */\nexport function isOrdinaryNativeTypedArray(value) {\n  if (!isNativeTypedArray(value)) {\n    return false;\n  }\n\n  // Verify that there are no changes in ArrayIterator\n  return (\n    value[SymbolIterator] === NativeTypedArrayPrototypeSymbolIterator &&\n    ArrayIteratorPrototype.next === ArrayIteratorPrototypeNext\n  );\n}\n\n/**\n * @param {unknown} value\n * @returns {value is string}\n */\nexport function isCanonicalIntegerIndexString(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  const number = +value;\n  if (value !== number + \"\") {\n    return false;\n  }\n\n  if (!NumberIsFinite(number)) {\n    return false;\n  }\n\n  return number === MathTrunc(number);\n}\n","import { isObject, isObjectLike } from \"./is.mjs\";\nimport { THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT } from \"./messages.mjs\";\nimport { NativeTypeError, ReflectGetPrototypeOf, ReflectHas, SymbolFor } from \"./primordials.mjs\";\n\nexport const brand = SymbolFor(\"__Float16Array__\");\n\n/**\n * @param {unknown} target\n * @throws {TypeError}\n * @returns {boolean}\n */\nexport function hasFloat16ArrayBrand(target) {\n  if (!isObjectLike(target)) {\n    return false;\n  }\n\n  const prototype = ReflectGetPrototypeOf(target);\n  if (!isObjectLike(prototype)) {\n    return false;\n  }\n\n  const constructor = prototype.constructor;\n  if (constructor === undefined) {\n    return false;\n  }\n  if (!isObject(constructor)) {\n    throw NativeTypeError(THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT);\n  }\n\n  return ReflectHas(constructor, brand);\n}\n","import {\n  EPSILON,\n  MathAbs,\n  NativeArrayBuffer,\n  NativeFloat32Array,\n  NativeUint16Array,\n  NativeUint32Array,\n  NativeUint8Array,\n  NumberIsFinite,\n  NumberIsNaN,\n} from \"./primordials.mjs\";\n\nconst INVERSE_OF_EPSILON = 1 / EPSILON;\n\n/**\n * rounds to the nearest value;\n * if the number falls midway, it is rounded to the nearest value with an even least significant digit\n * @param {number} num\n * @returns {number}\n */\nfunction roundTiesToEven(num) {\n  return (num + INVERSE_OF_EPSILON) - INVERSE_OF_EPSILON;\n}\n\nconst FLOAT16_MIN_VALUE = 6.103515625e-05;\nconst FLOAT16_MAX_VALUE = 65504;\nconst FLOAT16_EPSILON = 0.0009765625;\n\nconst FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE = FLOAT16_EPSILON * FLOAT16_MIN_VALUE;\nconst FLOAT16_EPSILON_DEVIDED_BY_EPSILON = FLOAT16_EPSILON * INVERSE_OF_EPSILON;\n\n/**\n * round a number to a half float number\n * @param {unknown} num - double float\n * @returns {number} half float number bits\n */\nexport function roundToFloat16(num) {\n  const number = +num;\n\n  // NaN, Infinity, -Infinity, 0, -0\n  if (!NumberIsFinite(number) || number === 0) {\n    return number;\n  }\n\n  // finite except 0, -0\n  const sign = number > 0 ? 1 : -1;\n  const absolute = MathAbs(number);\n\n  // small number\n  if (absolute < FLOAT16_MIN_VALUE) {\n    return sign * roundTiesToEven(absolute / FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE) * FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE;\n  }\n\n  const temp = (1 + FLOAT16_EPSILON_DEVIDED_BY_EPSILON) * absolute;\n  const result = temp - (temp - absolute);\n\n  // large number\n  if (result > FLOAT16_MAX_VALUE || NumberIsNaN(result)) {\n    return sign * Infinity;\n  }\n\n  return sign * result;\n}\n\n// base algorithm: http://fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst buffer = new NativeArrayBuffer(4);\nconst floatView = new NativeFloat32Array(buffer);\nconst uint32View = new NativeUint32Array(buffer);\n\nconst baseTable = new NativeUint16Array(512);\nconst shiftTable = new NativeUint8Array(512);\n\nfor (let i = 0; i < 256; ++i) {\n  const e = i - 127;\n\n  // very small number (0, -0)\n  if (e < -27) {\n    baseTable[i]         = 0x0000;\n    baseTable[i | 0x100] = 0x8000;\n    shiftTable[i]         = 24;\n    shiftTable[i | 0x100] = 24;\n\n  // small number (denorm)\n  } else if (e < -14) {\n    baseTable[i]         =  0x0400 >> (-e - 14);\n    baseTable[i | 0x100] = (0x0400 >> (-e - 14)) | 0x8000;\n    shiftTable[i]         = -e - 1;\n    shiftTable[i | 0x100] = -e - 1;\n\n  // normal number\n  } else if (e <= 15) {\n    baseTable[i]         =  (e + 15) << 10;\n    baseTable[i | 0x100] = ((e + 15) << 10) | 0x8000;\n    shiftTable[i]         = 13;\n    shiftTable[i | 0x100] = 13;\n\n  // large number (Infinity, -Infinity)\n  } else if (e < 128) {\n    baseTable[i]         = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i]         = 24;\n    shiftTable[i | 0x100] = 24;\n\n  // stay (NaN, Infinity, -Infinity)\n  } else {\n    baseTable[i]         = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i]         = 13;\n    shiftTable[i | 0x100] = 13;\n  }\n}\n\n/**\n * round a number to a half float number bits\n * @param {unknown} num - double float\n * @returns {number} half float number bits\n */\nexport function roundToFloat16Bits(num) {\n  floatView[0] = roundToFloat16(num);\n  const f = uint32View[0];\n  const e = (f >> 23) & 0x1ff;\n  return baseTable[e] + ((f & 0x007fffff) >> shiftTable[e]);\n}\n\nconst mantissaTable = new NativeUint32Array(2048);\nfor (let i = 1; i < 1024; ++i) {\n  let m = i << 13; // zero pad mantissa bits\n  let e = 0; // zero exponent\n\n  // normalized\n  while ((m & 0x00800000) === 0) {\n    m <<= 1;\n    e -= 0x00800000; // decrement exponent\n  }\n\n  m &= ~0x00800000; // clear leading 1 bit\n  e += 0x38800000; // adjust bias\n\n  mantissaTable[i] = m | e;\n}\nfor (let i = 1024; i < 2048; ++i) {\n  mantissaTable[i] = 0x38000000 + ((i - 1024) << 13);\n}\n\nconst exponentTable = new NativeUint32Array(64);\nfor (let i = 1; i < 31; ++i) {\n  exponentTable[i] = i << 23;\n}\nexponentTable[31] = 0x47800000;\nexponentTable[32] = 0x80000000;\nfor (let i = 33; i < 63; ++i) {\n  exponentTable[i] = 0x80000000 + ((i - 32) << 23);\n}\nexponentTable[63] = 0xc7800000;\n\nconst offsetTable = new NativeUint16Array(64);\nfor (let i = 1; i < 64; ++i) {\n  if (i !== 32) {\n    offsetTable[i] = 1024;\n  }\n}\n\n/**\n * convert a half float number bits to a number\n * @param {number} float16bits - half float number bits\n * @returns {number} double float\n */\nexport function convertToNumber(float16bits) {\n  const i = float16bits >> 10;\n  uint32View[0] = mantissaTable[offsetTable[i] + (float16bits & 0x3ff)] + exponentTable[i];\n  return floatView[0];\n}\n","import { isObject, isSharedArrayBuffer } from \"./is.mjs\";\nimport {\n  THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT,\n  THIS_IS_NOT_AN_OBJECT,\n} from \"./messages.mjs\";\nimport {\n  ArrayBufferPrototypeSlice,\n  MAX_SAFE_INTEGER,\n  MathTrunc,\n  NativeTypeError,\n  NumberIsNaN,\n  ObjectIs,\n  SymbolSpecies,\n} from \"./primordials.mjs\";\n\n/**\n * @see https://tc39.es/ecma262/#sec-tointegerorinfinity\n * @param {unknown} target\n * @returns {number}\n */\nexport function ToIntegerOrInfinity(target) {\n  const number = +target;\n\n  if (NumberIsNaN(number) || number === 0) {\n    return 0;\n  }\n\n  return MathTrunc(number);\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-tolength\n * @param {unknown} target\n * @returns {number}\n */\nexport function ToLength(target) {\n  const length = ToIntegerOrInfinity(target);\n  if (length < 0) {\n    return 0;\n  }\n\n  return length < MAX_SAFE_INTEGER\n    ? length\n    : MAX_SAFE_INTEGER;\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-speciesconstructor\n * @param {object} target\n * @param {{ new(...args: any[]): any; }} defaultConstructor\n * @returns {{ new(...args: any[]): any; }}\n */\nexport function SpeciesConstructor(target, defaultConstructor) {\n  if (!isObject(target)) {\n    throw NativeTypeError(THIS_IS_NOT_AN_OBJECT);\n  }\n\n  const constructor = target.constructor;\n  if (constructor === undefined) {\n    return defaultConstructor;\n  }\n  if (!isObject(constructor)) {\n    throw NativeTypeError(THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT);\n  }\n\n  const species = constructor[SymbolSpecies];\n  if (species == null) {\n    return defaultConstructor;\n  }\n\n  return species;\n}\n\n/**\n * @see https://tc39.es/ecma262/#sec-isdetachedbuffer\n * @param {ArrayBufferLike} buffer\n * @returns {boolean}\n */\nexport function IsDetachedBuffer(buffer) {\n  if (isSharedArrayBuffer(buffer)) {\n    return false;\n  }\n\n  try {\n    ArrayBufferPrototypeSlice(buffer, 0, 0);\n    return false;\n  } catch (e) {/* empty */}\n\n  return true;\n}\n\n/**\n * bigint comparisons are not supported\n * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\n * @param {number} x\n * @param {number} y\n * @returns {-1 | 0 | 1}\n */\nexport function defaultCompare(x, y) {\n  const isXNaN = NumberIsNaN(x);\n  const isYNaN = NumberIsNaN(y);\n\n  if (isXNaN && isYNaN) {\n    return 0;\n  }\n\n  if (isXNaN) {\n    return 1;\n  }\n\n  if (isYNaN) {\n    return -1;\n  }\n\n  if (x < y) {\n    return -1;\n  }\n\n  if (x > y) {\n    return 1;\n  }\n\n  if (x === 0 && y === 0) {\n    const isXPlusZero = ObjectIs(x, 0);\n    const isYPlusZero = ObjectIs(y, 0);\n\n    if (!isXPlusZero && isYPlusZero) {\n      return -1;\n    }\n\n    if (isXPlusZero && !isYPlusZero) {\n      return 1;\n    }\n  }\n\n  return 0;\n}\n","import { safeIfNeeded, wrap } from \"./_util/arrayIterator.mjs\";\nimport { brand, hasFloat16ArrayBrand } from \"./_util/brand.mjs\";\nimport { convertToNumber, roundToFloat16Bits } from \"./_util/converter.mjs\";\nimport {\n  isAnyArrayBuffer,\n  isCanonicalIntegerIndexString,\n  isNativeBigIntTypedArray,\n  isNativeTypedArray,\n  isObject,\n  isOrdinaryArray,\n  isOrdinaryNativeTypedArray,\n} from \"./_util/is.mjs\";\nimport {\n  ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER,\n  CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT,\n  CANNOT_MIX_BIGINT_AND_OTHER_TYPES,\n  DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH,\n  ITERATOR_PROPERTY_IS_NOT_CALLABLE,\n  OFFSET_IS_OUT_OF_BOUNDS,\n  REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE,\n  SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT,\n  THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED,\n  THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY,\n  THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT,\n} from \"./_util/messages.mjs\";\nimport {\n  ArrayBufferIsView,\n  ArrayPrototypeJoin,\n  ArrayPrototypePush,\n  ArrayPrototypeToLocaleString,\n  NativeArrayBuffer,\n  NativeObject,\n  NativeProxy,\n  NativeRangeError,\n  NativeTypeError,\n  NativeUint16Array,\n  NativeWeakMap,\n  NativeWeakSet,\n  NumberIsNaN,\n  ObjectDefineProperty,\n  ObjectFreeze,\n  ObjectHasOwn,\n  ObjectPrototype__lookupGetter__,\n  ReflectApply,\n  ReflectConstruct,\n  ReflectDefineProperty,\n  ReflectGet,\n  ReflectGetOwnPropertyDescriptor,\n  ReflectHas,\n  ReflectOwnKeys,\n  ReflectSet,\n  ReflectSetPrototypeOf,\n  SymbolIterator,\n  SymbolToStringTag,\n  TypedArray,\n  TypedArrayPrototype,\n  TypedArrayPrototypeCopyWithin,\n  TypedArrayPrototypeEntries,\n  TypedArrayPrototypeFill,\n  TypedArrayPrototypeGetBuffer,\n  TypedArrayPrototypeGetByteOffset,\n  TypedArrayPrototypeGetLength,\n  TypedArrayPrototypeKeys,\n  TypedArrayPrototypeReverse,\n  TypedArrayPrototypeSet,\n  TypedArrayPrototypeSlice,\n  TypedArrayPrototypeSort,\n  TypedArrayPrototypeSubarray,\n  TypedArrayPrototypeValues,\n  Uint16ArrayFrom,\n  WeakMapPrototypeGet,\n  WeakMapPrototypeHas,\n  WeakMapPrototypeSet,\n  WeakSetPrototypeAdd,\n  WeakSetPrototypeHas,\n} from \"./_util/primordials.mjs\";\nimport {\n  IsDetachedBuffer,\n  SpeciesConstructor,\n  ToIntegerOrInfinity,\n  ToLength,\n  defaultCompare,\n} from \"./_util/spec.mjs\";\n\nconst BYTES_PER_ELEMENT = 2;\n\n/** @typedef {Uint16Array & { __float16bits: never }} Float16BitsArray */\n\n/** @type {WeakMap<Float16Array, Float16BitsArray>} */\nconst float16bitsArrays = new NativeWeakMap();\n\n/**\n * @param {unknown} target\n * @returns {target is Float16Array}\n */\nexport function isFloat16Array(target) {\n  return WeakMapPrototypeHas(float16bitsArrays, target) ||\n    (!ArrayBufferIsView(target) && hasFloat16ArrayBrand(target));\n}\n\n/**\n * @param {unknown} target\n * @throws {TypeError}\n * @returns {asserts target is Float16Array}\n */\nfunction assertFloat16Array(target) {\n  if (!isFloat16Array(target)) {\n    throw NativeTypeError(THIS_IS_NOT_A_FLOAT16ARRAY_OBJECT);\n  }\n}\n\n/**\n * @param {unknown} target\n * @param {number=} count\n * @throws {TypeError}\n * @returns {asserts target is Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float16Array|Float32Array|Float64Array}\n */\nfunction assertSpeciesTypedArray(target, count) {\n  const isTargetFloat16Array = isFloat16Array(target);\n  const isTargetTypedArray = isNativeTypedArray(target);\n\n  if (!isTargetFloat16Array && !isTargetTypedArray) {\n    throw NativeTypeError(SPECIES_CONSTRUCTOR_DIDNT_RETURN_TYPEDARRAY_OBJECT);\n  }\n\n  if (typeof count === \"number\") {\n    let length;\n    if (isTargetFloat16Array) {\n      const float16bitsArray = getFloat16BitsArray(target);\n      length = TypedArrayPrototypeGetLength(float16bitsArray);\n    } else {\n      length = TypedArrayPrototypeGetLength(target);\n    }\n\n    if (length < count) {\n      throw NativeTypeError(\n        DERIVED_CONSTRUCTOR_CREATED_TYPEDARRAY_OBJECT_WHICH_WAS_TOO_SMALL_LENGTH\n      );\n    }\n  }\n\n  if (isNativeBigIntTypedArray(target)) {\n    throw NativeTypeError(CANNOT_MIX_BIGINT_AND_OTHER_TYPES);\n  }\n}\n\n/**\n * @param {Float16Array} float16\n * @throws {TypeError}\n * @returns {Float16BitsArray}\n */\nfunction getFloat16BitsArray(float16) {\n  const float16bitsArray = WeakMapPrototypeGet(float16bitsArrays, float16);\n  if (float16bitsArray !== undefined) {\n    const buffer = TypedArrayPrototypeGetBuffer(float16bitsArray);\n\n    if (IsDetachedBuffer(buffer)) {\n      throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n    }\n\n    return float16bitsArray;\n  }\n\n  // from another Float16Array instance (a different version?)\n  const buffer = /** @type {any} */ (float16).buffer;\n\n  if (IsDetachedBuffer(buffer)) {\n    throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n  }\n\n  const cloned = ReflectConstruct(Float16Array, [\n    buffer,\n    /** @type {any} */ (float16).byteOffset,\n    /** @type {any} */ (float16).length,\n  ], float16.constructor);\n  return WeakMapPrototypeGet(float16bitsArrays, cloned);\n}\n\n/**\n * @param {Float16BitsArray} float16bitsArray\n * @returns {number[]}\n */\nfunction copyToArray(float16bitsArray) {\n  const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n  const array = [];\n  for (let i = 0; i < length; ++i) {\n    array[i] = convertToNumber(float16bitsArray[i]);\n  }\n\n  return array;\n}\n\n/** @type {WeakSet<Function>} */\nconst TypedArrayPrototypeGetters = new NativeWeakSet();\nfor (const key of ReflectOwnKeys(TypedArrayPrototype)) {\n  // @@toStringTag getter property is defined in Float16Array.prototype\n  if (key === SymbolToStringTag) {\n    continue;\n  }\n\n  const descriptor = ReflectGetOwnPropertyDescriptor(TypedArrayPrototype, key);\n  if (ObjectHasOwn(descriptor, \"get\") && typeof descriptor.get === \"function\") {\n    WeakSetPrototypeAdd(TypedArrayPrototypeGetters, descriptor.get);\n  }\n}\n\nconst handler = ObjectFreeze(/** @type {ProxyHandler<Float16BitsArray>} */ ({\n  get(target, key, receiver) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      return convertToNumber(ReflectGet(target, key));\n    }\n\n    // %TypedArray%.prototype getter properties cannot called by Proxy receiver\n    if (WeakSetPrototypeHas(TypedArrayPrototypeGetters, ObjectPrototype__lookupGetter__(target, key))) {\n      return ReflectGet(target, key);\n    }\n\n    return ReflectGet(target, key, receiver);\n  },\n\n  set(target, key, value, receiver) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      return ReflectSet(target, key, roundToFloat16Bits(value));\n    }\n\n    return ReflectSet(target, key, value, receiver);\n  },\n\n  getOwnPropertyDescriptor(target, key) {\n    if (isCanonicalIntegerIndexString(key) && ObjectHasOwn(target, key)) {\n      const descriptor = ReflectGetOwnPropertyDescriptor(target, key);\n      descriptor.value = convertToNumber(descriptor.value);\n      return descriptor;\n    }\n\n    return ReflectGetOwnPropertyDescriptor(target, key);\n  },\n\n  defineProperty(target, key, descriptor) {\n    if (\n      isCanonicalIntegerIndexString(key) &&\n      ObjectHasOwn(target, key) &&\n      ObjectHasOwn(descriptor, \"value\")\n    ) {\n      descriptor.value = roundToFloat16Bits(descriptor.value);\n      return ReflectDefineProperty(target, key, descriptor);\n    }\n\n    return ReflectDefineProperty(target, key, descriptor);\n  },\n}));\n\nexport class Float16Array {\n  /** @see https://tc39.es/ecma262/#sec-typedarray */\n  constructor(input, _byteOffset, _length) {\n    /** @type {Float16BitsArray} */\n    let float16bitsArray;\n\n    if (isFloat16Array(input)) {\n      float16bitsArray = ReflectConstruct(NativeUint16Array, [getFloat16BitsArray(input)], new.target);\n    } else if (isObject(input) && !isAnyArrayBuffer(input)) { // object without ArrayBuffer, SharedArrayBuffer\n      /** @type {ArrayLike<unknown>} */\n      let list;\n      /** @type {number} */\n      let length;\n\n      if (isNativeTypedArray(input)) { // TypedArray\n        list = input;\n        length = TypedArrayPrototypeGetLength(input);\n\n        const buffer = TypedArrayPrototypeGetBuffer(input);\n\n        if (IsDetachedBuffer(buffer)) {\n          throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n        }\n\n        if (isNativeBigIntTypedArray(input)) {\n          throw NativeTypeError(CANNOT_MIX_BIGINT_AND_OTHER_TYPES);\n        }\n\n        const data = new NativeArrayBuffer(\n          length * BYTES_PER_ELEMENT\n        );\n        float16bitsArray = ReflectConstruct(NativeUint16Array, [data], new.target);\n      } else {\n        const iterator = input[SymbolIterator];\n        if (iterator != null && typeof iterator !== \"function\") {\n          throw NativeTypeError(ITERATOR_PROPERTY_IS_NOT_CALLABLE);\n        }\n\n        if (iterator != null) { // Iterable (Array)\n          // for optimization\n          if (isOrdinaryArray(input)) {\n            list = input;\n            length = input.length;\n          } else {\n            // eslint-disable-next-line no-restricted-syntax\n            list = [... /** @type {Iterable<unknown>} */ (input)];\n            length = list.length;\n          }\n        } else { // ArrayLike\n          list = /** @type {ArrayLike<unknown>} */ (input);\n          length = ToLength(list.length);\n        }\n        float16bitsArray = ReflectConstruct(NativeUint16Array, [length], new.target);\n      }\n\n      // set values\n      for (let i = 0; i < length; ++i) {\n        float16bitsArray[i] = roundToFloat16Bits(list[i]);\n      }\n    } else { // primitive, ArrayBuffer, SharedArrayBuffer\n      float16bitsArray = ReflectConstruct(NativeUint16Array, arguments, new.target);\n    }\n\n    /** @type {Float16Array} */\n    const proxy = /** @type {any} */ (new NativeProxy(float16bitsArray, handler));\n\n    // proxy private storage\n    WeakMapPrototypeSet(float16bitsArrays, proxy, float16bitsArray);\n\n    return proxy;\n  }\n\n  /**\n   * limitation: `Object.getOwnPropertyNames(Float16Array)` or `Reflect.ownKeys(Float16Array)` include this key\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.from\n   */\n  static from(src, ...opts) {\n    const Constructor = this;\n\n    if (!ReflectHas(Constructor, brand)) {\n      throw NativeTypeError(\n        THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY\n      );\n    }\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      if (isFloat16Array(src) && opts.length === 0) {\n        const float16bitsArray = getFloat16BitsArray(src);\n        const uint16 = new NativeUint16Array(\n          TypedArrayPrototypeGetBuffer(float16bitsArray),\n          TypedArrayPrototypeGetByteOffset(float16bitsArray),\n          TypedArrayPrototypeGetLength(float16bitsArray)\n        );\n        return new Float16Array(\n          TypedArrayPrototypeGetBuffer(TypedArrayPrototypeSlice(uint16))\n        );\n      }\n\n      if (opts.length === 0) {\n        return new Float16Array(\n          TypedArrayPrototypeGetBuffer(\n            Uint16ArrayFrom(src, roundToFloat16Bits)\n          )\n        );\n      }\n\n      const mapFunc = opts[0];\n      const thisArg = opts[1];\n\n      return new Float16Array(\n        TypedArrayPrototypeGetBuffer(\n          Uint16ArrayFrom(src, function (val, ...args) {\n            return roundToFloat16Bits(\n              ReflectApply(mapFunc, this, [val, ...safeIfNeeded(args)])\n            );\n          }, thisArg)\n        )\n      );\n    }\n\n    /** @type {ArrayLike<unknown>} */\n    let list;\n    /** @type {number} */\n    let length;\n\n    const iterator = src[SymbolIterator];\n    if (iterator != null && typeof iterator !== \"function\") {\n      throw NativeTypeError(ITERATOR_PROPERTY_IS_NOT_CALLABLE);\n    }\n\n    if (iterator != null) { // Iterable (TypedArray, Array)\n      // for optimization\n      if (isOrdinaryArray(src)) {\n        list = src;\n        length = src.length;\n      } else if (isOrdinaryNativeTypedArray(src)) {\n        list = src;\n        length = TypedArrayPrototypeGetLength(src);\n      } else {\n        // eslint-disable-next-line no-restricted-syntax\n        list = [...src];\n        length = list.length;\n      }\n    } else { // ArrayLike\n      if (src == null) {\n        throw NativeTypeError(\n          CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n        );\n      }\n      list = NativeObject(src);\n      length = ToLength(list.length);\n    }\n\n    const array = new Constructor(length);\n\n    if (opts.length === 0) {\n      for (let i = 0; i < length; ++i) {\n        array[i] = /** @type {number} */ (list[i]);\n      }\n    } else {\n      const mapFunc = opts[0];\n      const thisArg = opts[1];\n      for (let i = 0; i < length; ++i) {\n        array[i] = ReflectApply(mapFunc, thisArg, [list[i], i]);\n      }\n    }\n\n    return array;\n  }\n\n  /**\n   * limitation: `Object.getOwnPropertyNames(Float16Array)` or `Reflect.ownKeys(Float16Array)` include this key\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.of\n   */\n  static of(...items) {\n    const Constructor = this;\n\n    if (!ReflectHas(Constructor, brand)) {\n      throw NativeTypeError(\n        THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY\n      );\n    }\n\n    const length = items.length;\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const proxy = new Float16Array(length);\n      const float16bitsArray = getFloat16BitsArray(proxy);\n\n      for (let i = 0; i < length; ++i) {\n        float16bitsArray[i] = roundToFloat16Bits(items[i]);\n      }\n\n      return proxy;\n    }\n\n    const array = new Constructor(length);\n\n    for (let i = 0; i < length; ++i) {\n      array[i] = items[i];\n    }\n\n    return array;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys */\n  keys() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return TypedArrayPrototypeKeys(float16bitsArray);\n  }\n\n  /**\n   * limitation: returns a object whose prototype is not `%ArrayIteratorPrototype%`\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.values\n   */\n  values() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return wrap((function* () {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const val of TypedArrayPrototypeValues(float16bitsArray)) {\n        yield convertToNumber(val);\n      }\n    })());\n  }\n\n  /**\n   * limitation: returns a object whose prototype is not `%ArrayIteratorPrototype%`\n   * @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries\n   */\n  entries() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    return wrap((function* () {\n      // eslint-disable-next-line no-restricted-syntax\n      for (const [i, val] of TypedArrayPrototypeEntries(float16bitsArray)) {\n        yield /** @type {[number, number]} */ ([i, convertToNumber(val)]);\n      }\n    })());\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.at */\n  at(index) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeIndex = ToIntegerOrInfinity(index);\n    const k = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n\n    if (k < 0 || k >= length) {\n      return;\n    }\n\n    return convertToNumber(float16bitsArray[k]);\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with */\n  with(index, value) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeIndex = ToIntegerOrInfinity(index);\n    const k = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n\n    const number = +value;\n\n    if (k < 0 || k >= length) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n    const array = getFloat16BitsArray(cloned);\n\n    array[k] = roundToFloat16Bits(number);\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.map */\n  map(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const proxy = new Float16Array(length);\n      const array = getFloat16BitsArray(proxy);\n\n      for (let i = 0; i < length; ++i) {\n        const val = convertToNumber(float16bitsArray[i]);\n        array[i] = roundToFloat16Bits(\n          ReflectApply(callback, thisArg, [val, i, this])\n        );\n      }\n\n      return proxy;\n    }\n\n    const array = new Constructor(length);\n    assertSpeciesTypedArray(array, length);\n\n    for (let i = 0; i < length; ++i) {\n      const val = convertToNumber(float16bitsArray[i]);\n      array[i] = ReflectApply(callback, thisArg, [val, i, this]);\n    }\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter */\n  filter(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    const kept = [];\n    for (let i = 0; i < length; ++i) {\n      const val = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [val, i, this])) {\n        ArrayPrototypePush(kept, val);\n      }\n    }\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n    const array = new Constructor(kept);\n    assertSpeciesTypedArray(array);\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce */\n  reduce(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    if (length === 0 && opts.length === 0) {\n      throw NativeTypeError(REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE);\n    }\n\n    let accumulator, start;\n    if (opts.length === 0) {\n      accumulator = convertToNumber(float16bitsArray[0]);\n      start = 1;\n    } else {\n      accumulator = opts[0];\n      start = 0;\n    }\n\n    for (let i = start; i < length; ++i) {\n      accumulator = callback(\n        accumulator,\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this\n      );\n    }\n\n    return accumulator;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright */\n  reduceRight(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    if (length === 0 && opts.length === 0) {\n      throw NativeTypeError(REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE);\n    }\n\n    let accumulator, start;\n    if (opts.length === 0) {\n      accumulator = convertToNumber(float16bitsArray[length - 1]);\n      start = length - 2;\n    } else {\n      accumulator = opts[0];\n      start = length - 1;\n    }\n\n    for (let i = start; i >= 0; --i) {\n      accumulator = callback(\n        accumulator,\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this\n      );\n    }\n\n    return accumulator;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach */\n  forEach(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      ReflectApply(callback, thisArg, [\n        convertToNumber(float16bitsArray[i]),\n        i,\n        this,\n      ]);\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.find */\n  find(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return value;\n      }\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex */\n  findIndex(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/proposal-array-find-from-last/index.html#sec-%typedarray%.prototype.findlast */\n  findLast(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = length - 1; i >= 0; --i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return value;\n      }\n    }\n  }\n\n  /** @see https://tc39.es/proposal-array-find-from-last/index.html#sec-%typedarray%.prototype.findlastindex */\n  findLastIndex(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = length - 1; i >= 0; --i) {\n      const value = convertToNumber(float16bitsArray[i]);\n      if (ReflectApply(callback, thisArg, [value, i, this])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.every */\n  every(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      if (\n        !ReflectApply(callback, thisArg, [\n          convertToNumber(float16bitsArray[i]),\n          i,\n          this,\n        ])\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.some */\n  some(callback, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const thisArg = opts[0];\n\n    for (let i = 0; i < length; ++i) {\n      if (\n        ReflectApply(callback, thisArg, [\n          convertToNumber(float16bitsArray[i]),\n          i,\n          this,\n        ])\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.set */\n  set(input, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const targetOffset = ToIntegerOrInfinity(opts[0]);\n    if (targetOffset < 0) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    if (input == null) {\n      throw NativeTypeError(\n        CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT\n      );\n    }\n\n    if (isNativeBigIntTypedArray(input)) {\n      throw NativeTypeError(\n        CANNOT_MIX_BIGINT_AND_OTHER_TYPES\n      );\n    }\n\n    // for optimization\n    if (isFloat16Array(input)) {\n      // peel off Proxy\n      return TypedArrayPrototypeSet(\n        getFloat16BitsArray(this),\n        getFloat16BitsArray(input),\n        targetOffset\n      );\n    }\n\n    if (isNativeTypedArray(input)) {\n      const buffer = TypedArrayPrototypeGetBuffer(input);\n      if (IsDetachedBuffer(buffer)) {\n        throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n      }\n    }\n\n    const targetLength = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    const src = NativeObject(input);\n    const srcLength = ToLength(src.length);\n\n    if (targetOffset === Infinity || srcLength + targetOffset > targetLength) {\n      throw NativeRangeError(OFFSET_IS_OUT_OF_BOUNDS);\n    }\n\n    for (let i = 0; i < srcLength; ++i) {\n      float16bitsArray[i + targetOffset] = roundToFloat16Bits(src[i]);\n    }\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse */\n  reverse() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeReverse(float16bitsArray);\n\n    return this;\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed */\n  toReversed() {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n\n    const clonedFloat16bitsArray = getFloat16BitsArray(cloned);\n    TypedArrayPrototypeReverse(clonedFloat16bitsArray);\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill */\n  fill(value, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeFill(\n      float16bitsArray,\n      roundToFloat16Bits(value),\n      ...safeIfNeeded(opts)\n    );\n\n    return this;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin */\n  copyWithin(target, start, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    TypedArrayPrototypeCopyWithin(float16bitsArray, target, start, ...safeIfNeeded(opts));\n\n    return this;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort */\n  sort(compareFn) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const sortCompare = compareFn !== undefined ? compareFn : defaultCompare;\n    TypedArrayPrototypeSort(float16bitsArray, (x, y) => {\n      return sortCompare(convertToNumber(x), convertToNumber(y));\n    });\n\n    return this;\n  }\n\n  /** @see https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toSorted */\n  toSorted(compareFn) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    if (compareFn !== undefined && typeof compareFn !== \"function\") {\n      throw new NativeTypeError(THE_COMPARISON_FUNCTION_MUST_BE_EITHER_A_FUNCTION_OR_UNDEFINED);\n    }\n    const sortCompare = compareFn !== undefined ? compareFn : defaultCompare;\n\n    // don't use SpeciesConstructor\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const cloned = new Float16Array(\n      TypedArrayPrototypeGetBuffer(\n        TypedArrayPrototypeSlice(uint16)\n      )\n    );\n\n    const clonedFloat16bitsArray = getFloat16BitsArray(cloned);\n    TypedArrayPrototypeSort(clonedFloat16bitsArray, (x, y) => {\n      return sortCompare(convertToNumber(x), convertToNumber(y));\n    });\n\n    return cloned;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice */\n  slice(start, end) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    // for optimization\n    if (Constructor === Float16Array) {\n      const uint16 = new NativeUint16Array(\n        TypedArrayPrototypeGetBuffer(float16bitsArray),\n        TypedArrayPrototypeGetByteOffset(float16bitsArray),\n        TypedArrayPrototypeGetLength(float16bitsArray)\n      );\n      return new Float16Array(\n        TypedArrayPrototypeGetBuffer(\n          TypedArrayPrototypeSlice(uint16, start, end)\n        )\n      );\n    }\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n    const relativeStart = ToIntegerOrInfinity(start);\n    const relativeEnd = end === undefined ? length : ToIntegerOrInfinity(end);\n\n    let k;\n    if (relativeStart === -Infinity) {\n      k = 0;\n    } else if (relativeStart < 0) {\n      k = length + relativeStart > 0 ? length + relativeStart : 0;\n    } else {\n      k = length < relativeStart ? length : relativeStart;\n    }\n\n    let final;\n    if (relativeEnd === -Infinity) {\n      final = 0;\n    } else if (relativeEnd < 0) {\n      final = length + relativeEnd > 0 ? length + relativeEnd : 0;\n    } else {\n      final = length < relativeEnd ? length : relativeEnd;\n    }\n\n    const count = final - k > 0 ? final - k : 0;\n    const array = new Constructor(count);\n    assertSpeciesTypedArray(array, count);\n\n    if (count === 0) {\n      return array;\n    }\n\n    const buffer = TypedArrayPrototypeGetBuffer(float16bitsArray);\n    if (IsDetachedBuffer(buffer)) {\n      throw NativeTypeError(ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER);\n    }\n\n    let n = 0;\n    while (k < final) {\n      array[n] = convertToNumber(float16bitsArray[k]);\n      ++k;\n      ++n;\n    }\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray */\n  subarray(begin, end) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const Constructor = SpeciesConstructor(float16bitsArray, Float16Array);\n\n    const uint16 = new NativeUint16Array(\n      TypedArrayPrototypeGetBuffer(float16bitsArray),\n      TypedArrayPrototypeGetByteOffset(float16bitsArray),\n      TypedArrayPrototypeGetLength(float16bitsArray)\n    );\n    const uint16Subarray = TypedArrayPrototypeSubarray(uint16, begin, end);\n\n    const array = new Constructor(\n      TypedArrayPrototypeGetBuffer(uint16Subarray),\n      TypedArrayPrototypeGetByteOffset(uint16Subarray),\n      TypedArrayPrototypeGetLength(uint16Subarray)\n    );\n    assertSpeciesTypedArray(array);\n\n    return /** @type {any} */ (array);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof */\n  indexOf(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = ToIntegerOrInfinity(opts[0]);\n    if (from === Infinity) {\n      return -1;\n    }\n\n    if (from < 0) {\n      from += length;\n      if (from < 0) {\n        from = 0;\n      }\n    }\n\n    for (let i = from; i < length; ++i) {\n      if (\n        ObjectHasOwn(float16bitsArray, i) &&\n        convertToNumber(float16bitsArray[i]) === element\n      ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof */\n  lastIndexOf(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = opts.length >= 1 ? ToIntegerOrInfinity(opts[0]) : length - 1;\n    if (from === -Infinity) {\n      return -1;\n    }\n\n    if (from >= 0) {\n      from = from < length - 1 ? from : length - 1;\n    } else {\n      from += length;\n    }\n\n    for (let i = from; i >= 0; --i) {\n      if (\n        ObjectHasOwn(float16bitsArray, i) &&\n        convertToNumber(float16bitsArray[i]) === element\n      ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes */\n  includes(element, ...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const length = TypedArrayPrototypeGetLength(float16bitsArray);\n\n    let from = ToIntegerOrInfinity(opts[0]);\n    if (from === Infinity) {\n      return false;\n    }\n\n    if (from < 0) {\n      from += length;\n      if (from < 0) {\n        from = 0;\n      }\n    }\n\n    const isNaN = NumberIsNaN(element);\n    for (let i = from; i < length; ++i) {\n      const value = convertToNumber(float16bitsArray[i]);\n\n      if (isNaN && NumberIsNaN(value)) {\n        return true;\n      }\n\n      if (value === element) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.join */\n  join(separator) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const array = copyToArray(float16bitsArray);\n\n    return ArrayPrototypeJoin(array, separator);\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring */\n  toLocaleString(...opts) {\n    assertFloat16Array(this);\n    const float16bitsArray = getFloat16BitsArray(this);\n\n    const array = copyToArray(float16bitsArray);\n\n    return ArrayPrototypeToLocaleString(array, ...safeIfNeeded(opts));\n  }\n\n  /** @see https://tc39.es/ecma262/#sec-get-%typedarray%.prototype-@@tostringtag */\n  get [SymbolToStringTag]() {\n    if (isFloat16Array(this)) {\n      return /** @type {any} */ (\"Float16Array\");\n    }\n  }\n}\n\n/** @see https://tc39.es/ecma262/#sec-typedarray.bytes_per_element */\nObjectDefineProperty(Float16Array, \"BYTES_PER_ELEMENT\", {\n  value: BYTES_PER_ELEMENT,\n});\n\n// limitation: It is peaked by `Object.getOwnPropertySymbols(Float16Array)` and `Reflect.ownKeys(Float16Array)`\nObjectDefineProperty(Float16Array, brand, {});\n\n/** @see https://tc39.es/ecma262/#sec-properties-of-the-typedarray-constructors */\nReflectSetPrototypeOf(Float16Array, TypedArray);\n\nconst Float16ArrayPrototype = Float16Array.prototype;\n\n/** @see https://tc39.es/ecma262/#sec-typedarray.prototype.bytes_per_element */\nObjectDefineProperty(Float16ArrayPrototype, \"BYTES_PER_ELEMENT\", {\n  value: BYTES_PER_ELEMENT,\n});\n\n/** @see https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator */\nObjectDefineProperty(Float16ArrayPrototype, SymbolIterator, {\n  value: Float16ArrayPrototype.values,\n  writable: true,\n  configurable: true,\n});\n\nReflectSetPrototypeOf(Float16ArrayPrototype, TypedArrayPrototype);\n","\nconst hex2rgba = (hexstr: string, out_type?: string) : [number, number, number, number] => {\n    out_type = out_type === undefined ? 'float' : out_type;\n\n    const match = hexstr.match(/#([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?/i);\n    if (match === null) {\n        throw `Got '${hexstr}' in hex2rgba, which does not look like a hex color`;\n    }\n\n    let rgba = match.slice(1).filter(c => c !== undefined).map(c => parseInt(c, 16));\n\n    if (out_type == 'float') {\n        rgba = rgba.map(c => c / 255);\n    }\n\n    return rgba[3] === undefined ? [rgba[0], rgba[1], rgba[2], 1] : [rgba[0], rgba[1], rgba[2], rgba[3]];\n}\n\nconst rgba2hex = (rgba: [number, number, number, number], in_type?: string) : string => {\n    in_type = in_type === undefined ? 'float' : in_type;\n\n    let rgba_ = rgba as number[];\n    if (in_type == 'float') {\n        rgba_ = rgba_.map(c => Math.round(c * 255));\n    }\n\n    return '#' + rgba_.map(c => c.toString(16).padStart(2, '0').toUpperCase()).join('');\n}\n\nconst rgb2hsv = (rgb: [number, number, number]) : [number, number, number] => {\n    const [r, g, b] = rgb;\n\n    const Cmax = Math.max(r, g, b);\n    const Cmin = Math.min(r, g, b);\n    const Delta = Cmax - Cmin;\n    \n    let H: number;\n    if (Delta == 0) {\n        H = 0;\n    }\n    else if (Cmax == r) {\n        H = 60 * ((g - b) / Delta) % 6;\n    }\n    else if (Cmax == g) {\n        H = 60 * ((b - r) / Delta + 2);\n    }\n    else if (Cmax == b) {\n        H = 60 * ((r - g) / Delta + 4);\n    }\n    else {\n        throw \"You've messed something up in rgb2hsv()\";\n    }\n\n    let S = Cmax == 0 ? 0 : Delta / Cmax;\n    let V = Cmax;\n\n    return [H, S, V];\n}\n\nconst hsv2rgb = (hsv: [number, number, number]) : [number, number, number] => {\n    const [H, S, V] = hsv;\n\n    const C = V * S;\n    const X = C * (1 - Math.abs(H / 60 % 2 - 1));\n    const m = V - C;\n\n    let r_prime, g_prime, b_prime;\n    if (0 <= H && H < 60) {\n        r_prime = C; g_prime = X, b_prime = 0;\n    }\n    else if (60 <= H && H < 120) {\n        r_prime = X; g_prime = C, b_prime = 0;\n    }\n    else if (120 <= H && H < 180) {\n        r_prime = 0; g_prime = C, b_prime = X;\n    }\n    else if (180 <= H && H < 240) {\n        r_prime = 0; g_prime = X, b_prime = C;\n    }\n    else if (240 <= H && H < 300) {\n        r_prime = X; g_prime = 0, b_prime = C;\n    }\n    else if (300 <= H && H < 360) {\n        r_prime = C; g_prime = 0, b_prime = X;\n    }\n    else {\n        throw \"H is out of bounds in hsv2rgb\";\n    }\n\n    return [r_prime + m, g_prime + m, b_prime + m];\n}\n\nclass Color {\n    private rgba: [number, number, number, number];\n\n    /**\n     * Create a new color object\n     * @param rgba - An RGBA tuple of floats between 0 and 1\n     */\n    constructor(rgba: [number, number, number, number]) {\n        this.rgba = rgba;\n    }\n\n    /**\n     * The red component of the color as a float value between 0 and 1\n     */\n    get r() {\n        return this.rgba[0];\n    }\n\n    /**\n     * The green component of the color as a float value between 0 and 1\n     */\n    get g() {\n        return this.rgba[1];\n    }\n\n    /**\n     * The blue component of the color as a float value between 0 and 1\n     */\n    get b() {\n        return this.rgba[2];\n    }\n\n    /**\n     * The alpha component (opacity) of the color as a float value between 0 and 1\n     */\n    get a() {\n        return this.rgba[3];\n    }\n\n    /**\n     * @param opacity - The new alpha component (opacity)\n     * @returns A new color with the alpha component set to opacity.\n     */\n    withOpacity(opacity: number) {\n        return new Color([this.r, this.g, this.b, opacity]);\n    }\n\n    /**\n     * @returns The color as an RGB hex string (e.g., '#dedbef')\n     */\n    toRGBHex() {\n        return this.toRGBAHex().slice(0, -2);\n    }\n\n    /**\n     * @returns The color as an RGBA hex string (e.g., '#dedbefff')\n     */\n    toRGBAHex() {\n        return rgba2hex(this.rgba);\n    }\n\n    /**\n     * @returns The color as an RGBA float tuple\n     */\n    toRGBATuple() {\n        return this.rgba;\n    }\n\n    /**\n     * @returns The color as a tuple of HSV values\n     */\n    toHSVTuple() {\n        return rgb2hsv([this.r, this.g, this.b]);\n    }\n\n    /**\n     * @param hex - An RGB or RGBA hex string to parse\n     * @returns a new Color object\n     */\n    static fromHex(hex: string) {\n        return new Color(hex2rgba(hex));\n    }\n\n    /**\n     * @param hsv - A tuple of HSV values\n     * @returns a new Color object\n     */\n    static fromHSVTuple(hsv: [number, number, number]) {\n        const rgb = hsv2rgb(hsv);\n        return new Color([rgb[0], rgb[1], rgb[2], 1]);\n    }\n}\n\nexport {Color};","\nimport spd500_colormap_data from \"./json/pw500speed_colormap.json\";\nimport spd850_colormap_data from \"./json/pw850speed_colormap.json\";\nimport cape_colormap_data from \"./json/pwcape_colormap.json\";\nimport t2m_colormap_data from \"./json/pwt2m_colormap.json\";\nimport td2m_colormap_data from \"./json/pwtd2m_colormap.json\";\nimport nws_storm_clear_refl_colormap_data from \"./json/nws_storm_clear_refl_colormap.json\";\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { WGLProgram, WGLTexture } from \"autumn-wgl\";\nimport { WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { getGLFormatTypeAlignment } from \"./PlotComponent\";\nimport { Color } from \"./Color\";\n\nconst colormap_shader_src = require('./glsl/colormap.glsl');\n\ninterface ColorMapOptions {\n    /** The color to use for areas where the value is above the highest value in the color map */\n    overflow_color?: Color | string;\n\n    /** The color to use for areas where the value is below the lowest value in the color map */\n    underflow_color?: Color | string;\n}\n\n/** A mapping from values to colors */\nclass ColorMap {\n    public readonly levels: number[];\n    public readonly colors: Color[];\n    public readonly overflow_color: Color | null;\n    public readonly underflow_color: Color | null;\n\n    /**\n     * Create a color map\n     * @param levels - The list of levels. The number of levels should always be one more than the number of colors.\n     * @param colors - A list of colors\n     * @param opts   - Options for the color map\n     */\n    constructor(levels: number[], colors: Color[] | string[], opts?: ColorMapOptions) {\n        if (levels.length != colors.length + 1) {\n            throw `Mismatch between number of levels (${levels.length}) and number of colors (${colors.length}; expected ${levels.length - 1})`;\n        }\n\n        const normalizeColor = (c: Color | string) => c instanceof Color ? c : Color.fromHex(c);\n\n        this.levels = levels;\n        this.colors = colors.map(c => normalizeColor(c));\n\n        opts = opts === undefined ? {} : opts;\n        this.overflow_color = opts.overflow_color === undefined ? null : normalizeColor(opts.overflow_color);\n        this.underflow_color = opts.underflow_color === undefined ? null : normalizeColor(opts.underflow_color);\n    }\n\n    /**\n     * @returns an array of hex color strings\n     */\n    public getColors() : string[] {\n        return this.colors.map(s => s.toRGBHex());\n    }\n\n    /**\n     * @returns an array of opacities, one for each color in the color map\n     */\n    public getOpacities() : number[] {\n        return this.colors.map(s => s.a);\n    }\n\n    /**\n     * Make a new color map with different opacities. The opacities are set by func.\n     * @param func - A function which takes the two levels associated with a color (an upper and lower bound) and returns an opacity in the range from 0 to 1.\n     * @returns A new color map\n     */\n    public withOpacity(func: (level_lower: number, level_upper: number) => number) {\n        const new_colors: Color[] = [];\n        const new_levels: number[] = [];\n        const opts: ColorMapOptions = {};\n\n        for (let ic = 0 ; ic < this.colors.length ; ic++) {\n            const color = this.colors[ic];\n            const level_lower = this.levels[ic];\n            const level_upper = this.levels[ic + 1];\n\n            const new_opacity = func(level_lower, level_upper)\n            const new_color = color.withOpacity(new_opacity);\n            if (new_opacity > 0) {\n                if (new_levels[new_levels.length - 1] != level_lower)\n                    new_levels.push(level_lower)\n                new_levels.push(level_upper);\n                new_colors.push(new_color);\n            }\n        }\n\n        if (this.underflow_color !== null) {\n            const underflow_opacity = func(this.levels[0], this.levels[0]);\n            if (underflow_opacity > 0) {\n                opts.underflow_color = this.underflow_color.withOpacity(underflow_opacity);\n            }\n        }\n\n        if (this.overflow_color !== null) {\n            const overflow_opacity = func(this.levels[this.levels.length - 1], this.levels[this.levels.length - 1]);\n            if (overflow_opacity > 0) {\n                opts.overflow_color = this.overflow_color.withOpacity(overflow_opacity);\n            }\n        }\n        \n        return new ColorMap(new_levels, new_colors, opts);\n    }\n\n    /**\n     * Create a diverging color map using two input colors\n     * @param color1    - The color corresponding to the lowest value in the color map\n     * @param color2    - The color corresponding to the highest value in the color map\n     * @param level_min - The lowest value in the color map\n     * @param level_max - The highest value in the color map\n     * @param n_colors  - The number of colors to use\n     * @returns a Colormap object\n     */\n    public static diverging(color1: string, color2: string, level_min: number, level_max: number, n_colors: number) {\n        const stops: Color[] = [];\n        const levels: number[] = [];\n\n        const level_step = (level_max - level_min) / (n_colors - 1);\n        const crossover = (level_max + level_min) / 2;\n        const crossover_hsv: [number, number, number] = [0, 0, 0.9];\n\n        const color1_hsv = Color.fromHex(color1).toHSVTuple();\n        const color2_hsv = Color.fromHex(color2).toHSVTuple();\n        const interp_fac_power = 1.5;\n\n        for (let istop = 0; istop < n_colors; istop++) {\n            const level = level_min + istop * level_step;\n            let h, s, v;\n            let interp_fac;\n            if (level < crossover) {\n                interp_fac = Math.pow((crossover - level) / (crossover - level_min), interp_fac_power);\n\n                [h, s, v] = [\n                    color1_hsv[0], \n                    crossover_hsv[1] + (color1_hsv[1] - crossover_hsv[1]) * interp_fac,\n                    crossover_hsv[2] + (color1_hsv[2] - crossover_hsv[2]) * interp_fac]\n            }\n            else {\n                interp_fac = Math.pow((level - crossover) / (level_max - crossover), interp_fac_power);\n                \n                [h, s, v] = [\n                    color2_hsv[0], \n                    crossover_hsv[1] + (color2_hsv[1] - crossover_hsv[1]) * interp_fac,\n                    crossover_hsv[2] + (color2_hsv[2] - crossover_hsv[2]) * interp_fac]\n            }\n\n            stops.push(Color.fromHSVTuple([h, s, v]).withOpacity(Math.min(2 * interp_fac, 1)));\n        }\n\n        for (let ilev = 0; ilev <= n_colors; ilev++) {\n            const level_step = (level_max - level_min) / n_colors;\n            levels.push(level_min + ilev * level_step);\n        }\n\n        return new ColorMap(levels, stops);\n    }\n}\n\nfunction buildColormap(cm_data: {levels: number[], colors: string[]}, overflow: 'under' | 'over' | 'both' | 'neither') {\n    const n_colors = cm_data.colors.length;\n    const opts: ColorMapOptions = {};\n\n    if (overflow == 'over' || overflow == 'both') {\n        opts.overflow_color = cm_data.colors[n_colors - 1];\n    }\n    if (overflow == 'under' || overflow == 'both') {\n        opts.underflow_color = cm_data.colors[0];\n    }\n\n    return new ColorMap(cm_data.levels, cm_data.colors, opts);\n}\n\n// Some built-in colormaps\nconst pw_speed500mb = buildColormap(spd500_colormap_data, 'over').withOpacity((levl, levu) => Math.min((levu - 20) / 10, 1.));\nconst pw_speed850mb = buildColormap(spd850_colormap_data, 'over').withOpacity((levl, levu) => Math.min((levu - 20) / 10, 1.));\nconst pw_cape = buildColormap(cape_colormap_data, 'over').withOpacity((levl, levu) => Math.min(levu / 1000., 1.));\nconst pw_t2m = buildColormap(t2m_colormap_data, 'both');\nconst pw_td2m = buildColormap(td2m_colormap_data, 'both');\nconst nws_storm_clear_refl = buildColormap(nws_storm_clear_refl_colormap_data, 'over');\n\n/**\n * Create a diverging red/blue colormap, where red corresponds to the lowest value and blue corresponds to the highest value\n * @param level_min - The lowest value in the color map\n * @param level_max - The highest value in the color map\n * @param n_colors  - The number of colors\n * @returns a Colormap object\n */\nconst redblue = (level_min: number, level_max: number, n_colors: number) => {\n    return ColorMap.diverging('#ff0000', '#0000ff', level_min, level_max, n_colors);\n}\n\n/**\n * Create a diverging blue/red colormap, where blue corresponds to the lowest value and red corresponds to the highest value\n * @param level_min - The lowest value in the color map\n * @param level_max - The highest value in the color map\n * @param n_colors  - The number of colors\n * @returns a Colormap object\n */\nconst bluered = (level_min: number, level_max: number, n_colors: number) => {\n    return ColorMap.diverging('#0000ff', '#ff0000', level_min, level_max, n_colors);\n}\n\n\ninterface ColorMapGLElems {\n    cmap_texture: WGLTexture;\n    cmap_nonlin_texture: WGLTexture;\n}\n\nconst N_INDEX_MAP = 101;\n\nclass ColorMapGPUInterface {\n    public readonly colormap: ColorMap;\n    public gl_elems: ColorMapGLElems | null;\n\n    constructor(colormap: ColorMap) {\n        this.colormap = colormap;\n        this.gl_elems = null;\n    }\n\n    public static applyShader(shader_src: string) {\n        return colormap_shader_src + \"\\n\" + shader_src;\n    }\n\n    public setupShaderVariables(gl: WebGLAnyRenderingContext, mag_filter: number) {\n        const index_map = makeIndexMap(this.colormap);\n        const cmap_image = makeTextureImage(this.colormap);\n\n        const {format: format_nonlin, type: type_nonlin, row_alignment: row_alignment_nonlin} = getGLFormatTypeAlignment(gl, true);\n\n        const cmap_image_spec = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'image': cmap_image, 'mag_filter': mag_filter};\n        const cmap_texture = new WGLTexture(gl, cmap_image_spec);\n\n        const cmap_nonlin_image = {'format': format_nonlin, 'type': type_nonlin, \n            'width': index_map.length, 'height': 1,\n            'image': new Uint16Array(index_map.buffer), \n            'mag_filter': gl.LINEAR, 'row_alignment': row_alignment_nonlin,\n        };\n\n        const cmap_nonlin_texture = new WGLTexture(gl, cmap_nonlin_image);\n        this.gl_elems = {cmap_texture: cmap_texture, cmap_nonlin_texture: cmap_nonlin_texture};\n    }\n\n    public bindShaderVariables(program: WGLProgram) {\n        if (this.gl_elems === null) return;\n\n        const cmap = this.colormap;\n        const underflow_color = cmap.underflow_color === null ? [0, 0, 0, 0] : cmap.underflow_color.toRGBATuple();\n        const overflow_color = cmap.overflow_color === null ? [0, 0, 0, 0] : cmap.overflow_color.toRGBATuple();\n\n        program.setUniforms({'u_cmap_min': cmap.levels[0], 'u_cmap_max': cmap.levels[cmap.levels.length - 1],\n                             'u_n_index': N_INDEX_MAP, 'u_underflow_color': underflow_color, 'u_overflow_color': overflow_color});\n        program.bindTextures({'u_cmap_sampler': this.gl_elems.cmap_texture, 'u_cmap_nonlin_sampler': this.gl_elems.cmap_nonlin_texture});\n    }\n}\n\n/**\n * Make a canvas image corresponding to a color map\n * @param colormap - The color map to use\n * @returns A canvas element containing each color of the color map\n */\nfunction makeTextureImage(colormap: ColorMap) {\n    const cmap_image = document.createElement('canvas');\n    cmap_image.width = colormap.colors.length;\n    cmap_image.height = 1;\n\n    let ctx = cmap_image.getContext('2d');\n\n    colormap.colors.forEach((stop, istop) => {\n        if (ctx === null) {\n            throw \"Could not get rendering context for colormap image canvas\";\n        }\n\n        ctx.fillStyle = stop.toRGBAHex();\n        ctx.fillRect(istop, 0, 1, 1);\n    });\n\n    return cmap_image;\n}\n\nfunction makeIndexMap(colormap: ColorMap) {\n    // Build a texture to account for nonlinear colormaps (basically inverts the relationship between\n    //  the normalized index and the normalized level)\n    const n_nonlin = N_INDEX_MAP;\n    const map_norm = [];\n    for (let i = 0; i < n_nonlin; i++) {\n        map_norm.push(i / (n_nonlin - 1));\n    }\n\n    const levels = colormap.levels;\n    const n_lev = levels.length - 1;\n\n    const input_norm = levels.map((lev, ilev) => ilev / n_lev);\n    const cmap_norm = levels.map(lev => (lev - levels[0]) / (levels[n_lev] - levels[0]));\n    const inv_cmap_norm = map_norm.map(lev => {\n        let jlev;\n        for (jlev = 0; !(cmap_norm[jlev] <= lev && lev <= cmap_norm[jlev + 1]); jlev++) {}\n\n        const alpha = (lev - cmap_norm[jlev]) / (cmap_norm[jlev + 1] - cmap_norm[jlev]);\n        return input_norm[jlev] * (1 - alpha) + input_norm[jlev + 1] * alpha;\n    });\n\n    return new Float16Array(inv_cmap_norm);\n}\n\nexport {ColorMap, ColorMapGPUInterface, bluered, redblue, pw_speed500mb, pw_speed850mb, pw_cape, pw_t2m, pw_td2m, nws_storm_clear_refl}\nexport type {ColorMapOptions};","\nimport { WGLBuffer, WGLProgram, WGLTexture } from \"autumn-wgl\";\nimport { Polyline, LineData, WebGLAnyRenderingContext, isWebGL2Ctx } from \"./AutumnTypes\";\nimport { ColorMap, ColorMapGPUInterface } from \"./Colormap\";\nimport { Color } from \"./Color\";\nimport { layer_worker } from \"./PlotComponent\";\n\nconst polyline_vertex_src = require('./glsl/polyline_vertex.glsl');\nconst polyline_fragment_src = require('./glsl/polyline_fragment.glsl');\n\n/**\n * A style to use to draw lines. The possible options are '-' for a solid line, '--' for a dashed line, ':' for a\n *  dotted line, '-.' for a dash-dot line, or you could pass a list of numbers (e.g., [1, 1, 1, 0, 1, 0]) to\n *  specify a custom dash scheme.\n */\ntype LineStyle = \"-\" | \"--\" | \":\" | \"-.\" | number[];\n\nconst dash_arrays: Record<Exclude<LineStyle, number[]>, number[]> = {\n    \"-\": [1],\n    \"--\": [1, 1, 1, 1, 0, 0],\n    \":\": [1, 0],\n    \"-.\": [1, 1, 1, 0, 1, 0],\n}\n\nfunction isLineStyle(obj: any) : obj is LineStyle {\n    return obj in dash_arrays || Array.isArray(obj) && obj.length > 0 && obj.map(e => typeof e === 'number').reduce((a, b) => a && b, true);\n}\n\ninterface PolylineCollectionOpts {\n    offset_scale?: number;\n    color?: string;\n    cmap?: ColorMap;\n    line_width?: number;\n    line_style?: LineStyle | number[];\n}\n\nfunction makeDashTexture(gl: WebGLAnyRenderingContext, line_style: LineStyle) {\n\n    const dash_array = Array.isArray(line_style) ? line_style : dash_arrays[line_style];\n\n    const is_webgl2 = isWebGL2Ctx(gl);\n    const format = is_webgl2 ? gl.R8 : gl.LUMINANCE;\n    const type = gl.UNSIGNED_BYTE;\n    const row_alignment = 1;\n\n    const fill_image = {'format': format, 'type': type,\n        'width': dash_array.length, 'height': 1, 'image': new Uint8Array(dash_array.map(d => d > 0 ? 255 : 0)),\n        'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n    };\n\n    return [dash_array.length, new WGLTexture(gl, fill_image)] as [number, WGLTexture];\n}\n\nclass PolylineCollection {\n    public readonly width: number;\n    public readonly scale: number | null;\n\n    private readonly program: WGLProgram;\n\n    private readonly vertices: WGLBuffer;\n    private readonly extrusion: WGLBuffer;\n\n    private readonly offset: WGLBuffer | null;\n    private readonly min_zoom: WGLBuffer | null;\n    private readonly line_data: WGLBuffer | null;\n    private readonly color: Color;\n    private readonly cmap_gpu: ColorMapGPUInterface | null;\n    private readonly dash_texture: WGLTexture;\n    private readonly n_dash: number;\n\n    private constructor(gl: WebGLAnyRenderingContext, polyline: Polyline, opts?: PolylineCollectionOpts) {\n        opts = opts === undefined ? {} : opts;\n        const color_hex = opts.color === undefined ? '#000000' : opts.color;\n        this.color = Color.fromHex(color_hex);\n\n        const line_width = opts.line_width === undefined ? 1 : opts.line_width;\n        const line_style = opts.line_style === undefined ? '-' : opts.line_style;\n\n        this.width = line_width;\n\n        const shader_defines = [];\n\n        this.vertices = new WGLBuffer(gl, polyline['vertices'], 3, gl.TRIANGLE_STRIP);\n        this.extrusion = new WGLBuffer(gl, polyline['extrusion'], 2, gl.TRIANGLE_STRIP);\n\n        if (polyline.offsets !== undefined) {\n            this.offset = new WGLBuffer(gl, polyline.offsets, 2, gl.TRIANGLE_STRIP);\n            this.scale = opts.offset_scale === undefined ? 1 : opts.offset_scale;\n            shader_defines.push('OFFSET');\n        }\n        else {\n            this.offset = null;\n            this.scale = null;\n        }\n\n        if (polyline.zoom !== undefined) {\n            this.min_zoom = new WGLBuffer(gl, polyline.zoom, 1, gl.TRIANGLE_STRIP);\n            shader_defines.push('ZOOM');\n        }\n        else {\n            this.min_zoom = null;\n        }\n\n        let fragment_src = polyline_fragment_src;\n        if (polyline.data !== undefined) {\n            shader_defines.push('DATA');\n\n            this.line_data = new WGLBuffer(gl, polyline.data, 1, gl.TRIANGLE_STRIP);\n\n            const cmap = opts.cmap === undefined ? new ColorMap([0, 1], [color_hex], {overflow_color: color_hex, underflow_color: color_hex}) : opts.cmap;\n            this.cmap_gpu = new ColorMapGPUInterface(cmap);\n            this.cmap_gpu.setupShaderVariables(gl, gl.NEAREST);\n\n            fragment_src = ColorMapGPUInterface.applyShader(fragment_src);\n        }\n        else {\n            this.line_data = null;\n            this.cmap_gpu = null;\n        }\n\n        [this.n_dash, this.dash_texture] = makeDashTexture(gl, line_style);\n\n        this.program = new WGLProgram(gl, polyline_vertex_src, fragment_src, {define: shader_defines});\n    }\n\n    static async make(gl: WebGLAnyRenderingContext, lines: LineData[], opts?: PolylineCollectionOpts) {\n        const polylines = await layer_worker.makePolyLines(lines);\n        return new PolylineCollection(gl, polylines, opts);\n    }\n\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array, [map_width, map_height]: [number, number], map_zoom: number, map_bearing: number, map_pitch: number) {\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        const attributes: Record<string, WGLBuffer> = {'a_pos': this.vertices, 'a_extrusion': this.extrusion};\n        const uniforms: Record<string, number | number[]> = {\n            'u_matrix': matrix, 'u_line_width': this.width, 'u_map_width': map_width, 'u_map_height': map_height, 'u_map_bearing': map_bearing, 'u_offset': 0, 'u_zoom': map_zoom,\n            'u_dash_pattern_length': this.n_dash\n        };\n        const textures: Record<string, WGLTexture> = {'u_dash_sampler': this.dash_texture};\n\n        if (this.offset !== null && this.scale !== null) {\n            attributes['a_offset'] = this.offset;\n            uniforms['u_offset_scale'] = this.scale * (map_height / map_width);\n        }\n\n        if (this.min_zoom !== null) {\n            attributes['a_min_zoom'] = this.min_zoom;\n        }\n\n        if (this.line_data !== null) {\n            attributes['a_data'] = this.line_data;\n        }\n        else {\n            uniforms['u_color'] = this.color.toRGBATuple();\n        }\n\n        this.program.use(attributes, uniforms, textures);\n\n        if (this.cmap_gpu !== null) {\n            this.cmap_gpu.bindShaderVariables(this.program);\n        }\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        this.program.draw();\n\n        this.program.setUniforms({'u_offset': -2});\n        this.program.draw();\n\n        this.program.setUniforms({'u_offset': -1});\n        this.program.draw();\n\n        this.program.setUniforms({'u_offset': 1});\n        this.program.draw();\n    }\n}\n\nexport {PolylineCollection, isLineStyle};\nexport type {PolylineCollectionOpts, LineStyle};","import { isWebGL2Ctx, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { LngLat } from \"./Map\";\nimport { Cache, normalizeOptions } from \"./utils\";\n\nimport { WGLBuffer, WGLProgram, WGLTexture } from \"autumn-wgl\";\n\nimport Protobuf from 'pbf';\nimport potpack, {PotpackBox} from \"potpack\";\n\nconst text_vertex_shader_src = require('./glsl/text_vertex.glsl');\nconst text_fragment_shader_src = require('./glsl/text_fragment.glsl');\nconst program_cache = new Cache((gl: WebGLAnyRenderingContext) => new WGLProgram(gl, text_vertex_shader_src, text_fragment_shader_src));\n\nconst PADDING = 3\n\ninterface PBFGlyph {\n    id: number;\n    data: Uint8Array;\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    advance: number;\n}\n\ninterface Glyph {\n    id: number;\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    atlas_i: number;\n    atlas_j: number;\n    advance: number;\n}\n\nfunction parseFontPBF(data: Uint8Array) {\n    const readGlyph = (tag: number, glyph: any, pbf?: Protobuf) => {\n        if (pbf === undefined)\n            return;\n\n        switch (tag) {\n            case 1:\n                glyph.id = pbf.readVarint();\n                break;\n            case 2:\n                glyph.data = pbf.readBytes();\n                break;\n            case 3:\n                glyph.width = pbf.readVarint() + 2 * PADDING;\n                break;\n            case 4:\n                glyph.height = pbf.readVarint() + 2 * PADDING;\n                break;\n            case 5:\n                glyph.left = pbf.readSVarint();\n                break;\n            case 6:\n                glyph.top = pbf.readSVarint();\n                break;\n            case 7:\n                glyph.advance = pbf.readVarint();\n                break;\n        }\n    }\n\n    const readFontStack = (tag: number, glyphs?: PBFGlyph[], pbf?: Protobuf) => {\n        if (glyphs === undefined || pbf === undefined)\n            return;\n        \n        if (tag == 3) {\n            const glyph = pbf.readMessage(readGlyph, {} as PBFGlyph);\n            glyphs.push(glyph);\n        }\n    }\n\n    const readFontStacks = (tag: number, glyphs?: PBFGlyph[], pbf?: Protobuf) => {\n        if (pbf === undefined) \n            return;\n\n        if (tag == 1) {\n            pbf.readMessage(readFontStack, glyphs);\n        }\n    }\n\n    return new Protobuf(data).readFields(readFontStacks, []);\n}\n\ninterface FontAtlas {\n    atlas: Uint8Array;\n    atlas_width: number;\n    atlas_height: number;\n    baseline: number;\n    top: number;\n    glyph_info: Record<number, Glyph>;\n}\n\nfunction createAtlas(pbf_glyphs: PBFGlyph[]): FontAtlas {\n    const pbf_glyphs_filtered = pbf_glyphs.filter(glyph => glyph.data !== undefined);\n\n    const glyph_bins: {glyph: PBFGlyph, bin: PotpackBox}[] = [];\n\n    const bins = pbf_glyphs_filtered.map(glyph => {\n        const bin = {x: 0, y: 0, w: glyph.width, h: glyph.height} as PotpackBox;\n        glyph_bins.push({glyph: glyph, bin: bin});\n\n        return bin;\n    });\n\n    const {w: img_width, h: img_height} = potpack(bins);\n\n    const atlas_data = new Uint8Array(img_width * img_height);\n    const glyphs: Record<number, Glyph> = {}\n    glyph_bins.forEach(glyph_bin => {\n        const {bin, glyph} = glyph_bin;\n\n        if (bin.x === undefined || bin.y === undefined)\n            throw `Potpack couldn't pack this pot, I guess?`;\n\n        glyphs[glyph.id] = {\n            id: glyph.id, width: glyph.width, height: glyph.height, left: glyph.left, top: glyph.top,\n            atlas_i: bin.x, atlas_j: bin.y, advance: glyph.advance\n        };\n\n        for (let i = 0; i < glyph.width; i++) {\n            for (let j = 0; j < glyph.height; j++) {\n                const glyph_idx = i + glyph.width * j;\n                const atlas_idx = (i + bin.x) + img_width * (j + bin.y);\n                atlas_data[atlas_idx] = glyph.data[glyph_idx];\n            }\n        }\n    });\n\n    const glyph_M = glyphs['M'.charCodeAt(0)];\n    const baseline = glyph_M.height - glyph_M.top;\n    const top = -glyph_M.top;\n\n    return {atlas: atlas_data, atlas_width: img_width, atlas_height: img_height, baseline: baseline, top: top, glyph_info: glyphs};\n}\n\nasync function getFontAtlas(url: string) {\n    const resp = await fetch(url);\n    const blob = await resp.blob();\n    const data_buffer = await blob.arrayBuffer();\n\n    // Parse the PBF and get the glyph data\n    const glyphs = parseFontPBF(new Uint8Array(data_buffer));\n\n    // Create an atlas for the glyphs\n    return createAtlas(glyphs);\n}\n\ninterface TextSpec {\n    lat: number;\n    lon: number;\n    text: string;\n    min_zoom?: number;\n}\n\ntype HorizontalAlign = 'left' | 'center' | 'right';\ntype VerticalAlign = 'baseline' | 'middle' | 'top';\n\ninterface TextCollectionOptions {\n    horizontal_align?: HorizontalAlign;\n    vertical_align?: VerticalAlign;\n    font_size?: number;\n    text_color?: Color;\n    halo_color?: Color;\n    halo?: boolean;\n}\n\nconst text_collection_opt_defaults: Required<TextCollectionOptions> = {\n    horizontal_align: 'left',\n    vertical_align: 'baseline',\n    font_size: 12,\n    text_color: new Color([0, 0, 0, 1]),\n    halo_color: new Color([0, 0, 0, 1]),\n    halo: false\n}\n\nclass TextCollection {\n    readonly program: WGLProgram;\n    readonly anchors: WGLBuffer;\n    readonly offsets: WGLBuffer;\n    readonly texcoords: WGLBuffer;\n    readonly texture: WGLTexture;\n\n    readonly opts: Required<TextCollectionOptions>;\n\n    private constructor(gl: WebGLAnyRenderingContext, text_locs: TextSpec[], font_atlas: FontAtlas, opts?: TextCollectionOptions) {\n        this.program = program_cache.getValue(gl);\n\n        this.opts = normalizeOptions(opts, text_collection_opt_defaults);\n        \n        const is_webgl2 = isWebGL2Ctx(gl);\n        const format = is_webgl2 ? gl.R8 : gl.LUMINANCE;\n        const type = gl.UNSIGNED_BYTE;\n        const row_alignment = 1;\n\n        const image = {\n            'format': format, 'type': type, 'width': font_atlas.atlas_width, 'height': font_atlas.atlas_height, \n            'image': font_atlas.atlas, 'row_alignment': row_alignment, 'mag_filter': gl.LINEAR\n        };\n\n        this.texture = new WGLTexture(gl, image);\n\n        const n_verts = text_locs.map(tl => tl.text.length).reduce((a, b) => a + b, 0) * 6;\n\n        const anchor_data = new Float32Array(n_verts * 3);\n        const offset_data = new Float32Array(n_verts * 2);\n        const tc_data = new Float32Array(n_verts * 2);\n\n        let i_anch = 0, i_off = 0, i_tc = 0;\n\n        text_locs.forEach(loc => {\n            const {lat, lon, text} = loc;\n            const min_zoom = loc.min_zoom === undefined ? 0 : loc.min_zoom;\n            const {x: anchor_x, y: anchor_y} = new LngLat(lon, lat).toMercatorCoord();\n            \n            let x_offset = 0;\n            const init_i_off = i_off;\n\n            for (let i = 0; i < text.length; i++) {\n                const glyph_code = text.charCodeAt(i);\n                const glyph_info = font_atlas.glyph_info[glyph_code];\n\n                if (glyph_info === undefined) {\n                    x_offset += 7;\n                    continue;\n                }\n\n                x_offset += glyph_info.left;\n\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                anchor_data[i_anch++] = anchor_x; anchor_data[i_anch++] = anchor_y; anchor_data[i_anch++] = min_zoom;\n                \n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = font_atlas.baseline + glyph_info.top - glyph_info.height;\n                offset_data[i_off++] = x_offset;                    offset_data[i_off++] = font_atlas.baseline + glyph_info.top;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = font_atlas.baseline + glyph_info.top;\n                offset_data[i_off++] = x_offset + glyph_info.width; offset_data[i_off++] = font_atlas.baseline + glyph_info.top;\n                \n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = (glyph_info.atlas_j + glyph_info.height) / font_atlas.atlas_height;\n                tc_data[i_tc++] = glyph_info.atlas_i / font_atlas.atlas_width;                      tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n                tc_data[i_tc++] = (glyph_info.atlas_i + glyph_info.width) / font_atlas.atlas_width; tc_data[i_tc++] = glyph_info.atlas_j / font_atlas.atlas_height;\n\n                x_offset += glyph_info.advance - glyph_info.left;\n            }\n\n            if (this.opts.horizontal_align == 'center') {\n                for (let i = init_i_off; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= x_offset / 2;\n                }\n            }\n            else if (this.opts.horizontal_align == 'right') {\n                for (let i = init_i_off; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= x_offset;\n                }\n            }\n\n            if (this.opts.vertical_align == 'top') {\n                for (let i = init_i_off + 1; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (font_atlas.baseline - font_atlas.top);\n                }\n            }\n            else if (this.opts.vertical_align == 'middle') {\n                for (let i = init_i_off + 1; i < init_i_off + text.length * 12; i += 2) {\n                    offset_data[i] -= (font_atlas.baseline - font_atlas.top) / 2;\n                }\n            }\n        });\n\n        this.anchors = new WGLBuffer(gl, anchor_data, 3, gl.TRIANGLE_STRIP);\n        this.offsets = new WGLBuffer(gl, offset_data, 2, gl.TRIANGLE_STRIP);\n        this.texcoords = new WGLBuffer(gl, tc_data, 2, gl.TRIANGLE_STRIP);\n    }\n\n    static async make(gl: WebGLAnyRenderingContext, text_locs: TextSpec[], fontstack_url: string, opts?: TextCollectionOptions) {\n        const atlas = await getFontAtlas(fontstack_url);\n        return new TextCollection(gl, text_locs, atlas, opts);\n    }\n\n    render(gl: WebGLAnyRenderingContext, matrix: number[], [map_width, map_height]: [number, number], map_zoom: number) {\n        const uniforms: Record<string, any> = {\n            'u_matrix': matrix, 'u_map_width': map_width, 'u_map_height': map_height, 'u_map_zoom': map_zoom, 'u_font_size': this.opts.font_size,\n            'u_text_color': this.opts.text_color.toRGBATuple(), 'u_halo_color': this.opts.halo_color.toRGBATuple(), 'u_offset': 0\n        }\n\n        uniforms['u_is_halo'] = this.opts.halo ? 1 : 0;\n\n        this.program.use(\n            {'a_pos': this.anchors, 'a_offset': this.offsets, 'a_tex_coord': this.texcoords},\n            uniforms,\n            {'u_sdf_sampler': this.texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n\n        this.program.setUniforms({'u_offset': -2, 'u_is_halo': this.opts.halo ? 1 : 0});\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n\n        this.program.setUniforms({'u_offset': -1, 'u_is_halo': this.opts.halo ? 1 : 0});\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n\n        this.program.setUniforms({'u_offset': 1, 'u_is_halo': this.opts.halo ? 1 : 0});\n        this.program.draw();\n\n        if (this.opts.halo) {\n            this.program.setUniforms({'u_is_halo': 0});\n            this.program.draw();\n        }\n    }\n}\n\nexport {TextCollection};\nexport type {TextSpec, TextCollectionOptions};","\nexport default function potpack(boxes) {\n\n    // calculate total box area and maximum box width\n    let area = 0;\n    let maxWidth = 0;\n\n    for (const box of boxes) {\n        area += box.w * box.h;\n        maxWidth = Math.max(maxWidth, box.w);\n    }\n\n    // sort the boxes for insertion by height, descending\n    boxes.sort((a, b) => b.h - a.h);\n\n    // aim for a squarish resulting container,\n    // slightly adjusted for sub-100% space utilization\n    const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);\n\n    // start with a single empty space, unbounded at the bottom\n    const spaces = [{x: 0, y: 0, w: startWidth, h: Infinity}];\n\n    let width = 0;\n    let height = 0;\n\n    for (const box of boxes) {\n        // look through spaces backwards so that we check smaller spaces first\n        for (let i = spaces.length - 1; i >= 0; i--) {\n            const space = spaces[i];\n\n            // look for empty spaces that can accommodate the current box\n            if (box.w > space.w || box.h > space.h) continue;\n\n            // found the space; add the box to its top-left corner\n            // |-------|-------|\n            // |  box  |       |\n            // |_______|       |\n            // |         space |\n            // |_______________|\n            box.x = space.x;\n            box.y = space.y;\n\n            height = Math.max(height, box.y + box.h);\n            width = Math.max(width, box.x + box.w);\n\n            if (box.w === space.w && box.h === space.h) {\n                // space matches the box exactly; remove it\n                const last = spaces.pop();\n                if (i < spaces.length) spaces[i] = last;\n\n            } else if (box.h === space.h) {\n                // space matches the box height; update it accordingly\n                // |-------|---------------|\n                // |  box  | updated space |\n                // |_______|_______________|\n                space.x += box.w;\n                space.w -= box.w;\n\n            } else if (box.w === space.w) {\n                // space matches the box width; update it accordingly\n                // |---------------|\n                // |      box      |\n                // |_______________|\n                // | updated space |\n                // |_______________|\n                space.y += box.h;\n                space.h -= box.h;\n\n            } else {\n                // otherwise the box splits the space into two spaces\n                // |-------|-----------|\n                // |  box  | new space |\n                // |_______|___________|\n                // | updated space     |\n                // |___________________|\n                spaces.push({\n                    x: space.x + box.w,\n                    y: space.y,\n                    w: space.w - box.w,\n                    h: box.h\n                });\n                space.y += box.h;\n                space.h -= box.h;\n            }\n            break;\n        }\n    }\n\n    return {\n        w: width, // container width\n        h: height, // container height\n        fill: (area / (width * height)) || 0 // space utilization\n    };\n}\n","\nimport { LineData, TypedArray, WebGLAnyRenderingContext} from './AutumnTypes';\nimport { LngLat, MapLikeType } from './Map';\nimport { PlotComponent } from './PlotComponent';\nimport { RawScalarField } from './RawField';\nimport { LineStyle, PolylineCollection, PolylineCollectionOpts, isLineStyle } from './PolylineCollection';\nimport { TextCollection, TextCollectionOptions, TextSpec } from './TextCollection';\nimport { Color } from './Color';\n\nimport { normalizeOptions } from './utils';\nimport { kdTree } from 'kd-tree-javascript';\nimport { ColorMap } from './Colormap';\n\ninterface ContourOptions {\n    /** \n     * The color of the contours as a hex color string \n     * @default '#000000'\n     */\n    color?: string;\n\n    /**\n     * A color map to use to color the contours. Specifying a colormap overrides the color option.\n     * @default null\n     */\n    cmap?: ColorMap | null;\n\n    /** \n     * The contour interval for drawing contours at regular intervals\n     * @default 1\n     */\n    interval?: number;\n\n    /**\n     * A list of arbitrary levels to contour. This overrides the `interval` option.\n     * @default null\n     */\n    levels?: number[] | null;\n\n    /**\n     * The width of the line in pixels. This could be either a number or a function that takes a contour level as a number and returns a line width. This\n     *  can be used to vary the width of the contours by value.\n     * @example level => level >= 100 ? 3 : 1.5\n     * @default 2\n     */\n    line_width?: number | ((level: number) => number);\n\n    /**\n     * The style to use for the line. This can be either a LineStyle or a function that takes a contour level as a number and returns a LineStyle. This \n     *  can be used to vary the contours by value.\n     * @example level => level < 0 ? '--' : '-'\n     * @default '-'\n     */\n    line_style?: LineStyle | ((level: number) => LineStyle);\n}\n\nconst contour_opt_defaults: Required<ContourOptions> = {\n    color: '#000000',\n    cmap: null,\n    interval: 1,\n    levels: null,\n    line_width: 2,\n    line_style: '-'\n}\n\ninterface ContourGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n}\n\n/** \n * A field of contoured data.\n * @example\n * // Create a contoured height field, with black contours every 30 m (assuming the height field is in \n * // meters).\n * const contours = new Contour(height_field, {color: '#000000', interval: 30});\n */\nclass Contour<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType>;\n    public readonly opts: Required<ContourOptions>;\n\n    private gl_elems: ContourGLElems<MapType> | null;\n    private contours: PolylineCollection[] | null;\n\n    /**\n     * Create a contoured field\n     * @param field - The field to contour\n     * @param opts  - Options for creating the contours\n     */\n    constructor(field: RawScalarField<ArrayType>, opts: ContourOptions) {\n        super();\n\n        this.field = field;\n        this.opts = normalizeOptions(opts, contour_opt_defaults);\n\n        this.gl_elems = null;\n        this.contours = null;\n    }\n\n    /**\n     * Update the data displayed as contours\n     * @param field - The new field to contour\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        this.field = field;\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n\n        const contour_data = await this.getContours();\n\n        type LineDataStyleWidth = {data: LineData[], line_width: number, line_style: LineStyle};\n        const line_data: LineDataStyleWidth[] = [];\n\n        // Make contour data and sort them by line width and line style\n        Object.entries(contour_data).forEach(([cv, cd]) => {\n            const cv_ = parseFloat(cv);\n            const contour_style = isLineStyle(this.opts.line_style) ? this.opts.line_style : this.opts.line_style(cv_);\n            const contour_width = typeof this.opts.line_width === 'number' ? this.opts.line_width : this.opts.line_width(cv_);\n\n            const polyline_data = cd.map(c => {\n                const ld: LineData = {vertices: c};\n                if (this.opts.cmap !== null){\n                    ld.data = c.map(() => cv_)\n                }\n                return ld;\n            });\n\n            const line_data_filtered = line_data.filter(ld => ld.line_style == contour_style && ld.line_width == contour_width);\n            let contour_line_data: LineDataStyleWidth;\n            if (line_data_filtered.length == 0) {\n                contour_line_data = {data: [], line_width: contour_width, line_style: contour_style};\n                line_data.push(contour_line_data);\n            }\n            else {\n                contour_line_data = line_data_filtered[0];\n            }\n\n            contour_line_data.data = contour_line_data.data.concat(polyline_data);\n        });\n\n        // Make one PolylineCollection for each combination of line width and line style\n        const promises = line_data.map(async ld => {\n            const plc_opts: PolylineCollectionOpts = {line_width: ld.line_width, line_style: ld.line_style};\n            if (this.opts.cmap !== null) {\n                plc_opts.cmap = this.opts.cmap;\n            }\n            else {\n                plc_opts.color = this.opts.color;\n            }\n\n            return await PolylineCollection.make(gl, ld.data, plc_opts);\n        });\n\n        Promise.all(promises).then(values => {\n            if (this.gl_elems === null) return;\n\n            this.contours = values;\n            this.gl_elems.map.triggerRepaint();\n        });\n    }\n\n    public async getContours() {\n        const levels = this.opts.levels === null ? undefined : this.opts.levels;\n        return await this.field.getContours({interval: this.opts.interval, levels: levels});\n    }\n\n    /**\n     * @internal\n     * Add the contours to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n\n        this.gl_elems = {\n            gl: gl, map: map\n        };\n\n        await this.updateField(this.field);\n    }\n\n    /**\n     * @internal\n     * Render the contours\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.contours === null) return;\n        const gl_elems = this.gl_elems;\n\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        this.contours.forEach(cnt => cnt.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch));\n    }\n}\n\ninterface ContourLabelGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n}\n\ninterface ContourLabelOptions {\n    /**\n     * Number of decimal places to use in the contour labels\n     * @default 0\n     */\n    n_decimal_places?: number;\n\n    /**\n     * Font face to use for the contour labels\n     * @default 'Trebuchet MS'\n     */\n    font_face?: string;\n\n    /**\n     * Font size in points to use for the contour labels\n     * @default 12\n     */\n    font_size?: number;\n\n    /**\n     * URL template to use in retrieving the font data for the labels. The default is to use the template from the map style.\n     */\n    font_url_template?: string;\n\n    /**\n     * Text color for the contour labels\n     * @default '#000000'\n     */\n    text_color?: string;\n\n    /**\n     * Halo (outline) color for the contour labels\n     * @default '#000000'\n     */\n    halo_color?: string;\n\n    /**\n     * Whether to draw the halo (outline) on the contour labels\n     * @default false\n     */\n    halo?: boolean;\n}\n\nconst contour_label_opt_defaults: Required<ContourLabelOptions> = {\n    n_decimal_places: 0,\n    font_face: 'Trebuchet MS',\n    font_size: 12,\n    font_url_template: '',\n    text_color: '#000000',\n    halo_color: '#000000',\n    halo: false\n}\n\nclass ContourLabels<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private readonly contours: Contour<ArrayType, MapType>;\n    private gl_elems: ContourLabelGLElems<MapType> | null;\n    private text_collection: TextCollection | null;\n    private readonly opts: Required<ContourLabelOptions>;\n\n    constructor(contours: Contour<ArrayType, MapType>, opts?: ContourLabelOptions) {\n        super();\n\n        this.opts = normalizeOptions(opts, contour_label_opt_defaults);\n\n        this.contours = contours;\n        this.text_collection = null;\n        this.gl_elems = null;\n    }\n\n    /**\n     * Update contour labels when the field for the associated Contour object has been changed.\n     */\n    public async updateField() {\n        if (this.gl_elems === null) return;\n\n        const map = this.gl_elems.map;\n        const gl = this.gl_elems.gl;\n\n        const map_style = map.getStyle();\n\n        const font_url_template = this.opts.font_url_template == '' ? map_style.glyphs : this.opts.font_url_template;\n        if (font_url_template === undefined)\n            throw \"The map style doesn't have any glyph information. Please pass the font_url_template option to ContourLabels\";\n\n        const font_url = font_url_template.replace('{range}', '0-255').replace('{fontstack}', this.opts.font_face);\n\n        const label_pos: TextSpec[] = [];\n\n        const contour_data = await this.contours.getContours();\n        const contour_levels = Object.keys(contour_data).map(parseFloat);\n        contour_levels.sort((a, b) => a - b);\n\n        const map_max_zoom = map.getMaxZoom();\n        const contour_label_spacing = 0.01 * Math.pow(2, 7 - map_max_zoom);\n        let min_label_lat: number | null = null, max_label_lat: number | null = null, min_label_lon: number | null = null, max_label_lon: number | null = null;\n\n        Object.entries(contour_data).forEach(([level, contours]) => {\n            const icntr = (parseFloat(level) - contour_levels[0]);\n            const level_str = level.toString();\n\n            contours.forEach(contour => {\n                const c_map = contour.map(v => {\n                    const v_ll = new LngLat(...v).toMercatorCoord();\n                    return [v_ll.x, v_ll.y] as [number, number];\n                });\n        \n                const dist: number[] = [];\n                c_map.forEach((v, i) => {\n                    if (i == 0) {\n                        dist.push(0);\n                    }\n                    else {\n                        const v_last = c_map[i - 1];\n                        const this_dist = Math.hypot(v_last[0] - v[0], v_last[1] - v[1]);\n                        dist.push(dist[i - 1] + this_dist);\n                    }\n                });\n\n                let n_labels_placed = 0;\n                for (let idist = 1; idist < dist.length; idist++) {\n                    const target_dist = contour_label_spacing * (n_labels_placed + (icntr / 2) % 1);\n                    if (dist[idist - 1] <= target_dist && target_dist < dist[idist]) {\n                        const pt1 = contour[idist - 1];\n                        const pt2 = contour[idist];\n\n                        const alpha = (target_dist - dist[idist - 1]) / (dist[idist] - dist[idist - 1]);\n                        const pt_lon = (1 - alpha) * pt1[0] + alpha * pt2[0];\n                        const pt_lat = (1 - alpha) * pt1[1] + alpha * pt2[1];\n\n                        if (min_label_lon === null || pt_lon < min_label_lon) min_label_lon = pt_lon;\n                        if (max_label_lon === null || pt_lon > max_label_lon) max_label_lon = pt_lon;\n                        if (min_label_lat === null || pt_lat < min_label_lat) min_label_lat = pt_lat;\n                        if (max_label_lat === null || pt_lat > max_label_lat) max_label_lat = pt_lat;\n\n                        label_pos.push({lon: pt_lon, lat: pt_lat, min_zoom: map_max_zoom, text: level_str});\n                        n_labels_placed++;\n                    }\n                }\n            });\n        });\n\n        const tree = new kdTree(label_pos, (a, b) => Math.hypot(a.lon - b.lon, a.lat - b.lat), ['lon', 'lat']);\n\n        if (min_label_lon === null || min_label_lat === null || max_label_lon === null || max_label_lat === null) {\n            return;\n        }\n\n        const {x: min_label_x, y: max_label_y} = new LngLat(min_label_lon, min_label_lat).toMercatorCoord();\n        const {x: max_label_x, y: min_label_y} = new LngLat(max_label_lon, max_label_lat).toMercatorCoord();\n        const thin_grid_width = max_label_x - min_label_x;\n        const thin_grid_height = max_label_y - min_label_y;\n        const ni_thin_grid = Math.round(4 * thin_grid_width / contour_label_spacing);\n        const nj_thin_grid = Math.round(4 * thin_grid_height / contour_label_spacing);\n        const thin_grid_xs = [];\n        const thin_grid_ys = [];\n\n        for (let idx = 0; idx < ni_thin_grid; idx++) {\n            thin_grid_xs.push(min_label_x + (idx / ni_thin_grid) * thin_grid_width);\n        }\n\n        for (let jdy = 0; jdy < nj_thin_grid; jdy++) {\n            thin_grid_ys.push(min_label_y + (jdy / nj_thin_grid) * thin_grid_height);\n        }\n\n        let skip = 1;\n        for (let zoom = map_max_zoom - 1; zoom >= 0; zoom--) {        \n            for (let idx = 0; idx < ni_thin_grid; idx += skip) {\n                for (let jdy = 0; jdy < nj_thin_grid; jdy += skip) {\n                    const grid_x = thin_grid_xs[idx];\n                    const grid_y = thin_grid_ys[jdy];\n                    const ll = LngLat.fromMercatorCoord(grid_x, grid_y);\n\n                    const [label, dist] = tree.nearest({lon: ll.lng, lat: ll.lat, min_zoom: 0, text: \"\"}, 1)[0];\n                    label.min_zoom = zoom;\n                }\n            }\n\n            skip *= 2;\n        }\n\n        const tc_opts: TextCollectionOptions = {\n            horizontal_align: 'center', vertical_align: 'middle', font_size: this.opts.font_size,\n            halo: this.opts.halo, \n            text_color: Color.fromHex(this.opts.text_color), halo_color: Color.fromHex(this.opts.halo_color),\n        };\n\n        this.text_collection = await TextCollection.make(gl, label_pos, font_url, tc_opts);\n        map.triggerRepaint();\n    }\n\n    /** \n     * @internal \n     * Add the contour labels to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.gl_elems = {\n            gl: gl, map: map,\n        }\n\n        this.updateField();\n    }\n\n    /** \n     * @internal \n     * Render the contour labels\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[]) {\n        if (this.gl_elems === null || this.text_collection === null) return;\n        const gl_elems = this.gl_elems;\n\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const map_zoom = gl_elems.map.getZoom();\n\n        this.text_collection.render(gl, matrix, [map_width, map_height], map_zoom);\n    }\n}\n\nexport default Contour;\nexport {ContourLabels};\nexport type {ContourOptions, ContourLabelOptions};","\nimport { PlotComponent, getGLFormatTypeAlignment } from './PlotComponent';\nimport { ColorMap, ColorMapGPUInterface} from './Colormap';\nimport { WGLBuffer, WGLProgram, WGLTexture } from 'autumn-wgl';\nimport { RawScalarField } from './RawField';\nimport { MapLikeType } from './Map';\nimport { TypedArray, WebGLAnyRenderingContext } from './AutumnTypes';\nimport { normalizeOptions } from './utils';\n\nconst contourfill_vertex_shader_src = require('./glsl/contourfill_vertex.glsl');\nconst contourfill_fragment_shader_src = require('./glsl/contourfill_fragment.glsl');\n\ninterface ContourFillOptions {\n    /** The color map to use when creating the fills */\n    cmap: ColorMap;\n\n    /** \n     * The opacity for the filled contours \n     * @default 1\n     */\n    opacity?: number;\n}\n\nconst default_cmap = new ColorMap([0, 1], ['#000000'], {overflow_color: '#000000', underflow_color: '#000000'})\n\nconst contour_fill_opt_defaults: Required<ContourFillOptions> = {\n    cmap: default_cmap,\n    opacity: 1,\n}\n\ninterface RasterOptions {\n    /** The color map to use when creating the raster plot */\n    cmap: ColorMap;\n\n    /** \n     * The opacity for the raster plot\n     * @default 1\n     */\n    opacity?: number;\n}\n\nconst raster_opt_defaults: Required<RasterOptions> = {\n    cmap: default_cmap,\n    opacity: 1,\n}\n\ninterface PlotComponentFillGLElems<MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n    program: WGLProgram;\n    vertices: WGLBuffer;\n\n    texcoords: WGLBuffer;\n}\n\nclass PlotComponentFill<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType>;\n    public readonly opts: Required<ContourFillOptions>;\n\n    private readonly cmap_gpu: ColorMapGPUInterface;\n\n    private gl_elems: PlotComponentFillGLElems<MapType> | null;\n    private fill_texture: WGLTexture | null;\n    protected image_mag_filter: number | null;\n    protected cmap_mag_filter: number | null;\n\n    constructor(field: RawScalarField<ArrayType>, opts: ContourFillOptions) {\n        super();\n\n        this.field = field;\n        this.opts = normalizeOptions(opts, contour_fill_opt_defaults);\n\n        this.cmap_gpu = new ColorMapGPUInterface(this.opts.cmap);\n\n        this.gl_elems = null;\n        this.fill_texture = null;\n        this.image_mag_filter = null;\n        this.cmap_mag_filter = null;\n    }\n\n    public async updateField(field: RawScalarField<ArrayType>) {\n        this.field = field;\n\n        if (this.image_mag_filter === null || this.cmap_mag_filter === null) {\n            throw `Implement magnification filtes in a subclass`;\n        }\n\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n        const map = this.gl_elems.map;\n        \n        const tex_data = this.field.getTextureData();\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, !(tex_data instanceof Float32Array));\n    \n        const fill_image = {'format': format, 'type': type,\n            'width': this.field.grid.ni, 'height': this.field.grid.nj, 'image': tex_data,\n            'mag_filter': this.image_mag_filter, 'row_alignment': row_alignment,\n        };\n\n        if (this.fill_texture === null) {\n            this.fill_texture = new WGLTexture(gl, fill_image);\n        }\n        else {\n            this.fill_texture.setImageData(fill_image);\n        }\n\n        map.triggerRepaint();\n    }\n\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        // Basic procedure for the filled contours inspired by https://blog.mbq.me/webgl-weather-globe/\n        \n        if (this.image_mag_filter === null || this.cmap_mag_filter === null) {\n            throw `Implement magnification filtes in a subclass`;\n        }\n        \n        const program = new WGLProgram(gl, contourfill_vertex_shader_src, ColorMapGPUInterface.applyShader(contourfill_fragment_shader_src));\n\n        const {vertices: vertices, texcoords: texcoords} = await this.field.grid.getWGLBuffers(gl);\n\n        this.cmap_gpu.setupShaderVariables(gl, this.cmap_mag_filter);\n\n        this.gl_elems = {\n            gl: gl, map: map, program: program, vertices: vertices, texcoords: texcoords,\n        };\n\n        this.updateField(this.field);\n    }\n\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.fill_texture === null) return;\n        const gl_elems = this.gl_elems;\n\n        if (matrix instanceof Float32Array) \n            matrix = [...matrix];\n\n        gl_elems.program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_matrix': matrix, 'u_opacity': this.opts.opacity, 'u_offset': 0},\n            {'u_fill_sampler': this.fill_texture}\n        );\n\n        this.cmap_gpu.bindShaderVariables(gl_elems.program);\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -2});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -1});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': 1});\n        gl_elems.program.draw();\n    }\n}\n\n/** \n * A raster (i.e. pixel) plot \n * @example\n * // Create a raster plot with the provided color map\n * const raster = new Raster(wind_speed_field, {cmap: color_map});\n */\nclass Raster<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponentFill<ArrayType, MapType> {\n\n    /**\n     * Create a raster plot\n     * @param field - The field to create the raster plot from\n     * @param opts  - Options for creating the raster plot\n     */\n    constructor(field: RawScalarField<ArrayType>, opts: RasterOptions) {\n        super(field, opts);\n    }\n\n    /**\n     * Update the data displayed as a raster plot\n     * @param field - The new field to display as a raster plot\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        await super.updateField(field);\n    }\n\n    /**\n     * @internal\n     * Add the raster plot to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.image_mag_filter = gl.NEAREST;\n        this.cmap_mag_filter = gl.LINEAR;\n        await super.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render the raster plot\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        super.render(gl, matrix);\n    }\n}\n\n/** \n * A filled contoured field \n * @example\n * // Create a field of filled contours with the provided color map\n * const fill = new ContourFill(wind_speed_field, {cmap: color_map});\n */\nclass ContourFill<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponentFill<ArrayType, MapType> {\n\n    /**\n     * Create a filled contoured field\n     * @param field - The field to create filled contours from\n     * @param opts  - Options for creating the filled contours\n     */\n    constructor(field: RawScalarField<ArrayType>, opts: ContourFillOptions) {\n        super(field, opts);\n    }\n\n    /**\n     * Update the data displayed as filled contours\n     * @param field - The new field to display as filled contours\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        await super.updateField(field);\n    }\n\n    /**\n     * @internal\n     * Add the filled contours to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.image_mag_filter = gl.LINEAR;\n        this.cmap_mag_filter = gl.NEAREST;\n        await super.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render the filled contours\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        super.render(gl, matrix);\n    }\n}\n\nexport {ContourFill, Raster};\nexport type {ContourFillOptions, RasterOptions};","\nimport { BillboardSpec, TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { ColorMap, ColorMapGPUInterface } from \"./Colormap\";\nimport { getGLFormatTypeAlignment } from \"./PlotComponent\";\nimport { RawVectorField } from \"./RawField\";\nimport { WGLBuffer, WGLProgram, WGLTexture, WGLTextureSpec } from \"autumn-wgl\";\n\nconst billboard_vertex_shader_src = require('./glsl/billboard_vertex.glsl');\nconst billboard_fragment_shader_src = require('./glsl/billboard_fragment.glsl');\n\ninterface BillboardCollectionOpts {\n    color?: Color;\n    cmap?: ColorMap;\n}\n\ninterface BillboardCollectionGLElems {\n    gl: WebGLAnyRenderingContext;\n    program: WGLProgram;\n    vertices: WGLBuffer;\n    texcoords: WGLBuffer;\n    texture: WGLTexture;\n    proj_rot_texture: WGLTexture;\n    cmap_gpu: ColorMapGPUInterface | null;\n}\n\nclass BillboardCollection<ArrayType extends TypedArray> {\n    private field: RawVectorField<ArrayType>;\n    public readonly spec: BillboardSpec;\n    public readonly color: Color;\n    public readonly cmap: ColorMap | null;\n    public readonly size_multiplier: number;\n    public readonly thin_fac: number;\n    public readonly max_zoom: number;\n    public readonly billboard_image: WGLTextureSpec;\n\n    private gl_elems: BillboardCollectionGLElems | null;\n    private wind_textures: {u: WGLTexture, v: WGLTexture} | null;\n    private readonly trim_inaccessible: number;\n    private show_field: boolean;\n\n    constructor(field: RawVectorField<ArrayType>, thin_fac: number, max_zoom: number, \n                billboard_image: WGLTextureSpec, billboard_spec: BillboardSpec, billboard_size_mult: number, opts?: BillboardCollectionOpts) {\n\n        opts = opts === undefined ? {} : opts;\n        this.color = opts.color === undefined ? new Color([0, 0, 0, 1]) : opts.color;\n        this.cmap = opts.cmap === undefined ? null : opts.cmap;\n\n        this.field = field;\n        this.spec = billboard_spec;\n        this.size_multiplier = billboard_size_mult;\n        this.thin_fac = thin_fac;\n        this.max_zoom = max_zoom;\n        this.billboard_image = billboard_image;\n        this.gl_elems = null;\n        this.wind_textures = null;\n\n        const n_density_tiers = Math.log2(thin_fac);\n        const n_inaccessible_tiers = Math.max(n_density_tiers + 1 - max_zoom, 0);\n        this.trim_inaccessible = Math.pow(2, n_inaccessible_tiers);\n        this.show_field = true;\n    }\n\n    public updateField(field: RawVectorField<ArrayType>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n\n        const gl = this.gl_elems.gl;\n        const data = this.field.getThinnedField(this.trim_inaccessible, this.trim_inaccessible);\n\n        const {u: u_thin, v: v_thin} = data.getTextureData();\n        this.show_field = u_thin !== null;\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, !(u_thin instanceof Float32Array));\n\n        const u_image = {'format': format, 'type': type,\n            'width': data.grid.ni, 'height': data.grid.nj, 'image': u_thin,\n            'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n        };\n\n        const v_image = {'format': format, 'type': type,\n            'width': data.grid.ni, 'height': data.grid.nj, 'image': v_thin,\n            'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n        };\n\n        if (this.wind_textures === null) {\n            this.wind_textures = {u: new WGLTexture(gl, u_image), v: new WGLTexture(gl, v_image)};\n        }\n        else {\n            this.wind_textures.u.setImageData(u_image);\n            this.wind_textures.v.setImageData(v_image);\n        }\n    }\n\n    public async setup(gl: WebGLAnyRenderingContext) {\n\n        const thinned_field = this.field.getThinnedField(this.trim_inaccessible, this.trim_inaccessible);\n        const {vertices, texcoords} = await thinned_field.grid.getWGLBillboardBuffers(gl, this.thin_fac / this.trim_inaccessible, this.max_zoom);\n        const {rotation: proj_rotation_tex} = thinned_field.grid.getVectorRotationTexture(gl);\n\n        const texture = new WGLTexture(gl, this.billboard_image);\n\n        const shader_defines: string[] = [];\n        let fragment_src = billboard_fragment_shader_src;\n        let cmap_gpu = null;\n        if (this.cmap !== null) {\n            fragment_src = ColorMapGPUInterface.applyShader(fragment_src);\n\n            cmap_gpu = new ColorMapGPUInterface(this.cmap);\n            cmap_gpu.setupShaderVariables(gl, gl.NEAREST);\n\n            shader_defines.push('COLORMAP');\n        }\n\n        const program = new WGLProgram(gl, billboard_vertex_shader_src, fragment_src, {define: shader_defines});\n\n        this.gl_elems = {gl: gl, program: program, vertices: vertices, texcoords: texcoords, texture: texture, proj_rot_texture: proj_rotation_tex, cmap_gpu: cmap_gpu};\n    }\n\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array, [map_width, map_height]: [number, number], map_zoom: number, map_bearing: number, map_pitch: number) {\n        if (this.gl_elems === null || this.wind_textures === null || !this.show_field) return;\n\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        const gl_elems = this.gl_elems;\n\n        const bb_size = this.spec.BB_HEIGHT * (map_height / map_width) * this.size_multiplier;\n        const bb_width = this.spec.BB_WIDTH / this.spec.BB_TEX_WIDTH;\n        const bb_height = this.spec.BB_HEIGHT / this.spec.BB_TEX_HEIGHT;\n\n        gl_elems.program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_bb_size': bb_size, 'u_bb_width': bb_width, 'u_bb_height': bb_height,\n             'u_bb_mag_bin_size': this.spec.BB_MAG_BIN_SIZE, 'u_bb_mag_wrap': this.spec.BB_MAG_WRAP, 'u_offset': 0,\n             'u_matrix': matrix, 'u_map_aspect': map_height / map_width, 'u_zoom': map_zoom, 'u_map_bearing': map_bearing},\n            {'u_sampler': gl_elems.texture, 'u_u_sampler': this.wind_textures.u, 'u_v_sampler': this.wind_textures.v, 'u_rot_sampler': gl_elems.proj_rot_texture}\n        );\n\n        if (gl_elems.cmap_gpu !== null) {\n            gl_elems.cmap_gpu.bindShaderVariables(gl_elems.program);\n        }\n        else {\n            gl_elems.program.setUniforms({'u_bb_color': this.color.toRGBATuple()});\n        }\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -2});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -1});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': 1});\n        gl_elems.program.draw();\n    }\n}\n\nexport {BillboardCollection};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport { BillboardCollection } from './BillboardCollection';\nimport { normalizeOptions } from './utils';\nimport { RawVectorField } from \"./RawField\";\nimport { MapLikeType } from \"./Map\";\nimport { BillboardSpec, TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { ColorMap } from \"./Colormap\";\n\nconst BASE_BARB_DIMS: BillboardSpec = {\n    BB_WIDTH: 85,\n    BB_HEIGHT: 256,\n    BB_TEX_WIDTH: 1024,\n    BB_TEX_HEIGHT: 1024,\n    BB_MAG_MAX: 235,\n    BB_MAG_WRAP: 60,\n    BB_MAG_BIN_SIZE: 5,\n}\n\nconst LINE_WIDTH_MULTIPLIER = 4;\n\nfunction createBarbTexture(dimensions: BillboardSpec, line_width: number) : HTMLCanvasElement {\n    let canvas = document.createElement('canvas');\n\n    canvas.width = dimensions.BB_TEX_WIDTH;\n    canvas.height = dimensions.BB_TEX_HEIGHT;\n    \n    function drawWindBarb(ctx: CanvasRenderingContext2D, tipx: number, tipy: number, mag: number) : void {\n        const elem_full_size = dimensions.BB_WIDTH / 2 - 4;\n        const elem_spacing = elem_full_size / 2;\n        \n        if (mag < 2.5) {\n            ctx.beginPath();\n            ctx.arc(tipx, tipy, elem_full_size / 2, 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n        else {\n            let elem_pos = 0;\n            let mag_countdown = mag;\n\n            let staff_length = 0;\n            const n_flags = Math.floor((mag_countdown + 2.5) / 50)\n            staff_length += n_flags * elem_full_size / 2 + elem_spacing \n                                   + (n_flags - 1) * elem_spacing / 2;\n            mag_countdown -= n_flags * 50;\n            const n_full_barbs = Math.floor((mag_countdown + 2.5) / 10)\n            staff_length += n_full_barbs * elem_spacing;\n            mag_countdown -= n_full_barbs * 10;\n            const n_half_barbs = Math.floor((mag_countdown + 2.5) / 5);\n            staff_length += n_half_barbs * elem_spacing;\n            \n            if (mag < 7.5) {\n                staff_length += elem_spacing;\n            }\n            \n            staff_length = Math.max(120, staff_length);\n            \n            // staff\n            ctx.beginPath();\n            ctx.moveTo(tipx, tipy);\n            ctx.lineTo(tipx, tipy + staff_length);\n\n            mag_countdown = mag;\n\n            elem_pos = tipy + staff_length;\n            let last_was_flag = false;\n            let first_elem = true;\n        \n            while (mag_countdown > 47.5) {\n                if (last_was_flag) elem_pos += elem_spacing / 2;\n                // flag\n                if (!first_elem) {\n                    ctx.moveTo(tipx, elem_pos);\n                }\n                ctx.lineTo(tipx - elem_full_size, elem_pos);\n                ctx.lineTo(tipx, elem_pos - elem_full_size / 2)\n\n                elem_pos -= elem_full_size / 2 + elem_spacing;\n                mag_countdown -= 50;\n                last_was_flag = true;\n                first_elem = false;\n            }\n        \n            while (mag_countdown > 7.5) {\n                // full barb\n                if (!first_elem) {\n                    ctx.moveTo(tipx, elem_pos);\n                }\n                ctx.lineTo(tipx - elem_full_size, elem_pos + elem_full_size / 2);\n            \n                elem_pos -= elem_spacing;\n                mag_countdown -= 10;\n                first_elem = false;\n            }\n            \n            if (mag < 7.5) {\n                elem_pos -= elem_spacing;\n            }\n        \n            while (mag_countdown > 2.5) {\n                // half barb\n                ctx.moveTo(tipx, elem_pos);\n                ctx.lineTo(tipx - elem_full_size / 2, elem_pos + elem_full_size / 4);\n                mag_countdown -= 5;\n            }\n\n            ctx.stroke();\n        }\n    }\n    \n    let ctx = canvas.getContext('2d');\n    if (ctx === null) {\n        throw \"Could not get rendering context for the wind barb canvas\";\n    }\n\n    ctx.lineWidth = line_width;\n    ctx.miterLimit = 4;\n    \n    for (let ibarb = 0; ibarb <= dimensions.BB_MAG_MAX; ibarb += dimensions.BB_MAG_BIN_SIZE) {\n        const x_pos = (ibarb % dimensions.BB_MAG_WRAP) / dimensions.BB_MAG_BIN_SIZE * dimensions.BB_WIDTH + dimensions.BB_WIDTH / 2;\n        const y_pos = Math.floor(ibarb / dimensions.BB_MAG_WRAP) * dimensions.BB_HEIGHT + dimensions.BB_WIDTH / 2;\n        drawWindBarb(ctx, x_pos, y_pos, ibarb);\n    }\n\n    return canvas;\n}\n\ninterface BarbsOptions {\n    /** \n     * The color to use for the barbs as a hex color string;.\n     * @default '#000000'\n     */\n    color?: string;\n\n    /**\n     * A color map to use to color the barbs by magnitude. Specifying cmap overrides the color argument.\n     */\n    cmap?: ColorMap | null;\n\n    /**\n     * The width of the lines to use for the barbs\n     * @default 2\n     */\n    line_width?: number;\n\n    /**\n     * A multiplier for the barb size\n     * @default 1\n     */\n    barb_size_multiplier?: number;\n\n    /** \n     * How much to thin the barbs at zoom level 1 on the map. This effectively means to plot every `n`th barb in the i and j directions, where `n` = \n     * `thin_fac`. `thin_fac` should be a power of 2. \n     * @default 1\n     */\n    thin_fac?: number;\n}\n\nconst barb_opt_defaults: Required<BarbsOptions> = {\n    color: '#000000',\n    cmap: null,\n    line_width: 2,\n    barb_size_multiplier: 1, \n    thin_fac: 1\n}\n\ninterface BarbsGLElems<ArrayType extends TypedArray, MapType extends MapLikeType> {\n    map: MapType;\n    barb_billboards: BillboardCollection<ArrayType>;\n}\n\n/** \n * A class representing a field of wind barbs. The barbs are automatically thinned based on the zoom level on the map; the user only has to provide a\n * thinning factor at zoom level 1.\n * @example\n * // Create a barb field with black barbs and plotting every 16th wind barb in both i and j at zoom level 1\n * const vector_field = new RawVectorField(grid, u_data, v_data);\n * const barbs = new Barbs(vector_field, {color: '#000000', thin_fac: 16});\n */\nclass Barbs<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    /** The vector field */\n    private fields: RawVectorField<ArrayType>;\n    public readonly opts: Required<BarbsOptions>;\n    private readonly color: Color;\n\n    private gl_elems: BarbsGLElems<ArrayType, MapType> | null;\n    private barb_texture: HTMLCanvasElement;\n\n    /**\n     * Create a field of wind barbs\n     * @param fields - The vector field to plot as barbs\n     * @param opts   - Options for creating the wind barbs\n     */\n    constructor(fields: RawVectorField<ArrayType>, opts: BarbsOptions) {\n        super();\n\n        this.fields = fields;\n\n        this.opts = normalizeOptions(opts, barb_opt_defaults);\n        this.color = Color.fromHex(this.opts.color);\n        this.barb_texture = createBarbTexture(BASE_BARB_DIMS, this.opts.line_width / this.opts.barb_size_multiplier * LINE_WIDTH_MULTIPLIER);\n\n        this.gl_elems = null;\n    }\n\n    /**\n     * Update the field displayed as barbs\n     * @param fields - The new field to display as barbs\n     */\n    public async updateField(fields: RawVectorField<ArrayType>) {\n        this.fields = fields;\n        if (this.gl_elems === null) return;\n        this.gl_elems.barb_billboards.updateField(fields);\n        this.gl_elems.map.triggerRepaint();\n    }\n\n    /**\n     * @internal \n     * Add the barb field to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        gl.getExtension('OES_texture_float');\n        gl.getExtension('OES_texture_float_linear');\n        \n        const map_max_zoom = map.getMaxZoom();\n\n        const barb_image = {format: gl.RGBA, type: gl.UNSIGNED_BYTE, image: this.barb_texture, mag_filter: gl.NEAREST};\n\n        const cmap = this.opts.cmap === null ? undefined : this.opts.cmap;\n        const barb_billboards = new BillboardCollection(this.fields, this.opts.thin_fac, map_max_zoom, barb_image, \n            BASE_BARB_DIMS, 0.1 * this.opts.barb_size_multiplier, {color: this.color, cmap: cmap});\n        await barb_billboards.setup(gl);\n\n        this.gl_elems = {\n            map: map, barb_billboards: barb_billboards\n        }\n\n        this.updateField(this.fields);\n    }\n\n    /**\n     * @internal \n     * Render the barb field\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null) return;\n        const gl_elems = this.gl_elems\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        gl_elems.barb_billboards.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n    }\n}\n\nexport default Barbs;\nexport type {BarbsOptions};","\nimport { TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Color } from \"./Color\";\nimport { MapLikeType } from \"./Map\";\nimport { PlotComponent, getGLFormatTypeAlignment } from \"./PlotComponent\";\nimport { RawScalarField } from \"./RawField\";\nimport { normalizeOptions } from \"./utils\";\nimport { WGLBuffer, WGLProgram, WGLTexture } from \"autumn-wgl\";\n\nconst paintball_vertex_shader_src = require('./glsl/paintball_vertex.glsl');\nconst paintball_fragment_shader_src = require('./glsl/paintball_fragment.glsl');\n\ninterface PaintballOptions {\n    /**\n     * The list of colors (as hex strings) to use for each member in the paintball plot. The first color corresponds to member 1, the second to member 2, etc.\n     */\n    colors?: string[];\n\n    /**\n     * The opacity of the paintball plot\n     * @default 1\n     */\n    opacity?: number;\n}\n\nconst paintball_opt_defaults: Required<PaintballOptions> = {\n    colors: ['#000000'],\n    opacity: 1\n}\n\ninterface PaintballGLElems {\n    gl: WebGLAnyRenderingContext;\n    program: WGLProgram;\n    vertices: WGLBuffer;\n    texcoords: WGLBuffer;\n}\n\n/** \n * A class representing a paintball plot, which is a plot of objects in every member of an ensemble. Objects are usually defined by a single threshold on\n * a field (such as simulated reflectivity greater than 40 dBZ), but could in theory be defined by any arbitrarily complicated method. In autumnplot-gl,\n * the data for the paintball plot is given as a single field with the objects from each member encoded as \"bits\" in the field. Because the field is made up\n * of single-precision floats, this works for up to 24 members. (Technically speaking, I don't need the quotes around \"bits\", as they're bits of the \n * significand of an IEEE 754 float.)\n */\nclass Paintball<ArrayType extends TypedArray, MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private field: RawScalarField<ArrayType>;\n    public readonly opts: Required<PaintballOptions>;\n    private readonly color_components: number[];\n\n    private gl_elems: PaintballGLElems | null;\n    private fill_texture: WGLTexture | null;\n\n    /**\n     * Create a paintball plot\n     * @param field - A scalar field containing the member objects encoded as \"bits.\" The numerical value of each grid point can be constructed like \n     *               `1.0 * M1 + 2.0 * M2 + 4.0 * M3 + 8.0 * M4 ...`, where `M1` is 1 if that grid point is in an object in member 1 and 0 otherwise,\n     *               `M2` is the same thing for member 2, and `M3` and `M4` and up to `Mn` are the same thing for the rest of the members.\n     * @param opts  - Options for creating the paintball plot\n     */\n    constructor(field: RawScalarField<ArrayType>, opts?: PaintballOptions) {\n        super();\n\n        this.field = field;\n\n        this.opts = normalizeOptions(opts, paintball_opt_defaults);\n        this.color_components = [...this.opts.colors].reverse().map(color => Color.fromHex(color).toRGBATuple()).flat();\n        \n        this.gl_elems = null;\n        this.fill_texture = null;\n    }\n\n    /**\n     * Update the field displayed as a paintball plot\n     * @param field - The new field to display as a paintball plot\n     */\n    public async updateField(field: RawScalarField<ArrayType>) {\n        this.field = field;\n\n        if (this.gl_elems === null) return;\n        const gl = this.gl_elems.gl;\n\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, 2);\n\n        const tex_data = this.field.getTextureData();\n        const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, !(tex_data instanceof Float32Array));\n\n        const fill_image = {'format': format, 'type': type,\n            'width': this.field.grid.ni, 'height': this.field.grid.nj, 'image': tex_data,\n            'mag_filter': gl.NEAREST, 'row_alignment': row_alignment,\n        };\n\n        if (this.fill_texture === null) {\n            this.fill_texture = new WGLTexture(gl, fill_image);\n        }\n        else {\n            this.fill_texture.setImageData(fill_image);\n        }\n    }\n\n    /**\n     * @internal\n     * Add the paintball plot to a map.\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        gl.getExtension('OES_texture_float');\n\n        const program = new WGLProgram(gl, paintball_vertex_shader_src, paintball_fragment_shader_src);\n\n        const {vertices: verts_buf, texcoords: tex_coords_buf} = await this.field.grid.getWGLBuffers(gl);\n        const vertices = verts_buf;\n        const texcoords = tex_coords_buf;\n\n        this.gl_elems = {\n            gl: gl, program: program, vertices: vertices, texcoords: texcoords,\n        };\n\n        this.updateField(this.field);\n    }\n\n    /**\n     * @internal\n     * Render the paintball plot\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.fill_texture === null) return;\n        const gl_elems = this.gl_elems;\n\n        if (matrix instanceof Float32Array)\n            matrix = [...matrix];\n\n        // Render to framebuffer\n        gl_elems.program.use(\n            {'a_pos': gl_elems.vertices, 'a_tex_coord': gl_elems.texcoords},\n            {'u_matrix': matrix, 'u_opacity': this.opts.opacity, 'u_colors': this.color_components, 'u_num_colors': this.opts.colors.length, 'u_offset': 0},\n            {'u_fill_sampler': this.fill_texture}\n        );\n\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -2});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': -1});\n        gl_elems.program.draw();\n\n        gl_elems.program.setUniforms({'u_offset': 1});\n        gl_elems.program.draw();\n    }\n}\n\nexport default Paintball;\nexport type {PaintballOptions};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport { PolylineCollection } from \"./PolylineCollection\";\nimport { BillboardCollection } from \"./BillboardCollection\";\nimport { getMinZoom, normalizeOptions } from './utils';\nimport { MapLikeType } from \"./Map\";\nimport { RawProfileField } from \"./RawField\";\nimport { LineData, TypedArray, WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { ColorMap } from \"./Colormap\";\nimport { Color } from \"./Color\";\n\nconst LINE_WIDTH_MULTIPLIER = 2.5;\nconst BG_MAX_RING_MAG = 40;\n\nconst HODO_BG_DIMS = {\n    BB_WIDTH: 256,\n    BB_HEIGHT: 256,\n    BB_TEX_WIDTH: 256,\n    BB_TEX_HEIGHT: 256,\n    BB_MAG_MAX: 1000,\n    BB_MAG_WRAP: 1000,\n    BB_MAG_BIN_SIZE: 1000,\n}\n\nfunction _createHodoBackgroundTexture(line_width: number) {\n    let canvas = document.createElement('canvas');\n\n    canvas.width = HODO_BG_DIMS.BB_TEX_WIDTH;\n    canvas.height = HODO_BG_DIMS.BB_TEX_HEIGHT;\n\n    let ctx = canvas.getContext('2d');\n\n    if (ctx === null) {\n        throw \"Could not get rendering context for the hodograph background canvas\";\n    }\n\n    ctx.lineWidth = line_width;\n\n    for (let irng = HODO_BG_DIMS.BB_TEX_WIDTH / 4; irng <= HODO_BG_DIMS.BB_TEX_WIDTH / 2; irng += HODO_BG_DIMS.BB_TEX_WIDTH / 4) {\n        ctx.beginPath();\n        ctx.arc(HODO_BG_DIMS.BB_TEX_WIDTH / 2, HODO_BG_DIMS.BB_TEX_WIDTH / 2, irng - line_width / 2, 0, 2 * Math.PI);\n        ctx.stroke();\n    }\n\n    const ctr_x = HODO_BG_DIMS.BB_TEX_WIDTH / 2, ctr_y = HODO_BG_DIMS.BB_TEX_WIDTH / 2;\n    const arrow_size = 20\n    ctx.beginPath()\n    ctx.moveTo(ctr_x, ctr_y);\n    ctx.lineTo(ctr_x + arrow_size / 2, ctr_y + arrow_size);\n    ctx.lineTo(ctr_x - arrow_size / 2, ctr_y + arrow_size);\n    ctx.lineTo(ctr_x, ctr_y);\n    ctx.fill()\n\n    return canvas;\n};\n\nconst HODO_CMAP = new ColorMap([0, 1, 3, 6, 9], ['#ffffcc', '#a1dab4', '#41b6c4', '#225ea8']);\n\ninterface HodographOptions {\n    /** \n     * The color of the hodograph plot background as a hex string\n     * @default '#000000'\n     */\n    bgcolor?: string;\n\n    /** \n     * How much to thin the hodographs at zoom level 1 on the map. This effectively means to plot every `n`th hodograph in the i and j directions, where `n` = \n     * `thin_fac`. `thin_fac` should be a power of 2. \n     * @default 1\n     */\n    thin_fac?: number;\n\n    /**\n     * The width of the hodograph line in pixels\n     * @default 2.5\n     */\n    hodo_line_width: number;\n\n    /**\n     * The width of the lines on the background in pixels\n     * @default 1.5\n     */\n    background_line_width: number;\n\n    /**\n     * The colormap to use for the heights on the hodograph. Default is a yellow-blue colormap.\n     */\n    height_cmap: ColorMap;\n}\n\nconst hodograph_opt_defaults: Required<HodographOptions> = {\n    bgcolor: '#000000',\n    thin_fac: 1,\n    hodo_line_width: 2.5,\n    background_line_width: 1.5,\n    height_cmap: HODO_CMAP\n}\n\ninterface HodographGLElems<ArrayType extends TypedArray, MapType extends MapLikeType> {\n    gl: WebGLAnyRenderingContext;\n    map: MapType;\n    bg_billboard: BillboardCollection<ArrayType>;\n}\n\n/** A class representing a field of hodograph plots */\nclass Hodographs<MapType extends MapLikeType> extends PlotComponent<MapType> {\n    private profile_field: RawProfileField;\n    public readonly opts: Required<HodographOptions>;\n\n    private gl_elems: HodographGLElems<Float16Array, MapType> | null;\n    private line_elems: {hodo_line: PolylineCollection, sm_line: PolylineCollection} | null;\n    private hodo_bg_texture: HTMLCanvasElement;\n    private readonly hodo_scale;\n    private readonly bg_size;\n\n    /**\n     * Create a field of hodographs\n     * @param profile_field - The grid of profiles to plot\n     * @param opts          - Various options to use when creating the hodographs \n     */\n    constructor(profile_field: RawProfileField, opts?: HodographOptions) {\n        super();\n        \n        this.profile_field = profile_field;\n        this.opts = normalizeOptions(opts, hodograph_opt_defaults);\n\n        this.hodo_bg_texture = _createHodoBackgroundTexture(this.opts.background_line_width * LINE_WIDTH_MULTIPLIER);\n        this.hodo_scale = (HODO_BG_DIMS.BB_TEX_WIDTH - this.opts.background_line_width / 2) / (HODO_BG_DIMS.BB_TEX_WIDTH * BG_MAX_RING_MAG);\n        this.bg_size = 140;\n\n        this.gl_elems = null;\n        this.line_elems = null;\n    }\n\n    /**\n     * Update the profiles displayed\n     * @param field - The new profiles to display as hodographs\n     */\n    public async updateField(field: RawProfileField) {\n        this.profile_field = field;\n\n        if (this.gl_elems === null) return;\n        // XXX: This might leak VRAM\n        const gl = this.gl_elems.gl;\n\n        this.gl_elems.bg_billboard.updateField(field.getStormMotionGrid());\n\n        const profiles = this.profile_field.profiles;\n        \n        const hodo_polyline = profiles.map(prof => {\n            const zoom = getMinZoom(prof['jlat'], prof['ilon'], this.opts.thin_fac);\n\n            return {\n                'offsets': [...prof['u']].map((u, ipt) => [u - prof['smu'], prof['v'][ipt] - prof['smv']]),\n                'vertices': [...prof['u']].map(u => [prof['lon'], prof['lat']]),\n                'zoom': zoom,\n                'data': [...prof['z']],\n            } as LineData;\n        });\n\n        const hodo_line = await PolylineCollection.make(gl, hodo_polyline, {line_width: this.opts.hodo_line_width, cmap: this.opts.height_cmap, offset_scale: this.hodo_scale * this.bg_size});\n\n        const sm_polyline = profiles.map(prof => {\n            const zoom = getMinZoom(prof['jlat'], prof['ilon'], this.opts.thin_fac);\n\n            const sm_mag = Math.hypot(prof['smu'], prof['smv']);\n            const sm_ang = Math.PI / 2 - Math.atan2(-prof['smv'], -prof['smu']);\n            const buffer = 2\n\n            return {\n                'offsets': [[buffer * Math.sin(sm_ang), buffer * Math.cos(sm_ang)], \n                              [sm_mag * Math.sin(sm_ang), sm_mag * Math.cos(sm_ang)]],\n                'vertices': [[prof['lon'], prof['lat']], [prof['lon'], prof['lat']]],\n                'zoom': zoom\n            } as LineData;\n        });\n\n        const sm_line = await PolylineCollection.make(gl, sm_polyline, {line_width: this.opts.background_line_width, color: this.opts.bgcolor, offset_scale: this.hodo_scale * this.bg_size});\n\n        this.line_elems = {\n            hodo_line: hodo_line, sm_line: sm_line\n        }\n    }\n\n    /**\n     * @internal\n     * Add the hodographs to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        const bg_image = {'format': gl.RGBA, 'type': gl.UNSIGNED_BYTE, 'image': this.hodo_bg_texture, 'mag_filter': gl.NEAREST};\n        const max_zoom = map.getMaxZoom();\n\n        const bg_billboard = new BillboardCollection(this.profile_field.getStormMotionGrid(), this.opts.thin_fac, max_zoom, bg_image, HODO_BG_DIMS, this.bg_size * 0.004,\n                                                     {color: Color.fromHex(this.opts.bgcolor)});\n        await bg_billboard.setup(gl);\n\n        this.gl_elems = {\n            gl: gl, map: map, bg_billboard: bg_billboard\n        };\n\n        this.updateField(this.profile_field);\n    }\n\n    /**\n     * @internal\n     * Render the hodographs\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.gl_elems === null || this.line_elems === null) return;\n        const gl_elems = this.gl_elems;\n        const line_elems = this.line_elems;\n\n        const zoom = gl_elems.map.getZoom();\n        const map_width = gl_elems.map.getCanvas().width;\n        const map_height = gl_elems.map.getCanvas().height;\n        const bearing = gl_elems.map.getBearing();\n        const pitch = gl_elems.map.getPitch();\n\n        line_elems.hodo_line.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n        line_elems.sm_line.render(gl, matrix, [map_width, map_height], zoom, bearing, bearing);\n        gl_elems.bg_billboard.render(gl, matrix, [map_width, map_height], zoom, bearing, pitch);\n    }\n}\n\nexport default Hodographs;\nexport type {HodographOptions};","\nimport { WebGLAnyRenderingContext } from './AutumnTypes';\nimport { MapLikeType } from './Map';\n\nimport { PlotComponent } from './PlotComponent';\n\nabstract class PlotLayerBase<MapType extends MapLikeType> {\n    public readonly type: 'custom';\n    public readonly id: string;\n    protected map: MapType | null;\n\n    constructor(id: string) {\n        this.type = 'custom';\n        this.id = id;\n        this.map = null;\n    }\n\n    public abstract onAdd(map: MapType, gl: WebGLAnyRenderingContext) : void;\n    public abstract render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) : void;\n\n    protected repaint() {\n        if (this.map !== null) {\n            this.map.triggerRepaint();\n        }\n    }\n}\n\n/** \n * A static map layer. The data are assumed to be static in time. If the data have a time component (e.g., a model forecast), an {@link MultiPlotLayer} \n * may be more appropriate.\n * @example\n * // Create map layers from provided fields\n * const height_layer = new PlotLayer('height-contours', height_contours);\n * const wind_speed_layer = new PlotLayer('wind-speed-fill', wind_speed_fill);\n * const barb_layer = new PlotLayer('barbs', wind_barbs);\n */\nclass PlotLayer<MapType extends MapLikeType> extends PlotLayerBase<MapType> {\n    private readonly field: PlotComponent<MapType>;\n\n    /**\n     * Create a map layer from a field\n     * @param id    - A unique id for this layer\n     * @param field - The field to plot in this layer\n     */\n    constructor(id: string, field: PlotComponent<MapType>) {\n        super(id);\n        this.field = field;\n    }\n\n    /**\n     * @internal\n     * Add this layer to a map\n     */\n    public async onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.map = map;\n        await this.field.onAdd(map, gl);\n    }\n\n    /**\n     * @internal\n     * Render this layer\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        this.field.render(gl, matrix);\n    }\n}\n\n/**\n * A varying map layer. If the data don't have a varying component, such as over time, it might be easier to use an {@link PlotLayer} instead.\n * @example\n * // Create a varying map layer\n * height_layer = new MultiPlotLayer('height-contours');\n * \n * // Add some fields to it\n * height_layer.addField(height_contour_f00, '20230112_1200');\n * height_layer.addField(height_contour_f01, '20230112_1300');\n * height_layer.addField(height_contour_f02, '20230112_1400');\n * \n * // Set the date/time in the map layer\n * height_layer.setActiveKey('20230112_1200');\n */\nclass MultiPlotLayer<MapType extends MapLikeType> extends PlotLayerBase<MapType> {\n    private fields: Record<string, PlotComponent<MapType>>;\n    private field_key: string | null;\n\n    private gl: WebGLAnyRenderingContext | null;\n\n    /**\n     * Create a time-varying map layer\n     * @param id - A unique id for this layer\n     */\n    constructor(id: string) {\n        super(id);\n\n        this.fields = {};\n        this.field_key = null;\n        this.map = null;\n        this.gl = null;\n    }\n\n    /**\n     * @internal\n     * Add this layer to a map\n     */\n    public onAdd(map: MapType, gl: WebGLAnyRenderingContext) {\n        this.map = map;\n        this.gl = gl;\n\n        Object.values(this.fields).forEach(field => {\n            field.onAdd(map, gl).then(res => {\n                this.repaint();\n            });\n        });\n\n        this.repaint();\n    }\n\n    /**\n     * @internal\n     * Render this layer\n     */\n    public render(gl: WebGLAnyRenderingContext, matrix: number[] | Float32Array) {\n        if (this.map !== null && this.gl !== null && this.field_key !== null \n            && this.fields.hasOwnProperty(this.field_key) && this.fields[this.field_key] !== null) {\n            this.fields[this.field_key].render(gl, matrix);\n        }\n    }\n\n    /**\n     * Set the active key\n     * @param key - The new key. The field with that key is plotted immediately.\n     */\n    public setActiveKey(key: string) {\n        const old_field_key = this.field_key;\n        this.field_key = key;\n\n        this.repaint();\n    }\n\n    /**\n     * Get a list of all dates/times that have been added to the layer\n     * @returns An array of dates/times\n     */\n    public getKeys() {\n        return Object.keys(this.fields);\n    }\n\n    /**\n     * Add a field with a given key\n     * @param field - The field to add\n     * @param key   - The key to associate with the field\n     */\n    public addField(field: PlotComponent<MapType>, key: string) {\n        const old_field_key = this.field_key;\n\n        if (this.map !== null && this.gl !== null && field !== null) {\n            field.onAdd(this.map, this.gl).then(res => {\n                this.repaint();\n            });\n        }\n\n        this.fields[key] = field;\n        \n        if (this.field_key === null) {\n            this.field_key = key;\n        }\n    }\n}\n\nexport {PlotLayer, MultiPlotLayer};","\nimport { ColorMap } from \"./Colormap\";\nimport { Color } from \"./Color\";\n\ntype ColorbarOrientation = 'horizontal' | 'vertical';\ntype ColorbarTickDirection = 'top' | 'bottom' | 'left' | 'right';\ninterface ColorBarOptions {\n    /** The label to place along the color bar */\n    label?: string;\n\n    /** \n     * An array of numbers to use as the tick locations. \n     * @default Use all the levels in the color map provided to {@link makeColorBar}.\n     */\n    ticks?: number[];\n\n    /** \n     * The direction the ticks should face. Valid values are 'left' and 'right' if orientation is 'vertical' and 'top' and \n     * 'bottom' if orientation is 'horizontal'.\n     * @default 'left' if orientation is 'vertical' and 'bottom' if orientation is 'horizontal'\n     */\n    tick_direction?: ColorbarTickDirection;\n\n    /** \n     * The orientation for the color bar. Valid values are 'horizontal' and 'vertical'.\n     * @default 'vertical'\n     */\n    orientation?: ColorbarOrientation;\n\n    /** \n     * A font face to use for the label and tick values.\n     * @default 'sans-serif'\n     */\n    fontface?: string;\n\n    /**\n     * The font size (in points) to use for the tick labels\n     * @default 12\n     */\n    ticklabelsize?: number;\n};\n\nconst createElement = (tagname: string, attributes?: Record<string, string | number>, parent?: SVGElement) => {\n    const elem = document.createElementNS('http://www.w3.org/2000/svg', tagname);\n\n    if (attributes !== undefined) {\n        Object.entries(attributes).forEach(([k, v]) => {\n            elem.setAttribute(k, v.toString());\n        });\n    }\n\n    if (parent !== undefined) {\n        parent.appendChild(elem);\n    }\n\n    return elem;\n};\n\n/**\n * Make an SVG containing a color bar. The color bar can either be oriented horizontal or vertical, and a label can be provided.\n * @param colormap - The color map to use\n * @param opts     - The options for creating the color bar\n * @returns An SVGElement containing the color bar image.\n * @example\n * // Create the color bar\n * const svg = makeColorBar(color_map, {label: 'Wind Speed (kts)', orientation: 'horizontal', \n *                                      fontface: 'Trebuchet MS'});\n * \n * // Add colorbar to the page\n * document.getElementById('colorbar-container').appendChild(svg);\n */\nfunction makeColorBar(colormap: ColorMap, opts: ColorBarOptions) {\n    const label = opts.label || \"\";\n    const ticks = opts.ticks || colormap.levels;\n    const orientation = opts.orientation || 'vertical';\n    const fontface = opts.fontface || 'sans-serif';\n    const tickfontsize = opts.ticklabelsize || 12;\n\n    const tick_dir = opts.tick_direction || (orientation == 'vertical' ? 'left' : 'bottom');\n\n    if (orientation == 'vertical' && (tick_dir == 'top' || tick_dir == 'bottom') ||\n        orientation == 'horizontal' && (tick_dir == 'left' || tick_dir == 'right')) {\n        throw `tick_direction of '${tick_dir} doesn't match an orientation of ${orientation}`;\n    }\n\n    const getNChar = (n: number) => {\n        return n.toString().length;\n    }\n\n    const chars_left = getNChar(ticks[0]);\n    const chars_right = getNChar(ticks[ticks.length - 1]);\n    const need_overflow = colormap.underflow_color !== null || colormap.overflow_color !== null;\n\n    const bar_long_size = 600;\n    const bar_cross_size = bar_long_size / 9;\n    const bar_long_pad = Math.max(orientation == 'horizontal' ? Math.max(chars_left, chars_right) * 6 : 8, \n                                  need_overflow ? bar_cross_size / (2 * Math.sqrt(3)) : 0);\n    const bar_cross_pad = 3;\n    const bar_thickness = 10;\n\n    let height: number, width: number, bar_left: number, bar_top: number, bar_width: number, bar_height: number, bar_right: number, bar_bottom: number,\n        bar_middle: number, bar_low_arrow: number, bar_high_arrow: number;\n\n    if (orientation == 'vertical') {\n        height = bar_long_size;\n        width = bar_cross_size;\n\n        bar_left = tick_dir == 'left' ? bar_cross_size - bar_cross_pad - bar_thickness : bar_cross_pad;\n        bar_top = bar_long_pad;\n        bar_width = bar_thickness;\n        bar_height = bar_long_size - 2 * bar_long_pad;\n\n        bar_right = bar_left + bar_width;\n        bar_middle = bar_left + bar_width / 2;\n        bar_bottom = bar_top + bar_height;\n        bar_low_arrow = colormap.underflow_color === null ? bar_bottom : bar_bottom + bar_cross_size / (Math.sqrt(3) * 2);\n        bar_high_arrow = colormap.overflow_color === null ? bar_top : bar_top - bar_cross_size / (Math.sqrt(3) * 2);\n    }\n    else {\n        width = bar_long_size;\n        height = bar_cross_size - 6;\n\n        bar_left = bar_long_pad;\n        bar_top = tick_dir == 'bottom' ? bar_cross_pad : bar_cross_size - 6 - bar_cross_pad - bar_thickness;\n        bar_height = bar_thickness;\n        bar_width = bar_long_size - 2 * bar_long_pad;\n\n        bar_right = bar_left + bar_width;\n        bar_middle = bar_top + bar_height / 2;\n        bar_bottom = bar_top + bar_height;\n        bar_low_arrow = colormap.underflow_color === null ? bar_left : bar_left - bar_cross_size / (Math.sqrt(3) * 2);\n        bar_high_arrow = colormap.overflow_color === null ? bar_right : bar_right + bar_cross_size / (Math.sqrt(3) * 2);\n    }\n\n    const n_colors = colormap.colors.length;\n\n    const root = createElement('svg', {width: width, height: height});\n    const gbar = createElement('g', {}, root);\n\n    let gtickattrs;\n    if (orientation == 'vertical') {\n        gtickattrs = tick_dir == 'left' ? {'text-anchor': 'end', transform: `translate(${bar_left}, ${bar_top})`} : \n                                          {transform: `translate(${bar_left + bar_width}, ${bar_top})`}\n    }\n    else {\n        gtickattrs = tick_dir == 'bottom' ? {'text-anchor': 'middle', transform: `translate(${bar_left}, ${bar_top + bar_height})`} : \n                                            {'text-anchor': 'middle', transform: `translate(${bar_left}, ${bar_top})`}\n    }\n    const gticks = createElement('g', gtickattrs, root);\n\n    // Make the colored background\n    colormap.colors.forEach((color, icolor) => {\n        let attrs: Record<string, string | number> = {};\n\n        if (orientation == 'vertical') {\n            attrs = {\n                x: bar_left, y: bar_top + bar_height * (1 - (icolor + 1) / n_colors), width: bar_width, height: bar_height / n_colors};\n        }\n        else {\n            attrs = {x: bar_left + bar_width * icolor / n_colors, y: bar_top, width: bar_width / n_colors, height: bar_height};\n        }\n\n        createElement('rect', {...attrs, fill: color.toRGBHex(), opacity: color.a}, gbar);\n    });\n\n    // Make the overflow and underflow triangles\n    if (colormap.underflow_color !== null) {\n        let point_list: string;\n        if (orientation == 'vertical') {\n            point_list = `${bar_right} ${bar_bottom}, ${bar_middle} ${bar_low_arrow}, ${bar_left} ${bar_bottom}, ${bar_right} ${bar_bottom}`;\n        }\n        else {\n            point_list = `${bar_left} ${bar_bottom}, ${bar_low_arrow} ${bar_middle}, ${bar_left} ${bar_top}, ${bar_left} ${bar_bottom}`;\n        }\n\n        const underflow_attrs = {points: point_list, fill: colormap.underflow_color.toRGBHex(), opacity: colormap.underflow_color.a};\n        createElement('polygon', underflow_attrs, gbar);\n    }\n\n    if (colormap.overflow_color !== null) {\n        let point_list: string;\n        if (orientation == 'vertical') {\n            point_list = `${bar_left} ${bar_top}, ${bar_middle} ${bar_high_arrow}, ${bar_right} ${bar_top}, ${bar_left} ${bar_top}`;\n        }\n        else {\n            point_list = `${bar_right} ${bar_top}, ${bar_high_arrow} ${bar_middle}, ${bar_right} ${bar_bottom}, ${bar_right} ${bar_top}`;\n        }\n\n        const overflow_attrs = {points: point_list, fill: colormap.overflow_color.toRGBHex(), opacity: colormap.overflow_color.a};\n        createElement('polygon', overflow_attrs, gbar);\n    }\n\n    // Make the ticks marks and labels\n    const first_level = colormap.levels[0];\n    const last_level = colormap.levels[colormap.levels.length - 1];\n\n    ticks.filter(level => first_level <= level && level <= last_level).forEach(level => {\n        const diffs = colormap.levels.map(l => Math.abs(l - level));\n        let ilevel = diffs.indexOf(diffs.reduce((a, b) => Math.min(a, b)));\n        if (level <= colormap.levels[ilevel] && ilevel > 0)\n            ilevel -= 1;\n        ilevel += (level - colormap.levels[ilevel]) / (colormap.levels[ilevel + 1] - colormap.levels[ilevel]);\n        const tickattrs = orientation == 'vertical' ? {transform: `translate(0, ${bar_height * (1 - ilevel / n_colors)})`} : \n                                                      {transform: `translate(${bar_width * ilevel / n_colors}, 0)`};\n        const gtick = createElement('g', tickattrs, gticks);\n\n        let lineattrs;\n        if (orientation == 'vertical') {\n            lineattrs = tick_dir == 'left' ? {x2: -6} : {x2: 6};\n        }\n        else {\n            lineattrs = tick_dir == 'bottom' ? {y2 : 6} : {y2: -6};\n        }\n\n        createElement('line', {...lineattrs, stroke: '#000000', 'stroke-width': 1.5}, gtick);\n\n        let textattrs;\n        if (orientation == 'vertical') {\n            textattrs = tick_dir == 'left' ? {x: -9, dy: '0.32em'} : {x: 9, dy: '0.32em'};\n        }\n        else {\n            textattrs = tick_dir == 'bottom' ? {y: 9, dy: '0.8em'} : {y: -9, dy: '0em'};\n        }\n\n        const text = createElement('text', {...textattrs, fill: '#000000', style: `font-family: ${fontface}; font-size: ${tickfontsize}pt`}, gtick);\n        text.textContent = level.toString();\n    });\n\n    // Draw the outline\n    let point_list: string;\n    if (orientation == 'vertical') {\n        point_list = `${bar_left} ${bar_top}, ${bar_middle} ${bar_high_arrow}, ${bar_right} ${bar_top}, ${bar_right} ${bar_bottom}, ` +\n                     `${bar_middle} ${bar_low_arrow}, ${bar_left} ${bar_bottom}, ${bar_left} ${bar_top}`;\n    }\n    else {\n        point_list = `${bar_left} ${bar_top}, ${bar_right} ${bar_top}, ${bar_high_arrow} ${bar_middle}, ${bar_right} ${bar_bottom}, ` +\n                     `${bar_left} ${bar_bottom}, ${bar_low_arrow} ${bar_middle}, ${bar_left} ${bar_top}`;\n    }\n\n    const outline_attrs = {\n        points: point_list,\n        stroke: '#000000',\n        'stroke-width': 1.5,\n        fill: 'none'\n    };\n    createElement('polygon', outline_attrs, root);\n\n    // Draw the colorbar label\n    let labelattrs;\n    if (orientation == 'vertical') {\n        labelattrs = tick_dir == 'left' ? {transform: `translate(15, ${height / 2}) rotate(-90)`} : {transform: `translate(${width - 6}, ${height / 2}) rotate(-90)`};\n    }\n    else {\n        labelattrs = tick_dir == 'bottom' ? {transform: `translate(${width / 2}, ${height - 5})`} : {transform: `translate(${width / 2}, 15)`}\n    }\n    const label_elem = createElement('text', {...labelattrs, fill: '#000000', 'text-anchor': 'middle', style: `font-family: ${fontface};`}, root);\n    label_elem.textContent = label;\n\n    return root;\n}\n\ninterface PaintballKeyOptions {\n    /**\n     * The number of columns of entries in the key\n     * @default 1\n     */\n    n_cols?: number;\n\n    /** \n     * A font face to use for the label and tick values.\n     * @default 'sans-serif'\n     */\n    fontface?: string;\n}\n\n/**\n * Make an SVG containing a color key for a paintball plot. The key can be split over any number of columns.\n * @param colors - A list of colors \n * @param labels - The labels corresponding to each color\n * @param opts   - The options for creating the color key\n * @returns An SVGElement containing the color bar image.\n * @example\n * // Create the color key\n * const svg = makePaintballKey(colors, labels, {n_cols: 2, fontface: 'Trebuchet MS'});\n * \n * // Add the color key to the page\n * document.getElementById('pb-key-container').appendChild(svg);\n */\nfunction makePaintballKey(colors: (Color | string)[], labels: string[], opts?: PaintballKeyOptions) {\n    if (colors.length != labels.length) {\n        throw `Mismatch between the number of colors (${colors.length}) and the number of labels (${labels.length})`;\n    }\n\n    opts = opts === undefined ? {} : opts;\n    const n_cols = opts.n_cols === undefined ? 1: opts.n_cols;\n    const fontface = opts.fontface === undefined ? 'sans-serif' : opts.fontface;\n\n    let height: number, width: number;\n\n    const swatch_width = 20;\n    const swatch_height = 20;\n    const swatch_text_pad = 3;\n    const swatch_text_space = 100;\n    const swatch_width_pad = 5;\n    const swatch_height_pad = 5;\n\n    const n_rows = Math.ceil(colors.length / n_cols);\n\n    width = (swatch_width + swatch_text_pad + swatch_text_space) * n_cols + swatch_width_pad * (n_cols + 1);\n    height = swatch_height * n_rows + swatch_height_pad * (n_rows + 1);\n\n    const root = createElement('svg', {width: width, height: height});\n    const gbar = createElement('g', {}, root);\n\n    colors.forEach((color, icolor) => {\n        const label = labels[icolor];\n\n        const irow = icolor % n_rows;\n        const icol = Math.floor(icolor / n_rows);\n\n        let opacity = 1.;\n        if (typeof color != 'string') {\n            opacity = color.a;\n            color = color.toRGBHex();\n        }\n\n        const x = swatch_width_pad + icol * (swatch_width + swatch_text_pad + swatch_text_space + swatch_width_pad);\n        const y = swatch_height_pad + irow * (swatch_height + swatch_height_pad);\n\n        createElement('rect', {x: x, y: y, fill: color, opacity: opacity, width: swatch_width, height: swatch_height}, gbar);\n\n        let textattrs = {x: x + swatch_width + swatch_text_pad, y: y + swatch_height / 2, dy: '0.32em'};\n\n        const text = createElement('text', {...textattrs, fill: '#000000', style: `font-size: 0.8em; font-family: ${fontface};`}, gbar);\n        text.textContent = label;\n    })\n\n    return root;\n}\n\nexport {makeColorBar, makePaintballKey};\nexport type {ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions};","\nimport Module from './cpp/marchingsquares';\nimport { MarchingSquaresModule } from './cpp/marchingsquares';\nimport './cpp/marchingsquares.wasm';\nimport { Grid } from \"./Grid\";\nimport { ContourData, TypedArray } from \"./AutumnTypes\";\n\nlet msm_promise: Promise<MarchingSquaresModule> | null = null;\n\nfunction initMSModule() {\n    if (msm_promise === null) {\n        msm_promise = Module();\n    }\n\n    return msm_promise;\n}\n\ninterface FieldContourOpts {\n    /**\n     * The interval at which to create contours. The field will be contoured at this interval from its minimum to its maximum.\n     */\n    interval?: number;\n\n    /**\n     * Contour the field at these specific levels.\n     */\n    levels?: number[];\n}\n\nasync function contourCreator<ArrayType extends TypedArray>(data: ArrayType, grid: Grid, opts: FieldContourOpts) {\n    if (opts.interval === undefined && opts.levels === undefined) {\n        throw \"Must supply either an interval or levels to contourCreator()\"\n    }\n\n    const interval = opts.interval === undefined ? 0 : opts.interval;\n\n    const msm = await initMSModule();\n\n    const grid_coords = grid.getGridCoords();\n\n    const getContourLevels = data instanceof Float32Array ? msm.getContourLevelsFloat32 : msm.getContourLevelsFloat16;\n    const makeContours = data instanceof Float32Array ? msm.makeContoursFloat32 : msm.makeContoursFloat16;\n\n    const levels = opts.levels === undefined ? getContourLevels(data, grid.ni, grid.nj, interval) : opts.levels;\n    const contours = makeContours(data, grid_coords.x, grid_coords.y, levels, (x: number, y: number) => grid.transform(x, y, {inverse: true}));\n\n    return contours as ContourData;\n}\n\nexport {contourCreator, initMSModule};\nexport type {FieldContourOpts};","\nimport { Float16Array } from \"@petamoriken/float16\";\nimport { ContourData, TypedArray, WindProfile } from \"./AutumnTypes\";\nimport { contourCreator, FieldContourOpts } from \"./ContourCreator\";\nimport { Grid } from \"./Grid\";\nimport { Cache, zip } from \"./utils\";\n\ntype TextureDataType<ArrayType> = ArrayType extends Float32Array ? Float32Array : Uint16Array;\n\nfunction getArrayConstructor<ArrayType extends TypedArray>(ary: ArrayType) : new(...args: any[]) => ArrayType {\n    return ary.constructor as new(...args: any[]) => ArrayType;\n}\n\n/** A class representing a raw 2D field of gridded data, such as height or u wind. */\nclass RawScalarField<ArrayType extends TypedArray> {\n    public readonly grid: Grid;\n    public readonly data: ArrayType;\n\n    private readonly contour_cache: Cache<[FieldContourOpts], Promise<ContourData>>;\n\n    /**\n     * Create a data field. \n     * @param grid - The grid on which the data are defined\n     * @param data - The data, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid.\n     */\n    constructor(grid: Grid, data: ArrayType) {\n        this.grid = grid;\n        this.data = data;\n\n        if (grid.ni * grid.nj != data.length) {\n            throw `Data size (${data.length}) doesn't match the grid dimensions (${grid.ni} x ${grid.nj}; expected ${grid.ni * grid.nj} points)`;\n        }\n\n        this.contour_cache = new Cache(async (opts: FieldContourOpts) => {\n            return await contourCreator(this.data, this.grid, opts);\n        });\n    }\n\n    /** @internal */\n    public getTextureData() : TextureDataType<ArrayType> {\n        // Need to give float16 data as uint16s to make WebGL happy: https://github.com/petamoriken/float16/issues/105\n        const raw_data = this.data;\n        let data: any;\n        if (raw_data instanceof Float32Array) {\n            data = raw_data;\n        }\n        else {\n            data = new Uint16Array(raw_data.buffer);\n        }\n\n        return data as TextureDataType<ArrayType>;\n    }\n\n    public async getContours(opts: FieldContourOpts) {\n        return await this.contour_cache.getValue(opts);\n    }\n\n    /**\n     * Create a new field by aggregating a number of fields using a specific function\n     * @param func - A function that will be applied each element of the field. It should take the same number of arguments as fields you have and return a single number.\n     * @param args - The RawScalarFields to aggregate\n     * @returns a new gridded field\n     * @example\n     * // Compute wind speed from u and v\n     * wind_speed_field = RawScalarField.aggreateFields(Math.hypot, u_field, v_field);\n     */\n    public static aggregateFields<ArrayType extends TypedArray>(func: (...args: number[]) => number, ...args: RawScalarField<ArrayType>[]) {\n        function* mapGenerator<T, U>(gen: Generator<T>, func: (arg: T) => U) {\n            for (const elem of gen) {\n                yield func(elem);\n            }\n        }\n\n        const arrayType = getArrayConstructor(args[0].data);\n        const zipped_args = zip(...args.map(a => a.data));\n        const agg_data = new arrayType(mapGenerator(zipped_args, (a: number[]): number => func(...a)));\n\n        return new RawScalarField(args[0].grid, agg_data);\n    }\n}\n\ntype VectorRelativeTo = 'earth' | 'grid';\n\ninterface RawVectorFieldOptions {\n    /**\n     * Whether the vectors are relative to the grid ('grid') or Earth ('earth')\n     * @default 'grid'\n     */\n    relative_to?: VectorRelativeTo;\n}\n\n/** A class representing a 2D gridded field of vectors */\nclass RawVectorField<ArrayType extends TypedArray> {\n    public readonly u: RawScalarField<ArrayType>;\n    public readonly v: RawScalarField<ArrayType>;\n    public readonly relative_to: VectorRelativeTo;\n\n    /**\n     * Create a vector field.\n     * @param grid - The grid on which the vector components are defined\n     * @param u    - The u (east/west) component of the vectors, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid\n     * @param v    - The v (north/south) component of the vectors, which should be given as a 1D array in row-major order, with the first element being at the lower-left corner of the grid\n     * @param opts - Options for creating the vector field.\n     */\n    constructor(grid: Grid, u: ArrayType, v: ArrayType, opts?: RawVectorFieldOptions) {\n        opts = opts === undefined ? {}: opts;\n\n        this.u = new RawScalarField(grid, u);\n        this.v = new RawScalarField(grid, v);\n        this.relative_to = opts.relative_to === undefined ? 'grid' : opts.relative_to;\n    }\n\n    public getTextureData() {\n        // Need to give float16 data as uint16s to make WebGL happy: https://github.com/petamoriken/float16/issues/105\n        const raw_u = this.u.data;\n        const raw_v = this.v.data;\n\n        const u: any = raw_u instanceof Float32Array ? raw_u : new Uint16Array(raw_u.buffer);\n        const v: any = raw_v instanceof Float32Array ? raw_v : new Uint16Array(raw_v.buffer);\n\n        return {u: u as TextureDataType<ArrayType>, v: v as TextureDataType<ArrayType>};\n    }\n\n    public getThinnedField(thin_x: number, thin_y: number) {\n        const new_grid = this.grid.getThinnedGrid(thin_x, thin_y);\n\n        const thinGrid = (data: ArrayType) => {\n            const arrayType = getArrayConstructor(data);\n            const new_data = new arrayType(new_grid.ni * new_grid.nj);\n    \n            for (let i = 0; i < new_grid.ni; i++) {\n                for (let j = 0 ; j < new_grid.nj; j++) {\n                    const idx_old = i * thin_x + this.grid.ni * j * thin_y;\n                    const idx = i + new_grid.ni * j;\n    \n                    new_data[idx] = data[idx_old];\n                }\n            }\n\n            return new_data;\n        }\n\n        const thin_u = thinGrid(this.u.data);\n        const thin_v = thinGrid(this.v.data);\n\n        return new RawVectorField(new_grid, thin_u, thin_v, {relative_to: this.relative_to});\n    }\n\n    public get grid() {\n        return this.u.grid\n    }\n}\n\n/** A class grid of wind profiles */\nclass RawProfileField {\n    public readonly profiles: WindProfile[];\n    public readonly grid: Grid;\n\n    /**\n     * Create a grid of wind profiles\n     * @param grid     - The grid on which the profiles are defined\n     * @param profiles - The wind profiles themselves, which should be given as a 1D array in row-major order, with the first profile being at the lower-left corner of the grid\n     */\n    constructor(grid: Grid, profiles: WindProfile[]) {\n        this.profiles = profiles;\n        this.grid = grid;\n    }\n\n    /** Get the gridded storm motion vector field (internal method) */\n    public getStormMotionGrid() {\n        const profiles = this.profiles\n        const u = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n        const v = new Float16Array(this.grid.ni * this.grid.nj).fill(parseFloat('nan'));\n\n        profiles.forEach(prof => {\n            const idx = prof.ilon + this.grid.ni * prof.jlat;\n            u[idx] = prof.smu;\n            v[idx] = prof.smv;\n        });\n\n        return new RawVectorField(this.grid, u, v, {relative_to: 'grid'});\n    }\n}\n\nexport {RawScalarField, RawVectorField, RawProfileField};\nexport type {RawVectorFieldOptions, VectorRelativeTo, TextureDataType};","import { Float16Array } from \"@petamoriken/float16\";\nimport { WGLBuffer, WGLTexture, WGLTextureSpec } from \"autumn-wgl\";\nimport { WebGLAnyRenderingContext } from \"./AutumnTypes\";\nimport { lambertConformalConic, rotateSphere } from \"./Map\";\nimport { getGLFormatTypeAlignment, layer_worker } from \"./PlotComponent\";\nimport { Cache } from \"./utils\";\n\ninterface EarthCoords {\n    lons: Float32Array;\n    lats: Float32Array;\n}\n\ninterface GridCoords {\n    x: Float32Array;\n    y: Float32Array;\n}\n\nasync function makeWGLDomainBuffers(gl: WebGLAnyRenderingContext, grid: Grid, native_grid?: Grid) {\n    native_grid = native_grid !== undefined ? native_grid: grid;\n\n    const texcoord_margin_r = 1 / (2 * native_grid.ni);\n    const texcoord_margin_s = 1 / (2 * native_grid.nj);\n\n    const grid_cell_size_multiplier = (grid.ni * grid.nj) / (native_grid.ni * native_grid.nj);\n\n    const {lats: field_lats, lons: field_lons} = grid.getEarthCoords();\n    const domain_coords = await layer_worker.makeDomainVerticesAndTexCoords(field_lats, field_lons, grid.ni, grid.nj, texcoord_margin_r, texcoord_margin_s);\n\n    for (let icd = 0; icd < domain_coords['grid_cell_size'].length; icd++) {\n        domain_coords['grid_cell_size'][icd] *= grid_cell_size_multiplier;\n    }\n\n    const vertices = new WGLBuffer(gl, domain_coords['vertices'], 2, gl.TRIANGLE_STRIP);\n    const texcoords = new WGLBuffer(gl, domain_coords['tex_coords'], 2, gl.TRIANGLE_STRIP);\n    const grid_cell_size = new WGLBuffer(gl, domain_coords['grid_cell_size'], 1, gl.TRIANGLE_STRIP);\n\n    return {'vertices': vertices, 'texcoords': texcoords, 'cellsize': grid_cell_size};\n}\n\nasync function makeWGLBillboardBuffers(gl: WebGLAnyRenderingContext, grid: Grid, thin_fac: number, max_zoom: number) {\n    const {lats: field_lats, lons: field_lons} = grid.getEarthCoords();\n    const bb_elements = await layer_worker.makeBBElements(field_lats, field_lons, grid.ni, grid.nj, thin_fac, max_zoom);\n\n    const vertices = new WGLBuffer(gl, bb_elements['pts'], 3, gl.TRIANGLE_STRIP);\n    const texcoords = new WGLBuffer(gl, bb_elements['tex_coords'], 2, gl.TRIANGLE_STRIP);\n\n    return {'vertices': vertices, 'texcoords': texcoords};\n}\n\nfunction makeVectorRotationTexture(gl: WebGLAnyRenderingContext, grid: Grid) {\n    const coords = grid.getEarthCoords();\n\n    if (!grid.is_conformal) {\n        // If the grid is non-conformal, we need a fully general change of basis from grid coordinates to earth coordinates. This is not supported for now, so warn about it.\n        console.warn('Vector rotations for non-conformal projections are not supported. The output may look incorrect.')\n    }\n\n    const rot_vals = new Float16Array(coords.lats.length);\n\n    for (let icd = 0; icd < coords.lats.length; icd++) {\n        const lon = coords.lons[icd];\n        const lat = coords.lats[icd];\n\n        const [x, y] = grid.transform(lon, lat);\n        const [x_pertlon, y_pertlon] = grid.transform(lon + 0.01, lat);\n        rot_vals[icd] = Math.atan2(y_pertlon - y, x_pertlon - x);\n    }\n\n    const {format, type, row_alignment} = getGLFormatTypeAlignment(gl, true);\n\n    const rot_img: WGLTextureSpec = {\n        format: format, type: type, row_alignment: row_alignment, image: new Uint16Array(rot_vals.buffer),\n        width: grid.ni, height: grid.nj, mag_filter: gl.LINEAR\n    };\n\n    const rot_tex = new WGLTexture(gl, rot_img);\n    return {'rotation': rot_tex};\n}\n\ntype GridType = 'latlon' | 'latlonrot' | 'lcc';\n\nabstract class Grid {\n    public readonly type: GridType;\n    public readonly ni: number;\n    public readonly nj: number;\n    public readonly is_conformal: boolean;\n\n    private readonly buffer_cache: Cache<[WebGLAnyRenderingContext], Promise<{'vertices': WGLBuffer, 'texcoords': WGLBuffer, 'cellsize': WGLBuffer}>>;\n    private readonly billboard_buffer_cache: Cache<[WebGLAnyRenderingContext, number, number], Promise<{'vertices': WGLBuffer, 'texcoords': WGLBuffer}>>;\n    private readonly vector_rotation_cache: Cache<[WebGLAnyRenderingContext], {'rotation': WGLTexture}>\n\n    constructor(type: GridType, is_conformal: boolean, ni: number, nj: number) {\n        this.type = type;\n        this.is_conformal = is_conformal;\n        this.ni = ni;\n        this.nj = nj;\n\n        this.buffer_cache = new Cache((gl: WebGLAnyRenderingContext) => {\n            const new_ni = Math.max(Math.floor(this.ni / 50), 20);\n            const new_nj = Math.max(Math.floor(this.nj / 50), 20);\n            return makeWGLDomainBuffers(gl, this.copy({ni: new_ni, nj: new_nj}), this);\n        });\n\n        this.billboard_buffer_cache = new Cache((gl: WebGLAnyRenderingContext, thin_fac: number, max_zoom: number) => {\n            return makeWGLBillboardBuffers(gl, this, thin_fac, max_zoom);\n        });\n\n        this.vector_rotation_cache = new Cache((gl: WebGLAnyRenderingContext) => {\n            return makeVectorRotationTexture(gl, this);\n        })\n    }\n\n    public abstract copy(opts?: {ni?: number, nj?: number}): Grid;\n\n    public abstract getEarthCoords(): EarthCoords;\n    public abstract getGridCoords(): GridCoords;\n    public abstract transform(x: number, y: number, opts?: {inverse?: boolean}): [number, number];\n    abstract getThinnedGrid(thin_x: number, thin_y: number): Grid;\n    \n    public async getWGLBuffers(gl: WebGLAnyRenderingContext) {\n        return await this.buffer_cache.getValue(gl);\n    }\n\n    public async getWGLBillboardBuffers(gl: WebGLAnyRenderingContext, thin_fac: number, max_zoom: number) {\n        return await this.billboard_buffer_cache.getValue(gl, thin_fac, max_zoom);\n    }\n\n    public getVectorRotationTexture(gl: WebGLAnyRenderingContext) {\n        return this.vector_rotation_cache.getValue(gl);\n    }\n}\n\n/** A plate carree (a.k.a. lat/lon) grid with uniform grid spacing */\nclass PlateCarreeGrid extends Grid {\n    public readonly ll_lon: number;\n    public readonly ll_lat: number;\n    public readonly ur_lon: number;\n    public readonly ur_lat: number;\n\n    private readonly ll_cache: Cache<[], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a plate carree grid\n     * @param ni     - The number of grid points in the i (longitude) direction\n     * @param nj     - The number of grid points in the j (latitude) direction\n     * @param ll_lon - The longitude of the lower left corner of the grid\n     * @param ll_lat - The latitude of the lower left corner of the grid\n     * @param ur_lon - The longitude of the upper right corner of the grid\n     * @param ur_lat - The latitude of the upper right corner of the grid\n     */\n    constructor(ni: number, nj: number, ll_lon: number, ll_lat: number, ur_lon: number, ur_lat: number) {\n        super('latlon', true, ni, nj);\n\n        this.ll_lon = ll_lon;\n        this.ll_lat = ll_lat;\n        this.ur_lon = ur_lon;\n        this.ur_lat = ur_lat;\n\n        const dlon = (this.ur_lon - this.ll_lon) / (this.ni - 1);\n        const dlat = (this.ur_lat - this.ll_lat) / (this.nj - 1);\n\n        this.ll_cache = new Cache(() => {\n            const lons = new Float32Array(this.ni * this.nj);\n            const lats = new Float32Array(this.ni * this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                for (let j = 0; j < this.nj; j++) {\n                    const idx = i + j * this.ni;\n\n                    lons[idx] = this.ll_lon + i * dlon;\n                    lats[idx] = this.ll_lat + j * dlat;\n                }\n            }\n\n            return {'lons': lons, 'lats': lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_lon + i * dlon;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_lat + j * dlat;\n            }\n\n            return {x: x, y: y};\n        })\n    }\n\n    public copy(opts?: {ni?: number, nj?: number, ll_lon?: number, ll_lat?: number, ur_lon?: number, ur_lat?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_lon = opts.ll_lon !== undefined ? opts.ll_lon : this.ll_lon;\n        const ll_lat = opts.ll_lat !== undefined ? opts.ll_lat : this.ll_lat;\n        const ur_lon = opts.ur_lon !== undefined ? opts.ur_lon : this.ur_lon;\n        const ur_lat = opts.ur_lat !== undefined ? opts.ur_lat : this.ur_lat;\n\n        return new PlateCarreeGrid(ni, nj, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n\n    /**\n     * Get a list of longitudes and latitudes on the grid (internal method)\n     */\n    public getEarthCoords() {\n        return this.ll_cache.getValue();\n    }\n\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        return [x, y] as [number, number];\n    }\n\n    public getThinnedGrid(thin_x: number, thin_y: number) {\n        const dlon = (this.ur_lon - this.ll_lon) / this.ni;\n        const dlat = (this.ur_lat - this.ll_lat) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_lon = this.ll_lon;\n        const ll_lat = this.ll_lat;\n        const ur_lon = this.ur_lon - ni_remove * dlon;\n        const ur_lat = this.ur_lat - nj_remove * dlat;\n\n        return new PlateCarreeGrid(ni, nj, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n}\n\n/** A rotated lat-lon (plate carree) grid with uniform grid spacing */\nclass PlateCarreeRotatedGrid extends Grid {\n    public readonly np_lon: number;\n    public readonly np_lat: number;\n    public readonly lon_shift: number;\n    public readonly ll_lon: number;\n    public readonly ll_lat: number;\n    public readonly ur_lon: number;\n    public readonly ur_lat: number;\n\n    private readonly llrot: (a: number, b: number, opts?: {inverse: boolean}) => [number, number];\n    private readonly ll_cache: Cache<[], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a Lambert conformal conic grid\n     * @param ni        - The number of grid points in the i (longitude) direction\n     * @param nj        - The number of grid points in the j (latitude) direction\n     * @param np_lon    - The longitude of the north pole for the rotated grid\n     * @param np_lat    - The latitude of the north pole for the rotated grid\n     * @param lon_shift - The angle around the rotated north pole to shift the central meridian\n     * @param ll_lon    - The longitude of the lower left corner of the grid (on the rotated earth)\n     * @param ll_lat    - The latitude of the lower left corner of the grid (on the rotated earth)\n     * @param ur_lon    - The longitude of the upper right corner of the grid (on the rotated earth)\n     * @param ur_lat    - The latitude of the upper right corner of the grid (on the rotated earth)\n     */\n    constructor(ni: number, nj: number, np_lon: number, np_lat: number, lon_shift: number, ll_lon: number, ll_lat: number, ur_lon: number, ur_lat: number) {\n        super('latlonrot', true, ni, nj);\n\n        this.np_lon = np_lon;\n        this.np_lat = np_lat;\n        this.lon_shift = lon_shift;\n        this.ll_lon = ll_lon;\n        this.ll_lat = ll_lat;\n        this.ur_lon = ur_lon;\n        this.ur_lat = ur_lat;\n        this.llrot = rotateSphere({np_lon: np_lon, np_lat: np_lat, lon_shift: lon_shift});\n\n        const dlon = (this.ur_lon - this.ll_lon) / (this.ni - 1);\n        const dlat = (this.ur_lat - this.ll_lat) / (this.nj - 1);\n\n        this.ll_cache = new Cache(() => {\n            const lons = new Float32Array(this.ni * this.nj);\n            const lats = new Float32Array(this.ni * this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                const lon_p = this.ll_lon + i * dlon;\n                for (let j = 0; j < this.nj; j++) {\n                    const lat_p = this.ll_lat + j * dlat;\n\n                    const [lon, lat] = this.llrot(lon_p, lat_p);\n                    const idx = i + j * this.ni;\n                    lons[idx] = lon;\n                    lats[idx] = lat;\n                }\n            }\n\n            return {lons: lons, lats: lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_lon + i * dlon;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_lat + j * dlat;\n            }\n\n            return {x: x, y: y};\n        })\n    }\n\n    public copy(opts?: {ni?: number, nj?: number, ll_lon?: number, ll_lat?: number, ur_lon?: number, ur_lat?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_lon = opts.ll_lon !== undefined ? opts.ll_lon : this.ll_lon;\n        const ll_lat = opts.ll_lat !== undefined ? opts.ll_lat : this.ll_lat;\n        const ur_lon = opts.ur_lon !== undefined ? opts.ur_lon : this.ur_lon;\n        const ur_lat = opts.ur_lat !== undefined ? opts.ur_lat : this.ur_lat;\n\n        return new PlateCarreeRotatedGrid(ni, nj, this.np_lon, this.np_lat, this.lon_shift, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n\n    /**\n     * Get a list of longitudes and latitudes on the grid (internal method)\n     */\n    public getEarthCoords() {\n        return this.ll_cache.getValue();\n    }\n\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        opts = opts === undefined ? {}: opts;\n        const inverse = 'inverse' in opts ? opts.inverse : false;\n\n        return this.llrot(x, y, {inverse: !inverse});\n    }\n\n    public getThinnedGrid(thin_x: number, thin_y: number) {\n        const dlon = (this.ur_lon - this.ll_lon) / this.ni;\n        const dlat = (this.ur_lat - this.ll_lat) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_lon = this.ll_lon;\n        const ll_lat = this.ll_lat;\n        const ur_lon = this.ur_lon - ni_remove * dlon;\n        const ur_lat = this.ur_lat - nj_remove * dlat;\n\n        return new PlateCarreeRotatedGrid(ni, nj, this.np_lon, this.np_lat, this.lon_shift, ll_lon, ll_lat, ur_lon, ur_lat);\n    }\n}\n\n/** A Lambert conformal conic grid with uniform grid spacing */\nclass LambertGrid extends Grid {\n    public readonly lon_0: number;\n    public readonly lat_0: number;\n    public readonly lat_std: [number, number];\n    public readonly ll_x: number;\n    public readonly ll_y: number;\n    public readonly ur_x: number;\n    public readonly ur_y: number;\n\n    private readonly lcc: (a: number, b: number, opts?: {inverse: boolean}) => [number, number];\n    private readonly ll_cache: Cache<[], EarthCoords>;\n    private readonly gc_cache: Cache<[], GridCoords>;\n\n    /**\n     * Create a Lambert conformal conic grid\n     * @param ni      - The number of grid points in the i (longitude) direction\n     * @param nj      - The number of grid points in the j (latitude) direction\n     * @param lon_0   - The standard longitude for the projection; this is also the center longitude for the projection\n     * @param lat_0   - The center latitude for the projection\n     * @param lat_std - The standard latitudes for the projection\n     * @param ll_x    - The x coordinate in projection space of the lower-left corner of the grid\n     * @param ll_y    - The y coordinate in projection space of the lower-left corner of the grid\n     * @param ur_x    - The x coordinate in projection space of the upper-right corner of the grid\n     * @param ur_y    - The y coordinate in projection space of the upper-right corner of the grid\n     */\n    constructor(ni: number, nj: number, lon_0: number, lat_0: number, lat_std: [number, number], \n                ll_x: number, ll_y: number, ur_x: number, ur_y: number) {\n        super('lcc', true, ni, nj);\n\n        this.lon_0 = lon_0;\n        this.lat_0 = lat_0;\n        this.lat_std = lat_std;\n        this.ll_x = ll_x;\n        this.ll_y = ll_y;\n        this.ur_x = ur_x;\n        this.ur_y = ur_y;\n        this.lcc = lambertConformalConic({lon_0: lon_0, lat_0: lat_0, lat_std: lat_std});\n\n        const dx = (this.ur_x - this.ll_x) / (this.ni - 1);\n        const dy = (this.ur_y - this.ll_y) / (this.nj - 1);\n\n        this.ll_cache = new Cache(() => {\n            const lons = new Float32Array(this.ni * this.nj);\n            const lats = new Float32Array(this.ni * this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                const x = this.ll_x + i * dx;\n                for (let j = 0; j < this.nj; j++) {\n                    const y = this.ll_y + j * dy;\n\n                    const [lon, lat] = this.lcc(x, y, {inverse: true});\n                    const idx = i + j * this.ni;\n                    lons[idx] = lon;\n                    lats[idx] = lat;\n                }\n            }\n\n            return {lons: lons, lats: lats};\n        });\n\n        this.gc_cache = new Cache(() => {\n            const x = new Float32Array(this.ni);\n            const y = new Float32Array(this.nj);\n\n            for (let i = 0; i < this.ni; i++) {\n                x[i] = this.ll_x + i * dx;\n            }\n\n            for (let j = 0; j < this.nj; j++) {\n                y[j] = this.ll_y + j * dy;\n            }\n\n            return {x: x, y: y};\n        });\n    }\n\n    public static fromLLCornerLonLat(ni: number, nj: number, lon_0: number, lat_0: number, lat_std: [number, number], \n                                     ll_lon: number, ll_lat: number, dx: number, dy: number) {\n\n        const lcc = lambertConformalConic({lon_0: lon_0, lat_0: lat_0, lat_std: lat_std});\n        const [ll_x, ll_y] = lcc(ll_lon, ll_lat);\n\n        return new LambertGrid(ni, nj, lon_0, lat_0, lat_std, ll_x, ll_y, ll_x + ni * dx, ll_y + nj * dy);\n    }\n\n    public copy(opts?: {ni?: number, nj?: number, ll_x?: number, ll_y?: number, ur_x?: number, ur_y?: number}) {\n        opts = opts !== undefined ? opts : {};\n        const ni = opts.ni !== undefined ? opts.ni : this.ni;\n        const nj = opts.nj !== undefined ? opts.nj : this.nj;\n        const ll_x = opts.ll_x !== undefined ? opts.ll_x : this.ll_x;\n        const ll_y = opts.ll_y !== undefined ? opts.ll_y : this.ll_y;\n        const ur_x = opts.ur_x !== undefined ? opts.ur_x : this.ur_x;\n        const ur_y = opts.ur_y !== undefined ? opts.ur_y : this.ur_y;\n\n        return new LambertGrid(ni, nj, this.lon_0, this.lat_0, this.lat_std, ll_x, ll_y, ur_x, ur_y);\n    }\n\n    /**\n     * Get a list of longitudes and latitudes on the grid (internal method)\n     */\n    public getEarthCoords() {\n        return this.ll_cache.getValue();\n    }\n\n    public getGridCoords() {\n        return this.gc_cache.getValue();\n    }\n\n    public transform(x: number, y: number, opts?: {inverse?: boolean}) {\n        opts = opts === undefined ? {}: opts;\n        const inverse = opts.inverse === undefined ? false : opts.inverse;\n\n        return this.lcc(x, y, {inverse: inverse});\n    }\n\n    public getThinnedGrid(thin_x: number, thin_y: number) {\n        const dx = (this.ur_x - this.ll_x) / this.ni;\n        const dy = (this.ur_y - this.ll_y) / this.nj;\n\n        const ni = Math.ceil(this.ni / thin_x);\n        const nj = Math.ceil(this.nj / thin_y);\n        const ni_remove = (this.ni - 1) % thin_x;\n        const nj_remove = (this.nj - 1) % thin_y;\n        const ll_x = this.ll_x;\n        const ll_y = this.ll_y;\n        const ur_x = this.ur_x - ni_remove * dx;\n        const ur_y = this.ur_y - nj_remove * dy;\n\n        return new LambertGrid(ni, nj, this.lon_0, this.lat_0, this.lat_std, ll_x, ll_y, ur_x, ur_y);\n    }\n}\n\nexport {Grid, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid};\nexport type {GridType};","\nimport { PlotComponent } from \"./PlotComponent\";\nimport Contour, {ContourOptions, ContourLabels, ContourLabelOptions} from \"./Contour\";\nimport {ContourFill, Raster, ContourFillOptions, RasterOptions} from \"./Fill\";\nimport Barbs, {BarbsOptions} from \"./Barbs\";\nimport Paintball, {PaintballOptions} from \"./Paintball\";\nimport Hodographs, {HodographOptions} from './Hodographs';\n\nimport { PlotLayer, MultiPlotLayer } from './PlotLayer';\nimport { WindProfile, WebGLAnyRenderingContext, TypedArray, ContourData } from \"./AutumnTypes\";\nimport { MapLikeType } from \"./Map\";\nimport { ColorMap, ColorMapOptions, bluered, redblue, pw_speed500mb, pw_speed850mb, pw_cape, pw_t2m, pw_td2m, nws_storm_clear_refl } from './Colormap';\nimport { Color } from \"./Color\";\nimport { makeColorBar, makePaintballKey, ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions } from \"./ColorBar\";\nimport { LineStyle } from \"./PolylineCollection\";\nimport { RawScalarField, RawVectorField, RawProfileField, VectorRelativeTo, RawVectorFieldOptions} from \"./RawField\";\nimport { Grid, GridType, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid } from './Grid'\n\nimport { initMSModule, FieldContourOpts } from './ContourCreator';\n\nconst colormaps = {\n    bluered: bluered,\n    redblue: redblue,\n    pw_speed500mb: pw_speed500mb,\n    pw_speed850mb: pw_speed850mb,\n    pw_cape: pw_cape,\n    pw_t2m: pw_t2m,\n    pw_td2m: pw_td2m,\n    nws_storm_clear_refl: nws_storm_clear_refl,\n}\n\n/**\n * Initialize the WebAssembly module in autumnplot-gl. It's not strictly necessary to call it first, but if you call it\n * first, you can prevent races when you contour a bunch of fields at once.\n */\nfunction initAutumnPlot() {\n    initMSModule();\n}\n\nexport {PlotComponent,\n        Barbs, BarbsOptions,\n        Contour, ContourOptions, ContourLabels, ContourLabelOptions,\n        ContourFill, Raster, ContourFillOptions, RasterOptions,\n        Paintball, PaintballOptions,\n        Hodographs, HodographOptions, WindProfile,\n        PlotLayer, MultiPlotLayer, \n        MapLikeType, LineStyle,\n        ColorMap, ColorMapOptions, colormaps, makeColorBar, makePaintballKey, Color, ColorbarOrientation, ColorbarTickDirection, ColorBarOptions, PaintballKeyOptions,\n        RawScalarField, RawVectorField, RawProfileField,\n        Grid, GridType, VectorRelativeTo, RawVectorFieldOptions, PlateCarreeGrid, PlateCarreeRotatedGrid, LambertGrid,\n        WebGLAnyRenderingContext, TypedArray, ContourData,\n        initAutumnPlot, FieldContourOpts};\n"],"names":["root","factory","exports","module","define","amd","this","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","i","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","log","LN2","t","n","o","obj","left","right","parent","dimension","content","scoreFunction","prototype","push","bubbleUp","length","pop","sinkDown","peek","remove","Error","size","r","l","u","h","kdTree","Array","isArray","sort","slice","toJSON","insert","nearest","f","a","g","p","min","balanceFactor","max","BinaryHeap","Pbf","ieee754","buf","ArrayBuffer","isView","Uint8Array","pos","type","Varint","Fixed64","Bytes","Fixed32","SHIFT_LEFT_32","SHIFT_RIGHT_32","utf8TextDecoder","TextDecoder","readPackedEnd","pbf","readVarint","toNum","low","high","isSigned","makeRoomForExtraLength","startPos","len","extraLen","realloc","writePackedVarint","arr","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","val","readInt32","destroy","readFields","readField","result","end","tag","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readFloat","readDouble","b","readVarintRemainder","readVarint64","readSVarint","num","readBoolean","Boolean","readString","decode","subarray","readUtf8TextDecoder","str","b1","b2","b3","b0","bytesPerSequence","String","fromCharCode","readUtf8","readBytes","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","set","finish","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeString","lead","charCodeAt","writeUtf8","writeBytes","writeRawMessage","fn","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","_scriptDir","Module","document","currentScript","src","undefined","moduleArg","readyPromiseResolve","readyPromiseReject","Promise","resolve","reject","forEach","prop","Object","getOwnPropertyDescriptor","defineProperty","get","abort","moduleOverrides","assign","readBinary","scriptDirectory","indexOf","substr","replace","lastIndexOf","window","importScripts","wasmBinary","wasmMemory","out","console","bind","err","error","legacyModuleProp","assert","WebAssembly","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAPF32","HEAPF64","ABORT","condition","text","updateMemoryViews","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","checkStackCookie","_emscripten_stack_get_end","cookie1","cookie2","ptrToString","h16","h8","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runtimeInitialized","imul","fround","clz32","trunc","runDependencies","runDependencyWatcher","dependenciesFulfilled","runDependencyTracking","what","RuntimeError","FS","init","createDataFile","createPreloadedFile","createLazyFile","open","mkdev","registerDevice","analyzePath","ErrnoError","wasmBinaryFile","path","isDataURI","filename","startsWith","createExportWrapper","name","wasmExports","apply","arguments","EmscriptenEH","CppException","constructor","excPtr","super","excInfo","getExceptionMessage","message","getBinarySync","file","instantiateArrayBuffer","binaryFile","imports","receiver","fetch","then","credentials","response","catch","getBinaryPromise","binary","instantiate","instance","reason","newName","incomming","configurable","isExportedByForceFilesystem","missingGlobal","sym","msg","globalThis","warnOnce","unexportedRuntimeSymbol","callRuntimeCallbacks","callbacks","shift","UTF8Decoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","u0","u1","u2","ch","UTF8ToString","ptr","getExceptionMessageCommon","withStackSave","type_addr_addr","stackAlloc","message_addr_addr","___get_exception_message","type_addr","message_addr","_free","stack","stackSave","ret","stackRestore","toString","padStart","shown","exceptionCaught","exceptionLast","ExceptionInfo","set_type","get_type","set_destructor","destructor","get_destructor","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","set_adjusted_ptr","adjustedPtr","get_adjusted_ptr","get_exception_ptr","___cxa_is_pointer_type","adjusted","embind_charCodes","BindingError","InternalError","findMatchingCatch","args","thrown","setTempRet0","info","thrownType","arg","caughtType","adjusted_ptr_addr","___cxa_can_catch","readLatin1String","awaitingDependencies","registeredTypes","typeDependencies","throwBindingError","throwInternalError","registerType","rawType","registeredInstance","options","TypeError","hasOwnProperty","ignoreDuplicateRegistrations","cb","sharedRegisterType","HandleAllocator","allocated","freelist","emval_handles","__emval_decref","handle","reserved","refcount","free","count_emval_handles","count","Emval","allocate","simpleReadValueFromPointer","pointer","embindRepr","v","floatReadValueFromPointer","width","createNamedFunction","body","runDestructors","destructors","del","newFunc","argumentList","Function","dummy","wasmTable","UnboundTypeError","ensureOverloadTable","proto","methodName","humanName","overloadTable","prevFunc","argCount","wasmTableMirror","getWasmTableEntry","funcPtr","func","dynCall","sig","includes","substring","concat","call","dynCallLegacy","embind__requireFunction","signature","rawFunction","fp","argCache","getDynCaller","getTypeName","___getTypeName","rv","integerReadValueFromPointer","signed","readPointer","_emscripten_get_now","stringToUTF8","outPtr","maxBytesToWrite","heap","outIdx","startIdx","stringToUTF8Array","UTF16Decoder","UTF16ToString","maxIdx","codeUnit","stringToUTF16","startPtr","numCharsToWrite","lengthBytesUTF16","UTF32ToString","utf32","stringToUTF32","lengthBytesUTF32","requireRegisteredType","impl","emval_returnValue","returnType","destructorsRef","emval_methodCallers","emval_symbols","getStringOrSymbol","address","symbol","__emval_get_method_caller","Reflect","construct","argTypes","kind","types","emval_lookupTypes","retType","functionBody","argsList","params","join","isVoid","caller","id","invokerFunction","functionName","map","performance","now","growMemory","pages","byteLength","grow","baseErrorType","errorName","errorClass","printCharBuffers","codes","embind_init_charCodes","has","create","wasmImports","__assert_fail","line","__cxa_begin_catch","___cxa_increment_exception_refcount","__cxa_find_matching_catch_2","__cxa_find_matching_catch_3","arg0","__cxa_throw","__resumeException","_embind_register_bigint","primitiveType","minRange","maxRange","_embind_register_bool","trueValue","falseValue","wt","destructorFunction","_embind_register_emval","_embind_register_float","_embind_register_function","rawArgTypesAddr","rawInvoker","isAsync","firstElement","array","heap32VectorToArray","argsIndex","trim","getFunctionName","numArguments","exposePublicSymbol","unboundTypes","seen","visit","throwUnboundTypeError","myTypes","dependentTypes","getTypeConverters","onComplete","typeConverters","myTypeConverters","unregisteredTypes","registered","dt","whenDependentTypesAreResolved","invokerArgsArray","replacePublicSymbol","classType","cppInvokerFunc","cppTargetFunc","isClassMethodFunc","needsDestructorStack","returns","argsListWired","invokerFnBody","dtorStack","args1","args2","paramName","invokerFn","craftInvokerFunction","_embind_register_integer","fromWireType","bitshift","isUnsignedType","checkAssertions","toTypeName","_embind_register_memory_view","dataTypeIndex","TA","decodeMemoryView","data","_embind_register_std_string","stdStringIsUTF8","payload","decodeStartPtr","currentBytePtr","stringSegment","valueIsOfTypeString","Uint8ClampedArray","lengthBytesUTF8","base","_malloc","charCode","_embind_register_std_wstring","charSize","decodeString","encodeString","getHeap","lengthBytesUTF","HEAP","_embind_register_void","_emscripten_get_now_is_monotonic","_emval_as","_emval_call","_emval_call_method","objHandle","_emval_decref","_emval_get_method_caller","_emval_get_module_property","_emval_get_property","key","_emval_incref","_emval_new_array","_emval_new_cstring","_emval_new_object","_emval_run_destructors","_emval_set_property","_emval_take_value","emscripten_date_now","Date","emscripten_get_now","emscripten_memcpy_js","dest","copyWithin","emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","x","cutDown","overGrownHeapSize","newSize","fd_close","fd","fd_seek","offset_low","offset_high","whence","newOffset","hi","lo","fd_write","iov","iovcnt","pnum","j","stream","curr","invoke_ii","index","a1","sp","_setThrew","invoke_iii","a2","invoke_iiii","a3","invoke_j","dynCall_j","invoke_v","invoke_vi","invoke_vii","invoke_viii","invoke_viiii","a4","receiveInstance","unshift","clearInterval","callback","removeRunDependency","setInterval","dep","trueModule","instantiateStreaming","createWasm","_emscripten_stack_init","librarySymbol","calledRun","stackCheckInit","run","doRun","postRun","preRun","setTimeout","runCaller","ready","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","enumerable","chunkId","Symbol","toStringTag","scriptUrl","location","scripts","getElementsByTagName","baseURI","self","href","proxyMarker","createEndpoint","releaseProxy","throwMarker","isObject","transferHandlers","Map","canHandle","serialize","port1","port2","MessageChannel","expose","deserialize","port","start","wrap","serialized","isError","ep","addEventListener","ev","fromWireValue","returnValue","reduce","rawValue","proxy","transfers","transferCache","transfer","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","endpoint","isMessagePort","close","target","createProxy","throwIfProxyReleased","isReleased","isProxyReleased","Proxy","_target","requestResponseMessage","_thisArg","rawArgumentList","last","processArguments","processed","WeakMap","handler","serializedValue","fill","random","Number","MAX_SAFE_INTEGER","getMinZoom","jlat","ilon","thin_fac_base","zoom","thin_fac","zip","iterators","iterator","current","next","some","done","compute_value","make_key","cached_values","JSON","stringify","getValue","normalizeOptions","opts","defaults","entries","k","isWebGL2Ctx","gl","getParameter","VERSION","layer_worker","Worker","URL","getGLFormatTypeAlignment","is_float16","format","row_alignment","userAgent","platform","macosPlatforms","os","is_webgl2","ext","getExtension","ext_lin","R16F","HALF_FLOAT","LUMINANCE","HALF_FLOAT_OES","navigator","maxTouchPoints","test","R32F","FLOAT","lambertConformalConic","F","compute_t","lat","sin_lat","sin","tan","PI","eccen","compute_m","cos","sqrt","semimajor","radians","lon_0","lat_0","lat_std","t_0","lat_1","lat_2","t_1","t_2","m_1","m_2","rho_0","eccen2","eccen4","eccen6","eccen8","Ap","Bp","Cp","Dp","inverse","y","lon","atan2","rho","hypot","sign","chi","atan","sin_2chi","cos_2chi","theta","compute_lcc","lng","toMercatorCoord","fromMercatorCoord","LngLat","lngFromMercatorX","sinh","latFromMercatorY","WGLBufferBase","verts","n_coords_per_vert","draw_mode","bind_target","dtype","ary","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","getGLDtype","n_verts","createBuffer","bindBuffer","bufferData","STATIC_DRAW","WGLBuffer","ARRAY_BUFFER","bindToProgram","prog_attr_location","enableVertexAttribArray","vertexAttribPointer","WGLTexture","image","texture","createTexture","tex_num","setImageData","mag_filter","LINEAR","texParameteri","TEXTURE_2D","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","bindTexture","internal_format","data_type","RGBA","RGBA_INTEGER","RGB","RGB_INTEGER","RG","RG_INTEGER","RED","RED_INTEGER","LUMINANCE_ALPHA","ALPHA","DEPTH_COMPONENT","DEPTH_STENCIL","getWebGL2Format","pixelStorei","UNPACK_ALIGNMENT","texImage2D","prog_uni_location","gl_tex_num","activate","uniform1i","activeTexture","TEXTURE0","deactivate","delete","deleteTexture","preprocessShader","shader_src","defines","current_defines","define_truth","processed_shader_src","split","match_define","match","match_ifdef","match_ifndef","def","WGLProgram","vertex_shader_src","fragment_shader_src","prog","frag_shader_src","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","compilationLog","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","linkLog","getProgramInfoLog","compileAndLinkShaders","attributes","uniforms","index_buffer","sampler_names","remove_comments","comment_idx","vtx_shader_match","matchAll","full_match","a_name","getAttribLocation","u_name","type_parts","uniform_loc","getUniformLocation","uniform","toLowerCase","use","attribute_buffers","uniform_values","textures","useProgram","bindAttributes","setUniforms","bindTextures","warn","uniform1f","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix4fv","sampler_name","draw","drawArrays","drawElements","WGLFramebufferBase","framebuffer","clear","color","clearColor","bindFramebuffer","FRAMEBUFFER","COLOR_BUFFER_BIT","renderTo","height","viewport","copyToTexture","copyTexImage2D","registerGLContext","THIS_CONSTRUCTOR_IS_NOT_A_SUBCLASS_OF_FLOAT16ARRAY","THE_CONSTRUCTOR_PROPERTY_VALUE_IS_NOT_AN_OBJECT","ATTEMPTING_TO_ACCESS_DETACHED_ARRAYBUFFER","CANNOT_CONVERT_UNDEFINED_OR_NULL_TO_OBJECT","CANNOT_MIX_BIGINT_AND_OTHER_TYPES","ITERATOR_PROPERTY_IS_NOT_CALLABLE","REDUCE_OF_EMPTY_ARRAY_WITH_NO_INITIAL_VALUE","OFFSET_IS_OUT_OF_BOUNDS","uncurryThis","thisArg","ReflectApply","uncurryThisGetter","ReflectGetOwnPropertyDescriptor","ReflectConstruct","ReflectDefineProperty","ReflectGet","getPrototypeOf","ReflectGetPrototypeOf","ReflectHas","ownKeys","ReflectOwnKeys","ReflectSet","setPrototypeOf","ReflectSetPrototypeOf","NativeProxy","EPSILON","isFinite","NumberIsFinite","NumberIsNaN","SymbolIterator","species","SymbolSpecies","SymbolToStringTag","for","SymbolFor","NativeObject","ObjectCreate","ObjectDefineProperty","freeze","ObjectFreeze","is","ObjectIs","ObjectPrototype","ObjectPrototype__lookupGetter__","__lookupGetter__","object","NativeTypeError","descriptor","ObjectHasOwn","hasOwn","NativeArray","ArrayIsArray","ArrayPrototype","ArrayPrototypeJoin","ArrayPrototypePush","ArrayPrototypeToLocaleString","toLocaleString","NativeArrayPrototypeSymbolIterator","ArrayPrototypeSymbolIterator","MathAbs","MathTrunc","NativeArrayBuffer","ArrayBufferIsView","ArrayBufferPrototype","ArrayBufferPrototypeSlice","ArrayBufferPrototypeGetByteLength","NativeSharedArrayBuffer","SharedArrayBuffer","SharedArrayBufferPrototypeGetByteLength","TypedArray","TypedArrayFrom","from","TypedArrayPrototype","NativeTypedArrayPrototypeSymbolIterator","TypedArrayPrototypeKeys","keys","TypedArrayPrototypeValues","values","TypedArrayPrototypeEntries","TypedArrayPrototypeSet","TypedArrayPrototypeReverse","reverse","TypedArrayPrototypeFill","TypedArrayPrototypeCopyWithin","TypedArrayPrototypeSort","TypedArrayPrototypeSlice","TypedArrayPrototypeSubarray","TypedArrayPrototypeGetBuffer","TypedArrayPrototypeGetByteOffset","TypedArrayPrototypeGetLength","TypedArrayPrototypeGetSymbolToStringTag","NativeUint8Array","NativeUint16Array","Uint16ArrayFrom","NativeUint32Array","NativeFloat32Array","ArrayIteratorPrototype","ArrayIteratorPrototypeNext","GeneratorPrototypeNext","IteratorPrototype","DataViewPrototype","DataView","getUint16","setUint16","NativeRangeError","RangeError","NativeWeakSet","WeakSet","WeakSetPrototype","WeakSetPrototypeAdd","add","WeakSetPrototypeHas","NativeWeakMap","WeakMapPrototype","WeakMapPrototypeGet","WeakMapPrototypeHas","WeakMapPrototypeSet","arrayIterators","SafeIteratorPrototype","arrayIterator","safeIfNeeded","safe","generators","DummyArrayIteratorPrototype","generator","writable","isObjectLike","isNativeTypedArray","isNativeBigIntTypedArray","typedArrayName","isSharedArrayBuffer","isOrdinaryArray","isCanonicalIntegerIndexString","number","brand","INVERSE_OF_EPSILON","FLOAT16_EPSILON_MULTIPLIED_BY_FLOAT16_MIN_VALUE","FLOAT16_EPSILON","FLOAT16_EPSILON_DEVIDED_BY_EPSILON","floatView","uint32View","baseTable","shiftTable","roundToFloat16Bits","absolute","roundTiesToEven","temp","roundToFloat16","mantissaTable","exponentTable","offsetTable","convertToNumber","float16bits","ToIntegerOrInfinity","ToLength","SpeciesConstructor","defaultConstructor","IsDetachedBuffer","defaultCompare","isXNaN","isYNaN","isXPlusZero","isYPlusZero","float16bitsArrays","isFloat16Array","hasFloat16ArrayBrand","assertFloat16Array","assertSpeciesTypedArray","isTargetFloat16Array","isTargetTypedArray","float16bitsArray","getFloat16BitsArray","float16","cloned","Float16Array","byteOffset","copyToArray","TypedArrayPrototypeGetters","input","_byteOffset","_length","isArrayBuffer","list","static","Constructor","uint16","mapFunc","items","at","relativeIndex","with","filter","kept","accumulator","reduceRight","find","findIndex","findLast","findLastIndex","every","targetOffset","targetLength","srcLength","toReversed","clonedFloat16bitsArray","compareFn","sortCompare","toSorted","relativeStart","relativeEnd","final","begin","uint16Subarray","element","separator","Float16ArrayPrototype","rgba","withOpacity","opacity","Color","toRGBHex","toRGBAHex","rgba_","in_type","round","toUpperCase","toRGBATuple","toHSVTuple","rgb","H","Cmax","Delta","rgb2hsv","fromHex","hex","hexstr","out_type","parseInt","hex2rgba","fromHSVTuple","hsv","r_prime","g_prime","b_prime","S","V","C","X","hsv2rgb","colormap_shader_src","levels","colors","normalizeColor","overflow_color","underflow_color","getColors","getOpacities","new_colors","new_levels","ic","level_lower","level_upper","new_opacity","new_color","underflow_opacity","overflow_opacity","ColorMap","diverging","color1","color2","level_min","level_max","n_colors","stops","level_step","crossover","crossover_hsv","color1_hsv","color2_hsv","istop","level","interp_fac","ilev","buildColormap","cm_data","overflow","pw_speed500mb","levl","levu","pw_speed850mb","pw_cape","pw_t2m","pw_td2m","nws_storm_clear_refl","colormap","gl_elems","applyShader","setupShaderVariables","index_map","map_norm","n_lev","input_norm","lev","cmap_norm","inv_cmap_norm","jlev","alpha","makeIndexMap","cmap_image","createElement","ctx","getContext","stop","fillStyle","fillRect","makeTextureImage","format_nonlin","type_nonlin","row_alignment_nonlin","cmap_image_spec","cmap_texture","cmap_nonlin_image","cmap_nonlin_texture","bindShaderVariables","cmap","polyline_vertex_src","polyline_fragment_src","dash_arrays","polyline","color_hex","line_width","line_style","shader_defines","vertices","TRIANGLE_STRIP","extrusion","offsets","scale","offset_scale","min_zoom","fragment_src","line_data","cmap_gpu","ColorMapGPUInterface","NEAREST","dash_array","fill_image","R8","makeDashTexture","n_dash","dash_texture","make","lines","makePolyLines","polylines","PolylineCollection","render","matrix","map_zoom","map_bearing","map_pitch","map_width","map_height","enable","BLEND","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","text_vertex_shader_src","text_fragment_shader_src","program_cache","Cache","createAtlas","pbf_glyphs","pbf_glyphs_filtered","glyph","glyph_bins","boxes","area","maxWidth","box","w","spaces","ceil","space","potpack","bin","img_width","img_height","atlas_data","glyphs","glyph_bin","top","atlas_i","atlas_j","advance","glyph_idx","atlas_idx","glyph_M","baseline","atlas","atlas_width","atlas_height","glyph_info","getFontAtlas","url","blob","arrayBuffer","data_buffer","readGlyph","readFontStack","text_collection_opt_defaults","horizontal_align","vertical_align","font_size","text_color","halo_color","halo","text_locs","font_atlas","tl","anchor_data","offset_data","tc_data","i_anch","i_off","i_tc","loc","anchor_x","anchor_y","x_offset","init_i_off","glyph_code","anchors","texcoords","fontstack_url","TextCollection","contour_opt_defaults","interval","field","contours","updateField","getContours","contour_data","contour_line_data","cv","cd","cv_","parseFloat","contour_style","contour_width","polyline_data","ld","line_data_filtered","promises","plc_opts","all","triggerRepaint","onAdd","getZoom","getCanvas","bearing","getBearing","pitch","getPitch","cnt","PlotComponent","contour_label_opt_defaults","n_decimal_places","font_face","font_url_template","text_collection","map_style","getStyle","font_url","label_pos","contour_levels","map_max_zoom","getMaxZoom","contour_label_spacing","min_label_lat","max_label_lat","min_label_lon","max_label_lon","icntr","level_str","contour","c_map","v_ll","dist","v_last","this_dist","n_labels_placed","idist","target_dist","pt1","pt2","pt_lon","pt_lat","tree","min_label_x","max_label_y","max_label_x","min_label_y","thin_grid_width","thin_grid_height","ni_thin_grid","nj_thin_grid","thin_grid_xs","thin_grid_ys","jdy","grid_x","grid_y","ll","label","tc_opts","contourfill_vertex_shader_src","contourfill_fragment_shader_src","contour_fill_opt_defaults","fill_texture","image_mag_filter","cmap_mag_filter","tex_data","getTextureData","grid","ni","nj","getWGLBuffers","PlotComponentFill","billboard_vertex_shader_src","billboard_fragment_shader_src","max_zoom","billboard_image","billboard_spec","billboard_size_mult","spec","size_multiplier","wind_textures","n_density_tiers","log2","n_inaccessible_tiers","trim_inaccessible","show_field","getThinnedField","u_thin","v_thin","u_image","v_image","setup","thinned_field","getWGLBillboardBuffers","proj_rotation_tex","getVectorRotationTexture","proj_rot_texture","bb_size","BB_HEIGHT","bb_width","BB_WIDTH","BB_TEX_WIDTH","bb_height","BB_TEX_HEIGHT","BB_MAG_BIN_SIZE","BB_MAG_WRAP","BASE_BARB_DIMS","BB_MAG_MAX","barb_opt_defaults","barb_size_multiplier","fields","barb_texture","dimensions","canvas","drawWindBarb","tipx","tipy","mag","elem_full_size","elem_spacing","beginPath","arc","stroke","elem_pos","mag_countdown","staff_length","n_flags","n_full_barbs","moveTo","lineTo","last_was_flag","first_elem","lineWidth","miterLimit","ibarb","createBarbTexture","barb_billboards","barb_image","BillboardCollection","paintball_vertex_shader_src","paintball_fragment_shader_src","paintball_opt_defaults","color_components","flat","verts_buf","tex_coords_buf","HODO_BG_DIMS","hodograph_opt_defaults","bgcolor","hodo_line_width","background_line_width","height_cmap","profile_field","hodo_bg_texture","irng","ctr_x","ctr_y","arrow_size","_createHodoBackgroundTexture","hodo_scale","bg_size","line_elems","bg_billboard","getStormMotionGrid","profiles","hodo_polyline","prof","ipt","hodo_line","sm_polyline","sm_mag","sm_ang","sm_line","bg_image","repaint","PlotLayer","PlotLayerBase","field_key","res","setActiveKey","getKeys","addField","tagname","elem","createElementNS","setAttribute","appendChild","makeColorBar","ticks","orientation","fontface","tickfontsize","ticklabelsize","tick_dir","tick_direction","bar_left","bar_top","bar_width","bar_height","bar_right","bar_bottom","bar_middle","bar_low_arrow","bar_high_arrow","getNChar","chars_left","chars_right","need_overflow","bar_long_size","bar_cross_size","bar_long_pad","gtickattrs","gbar","transform","gticks","icolor","underflow_attrs","points","overflow_attrs","point_list","labelattrs","first_level","last_level","diffs","ilevel","tickattrs","gtick","x2","y2","dy","style","textContent","makePaintballKey","labels","n_cols","n_rows","irow","icol","swatch_height","msm_promise","initMSModule","contourCreator","msm","grid_coords","getGridCoords","getContourLevels","getContourLevelsFloat32","getContourLevelsFloat16","makeContours","makeContoursFloat32","makeContoursFloat16","getArrayConstructor","contour_cache","raw_data","aggregateFields","mapGenerator","gen","arrayType","zipped_args","agg_data","RawScalarField","relative_to","raw_u","raw_v","thin_x","thin_y","new_grid","getThinnedGrid","thinGrid","new_data","idx_old","thin_u","thin_v","RawVectorField","smu","smv","is_conformal","buffer_cache","new_ni","new_nj","native_grid","texcoord_margin_r","texcoord_margin_s","grid_cell_size_multiplier","getEarthCoords","field_lats","field_lons","makeDomainVerticesAndTexCoords","domain_coords","icd","grid_cell_size","makeWGLDomainBuffers","copy","billboard_buffer_cache","makeBBElements","bb_elements","makeWGLBillboardBuffers","vector_rotation_cache","coords","rot_vals","lats","lons","x_pertlon","y_pertlon","rot_img","makeVectorRotationTexture","ll_lon","ll_lat","ur_lon","ur_lat","dlon","dlat","ll_cache","gc_cache","PlateCarreeGrid","ni_remove","nj_remove","Grid","np_lon","np_lat","lon_shift","llrot","sin_np_lat","cos_np_lat","lon_p","lat_p","sin_lat_p","cos_lat_p","sin_lon_p_diff","cos_lon_p_diff","asin","compute_rotation_inverse","cos_lat","sin_lon_diff","cos_lon_diff","compute_rotation","rotateSphere","PlateCarreeRotatedGrid","ll_x","ll_y","ur_x","ur_y","lcc","dx","fromLLCornerLonLat","LambertGrid","colormaps","bluered","redblue","initAutumnPlot"],"sourceRoot":""}