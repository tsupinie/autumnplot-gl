/*! For license information please see autumnplot-gl.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.apgl=e():t.apgl=e()}(this,(()=>(()=>{var t={645:(t,e)=>{e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,c=l>>1,u=-7,f=r?o-1:0,h=r?-1:1,d=t[e+f];for(f+=h,i=d&(1<<-u)-1,d>>=-u,u+=s;u>0;i=256*i+t[e+f],f+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=n;u>0;a=256*a+t[e+f],f+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),i-=c}return(d?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,l,c=8*i-o-1,u=(1<<c)-1,f=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=u?(s=0,a=u):a+f>=1?(s=(e*l-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+d]=255&s,d+=p,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[r+d]=255&a,d+=p,a/=256,c-=8);t[r+d-p]|=128*_}},526:function(t,e){var r,n;void 0===(n="function"==typeof(r=function(t){function e(t,e,r){this.obj=t,this.left=null,this.right=null,this.parent=r,this.dimension=e}function r(t){this.content=[],this.scoreFunction=t}r.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,r=0;r<e;r++)if(this.content[r]==t){var n=this.content.pop();return void(r!=e-1&&(this.content[r]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.bubbleUp(r):this.sinkDown(r)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var r=Math.floor((t+1)/2)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},sinkDown:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var o=2*(t+1),i=o-1,a=null;if(i<e){var s=this.content[i],l=this.scoreFunction(s);l<n&&(a=i)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null==a?n:l)&&(a=o)}if(null==a)break;this.content[t]=this.content[a],this.content[a]=r,t=a}}},t.kdTree=function(t,n,o){var i=this;Array.isArray(t)?this.root=function t(r,n,i){var a,s,l=n%o.length;return 0===r.length?null:1===r.length?new e(r[0],l,i):(r.sort((function(t,e){return t[o[l]]-e[o[l]]})),(s=new e(r[a=Math.floor(r.length/2)],l,i)).left=t(r.slice(0,a),n+1,s),s.right=t(r.slice(a+1),n+1,s),s)}(t,0,null):function(t){i.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(i.root)}(t),this.toJSON=function(t){t||(t=this.root);var r=new e(t.obj,t.dimension,null);return t.left&&(r.left=i.toJSON(t.left)),t.right&&(r.right=i.toJSON(t.right)),r},this.insert=function(t){var r,n,i=function e(r,n){if(null===r)return n;var i=o[r.dimension];return t[i]<r.obj[i]?e(r.left,r):e(r.right,r)}(this.root,null);null!==i?(r=new e(t,(i.dimension+1)%o.length,i),n=o[i.dimension],t[n]<i.obj[n]?i.left=r:i.right=r):this.root=new e(t,0,null)},this.remove=function(t){var e;null!==(e=function e(r){if(null===r)return null;if(r.obj===t)return r;var n=o[r.dimension];return t[n]<r.obj[n]?e(r.left):e(r.right)}(i.root))&&function t(e){function r(t,e){var n,i,a,s,l;return null===t?null:(n=o[e],t.dimension===e?null!==t.left?r(t.left,e):t:(i=t.obj[n],a=r(t.left,e),s=r(t.right,e),l=t,null!==a&&a.obj[n]<i&&(l=a),null!==s&&s.obj[n]<l.obj[n]&&(l=s),l))}var n,a,s;if(null===e.left&&null===e.right)return null===e.parent?void(i.root=null):(s=o[e.parent.dimension],void(e.obj[s]<e.parent.obj[s]?e.parent.left=null:e.parent.right=null));null!==e.right?(a=(n=r(e.right,e.dimension)).obj,t(n),e.obj=a):(a=(n=r(e.left,e.dimension)).obj,t(n),e.right=e.left,e.left=null,e.obj=a)}(e)},this.nearest=function(t,e,a){var s,l,c;if(c=new r((function(t){return-t[1]})),a)for(s=0;s<e;s+=1)c.push([null,a]);for(i.root&&function r(i){function a(t,r){c.push([t,r]),c.size()>e&&c.pop()}var s,l,u,f,h=o[i.dimension],d=n(t,i.obj),p={};for(f=0;f<o.length;f+=1)f===i.dimension?p[o[f]]=t[o[f]]:p[o[f]]=i.obj[o[f]];l=n(p,i.obj),null!==i.right||null!==i.left?(r(s=null===i.right?i.left:null===i.left?i.right:t[h]<i.obj[h]?i.left:i.right),(c.size()<e||d<c.peek()[1])&&a(i,d),(c.size()<e||Math.abs(l)<c.peek()[1])&&null!==(u=s===i.left?i.right:i.left)&&r(u)):(c.size()<e||d<c.peek()[1])&&a(i,d)}(i.root),l=[],s=0;s<Math.min(e,c.content.length);s+=1)c.content[s][0]&&l.push([c.content[s][0].obj,c.content[s][1]]);return l},this.balanceFactor=function(){return function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}(i.root)/(Math.log(function t(e){return null===e?0:t(e.left)+t(e.right)+1}(i.root))/Math.log(2))}},t.BinaryHeap=r})?r.apply(e,[e]):r)||(t.exports=n)},614:(t,e,r)=>{"use strict";t.exports=o;var n=r(645);function o(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var i=4294967296,a=1/i,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===o.Bytes?t.readVarint()+t.pos:t.pos+1}function c(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var o=r.pos-1;o>=t;o--)r.buf[o+n]=r.buf[o]}function f(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function _(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function b(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function w(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}o.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),o=n>>3,i=this.pos;this.type=7&n,t(o,e,this),this.pos===i&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=x(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+y(this.buf,this.pos+4)*i;return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+x(this.buf,this.pos+4)*i;return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,o,i=r.buf;if(n=(112&(o=i[r.pos++]))>>4,o<128)return c(t,n,e);if(n|=(127&(o=i[r.pos++]))<<3,o<128)return c(t,n,e);if(n|=(127&(o=i[r.pos++]))<<10,o<128)return c(t,n,e);if(n|=(127&(o=i[r.pos++]))<<17,o<128)return c(t,n,e);if(n|=(127&(o=i[r.pos++]))<<24,o<128)return c(t,n,e);if(n|=(1&(o=i[r.pos++]))<<31,o<128)return c(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,r){return s.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",o=e;o<r;){var i,a,s,l=t[o],c=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(i=t[o+1]))&&(c=(31&l)<<6|63&i)<=127&&(c=null):3===u?(i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&((c=(15&l)<<12|(63&i)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),o+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==o.Bytes)return t.push(this.readVarint(e));var r=l(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==o.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==o.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==o.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==o.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===o.Varint)for(;this.buf[this.pos++]>127;);else if(e===o.Bytes)this.pos=this.readVarint()+this.pos;else if(e===o.Fixed32)this.pos+=4;else{if(e!==o.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),w(this.buf,-1&t,this.pos),w(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),w(this.buf,-1&t,this.pos),w(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,o,i=0;i<e.length;i++){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){n>56319||i+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):o=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(t[r++]=239,t[r++]=191,t[r++]=189,o=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,o.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writeBytesField:function(t,e){this.writeTag(t,o.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,o.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,o.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,o.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},49:t=>{t.exports="varying highp vec2 v_tex_coord;\n\nuniform sampler2D u_sampler;\nuniform lowp vec3 u_bb_color;\n\nvoid main() {\n    lowp vec4 tex_color = texture2D(u_sampler, v_tex_coord);\n    gl_FragColor = vec4(u_bb_color, tex_color.a); // mix(vec4(1.0, 0.0, 0.0, 0.5), vec4(u_bb_color, 1.0), tex_color.a);\n}"},955:t=>{t.exports="uniform mat4 u_matrix;\nuniform int u_offset;\n\nattribute vec3 a_pos;    // Has position, zoom, and corner info\nattribute vec2 a_tex_coord;\nuniform lowp float u_bb_size;\nuniform lowp float u_map_aspect;\nuniform lowp float u_zoom;\nuniform highp float u_map_bearing;\nuniform lowp float u_bb_width;  // Normalized by texture width\nuniform lowp float u_bb_height; // Normalized by texture height\nuniform highp float u_bb_mag_bin_size;\n//uniform highp float u_bb_max_mag;\nuniform highp float u_bb_mag_wrap;\n\nuniform sampler2D u_u_sampler;\nuniform sampler2D u_v_sampler;\nuniform sampler2D u_rot_sampler;\n\nvarying highp vec2 v_tex_coord;\n\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\n    return mat4(x_scale, 0.0,     0.0,     0.0,\n                0.0,     y_scale, 0.0,     0.0,\n                0.0,     0.0,     z_scale, 0.0,\n                0.0,     0.0,     0.0,     1.0);\n}\n\nmat4 rotationZMatrix(float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n\n    return mat4( c,  s,  0., 0.,\n                -s,  c,  0., 0.,\n                 0., 0., 1., 0.,\n                 0., 0., 0., 1.);\n}\n\nmat4 rotationXMatrix(float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n\n    return mat4( 1.,  0., 0., 0.,\n                 0.,  c,  s,  0.,\n                 0., -s,  c,  0.,\n                 0.,  0., 0., 1.);\n}\n\nvoid main() {\n    float globe_width = 1.;\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\n\n    vec4 pivot_pos = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0);\n    highp float zoom_corner = a_pos.z;\n    lowp float min_zoom = floor(zoom_corner / 4.0);\n    lowp float corner = mod(zoom_corner, 4.0);\n\n    highp float u = texture2D(u_u_sampler, a_tex_coord).r;\n    highp float v = texture2D(u_v_sampler, a_tex_coord).r;\n    highp float rot = texture2D(u_rot_sampler, a_tex_coord).r;\n\n    lowp float bb_aspect = u_bb_width / u_bb_height;\n    lowp float ang = (abs(u) < 1e-6 && abs(v) < 1e-6) ? 0. : atan(v, u) - 3.141592654 / 2.0;\n    highp float mag = length(vec2(u, v));\n    mag = floor(mag / u_bb_mag_bin_size + 0.5) * u_bb_mag_bin_size;\n\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\n    vec2 texcoord = vec2(0.0, 0.0);\n    \n    if (u_zoom >= min_zoom) {\n        // Subtracting a small number off of u_bb_mag_wrap fixes (I think) a precision issue on some GPUs\n        vec2 tex_loc = vec2(mod(mag, u_bb_mag_wrap - 1e-5) / u_bb_mag_bin_size * u_bb_width, floor(mag / (u_bb_mag_wrap - 1e-5)) * u_bb_height);\n\n        if (corner < 0.5) {\n            offset = vec4(-u_bb_size, u_bb_size, 0., 0.);\n            texcoord = tex_loc;\n        }\n        else if (corner < 1.5) {\n            offset = vec4(u_bb_size, u_bb_size, 0., 0.);\n            texcoord = tex_loc + vec2(u_bb_width, 0.0);\n        }\n        else if (corner < 2.5) {\n            offset = vec4(-u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\n            texcoord = tex_loc + vec2(0.0, u_bb_height);\n        }\n        else if (corner < 3.5) {\n            offset = vec4(u_bb_size, -u_bb_size * (2. / bb_aspect - 1.), 0., 0.);\n            texcoord = tex_loc + vec2(u_bb_width, u_bb_height);\n        }\n\n        mat4 barb_rotation = rotationZMatrix(ang + radians(u_map_bearing) - rot);\n        mat4 map_stretch_matrix = scalingMatrix(1.0, 1. / u_map_aspect, 1.0);\n        offset = map_stretch_matrix * barb_rotation * offset;\n    }\n\n    gl_Position = pivot_pos + offset;\n    v_tex_coord = texcoord;\n}"},824:t=>{t.exports="varying highp vec2 v_tex_coord;\n\nuniform sampler2D u_fill_sampler;\nuniform sampler2D u_cmap_sampler;\nuniform sampler2D u_cmap_nonlin_sampler;\nuniform highp float u_cmap_min;\nuniform highp float u_cmap_max;\nuniform highp float u_opacity;\nuniform highp vec4 u_underflow_color;\nuniform highp vec4 u_overflow_color;\nuniform int u_n_index;\n\nvoid main() {\n    lowp float index_buffer = 1. / (2. * float(u_n_index));\n    highp float fill_val = texture2D(u_fill_sampler, v_tex_coord).r;\n    lowp float normed_val = (fill_val - u_cmap_min) / (u_cmap_max - u_cmap_min);\n    \n    lowp vec4 color;\n    if (normed_val < 0.0) {\n        color = u_underflow_color;\n    }\n    else if (normed_val > 1.0) {\n        color = u_overflow_color;\n    }\n    else {\n        normed_val = index_buffer + normed_val * (1. - 2. * index_buffer); // Chop off the half pixels on either end of the texture\n        highp float nonlin_val = texture2D(u_cmap_nonlin_sampler, vec2(normed_val, 0.5)).r;\n        color = texture2D(u_cmap_sampler, vec2(nonlin_val, 0.5));\n    }\n\n    color.a = color.a * u_opacity;\n    gl_FragColor = color;\n}"},370:t=>{t.exports="uniform mat4 u_matrix;\nuniform int u_offset;\n\nattribute vec2 a_pos;\nattribute vec2 a_tex_coord;\n\nvarying highp vec2 v_tex_coord;\n\nvoid main() {\n    float globe_width = 1.;\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\n\n    gl_Position = u_matrix * vec4(a_pos + globe_offset, 0.0, 1.0);\n    v_tex_coord = a_tex_coord;\n}"},714:t=>{t.exports="#define MAX_N_COLORS 24\n\nvarying highp vec2 v_tex_coord;\n\nuniform sampler2D u_fill_sampler;\nuniform lowp vec4 u_colors[MAX_N_COLORS];\nuniform int u_num_colors;\nuniform highp float u_opacity;\n\nvoid main() {\n    highp float fill_val = texture2D(u_fill_sampler, v_tex_coord).r;\n    \n    if (fill_val < 0.5) {\n        discard;\n    }\n\n    lowp vec4 color = vec4(0., 0., 0., 0.);\n\n    for (int nclr = 0; nclr < MAX_N_COLORS ; nclr++) {\n        if (nclr >= u_num_colors || fill_val < 0.99) { break; }\n\n        lowp float mem_active = mod(fill_val, 2.);\n        color = mix(color, u_colors[nclr], mem_active);\n        fill_val = floor(fill_val / 2.);\n    }\n\n    color.a = color.a * u_opacity;\n    gl_FragColor = color;\n}"},431:t=>{t.exports="uniform mat4 u_matrix;\nuniform int u_offset;\n\nattribute vec2 a_pos;\nattribute vec2 a_tex_coord;\n\nvarying highp vec2 v_tex_coord;\n\nvoid main() {\n    float globe_width = 1.;\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\n\n    gl_Position = u_matrix * vec4(a_pos + globe_offset, 0.0, 1.0);\n    v_tex_coord = a_tex_coord;\n}"},559:t=>{t.exports="#ifdef DATA\nvarying highp float v_data;\n\nuniform sampler2D u_cmap_sampler;\nuniform sampler2D u_cmap_nonlin_sampler;\nuniform highp float u_cmap_min;\nuniform highp float u_cmap_max;\nuniform int u_n_index;\n#else\nuniform lowp vec4 u_color;\n#endif\n\nvoid main() {\n    lowp vec4 color;\n#ifdef DATA\n    lowp float index_buffer = 1. / (2. * float(u_n_index));\n    lowp float normed_val = (v_data - u_cmap_min) / (u_cmap_max - u_cmap_min);\n\n    if (normed_val < 0.0 || normed_val > 1.0) {\n        discard;\n    }\n\n    normed_val = index_buffer + normed_val * (1. - 2. * index_buffer); // Chop off the half pixels on either end of the texture\n    highp float nonlin_val = texture2D(u_cmap_nonlin_sampler, vec2(normed_val, 0.5)).r;\n    color = texture2D(u_cmap_sampler, vec2(nonlin_val, 0.5));\n#else\n    color = u_color;\n#endif\n    gl_FragColor = color;\n}"},319:t=>{t.exports="uniform mat4 u_matrix;\nuniform int u_offset;\n\nattribute vec2 a_pos;\nattribute vec2 a_extrusion;\nattribute float a_data;\n\n#ifdef ZOOM\nattribute float a_min_zoom;\n#endif\n\n#ifdef OFFSET\nattribute vec2 a_offset;\n#endif\n\nuniform lowp float u_line_width;\nuniform lowp float u_map_width;\nuniform lowp float u_map_height;\nuniform highp float u_map_bearing;\n\n#ifdef ZOOM\nuniform lowp float u_zoom;\n#endif\n\n#ifdef OFFSET\nuniform lowp float u_offset_scale;\n#endif\n\n#ifdef DATA\nvarying highp float v_data;\n#endif\n\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\n    return mat4(x_scale, 0.0,     0.0,     0.0,\n                0.0,     y_scale, 0.0,     0.0,\n                0.0,     0.0,     z_scale, 0.0,\n                0.0,     0.0,     0.0,     1.0);\n}\n\nmat4 rotationZMatrix(float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n\n    return mat4( c,  s,  0., 0.,\n                -s,  c,  0., 0.,\n                 0., 0., 1., 0.,\n                 0., 0., 0., 1.);\n}\n\nmat4 rotationXMatrix(float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n\n    return mat4( 1.,  0., 0., 0.,\n                 0.,  c,  s,  0.,\n                 0., -s,  c,  0.,\n                 0.,  0., 0., 1.);\n}\n\nvoid main() {\n    float globe_width = 1.;\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\n\n    vec4 center_pos = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0);\n    vec4 offset = vec4(0.0, 0.0, 0.0, 0.0);\n\n#ifdef ZOOM\n    if (u_zoom >= a_min_zoom) {\n#endif\n\n        vec2 offset_ext = u_line_width * 1.5 * a_extrusion;\n\n        mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\n        mat4 rotation_matrix = rotationZMatrix(radians(u_map_bearing));  \n        offset = map_stretch_matrix * rotation_matrix * vec4(offset_ext, 0., 0.);\n\n#ifdef OFFSET\n        map_stretch_matrix = scalingMatrix(1., u_map_width / u_map_height, 1.);\n        vec2 offset_offset = u_offset_scale * a_offset;\n        offset += map_stretch_matrix * rotation_matrix * vec4(offset_offset, 0., 0.);\n#endif\n\n#ifdef ZOOM\n    }\n#endif\n\n    gl_Position = center_pos + offset;\n\n#ifdef DATA\n    v_data = a_data;\n#endif\n}"},286:t=>{t.exports="\nvarying highp vec2 v_tex_coord;\nuniform sampler2D u_sdf_sampler;\nuniform int u_is_halo;\n\nuniform lowp vec3 u_text_color;\nuniform lowp vec3 u_halo_color;\n\n#define SDF_FILL 0.75\n#define SDF_HALO 0.45\n\nvoid main() {\n    highp float sdf_val = texture2D(u_sdf_sampler, v_tex_coord).r;\n\n    lowp float step_width = 0.08;\n    lowp float alpha = smoothstep(SDF_FILL - step_width, SDF_FILL + step_width, sdf_val);\n\n    lowp vec3 color = u_is_halo == 1 ? u_halo_color : u_text_color;\n\n    if (u_is_halo == 1) {\n        alpha = min(smoothstep(SDF_HALO - step_width, SDF_HALO + step_width, sdf_val), 1.0 - alpha);\n    }\n\n    gl_FragColor = vec4(color, alpha);\n}"},207:t=>{t.exports="\nuniform mat4 u_matrix;\nuniform int u_offset;\nuniform highp float u_map_width;\nuniform highp float u_map_height;\nuniform highp float u_map_zoom;\nuniform highp float u_font_size;\n\nattribute vec3 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_tex_coord;\n\nvarying highp vec2 v_tex_coord;\n\nmat4 scalingMatrix(float x_scale, float y_scale, float z_scale) {\n    return mat4(x_scale, 0.0,     0.0,     0.0,\n                0.0,     y_scale, 0.0,     0.0,\n                0.0,     0.0,     z_scale, 0.0,\n                0.0,     0.0,     0.0,     1.0);\n}\n\nvoid main() {\n    float min_zoom = a_pos.z;\n\n    vec2 offset = a_offset;\n    if (u_map_zoom < min_zoom)\n        offset = vec2(0., 0.);\n\n    float globe_width = 1.;\n    vec2 globe_offset = vec2(globe_width * float(u_offset), 0.);\n\n    mat4 map_stretch_matrix = scalingMatrix(u_map_height / u_map_width, 1., 1.);\n\n    gl_Position = u_matrix * vec4(a_pos.xy + globe_offset, 0.0, 1.0) + u_font_size / 12. * 1.5 * map_stretch_matrix * vec4(offset, 0., 0.);\n    v_tex_coord = a_tex_coord;\n}"},176:t=>{var e,r=(e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t={}){var r,n,o=t;o.ready=new Promise(((t,e)=>{r=t,n=e})),["_main","getExceptionMessage","___get_exception_message","_free","_memory","___indirect_function_table","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(o.ready,t)||Object.defineProperty(o.ready,t,{get:()=>O("You are getting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>O("You are setting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}));var i=Object.assign({},o);if(o.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var a,s="";if("undefined"!=typeof document&&document.currentScript&&(s=document.currentScript.src),e&&(s=e),s=0!==s.indexOf("blob:")?s.substr(0,s.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var l,c,u,f=o.print||console.log.bind(console),h=o.printErr||console.error.bind(console);Object.assign(o,i),i=null,u="fetchSettings",Object.getOwnPropertyDescriptor(o,u)&&O(`\`Module.${u}\` was supplied but \`${u}\` not included in INCOMING_MODULE_JS_API`),o.arguments&&o.arguments,W("arguments","arguments_"),o.thisProgram&&o.thisProgram,W("thisProgram","thisProgram"),o.quit&&o.quit,W("quit","quit_"),x(void 0===o.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),x(void 0===o.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),x(void 0===o.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),x(void 0===o.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),x(void 0===o.read,"Module.read option was removed (modify read_ in JS)"),x(void 0===o.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),x(void 0===o.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),x(void 0===o.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),x(void 0===o.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),W("asm","wasmExports"),W("read","read_"),W("readAsync","readAsync"),W("readBinary","readBinary"),W("setWindowTitle","setWindowTitle"),x(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable."),x(!0,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable."),x(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),o.wasmBinary&&(l=o.wasmBinary),W("wasmBinary","wasmBinary"),"object"!=typeof WebAssembly&&O("no native wasm support detected");var d,p,_,m,g,v,b,y,w=!1;function x(t,e){t||O("Assertion failed"+(e?": "+e:""))}function T(){var t=c.buffer;o.HEAP8=d=new Int8Array(t),o.HEAP16=_=new Int16Array(t),o.HEAPU8=p=new Uint8Array(t),o.HEAPU16=m=new Uint16Array(t),o.HEAP32=g=new Int32Array(t),o.HEAPU32=v=new Uint32Array(t),o.HEAPF32=b=new Float32Array(t),o.HEAPF64=y=new Float64Array(t)}function E(){if(!w){var t=ke();0==t&&(t+=4);var e=v[t>>2],r=v[t+4>>2];34821223==e&&2310721022==r||O(`Stack overflow! Stack cookie has been overwritten at ${Q(t)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Q(r)} ${Q(e)}`),1668509029!=v[0]&&O("Runtime error: The application has corrupted its heap memory area (address zero)!")}}x(!o.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),x("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),x(!o.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),x(!o.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),function(){var t=new Int16Array(1),e=new Int8Array(t.buffer);if(t[0]=25459,115!==e[0]||99!==e[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"}();var S=[],A=[],R=[],F=!1;x(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),x(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),x(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),x(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var P=0,M=null,I=null,C={};function O(t){o.onAbort&&o.onAbort(t),h(t="Aborted("+t+")"),w=!0;var e=new WebAssembly.RuntimeError(t);throw n(e),e}var k={error(){O("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){k.error()},createDataFile(){k.error()},createPreloadedFile(){k.error()},createLazyFile(){k.error()},open(){k.error()},mkdev(){k.error()},registerDevice(){k.error()},analyzePath(){k.error()},ErrnoError(){k.error()}};o.FS_createDataFile=k.createDataFile,o.FS_createPreloadedFile=k.createPreloadedFile;var N,B,G=t=>t.startsWith("data:application/octet-stream;base64,");function L(t){return function(){x(F,`native function \`${t}\` called before runtime initialization`);var e=Re[t];return x(e,`exported native function \`${t}\` not found`),e.apply(null,arguments)}}class D extends Error{}class $ extends D{constructor(t){super(t),this.excPtr=t;const e=K(t);this.name=e[0],this.message=e[1]}}function U(t){if(t==N&&l)return new Uint8Array(l);if(a)return a(t);throw"both async and sync fetching of the wasm failed"}function j(t,e,r){return function(t){return l||"function"!=typeof fetch?Promise.resolve().then((()=>U(t))):fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>U(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(r,(t=>{h(`failed to asynchronously prepare wasm: ${t}`),N.startsWith("file://")&&h(`warning: Loading from a file URI (${N}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),O(t)}))}function W(t,e,r=!0){Object.getOwnPropertyDescriptor(o,t)||Object.defineProperty(o,t,{configurable:!0,get(){O(`\`Module.${t}\` has been replaced by \`${e}\``+(r?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function z(t){return"FS_createPath"===t||"FS_createDataFile"===t||"FS_createPreloadedFile"===t||"FS_unlink"===t||"addRunDependency"===t||"FS_createLazyFile"===t||"FS_createDevice"===t||"removeRunDependency"===t}function H(t,e){"undefined"!=typeof globalThis&&Object.defineProperty(globalThis,t,{configurable:!0,get(){tt(`\`${t}\` is not longer defined by emscripten. ${e}`)}})}function V(t){Object.getOwnPropertyDescriptor(o,t)||Object.defineProperty(o,t,{configurable:!0,get(){var e=`'${t}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;z(t)&&(e+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),O(e)}})}G(N="marchingsquares.wasm")||(B=N,N=o.locateFile?o.locateFile(B,s):s+B),H("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),H("asm","Please use wasmExports instead");var Y=t=>{for(;t.length>0;)t.shift()(o)},X="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,J=(t,e,r)=>{for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.buffer&&X)return X.decode(t.subarray(e,o));for(var i="";e<o;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var l=63&t[e++];if(224==(240&a)?a=(15&a)<<12|s<<6|l:(240!=(248&a)&&tt("Invalid UTF-8 leading byte "+Q(a)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|l<<6|63&t[e++]),a<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i},Z=(t,e)=>(x("number"==typeof t,`UTF8ToString expects a number (got ${typeof t})`),t?J(p,t,e):""),q=t=>{return e=()=>{var e=Ge(4),r=Ge(4);De(t,e,r);var n,o=v[e>>2],i=v[r>>2],a=Z(o);return Me(o),i&&(n=Z(i),Me(i)),[a,n]},r=Ne(),n=e(),Be(r),n;var e,r,n},K=t=>q(t);o.getExceptionMessage=K,o.noExitRuntime;var Q=t=>(x("number"==typeof t),"0x"+(t>>>=0).toString(16).padStart(8,"0")),tt=t=>{tt.shown||(tt.shown={}),tt.shown[t]||(tt.shown[t]=1,h(t))},et=[],rt=0;function nt(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){v[this.ptr+4>>2]=t},this.get_type=function(){return v[this.ptr+4>>2]},this.set_destructor=function(t){v[this.ptr+8>>2]=t},this.get_destructor=function(){return v[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,d[this.ptr+12>>0]=t},this.get_caught=function(){return 0!=d[this.ptr+12>>0]},this.set_rethrown=function(t){t=t?1:0,d[this.ptr+13>>0]=t},this.get_rethrown=function(){return 0!=d[this.ptr+13>>0]},this.init=function(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e)},this.set_adjusted_ptr=function(t){v[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return v[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Ue(this.get_type()))return v[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}var ot,it,at,st=t=>{var e=rt&&rt.excPtr;if(!e)return Ce(0),0;var r=new nt(e);r.set_adjusted_ptr(e);var n=r.get_type();if(!n)return Ce(0),e;for(var o in t){var i=t[o];if(0===i||i===n)break;var a=r.ptr+16;if($e(i,n,a))return Ce(i),e}return Ce(n),e},lt=t=>{for(var e="",r=t;p[r];)e+=ot[p[r++]];return e},ct={},ut={},ft={},ht=t=>{throw new it(t)},dt=t=>{throw new at(t)},pt=(t,e,r)=>{function n(e){var n=r(e);n.length!==t.length&&dt("Mismatched type converter count");for(var o=0;o<t.length;++o)_t(t[o],n[o])}t.forEach((function(t){ft[t]=e}));var o=new Array(e.length),i=[],a=0;e.forEach(((t,e)=>{ut.hasOwnProperty(t)?o[e]=ut[t]:(i.push(t),ct.hasOwnProperty(t)||(ct[t]=[]),ct[t].push((()=>{o[e]=ut[t],++a===i.length&&n(o)})))})),0===i.length&&n(o)};function _t(t,e,r={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(t,e,r={}){var n=e.name;if(t||ht(`type "${n}" must have a positive integer typeid pointer`),ut.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;ht(`Cannot register type '${n}' twice`)}if(ut[t]=e,delete ft[t],ct.hasOwnProperty(t)){var o=ct[t];delete ct[t],o.forEach((t=>t()))}}(t,e,r)}var mt,gt=t=>{ht(t.$$.ptrType.registeredClass.name+" instance already deleted")},vt=!1,bt=t=>{},yt=t=>{t.count.value-=1,0===t.count.value&&(t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)})(t)},wt=(t,e,r)=>{if(e===r)return t;if(void 0===r.baseClass)return null;var n=wt(t,e,r.baseClass);return null===n?null:r.downcast(n)},xt={},Tt=()=>Object.keys(Ft).length,Et=()=>{var t=[];for(var e in Ft)Ft.hasOwnProperty(e)&&t.push(Ft[e]);return t},St=[],At=()=>{for(;St.length;){var t=St.pop();t.$$.deleteScheduled=!1,t.delete()}},Rt=t=>{mt=t,St.length&&mt&&mt(At)},Ft={},Pt=(t,e)=>(e=((t,e)=>{for(void 0===e&&ht("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e})(t,e),Ft[e]),Mt=(t,e)=>(e.ptrType&&e.ptr||dt("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&dt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Ct(Object.create(t,{$$:{value:e}})));function It(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var r=Pt(this.registeredClass,e);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=e,r.$$.smartPtr=t,r.clone();var n=r.clone();return this.destructor(t),n}function o(){return this.isSmartPointer?Mt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Mt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var i,a=this.registeredClass.getActualType(e),s=xt[a];if(!s)return o.call(this);i=this.isConst?s.constPointerType:s.pointerType;var l=wt(e,this.registeredClass,i.registeredClass);return null===l?o.call(this):this.isSmartPointer?Mt(i.registeredClass.instancePrototype,{ptrType:i,ptr:l,smartPtrType:this,smartPtr:t}):Mt(i.registeredClass.instancePrototype,{ptrType:i,ptr:l})}var Ct=t=>"undefined"==typeof FinalizationRegistry?(Ct=t=>t,t):(vt=new FinalizationRegistry((t=>{console.warn(t.leakWarning.stack.replace(/^Error: /,"")),yt(t.$$)})),Ct=t=>{var e=t.$$;if(e.smartPtr){var r={$$:e},n=e.ptrType.registeredClass;r.leakWarning=new Error(`Embind found a leaked C++ instance ${n.name} <${Q(e.ptr)}>.\nWe'll free it automatically in this case, but this functionality is not reliable across various environments.\nMake sure to invoke .delete() manually once you're done with the instance instead.\nOriginally allocated`),"captureStackTrace"in Error&&Error.captureStackTrace(r.leakWarning,It),vt.register(t,r,t)}return t},bt=t=>vt.unregister(t),Ct(t));function Ot(){}var kt=(t,e)=>Object.defineProperty(e,"name",{value:t}),Nt=(t,e,r)=>{if(void 0===t[e].overloadTable){var n=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||ht(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[e].overloadTable})!`),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}},Bt=(t,e,r)=>{o.hasOwnProperty(t)?((void 0===r||void 0!==o[t].overloadTable&&void 0!==o[t].overloadTable[r])&&ht(`Cannot register public name '${t}' twice`),Nt(o,t,t),o.hasOwnProperty(r)&&ht(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),o[t].overloadTable[r]=e):(o[t]=e,void 0!==r&&(o[t].numArguments=r))};function Gt(t,e,r,n,o,i,a,s){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}var Lt=(t,e,r)=>{for(;e!==r;)e.upcast||ht(`Expected null or instance of ${r.name}, got an instance of ${e.name}`),t=e.upcast(t),e=e.baseClass;return t};function Dt(t,e){if(null===e)return this.isReference&&ht(`null is not a valid ${this.name}`),0;e.$$||ht(`Cannot pass "${ue(e)}" as a ${this.name}`),e.$$.ptr||ht(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=e.$$.ptrType.registeredClass;return Lt(e.$$.ptr,r,this.registeredClass)}function $t(t,e){var r;if(null===e)return this.isReference&&ht(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,r),r):0;e.$$||ht(`Cannot pass "${ue(e)}" as a ${this.name}`),e.$$.ptr||ht(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&ht(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var n=e.$$.ptrType.registeredClass;if(r=Lt(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&ht("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:ht(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var o=e.clone();r=this.rawShare(r,le.toHandle((()=>o.delete()))),null!==t&&t.push(this.rawDestructor,r)}break;default:ht("Unsupporting sharing policy")}return r}function Ut(t,e){if(null===e)return this.isReference&&ht(`null is not a valid ${this.name}`),0;e.$$||ht(`Cannot pass "${ue(e)}" as a ${this.name}`),e.$$.ptr||ht(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&ht(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var r=e.$$.ptrType.registeredClass;return Lt(e.$$.ptr,r,this.registeredClass)}function jt(t){return this.fromWireType(v[t>>2])}function Wt(t,e,r,n,o,i,a,s,l,c,u){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,o||void 0!==e.baseClass?this.toWireType=$t:n?(this.toWireType=Dt,this.destructorFunction=null):(this.toWireType=Ut,this.destructorFunction=null)}var zt,Ht,Vt=(t,e,r)=>{o.hasOwnProperty(t)||dt("Replacing nonexistant public symbol"),void 0!==o[t].overloadTable&&void 0!==r?o[t].overloadTable[r]=e:(o[t]=e,o[t].argCount=r)},Yt=[],Xt=t=>{var e=Yt[t];return e||(t>=Yt.length&&(Yt.length=t+1),Yt[t]=e=zt.get(t)),x(zt.get(t)==e,"JavaScript-side Wasm function table mirror is out of date!"),e},Jt=(t,e,r)=>t.includes("j")?((t,e,r)=>{x("dynCall_"+t in o,`bad function pointer type - dynCall function not found for sig '${t}'`),r&&r.length?x(r.length===t.substring(1).replace(/j/g,"--").length):x(1==t.length);var n=o["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)})(t,e,r):(x(Xt(e),`missing table entry in dynCall: ${e}`),Xt(e).apply(null,r)),Zt=(t,e)=>{var r=(t=lt(t)).includes("j")?((t,e)=>{x(t.includes("j")||t.includes("p"),"getDynCaller should only be called with i64 sigs");var r=[];return function(){return r.length=0,Object.assign(r,arguments),Jt(t,e,r)}})(t,e):Xt(e);return"function"!=typeof r&&ht(`unknown function pointer with signature ${t}: ${e}`),r},qt=t=>{var e=Fe(t),r=lt(e);return Me(e),r},Kt=(t,e)=>{var r=[],n={};throw e.forEach((function t(e){n[e]||ut[e]||(ft[e]?ft[e].forEach(t):(r.push(e),n[e]=!0))})),new Ht(`${t}: `+r.map(qt).join([", "]))},Qt=(t,e)=>{for(var r=[],n=0;n<t;n++)r.push(v[e+4*n>>2]);return r},te=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function ee(t,e,r,n,o,i){var a=e.length;a<2&&ht("argTypes array size mismatch! Must at least get return value and 'this' types!"),x(!i,"Async bindings are only supported with JSPI.");for(var s=null!==e[1]&&null!==r,l=!1,c=1;c<e.length;++c)if(null!==e[c]&&void 0===e[c].destructorFunction){l=!0;break}var u="void"!==e[0].name,f="",h="";for(c=0;c<a-2;++c)f+=(0!==c?", ":"")+"arg"+c,h+=(0!==c?", ":"")+"arg"+c+"Wired";var d=`\n        return function (${f}) {\n        if (arguments.length !== ${a-2}) {\n          throwBindingError('function ${t} called with ' + arguments.length + ' arguments, expected ${a-2}');\n        }`;l&&(d+="var destructors = [];\n");var p=l?"destructors":"null",_=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[ht,n,o,te,e[0],e[1]];for(s&&(d+="var thisWired = classParam.toWireType("+p+", this);\n"),c=0;c<a-2;++c)d+="var arg"+c+"Wired = argType"+c+".toWireType("+p+", arg"+c+"); // "+e[c+2].name+"\n",_.push("argType"+c),m.push(e[c+2]);if(s&&(h="thisWired"+(h.length>0?", ":"")+h),d+=(u||i?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+");\n",l)d+="runDestructors(destructors);\n";else for(c=s?1:2;c<e.length;++c){var g=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==e[c].destructorFunction&&(d+=g+"_dtor("+g+"); // "+e[c].name+"\n",_.push(g+"_dtor"),m.push(e[c].destructorFunction))}u&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",_.push(d);var v=function(t,e){if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var r=kt(t.name||"unknownFunctionName",(function(){}));r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return o instanceof Object?o:n}(Function,_).apply(null,m);return kt(t,v)}var re=t=>{const e=(t=t.trim()).indexOf("(");return-1!==e?(x(")"==t[t.length-1],"Parentheses for argument names should match."),t.substr(0,e)):t},ne=(t,e,r)=>(t instanceof Object||ht(`${r} with invalid "this": ${t}`),t instanceof e.registeredClass.constructor||ht(`${r} incompatible with "this" of type ${t.constructor.name}`),t.$$.ptr||ht(`cannot call emscripten binding method ${r} on deleted object`),Lt(t.$$.ptr,t.$$.ptrType.registeredClass,e.registeredClass));function oe(){this.allocated=[void 0],this.freelist=[]}var ie=new oe,ae=t=>{t>=ie.reserved&&0==--ie.get(t).refcount&&ie.free(t)},se=()=>{for(var t=0,e=ie.reserved;e<ie.allocated.length;++e)void 0!==ie.allocated[e]&&++t;return t},le={toValue:t=>(t||ht("Cannot use deleted val. handle = "+t),ie.get(t).value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ie.allocate({refcount:1,value:t})}}};function ce(t){return this.fromWireType(g[t>>2])}var ue=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t},fe=(t,e)=>{switch(e){case 4:return function(t){return this.fromWireType(b[t>>2])};case 8:return function(t){return this.fromWireType(y[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},he=(t,e,r)=>{switch(e){case 1:return r?t=>d[t>>0]:t=>p[t>>0];case 2:return r?t=>_[t>>1]:t=>m[t>>1];case 4:return r?t=>g[t>>2]:t=>v[t>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},de=(t,e,r)=>(x("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),((t,e,r,n)=>{if(x("string"==typeof t,`stringToUTF8Array expects a string (got ${typeof t})`),!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(r>=i)break;e[r++]=s}else if(s<=2047){if(r+1>=i)break;e[r++]=192|s>>6,e[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;e[r++]=224|s>>12,e[r++]=128|s>>6&63,e[r++]=128|63&s}else{if(r+3>=i)break;s>1114111&&tt("Invalid Unicode code point "+Q(s)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),e[r++]=240|s>>18,e[r++]=128|s>>12&63,e[r++]=128|s>>6&63,e[r++]=128|63&s}}return e[r]=0,r-o})(t,p,e,r)),pe="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,_e=(t,e)=>{x(t%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var r=t,n=r>>1,o=n+e/2;!(n>=o)&&m[n];)++n;if((r=n<<1)-t>32&&pe)return pe.decode(p.subarray(t,r));for(var i="",a=0;!(a>=e/2);++a){var s=_[t+2*a>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},me=(t,e,r)=>{if(x(e%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),x("number"==typeof r,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<2)return 0;for(var n=e,o=(r-=2)<2*t.length?r/2:t.length,i=0;i<o;++i){var a=t.charCodeAt(i);_[e>>1]=a,e+=2}return _[e>>1]=0,e-n},ge=t=>2*t.length,ve=(t,e)=>{x(t%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var r=0,n="";!(r>=e/4);){var o=g[t+4*r>>2];if(0==o)break;if(++r,o>=65536){var i=o-65536;n+=String.fromCharCode(55296|i>>10,56320|1023&i)}else n+=String.fromCharCode(o)}return n},be=(t,e,r)=>{if(x(e%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),x("number"==typeof r,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===r&&(r=2147483647),r<4)return 0;for(var n=e,o=n+r-4,i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++i)),g[e>>2]=a,(e+=4)+4>o)break}return g[e>>2]=0,e-n},ye=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&++r,e+=4}return e},we=t=>{var e=c.buffer,r=(t-e.byteLength+65535)/65536;try{return c.grow(r),T(),1}catch(r){h(`growMemory: Attempted to grow heap from ${e.byteLength} bytes to ${t} bytes, but got error: ${r}`)}};var xe,Te,Ee,Se=[null,[],[]];(()=>{for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);ot=t})(),it=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},at=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Object.assign(Ot.prototype,{isAliasOf(t){if(!(this instanceof Ot))return!1;if(!(t instanceof Ot))return!1;var e=this.$$.ptrType.registeredClass,r=this.$$.ptr;t.$$=t.$$;for(var n=t.$$.ptrType.registeredClass,o=t.$$.ptr;e.baseClass;)r=e.upcast(r),e=e.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return e===n&&r===o},clone(){if(this.$$.ptr||gt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t,e=Ct(Object.create(Object.getPrototypeOf(this),{$$:{value:(t=this.$$,{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType})}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ht("Object already scheduled for deletion"),bt(this),yt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ht("Object already scheduled for deletion"),St.push(this),1===St.length&&mt&&mt(At),this.$$.deleteScheduled=!0,this}}),o.getInheritedInstanceCount=Tt,o.getLiveInheritedInstances=Et,o.flushPendingDeletes=At,o.setDelayFunction=Rt,Object.assign(Wt.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){this.rawDestructor&&this.rawDestructor(t)},argPackAdvance:8,readValueFromPointer:jt,deleteObject(t){null!==t&&t.delete()},fromWireType:It}),Ht=o.UnboundTypeError=(xe=Error,(Ee=kt(Te="UnboundTypeError",(function(t){this.name=Te,this.message=t;var e=new Error(t).stack;void 0!==e&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}))).prototype=Object.create(xe.prototype),Ee.prototype.constructor=Ee,Ee.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},Ee),Object.assign(oe.prototype,{get(t){return x(void 0!==this.allocated[t],`invalid handle: ${t}`),this.allocated[t]},has(t){return void 0!==this.allocated[t]},allocate(t){var e=this.freelist.pop()||this.allocated.length;return this.allocated[e]=t,e},free(t){x(void 0!==this.allocated[t]),this.allocated[t]=void 0,this.freelist.push(t)}}),ie.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ie.reserved=ie.allocated.length,o.count_emval_handles=se;var Ae={__assert_fail:(t,e,r,n)=>{O(`Assertion failed: ${Z(t)}, at: `+[e?Z(e):"unknown filename",r,n?Z(n):"unknown function"])},__cxa_begin_catch:t=>{var e=new nt(t);return e.get_caught()||e.set_caught(!0),e.set_rethrown(!1),et.push(e),Le(e.excPtr),e.get_exception_ptr()},__cxa_find_matching_catch_2:()=>st([]),__cxa_find_matching_catch_3:t=>st([t]),__cxa_throw:(t,e,r)=>{throw new nt(t).init(e,r),rt=new $(t)},__resumeException:t=>{throw rt||(rt=new $(t)),rt},_embind_register_bigint:(t,e,r,n,o)=>{},_embind_register_bool:(t,e,r,n)=>{_t(t,{name:e=lt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:n},argPackAdvance:8,readValueFromPointer:function(t){return this.fromWireType(p[t])},destructorFunction:null})},_embind_register_class:(t,e,r,n,o,i,a,s,l,c,u,f,h)=>{u=lt(u),i=Zt(o,i),s&&(s=Zt(a,s)),c&&(c=Zt(l,c)),h=Zt(f,h);var d=(t=>{if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=48&&e<=57?`_${t}`:t})(u);Bt(d,(function(){Kt(`Cannot construct ${u} due to unbound types`,[n])})),pt([t,e,r],n?[n]:[],(function(e){var r,o;e=e[0],o=n?(r=e.registeredClass).instancePrototype:Ot.prototype;var a=kt(u,(function(){if(Object.getPrototypeOf(this)!==l)throw new it("Use 'new' to construct "+u);if(void 0===f.constructor_body)throw new it(u+" has no accessible constructor");var t=f.constructor_body[arguments.length];if(void 0===t)throw new it(`Tried to invoke ctor of ${u} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(f.constructor_body).toString()}) parameters instead!`);return t.apply(this,arguments)})),l=Object.create(o,{constructor:{value:a}});a.prototype=l;var f=new Gt(u,a,l,h,r,i,s,c);f.baseClass&&(void 0===f.baseClass.__derivedClasses&&(f.baseClass.__derivedClasses=[]),f.baseClass.__derivedClasses.push(f));var p=new Wt(u,f,!0,!1,!1),_=new Wt(u+"*",f,!1,!1,!1),m=new Wt(u+" const*",f,!1,!0,!1);return xt[t]={pointerType:_,constPointerType:m},Vt(d,a),[p,_,m]}))},_embind_register_class_constructor:(t,e,r,n,o,i)=>{x(e>0);var a=Qt(e,r);o=Zt(n,o),pt([],[t],(function(t){var r=`constructor ${(t=t[0]).name}`;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new it(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.registeredClass.constructor_body[e-1]=()=>{Kt(`Cannot construct ${t.name} due to unbound types`,a)},pt([],a,(n=>(n.splice(1,0,null),t.registeredClass.constructor_body[e-1]=ee(r,n,null,o,i),[]))),[]}))},_embind_register_class_function:(t,e,r,n,o,i,a,s,l)=>{var c=Qt(r,n);e=lt(e),e=re(e),i=Zt(o,i),pt([],[t],(function(t){var n=`${(t=t[0]).name}.${e}`;function o(){Kt(`Cannot call ${n} due to unbound types`,c)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),s&&t.registeredClass.pureVirtualFunctions.push(e);var u=t.registeredClass.instancePrototype,f=u[e];return void 0===f||void 0===f.overloadTable&&f.className!==t.name&&f.argCount===r-2?(o.argCount=r-2,o.className=t.name,u[e]=o):(Nt(u,e,n),u[e].overloadTable[r-2]=o),pt([],c,(function(o){var s=ee(n,o,t,i,a,l);return void 0===u[e].overloadTable?(s.argCount=r-2,u[e]=s):u[e].overloadTable[r-2]=s,[]})),[]}))},_embind_register_class_property:(t,e,r,n,o,i,a,s,l,c)=>{e=lt(e),o=Zt(n,o),pt([],[t],(function(t){var n=`${(t=t[0]).name}.${e}`,u={get(){Kt(`Cannot access ${n} due to unbound types`,[r,a])},enumerable:!0,configurable:!0};return u.set=l?()=>Kt(`Cannot access ${n} due to unbound types`,[r,a]):t=>ht(n+" is a read-only property"),Object.defineProperty(t.registeredClass.instancePrototype,e,u),pt([],l?[r,a]:[r],(function(r){var a=r[0],u={get(){var e=ne(this,t,n+" getter");return a.fromWireType(o(i,e))},enumerable:!0};if(l){l=Zt(s,l);var f=r[1];u.set=function(e){var r=ne(this,t,n+" setter"),o=[];l(c,r,f.toWireType(o,e)),te(o)}}return Object.defineProperty(t.registeredClass.instancePrototype,e,u),[]})),[]}))},_embind_register_emval:(t,e)=>{_t(t,{name:e=lt(e),fromWireType:t=>{var e=le.toValue(t);return ae(t),e},toWireType:(t,e)=>le.toHandle(e),argPackAdvance:8,readValueFromPointer:ce,destructorFunction:null})},_embind_register_float:(t,e,r)=>{_t(t,{name:e=lt(e),fromWireType:t=>t,toWireType:(t,e)=>{if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError(`Cannot convert ${ue(e)} to ${this.name}`);return e},argPackAdvance:8,readValueFromPointer:fe(e,r),destructorFunction:null})},_embind_register_function:(t,e,r,n,o,i,a)=>{var s=Qt(e,r);t=lt(t),t=re(t),o=Zt(n,o),Bt(t,(function(){Kt(`Cannot call ${t} due to unbound types`,s)}),e-1),pt([],s,(function(r){var n=[r[0],null].concat(r.slice(1));return Vt(t,ee(t,n,null,o,i,a),e-1),[]}))},_embind_register_integer:(t,e,r,n,o)=>{e=lt(e),-1===o&&(o=4294967295);var i=t=>t;if(0===n){var a=32-8*r;i=t=>t<<a>>>a}var s=e.includes("unsigned"),l=(t,r)=>{if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError(`Cannot convert "${ue(t)}" to ${r}`);if(t<n||t>o)throw new TypeError(`Passing a number "${ue(t)}" from JS side to C/C++ side to an argument of type "${e}", which is outside the valid range [${n}, ${o}]!`)};_t(t,{name:e,fromWireType:i,toWireType:s?function(t,e){return l(e,this.name),e>>>0}:function(t,e){return l(e,this.name),e},argPackAdvance:8,readValueFromPointer:he(e,r,0!==n),destructorFunction:null})},_embind_register_memory_view:(t,e,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function o(t){var e=v[t>>2],r=v[t+4>>2];return new n(d.buffer,r,e)}_t(t,{name:r=lt(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(t,e)=>{var r="std::string"===(e=lt(e));_t(t,{name:e,fromWireType(t){var e,n=v[t>>2],o=t+4;if(r)for(var i=o,a=0;a<=n;++a){var s=o+a;if(a==n||0==p[s]){var l=Z(i,s-i);void 0===e?e=l:(e+=String.fromCharCode(0),e+=l),i=s+1}}else{var c=new Array(n);for(a=0;a<n;++a)c[a]=String.fromCharCode(p[o+a]);e=c.join("")}return Me(t),e},toWireType(t,e){var n;e instanceof ArrayBuffer&&(e=new Uint8Array(e));var o="string"==typeof e;o||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||ht("Cannot pass non-string to std::string"),n=r&&o?(t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e})(e):e.length;var i=Pe(4+n+1),a=i+4;if(v[i>>2]=n,r&&o)de(e,a,n+1);else if(o)for(var s=0;s<n;++s){var l=e.charCodeAt(s);l>255&&(Me(a),ht("String has UTF-16 code units that do not fit in 8 bits")),p[a+s]=l}else for(s=0;s<n;++s)p[a+s]=e[s];return null!==t&&t.push(Me,i),i},argPackAdvance:8,readValueFromPointer:jt,destructorFunction(t){Me(t)}})},_embind_register_std_wstring:(t,e,r)=>{var n,o,i,a,s;r=lt(r),2===e?(n=_e,o=me,a=ge,i=()=>m,s=1):4===e&&(n=ve,o=be,a=ye,i=()=>v,s=2),_t(t,{name:r,fromWireType:t=>{for(var r,o=v[t>>2],a=i(),l=t+4,c=0;c<=o;++c){var u=t+4+c*e;if(c==o||0==a[u>>s]){var f=n(l,u-l);void 0===r?r=f:(r+=String.fromCharCode(0),r+=f),l=u+e}}return Me(t),r},toWireType:(t,n)=>{"string"!=typeof n&&ht(`Cannot pass non-string to C++ string type ${r}`);var i=a(n),l=Pe(4+i+e);return v[l>>2]=i>>s,o(n,l+4,i+e),null!==t&&t.push(Me,l),l},argPackAdvance:8,readValueFromPointer:ce,destructorFunction(t){Me(t)}})},_embind_register_void:(t,e)=>{_t(t,{isVoid:!0,name:e=lt(e),argPackAdvance:0,fromWireType:()=>{},toWireType:(t,e)=>{}})},_emval_decref:ae,_emval_incref:t=>{t>4&&(ie.get(t).refcount+=1)},_emval_take_value:(t,e)=>{var r,n,o,i=(r=t,n="_emval_take_value",o=ut[r],void 0===o&&ht(n+" has unknown type "+qt(r)),t=o).readValueFromPointer(e);return le.toHandle(i)},abort:()=>{O("native code called abort()")},emscripten_memcpy_js:(t,e,r)=>p.copyWithin(t,e,e+r),emscripten_resize_heap:t=>{var e=p.length;x((t>>>=0)>e);var r=2147483648;if(t>r)return h(`Cannot enlarge memory, requested ${t} bytes, but the limit is 2147483648 bytes!`),!1;for(var n,o=1;o<=4;o*=2){var i=e*(1+.2/o);i=Math.min(i,t+100663296);var a=Math.min(r,(n=Math.max(t,i))+(65536-n%65536)%65536);if(we(a))return!0}return h(`Failed to grow the heap from ${e} bytes to ${a} bytes, not enough memory!`),!1},fd_close:t=>{O("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")},fd_seek:function(t,e,r,n,o){return a=r,x((i=e)==i>>>0||i==(0|i)),x(a===(0|a)),70;var i,a},fd_write:(t,e,r,n)=>{for(var o=0,i=0;i<r;i++){var a=v[e>>2],s=v[e+4>>2];e+=8;for(var l=0;l<s;l++)c=t,u=p[a+l],d=void 0,x(d=Se[c]),0===u||10===u?((1===c?f:h)(J(d,0)),d.length=0):d.push(u);o+=s}var c,u,d;return v[n>>2]=o,0},invoke_ii:function(t,e){var r=Ne();try{return Xt(t)(e)}catch(t){if(Be(r),!(t instanceof D))throw t;Ie(1,0)}},invoke_iii:function(t,e,r){var n=Ne();try{return Xt(t)(e,r)}catch(t){if(Be(n),!(t instanceof D))throw t;Ie(1,0)}},invoke_v:function(t){var e=Ne();try{Xt(t)()}catch(t){if(Be(e),!(t instanceof D))throw t;Ie(1,0)}},invoke_vi:function(t,e){var r=Ne();try{Xt(t)(e)}catch(t){if(Be(r),!(t instanceof D))throw t;Ie(1,0)}},invoke_vii:function(t,e,r){var n=Ne();try{Xt(t)(e,r)}catch(t){if(Be(n),!(t instanceof D))throw t;Ie(1,0)}},invoke_viii:function(t,e,r,n){var o=Ne();try{Xt(t)(e,r,n)}catch(t){if(Be(o),!(t instanceof D))throw t;Ie(1,0)}},invoke_viiii:function(t,e,r,n,o){var i=Ne();try{Xt(t)(e,r,n,o)}catch(t){if(Be(i),!(t instanceof D))throw t;Ie(1,0)}}},Re=function(){var t,e={env:Ae,wasi_snapshot_preview1:Ae};function r(t,e){return Re=t.exports,x(c=Re.memory,"memory not found in wasm exports"),T(),x(zt=Re.__indirect_function_table,"table not found in wasm exports"),r=Re.__wasm_call_ctors,A.unshift(r),function(t){if(P--,o.monitorRunDependencies&&o.monitorRunDependencies(P),t?(x(C[t]),delete C[t]):h("warning: run dependency removed without ID"),0==P&&(null!==M&&(clearInterval(M),M=null),I)){var e=I;I=null,e()}}("wasm-instantiate"),Re;var r}t="wasm-instantiate",P++,o.monitorRunDependencies&&o.monitorRunDependencies(P),t?(x(!C[t]),C[t]=1,null===M&&"undefined"!=typeof setInterval&&(M=setInterval((()=>{if(w)return clearInterval(M),void(M=null);var t=!1;for(var e in C)t||(t=!0,h("still waiting on run dependencies:")),h(`dependency: ${e}`);t&&h("(end of list)")}),1e4))):h("warning: run dependency added without ID");var i,a,s,u,f=o;if(o.instantiateWasm)try{return o.instantiateWasm(e,r)}catch(t){h(`Module.instantiateWasm callback failed with error: ${t}`),n(t)}return(i=l,a=N,s=e,u=function(t){x(o===f,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),f=null,r(t.instance)},i||"function"!=typeof WebAssembly.instantiateStreaming||G(a)||"function"!=typeof fetch?j(a,s,u):fetch(a,{credentials:"same-origin"}).then((t=>WebAssembly.instantiateStreaming(t,s).then(u,(function(t){return h(`wasm streaming compile failed: ${t}`),h("falling back to ArrayBuffer instantiation"),j(a,s,u)}))))).catch(n),{}}(),Fe=(L("__wasm_call_ctors"),L("__getTypeName")),Pe=(L("__errno_location"),o._fflush=L("fflush"),L("malloc")),Me=o._free=L("free"),Ie=L("setThrew"),Ce=L("setTempRet0"),Oe=()=>(Oe=Re.emscripten_stack_init)(),ke=()=>(ke=Re.emscripten_stack_get_end)(),Ne=L("stackSave"),Be=L("stackRestore"),Ge=L("stackAlloc"),Le=(L("__cxa_free_exception"),L("__cxa_increment_exception_refcount")),De=(L("__cxa_decrement_exception_refcount"),o.___get_exception_message=L("__get_exception_message")),$e=L("__cxa_can_catch"),Ue=L("__cxa_is_pointer_type");o.dynCall_jiji=L("dynCall_jiji");["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","zeroMemory","exitJS","isLeapYear","ydayFromDate","arraySum","addDays","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","initRandomFill","randomFill","getCallstack","emscriptenLog","convertPCtoSourceLocation","readEmAsmArgs","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","safeSetTimeout","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","getPromise","makePromise","idsToPromises","makePromiseCallback","setMainLoop","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_createDataFile","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","__glGenObject","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","SDL_unicode","SDL_ttfContext","SDL_audio","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","getFunctionArgsName","registerInheritedInstance","unregisterInheritedInstance","enumReadValueFromPointer","getStringOrSymbol","emval_get_global","emval_returnValue","emval_lookupTypes","emval_addMethodCaller"].forEach((function(t){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get(){var e=`\`${t}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,r=t;r.startsWith("_")||(r="$"+t),e+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${r}')`,z(t)&&(e+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),tt(e)}}),V(t)}));var je;function We(){var t;Oe(),x(0==(3&(t=ke()))),0==t&&(t+=4),v[t>>2]=34821223,v[t+4>>2]=2310721022,v[0]=1668509029}function ze(){function t(){je||(je=!0,o.calledRun=!0,w||(x(!F),F=!0,E(),Y(A),r(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),x(!o._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(E(),o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)t=o.postRun.shift(),R.unshift(t);var t;Y(R)}()))}P>0||(We(),function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)t=o.preRun.shift(),S.unshift(t);var t;Y(S)}(),P>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t(),E()))}if(["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createLazyFile","FS_createLink","FS_createDevice","FS_readFile","out","err","callMain","abort","wasmMemory","wasmExports","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","ptrToString","getHeapMax","growMemory","ENV","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","ERRNO_CODES","ERRNO_MESSAGES","DNS","Protocols","Sockets","timers","warnOnce","UNWIND_CACHE","readEmAsmArgsArray","dynCallLegacy","getDynCaller","dynCall","handleAllocatorInit","HandleAllocator","wasmTable","noExitRuntime","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","currentFullscreenStrategy","restoreOldWindowedStyle","ExitStatus","flush_NO_FILESYSTEM","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","incrementExceptionRefcount","decrementExceptionRefcount","getExceptionMessage","Browser","wget","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","emscripten_webgl_power_preferences","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","getTypeName","getFunctionName","heap32VectorToArray","requireRegisteredType","UnboundTypeError","PureVirtualError","GenericWireTypeSize","init_embind","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","embindRepr","registeredInstances","getBasestPointer","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","registeredPointers","registerType","integerReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","readPointer","runDestructors","newFunc","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","deletionQueue","flushPendingDeletes","delayFunction","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_handles","emval_symbols","init_emval","count_emval_handles","Emval","emval_methodCallers","reflectConstruct"].forEach(V),I=function t(){je||ze(),je||(I=t)},o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return ze(),t.ready});t.exports=r}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.m=t,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.u=t=>t+".autumnplot-gl.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=document.baseURI||self.location.href;var n={};return(()=>{"use strict";r.r(n),r.d(n,{Barbs:()=>En,ColorMap:()=>Er,Contour:()=>an,ContourFill:()=>pn,ContourLabels:()=>on,Grid:()=>mo,Hodographs:()=>Un,LambertGrid:()=>bo,MultiPlotLayer:()=>Hn,Paintball:()=>Cn,PlateCarreeGrid:()=>go,PlateCarreeRotatedGrid:()=>vo,PlotComponent:()=>O,PlotLayer:()=>zn,Raster:()=>dn,RawProfileField:()=>uo,RawScalarField:()=>lo,RawVectorField:()=>co,colormaps:()=>yo,initAutumnPlot:()=>wo,makeColorBar:()=>Xn,makePaintballKey:()=>Jn});const t=Symbol("Comlink.proxy"),e=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.thrown"),a=t=>"object"==typeof t&&null!==t||"function"==typeof t,s=new Map([["proxy",{canHandle:e=>a(e)&&e[t],serialize(t){const{port1:e,port2:r}=new MessageChannel;return l(t,e),[r,[r]]},deserialize:t=>(t.start(),u(t))}],["throw",{canHandle:t=>a(t)&&i in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function l(e,r=self){r.addEventListener("message",(function n(o){if(!o||!o.data)return;const{id:a,type:s,path:u}=Object.assign({path:[]},o.data),f=(o.data.argumentList||[]).map(m);let h;try{const r=u.slice(0,-1).reduce(((t,e)=>t[e]),e),n=u.reduce(((t,e)=>t[e]),e);switch(s){case"GET":h=n;break;case"SET":r[u.slice(-1)[0]]=m(o.data.value),h=!0;break;case"APPLY":h=n.apply(r,f);break;case"CONSTRUCT":h=function(e){return Object.assign(e,{[t]:!0})}(new n(...f));break;case"ENDPOINT":{const{port1:t,port2:r}=new MessageChannel;l(e,r),h=function(t,e){return p.set(t,e),t}(t,[t])}break;case"RELEASE":h=void 0;break;default:return}}catch(t){h={value:t,[i]:0}}Promise.resolve(h).catch((t=>({value:t,[i]:0}))).then((t=>{const[e,o]=_(t);r.postMessage(Object.assign(Object.assign({},e),{id:a}),o),"RELEASE"===s&&(r.removeEventListener("message",n),c(r))}))})),r.start&&r.start()}function c(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function u(t,e){return h(t,[],e)}function f(t){if(t)throw new Error("Proxy has been released and is not useable")}function h(t,r=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(e,n){if(f(i),n===o)return()=>g(t,{type:"RELEASE",path:r.map((t=>t.toString()))}).then((()=>{c(t),i=!0}));if("then"===n){if(0===r.length)return{then:()=>a};const e=g(t,{type:"GET",path:r.map((t=>t.toString()))}).then(m);return e.then.bind(e)}return h(t,[...r,n])},set(e,n,o){f(i);const[a,s]=_(o);return g(t,{type:"SET",path:[...r,n].map((t=>t.toString())),value:a},s).then(m)},apply(n,o,a){f(i);const s=r[r.length-1];if(s===e)return g(t,{type:"ENDPOINT"}).then(m);if("bind"===s)return h(t,r.slice(0,-1));const[l,c]=d(a);return g(t,{type:"APPLY",path:r.map((t=>t.toString())),argumentList:l},c).then(m)},construct(e,n){f(i);const[o,a]=d(n);return g(t,{type:"CONSTRUCT",path:r.map((t=>t.toString())),argumentList:o},a).then(m)}});return a}function d(t){const e=t.map(_);return[e.map((t=>t[0])),(r=e.map((t=>t[1])),Array.prototype.concat.apply([],r))];var r}const p=new WeakMap;function _(t){for(const[e,r]of s)if(r.canHandle(t)){const[n,o]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},o]}return[{type:"RAW",value:t},p.get(t)||[]]}function m(t){switch(t.type){case"HANDLER":return s.get(t.name).deserialize(t.value);case"RAW":return t.value}}function g(t,e,r){return new Promise((n=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(r){r.data&&r.data.id&&r.data.id===o&&(t.removeEventListener("message",e),n(r.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),r)}))}var v=function(){return v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},v.apply(this,arguments)},b=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},y=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},w=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},x=function(t,e){e=void 0===e?"float":e;var r=t.match(/#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?/i);if(null===r)throw"Got '".concat(t,"' in hex2rgba, which does not look like a hex color");var n=r.slice(1).filter((function(t){return void 0!==t})).map((function(t){return parseInt(t,16)}));return"float"==e&&(n=n.map((function(t){return t/255}))),void 0===n[3]?[n[0],n[1],n[2],1]:[n[0],n[1],n[2],n[3]]},T=function(t,e){var r=y(x(t,e),4),n=r[0],o=r[1],i=r[2];return r[3],[n,o,i]},E=function(t,e){var r=y(t,3);return function(t,e){var r=t;return"float"==(e=void 0===e?"float":e)&&(r=r.map((function(t){return Math.round(255*t)}))),"#"+r.map((function(t){return t.toString(16).padStart(2,"0").toUpperCase()})).join("")}([r[0],r[1],r[2],0],e).slice(0,-2)},S=function(t){var e,r=y(t,3),n=r[0],o=r[1],i=r[2],a=Math.max(n,o,i),s=a-Math.min(n,o,i);return 0==s?e=0:a==n?e=(o-i)/s*60%6:a==o?e=60*((i-n)/s+2):a==i&&(e=60*((n-o)/s+4)),[e,0==a?0:s/a,a]},A=function(t){var e,r,n,o=y(t,3),i=o[0],a=o[1],s=o[2],l=s*a,c=l*(1-Math.abs(i/60%2-1)),u=s-l;return 0<=i&&i<60?(e=l,r=c,n=0):60<=i&&i<120?(e=c,r=l,n=0):120<=i&&i<180?(e=0,r=l,n=c):180<=i&&i<240?(e=0,r=c,n=l):240<=i&&i<300?(e=c,r=0,n=l):300<=i&&i<360&&(e=l,r=0,n=c),[e+u,r+u,n+u]};function R(t,e,r){for(var n=1,o=r;t%o!=0||e%o!=0;)n+=1,o/=2;return n}function F(){var t,e,r,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];return b(this,(function(t){switch(t.label){case 0:e=n.map((function(t){return t[Symbol.iterator]()})),t.label=1;case 1:return(r=e.map((function(t){return t.next()}))).some((function(t){return t.done}))?[3,3]:[4,r.map((function(t){return t.value}))];case 2:return t.sent(),[3,1];case 3:return[2]}}))}var P=function(){function t(t,e){this.cached_values={},this.compute_value=t,this.make_key=void 0===e?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)}:e}return t.prototype.getValue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.make_key.apply(this,w([],y(t),!1));return r in this.cached_values||(this.cached_values[r]=this.compute_value.apply(this,w([],y(t),!1))),this.cached_values[r]},t}();function M(t,e){var r=v({},e);return void 0!==t&&Object.entries(t).forEach((function(t){var e=y(t,2),n=e[0],o=e[1];r[n]=o})),r}function I(t){return t.getParameter(t.VERSION).includes("WebGL 2.0")}var C=u(new Worker(new URL(r.p+r.u(110),r.b))),O=function(){};function k(t,e){var r,n,o,i,a,s,l,c=I(t);if(e){var u=t.getExtension("OES_texture_half_float"),f=t.getExtension("OES_texture_half_float_linear");if(!c&&null===u||!c&&null===f)throw"Float16 data are not supported on this hardware. Try Float32 data instead.";r=c?t.R16F:t.LUMINANCE,n=c?t.HALF_FLOAT:u.HALF_FLOAT_OES,o=2}else{if(u=t.getExtension("OES_texture_float"),f=t.getExtension("OES_texture_float_linear"),!c&&null===u||!c&&null===f||"iOS"===(i=window.navigator.userAgent,a=window.navigator.platform,l=null,-1!==(s=["Macintosh","MacIntel","MacPPC","Mac68K"]).indexOf(a)&&navigator.maxTouchPoints<=1?l="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(a)||-1!==s.indexOf(a)&&navigator.maxTouchPoints>1?l="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(a)?l="Windows":/Android/.test(i)?l="Android":/Linux/.test(a)&&(l="Linux"),l))throw"Float32 data are not supported on this hardware. Try Float16 data instead.";r=c?t.R32F:t.LUMINANCE,n=t.FLOAT,o=4}return{format:r,type:n,row_alignment:o}}function N(t){var e,r,n=function(t){var e=Math.sin(t);return Math.tan(Math.PI/4-t/2)*Math.pow((1+a*e)/(1-a*e),a/2)},o=function(t){var e=Math.sin(t);return Math.cos(t)/Math.sqrt(1-a*a*e*e)},i=6378137,a=Math.sqrt(.006694379990197619),s=Math.PI/180,l=t.lon_0,c=t.lat_0,u=t.lat_std;u=Array.isArray(u)&&u[0]==u[1]?u[0]:u,l*=s;var f=n(c*=s);if(Array.isArray(u)){var h=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}(u,2),d=h[0],p=h[1];p*=s;var _=n(d*=s),m=n(p),g=o(d),v=o(p);r=Math.log(g/v)/Math.log(_/m),e=g/(r*Math.pow(_,r))}else d=u,_=n(d*=s),g=o(d),r=Math.sin(d),e=g/(r*Math.pow(_,r));var b=i*e*Math.pow(f,r),y=a*a,w=y*y,x=w*y,T=x*y,E=y/2+5*w/24+3*x/120-73*T/2016,S=7*w/24+29*x/120+233*T/6720,A=7*x/30+81*T/280,R=4729*T/20160;return function(t,o,a){return(a=void 0===a?{inverse:!1}:a).inverse?(c=t,u=o,f=Math.atan2(c,b-u)/r+l,h=Math.hypot(c,b-u)*Math.sign(r),d=Math.pow(h/(i*e),1/r),p=Math.PI/2-2*Math.atan(d),_=Math.sin(2*p),m=Math.cos(2*p),[f/s,(p+_*(E+m*(S+m*(A+R*m))))/s]):function(t,o){t*=s;var a=n(o*=s),c=i*e*Math.pow(a,r),u=r*(t-l);return[c*Math.sin(u),b-c*Math.cos(u)]}(t,o);var c,u,f,h,d,p,_,m}}var B=function(){function t(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(e,")"));if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return t.prototype.toMercatorCoord=function(){return{x:(n=this.lng,(180+n)/360),y:(t=this.lat,e=Math.sin(t*Math.PI/180),r=(180-90/Math.PI*Math.log((1+e)/(1-e)))/360,Math.min(2,Math.max(-2,r)))};var t,e,r,n},t.fromMercatorCoord=function(e,r){return new t(function(t){return 360*t-180}(e),function(t){return 180*Math.atan(Math.sinh((180-360*t)*Math.PI/180))/Math.PI}(r))},t}();const G="This constructor is not a subclass of Float16Array",L="The constructor property value is not an object",D="Attempting to access detached ArrayBuffer",$="Cannot convert undefined or null to object",U="Cannot mix BigInt and other types, use explicit conversions",j="@@iterator property is not callable",W="Reduce of empty array with no initial value",z="Offset is out of bounds";function H(t){return(e,...r)=>Y(t,e,r)}function V(t,e){return H(q(t,e).get)}const{apply:Y,construct:X,defineProperty:J,get:Z,getOwnPropertyDescriptor:q,getPrototypeOf:K,has:Q,ownKeys:tt,set:et,setPrototypeOf:rt}=Reflect,nt=Proxy,{EPSILON:ot,MAX_SAFE_INTEGER:it,isFinite:at,isNaN:st}=Number,{iterator:lt,species:ct,toStringTag:ut,for:ft}=Symbol,ht=Object,{create:dt,defineProperty:pt,freeze:_t,is:mt}=ht,gt=ht.prototype,vt=gt.__lookupGetter__?H(gt.__lookupGetter__):(t,e)=>{if(null==t)throw fe($);let r=ht(t);do{const t=q(r,e);if(void 0!==t)return bt(t,"get")?t.get:void 0}while(null!==(r=K(r)))},bt=ht.hasOwn||H(gt.hasOwnProperty),yt=Array,wt=yt.isArray,xt=yt.prototype,Tt=H(xt.join),Et=H(xt.push),St=H(xt.toLocaleString),At=xt[lt],Rt=H(At),{abs:Ft,trunc:Pt}=Math,Mt=ArrayBuffer,It=Mt.isView,Ct=Mt.prototype,Ot=H(Ct.slice),kt=V(Ct,"byteLength"),Nt="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null,Bt=Nt&&V(Nt.prototype,"byteLength"),Gt=K(Uint8Array),Lt=Gt.from,Dt=Gt.prototype,$t=Dt[lt],Ut=H(Dt.keys),jt=H(Dt.values),Wt=H(Dt.entries),zt=H(Dt.set),Ht=H(Dt.reverse),Vt=H(Dt.fill),Yt=H(Dt.copyWithin),Xt=H(Dt.sort),Jt=H(Dt.slice),Zt=H(Dt.subarray),qt=V(Dt,"buffer"),Kt=V(Dt,"byteOffset"),Qt=V(Dt,"length"),te=V(Dt,ut),ee=Uint8Array,re=Uint16Array,ne=(...t)=>Y(Lt,re,t),oe=Uint32Array,ie=Float32Array,ae=K([][lt]()),se=H(ae.next),le=H(function*(){}().next),ce=K(ae),ue=DataView.prototype,fe=(H(ue.getUint16),H(ue.setUint16),TypeError),he=RangeError,de=WeakSet,pe=de.prototype,_e=H(pe.add),me=H(pe.has),ge=WeakMap,ve=ge.prototype,be=H(ve.get),ye=H(ve.has),we=H(ve.set),xe=new ge,Te=dt(null,{next:{value:function(){const t=be(xe,this);return se(t)}},[lt]:{value:function(){return this}}});function Ee(t){if(t[lt]===At&&ae.next===se)return t;const e=dt(Te);return we(xe,e,Rt(t)),e}const Se=new ge,Ae=dt(ce,{next:{value:function(){const t=be(Se,this);return le(t)},writable:!0,configurable:!0}});for(const t of tt(ae))"next"!==t&&pt(Ae,t,q(ae,t));function Re(t){const e=dt(Ae);return we(Se,e,t),e}function Fe(t){return null!==t&&"object"==typeof t||"function"==typeof t}function Pe(t){return null!==t&&"object"==typeof t}function Me(t){return void 0!==te(t)}function Ie(t){const e=te(t);return"BigInt64Array"===e||"BigUint64Array"===e}function Ce(t){if(null===Nt)return!1;try{return Bt(t),!0}catch(t){return!1}}function Oe(t){return!!wt(t)&&t[lt]===At&&ae.next===se}function ke(t){if("string"!=typeof t)return!1;const e=+t;return t===e+""&&!!at(e)&&e===Pt(e)}const Ne=ft("__Float16Array__"),Be=1/ot,Ge=5.960464477539063e-8,Le=.0009765625*Be;const De=new Mt(4),$e=new ie(De),Ue=new oe(De),je=new re(512),We=new ee(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(je[t]=0,je[256|t]=32768,We[t]=24,We[256|t]=24):e<-14?(je[t]=1024>>-e-14,je[256|t]=1024>>-e-14|32768,We[t]=-e-1,We[256|t]=-e-1):e<=15?(je[t]=e+15<<10,je[256|t]=e+15<<10|32768,We[t]=13,We[256|t]=13):e<128?(je[t]=31744,je[256|t]=64512,We[t]=24,We[256|t]=24):(je[t]=31744,je[256|t]=64512,We[t]=13,We[256|t]=13)}function ze(t){$e[0]=function(t){const e=+t;if(!at(e)||0===e)return e;const r=e>0?1:-1,n=Ft(e);if(n<6103515625e-14)return r*function(t){return t+Be-Be}(n/Ge)*Ge;const o=(1+Le)*n,i=o-(o-n);return i>65504||st(i)?r*(1/0):r*i}(t);const e=Ue[0],r=e>>23&511;return je[r]+((8388607&e)>>We[r])}const He=new oe(2048);for(let t=1;t<1024;++t){let e=t<<13,r=0;for(;0==(8388608&e);)e<<=1,r-=8388608;e&=-8388609,r+=947912704,He[t]=e|r}for(let t=1024;t<2048;++t)He[t]=939524096+(t-1024<<13);const Ve=new oe(64);for(let t=1;t<31;++t)Ve[t]=t<<23;Ve[31]=1199570944,Ve[32]=2147483648;for(let t=33;t<63;++t)Ve[t]=2147483648+(t-32<<23);Ve[63]=3347054592;const Ye=new re(64);for(let t=1;t<64;++t)32!==t&&(Ye[t]=1024);function Xe(t){const e=t>>10;return Ue[0]=He[Ye[e]+(1023&t)]+Ve[e],$e[0]}function Je(t){const e=+t;return st(e)||0===e?0:Pt(e)}function Ze(t){const e=Je(t);return e<0?0:e<it?e:it}function qe(t,e){if(!Fe(t))throw fe("This is not an object");const r=t.constructor;if(void 0===r)return e;if(!Fe(r))throw fe(L);const n=r[ct];return null==n?e:n}function Ke(t){if(Ce(t))return!1;try{return Ot(t,0,0),!1}catch(t){}return!0}function Qe(t,e){const r=st(t),n=st(e);if(r&&n)return 0;if(r)return 1;if(n)return-1;if(t<e)return-1;if(t>e)return 1;if(0===t&&0===e){const r=mt(t,0),n=mt(e,0);if(!r&&n)return-1;if(r&&!n)return 1}return 0}const tr=new ge;function er(t){return ye(tr,t)||!It(t)&&function(t){if(!Pe(t))return!1;const e=K(t);if(!Pe(e))return!1;const r=e.constructor;if(void 0===r)return!1;if(!Fe(r))throw fe(L);return Q(r,Ne)}(t)}function rr(t){if(!er(t))throw fe("This is not a Float16Array object")}function nr(t,e){const r=er(t),n=Me(t);if(!r&&!n)throw fe("Species constructor didn't return TypedArray object");if("number"==typeof e){let n;if(r){const e=or(t);n=Qt(e)}else n=Qt(t);if(n<e)throw fe("Derived constructor created TypedArray object which was too small length")}if(Ie(t))throw fe(U)}function or(t){const e=be(tr,t);if(void 0!==e){if(Ke(qt(e)))throw fe(D);return e}const r=t.buffer;if(Ke(r))throw fe(D);const n=X(lr,[r,t.byteOffset,t.length],t.constructor);return be(tr,n)}function ir(t){const e=Qt(t),r=[];for(let n=0;n<e;++n)r[n]=Xe(t[n]);return r}const ar=new de;for(const t of tt(Dt)){if(t===ut)continue;const e=q(Dt,t);bt(e,"get")&&"function"==typeof e.get&&_e(ar,e.get)}const sr=_t({get:(t,e,r)=>ke(e)&&bt(t,e)?Xe(Z(t,e)):me(ar,vt(t,e))?Z(t,e):Z(t,e,r),set:(t,e,r,n)=>ke(e)&&bt(t,e)?et(t,e,ze(r)):et(t,e,r,n),getOwnPropertyDescriptor(t,e){if(ke(e)&&bt(t,e)){const r=q(t,e);return r.value=Xe(r.value),r}return q(t,e)},defineProperty:(t,e,r)=>ke(e)&&bt(t,e)&&bt(r,"value")?(r.value=ze(r.value),J(t,e,r)):J(t,e,r)});class lr{constructor(t,e,r){let n;if(er(t))n=X(re,[or(t)],new.target);else if(!Fe(t)||(function(t){try{return kt(t),!0}catch(t){return!1}}(o=t)||Ce(o)))n=X(re,arguments,new.target);else{let e,r;if(Me(t)){if(e=t,r=Qt(t),Ke(qt(t)))throw fe(D);if(Ie(t))throw fe(U);const o=new Mt(2*r);n=X(re,[o],new.target)}else{const o=t[lt];if(null!=o&&"function"!=typeof o)throw fe(j);null!=o?Oe(t)?(e=t,r=t.length):(e=[...t],r=e.length):(e=t,r=Ze(e.length)),n=X(re,[r],new.target)}for(let t=0;t<r;++t)n[t]=ze(e[t])}var o;const i=new nt(n,sr);return we(tr,i,n),i}static from(t,...e){const r=this;if(!Q(r,Ne))throw fe(G);if(r===lr){if(er(t)&&0===e.length){const e=or(t),r=new re(qt(e),Kt(e),Qt(e));return new lr(qt(Jt(r)))}if(0===e.length)return new lr(qt(ne(t,ze)));const r=e[0],n=e[1];return new lr(qt(ne(t,(function(t,...e){return ze(Y(r,this,[t,...Ee(e)]))}),n)))}let n,o;const i=t[lt];if(null!=i&&"function"!=typeof i)throw fe(j);if(null!=i)Oe(t)?(n=t,o=t.length):Me(a=t)&&a[lt]===$t&&ae.next===se?(n=t,o=Qt(t)):(n=[...t],o=n.length);else{if(null==t)throw fe($);n=ht(t),o=Ze(n.length)}var a;const s=new r(o);if(0===e.length)for(let t=0;t<o;++t)s[t]=n[t];else{const t=e[0],r=e[1];for(let e=0;e<o;++e)s[e]=Y(t,r,[n[e],e])}return s}static of(...t){const e=this;if(!Q(e,Ne))throw fe(G);const r=t.length;if(e===lr){const e=new lr(r),n=or(e);for(let e=0;e<r;++e)n[e]=ze(t[e]);return e}const n=new e(r);for(let e=0;e<r;++e)n[e]=t[e];return n}keys(){rr(this);const t=or(this);return Ut(t)}values(){rr(this);const t=or(this);return Re(function*(){for(const e of jt(t))yield Xe(e)}())}entries(){rr(this);const t=or(this);return Re(function*(){for(const[e,r]of Wt(t))yield[e,Xe(r)]}())}at(t){rr(this);const e=or(this),r=Qt(e),n=Je(t),o=n>=0?n:r+n;if(!(o<0||o>=r))return Xe(e[o])}with(t,e){rr(this);const r=or(this),n=Qt(r),o=Je(t),i=o>=0?o:n+o,a=+e;if(i<0||i>=n)throw he(z);const s=new re(qt(r),Kt(r),Qt(r)),l=new lr(qt(Jt(s)));return or(l)[i]=ze(a),l}map(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0],i=qe(r,lr);if(i===lr){const e=new lr(n),i=or(e);for(let e=0;e<n;++e){const n=Xe(r[e]);i[e]=ze(Y(t,o,[n,e,this]))}return e}const a=new i(n);nr(a,n);for(let e=0;e<n;++e){const n=Xe(r[e]);a[e]=Y(t,o,[n,e,this])}return a}filter(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0],i=[];for(let e=0;e<n;++e){const n=Xe(r[e]);Y(t,o,[n,e,this])&&Et(i,n)}const a=new(qe(r,lr))(i);return nr(a),a}reduce(t,...e){rr(this);const r=or(this),n=Qt(r);if(0===n&&0===e.length)throw fe(W);let o,i;0===e.length?(o=Xe(r[0]),i=1):(o=e[0],i=0);for(let e=i;e<n;++e)o=t(o,Xe(r[e]),e,this);return o}reduceRight(t,...e){rr(this);const r=or(this),n=Qt(r);if(0===n&&0===e.length)throw fe(W);let o,i;0===e.length?(o=Xe(r[n-1]),i=n-2):(o=e[0],i=n-1);for(let e=i;e>=0;--e)o=t(o,Xe(r[e]),e,this);return o}forEach(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0];for(let e=0;e<n;++e)Y(t,o,[Xe(r[e]),e,this])}find(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0];for(let e=0;e<n;++e){const n=Xe(r[e]);if(Y(t,o,[n,e,this]))return n}}findIndex(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0];for(let e=0;e<n;++e){const n=Xe(r[e]);if(Y(t,o,[n,e,this]))return e}return-1}findLast(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0];for(let e=n-1;e>=0;--e){const n=Xe(r[e]);if(Y(t,o,[n,e,this]))return n}}findLastIndex(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0];for(let e=n-1;e>=0;--e){const n=Xe(r[e]);if(Y(t,o,[n,e,this]))return e}return-1}every(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0];for(let e=0;e<n;++e)if(!Y(t,o,[Xe(r[e]),e,this]))return!1;return!0}some(t,...e){rr(this);const r=or(this),n=Qt(r),o=e[0];for(let e=0;e<n;++e)if(Y(t,o,[Xe(r[e]),e,this]))return!0;return!1}set(t,...e){rr(this);const r=or(this),n=Je(e[0]);if(n<0)throw he(z);if(null==t)throw fe($);if(Ie(t))throw fe(U);if(er(t))return zt(or(this),or(t),n);if(Me(t)&&Ke(qt(t)))throw fe(D);const o=Qt(r),i=ht(t),a=Ze(i.length);if(n===1/0||a+n>o)throw he(z);for(let t=0;t<a;++t)r[t+n]=ze(i[t])}reverse(){rr(this);const t=or(this);return Ht(t),this}toReversed(){rr(this);const t=or(this),e=new re(qt(t),Kt(t),Qt(t)),r=new lr(qt(Jt(e))),n=or(r);return Ht(n),r}fill(t,...e){rr(this);const r=or(this);return Vt(r,ze(t),...Ee(e)),this}copyWithin(t,e,...r){rr(this);const n=or(this);return Yt(n,t,e,...Ee(r)),this}sort(t){rr(this);const e=or(this),r=void 0!==t?t:Qe;return Xt(e,((t,e)=>r(Xe(t),Xe(e)))),this}toSorted(t){rr(this);const e=or(this);if(void 0!==t&&"function"!=typeof t)throw new fe("The comparison function must be either a function or undefined");const r=void 0!==t?t:Qe,n=new re(qt(e),Kt(e),Qt(e)),o=new lr(qt(Jt(n))),i=or(o);return Xt(i,((t,e)=>r(Xe(t),Xe(e)))),o}slice(t,e){rr(this);const r=or(this),n=qe(r,lr);if(n===lr){const n=new re(qt(r),Kt(r),Qt(r));return new lr(qt(Jt(n,t,e)))}const o=Qt(r),i=Je(t),a=void 0===e?o:Je(e);let s,l;s=i===-1/0?0:i<0?o+i>0?o+i:0:o<i?o:i,l=a===-1/0?0:a<0?o+a>0?o+a:0:o<a?o:a;const c=l-s>0?l-s:0,u=new n(c);if(nr(u,c),0===c)return u;if(Ke(qt(r)))throw fe(D);let f=0;for(;s<l;)u[f]=Xe(r[s]),++s,++f;return u}subarray(t,e){rr(this);const r=or(this),n=qe(r,lr),o=new re(qt(r),Kt(r),Qt(r)),i=Zt(o,t,e),a=new n(qt(i),Kt(i),Qt(i));return nr(a),a}indexOf(t,...e){rr(this);const r=or(this),n=Qt(r);let o=Je(e[0]);if(o===1/0)return-1;o<0&&(o+=n,o<0&&(o=0));for(let e=o;e<n;++e)if(bt(r,e)&&Xe(r[e])===t)return e;return-1}lastIndexOf(t,...e){rr(this);const r=or(this),n=Qt(r);let o=e.length>=1?Je(e[0]):n-1;if(o===-1/0)return-1;o>=0?o=o<n-1?o:n-1:o+=n;for(let e=o;e>=0;--e)if(bt(r,e)&&Xe(r[e])===t)return e;return-1}includes(t,...e){rr(this);const r=or(this),n=Qt(r);let o=Je(e[0]);if(o===1/0)return!1;o<0&&(o+=n,o<0&&(o=0));const i=st(t);for(let e=o;e<n;++e){const n=Xe(r[e]);if(i&&st(n))return!0;if(n===t)return!0}return!1}join(t){rr(this);const e=ir(or(this));return Tt(e,t)}toLocaleString(...t){rr(this);const e=ir(or(this));return St(e,...Ee(t))}get[ut](){if(er(this))return"Float16Array"}}pt(lr,"BYTES_PER_ELEMENT",{value:2}),pt(lr,Ne,{}),rt(lr,Gt);const cr=lr.prototype;pt(cr,"BYTES_PER_ELEMENT",{value:2}),pt(cr,lt,{value:cr.values,writable:!0,configurable:!0}),rt(cr,Dt);class ur{constructor(t,e,r,n,o){this.gl=t,this.n_coords_per_vert=r,this.dtype=((t,e)=>({Float32Array:t.FLOAT,Uint8Array:t.UNSIGNED_BYTE,Uint16Array:t.UNSIGNED_SHORT,Uint32Array:t.UNSIGNED_INT}[e.constructor.name]))(t,e),this.n_verts=e.length/r,this.draw_mode=n;const i=t.createBuffer();if(null===i)throw"Could not create WebGL buffer";this.buffer=i,t.bindBuffer(o,this.buffer),t.bufferData(o,e,t.STATIC_DRAW)}}class fr extends ur{constructor(t,e,r,n){super(t,e,r,n,t.ARRAY_BUFFER)}bindToProgram(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,this.n_coords_per_vert,this.dtype,!1,0,0)}}function hr(t){return t.getParameter(t.VERSION).includes("WebGL 2.0")}class dr{constructor(t,e){this.gl=t;const r=t.createTexture();if(null===r)throw"Could not create WebGL texture";this.texture=r,this.tex_num=null,this.setImageData(e);const n=void 0===e.mag_filter?t.LINEAR:e.mag_filter;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}setImageData(t){const e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture);const r=hr(e)?function(t,e,r){switch(r){case t.UNSIGNED_BYTE:switch(e){case t.RGBA8:case t.RGB5_A1:case t.RGBA4:case t.SRGB8_ALPHA8:return t.RGBA;case t.RGBA8UI:return t.RGBA_INTEGER;case t.RGB8:case t.RGB565:case t.SRGB8:return t.RGB;case t.RGB8UI:return t.RGB_INTEGER;case t.RG8:return t.RG;case t.RG8UI:return t.RG_INTEGER;case t.R8:return t.RED;case t.R8UI:return t.RED_INTEGER;case t.RGBA:return t.RGBA;case t.RGB:return t.RGB;case t.LUMINANCE_ALPHA:return t.LUMINANCE_ALPHA;case t.LUMINANCE:return t.LUMINANCE;case t.ALPHA:return t.ALPHA}break;case t.BYTE:switch(e){case t.RGBA8_SNORM:return t.RGBA;case t.RGBA8I:return t.RGBA_INTEGER;case t.RGB8_SNORM:return t.RGB;case t.RGB8I:return t.RGB_INTEGER;case t.RG8_SNORM:return t.RG;case t.RG8I:return t.RG_INTEGER;case t.R8_SNORM:return t.RED;case t.R8I:return t.RED_INTEGER}break;case t.UNSIGNED_SHORT_4_4_4_4:switch(e){case t.RGBA4:case t.RGBA:return t.RGBA}break;case t.UNSIGNED_SHORT_5_5_5_1:switch(e){case t.RGB5_A1:case t.RGBA:return t.RGBA}break;case t.UNSIGNED_INT_2_10_10_10_REV:switch(e){case t.RGB10_A2:case t.RGB5_A1:return t.RGBA;case t.RGB10_A2UI:return t.RGBA_INTEGER}break;case t.HALF_FLOAT:switch(e){case t.RGBA16F:return t.RGBA;case t.RGB16F:case t.R11F_G11F_B10F:case t.RGB9_E5:return t.RGB;case t.RG16F:return t.RG;case t.R16F:return t.RED}break;case t.FLOAT:switch(e){case t.RGBA32F:case t.RGBA16F:return t.RGBA;case t.RGB32F:case t.RGB16F:case t.R11F_G11F_B10F:case t.RGB9_E5:return t.RGB;case t.RG32F:case t.RG16F:return t.RG;case t.R32F:case t.R16F:return t.RED;case t.DEPTH_COMPONENT32F:return t.DEPTH_COMPONENT}break;case t.UNSIGNED_SHORT:switch(e){case t.RGBA16UI:return t.RGBA_INTEGER;case t.RGB16UI:return t.RGB_INTEGER;case t.RG16UI:return t.RG_INTEGER;case t.R16UI:return t.RED_INTEGER;case t.DEPTH_COMPONENT16:return t.DEPTH_COMPONENT}break;case t.SHORT:switch(e){case t.RGBA16I:return t.RGBA_INTEGER;case t.RGB16I:return t.RGB_INTEGER;case t.RG16I:return t.RG_INTEGER;case t.R16I:return t.RED_INTEGER}break;case t.UNSIGNED_INT:switch(e){case t.RGBA32UI:return t.RGBA_INTEGER;case t.RGB32UI:return t.RGB_INTEGER;case t.RG32UI:return t.RG_INTEGER;case t.R32UI:return t.RED_INTEGER;case t.DEPTH_COMPONENT24:case t.DEPTH_COMPONENT16:return t.DEPTH_COMPONENT}break;case t.INT:switch(e){case t.RGBA32I:return t.RGBA_INTEGER;case t.RGB32I:return t.RGB_INTEGER;case t.RG32I:return t.RG_INTEGER;case t.R32I:return t.RED_INTEGER}break;case t.UNSIGNED_SHORT_5_6_5:switch(e){case t.RGB565:case t.RGB:return t.RGB}break;case t.UNSIGNED_INT_10F_11F_11F_REV:if(e===t.R11F_G11F_B10F)return t.RGB;break;case t.UNSIGNED_INT_5_9_9_9_REV:if(e===t.RGB9_E5)return t.RGB;break;case t.UNSIGNED_INT_24_8:if(e===t.DEPTH24_STENCIL8)return t.DEPTH_STENCIL;break;case t.FLOAT_32_UNSIGNED_INT_24_8_REV:if(e===t.DEPTH32F_STENCIL8)return t.DEPTH_STENCIL;break;default:throw"Unknown format in getWebGL2InternalFormat"}throw"Invalid combination of internal format and data type"}(e,t.format,t.type):t.format,n=void 0===t.row_alignment?4:t.row_alignment;e.pixelStorei(e.UNPACK_ALIGNMENT,n),void 0!==t.width&&void 0!==t.height?e.texImage2D(e.TEXTURE_2D,0,t.format,t.width,t.height,0,r,t.type,t.image):e.texImage2D(e.TEXTURE_2D,0,t.format,r,t.type,t.image)}bindToProgram(t,e){this.activate(e),this.gl.uniform1i(t,e)}activate(t){this.tex_num=t,this.gl.activeTexture(this.gl.TEXTURE0+this.tex_num),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture)}deactivate(){null!==this.tex_num&&(this.gl.activeTexture(this.gl.TEXTURE0+this.tex_num),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.tex_num=null)}delete(){this.gl.deleteTexture(this.texture),this.tex_num=null}}function pr(t,e){const r=void 0===(e=void 0===e?{}:e).define?[]:[...e.define],n=[],o={},i=t.split("\n").map((t=>{const e=t.match(/#define\s+([\w\d_]+)/i);null!==e&&r.push(e[1]);const i=t.match(/#ifdef\s+([\w\d_]+)/i);if(null!==i)return n.push(i[1]),o[i[1]]=!0,"";const a=t.match(/#ifndef\s+([\w\d_]+)/i);if(null!==a)return n.push(a[1]),o[a[1]]=!1,"";if(null!==t.match(/#else/i)){const t=n[n.length-1];return o[t]=!o[t],""}if(null!==t.match(/#endif/i)){const t=n.pop();return o[t]=void 0,""}return n.map((t=>r.includes(t)==o[t])).reduce(((t,e)=>t&&e),!0)?t:""})).join("\n");if(n.length>0)throw"Unterminated #ifdef/#ifndef block in shader";return i}class _r{constructor(t,e,r,n){e=pr(e,n),r=pr(r,n),this.gl=t,this.prog=((t,e,r)=>{const n=t.createShader(t.VERTEX_SHADER);if(null===n)throw"Could not create vertex shader";if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(n);console.log("Vertex shader compiler log: "+e)}const o=t.createShader(t.FRAGMENT_SHADER);if(null===o)throw"Could not create fragment shader";if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(o);console.log("Fragment shader compiler log: "+e)}const i=t.createProgram();if(null===i)throw"Could not create shader program";if(t.attachShader(i,n),t.attachShader(i,o),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){const e=t.getProgramInfoLog(i);console.log("Linker log: "+e)}return i})(t,e,r),this.attributes={},this.uniforms={},this.n_verts=null,this.draw_mode=null,this.index_buffer=null;const o=t=>{const e=t.indexOf("//");return e>=0&&(t=t.slice(0,e)),t};e=e.split("\n").map(o).join("\n"),r=r.split("\n").map(o).join("\n");const i=hr(this.gl);if(!i&&(e.includes("#version 300 es")||r.includes("#version 300 es")))throw"WebGL2 context required for shader source containing '#version 300 es'";let a=i?/\b(?:in|attribute)+([\w ]+?) +([\w_]+);[\s]*$/gm:/attribute +([\w ]+?) +([\w_]+);[\s]*$/gm;for(const r of e.matchAll(a)){const[e,n,o]=r;this.attributes[o]={type:n,location:t.getAttribLocation(this.prog,o)}}for(const r of e.matchAll(/uniform +([\w ]+?) +([\w_]+)(?:[\s]*\[.*\])?;[\s]*$/gm)){const[e,n,o]=r,i=n.split(" "),a=t.getUniformLocation(this.prog,o);if(null===a)throw`Could not get vertex shader uniform location for '${o}'`;this.uniforms[o]={type:i[i.length-1],location:a}}for(const e of r.matchAll(/uniform +([\w ]+?) +([\w_]+)(?:[\s]*\[.*\])?;[\s]*$/gm)){const[r,n,o]=e,i=n.split(" "),a=t.getUniformLocation(this.prog,o);if(null===a)throw`Could not get fragment shader uniform location for '${o}'`;this.uniforms[o]={type:i[i.length-1],location:a}}}use(t,e,r,n){this.gl.useProgram(this.prog),void 0!==n?(n.bind(),this.index_buffer=n):this.index_buffer=null,this.draw_mode=null,this.n_verts=null,void 0!==t&&this.bindAttributes(t),void 0!==e&&this.setUniforms(e),void 0!==r&&this.bindTextures(r)}bindAttributes(t){Object.entries(t).forEach((([t,e])=>{if(void 0===this.attributes[t])return void console.warn(`Skipping attribute buffer provided for '${t}' because the attribute was not found in the program.`);if(this.n_verts=null===this.n_verts?e.n_verts:this.n_verts,this.draw_mode=null===this.draw_mode?e.draw_mode:this.draw_mode,this.draw_mode!=e.draw_mode)throw`Unexpected draw mode for attribute buffer ${t} (expected ${this.draw_mode}, got ${e.draw_mode}).`;if(this.n_verts!=e.n_verts)throw`Unexpected number of vertices for attribute buffer ${t} (expected ${this.n_verts}, got ${e.n_verts}).`;const{type:r,location:n}=this.attributes[t];e.bindToProgram(n)}))}setUniforms(t){Object.entries(t).forEach((([t,e])=>{if(void 0===this.uniforms[t])return void console.warn(`Skipping uniform value provided for '${t}' because the uniform was not found in the program.`);const{type:r,location:n}=this.uniforms[t];if("int"===r&&"number"==typeof e)this.gl.uniform1i(n,e);else if("float"===r&&"number"==typeof e)this.gl.uniform1f(n,e);else if("float"===r&&e instanceof Array)this.gl.uniform1fv(n,e);else if("vec2"===r&&e instanceof Array)this.gl.uniform2fv(n,e);else if("vec3"===r&&e instanceof Array)this.gl.uniform3fv(n,e);else if("vec4"===r&&e instanceof Array)this.gl.uniform4fv(n,e);else{if(!("mat4"===r&&e instanceof Array))throw`Could not figure out uniform function for type '${r}' and value '${String(e)}'`;this.gl.uniformMatrix4fv(n,!1,e)}}))}bindTextures(t){Object.entries(t).forEach((([t,e],r)=>{if(void 0===this.uniforms[t])return void console.warn(`Skipping texture provided for sampler '${t}' because the sampler was not found in the program.`);const{type:n,location:o}=this.uniforms[t];e.bindToProgram(o,r)}))}draw(){if(null===this.draw_mode||null===this.n_verts)throw"Cannot draw without binding attribute buffers";null===this.index_buffer?this.gl.drawArrays(this.draw_mode,0,this.n_verts):this.gl.drawElements(this.draw_mode,this.index_buffer.n_verts,this.index_buffer.dtype,0)}}class mr{constructor(t,e){this.gl=t,this.framebuffer=e}clear(t){const e=this.gl;if(null===e)throw"Register WebGL drawing context using registerGLContext() first";e.clearColor(...t),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.clear(e.COLOR_BUFFER_BIT)}renderTo(t,e,r,n){const o=this.gl;if(null===o)throw"Register WebGL drawing context using registerGLContext() first";o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),o.viewport(t,e,r,n)}copyToTexture(t,e,r,n,o){const i=this.gl;if(null===i)throw"Register WebGL drawing context using registerGLContext() first";i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer),t.activate(0),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,e,r,n,o,0)}}new class extends mr{constructor(){super(null,null)}registerGLContext(t){this.gl=t}};const gr=JSON.parse('{"levels":[20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140],"colors":["#e6f4ff","#dbf0fe","#d1ebfe","#c6e7fd","#bce3fd","#b1dffc","#a7dbfc","#9cd6fb","#92d2fb","#87cefa","#84c2f6","#81b7f1","#7eabed","#7ba0e8","#7994e4","#7688df","#737ddb","#7071d6","#6d66d2","#6a5acd","#7660cf","#8366d0","#8f6cd2","#9c72d3","#a878d5","#b47ed6","#c184d8","#cd8ad9","#da90db","#e696dc","#e390d9","#e08ad6","#dd84d3","#da7ed0","#d778cd","#d472ca","#d16cc7","#ce66c4","#cb60c1","#c85abe","#c453ba","#c04cb6","#bc45b2","#b83eae","#b437aa","#b030a6","#ac29a2","#a8229e","#a41b9a","#a01496","#a41080","#a80e75","#ac0e75","#b00c6a","#b4085f","#b80649","#bc043e","#c00233","#c80028","#c80028","#ca042a","#cc082c","#d00c2c","#d21432","#d41834","#d41834","#d61c36","#da243a","#dc283c","#de2c3e","#e03040","#e23442","#e43844","#e63c46","#e84048","#ea444a","#ec484c","#ee4c4e","#f05050","#f16052","#f27054","#f38056","#f49058","#f5a05a","#f6b05c","#f7c05e","#f8d060","#f9e062","#faf064","#f7eb61","#f4e65e","#f1e15b","#eedc58","#ebd755","#e8d252","#e5cd4f","#e2c84c","#dfc349","#dcbe46","#d9b943","#d6b440","#d3af3d","#d0aa3a","#cda537","#caa034","#c79b31","#c4962e","#c1912b","#be8c28","#bb8725","#b88222","#b57d1f","#b2781c","#af7319","#ac6e16","#a96913","#a66410","#a35f0d","#a05a0a","#a05a0a"]}'),vr=JSON.parse('{"levels":[20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],"colors":["#f0f8ff","#dbf0fe","#c6e7fd","#b1dffc","#9cd6fb","#87cefa","#81b7f1","#7ba0e8","#7688df","#7071d6","#6a5acd","#8366d0","#9c72d3","#b47ed6","#cd8ad9","#e696dc","#e08ad6","#da7ed0","#d472ca","#ce66c4","#c85abe","#c04cb6","#b83eae","#b030a6","#a8229e","#a01496","#a81080","#b00c6a","#b8043e","#c80028","#c80028","#d01030","#d41834","#d82038","#dc283c","#e03040","#e43844","#e84048","#ec484c","#f05050","#f27054","#f49058","#f6b05c","#f8d060","#faf064","#f4e65e","#eedc58","#e8d252","#e2c84c","#dcbe46","#d6b440","#d0aa3a","#caa034","#c4962e","#be8c28","#b88222","#b2781c","#ac6e16","#a66410","#a05a0a"]}'),br=JSON.parse('{"levels":[0,100,200,300,400,500,600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800,1900,2000,2100,2200,2300,2400,2500,2600,2700,2800,2900,3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300,5400,5500,5600,5700,5800,5900,6000,6500,7000,7500,8000,8500,9000,9500,10000],"colors":["#ffffff","#f0f0f0","#e1e1e1","#d2d2d2","#c3c3c3","#a5a5a5","#969696","#878787","#787878","#696969","#37536a","#436075","#506d80","#5c7a8b","#698796","#7594a2","#82a1ad","#8eaeb8","#9bbbc3","#a7c8ce","#e9dd96","#e8d186","#e7c575","#e6b865","#e5ac54","#e5a044","#e49433","#e38723","#e27b12","#e16f02","#dc4110","#d33b17","#ca351e","#c12e25","#b8282c","#af2234","#a61c3b","#9d1542","#940f49","#8b0950","#73088a","#7e1894","#8a289f","#9538a9","#a148b3","#ac59be","#b869c8","#c379d2","#cf89dd","#da99e7","#e9bec3","#e3b0b7","#dda3ac","#d795a0","#d18894","#ca7a89","#c46d7d","#be5f71","#b85266","#b2445a","#893d48","#8f4752","#96525b","#9c5c65","#a2676f","#a97178","#af7c82","#b6868b"]}'),yr=JSON.parse('{"levels":[-60,-59,-58,-57,-56,-55,-54,-53,-52,-51,-50,-49,-48,-47,-46,-45,-44,-43,-42,-41,-40,-39,-38,-37,-36,-35,-34,-33,-32,-31,-30,-29,-28,-27,-26,-25,-24,-23,-22,-21,-20,-19,-18,-17,-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],"colors":["#235877","#2a5f7c","#316782","#396e87","#40768c","#477d91","#4e8497","#558c9c","#5d93a1","#649ba6","#6ba2ac","#72a9b1","#79b1b6","#81b8bb","#88c0c1","#8fc7c6","#96cecb","#9dd6d0","#a5ddd6","#ace5db","#b3ece0","#b3ece0","#b1e7df","#b0e1dd","#aedcdc","#add7da","#abd2d9","#aaccd8","#a8c7d6","#a7c2d5","#a5bcd4","#a4b7d2","#a2b2d1","#9fa7ce","#9ea2cd","#9c9dcb","#9c9dcb","#9b97ca","#9992c8","#988dc7","#9688c6","#9582c4","#9278c2","#9073c0","#8f6dbf","#8d68bd","#8c63bc","#8a5dbb","#8958b9","#8753b8","#864eb6","#8448b5","#8343b4","#813eb2","#8038b1","#7e33b0","#7d33ae","#7b29ad","#7a23ab","#781eaa","#a037af","#a443b3","#a74fb7","#ab5cbb","#af68bf","#b374c3","#b680c7","#ba8dcc","#be99d0","#c1a5d4","#c5b1d8","#c9bddc","#cdcae0","#d0d6e4","#d4e2e8","#deecf2","#d1e2ee","#c5d9ea","#b8cfe6","#acc5e3","#9fbbdf","#92b2db","#86a8d7","#799ed3","#6c94cf","#608bcb","#5381c7","#4777c4","#3a6dc0","#2d64bc","#215ab8","#1450b4","#0f4455","#1c4e5a","#2a585f","#376363","#456d68","#52776d","#5f8172","#6d8c77","#7a967c","#88a080","#95aa85","#a3b58a","#b0bf8f","#bdc994","#cbd399","#d8de9d","#e6e8a2","#f3f2a7","#f8eea2","#f0e199","#e8d591","#e1c888","#d9bc80","#d1af77","#c9a36f","#c19666","#ba8a5e","#b27d55","#aa714d","#a26444","#9b583c","#8b3f2b","#833222","#7b261a","#7b261a","#741911","#6c0d09","#640000","#5f0000","#630507","#670a0e","#6c0f15","#70141c","#741824","#781d2b","#7d2232","#812739","#852c40","#73372d","#7a4036","#80493f","#875349","#8e5c52","#94655b","#9b6e64","#a88177","#af8a80","#b69389","#bd9c92","#c3a69c","#caafa5","#d1b8ae","#d7c1b7","#decac0","#e5d4ca","#ebddd3","#f2e6dc","#e8dfd6","#e0d7cf","#d8d0c8","#d0c8c0","#c8c0b9","#c0b9b2","#b7b1ab","#afa9a4","#a7a29c","#9f9a95","#97938e","#8f8b87","#878380","#7f7c78","#777471","#6f6c6a","#666563","#5e5d5c","#565554","#4e4e4d","#464646"]}'),wr=JSON.parse('{"levels":[-40,-39,-38,-37,-36,-35,-34,-33,-32,-31,-30,-29,-28,-27,-26,-25,-24,-23,-22,-21,-20,-19,-18,-17,-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],"colors":["#986d4d","#966c4c","#946b4c","#926a4b","#90694b","#8e684a","#8c664a","#8a6549","#886448","#866348","#846247","#826147","#806046","#7e5f46","#7c5e45","#7a5d44","#785b44","#765a43","#745943","#725842","#715742","#6f5641","#6d5540","#6b5440","#69533f","#67523f","#65503e","#634f3d","#614e3d","#5f4d3c","#5d4c3c","#5b4b3b","#594a3b","#57493a","#554839","#534739","#514538","#4f4438","#4d4337","#4b4237","#494136","#4d4334","#514738","#564c3c","#5a5041","#5e5545","#625949","#675e4d","#6b6251","#6f6755","#746b5a","#78705e","#7c7462","#807966","#857d6a","#89826f","#8d8673","#928b77","#968f7b","#9a947f","#9e9883","#a39d88","#a7a18c","#aba690","#afaa94","#b8b39c","#b8b39c","#bcb8a1","#c1bca5","#c9c5ad","#c9cab1","#d2ceb6","#d2ceb6","#d6d3ba","#dfdcc2","#e3e0c6","#e7e5ca","#ebe9cf","#f0eed3","#f4f2d7","#e6f5e6","#d7f0d7","#c8eac8","#b9e5b9","#aadfaa","#9bda9b","#8cd48c","#7dcf7d","#6ec96e","#5fc45f","#30ae30","#2ca32c","#279927","#238e23","#1e831e","#1a791a","#156e15","#116311","#0c590c","#084e08","#61a3af","#5896a0","#508992","#477b83","#3e6e74","#366166","#2d5457","#244648","#1c393a","#132c2b","#66669a","#605e94","#59568e","#534e88","#4d4682","#463e7c","#403676","#3a2e70","#33266a","#2d1e64","#724071","#784573","#7d4b75","#835076","#885678","#8e5b7a","#93617c","#99667d","#9e6c7f","#a47181"]}'),xr=JSON.parse('{"levels":[-15,-14.53608247,-14.07216495,-13.60824742,-13.1443299,-12.68041237,-12.21649485,-11.75257732,-11.28865979,-10.82474227,-10.36082474,-9.89690722,-9.43298969,-8.96907216,-8.50515464,-8.04123711,-7.57731959,-7.11340206,-6.64948454,-6.18556701,-5.72164948,-5.25773196,-4.79381443,-4.32989691,-3.86597938,-3.40206186,-2.93814433,-2.4742268,-2.01030928,-1.54639175,-1.08247423,-0.6185567,-0.15463918,0.30927835,0.77319588,1.2371134,1.70103093,2.16494845,2.62886598,3.09278351,3.55670103,4.02061856,4.48453608,4.94845361,5.41237113,5.87628866,6.34020619,6.80412371,7.26804124,7.73195876,8.19587629,8.65979381,9.12371134,9.58762887,10.05154639,10.51546392,10.97938144,11.44329897,11.90721649,12.37113402,12.83505155,13.29896907,13.7628866,14.22680412,14.69072165,15.15463918,15.6185567,16.08247423,16.54639175,17.01030928,17.4742268,17.93814433,18.40206186,18.86597938,19.32989691,19.79381443,20.25773196,20.72164948,21.18556701,21.64948454,22.11340206,22.57731959,23.04123711,23.50515464,23.96907216,24.43298969,24.89690722,25.36082474,25.82474227,26.28865979,26.75257732,27.21649485,27.68041237,28.1443299,28.60824742,29.07216495,29.53608247,30,30.46391753,30.92783505,31.39175258,31.8556701,32.31958763,32.78350515,33.24742268,33.71134021,34.17525773,34.63917526,35.10309278,35.56701031,36.03092784,36.49484536,36.95876289,37.42268041,37.88659794,38.35051546,38.81443299,39.27835052,39.74226804,40.20618557,40.67010309,41.13402062,41.59793814,42.06185567,42.5257732,42.98969072,43.45360825,43.91752577,44.3814433,44.84536082,45.30927835,45.77319588,46.2371134,46.70103093,47.16494845,47.62886598,48.09278351,48.55670103,49.02061856,49.48453608,49.94845361,50.41237113,50.87628866,51.34020619,51.80412371,52.26804124,52.73195876,53.19587629,53.65979381,54.12371134,54.58762887,55.05154639,55.51546392,55.97938144,56.44329897,56.90721649,57.37113402,57.83505155,58.29896907,58.7628866,59.22680412,59.69072165,60.15463918,60.6185567,61.08247423,61.54639175,62.01030928,62.4742268,62.93814433,63.40206186,63.86597938,64.32989691,64.79381443,65.25773196,65.72164948,66.18556701,66.64948454,67.11340206,67.57731959,68.04123711,68.50515464,68.96907216,69.43298969,69.89690722,70.36082474,70.82474227,71.28865979,71.75257732,72.21649485,72.68041237,73.1443299,73.60824742,74.07216495,74.53608247,75],"colors":["#959052","#979356","#9c9a60","#a09c64","#a3a067","#a8a570","#aaa875","#acac79","#b1b182","#b5b587","#b6b88c","#bcbd93","#bfc199","#c1c39c","#c1c39c","#c6caa5","#cacdaa","#cccfaf","#cfd1b3","#cccfb3","#c8ccb3","#c6c8b3","#bfc3b3","#bfc3b3","#bcc1b3","#b8bdb3","#b5bab3","#afb5b3","#acb3b3","#aaafb3","#a7aeb3","#a3aab3","#a0a8b3","#9ca5b3","#9aa1b3","#97a0b3","#939cb3","#909ab3","#939ab5","#8c95b3","#8791b1","#838eb1","#808caf","#7c89af","#7785ae","#7482ac","#7080aa","#6b7caa","#6275a8","#5e72a7","#5e72a7","#5b70a5","#566da3","#5269a3","#4f67a1","#4b64a1","#4660a0","#425d9e","#4260a1","#4467a5","#486eaa","#4975ae","#4d7cb1","#4f83b5","#508aba","#5491bf","#5699c3","#599ec6","#5ba5ca","#5daccf","#60b3d4","#62bad8","#64c1db","#67c8df","#69cfe4","#6ed6e8","#67d6d6","#60d6c4","#59d6b3","#52d6a1","#4bd690","#42d67e","#3bd66d","#34d65b","#11d418","#11d116","#0fcd16","#0fc816","#0fc316","#0fbf15","#0fbc15","#0fb613","#0eb313","#0eaf13","#0eaa13","#0ca511","#0ca111","#0c9e11","#0c9911","#0c950f","#0c900f","#0a8c0f","#0a870f","#0a830e","#0a800e","#0a7c0c","#0a770c","#08720c","#086e0c","#086b0a","#08660a","#08620a","#085d08","#1c6708","#317208","#467c08","#5b8707","#6e9107","#839c05","#97a805","#acb105","#c1bc05","#d6c603","#e9d103","#ffe200","#ffd800","#ffd300","#ffc800","#ffc300","#ffba00","#ffb500","#ffb000","#ffac00","#ffa700","#ff9e00","#ff9900","#ff9300","#ff8900","#ff8500","#ff7f00","#ff0000","#f70000","#f00000","#e90000","#e20000","#db0000","#d40000","#cd0000","#c60000","#bf0000","#b80000","#b10000","#aa0000","#a30000","#9a0000","#930000","#8c0000","#850000","#7e0000","#770000","#700000","#ffffff","#fff4ff","#ffe9ff","#ffdfff","#ffd4ff","#ffc8ff","#ffbdff","#ffb3ff","#ffa8ff","#ff9cff","#ff91ff","#ff75ff","#fb6bfd","#f960f9","#f656f6","#f24bf4","#ef3ff0","#ed36ef","#e92aeb","#e61fe8","#e416e6","#e10ae2","#b100ff","#ac00fb","#a300f6","#9a00f4","#9300ef","#8700e9","#8200e8","#7900e2","#7200dd","#6900db","#6200d6"]}');var Tr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Er=function(){function t(t,e,r){if(t.length!=e.length+1)throw"Mismatch between number of levels (".concat(t.length,") and number of colors (").concat(e.length,"; expected ").concat(t.length-1,")");var n=function(t){return"object"==typeof(e=t)&&"color"in e&&"opacity"in e?t:{color:t,opacity:1};var e};this.levels=t,this.colors=e.map((function(t){return n(t)})),r=void 0===r?{}:r,this.overflow_color=void 0===r.overflow_color?null:n(r.overflow_color),this.underflow_color=void 0===r.underflow_color?null:n(r.underflow_color)}return t.prototype.getColors=function(){return this.colors.map((function(t){return t.color}))},t.prototype.getOpacities=function(){return this.colors.map((function(t){return t.opacity}))},t.prototype.withOpacity=function(e){for(var r=[],n=[],o={},i=0;i<this.colors.length;i++){var a=this.colors[i],s=this.levels[i],l=this.levels[i+1],c=e(s,l),u={color:a.color,opacity:c};c>0&&(n[n.length-1]!=s&&n.push(s),n.push(l),r.push(u))}if(null!==this.underflow_color){var f=e(this.levels[0],this.levels[0]);f>0&&(o.underflow_color={color:this.underflow_color.color,opacity:f})}if(null!==this.overflow_color){var h=e(this.levels[this.levels.length-1],this.levels[this.levels.length-1]);h>0&&(o.overflow_color={color:this.overflow_color.color,opacity:h})}return new t(n,r,o)},t.diverging=function(e,r,n,o,i){for(var a,s,l=[],c=[],u=(o-n)/(i-1),f=(o+n)/2,h=[0,0,.9],d=S(T(e)),p=S(T(r)),_=0;_<i;_++){var m=n+_*u,g=void 0,v=void 0,b=void 0,y=void 0;m<f?(y=(f-m)/(f-n),g=(a=Tr([d[0],h[1]+(d[1]-h[1])*y,h[2]+(d[2]-h[2])*y],3))[0],v=a[1],b=a[2]):m>=f&&(y=(m-f)/(o-f),g=(s=Tr([p[0],h[1]+(p[1]-h[1])*y,h[2]+(p[2]-h[2])*y],3))[0],v=s[1],b=s[2]);var w=E(A([g,v,b]));l.push({color:w,opacity:Math.min(2*y,1)})}for(var x=0;x<=i;x++){var R=(o-n)/i;c.push(n+x*R)}return new t(c,l)},t}();function Sr(t,e){var r=t.colors.length,n={};return"over"!=e&&"both"!=e||(n.overflow_color=t.colors[r-1]),"under"!=e&&"both"!=e||(n.underflow_color=t.colors[0]),new Er(t.levels,t.colors,n)}var Ar=Sr(gr,"over").withOpacity((function(t,e){return Math.min((e-20)/10,1)})),Rr=Sr(vr,"over").withOpacity((function(t,e){return Math.min((e-20)/10,1)})),Fr=Sr(br,"over").withOpacity((function(t,e){return Math.min(e/1e3,1)})),Pr=Sr(yr,"both"),Mr=Sr(wr,"both"),Ir=Sr(xr,"over");function Cr(t){var e=document.createElement("canvas");e.width=t.colors.length,e.height=1;var r=e.getContext("2d");return t.colors.forEach((function(t,e){if(null===r)throw"Could not get rendering context for colormap image canvas";r.fillStyle=t.color+Math.round(255*t.opacity).toString(16),r.fillRect(e,0,1,1)})),e}function Or(t){for(var e=[],r=0;r<101;r++)e.push(r/100);var n=t.levels,o=n.length-1,i=n.map((function(t,e){return e/o})),a=n.map((function(t){return(t-n[0])/(n[o]-n[0])})),s=e.map((function(t){var e;for(e=0;!(a[e]<=t&&t<=a[e+1]);e++);var r=(t-a[e])/(a[e+1]-a[e]);return i[e]*(1-r)+i[e+1]*r}));return new lr(s)}var kr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Nr=r(319),Br=r(559),Gr=function(){function t(t,e,r){r=void 0===r?{}:r,this.color=void 0===r.color?[0,0,0,1]:x(r.color);var n=void 0===r.line_width?1:r.line_width;this.width=n;var o=[];if(this.vertices=new fr(t,e.vertices,3,t.TRIANGLE_STRIP),this.extrusion=new fr(t,e.extrusion,2,t.TRIANGLE_STRIP),void 0!==e.offsets?(this.offset=new fr(t,e.offsets,2,t.TRIANGLE_STRIP),this.scale=void 0===r.offset_scale?1:r.offset_scale,o.push("OFFSET")):(this.offset=null,this.scale=null),void 0!==e.zoom?(this.min_zoom=new fr(t,e.zoom,1,t.TRIANGLE_STRIP),o.push("ZOOM")):this.min_zoom=null,this.cmap_min=-340282347e30,this.cmap_max=340282347e30,void 0!==e.data){this.min_zoom=new fr(t,e.zoom,1,t.TRIANGLE_STRIP),o.push("DATA");var i=k(t,!0),a=i.format,s=i.type,l=i.row_alignment,c=void 0;void 0===r.cmap?(c={format:t.RGBA,type:t.UNSIGNED_BYTE,width:1,height:1,image:new Uint8Array(this.color),mag_filter:t.NEAREST},this.index_map=new lr([0,1])):(c={format:t.RGBA,type:t.UNSIGNED_BYTE,image:Cr(r.cmap),mag_filter:t.NEAREST},this.cmap_min=r.cmap.levels[0],this.cmap_max=r.cmap.levels[r.cmap.levels.length-1],this.index_map=Or(r.cmap));var u={format:a,type:s,width:this.index_map.length,height:1,image:new Uint16Array(this.index_map.buffer),mag_filter:t.LINEAR,row_alignment:l};this.cmap_nonlin_texture=new dr(t,u),this.line_texture=new dr(t,c),this.line_data=new fr(t,e.data,1,t.TRIANGLE_STRIP)}else this.line_texture=null,this.line_data=null,this.index_map=null;this.program=new _r(t,Nr,Br,{define:o})}return t.make=function(e,r,n){return o=this,i=void 0,s=function(){var o;return function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(i){switch(i.label){case 0:return[4,C.makePolyLines(r)];case 1:return o=i.sent(),[2,new t(e,o,n)]}}))},new((a=void 0)||(a=Promise))((function(t,e){function r(t){try{l(s.next(t))}catch(t){e(t)}}function n(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var o;e.done?t(e.value):(o=e.value,o instanceof a?o:new a((function(t){t(o)}))).then(r,n)}l((s=s.apply(o,i||[])).next())}));var o,i,a,s},t.prototype.render=function(t,e,r,n,o,i){var a=kr(r,2),s=a[0],l=a[1];e instanceof Float32Array&&(e=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([],kr(e),!1));var c={a_pos:this.vertices,a_extrusion:this.extrusion},u={u_matrix:e,u_line_width:this.width,u_map_width:s,u_map_height:l,u_map_bearing:o,u_offset:0},f={};null!==this.offset&&(c.a_offset=this.offset,u.u_offset_scale=this.scale*(l/s)),null!==this.min_zoom&&(c.a_min_zoom=this.min_zoom,u.u_zoom=n),null!==this.line_data&&null!==this.line_texture?(c.a_data=this.line_data,f.u_cmap_sampler=this.line_texture,f.u_cmap_nonlin_sampler=this.cmap_nonlin_texture,u.u_cmap_min=this.cmap_min,u.u_cmap_max=this.cmap_max,u.u_n_index=this.index_map.length):u.u_color=this.color,this.program.use(c,u,f),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.program.draw(),this.program.setUniforms({u_offset:-2}),this.program.draw(),this.program.setUniforms({u_offset:-1}),this.program.draw(),this.program.setUniforms({u_offset:1}),this.program.draw()},t}(),Lr=r(614),Dr=r.n(Lr),$r=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Ur=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},jr=r(207),Wr=r(286),zr=new P((function(t){return new _r(t,jr,Wr)}));function Hr(t){var e=t.filter((function(t){return void 0!==t.data})),r=[],n=function(t){let e=0,r=0;for(const n of t)e+=n.w*n.h,r=Math.max(r,n.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let o=0,i=0;for(const e of t)for(let t=n.length-1;t>=0;t--){const r=n[t];if(!(e.w>r.w||e.h>r.h)){if(e.x=r.x,e.y=r.y,i=Math.max(i,e.y+e.h),o=Math.max(o,e.x+e.w),e.w===r.w&&e.h===r.h){const e=n.pop();t<n.length&&(n[t]=e)}else e.h===r.h?(r.x+=e.w,r.w-=e.w):e.w===r.w?(r.y+=e.h,r.h-=e.h):(n.push({x:r.x+e.w,y:r.y,w:r.w-e.w,h:e.h}),r.y+=e.h,r.h-=e.h);break}}return{w:o,h:i,fill:e/(o*i)||0}}(e.map((function(t){var e={x:0,y:0,w:t.width,h:t.height};return r.push({glyph:t,bin:e}),e}))),o=n.w,i=n.h,a=new Uint8Array(o*i),s={};r.forEach((function(t){var e=t.bin,r=t.glyph;s[r.id]={id:r.id,width:r.width,height:r.height,left:r.left,top:r.top,atlas_i:e.x,atlas_j:e.y,advance:r.advance};for(var n=0;n<r.width;n++)for(var i=0;i<r.height;i++){var l=n+r.width*i,c=n+e.x+o*(i+e.y);a[c]=r.data[l]}}));var l=s["M".charCodeAt(0)],c=l.height-l.top,u=-l.top;return{atlas:a,atlas_width:o,atlas_height:i,baseline:c,top:u,glyph_info:s}}function Vr(t){return $r(this,void 0,void 0,(function(){var e,r;return Ur(this,(function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:return[4,n.sent().blob()];case 2:return[4,n.sent().arrayBuffer()];case 3:return e=n.sent(),o=new Uint8Array(e),i=function(t,e,r){switch(t){case 1:e.id=r.readVarint();break;case 2:e.data=r.readBytes();break;case 3:e.width=r.readVarint()+6;break;case 4:e.height=r.readVarint()+6;break;case 5:e.left=r.readSVarint();break;case 6:e.top=r.readSVarint();break;case 7:e.advance=r.readVarint()}},a=function(t,e,r){if(3==t){var n=r.readMessage(i,{});e.push(n)}},r=new(Dr())(o).readFields((function(t,e,r){1==t&&r.readMessage(a,e)}),[]),[2,Hr(r)]}var o,i,a}))}))}var Yr,Xr={horizontal_align:"left",vertical_align:"baseline",font_size:12,text_color:[0,0,0],halo_color:[0,0,0],halo:!1},Jr=function(){function t(t,e,r,n){this.program=zr.getValue(t),this.opts=M(n,Xr);var o={format:I(t)?t.R8:t.LUMINANCE,type:t.UNSIGNED_BYTE,width:r.atlas_width,height:r.atlas_height,image:r.atlas,row_alignment:1,mag_filter:t.LINEAR};this.texture=new dr(t,o);var i=6*e.map((function(t){return t.text.length})).reduce((function(t,e){return t+e}),0),a=new Float32Array(3*i),s=new Float32Array(2*i),l=new Float32Array(2*i),c=0,u=0,f=0;e.forEach((function(t){for(var e=t.lat,o=t.lon,i=t.text,h=void 0===t.min_zoom?0:t.min_zoom,d=new B(o,e).toMercatorCoord(),p=d.x,_=d.y,m=0,g=u,v=0;v<i.length;v++){var b=i.charCodeAt(v),y=r.glyph_info[b];void 0!==y?(m+=y.left,a[c++]=p,a[c++]=_,a[c++]=h,a[c++]=p,a[c++]=_,a[c++]=h,a[c++]=p,a[c++]=_,a[c++]=h,a[c++]=p,a[c++]=_,a[c++]=h,a[c++]=p,a[c++]=_,a[c++]=h,a[c++]=p,a[c++]=_,a[c++]=h,s[u++]=m,s[u++]=r.baseline+y.top-y.height,s[u++]=m,s[u++]=r.baseline+y.top-y.height,s[u++]=m+y.width,s[u++]=r.baseline+y.top-y.height,s[u++]=m,s[u++]=r.baseline+y.top,s[u++]=m+y.width,s[u++]=r.baseline+y.top,s[u++]=m+y.width,s[u++]=r.baseline+y.top,l[f++]=y.atlas_i/r.atlas_width,l[f++]=(y.atlas_j+y.height)/r.atlas_height,l[f++]=y.atlas_i/r.atlas_width,l[f++]=(y.atlas_j+y.height)/r.atlas_height,l[f++]=(y.atlas_i+y.width)/r.atlas_width,l[f++]=(y.atlas_j+y.height)/r.atlas_height,l[f++]=y.atlas_i/r.atlas_width,l[f++]=y.atlas_j/r.atlas_height,l[f++]=(y.atlas_i+y.width)/r.atlas_width,l[f++]=y.atlas_j/r.atlas_height,l[f++]=(y.atlas_i+y.width)/r.atlas_width,l[f++]=y.atlas_j/r.atlas_height,m+=y.advance-y.left):m+=7}if("center"==n.horizontal_align)for(v=g;v<g+12*i.length;v+=2)s[v]-=m/2;else if("right"==n.horizontal_align)for(v=g;v<g+12*i.length;v+=2)s[v]-=m;if("top"==n.vertical_align)for(v=g+1;v<g+12*i.length;v+=2)s[v]-=r.baseline-r.top;else if("middle"==n.vertical_align)for(v=g+1;v<g+12*i.length;v+=2)s[v]-=(r.baseline-r.top)/2})),this.anchors=new fr(t,a,3,t.TRIANGLE_STRIP),this.offsets=new fr(t,s,2,t.TRIANGLE_STRIP),this.texcoords=new fr(t,l,2,t.TRIANGLE_STRIP)}return t.make=function(e,r,n,o){return $r(this,void 0,void 0,(function(){var i;return Ur(this,(function(a){switch(a.label){case 0:return[4,Vr(n)];case 1:return i=a.sent(),[2,new t(e,r,i,o)]}}))}))},t.prototype.render=function(t,e,r,n){var o=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}(r,2),i={u_matrix:e,u_map_width:o[0],u_map_height:o[1],u_map_zoom:n,u_font_size:this.opts.font_size,u_text_color:this.opts.text_color,u_halo_color:this.opts.halo_color,u_offset:0};i.u_is_halo=this.opts.halo?1:0,this.program.use({a_pos:this.anchors,a_offset:this.offsets,a_tex_coord:this.texcoords},i,{u_sdf_sampler:this.texture}),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.program.draw(),this.opts.halo&&(this.program.setUniforms({u_is_halo:0}),this.program.draw()),this.program.setUniforms({u_offset:-2,u_is_halo:this.opts.halo?1:0}),this.program.draw(),this.opts.halo&&(this.program.setUniforms({u_is_halo:0}),this.program.draw()),this.program.setUniforms({u_offset:-1,u_is_halo:this.opts.halo?1:0}),this.program.draw(),this.opts.halo&&(this.program.setUniforms({u_is_halo:0}),this.program.draw()),this.program.setUniforms({u_offset:1,u_is_halo:this.opts.halo?1:0}),this.program.draw(),this.opts.halo&&(this.program.setUniforms({u_is_halo:0}),this.program.draw())},t}(),Zr=r(526),qr=(Yr=function(t,e){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Yr(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Yr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Kr=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Qr=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},tn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},en=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},rn=function(t){function e(e,r){var n=t.call(this)||this;return n.field=e,n.interval=r.interval||1,n.levels=r.levels||[],n.color=r.color||"#000000",n.gl_elems=null,n.contours=null,n}return qr(e,t),e.prototype.updateField=function(t){return Kr(this,void 0,void 0,(function(){var e,r,n,o;return Qr(this,(function(i){switch(i.label){case 0:return this.field=t,null===this.gl_elems?[2]:(e=this.gl_elems.gl,[4,this.getContours()]);case 1:return r=i.sent(),n=Object.values(r).flat().map((function(t){return{vertices:t}})),o=this,[4,Gr.make(e,n,{line_width:2,color:this.color})];case 2:return o.contours=i.sent(),this.gl_elems.map.triggerRepaint(),[2]}}))}))},e.prototype.getContours=function(){return Kr(this,void 0,void 0,(function(){return Qr(this,(function(t){switch(t.label){case 0:return[4,this.field.getContours({interval:this.interval,levels:this.levels})];case 1:return[2,t.sent()]}}))}))},e.prototype.onAdd=function(t,e){return Kr(this,void 0,void 0,(function(){return Qr(this,(function(r){switch(r.label){case 0:return this.gl_elems={gl:e,map:t},[4,this.updateField(this.field)];case 1:return r.sent(),[2]}}))}))},e.prototype.render=function(t,e){if(null!==this.gl_elems&&null!==this.contours){var r=this.gl_elems;e instanceof Float32Array&&(e=en([],tn(e),!1));var n=r.map.getZoom(),o=r.map.getCanvas().width,i=r.map.getCanvas().height,a=r.map.getBearing(),s=r.map.getPitch();this.contours.render(t,e,[o,i],n,a,s)}},e}(O),nn={n_decimal_places:0,font_face:"Trebuchet MS",font_size:12,font_url_template:"",text_color:"#000000",halo_color:"#000000",halo:!1},on=function(t){function e(e,r){var n=t.call(this)||this;return n.opts=M(r,nn),n.contours=e,n.text_collection=null,n.gl_elems=null,n}return qr(e,t),e.prototype.updateField=function(){return Kr(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,c,u,f,h,d,p,_,m,g,v,b,y,w,x,E,S,A,R,F,P,M,I,C,O,k,N,G,L,D;return Qr(this,(function($){switch($.label){case 0:return null===this.gl_elems?[2]:(t=this.gl_elems.map,e=this.gl_elems.gl,r=t.getStyle(),n=""==this.opts.font_url_template?r.glyphs:this.opts.font_url_template,o=n.replace("{range}","0-255").replace("{fontstack}",this.opts.font_face),i=[],[4,this.contours.getContours()]);case 1:for(a=$.sent(),(s=Object.keys(a).map(parseFloat)).sort((function(t,e){return t-e})),l=t.getMaxZoom(),c=.01*Math.pow(2,7-l),u=null,f=null,h=null,d=null,Object.entries(a).forEach((function(t){var e=tn(t,2),r=e[0],n=e[1],o=parseFloat(r)-s[0],a=r.toString();n.forEach((function(t){var e=t.map((function(t){var e=(new(B.bind.apply(B,en([void 0],tn(t),!1)))).toMercatorCoord();return[e.x,e.y]})),r=[];e.forEach((function(t,n){if(0==n)r.push(0);else{var o=e[n-1],i=Math.hypot(o[0]-t[0],o[1]-t[1]);r.push(r[n-1]+i)}}));for(var n=0,s=1;s<r.length;s++){var p=c*(n+o/2%1);if(r[s-1]<=p&&p<r[s]){var _=t[s-1],m=t[s],g=(p-r[s-1])/(r[s]-r[s-1]),v=(1-g)*_[0]+g*m[0],b=(1-g)*_[1]+g*m[1];(null===h||v<h)&&(h=v),(null===d||v>d)&&(d=v),(null===u||b<u)&&(u=b),(null===f||b>f)&&(f=b),i.push({lon:v,lat:b,min_zoom:l,text:a}),n++}}}))})),p=new Zr.kdTree(i,(function(t,e){return Math.hypot(t.lon-e.lon,t.lat-e.lat)}),["lon","lat"]),_=new B(h,u).toMercatorCoord(),m=_.x,g=_.y,v=new B(d,f).toMercatorCoord(),b=v.x,y=v.y,w=b-m,x=g-y,E=Math.round(4*w/c),S=Math.round(4*x/c),A=[],R=[],M=0;M<E;M++)A.push(m+M/E*w);for(I=0;I<S;I++)R.push(y+I/S*x);for(F=1,P=l-1;P>=0;P--){for(M=0;M<E;M+=F)for(I=0;I<S;I+=F)C=A[M],O=R[I],k=B.fromMercatorCoord(C,O),N=tn(p.nearest({lon:k.lng,lat:k.lat,min_zoom:0,text:""},1)[0],2),G=N[0],N[1],G.min_zoom=P;F*=2}return L={horizontal_align:"center",vertical_align:"middle",font_size:this.opts.font_size,halo:this.opts.halo,text_color:T(this.opts.text_color),halo_color:T(this.opts.halo_color)},D=this,[4,Jr.make(e,i,o,L)];case 2:return D.text_collection=$.sent(),t.triggerRepaint(),[2]}}))}))},e.prototype.onAdd=function(t,e){return Kr(this,void 0,void 0,(function(){return Qr(this,(function(r){return this.gl_elems={gl:e,map:t},this.updateField(),[2]}))}))},e.prototype.render=function(t,e){if(null!==this.gl_elems&&null!==this.text_collection){var r=this.gl_elems,n=r.map.getCanvas().width,o=r.map.getCanvas().height,i=r.map.getZoom();this.text_collection.render(t,e,[n,o],i)}},e}(O);const an=rn;var sn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ln=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},cn=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},un=r(370),fn=r(824),hn=function(t){function e(e,r){var n=t.call(this)||this;return n.field=e,n.cmap=r.cmap,n.opacity=r.opacity||1,n.cmap_image=Cr(n.cmap),n.index_map=Or(n.cmap),n.gl_elems=null,n.fill_texture=null,n.image_mag_filter=null,n.cmap_mag_filter=null,n}return sn(e,t),e.prototype.updateField=function(t){return ln(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l;return cn(this,(function(c){return this.field=t,null===this.gl_elems||(e=this.gl_elems.gl,r=this.gl_elems.map,n=this.field.getTextureData(),o=k(e,!(n instanceof Float32Array)),i=o.format,a=o.type,s=o.row_alignment,l={format:i,type:a,width:this.field.grid.ni,height:this.field.grid.nj,image:n,mag_filter:this.image_mag_filter,row_alignment:s},null===this.fill_texture?this.fill_texture=new dr(e,l):this.fill_texture.setImageData(l),r.triggerRepaint()),[2]}))}))},e.prototype.onAdd=function(t,e){return ln(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,c,u,f,h,d,p,_;return cn(this,(function(m){switch(m.label){case 0:if(null===this.image_mag_filter||null===this.cmap_mag_filter)throw"Implement magnification filtes in a subclass";return r=new _r(e,un,fn),[4,this.field.grid.getWGLBuffers(e)];case 1:return n=m.sent(),o=n.vertices,i=n.texcoords,a=o,s=i,l={format:e.RGBA,type:e.UNSIGNED_BYTE,image:this.cmap_image,mag_filter:this.cmap_mag_filter},c=new dr(e,l),u=k(e,!0),f=u.format,h=u.type,d=u.row_alignment,p={format:f,type:h,width:this.index_map.length,height:1,image:new Uint16Array(this.index_map.buffer),mag_filter:e.LINEAR,row_alignment:d},_=new dr(e,p),this.gl_elems={gl:e,map:t,program:r,vertices:a,texcoords:s,cmap_texture:c,cmap_nonlin_texture:_},this.updateField(this.field),[2]}}))}))},e.prototype.render=function(t,e){if(null!==this.gl_elems&&null!==this.fill_texture){var r=this.gl_elems;e instanceof Float32Array&&(e=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([],function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}(e),!1));var n=null===this.cmap.underflow_color?[0,0,0,0]:T(this.cmap.underflow_color.color).concat(this.cmap.underflow_color.opacity),o=null===this.cmap.overflow_color?[0,0,0,0]:T(this.cmap.overflow_color.color).concat(this.cmap.overflow_color.opacity);r.program.use({a_pos:r.vertices,a_tex_coord:r.texcoords},{u_cmap_min:this.cmap.levels[0],u_cmap_max:this.cmap.levels[this.cmap.levels.length-1],u_matrix:e,u_opacity:this.opacity,u_n_index:this.index_map.length,u_underflow_color:n,u_overflow_color:o,u_offset:0},{u_fill_sampler:this.fill_texture,u_cmap_sampler:r.cmap_texture,u_cmap_nonlin_sampler:r.cmap_nonlin_texture}),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),r.program.draw(),r.program.setUniforms({u_offset:-2}),r.program.draw(),r.program.setUniforms({u_offset:-1}),r.program.draw(),r.program.setUniforms({u_offset:1}),r.program.draw()}},e}(O),dn=function(t){function e(e,r){return t.call(this,e,r)||this}return sn(e,t),e.prototype.updateField=function(e){return ln(this,void 0,void 0,(function(){return cn(this,(function(r){switch(r.label){case 0:return[4,t.prototype.updateField.call(this,e)];case 1:return r.sent(),[2]}}))}))},e.prototype.onAdd=function(e,r){return ln(this,void 0,void 0,(function(){return cn(this,(function(n){switch(n.label){case 0:return this.image_mag_filter=r.NEAREST,this.cmap_mag_filter=r.LINEAR,[4,t.prototype.onAdd.call(this,e,r)];case 1:return n.sent(),[2]}}))}))},e.prototype.render=function(e,r){t.prototype.render.call(this,e,r)},e}(hn),pn=function(t){function e(e,r){return t.call(this,e,r)||this}return sn(e,t),e.prototype.updateField=function(e){return ln(this,void 0,void 0,(function(){return cn(this,(function(r){switch(r.label){case 0:return[4,t.prototype.updateField.call(this,e)];case 1:return r.sent(),[2]}}))}))},e.prototype.onAdd=function(e,r){return ln(this,void 0,void 0,(function(){return cn(this,(function(n){switch(n.label){case 0:return this.image_mag_filter=r.LINEAR,this.cmap_mag_filter=r.NEAREST,[4,t.prototype.onAdd.call(this,e,r)];case 1:return n.sent(),[2]}}))}))},e.prototype.render=function(e,r){t.prototype.render.call(this,e,r)},e}(hn),_n=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},mn=r(955),gn=r(49),vn=function(){function t(t,e,r,n,o,i,a){this.field=t,this.spec=o,this.color=i,this.size_multiplier=a,this.thin_fac=e,this.max_zoom=r,this.billboard_image=n,this.gl_elems=null,this.wind_textures=null;var s=Math.log2(e),l=Math.max(s+1-r,0);this.trim_inaccessible=Math.pow(2,l),this.show_field=!0}return t.prototype.updateField=function(t){if(this.field=t,null!==this.gl_elems){var e=this.gl_elems.gl,r=this.field.getThinnedField(this.trim_inaccessible,this.trim_inaccessible),n=r.getTextureData(),o=n.u,i=n.v;this.show_field=null!==o;var a=k(e,!(o instanceof Float32Array)),s=a.format,l=a.type,c=a.row_alignment,u={format:s,type:l,width:r.grid.ni,height:r.grid.nj,image:o,mag_filter:e.NEAREST,row_alignment:c},f={format:s,type:l,width:r.grid.ni,height:r.grid.nj,image:i,mag_filter:e.NEAREST,row_alignment:c};null===this.wind_textures?this.wind_textures={u:new dr(e,u),v:new dr(e,f)}:(this.wind_textures.u.setImageData(u),this.wind_textures.v.setImageData(f))}},t.prototype.setup=function(t){return e=this,r=void 0,o=function(){var e,r,n,o,i,a,s;return function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(l){switch(l.label){case 0:return e=new _r(t,mn,gn),[4,(r=this.field.getThinnedField(this.trim_inaccessible,this.trim_inaccessible)).grid.getWGLBillboardBuffers(t,this.thin_fac/this.trim_inaccessible,this.max_zoom)];case 1:return n=l.sent(),o=n.vertices,i=n.texcoords,a=r.grid.getVectorRotationTexture(t).rotation,s=new dr(t,this.billboard_image),this.gl_elems={gl:t,program:e,vertices:o,texcoords:i,texture:s,proj_rot_texture:a},[2]}}))},new((n=void 0)||(n=Promise))((function(t,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(a,s)}l((o=o.apply(e,r||[])).next())}));var e,r,n,o},t.prototype.render=function(t,e,r,n,o,i){var a=_n(r,2),s=a[0],l=a[1];if(null!==this.gl_elems&&null!==this.wind_textures&&this.show_field){e instanceof Float32Array&&(e=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([],_n(e),!1));var c=this.gl_elems,u=this.spec.BB_HEIGHT*(l/s)*this.size_multiplier,f=this.spec.BB_WIDTH/this.spec.BB_TEX_WIDTH,h=this.spec.BB_HEIGHT/this.spec.BB_TEX_HEIGHT;c.program.use({a_pos:c.vertices,a_tex_coord:c.texcoords},{u_bb_size:u,u_bb_width:f,u_bb_height:h,u_bb_mag_bin_size:this.spec.BB_MAG_BIN_SIZE,u_bb_mag_wrap:this.spec.BB_MAG_WRAP,u_offset:0,u_bb_color:this.color,u_matrix:e,u_map_aspect:l/s,u_zoom:n,u_map_bearing:o},{u_sampler:c.texture,u_u_sampler:this.wind_textures.u,u_v_sampler:this.wind_textures.v,u_rot_sampler:c.proj_rot_texture}),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),c.program.draw(),c.program.setUniforms({u_offset:-2}),c.program.draw(),c.program.setUniforms({u_offset:-1}),c.program.draw(),c.program.setUniforms({u_offset:1}),c.program.draw()}},t}(),bn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yn=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},wn=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},xn={BB_WIDTH:85,BB_HEIGHT:256,BB_TEX_WIDTH:1024,BB_TEX_HEIGHT:1024,BB_MAG_MAX:235,BB_MAG_WRAP:60,BB_MAG_BIN_SIZE:5},Tn=null;const En=function(t){function e(e,r){var n=t.call(this)||this;n.fields=e;var o=x(r.color||"#000000");return n.color=[o[0],o[1],o[2]],n.thin_fac=r.thin_fac||1,n.gl_elems=null,n}return bn(e,t),e.prototype.updateField=function(t){return yn(this,void 0,void 0,(function(){return wn(this,(function(e){return this.fields=t,null===this.gl_elems||(this.gl_elems.barb_billboards.updateField(t),this.gl_elems.map.triggerRepaint()),[2]}))}))},e.prototype.onAdd=function(t,e){return yn(this,void 0,void 0,(function(){var r,n,o;return wn(this,(function(i){switch(i.label){case 0:return e.getExtension("OES_texture_float"),e.getExtension("OES_texture_float_linear"),r=t.getMaxZoom(),null===Tn&&(Tn=function(){var t=document.createElement("canvas");function e(t,e,r,n){var o=xn.BB_WIDTH/2-4,i=o/2;if(n<2.5)t.beginPath(),t.arc(e,r,o/2,0,2*Math.PI),t.stroke();else{var a=0,s=n,l=0,c=Math.floor((s+2.5)/50);l+=c*o/2+i+(c-1)*i/2,s-=50*c;var u=Math.floor((s+2.5)/10);l+=u*i,s-=10*u,l+=Math.floor((s+2.5)/5)*i,n<7.5&&(l+=i),l=Math.max(120,l),t.beginPath(),t.moveTo(e,r),t.lineTo(e,r+l),s=n,a=r+l;for(var f=!1,h=!0;s>47.5;)f&&(a+=i/2),h||t.moveTo(e,a),t.lineTo(e-o,a),t.lineTo(e,a-o/2),a-=o/2+i,s-=50,f=!0,h=!1;for(;s>7.5;)h||t.moveTo(e,a),t.lineTo(e-o,a+o/2),a-=i,s-=10,h=!1;for(n<7.5&&(a-=i);s>2.5;)t.moveTo(e,a),t.lineTo(e-o/2,a+o/4),s-=5;t.stroke()}}t.width=xn.BB_TEX_WIDTH,t.height=xn.BB_TEX_HEIGHT;var r=t.getContext("2d");if(null===r)throw"Could not get rendering context for the wind barb canvas";r.lineWidth=8,r.miterLimit=4;for(var n=0;n<=xn.BB_MAG_MAX;n+=xn.BB_MAG_BIN_SIZE)e(r,n%xn.BB_MAG_WRAP/xn.BB_MAG_BIN_SIZE*xn.BB_WIDTH+xn.BB_WIDTH/2,Math.floor(n/xn.BB_MAG_WRAP)*xn.BB_HEIGHT+xn.BB_WIDTH/2,n);return t}()),n={format:e.RGBA,type:e.UNSIGNED_BYTE,image:Tn,mag_filter:e.NEAREST},[4,(o=new vn(this.fields,this.thin_fac,r,n,xn,this.color,.1)).setup(e)];case 1:return i.sent(),this.gl_elems={map:t,barb_billboards:o},this.updateField(this.fields),[2]}}))}))},e.prototype.render=function(t,e){if(null!==this.gl_elems){var r=this.gl_elems,n=r.map.getZoom(),o=r.map.getCanvas().width,i=r.map.getCanvas().height,a=r.map.getBearing(),s=r.map.getPitch();r.barb_billboards.render(t,e,[o,i],n,a,s)}},e}(O);var Sn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),An=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Rn=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Fn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Pn=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Mn=r(431),In=r(714);const Cn=function(t){function e(e,r){var n=t.call(this)||this;n.field=e;var o=void 0!==(r=void 0!==r?r:{}).colors?Pn([],Fn(r.colors),!1):["#000000"];return n.colors=o.reverse().map((function(t){return x(t)})).flat(),n.opacity=void 0!==r.opacity?r.opacity:1,n.gl_elems=null,n.fill_texture=null,n}return Sn(e,t),e.prototype.updateField=function(t){return An(this,void 0,void 0,(function(){var e,r,n,o,i,a,s;return Rn(this,(function(l){return this.field=t,null===this.gl_elems||((e=this.gl_elems.gl).pixelStorei(e.UNPACK_ALIGNMENT,2),r=this.field.getTextureData(),n=k(e,!(r instanceof Float32Array)),o=n.format,i=n.type,a=n.row_alignment,s={format:o,type:i,width:this.field.grid.ni,height:this.field.grid.nj,image:r,mag_filter:e.NEAREST,row_alignment:a},null===this.fill_texture?this.fill_texture=new dr(e,s):this.fill_texture.setImageData(s)),[2]}))}))},e.prototype.onAdd=function(t,e){return An(this,void 0,void 0,(function(){var t,r,n,o,i,a;return Rn(this,(function(s){switch(s.label){case 0:return e.getExtension("OES_texture_float"),t=new _r(e,Mn,In),[4,this.field.grid.getWGLBuffers(e)];case 1:return r=s.sent(),n=r.vertices,o=r.texcoords,i=n,a=o,this.gl_elems={gl:e,program:t,vertices:i,texcoords:a},this.updateField(this.field),[2]}}))}))},e.prototype.render=function(t,e){if(null!==this.gl_elems&&null!==this.fill_texture){var r=this.gl_elems;e instanceof Float32Array&&(e=Pn([],Fn(e),!1)),r.program.use({a_pos:r.vertices,a_tex_coord:r.texcoords},{u_matrix:e,u_opacity:this.opacity,u_colors:this.colors,u_num_colors:this.colors.length/4,u_offset:0},{u_fill_sampler:this.fill_texture}),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),r.program.draw(),r.program.setUniforms({u_offset:-2}),r.program.draw(),r.program.setUniforms({u_offset:-1}),r.program.draw(),r.program.setUniforms({u_offset:1}),r.program.draw()}},e}(O);var On=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kn=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Nn=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Bn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Gn=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Ln={BB_WIDTH:256,BB_HEIGHT:256,BB_TEX_WIDTH:256,BB_TEX_HEIGHT:256,BB_MAG_MAX:1e3,BB_MAG_WRAP:1e3,BB_MAG_BIN_SIZE:1e3},Dn=null,$n=new Er([0,1,3,6,9],["#ffffcc","#a1dab4","#41b6c4","#225ea8"]);const Un=function(t){function e(e,r){var n=t.call(this)||this;return r=r||{},n.profile_field=e,n.bgcolor=r.bgcolor||"#000000",n.thin_fac=r.thin_fac||1,n.hodo_scale=(Ln.BB_TEX_WIDTH-2)/(40*Ln.BB_TEX_WIDTH),n.bg_size=140,n.gl_elems=null,n.line_elems=null,n}return On(e,t),e.prototype.updateField=function(t){return kn(this,void 0,void 0,(function(){var e,r,n,o,i,a,s=this;return Nn(this,(function(l){switch(l.label){case 0:return this.profile_field=t,null===this.gl_elems?[2]:(e=this.gl_elems.gl,this.gl_elems.bg_billboard.updateField(t.getStormMotionGrid()),r=this.profile_field.profiles,n=r.map((function(t){var e=R(t.jlat,t.ilon,s.thin_fac);return{offsets:Gn([],Bn(t.u),!1).map((function(e,r){return[e-t.smu,t.v[r]-t.smv]})),vertices:Gn([],Bn(t.u),!1).map((function(e){return[t.lon,t.lat]})),zoom:e,data:Gn([],Bn(t.z),!1)}})),[4,Gr.make(e,n,{line_width:2.5,cmap:$n,offset_scale:this.hodo_scale*this.bg_size})]);case 1:return o=l.sent(),i=r.map((function(t){var e=R(t.jlat,t.ilon,s.thin_fac),r=Math.hypot(t.smu,t.smv),n=Math.PI/2-Math.atan2(-t.smv,-t.smu);return{offsets:[[2*Math.sin(n),2*Math.cos(n)],[r*Math.sin(n),r*Math.cos(n)]],vertices:[[t.lon,t.lat],[t.lon,t.lat]],zoom:e}})),[4,Gr.make(e,i,{line_width:1.5,color:this.bgcolor,offset_scale:this.hodo_scale*this.bg_size})];case 2:return a=l.sent(),this.line_elems={hodo_line:o,sm_line:a},[2]}}))}))},e.prototype.onAdd=function(t,e){return kn(this,void 0,void 0,(function(){var r,n,o;return Nn(this,(function(i){switch(i.label){case 0:return null===Dn&&(Dn=function(){var t=document.createElement("canvas");t.width=Ln.BB_TEX_WIDTH,t.height=Ln.BB_TEX_HEIGHT;var e=t.getContext("2d");if(null===e)throw"Could not get rendering context for the hodograph background canvas";e.lineWidth=4;for(var r=Ln.BB_TEX_WIDTH/4;r<=Ln.BB_TEX_WIDTH/2;r+=Ln.BB_TEX_WIDTH/4)e.beginPath(),e.arc(Ln.BB_TEX_WIDTH/2,Ln.BB_TEX_WIDTH/2,r-2,0,2*Math.PI),e.stroke();var n=Ln.BB_TEX_WIDTH/2,o=Ln.BB_TEX_WIDTH/2;return e.beginPath(),e.moveTo(n,o),e.lineTo(n+10,o+20),e.lineTo(n-10,o+20),e.lineTo(n,o),e.fill(),t}()),r={format:e.RGBA,type:e.UNSIGNED_BYTE,image:Dn,mag_filter:e.NEAREST},n=t.getMaxZoom(),[4,(o=new vn(this.profile_field.getStormMotionGrid(),this.thin_fac,n,r,Ln,T(this.bgcolor),.004*this.bg_size)).setup(e)];case 1:return i.sent(),this.gl_elems={gl:e,map:t,bg_billboard:o},this.updateField(this.profile_field),[2]}}))}))},e.prototype.render=function(t,e){if(null!==this.gl_elems&&null!==this.line_elems){var r=this.gl_elems,n=this.line_elems,o=r.map.getZoom(),i=r.map.getCanvas().width,a=r.map.getCanvas().height,s=r.map.getBearing(),l=r.map.getPitch();n.hodo_line.render(t,e,[i,a],o,s,l),n.sm_line.render(t,e,[i,a],o,s,s),r.bg_billboard.render(t,e,[i,a],o,s,l)}},e}(O);var jn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wn=function(){function t(t){this.type="custom",this.id=t,this.map=null}return t.prototype.repaint=function(){null!==this.map&&this.map.triggerRepaint()},t}(),zn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.field=r,n}return jn(e,t),e.prototype.onAdd=function(t,e){return r=this,n=void 0,i=function(){return function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(r){switch(r.label){case 0:return this.map=t,[4,this.field.onAdd(t,e)];case 1:return r.sent(),[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function a(t){try{l(i.next(t))}catch(t){e(t)}}function s(t){try{l(i.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(a,s)}l((i=i.apply(r,n||[])).next())}));var r,n,o,i},e.prototype.render=function(t,e){this.field.render(t,e)},e}(Wn),Hn=function(t){function e(e){var r=t.call(this,e)||this;return r.fields={},r.field_key=null,r.map=null,r.gl=null,r}return jn(e,t),e.prototype.onAdd=function(t,e){var r=this;this.map=t,this.gl=e,Object.values(this.fields).forEach((function(n){n.onAdd(t,e).then((function(t){r.repaint()}))})),this.repaint()},e.prototype.render=function(t,e){null!==this.map&&null!==this.gl&&null!==this.field_key&&this.fields.hasOwnProperty(this.field_key)&&null!==this.fields[this.field_key]&&this.fields[this.field_key].render(t,e)},e.prototype.setActiveKey=function(t){this.field_key,this.field_key=t,this.repaint()},e.prototype.getKeys=function(){return Object.keys(this.fields)},e.prototype.addField=function(t,e){var r=this;this.field_key,null!==this.map&&null!==this.gl&&null!==t&&t.onAdd(this.map,this.gl).then((function(t){r.repaint()})),this.fields[e]=t,null===this.field_key&&(this.field_key=e)},e}(Wn),Vn=function(){return Vn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vn.apply(this,arguments)},Yn=function(t,e,r){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return void 0!==e&&Object.entries(e).forEach((function(t){var e=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}(t,2),r=e[0],o=e[1];n.setAttribute(r,o.toString())})),void 0!==r&&r.appendChild(n),n};function Xn(t,e){var r=e.label||"",n=e.ticks||t.levels,o=e.orientation||"vertical",i=e.fontface||"sans-serif",a=e.ticklabelsize||12,s=e.tick_direction||("vertical"==o?"left":"bottom");if("vertical"==o&&("top"==s||"bottom"==s)||"horizontal"==o&&("left"==s||"right"==s))throw"tick_direction of '".concat(s," doesn't match an orientation of ").concat(o);var l,c,u,f,h,d,p,_,m,g,v,b=function(t){return t.toString().length},y=b(n[0]),w=b(n[n.length-1]),x=null!==t.underflow_color||null!==t.overflow_color,T=600,E=T/9,S=Math.max("horizontal"==o?6*Math.max(y,w):8,x?E/(2*Math.sqrt(3)):0);"vertical"==o?(l=T,c=E,p=(u="left"==s?53.66666666666667:3)+(h=10),m=u+h/2,_=(f=S)+(d=T-2*S),g=null===t.underflow_color?_:_+E/(2*Math.sqrt(3)),v=null===t.overflow_color?f:f-E/(2*Math.sqrt(3))):(c=T,l=E-6,p=(u=S)+(h=T-2*S),m=(f="bottom"==s?3:47.66666666666667)+(d=10)/2,_=f+d,g=null===t.underflow_color?u:u-E/(2*Math.sqrt(3)),v=null===t.overflow_color?p:p+E/(2*Math.sqrt(3)));var A,R=t.colors.length,F=Yn("svg",{width:c,height:l}),P=Yn("g",{},F);A="vertical"==o?"left"==s?{"text-anchor":"end",transform:"translate(".concat(u,", ").concat(f,")")}:{transform:"translate(".concat(u+h,", ").concat(f,")")}:"bottom"==s?{"text-anchor":"middle",transform:"translate(".concat(u,", ").concat(f+d,")")}:{"text-anchor":"middle",transform:"translate(".concat(u,", ").concat(f,")")};var M=Yn("g",A,F);if(t.colors.forEach((function(t,e){Yn("rect",Vn(Vn({},"vertical"==o?{x:u,y:f+d*(1-(e+1)/R),width:h,height:d/R}:{x:u+h*e/R,y:f,width:h/R,height:d}),{fill:t.color,opacity:t.opacity}),P)})),null!==t.underflow_color){var I={points:"vertical"==o?"".concat(p," ").concat(_,", ").concat(m," ").concat(g,", ").concat(u," ").concat(_,", ").concat(p," ").concat(_):"".concat(u," ").concat(_,", ").concat(g," ").concat(m,", ").concat(u," ").concat(f,", ").concat(u," ").concat(_),fill:t.underflow_color.color,opacity:t.underflow_color.opacity};Yn("polygon",I,P)}if(null!==t.overflow_color){var C={points:"vertical"==o?"".concat(u," ").concat(f,", ").concat(m," ").concat(v,", ").concat(p," ").concat(f,", ").concat(u," ").concat(f):"".concat(p," ").concat(f,", ").concat(v," ").concat(m,", ").concat(p," ").concat(_,", ").concat(p," ").concat(f),fill:t.overflow_color.color,opacity:t.overflow_color.opacity};Yn("polygon",C,P)}var O,k,N=t.levels[0],B=t.levels[t.levels.length-1];return n.filter((function(t){return N<=t&&t<=B})).forEach((function(e){var r=t.levels.map((function(t){return Math.abs(t-e)})),n=r.indexOf(r.reduce((function(t,e){return Math.min(t,e)})));e<=t.levels[n]&&n>0&&(n-=1),n+=(e-t.levels[n])/(t.levels[n+1]-t.levels[n]);var l="vertical"==o?{transform:"translate(0, ".concat(d*(1-n/R),")")}:{transform:"translate(".concat(h*n/R,", 0)")},c=Yn("g",l,M);Yn("line",Vn(Vn({},"vertical"==o?"left"==s?{x2:-6}:{x2:6}:"bottom"==s?{y2:6}:{y2:-6}),{stroke:"#000000","stroke-width":1.5}),c),Yn("text",Vn(Vn({},"vertical"==o?"left"==s?{x:-9,dy:"0.32em"}:{x:9,dy:"0.32em"}:"bottom"==s?{y:9,dy:"0.8em"}:{y:-9,dy:"0em"}),{fill:"#000000",style:"font-family: ".concat(i,"; font-size: ").concat(a,"pt")}),c).textContent=e.toString()})),O="vertical"==o?"".concat(u," ").concat(f,", ").concat(m," ").concat(v,", ").concat(p," ").concat(f,", ").concat(p," ").concat(_,", ")+"".concat(m," ").concat(g,", ").concat(u," ").concat(_,", ").concat(u," ").concat(f):"".concat(u," ").concat(f,", ").concat(p," ").concat(f,", ").concat(v," ").concat(m,", ").concat(p," ").concat(_,", ")+"".concat(u," ").concat(_,", ").concat(g," ").concat(m,", ").concat(u," ").concat(f),Yn("polygon",{points:O,stroke:"#000000","stroke-width":1.5,fill:"none"},F),k="vertical"==o?"left"==s?{transform:"translate(15, ".concat(l/2,") rotate(-90)")}:{transform:"translate(".concat(c-6,", ").concat(l/2,") rotate(-90)")}:"bottom"==s?{transform:"translate(".concat(c/2,", ").concat(l-5,")")}:{transform:"translate(".concat(c/2,", 15)")},Yn("text",Vn(Vn({},k),{fill:"#000000","text-anchor":"middle",style:"font-family: ".concat(i,";")}),F).textContent=r,F}function Jn(t,e,r){if(t.length!=e.length)throw"Mismatch between the number of colors (".concat(t.length,") and the number of labels (").concat(e.length,")");var n=void 0===(r=void 0===r?{}:r).n_cols?1:r.n_cols,o=void 0===r.fontface?"sans-serif":r.fontface,i=Math.ceil(t.length/n),a=Yn("svg",{width:123*n+5*(n+1),height:20*i+5*(i+1)}),s=Yn("g",{},a);return t.forEach((function(t,r){var n=e[r],a=r%i,l=Math.floor(r/i),c=1;"string"!=typeof t&&(c=t.opacity,t=t.color);var u=5+128*l,f=5+25*a;Yn("rect",{x:u,y:f,fill:t,opacity:c,width:20,height:20},s),Yn("text",Vn(Vn({},{x:u+20+3,y:f+10,dy:"0.32em"}),{fill:"#000000",style:"font-size: 0.8em; font-family: ".concat(o,";")}),s).textContent=n})),a}var Zn=r(176),qn=r.n(Zn);r.p;var Kn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Qn=null;function to(){return null===Qn&&(Qn=qn()()),Qn}function eo(t,e,r){return n=this,o=void 0,a=function(){var n,o,i,a,s,l,c,u,f,h;return function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(d){switch(d.label){case 0:if(void 0===r.interval&&void 0===r.levels)throw"Must supply either an interval or levels to contourCreator()";return n=void 0===r.interval?0:r.interval,o=void 0===r.levels?[]:function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([],Kn(r.levels),!1),[4,to()];case 1:if(i=d.sent(),a=e.getGridCoords(),(s=new i.FloatList).resize(e.ni*e.nj,0),t.forEach((function(t,e){return s.set(e,t)})),(l=new i.FloatList).resize(e.ni,0),a.x.forEach((function(t,e){return l.set(e,t)})),(c=new i.FloatList).resize(e.nj,0),a.y.forEach((function(t,e){return c.set(e,t)})),0==o.length){for(u=i.getContourLevelsFloat32(s,e.ni,e.nj,n),f=0;f<u.size();f++)o.push(u.get(f));u.delete()}return h={},o.forEach((function(t){var r=i.makeContoursFloat32(s,l,c,t);h[t]=[];for(var n=0;n<r.size();n++){var o=r.get(n),a=o.point_list;h[t].push([]);for(var u=0;u<a.size();u++){var f=a.get(u),d=Kn(e.transform(f.x,f.y,{inverse:!0}),2),p=d[0],_=d[1];h[t][n].push([p,_]),f.delete()}a.delete(),o.delete()}r.delete()})),s.delete(),l.delete(),c.delete(),[2,h]}}))},new((i=void 0)||(i=Promise))((function(t,e){function r(t){try{l(a.next(t))}catch(t){e(t)}}function s(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,s)}l((a=a.apply(n,o||[])).next())}));var n,o,i,a}var ro=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},no=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},oo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},io=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ao=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};function so(t){return t.constructor}var lo=function(){function t(t,e){var r=this;if(this.grid=t,this.data=e,t.ni*t.nj!=e.length)throw"Data size (".concat(e.length,") doesn't match the grid dimensions (").concat(t.ni," x ").concat(t.nj,"; expected ").concat(t.ni*t.nj," points)");this.contour_cache=new P((function(t){return ro(r,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return[4,eo(this.data,this.grid,t)];case 1:return[2,e.sent()]}}))}))}))}return t.prototype.getTextureData=function(){var t=this.data;return t instanceof Float32Array?t:new Uint16Array(t.buffer)},t.prototype.getContours=function(t){return ro(this,void 0,void 0,(function(){return no(this,(function(e){switch(e.label){case 0:return[4,this.contour_cache.getValue(t)];case 1:return[2,e.sent()]}}))}))},t.aggregateFields=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];function o(t,e){var r,n,o,i,a,s;return no(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),r=oo(t),n=r.next(),l.label=1;case 1:return n.done?[3,4]:(o=n.value,[4,e(o)]);case 2:l.sent(),l.label=3;case 3:return n=r.next(),[3,1];case 4:return[3,7];case 5:return i=l.sent(),a={error:i},[3,7];case 6:try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}return[7];case 7:return[2]}}))}var i=so(r[0].data),a=F.apply(void 0,ao([],io(r.map((function(t){return t.data}))),!1)),s=new i(o(a,(function(t){return e.apply(void 0,ao([],io(t),!1))})));return new t(r[0].grid,s)},t}(),co=function(){function t(t,e,r,n){n=void 0===n?{}:n,this.u=new lo(t,e),this.v=new lo(t,r),this.relative_to=void 0===n.relative_to?"grid":n.relative_to}return t.prototype.getTextureData=function(){var t=this.u.data,e=this.v.data;return{u:t instanceof Float32Array?t:new Uint16Array(t.buffer),v:e instanceof Float32Array?e:new Uint16Array(e.buffer)}},t.prototype.getThinnedField=function(e,r){var n=this,o=this.grid.getThinnedGrid(e,r),i=function(t){for(var i=new(so(t))(o.ni*o.nj),a=0;a<o.ni;a++)for(var s=0;s<o.nj;s++){var l=a*e+n.grid.ni*s*r;i[a+o.ni*s]=t[l]}return i},a=i(this.u.data),s=i(this.v.data);return new t(o,a,s,{relative_to:this.relative_to})},Object.defineProperty(t.prototype,"grid",{get:function(){return this.u.grid},enumerable:!1,configurable:!0}),t}(),uo=function(){function t(t,e){this.profiles=e,this.grid=t}return t.prototype.getStormMotionGrid=function(){var t=this,e=this.profiles,r=new lr(this.grid.ni*this.grid.nj).fill(parseFloat("nan")),n=new lr(this.grid.ni*this.grid.nj).fill(parseFloat("nan"));return e.forEach((function(e){var o=e.ilon+t.grid.ni*e.jlat;r[o]=e.smu,n[o]=e.smv})),new co(this.grid,r,n,{relative_to:"grid"})},t}(),fo=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ho=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},po=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},_o=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},mo=function(){function t(t,e,r,n){var o=this;this.type=t,this.is_conformal=e,this.ni=r,this.nj=n,this.buffer_cache=new P((function(t){var e=Math.max(Math.floor(o.ni/50),20),r=Math.max(Math.floor(o.nj/50),20);return function(t,e,r){return ho(this,void 0,void 0,(function(){var n,o,i,a,s,l,c,u,f,h,d;return po(this,(function(p){switch(p.label){case 0:return n=1/(2*(r=void 0!==r?r:e).ni),o=1/(2*r.nj),i=e.ni*e.nj/(r.ni*r.nj),a=e.getEarthCoords(),s=a.lats,l=a.lons,[4,C.makeDomainVerticesAndTexCoords(s,l,e.ni,e.nj,n,o)];case 1:for(c=p.sent(),u=0;u<c.grid_cell_size.length;u++)c.grid_cell_size[u]*=i;return f=new fr(t,c.vertices,2,t.TRIANGLE_STRIP),h=new fr(t,c.tex_coords,2,t.TRIANGLE_STRIP),d=new fr(t,c.grid_cell_size,1,t.TRIANGLE_STRIP),[2,{vertices:f,texcoords:h,cellsize:d}]}}))}))}(t,o.copy({ni:e,nj:r}),o)})),this.billboard_buffer_cache=new P((function(t,e,r){return function(t,e,r,n){return ho(this,void 0,void 0,(function(){var o,i,a,s,l,c;return po(this,(function(u){switch(u.label){case 0:return o=e.getEarthCoords(),i=o.lats,a=o.lons,[4,C.makeBBElements(i,a,e.ni,e.nj,r,n)];case 1:return s=u.sent(),l=new fr(t,s.pts,3,t.TRIANGLE_STRIP),c=new fr(t,s.tex_coords,2,t.TRIANGLE_STRIP),[2,{vertices:l,texcoords:c}]}}))}))}(t,o,e,r)})),this.vector_rotation_cache=new P((function(t){return function(t,e){var r=e.getEarthCoords();e.is_conformal||console.warn("Vector rotations for non-conformal projections are not supported. The output may look incorrect.");for(var n=new lr(r.lats.length),o=0;o<r.lats.length;o++){var i=r.lons[o],a=r.lats[o],s=_o(e.transform(i,a),2),l=s[0],c=s[1],u=_o(e.transform(i+.01,a),2),f=u[0],h=u[1];n[o]=Math.atan2(h-c,f-l)}var d=k(t,!0),p={format:d.format,type:d.type,row_alignment:d.row_alignment,image:new Uint16Array(n.buffer),width:e.ni,height:e.nj,mag_filter:t.LINEAR};return{rotation:new dr(t,p)}}(t,o)}))}return t.prototype.getWGLBuffers=function(t){return ho(this,void 0,void 0,(function(){return po(this,(function(e){switch(e.label){case 0:return[4,this.buffer_cache.getValue(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.getWGLBillboardBuffers=function(t,e,r){return ho(this,void 0,void 0,(function(){return po(this,(function(n){switch(n.label){case 0:return[4,this.billboard_buffer_cache.getValue(t,e,r)];case 1:return[2,n.sent()]}}))}))},t.prototype.getVectorRotationTexture=function(t){return this.vector_rotation_cache.getValue(t)},t}(),go=function(t){function e(e,r,n,o,i,a){var s=t.call(this,"latlon",!0,e,r)||this;s.ll_lon=n,s.ll_lat=o,s.ur_lon=i,s.ur_lat=a;var l=(s.ur_lon-s.ll_lon)/(s.ni-1),c=(s.ur_lat-s.ll_lat)/(s.nj-1);return s.ll_cache=new P((function(){for(var t=new Float32Array(s.ni*s.nj),e=new Float32Array(s.ni*s.nj),r=0;r<s.ni;r++)for(var n=0;n<s.nj;n++){var o=r+n*s.ni;t[o]=s.ll_lon+r*l,e[o]=s.ll_lat+n*c}return{lons:t,lats:e}})),s.gc_cache=new P((function(){for(var t=new Float32Array(s.ni),e=new Float32Array(s.nj),r=0;r<s.ni;r++)t[r]=s.ll_lon+r*l;for(var n=0;n<s.nj;n++)e[n]=s.ll_lat+n*c;return{x:t,y:e}})),s}return fo(e,t),e.prototype.copy=function(t){return new e(void 0!==(t=void 0!==t?t:{}).ni?t.ni:this.ni,void 0!==t.nj?t.nj:this.nj,void 0!==t.ll_lon?t.ll_lon:this.ll_lon,void 0!==t.ll_lat?t.ll_lat:this.ll_lat,void 0!==t.ur_lon?t.ur_lon:this.ur_lon,void 0!==t.ur_lat?t.ur_lat:this.ur_lat)},e.prototype.getEarthCoords=function(){return this.ll_cache.getValue()},e.prototype.getGridCoords=function(){return this.gc_cache.getValue()},e.prototype.transform=function(t,e,r){return[t,e]},e.prototype.getThinnedGrid=function(t,r){var n=(this.ur_lon-this.ll_lon)/this.ni,o=(this.ur_lat-this.ll_lat)/this.nj,i=Math.ceil(this.ni/t),a=Math.ceil(this.nj/r),s=(this.ni-1)%t,l=(this.nj-1)%r;return new e(i,a,this.ll_lon,this.ll_lat,this.ur_lon-s*n,this.ur_lat-l*o)},e}(mo),vo=function(t){function e(e,r,n,o,i,a,s,l,c){var u=t.call(this,"latlonrot",!0,e,r)||this;u.np_lon=n,u.np_lat=o,u.lon_shift=i,u.ll_lon=a,u.ll_lat=s,u.ur_lon=l,u.ur_lat=c,u.llrot=function(t){var e=Math.PI/180,r=t.np_lat*e,n=t.np_lon*e,o=t.lon_shift*e,i=Math.sin(r),a=Math.cos(r);return function(t,r,s){return(s=void 0===s?{inverse:!1}:s).inverse?function(t,r){t*=e,r*=e;var s=Math.sin(r),l=Math.cos(r),c=Math.sin(t-n),u=Math.cos(t-n),f=Math.asin(i*s+a*l*u),h=o+Math.atan2(l*c,i*l*u-a*s);return t>Math.PI&&(t-=2*Math.PI),[h/e,f/e]}(t,r):function(t,r){t*=e,r*=e;var s=Math.sin(r),l=Math.cos(r),c=Math.sin(t-o),u=Math.cos(t-o),f=Math.asin(i*s-a*l*u),h=n+Math.atan2(l*c,i*l*u+a*s);return h>Math.PI&&(h-=2*Math.PI),[h/e,f/e]}(t,r)}}({np_lon:n,np_lat:o,lon_shift:i});var f=(u.ur_lon-u.ll_lon)/(u.ni-1),h=(u.ur_lat-u.ll_lat)/(u.nj-1);return u.ll_cache=new P((function(){for(var t=new Float32Array(u.ni*u.nj),e=new Float32Array(u.ni*u.nj),r=0;r<u.ni;r++)for(var n=u.ll_lon+r*f,o=0;o<u.nj;o++){var i=u.ll_lat+o*h,a=_o(u.llrot(n,i),2),s=a[0],l=a[1],c=r+o*u.ni;t[c]=s,e[c]=l}return{lons:t,lats:e}})),u.gc_cache=new P((function(){for(var t=new Float32Array(u.ni),e=new Float32Array(u.nj),r=0;r<u.ni;r++)t[r]=u.ll_lon+r*f;for(var n=0;n<u.nj;n++)e[n]=u.ll_lat+n*h;return{x:t,y:e}})),u}return fo(e,t),e.prototype.copy=function(t){var r=void 0!==(t=void 0!==t?t:{}).ni?t.ni:this.ni,n=void 0!==t.nj?t.nj:this.nj,o=void 0!==t.ll_lon?t.ll_lon:this.ll_lon,i=void 0!==t.ll_lat?t.ll_lat:this.ll_lat,a=void 0!==t.ur_lon?t.ur_lon:this.ur_lon,s=void 0!==t.ur_lat?t.ur_lat:this.ur_lat;return new e(r,n,this.np_lon,this.np_lat,this.lon_shift,o,i,a,s)},e.prototype.getEarthCoords=function(){return this.ll_cache.getValue()},e.prototype.getGridCoords=function(){return this.gc_cache.getValue()},e.prototype.transform=function(t,e,r){var n="inverse"in(r=void 0===r?{}:r)&&r.inverse;return this.llrot(t,e,{inverse:!n})},e.prototype.getThinnedGrid=function(t,r){var n=(this.ur_lon-this.ll_lon)/this.ni,o=(this.ur_lat-this.ll_lat)/this.nj,i=Math.ceil(this.ni/t),a=Math.ceil(this.nj/r),s=(this.ni-1)%t,l=(this.nj-1)%r,c=this.ll_lon,u=this.ll_lat,f=this.ur_lon-s*n,h=this.ur_lat-l*o;return new e(i,a,this.np_lon,this.np_lat,this.lon_shift,c,u,f,h)},e}(mo),bo=function(t){function e(e,r,n,o,i,a,s,l,c){var u=t.call(this,"lcc",!0,e,r)||this;u.lon_0=n,u.lat_0=o,u.lat_std=i,u.ll_x=a,u.ll_y=s,u.ur_x=l,u.ur_y=c,u.lcc=N({lon_0:n,lat_0:o,lat_std:i});var f=(u.ur_x-u.ll_x)/(u.ni-1),h=(u.ur_y-u.ll_y)/(u.nj-1);return u.ll_cache=new P((function(){for(var t=new Float32Array(u.ni*u.nj),e=new Float32Array(u.ni*u.nj),r=0;r<u.ni;r++)for(var n=u.ll_x+r*f,o=0;o<u.nj;o++){var i=u.ll_y+o*h,a=_o(u.lcc(n,i,{inverse:!0}),2),s=a[0],l=a[1],c=r+o*u.ni;t[c]=s,e[c]=l}return{lons:t,lats:e}})),u.gc_cache=new P((function(){for(var t=new Float32Array(u.ni),e=new Float32Array(u.nj),r=0;r<u.ni;r++)t[r]=u.ll_x+r*f;for(var n=0;n<u.nj;n++)e[n]=u.ll_y+n*h;return{x:t,y:e}})),u}return fo(e,t),e.prototype.copy=function(t){var r=void 0!==(t=void 0!==t?t:{}).ni?t.ni:this.ni,n=void 0!==t.nj?t.nj:this.nj,o=void 0!==t.ll_x?t.ll_x:this.ll_x,i=void 0!==t.ll_y?t.ll_y:this.ll_y,a=void 0!==t.ur_x?t.ur_x:this.ur_x,s=void 0!==t.ur_y?t.ur_y:this.ur_y;return new e(r,n,this.lon_0,this.lat_0,this.lat_std,o,i,a,s)},e.prototype.getEarthCoords=function(){return this.ll_cache.getValue()},e.prototype.getGridCoords=function(){return this.gc_cache.getValue()},e.prototype.transform=function(t,e,r){var n="inverse"in(r=void 0===r?{}:r)&&r.inverse;return this.lcc(t,e,{inverse:n})},e.prototype.getThinnedGrid=function(t,r){var n=(this.ur_x-this.ll_x)/this.ni,o=(this.ur_y-this.ll_y)/this.nj,i=Math.ceil(this.ni/t),a=Math.ceil(this.nj/r),s=(this.ni-1)%t,l=(this.nj-1)%r,c=this.ll_x,u=this.ll_y,f=this.ur_x-s*n,h=this.ur_y-l*o;return new e(i,a,this.lon_0,this.lat_0,this.lat_std,c,u,f,h)},e}(mo),yo={bluered:function(t,e,r){return Er.diverging("#0000ff","#ff0000",t,e,r)},redblue:function(t,e,r){return Er.diverging("#ff0000","#0000ff",t,e,r)},pw_speed500mb:Ar,pw_speed850mb:Rr,pw_cape:Fr,pw_t2m:Pr,pw_td2m:Mr,nws_storm_clear_refl:Ir};function wo(){to()}})(),n})()));
//# sourceMappingURL=autumnplot-gl.js.map